(()=>{"use strict";const COC7={eras:{standard:"CoC7.Era1920",modern:"CoC7.EraModern",modernPulp:"CoC7.EraModernPulp",pulp:"CoC7.EraPulp",downDarkerTrails:"CoC7.EraDownDarkerTrails",downDarkerTrailsPulp:"CoC7.EraDownDarkerTrailsPulp",darkAges:"CoC7.EraDarkAges",darkAgesPulp:"CoC7.EraDarkAgesPulp",regency:"CoC7.EraRegency",regencyPulp:"CoC7.EraRegencyPulp",reignOfTerror:"CoC7.EraReignOfTerror",gasLight:"CoC7.EraGasLight",gasLightPulp:"CoC7.EraGasLightPulp",invictus:"CoC7.EraInvictus"},monetaryFormatKeys:{decimalLeft:"decimalLeft",decimalRight:"decimalRight",integerLeft:"integerLeft",integerRight:"integerRight",lsd:"lsd",roman:"roman"},monetaryFormats:{decimalLeft:"CoC7.MonetaryFormatDecimalLeft",decimalRight:"CoC7.MonetaryFormatDecimalRight",integerLeft:"CoC7.MonetaryFormatIntegerLeft",integerRight:"CoC7.MonetaryFormatIntegerRight",lsd:"CoC7.MonetaryFormatLsd",roman:"CoC7.MonetaryFormatRoman"},monetaryTypeKeys:{none:"none",asses:"asses",sestertii:"sestertii",quinarii:"quinarii",denarii:"denarii",d:"d",s:"s",value:"value",multiplier:"multiplier"},monetaryTypes:{none:{name:"CoC7.MonetaryTypeNone",filter:[]},asses:{name:"CoC7.MonetaryTypeAsses",filter:["roman"]},sestertii:{name:"CoC7.MonetaryTypeSestertii",filter:["roman"]},quinarii:{name:"CoC7.MonetaryTypeQuinarii",filter:["roman"]},denarii:{name:"CoC7.MonetaryTypeDenarii",filter:["roman"]},d:{name:"CoC7.MonetaryTypeDeniers",filter:["lsd"]},s:{name:"CoC7.MonetaryTypeSous",filter:["lsd"]},value:{name:"CoC7.MonetaryTypeOne",filter:[]},multiplier:{name:"CoC7.MonetaryTypeCreditRating",filter:[]}},characteristics:{str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},skillProperties:{noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm",ranged:"CoC7.SkillRanged",requiresname:"CoC7.SkillRequiresName",keepbasevalue:"CoC7.SkillKeepBaseValue",picknameonly:"CoC7.SkillPickNameOnly",onlyone:"CoC7.SkillSpecializationIsUnique"},weaponProperties:{melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},spellProperties:{call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},bookType:{mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},talentType:{physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},statusType:{mania:"CoC7.Mania",phobia:"CoC7.Phobia"},occupationProperties:{classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},formula:{}};COC7.formula.actor={"@STR":"this.system.characteristics.str.value","@CON":"this.system.characteristics.con.value","@SIZ":"this.system.characteristics.siz.value","@DEX":"this.system.characteristics.dex.value","@APP":"this.system.characteristics.app.value","@INT":"this.system.characteristics.int.value","@POW":"this.system.characteristics.pow.value","@EDU":"this.system.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.system.characteristics.str.value","@CON":"this.actor.system.characteristics.con.value","@SIZ":"this.actor.system.characteristics.siz.value","@DEX":"this.actor.system.characteristics.dex.value","@APP":"this.actor.system.characteristics.app.value","@INT":"this.actor.system.characteristics.int.value","@POW":"this.actor.system.characteristics.pow.value","@EDU":"this.actor.system.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newBookName="CoC7.NewBookName",COC7.newSkillName="CoC7.NewSkillName",COC7.newSpellName="CoC7.NewSpellName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.rangedSpecializationName="CoC7.RangedSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver",noResponse:"CoC7.NoResponse"};class CoC7ActiveEffect extends ActiveEffect{apply(actor,change){"system.attribs.armor.value"===change.key?isNaN(change.value)||isNaN(actor.system.attribs.armor.value)||(actor.system.attribs.armor.value=Number(actor.system.attribs.armor.value)):"system.attribs.db.value"===change.key&&isNaN(change.value)&&!isNaN(actor.system.attribs.db.value)&&(actor.system.attribs.db.value=String(actor.system.attribs.db.value));return super.apply(actor,change)}static onManageActiveEffect(event,owner){event.preventDefault();const a=event.currentTarget,li=a.closest("li"),effect=li.dataset.effectId?owner.effects.get(li.dataset.effectId):null;switch(a.dataset.action){case"create":return owner.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",origin:owner.uuid,"duration.rounds":"temporary"===li.dataset.effectType?1:void 0,disabled:"inactive"===li.dataset.effectType}]);case"edit":return effect.sheet.render(!0);case"delete":return effect.delete();case"toggle":return effect.update({disabled:!effect.disabled})}}_prepareDuration(){const duration=super._prepareDuration();return"seconds"===duration.type&&(duration.seconds>3600?duration.label=new Date(1e3*duration.seconds).toISOString().slice(11,19):duration.seconds>100&&(duration.label=new Date(1e3*duration.seconds).toISOString().slice(14,19))),duration}static filterActiveEffects(effect,conditionName){return foundry.utils.isNewerVersion(game.version,"11")?effect.statuses.has(conditionName):effect.flags.core?.statusId===conditionName}static getStatusKey(effect){let options=[];return foundry.utils.isNewerVersion(game.version,"11")?effect.statuses.size>0&&(options=[...effect.statuses.values()]):options=[effect.getFlag("core","statusId")],options.find((v=>Object.prototype.hasOwnProperty.call(COC7.status,v)))}get isStatus(){return"string"==typeof CoC7ActiveEffect.getStatusKey(this)}static prepareActiveEffectCategories(effects,{status=!0}={}){const categories={temporary:{type:"temporary",label:game.i18n.localize("CoC7.Temporary"),effects:[]},passive:{type:"passive",label:game.i18n.localize("CoC7.Passive"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("CoC7.Inactive"),effects:[]},suppressed:{type:"suppressed",label:game.i18n.localize("CoC7.Suppressed"),effects:[],info:[game.i18n.localize("CoC7.Unavailable")]}};status&&(categories.status={type:"status",label:game.i18n.localize("Status"),effects:[]});for(const e of effects)e.isSuppressed?categories.suppressed.effects.push(e):e.isStatus?categories.status.effects.push(e):e.disabled?categories.inactive.effects.push(e):e.isTemporary?categories.temporary.effects.push(e):categories.passive.effects.push(e);return categories.suppressed.hidden=!categories.suppressed.effects.length,categories}static prepareNPCActiveEffectCategories(effects){let count=0;const categories={active:{type:"active",label:game.i18n.localize("Active"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]}};for(const e of effects)count+=1,e._getSourceName(),e.isSuppressed||e.disabled?categories.inactive.effects.push(e):categories.active.effects.push(e);return count>0&&(categories.expended=!0),categories}}class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let roll,alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus"),"bronze"===alternativeDice&&foundry.utils.isNewerVersion(game.modules.get("dice-so-nice").version,"5.0.0")&&!foundry.utils.isNewerVersion(game.modules.get("dice-so-nice").version,"5.0.5")&&(alternativeDice="bronze01"))),roll=game.CoC7.dev.dice.alwaysCrit&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.crit01):game.CoC7.dev.dice.alwaysFumble&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.fumble99):await new Roll("1dt"+(""!==alternativeDice?"+1do["+alternativeDice+"]":"+1dt").repeat(Math.abs(modif))+"+1d10").roll({async:!0});const result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice);for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total));if(modif<0)result.tens.total=0===result.unit.total&&result.tens.results.includes(0)?100:Math.max(...result.tens.results);else if(0===result.unit.total){const dice=result.tens.results.filter((t=>t>0));result.tens.total=0===dice.length?100:Math.min(...dice)}else result.tens.total=Math.min(...result.tens.results);return result.total=result.unit.total+result.tens.total,result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d"),chatData={whisper:null,blind:!1};ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode")),await game.dice3d.showForRoll(roll,game.user,syncDice,0===chatData.whisper.length?null:chatData.whisper,chatData.blind)}}static async combinedRoll(options){options.pool=options.pool??{},options.pool[0]=!1;const keys=Object.keys(options.pool).map((v=>parseInt(v,10)));let penaltyDice=Math.abs(Math.min(0,Math.min(...keys))),bonusDice=Math.max(0,Math.max(...keys));const hasDSN=game.modules.get("dice-so-nice")?.active,pool=[];pool.push("1dt+1d10"),penaltyDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDiePenalty")+"]":"+1dt").repeat(Math.abs(penaltyDice))),bonusDice>0&&pool.push((hasDSN?"+1do["+("bronze"===game.settings.get("CoC7","tenDieBonus")&&foundry.utils.isNewerVersion(game.modules.get("dice-so-nice").version,"5.0.0")&&!foundry.utils.isNewerVersion(game.modules.get("dice-so-nice").version,"5.0.5")?"bronze01":game.settings.get("CoC7","tenDieBonus"))+"]":"+1dt").repeat(Math.abs(bonusDice)));const roll=await new Roll(pool.join("")).roll({async:!0}),result={groups:{baseDie:0,penaltyDice:[],bonusDice:[]},unit:0,roll};let baseSet=!1;for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?baseSet?penaltyDice>0?(result.groups.penaltyDice.push(d.total),penaltyDice--):(result.groups.bonusDice.push(d.total),bonusDice--):(result.groups.baseDie=d.total,baseSet=!0):result.unit=10===d.total?0:d.total;const output={};for(const key in options.pool){output[key]={unit:{total:result.unit,results:[result.unit]},tens:{total:0,results:[]},total:0,roll};const modif=parseInt(key,10);let modifier=modif;output[key].tens.results.push(result.groups.baseDie);for(const offset=Math.abs(modifier);modifier<0;modifier++)output[key].tens.results.push(result.groups.penaltyDice[modifier+offset]);for(const offset=modifier;modifier>0;modifier--)output[key].tens.results.push(result.groups.bonusDice[Math.abs(modifier-offset)]);if(modif<0)output[key].tens.total=0===output[key].unit.total&&output[key].tens.results.includes(0)?100:Math.max(...output[key].tens.results);else if(0===output[key].unit.total){const dice=output[key].tens.results.filter((t=>t>0));output[key].tens.total=0===dice.length?100:Math.min(...dice)}else output[key].tens.total=Math.min(...output[key].tens.results);output[key].total=output[key].unit.total+output[key].tens.total}return output}static fumble99={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]}],total:99,evaluated:!0};static crit01={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:10,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:1,active:!0}]}],total:1,evaluated:!0}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}async _createDocumentLink(eventData,{relativeTo,label}={}){if("string"==typeof eventData.type&&"string"==typeof eventData.uuid&&"Item"===eventData.type&&eventData.uuid.match(/^Actor\./)&&relativeTo instanceof CONFIG.JournalEntryPage.documentClass){const item=await fromUuid(eventData.uuid);if(["skill","weapon"].includes(item.type))return"@coc7.check[type:"+item.type+",name:"+item.name+"]"}return super._createDocumentLink(eventData,{relativeTo,label})}static get iconLanguage(){return"systems/CoC7/assets/icons/skills/language.svg"}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,ranged,checkedProps={};if(void 0!==COC7.eras[propertyId])return CoCIDEditor.eraToggle(this,propertyId);if("weapon"!==this.type||override){if("skill"===this.type&&!override){let modif=!1;switch(propertyId){case"combat":this.system.properties.combat?checkedProps={"system.properties.combat":!1,"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.ranged":!1,"system.specialization":"",name:this.system.skillName}:fighting=!0,modif=!0;break;case"fighting":this.system.properties.fighting||(modif=!0,firearms=!1,ranged=!1,fighting=!0);break;case"firearm":this.system.properties.firearm||(modif=!0,firearms=!0,ranged=!1,fighting=!1),modif=!0;break;case"ranged":this.system.properties.ranged||(modif=!0,firearms=!1,ranged=!0,fighting=!1),modif=!0}if(modif)if(fighting){checkedProps={"system.properties.fighting":!0,"system.properties.firearm":!1,"system.properties.ranged":!1,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.fightingSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}else if(firearms){checkedProps={"system.properties.fighting":!1,"system.properties.firearm":!0,"system.properties.ranged":!1,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.firearmSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}else if(ranged){checkedProps={"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.ranged":!0,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.rangedSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}}}else if("ahdb"===propertyId&&(checkedProps=this.system.properties.ahdb?{"system.properties.ahdb":!1}:{"system.properties.ahdb":!0,"system.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.system.properties.addb?{"system.properties.addb":!1}:{"system.properties.addb":!0,"system.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.system.properties.shotgun?{"system.properties.shotgun":!1,"system.range.extreme.value":null,"system.range.extreme.damage":null,"system.range.long.value":null,"system.range.long.damage":null}:{"system.properties.rngd":!0,"system.properties.melee":!1,"system.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId){let meleeWeapon;"melee"!==propertyId||this.system.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.system.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.system.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.system.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"system.properties.melee":!0,"system.properties.rngd":!1,"system.properties.shotgun":!1,"system.properties.brst":!1,"system.properties.auto":!1,"system.properties.dbrl":!1}:{"system.properties.melee":!1,"system.properties.rngd":!0}}if("special"===propertyId&&(checkedProps=this.system.properties[propertyId]?{"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.ranged":!1,"system.properties.combat":!1,"system.specialization":"",name:this.system.skillName}:{"system.properties.special":!0,name:this.system.specialization+" ("+this.system.skillName+")"}),Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`system.properties.${propertyId}`,propValue=!this.system.properties[propertyId];await this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get shortName(){return this.system.properties.special?this.system.skillName:this.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNamePartsSpec(skillName,specialization){if(!specialization)return{name:skillName,specialization:"",skillName};const specNameRegex=new RegExp("^("+CoC7Utilities.quoteRegExp(specialization)+")\\s*\\((.+)\\)$","i"),match=skillName.match(specNameRegex);return match&&(specialization=match[1],skillName=match[2]),{name:specialization+" ("+skillName+")",specialization,skillName}}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.system?.properties?.special&&void 0!==item.system.skillName)return item.system.skillName}else if(item.properties?.special&&void 0!==item.skillName)return item.skillName;return item.name}static isAnySpec(item){return!("skill"!==item.type||!item.system.properties?.special)&&(!(!item.system.properties?.requiresname&&!item.system.properties?.picknameonly)||[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CONFIG.Item.documentClasses.skill.guessNameParts(item.name).skillName.toLowerCase()))}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.system.properties.combat?(this.system.properties.special||(this.system.properties.special=!0,checkedProps["system.properties.special"]=!0),this.system.properties.fighting||this.system.properties.firearm||(this.system.properties.fighting=!0,checkedProps["system.properties.fighting"]=!0),!this.system.properties.fighting||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.system.properties.firearm||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.system.properties.fighting&&(this.system.properties.fighting=!1,checkedProps["system.properties.fighting"]=!1),this.system.properties.firearm&&(this.system.properties.firearm=!1,checkedProps["system.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.system[set]||(this.system[set]=[]);return this.system[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info(game.i18n.localize("CoC7.SkillXpGainDisabled")):await this.update({[name]:flagValue}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.system.properties?.auto||!0===this.system.properties?.brst||!0===this.system.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.system.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.system.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.system.usesPerRound.normal?this.system.usesPerRound.normal:"1",this.system.usesPerRound.max&&(usesPerRound+=`(${this.system.usesPerRound.max})`),this.system.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.system.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.system.usesPerRound.burst&&(usesPerRound+=`(${this.system.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){const result=parseInt(this.system.range.normal.value);return isNaN(result)?new Roll(this.system.range.normal.value,this.parent?.parseCharacteristics()??{}).evaluateSync().total:result}get longRange(){const result=parseInt(this.system.range.long.value);return isNaN(result)?new Roll(this.system.range.long.value,this.parent?.parseCharacteristics()??{}).evaluateSync().total:result}get extremeRange(){const result=parseInt(this.system.range.extreme.value);return isNaN(result)?new Roll(this.system.range.extreme.value,this.parent?.parseCharacteristics()??{}).evaluateSync().total:result}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}static async calculateBase(actor,data){if("skill"!==data.type)return null;if(String(data.system.base).includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.actor.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(actor,value.substring(11)));let value;try{value=Math.floor(new Roll(data.system.base,parsed)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total)}catch(err){value=0}return value}return isNaN(parseInt(data.system.base))?null:parseInt(data.system.base)}get _base(){if("skill"!==this.type)return[null,!1];if("string"!=typeof this.system.base)return[this.system.base,!1];if(this.system.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.system.base,parsed)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.system.base))?null:parseInt(this.system.base),!1]}async asyncBase(){const e=this._base;return e[1]&&(console.info(`[COC7] (${this.parent?.name}) Evaluating skill ${this.name}:${this.system.base} to ${e[0]}`),await this.update({"system.base":e[0]})),e[0]}get base(){const e=this._base;return e[1]&&this.update({"system.base":e[0]}),e[0]}getBulletLeft(){return"weapon"!==this.type?null:this.system.ammo?this.system.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.system.bullets?parseInt(this.system.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"system.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.system.bullets?parseInt(this.system.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(CoC7Utilities.sortByNameKey)}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}async getChatData(htmlOptions={}){htmlOptions.async=!0;const data=foundry.utils.duplicate(this.system);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=await TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.special=await TextEditor.enrichHTML(data.description.special,htmlOptions);const props=[],fn=this[`_${this.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.system.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.system.skill.main.id){const skill=this.actor?.items.get(this.system.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.system.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.system.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.system.skill.main.name,this.usesAlternativeSkill&&this.system.skill.alternativ.name&&(skillName+=`/${this.system.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.system.malfunction?this.system.malfunction:"-"}),this.system.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.system.bullets})}canBePushed(){return!("skill"!==this.type||!this.system.properties.push)}get impale(){return this.system.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge").toLowerCase()}}function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return!1!==event&&(event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const token=chatHelper.getTokenFromKey(key);return token?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){for(const prop of Object.keys(object))prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}if(element&&object)for(const prop of Object.keys(element.dataset)){if("template"===prop)return;deserialize(object,prop,element.dataset[prop])}}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=foundry.utils.duplicate(scene.document)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||actor.prototypeToken:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token&&(token.document||token).texture.src&&-1===(token.document||token).texture.src.indexOf("*"))return(token.document||token).texture.src}const actor=chatHelper.getActorFromKey(actorKey);return game.settings.get("CoC7","useToken")&&actor.prototypeToken&&actor.prototypeToken.texture.src&&-1===actor.prototypeToken.texture.src?.indexOf("*")?actor.prototypeToken.texture.src:actor.img}static getDistance(startToken,endToken){if(void 0===endToken.center&&void 0!==endToken.id&&startToken.scene?.id){const scene=game.scenes.get(startToken.scene.id);if(void 0!==scene?.tokens){const tokens=scene?.tokens.filter((token=>token.actor.id===endToken.data.document.id)).map((token=>token.object));1===tokens.length&&(endToken=tokens[0])}}let distance={gridUnit:0,value:0,unit:canvas.scene.grid.units};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];if(distance={gridUnit:ray.distance/canvas.scene.grid.size,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.grid.units},game.settings.get("CoC7","distanceElevation")){const elevation=Math.abs((startToken.document.elevation||0)-(endToken.document.elevation||0));distance.value=Math.sqrt(distance.value*distance.value+elevation*elevation)}}else game.settings.get("CoC7","distanceTheatreOfTheMind")||ui.notifications.warn(game.i18n.localize("CoC7.MessageDistanceCalculationFailure"));return distance}static toYards(distance){return"ft"===distance.unit?distance.value/3:distance.value}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");if(tenDice)for(const d of tenDice.querySelectorAll("li")){const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");if(increaseSuccess&&increaseSuccess.querySelectorAll("button"))for(const isl of increaseSuccess.querySelectorAll("button")){const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)}return roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");damage.rolls=[];for(const r of rolls){const roll={};chatHelper.getObjectFromElement(roll,r);const group=roll.group,dice={faces:roll.faces,result:roll.result};delete roll.group,delete roll.faces,delete roll.result,void 0===damage.rolls[group]&&(roll.dice=[],damage.rolls.push(roll)),damage.rolls[group].dice.push(dice)}return object?void 0:damage}}class AverageParentheticalTerm extends ParentheticalTerm{_evaluateSync({minimize=!1,maximize=!1}={}){const roll=this.roll||new AverageRoll(this.term);return this.roll=roll.evaluate({minimize,maximize,async:!1}),this.flavor&&this.roll.terms.forEach((t=>{t.options.flavor=t.options.flavor??this.flavor})),this}}class AverageRoll extends Roll{_evaluateSync({minimize=!1,maximize=!1}={}){return this.terms=this.terms.map((term=>{if(!(term instanceof RollTerm))throw new Error("Roll evaluation encountered an invalid term which was not a RollTerm instance");if(term.isIntermediate){term.evaluate({minimize,maximize,async:!1}),this._dice=this._dice.concat(term.dice);let total=term.total;return minimize&&maximize&&term.dice.length&&(total=Math.floor((term.dice[0].faces+1)/2*term.total)),new NumericTerm({number:total,options:term.options})}return term})),this.terms=this.constructor.simplifyTerms(this.terms),this.terms=this.terms.map((term=>{if(!term._evaluated){if(void 0!==term.faces)return new NumericTerm({number:Math.floor((term.faces+1)/2*term.number),options:term.options});term.evaluate({minimize,maximize,async:!1})}return term})),this._total=this._evaluateTotal(),this}static _splitParentheses(_formula){return this._splitGroup(_formula,{openRegexp:AverageParentheticalTerm.OPEN_REGEXP,closeRegexp:AverageParentheticalTerm.CLOSE_REGEXP,openSymbol:"(",closeSymbol:")",onClose:group=>{const fn=group.open.slice(0,-1),expression=group.terms.join(""),options={flavor:group.flavor?group.flavor.slice(1,-1):void 0},terms=[];if(fn in Math){const args=this._splitMathArgs(expression);terms.push(new MathTerm({fn,terms:args,options}))}else fn&&terms.push(fn),terms.push(new AverageParentheticalTerm({term:expression,options}));return terms}})}}class ActorPickerDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-picker"],title:game.i18n.localize("CoC7.PickWhichActorTitle"),template:"systems/CoC7/templates/chat/messages/actor-picker.hbs",closeOnSubmit:!1,width:415,height:375})}activateListeners(html){super.activateListeners(html),html.on("click",".directory-item",this._onPick.bind(this)),html.find(".can-ping").hover(this._onHoverIn.bind(this),this._onHoverOut.bind(this)),html.on("click",".submit-button",this._onSubmitButton.bind(this))}_onPick(event){const li=event.currentTarget;for(const l of li.parentElement.children)l.classList.toggle("picked",l===li);this.object.selected=li.dataset.entryUuid}async _onHoverIn(event){if(event.preventDefault(),!canvas.ready)return;const li=event.currentTarget,token=(await fromUuid(li.dataset.entryUuid))?.object;token?.isVisible&&(token.controlled||(token._onHoverIn(event,{hoverOutOthers:!0}),this._highlighted=token))}_onHoverOut(event){event.preventDefault(),this._highlighted&&this._highlighted._onHoverOut(event),this._highlighted=null}async _onSubmitButton(event){this.object.resolve(await fromUuid(this.object.selected)),this.close()}static async create(){const allowedTypes=["character","npc","creature"];let found=[];if(game.user.isGM&&canvas.ready&&canvas.tokens.controlled.length>0)found=canvas.tokens.controlled.map((t=>t.document));else{canvas.ready&&(found=canvas.tokens.placeables.filter((t=>allowedTypes.includes(t.document.actor.type)&&(t.actor.ownership[game.user.id]??t.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER)).map((t=>t.document)));const foundIDs=found.map((t=>t.actorId));found=found.concat(game.actors.filter((a=>allowedTypes.includes(a.type)&&!foundIDs.includes(a.id)&&(a.ownership[game.user.id]??a.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER)))}if(1===found.length)return found[0];if(found.length>1){const options=[];for(const option of found){const isTokenDocument=option instanceof TokenDocument;options.push({uuid:option.uuid,name:option.name,img:isTokenDocument?option.actor.portrait:option.portrait,canPing:isTokenDocument})}options.sort(CoC7Utilities.sortByNameKey);let selected=options[1].uuid;if(game.user.character){const defaultOption=found.find((option=>(option.actorId??option.id)===game.user.character.id));defaultOption&&(selected=defaultOption.uuid)}return new Promise((resolve=>{new ActorPickerDialog({options,selected,resolve}).render(!0)}))}return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor")),null}}class CoC7GroupMessage{static async removeRoll({messageId,msg,which}){if(void 0!==messageId&&(msg=game.messages.get(messageId)),void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses[which]){const updates={["flags.CoC7.group-message.rollStatuses.-="+which]:null};await CoC7GroupMessage.updateTheGroupMessage({msg,updates})}}static async pushMyRoll({messageId,msg,which}){void 0!==messageId&&(msg=game.messages.get(messageId));const updates={};let gmId=!1;switch(msg.canUserModify(game.user,"update")||(gmId=CoC7Utilities.getAnIdForGm()),msg.flags.CoC7["group-message"].type){case"combined":updates["flags.CoC7.group-message.wasPushed"]=!0,CoC7GroupMessage.performCombinedRoll({msg,gmId,updates,pushing:!0});break;case"opposed":{const rolls={[which]:msg.flags.CoC7["group-message"].rollStatuses[which].roll};CoC7GroupMessage.performNormalRoll({msg,rolls,gmId,updates,pushing:!0})}}}static async spendMyLuck({messageId,msg,which,index,luckAmount}){if(void 0!==messageId&&(msg=game.messages.get(messageId)),void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed)switch(msg.flags.CoC7["group-message"].type){case"combined":if(!luckAmount){luckAmount=CoC7Check.fromData(msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed).increaseSuccess[index].luckToSpend??null}if(luckAmount){const actor=await CoC7GroupMessage.getActor(msg.flags.CoC7["group-message"].actorUuid);if(!(actor instanceof TokenDocument?actor.actor:actor).spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}));const updates={};for(const which in msg.flags.CoC7["group-message"].rollStatuses){const check=CoC7Check.fromData(msg.flags.CoC7["group-message"].rollStatuses[which].completed);check.increaseLuckSpend(luckAmount),updates["flags.CoC7.group-message.rollStatuses."+which+".completed"]=check.JSONRollData}if(Object.keys(updates).length)if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}break;case"opposed":{const check=CoC7Check.fromData(msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed);void 0!==index?check.upgradeCheck(index,!1):void 0!==luckAmount&&check.forcePass(luckAmount,!1);const updates={["flags.CoC7.group-message.rollStatuses."+which+".completed"]:check.JSONRollData};if(Object.keys(updates).length)if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}}else ui.notifications.error("CoC7.ErrorRollAlreadyCompleted",{localize:!0})}static async updateTheGroupMessage({msg,updates,rollData}={}){if(msg?.flags?.CoC7?.["group-message"]){if(void 0===rollData){rollData={};for(const which in msg?.flags?.CoC7?.["group-message"].rollStatuses){const roll=await CoC7GroupMessage.parseRolls({roll:msg?.flags?.CoC7?.["group-message"].rollStatuses[which].roll,quick:!0});rollData[which]=roll}}const options=Object.assign({rollData},foundry.utils.mergeObject(msg.flags.CoC7["group-message"],foundry.utils.expandObject(updates)?.flags?.CoC7?.["group-message"]??{},{performDeletions:!0}));for(const which in options.rollStatuses)options.rollStatuses[which].completed&&(options.rollStatuses[which].completed=CoC7Check.fromData(options.rollStatuses[which].completed));options.allRollsCompleted=!0;for(const which in options.rollStatuses)void 0===options.rollStatuses[which].completed&&(options.allRollsCompleted=!1);switch(updates["flags.CoC7.group-message.allRollsCompleted"]=options.allRollsCompleted,options.type){case"combined":if(options.isSuccess=!1,options.isFailure=!1,options.allRollsCompleted){let successes=0,failures=0;for(const which in options.rollStatuses)options.rollStatuses[which].completed.isSuccess?successes++:options.rollStatuses[which].completed.isFailure&&failures++;successes>0&&("any"===options.combined||0===failures&&"all"===options.combined)?options.isSuccess=!0:options.isFailure=!0}updates["flags.CoC7.group-message.isSuccess"]=options.isSuccess,updates["flags.CoC7.group-message.isFailure"]=options.isFailure;break;case"opposed":if(options.allRollsCompleted){if(options.isTie=!1,options.isCombat){options.rollOrder=Array.from(new Int8Array(options.rollOrder.map((v=>parseInt(v.substr(1),10)))).sort()).map((v=>"r"+v));const successLevels={};options.defenderIsDodging=!1;for(const which in options.rollStatuses)options.rollStatuses[which].completed.passed&&(successLevels[options.rollStatuses[which].completed.successLevel]=parseInt(successLevels[options.rollStatuses[which].completed.successLevel]??0,10)+1),options.rollStatuses[which].isDodging&&!options.rollStatuses[which].isAttacker&&(options.defenderIsDodging=!0);updates["flags.CoC7.group-message.defenderIsDodging"]=options.defenderIsDodging,!1===options.advantageAttacker&&!1===options.advantageDefender&&(options.defenderIsDodging?(options.advantageDefender=!0,updates["flags.CoC7.group-message.advantageDefender"]=options.advantageDefender):(options.advantageAttacker=!0,updates["flags.CoC7.group-message.advantageAttacker"]=options.advantageAttacker));const best=Math.max(...Object.keys(successLevels));if(options.needsTieBreaker=!1,options.resultText=game.i18n.localize("CoC7.NoWinner"),best>0)for(const which in options.rollStatuses){let rollIsWinner=!1,rollIsTie=!1;options.rollStatuses[which].completed.successLevel===best&&1===successLevels[best]?rollIsWinner=!0:options.rollStatuses[which].completed.successLevel===best&&(options.advantageAttacker&&options.rollStatuses[which].isAttacker||options.advantageDefender&&!options.rollStatuses[which].isAttacker?rollIsWinner=!0:(rollIsTie=!0,options.needsTieBreaker=!0,options.isTie=!0)),options.rollStatuses[which].isWinner=rollIsWinner,options.rollStatuses[which].isTie=rollIsTie,updates["flags.CoC7.group-message.rollStatuses."+which+".isWinner"]=rollIsWinner,updates["flags.CoC7.group-message.rollStatuses."+which+".isTie"]=rollIsTie,rollIsWinner&&!rollIsTie&&(options.rollStatuses[which].isAttacker?options.rollStatuses[which].isManeuver?options.resultText=game.i18n.format("CoC7.ManeuverSuccess",{name:rollData[which].actor.name}):options.resultText=game.i18n.format("CoC7.AttackSuccess",{name:rollData[which].actor.name}):options.rollStatuses[which].isManeuver?options.rollStatuses[which].isDodging?options.resultText=game.i18n.format("CoC7.DodgeSuccess",{name:rollData[which].actor.name}):options.resultText=game.i18n.format("CoC7.ManeuverSuccess",{name:rollData[which].actor.name}):options.resultText=game.i18n.format("CoC7.AttackSuccess",{name:rollData[which].actor.name}))}updates["flags.CoC7.group-message.needsTieBreaker"]=options.needsTieBreaker}else{const opposedRollTieBreaker=game.settings.get("CoC7","opposedRollTieBreaker");options.rollOrder.sort(((a,b)=>{if(options.rollStatuses[a].completed.successLevel>options.rollStatuses[b].completed.successLevel)return-1;if(options.rollStatuses[a].completed.successLevel<options.rollStatuses[b].completed.successLevel)return 1;if(opposedRollTieBreaker){if(options.rollStatuses[a].completed.modifiedResult>options.rollStatuses[b].completed.modifiedResult)return-1;if(options.rollStatuses[a].completed.modifiedResult<options.rollStatuses[b].completed.modifiedResult)return 1}else{if(options.rollStatuses[a].completed.rawValue>options.rollStatuses[b].completed.rawValue)return-1;if(options.rollStatuses[a].completed.rawValue<options.rollStatuses[b].completed.rawValue)return 1}return 0}));const offsetMax=options.rollOrder.length;let offset=0;const a=options.rollStatuses[options.rollOrder[0]];if(a.failed)offset=-1;else for(;offset<offsetMax;offset++){const b=options.rollStatuses[options.rollOrder[offset]];if(a.completed.successLevel!==b.completed.successLevel||(opposedRollTieBreaker?a.completed.modifiedResult!==b.completed.modifiedResult:a.completed.rawValue!==b.completed.rawValue)){offset--;break}}options.isTie=offset>0;for(let i=0;i<offsetMax;i++){let isWinner=!1,isTie=!1;i<=offset&&(isWinner=!0,isTie=options.isTie);const which=options.rollOrder[i];options.rollStatuses[which].isWinner=isWinner,options.rollStatuses[which].isTie=isTie,updates["flags.CoC7.group-message.rollStatuses."+which+".isWinner"]=isWinner,updates["flags.CoC7.group-message.rollStatuses."+which+".isTie"]=isTie}options.needsTieBreaker=!1,updates["flags.CoC7.group-message.needsTieBreaker"]=!1}updates["flags.CoC7.group-message.isTie"]=options.isTie}}const html=await renderTemplate(CoC7GroupMessage.getTemplatePath(msg.flags.CoC7["group-message"].type),options);updates.content=html,await msg.update(updates)}}static async updateTheMessage({messageId,updates}){const msg=game.messages.get(messageId);msg?.flags?.CoC7?.["group-message"]&&await CoC7GroupMessage.updateTheGroupMessage({msg,updates})}static async getCheck({msg,theRoll}){const checkData={difficulty:theRoll.difficulty,diceModifier:theRoll.bonus,actorKey:theRoll.actor.actorKey??theRoll.actor.actor.actorKey,denyPush:!1,combat:msg.flags?.CoC7?.["group-message"].isCombat??!1};switch(theRoll.type){case"characteristic":checkData.characteristic=theRoll.key,checkData.denyPush=msg.flags?.CoC7?.["group-message"].denyPush??!1;break;case"attribute":checkData.attribute=theRoll.key,checkData.denyPush=msg.flags?.CoC7?.["group-message"].denyPush??!1;break;case"skill":checkData.skill=theRoll.skill,checkData.denyPush=(msg.flags?.CoC7?.["group-message"].denyPush??!1)||!theRoll.pushable;break;case"item":checkData.item=theRoll.item,checkData.denyPush=(msg.flags?.CoC7?.["group-message"].denyPush??!1)||!theRoll.pushable}return CoC7Check.create(checkData)}static async performRoll({msg,which,roll,pushing}={}){const theRoll=await CoC7GroupMessage.parseRolls({roll,quick:!1});if(!theRoll)return{};const check=await CoC7GroupMessage.getCheck({msg,theRoll});pushing&&(check.pushing=pushing),await check._perform({forceDSN:!0});const updates={};return updates["flags.CoC7.group-message.rollStatuses."+which+".completed"]=check.JSONRollData,updates}static async performCombinedRoll({messageId,msg,gmId,updates,pushing=!1}){void 0!==messageId&&(msg=game.messages.get(messageId));const rollData={};for(const which in msg?.flags?.CoC7?.["group-message"].rollStatuses){const roll=await CoC7GroupMessage.parseRolls({roll:msg?.flags?.CoC7?.["group-message"].rollStatuses[which].roll,quick:!1});roll&&(rollData[which]=roll)}const pool={};for(const which in rollData)pool[parseInt(rollData[which].bonus??0,10)]=!1;const roll=await CoC7Dice.combinedRoll({pool});let first=!0;for(const which in rollData){const bonus=parseInt(rollData[which].bonus??0,10),check=await CoC7GroupMessage.getCheck({msg,theRoll:rollData[which]});pushing&&(check.pushing=pushing),await check._perform({roll:roll[bonus],silent:!1===first||void 0,forceDSN:first}),updates["flags.CoC7.group-message.rollStatuses."+which+".completed"]=check.JSONRollData,first=!1}if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}static async performNormalRoll({messageId,msg,rolls,gmId,updates,pushing=!1}){void 0!==messageId&&(msg=game.messages.get(messageId));for(const which in rolls)void 0===msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed||pushing?Object.assign(updates,await CoC7GroupMessage.performRoll({msg,which,roll:rolls[which],pushing})):ui.notifications.error("CoC7.ErrorRollAlreadyCompleted",{localize:!0});msg.canUserModify(game.user,"update")?await CoC7GroupMessage.updateTheGroupMessage({msg,updates}):!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}static async performMyRolls({messageId,msg,rolls}){void 0!==messageId&&(msg=game.messages.get(messageId));const updates={};for(const which in rolls)await CoC7GroupMessage.nameRoll({which,roll:rolls[which],updates});const gmId=!msg.canUserModify(game.user,"update")&&CoC7Utilities.getAnIdForGm();switch(Object.keys(updates).length>0&&(msg.canUserModify(game.user,"update")?await CoC7GroupMessage.updateTheGroupMessage({msg,updates}):!1!==gmId&&(game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates}),await new Promise((resolve=>setTimeout(resolve,200))))),msg.flags.CoC7["group-message"].type){case"combined":CoC7GroupMessage.performCombinedRoll({msg,gmId,updates});break;case"opposed":CoC7GroupMessage.performNormalRoll({msg,rolls,gmId,updates})}}static async nameRoll({which,roll,updates}){const parsed=await CoC7GroupMessage.parseRolls({roll,quick:!1});parsed&&(updates["flags.CoC7.group-message.rollStatuses."+which+".shortName"]=parsed.shortName,updates["flags.CoC7.group-message.rollStatuses."+which+".fullName"]=parsed.fullName,updates["flags.CoC7.group-message.rollStatuses."+which+".tags"]=parsed.tags??[],updates["flags.CoC7.group-message.rollStatuses."+which+".percent"]=parsed.percent??1,updates["flags.CoC7.group-message.rollStatuses."+which+".isManeuver"]=parsed.isManeuver??!1,updates["flags.CoC7.group-message.rollStatuses."+which+".isDodging"]=parsed.isDodge??!1,updates["flags.CoC7.group-message.rollStatuses."+which+".isWeapon"]=parsed.isDodge??!1)}static async newGroupMessage({rollData,options}){if(void 0===rollData){rollData={};for(const which in options.rollStatuses){const roll=await CoC7GroupMessage.parseRolls({roll:options.rollStatuses[which].roll,quick:!0});rollData[which]=roll}}const rollsByUser={},rollRequiresName={};for(const which in rollData){let asUserId="";switch(rollData[which].autoRoll.length){case 1:if(rollData[which].autoRoll[0]!==game.user.id){asUserId=rollData[which].autoRoll[0];break}case 0:asUserId=game.user.id;break;default:options.rollStatuses[which].rolling=!1,"-"===rollData[which].shortName&&(rollRequiresName[which]=rollData[which].roll)}""!==asUserId&&(Object.prototype.hasOwnProperty.call(rollsByUser,asUserId)||(rollsByUser[asUserId]={}),rollsByUser[asUserId][which]=options.rollStatuses[which].roll,options.rollStatuses[which].rolling=asUserId)}const templateData=Object.assign({rollData},options),chatData={flags:{CoC7:{"group-message":options}},content:await renderTemplate(CoC7GroupMessage.getTemplatePath(options.type),templateData)};switch(chatData.flags?.CoC7?.["group-message"]?.type){case"opposed":chatData.speaker=Object.assign(chatData.speaker??{},{alias:game.i18n.localize("CoC7.OpposedRollCard")});break;case"combined":chatData.speaker=Object.assign(chatData.speaker??{},{alias:Object.values(rollData)[0].actor.name})}const msg=await ChatMessage.create(chatData),updates={};for(const which in rollRequiresName)await CoC7GroupMessage.nameRoll({which,roll:rollRequiresName[which],updates});Object.keys(updates).length>0&&await CoC7GroupMessage.updateTheGroupMessage({msg,updates,rollData});for(const userId in rollsByUser)userId!==game.user.id&&game.socket.emit("system.CoC7",{type:"group-message-roll",listener:userId,messageId:msg.id,rolls:rollsByUser[userId]});return Object.prototype.hasOwnProperty.call(rollsByUser,game.user.id)&&await CoC7GroupMessage.performMyRolls({msg,rolls:rollsByUser[game.user.id]}),msg}static async isUserActive({which,msg}){if(msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].rolling){const user=game.users.get(msg.flags.CoC7["group-message"].rollStatuses[which].rolling);if(game.user.isGM||!user||!user.active){const updates={["flags.CoC7.group-message.rollStatuses."+which+".rolling"]:!1};if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}}}static async _onToggle(event){event.preventDefault();const button=event.currentTarget,messageId=button.closest("li.chat-message")?.dataset.messageId,key=button.dataset.key;let value=button.dataset.value;if(messageId&&key){if(button.classList.contains("select-only-gm")&&!game.user.isGM)return;const msg=game.messages.get(messageId);if(void 0!==msg.flags?.CoC7?.["group-message"]?.[key]&&msg.canUserModify(game.user,"update")){void 0===value&&(value=!msg.flags.CoC7["group-message"][key]);const updates={["flags.CoC7.group-message."+key]:value};switch(key){case"advantageDefender":updates["flags.CoC7.group-message.advantageAttacker"]=!value;break;case"advantageAttacker":updates["flags.CoC7.group-message.advantageDefender"]=!value}await CoC7GroupMessage.updateTheGroupMessage({msg,updates})}}}static async _onClick(event){event.preventDefault();const button=event.currentTarget,action=button.dataset.action,messageId=button.closest("li.chat-message")?.dataset.messageId,which=button.dataset.which;if(messageId){const msg=game.messages.get(messageId);if(void 0!==msg)if(void 0!==which&&void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses[which]){const actor=await fromUuid(msg.flags.CoC7["group-message"].rollStatuses[which].roll.split("#")[0]);if(!actor||!actor.canUserModify(game.user,"update"))return void ui.notifications.error("CoC7.ErrorNoActorPermission",{localize:!0});switch(action){case"impatient-roll":CoC7GroupMessage.isUserActive({which,msg});break;case"normal-roll":CoC7GroupMessage.performMyRolls({msg,rolls:{[which]:msg.flags.CoC7?.["group-message"].rollStatuses[which].roll}});break;case"use-luck":CoC7GroupMessage.spendMyLuck({which,index:button.dataset.index,luckAmount:button.dataset.luckAmount,msg});break;case"remove-roll":CoC7GroupMessage.removeRoll({which,msg});break;case"push":CoC7GroupMessage.pushMyRoll({which,msg})}}else if(void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses){let okay=!1;for(const which in msg.flags.CoC7["group-message"].rollStatuses){if((await fromUuid(msg.flags.CoC7["group-message"].rollStatuses[which].roll.split("#")[0])).canUserModify(game.user,"update")){okay=!0;break}}if(!okay)return void ui.notifications.error("CoC7.ErrorNoActorPermission",{localize:!0});switch(action){case"roll-once":if("combined"===msg.flags.CoC7["group-message"].type){const updates={};CoC7GroupMessage.performCombinedRoll({msg,updates})}break;case"toggle":CoC7GroupMessage._onToggle(event)}}}}static async renderChatMessage(app,html,data){const canModify={gm:game.user.isGM};for(const which in app.flags?.CoC7?.["group-message"]?.rollStatuses){const actor=await fromUuid(app.flags.CoC7["group-message"].rollStatuses[which].roll.split("#")[0]);canModify[which]=actor?.canUserModify(game.user,"update")??!1}canModify.any=Object.values(canModify).filter((b=>b)).length>0;for(const key in canModify)canModify[key]?html.find(".hidden-only-"+key).remove():html.find(".visible-only-"+key).remove();html.on("click",".roll-card-v2 button:not(.toggle-switch)",CoC7GroupMessage._onClick.bind(this)),html.on("click",".roll-card-v2 a:not(.toggle-link)",CoC7GroupMessage._onClick.bind(this)),html.on("click",".roll-card-v2 button.toggle-switch",CoC7GroupMessage._onToggle.bind(this)),html.on("click",".roll-card-v2 a.toggle-link",CoC7GroupMessage._onToggle.bind(this))}static async getActor(identifier){return identifier.match(/^a\./)?(await game.system.api.cocid.fromCoCID(identifier))?.[0]??null:identifier.indexOf(".")>-1?await fromUuid(identifier):game.actors.get(identifier)??null}static async parseRolls({roll,quick=!0,defaultUuid=""}){const match=roll.match(/^(?<a>[^#]+#)?(?<t>attribute|characteristic|item|skill)#(?<k>[^#]+)(#(?<m>.*))?$/);if(match){const modifiers=(match.groups.m??"").toLowerCase().split("#"),bonus=parseInt(modifiers.find((m=>m.match(/^[+-]\d+$/)))??0,10),difficulty=modifiers.find((m=>m.match(/^\d+$/))),pushing=modifiers.filter((m=>"p"===m)).length>0,rollData={type:match.groups.t,key:match.groups.k,bonus,difficulty:"0"===(difficulty??"").toString()?CoC7Check.difficultyLevel.unknown:difficulty?parseInt(difficulty,10):"unknown"===game.settings.get("CoC7","defaultCheckDifficulty")?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular,pushing};if(!match.groups.a&&defaultUuid&&""!==defaultUuid&&(match.groups.a=defaultUuid+"#"),match.groups.a){const actor=await CoC7GroupMessage.getActor(match.groups.a.substr(0,match.groups.a.length-1));if(!actor)return null;rollData.actor=actor,rollData.autoRoll=game.users.filter((u=>!u.isGM&&rollData.actor.canUserModify(u,"update"))).map((u=>({id:u.id,active:u.active}))),rollData.autoRoll.length>0&&(rollData.autoRoll=rollData.autoRoll.filter((d=>d.active)).map((d=>d.id)),0===rollData.autoRoll.length&&(rollData.autoRoll=["prevent","roll"]))}else{const actor=await ActorPickerDialog.create();if(!actor)return ui.notifications.warn("CoC7.WarnNoControlledActor",{localize:!0}),null;rollData.actor=actor,game.user.isGM?(rollData.autoRoll=game.users.filter((u=>!u.isGM&&rollData.actor.canUserModify(u,"update"))).map((u=>({id:u.id,active:u.active}))),rollData.autoRoll.length>0&&(rollData.autoRoll=rollData.autoRoll.filter((d=>d.active)).map((d=>d.id)),0===rollData.autoRoll.length&&(rollData.autoRoll=["prevent","roll"]))):rollData.autoRoll=[game.user.id]}switch(rollData.roll=rollData.actor.uuid+"#"+rollData.type+"#"+rollData.key+(rollData.bonus<0?"#"+rollData.bonus:rollData.bonus>0?"#+"+rollData.bonus:"")+(0===difficulty?"#0":difficulty?"#"+parseInt(difficulty,10):""),rollData.portrait=rollData.actor instanceof TokenDocument?rollData.actor.texture.src:rollData.actor.portrait,rollData.shortName="-",rollData.fullName="-",rollData.type){case"characteristic":if(rollData.shortName=CoC7Utilities.getCharacteristicNames(rollData.key)?.short??"-",rollData.fullName=CoC7Utilities.getCharacteristicNames(rollData.key)?.label??"-",rollData.percent=(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).system?.characteristics[rollData.key]?.value??1,"-"===rollData.shortName)return null;break;case"attribute":switch(rollData.key){case"lck":rollData.shortName=game.i18n.localize("CoC7.Luck"),rollData.fullName=game.i18n.localize("CoC7.Luck");break;case"san":rollData.shortName=game.i18n.localize("CoC7.SAN"),rollData.fullName=game.i18n.localize("CoC7.Sanity");break;default:return null}rollData.percent=(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).system?.attribs[rollData.key]?.value??1;break;case"skill":if(!quick){const skills=await(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).getItemOrAdd(rollData.key,"skill");skills.length&&(rollData.skill=skills[0],rollData.shortName=skills[0].shortName,rollData.fullName=skills[0].shortName,rollData.pushable=skills[0].system.properties?.push??!1,rollData.percent=skills[0].value,rollData.isManeuver=skills[0].isDodge,rollData.isDodge=skills[0].isDodge)}break;case"item":if(!quick){const items=await(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).getItemOrAdd(rollData.key,"weapon");if(items.length){rollData.item=items[0],rollData.shortName=items[0].shortName,rollData.fullName=items[0].shortName,rollData.isManeuver=items[0].system.properties?.mnvr??!1,rollData.isWeapon=!0;const skillId=items[0].system.skill[items[0].usesAlternativeSkill?"alternativ":"main"].id;if(skillId){const skill=(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).items.find((d=>d.id===skillId));rollData.tags=[skill.name],rollData.percent=skill.value,rollData.pushable=skill.system.properties?.push??!1}}}}return rollData}return null}static getTemplatePath(type){switch(type){case"opposed":return"systems/CoC7/templates/chat/messages/opposed.hbs";case"combinedall":case"combinedany":case"combined":return"systems/CoC7/templates/chat/messages/combined.hbs"}return null}static async createGroupMessage(options){if(!CoC7GroupMessage.getTemplatePath(options.type))return null;let config=Object.assign({type:"",denyPush:!1,showCompletedRolls:!0,allRollsCompleted:!1,isCombat:!1,isEditable:!0,rollStatuses:{},rollOrder:[]},options);switch(config.type){case"opposed":config=Object.assign({denyPush:!0,isTie:!1,needsTieBreaker:!1,advantageAttacker:!1,advantageDefender:!1,defenderIsDodging:!1,winnerRollsDamage:!1},config);break;case"combinedall":case"combinedany":case"combined":config=Object.assign({combined:"combinedall"===config.type?"all":"combinedany"===config.type?"any":"",actorUuid:"",isSuccess:!1,isFailure:!1,wasPushed:!1},config),config.type="combined"}const rollData={};let count=0;for(const offset in options.rollRequisites){const which="r"+offset,roll=await CoC7GroupMessage.parseRolls({roll:options.rollRequisites[offset],quick:!0,defaultUuid:config.actorUuid??""});if(!roll)return null;if("combined"===config.type){if(""!==config.actorUuid&&config.actorUuid!==roll.actor.uuid)return ui.notifications.error("CoC7.ErrorCombinedRollsRequireSingleActor",{localize:!0}),null;config.actorUuid=roll.actor.uuid}if(rollData[which]=roll,config.rollStatuses[which]={roll:roll.roll,rollable:"combined"!==config.type,rolling:!1,shortName:roll.shortName,fullName:roll.fullName,percent:roll.percent,tags:[],isManeuver:!1,isDodging:!1,isWeapon:!1},"opposed"===config.type)config.rollStatuses[which]=Object.assign({isAttacker:0===count,isWinner:!1,isTie:!1},config.rollStatuses[which]);config.rollOrder.push(which),count++}if("opposed"===config.type&&2!==Object.keys(rollData).length)return ui.notifications.error("CoC7.ErrorOpposedRollsLimitedToTwoActors",{localize:!0}),null;if(delete config.rollRequisites,game.user.isGM)return CoC7GroupMessage.newGroupMessage({rollData,options:config});{const gmId=CoC7Utilities.getAnIdForGm();return!1===gmId?null:(game.socket.emit("system.CoC7",{type:"group-message-new",listener:gmId,options:config}),!0)}}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(speakerData.actor=this.actor,this.token&&(speakerData.token=this.token.document),speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),sanData.sanReason=sanData.sanReason??"",this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get sanLossSource(){return this.sanData.tokenKey?chatHelper.getActorFromKey(this.sanData.tokenKey):null}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){return this.state.sanRolled?this.sanData.sanMax&&this.sanCheck.failed?isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax):this.sanData.sanMin&&this.sanCheck.passed?isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin):0:null}get sanLostToReason(){return this.actor.sanLostToReason(this.sanData.sanReason)}get maxPossibleSanLoss(){return this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)}get maxSanLoss(){return new Roll(this.sanData.sanMax.toString())[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total}get sanLossReasonEncountered(){return this.actor.sanLossReasonEncountered(this.sanData.sanReason)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get isActorLoosingSan(){return!this.actor.hasTempoInsane&&(0!==this.sanLossFormula&&(!this.sanData.sanReason||0!==this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)||(this.state.immuneToCreature=!0,!1)))}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} ${game.i18n.localize("CoC7.rounds")}`;if(this.boutSummary)return`${this.boutDuration} ${game.i18n.localize("CoC7.hours")}`}return null}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.unsetCondition(COC7.status.tempoInsane),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.system.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"system.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.preHardenedSanLoss=this.originalSanLoss=this.sanLossFormula,this.sanLoss=this.applyMythosHardened(this.preHardenedSanLoss)}applyMythosHardened(sanLoss){return this.actor.useMythosHardened?Math.floor(sanLoss/2):sanLoss}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)if(this.state.sanLossRolled=!0,this.originalSanLoss=this.sanLossFormula,this.sanData.sanReason){const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.preHardenedSanLoss=this.originalSanLoss,this.preHardenedSanLoss>max&&(this.preHardenedSanLoss=max,this.state.limitedLossToCreature=!0)}else this.preHardenedSanLoss=this.originalSanLoss;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.originalSanLoss=new Roll(this.sanData.sanMax)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total,this.preHardenedSanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.originalSanLoss);else if(this.sanData.sanReason){new Roll(this.sanLossFormula)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({minimize:!0}).total>=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)&&(this.state.sanLossRolled=!0,this.preHardenedSanLoss=this.originalSanLoss=this.max,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.hasTempoInsane&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.preHardenedSanLoss=0,this.originalSanLoss=0;this.sanLoss=this.applyMythosHardened(this.preHardenedSanLoss)}async rollSanLoss(){this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll);const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.sanLossRoll.total>max&&(this.state.limitedLossToCreature=!0),this.originalSanLoss=this.sanLossRoll.total,this.preHardenedSanLoss=Math.min(this.originalSanLoss,max),this.sanLoss=this.applyMythosHardened(this.preHardenedSanLoss),this.state.sanLossRolled=!0}async applySanLoss(){if(await this.actor.looseSan(this.sanData.sanReason,this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.hasIndefInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1,this.actor.dailySanLoss>=this.actor.dailySanLimit&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform({forceDSN:!0}),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.setCondition(COC7.status.indefInsane),this.state.finish=!0}async clearSanLossReason(){await this.actor.setReasonSanLoss(this.sanData.sanReason,0),this.sanLossReasonEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(sanData,fastForward=!1){const targets=[...game.user.targets];if(targets.length)for(const t of targets)t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,sanData,{fastForward}):SanCheckCard.create(t.actor.id,sanData,{fastForward});else ui.notifications.warn(game.i18n.localize("CoC7.WarnNoTargetsSanCheck"))}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.hasIndefInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}class CoC7Link{static get CHECK_TYPE(){return{CHECK:"check",SANLOSS:"sanloss",ITEM:"item",EFFECT:"effect"}}static get LINK_TYPE(){return{CHARACTERISTIC:"characteristic",ATTRIBUTE:"attribute",SKILL:"skill"}}static init(){CONFIG.CoC7Link={documentClass:CoC7Link};const body=$("body");body.on("click","a.coc7-link",CoC7Link._onLinkClick),body.on("dragstart","a.coc7-link",(event=>CoC7Link._onDragCoC7Link(event))),CONFIG.TextEditor.enrichers.push({pattern:new RegExp("@(coc7)\\.(check|effect|item|sanloss)\\[([^\\[\\]]*(?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\])*[^\\[\\]]*\\])*[^\\[\\]]*)\\](?:{([^}]+)})?","gi"),enricher:CoC7Link._createLink})}static _linkFromEvent(event){const a=event.currentTarget,i=a.querySelector("[data-link-icon]"),data=foundry.utils.duplicate(a.dataset),oldType=data.type;return data.type="CoC7Link",data.icon=null,oldType&&(data.linkType=oldType),data.object&&("string"==typeof data.object||data.object instanceof String)&&(data.object=JSON.parse(data.object)),i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,data.difficulty&&(data.difficulty=CoC7Utilities.convertDifficulty(data.difficulty)),data}static _onDragCoC7Link(event){const data=CoC7Link._linkFromEvent(event);event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static async fromDropData(data,options={}){const cls=new CoC7Link;cls.object=foundry.utils.mergeObject({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.CHECK,linkType:CoC7Link.LINK_TYPE.SKILL,difficulty:CoC7Check.difficultyLevel.regular,modifier:0,object:{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",changes:[]}},data);for(const key of["name","displayName","icon","id","pack","sanMin","sanMax","sanReason"])cls.object[key]=cls.object[key]??"";return void 0!==cls.object.object.icon&&void 0!==cls.object.object.external&&["http","https"].includes(cls.object.object.external)&&(cls.object.object.icon=cls.object.object.external+"://"+cls.object.object.icon),cls.options=options,cls}static async _createLink(match){const name=match[4]??void 0,options=match[3]??void 0,type=match[2]??void 0,data={cls:["coc7-link"],dataset:{check:type},icon:null,blind:!1,name};if(type===CoC7Link.CHECK_TYPE.EFFECT)data.effect=JSON.parse(options),data.dataset.object=options,void 0!==data.effect.icon&&void 0!==data.effect.external&&["http","https"].includes(data.effect.external)&&(data.effect.icon=data.effect.external+"://"+data.effect.icon);else{const matches=options.matchAll(/[^,]+/gi);for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),void 0===value&&("blind"===key?(value=!0,data.blind=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase())):"pushing"===key?(value=!0,data.pushing=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase())):"combat"===key&&(value=!0,data.combat=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase()))),data.dataset[key]=value}void 0!==data.dataset.icon&&void 0!==data.dataset.external&&["http","https"].includes(data.dataset.external)&&(data.dataset.icon=data.dataset.external+"://"+data.dataset.icon,data.icon=data.dataset.icon)}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{let humanName=data.dataset.name;if(["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase()))"lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"));else if(["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase()))humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label;else if(!name&&data.dataset.name.match(/^.\.[^\\.]*\..+$/)){const cocIdName=(await game.system.api.cocid.fromCoCID(data.dataset.name))?.[0]?.name;cocIdName&&(humanName=cocIdName)}title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}${data.pushing?"Pushing":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case CoC7Link.CHECK_TYPE.SANLOSS:title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case CoC7Link.CHECK_TYPE.ITEM:title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name});break;case CoC7Link.CHECK_TYPE.EFFECT:title=data.effect.label}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,data.icon=data.icon??data.effect?.icon??"fas fa-dice",(data.icon.includes("\\")||data.icon.includes("."))&&(data.img=data.icon),data.blind&&(a.innerHTML+='<i class="fas fa-eye-slash"></i>'),data.img?a.innerHTML+=`<img data-link-icon="${data.icon}" src="${data.img}">`:a.innerHTML+=`<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>`,a.innerHTML+=`<span>${data.name}</span>`,a}_createDocumentLink(eventData,{relativeTo,label}={}){if(!eventData.check)return"";switch(eventData.check.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{if(!eventData.linkType||!eventData.name&&!eventData.rolls)return"";let options=`${eventData.blind?"blind,":""}${eventData.pushing?"pushing,":""}type:${eventData.linkType}`;if(eventData.name?options+=`,name:${eventData.name}`:eventData.rolls&&(options+=`,rolls:${eventData.rolls}`,eventData.combat&&(options+=",combat")),void 0!==eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),void 0!==eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.check[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.SANLOSS:{if(!eventData.sanMax||!eventData.sanMin)return"";let options=`${eventData.blind?"blind,":""}sanMax:${eventData.sanMax},sanMin:${eventData.sanMin}`;if(eventData.sanReason&&(options+=`,sanReason:${eventData.sanReason}`),eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}let link=`@coc7.sanloss[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.ITEM:{if(!eventData.name)return"";let options=`${eventData.blind?"blind,":""}name:${eventData.name}`;if(eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.item[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.EFFECT:{const parts=eventData.object.icon.match(/^(https?):\/\/(.+)$/);parts&&(eventData.object.external=parts[1],eventData.object.icon=parts[2]);let link=`@coc7.effect[${JSON.stringify(eventData.object)}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}}return"?"}static async _onLinkActorClick(actor,options,{shiftKey=!1}={}){switch(options.check){case CoC7Link.CHECK_TYPE.CHECK:if(["charac","char","characteristic","characteristics"].includes(options.linkType.toLowerCase()))return actor.characteristicCheck(options.name,shiftKey,options);if(["skill"].includes(options.linkType.toLowerCase()))return actor.skillCheck(options,shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.linkType.toLowerCase()))return actor.attributeCheck(options.name,shiftKey,options);if(["combinedall","combinedany","opposed"].includes(options.linkType.toLowerCase()))return CoC7GroupMessage.createGroupMessage({type:options.linkType.toLowerCase(),rollRequisites:options.rolls.split("&&"),isCombat:Boolean(options.combat??!1)});break;case CoC7Link.CHECK_TYPE.SANLOSS:return void SanCheckCard.create(actor.actorKey,options,{fastForward:shiftKey});case CoC7Link.CHECK_TYPE.ITEM:return actor.weaponCheck(options,shiftKey);case CoC7Link.CHECK_TYPE.EFFECT:await actor.createEmbeddedDocuments("ActiveEffect",[{label:options.object.label,icon:options.object.icon,changes:options.object.changes}])}}static toChatMessage(options){const option={speaker:{alias:game.user.name}};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}),chatHelper.createMessage(null,message,option)}static toWhisperMessage(options,actors){for(const actor of actors){const option={speaker:{alias:game.user.name},whisper:actor.owners.map((a=>a.id))};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageTargetCheckRequested",{name:actor.name,check:link}),chatHelper.createMessage(null,message,option)}}static async _onLinkClick(event){const options=CoC7Link._linkFromEvent(event);if(game.user.isGM){if(isCtrlKey(event))return void CoC7ContentLinkDialog.create(options);if(canvas.tokens.controlled.length){for(const token of canvas.tokens.controlled)CoC7Link._onLinkActorClick(token.actor,options,{shiftKey:event.shiftKey});return}const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);return actor?void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey}):void CoC7Link.toChatMessage(options)}{const speaker=ChatMessage.getSpeaker();let actor=ChatMessage.getSpeakerActor(speaker);if(!actor){const actors=game.actors.filter((a=>(a.ownership[game.user.id]??a.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER));if(1===actors.length)actor=actors[0];else{const actors=game.actors.filter((a=>(a.ownership[game.user.id]??a.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER));1===actors.length&&(actor=actors[0])}}if(actor)return void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey})}ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}setValue(key,value){this.object[key]=value}get link(){return this._createDocumentLink(this.object)}get id(){return this.object.id}get pack(){return this.object.pack}get checkType(){return this.object.check}get difficulty(){return this.object.difficulty}get icon(){return this.object.icon}get displayName(){return this.object.displayName}get modifier(){return this.object.modifier}get linkType(){return this.object.linkType}get sanMin(){return this.object.sanMin}get sanMax(){return this.object.sanMax}get sanReason(){return this.object.sanReason}get effect(){return this.object.object}get checkName(){if(this.isCharacteristicCheck){const characteristics=CoCActor.getCharacteristicDefinition();return characteristics.find((c=>c.key===this.object.name||c.shortName===this.object.name||c.label===this.object.name))?.key??""}return this.object.name}get isCheck(){return this.object.check===CoC7Link.CHECK_TYPE.CHECK}get isCharacteristicCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.CHARACTERISTIC}get isAttributeCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.ATTRIBUTE}get isSkillCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.SKILL}get isItemCheck(){return this.object.check===CoC7Link.CHECK_TYPE.ITEM}get isSanLossCheck(){return this.object.check===CoC7Link.CHECK_TYPE.SANLOSS}get isEffect(){return this.object.check===CoC7Link.CHECK_TYPE.EFFECT}get isBlind(){return this.isCheck&&this.object.blind}get isPushing(){return this.isCheck&&this.object.pushing}}class CoC7ContentLinkDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7","active-effect-sheet"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,width:560,height:"auto",tabs:[{navSelector:".tabs",contentSelector:".effect-options",initial:"details"}]})}async getData(){const sheetData=await super.getData();return sheetData.checkType=[{key:CoC7Link.CHECK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check")},{key:CoC7Link.CHECK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck")},{key:CoC7Link.CHECK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon")},{key:CoC7Link.CHECK_TYPE.EFFECT,label:game.i18n.localize("EFFECT.TabEffects")}],sheetData.linkType=[{key:CoC7Link.LINK_TYPE.CHARACTERISTIC,label:game.i18n.localize("CoC7.Characteristic")},{key:CoC7Link.LINK_TYPE.ATTRIBUTE,label:game.i18n.localize("CoC7.Attribute")},{key:CoC7Link.LINK_TYPE.SKILL,label:game.i18n.localize("CoC7.Skill")}],sheetData.attributeType=[{key:"lck",label:game.i18n.localize("CoC7.Luck")},{key:"san",label:game.i18n.localize("CoC7.Sanity")}],sheetData.effectModes=Object.entries(CONST.ACTIVE_EFFECT_MODES).reduce(((obj,e)=>(obj[e[1]]=game.i18n.localize("EFFECT.MODE_"+e[0]),obj)),{}),sheetData.characteristicType=CoCActor.getCharacteristicDefinition(),sheetData.link=sheetData.object.link,sheetData.fromGame=sheetData.link.isItemCheck||sheetData.link.isSkillCheck,sheetData.fromDirectory="fromDirectory"===sheetData.object.hasID,sheetData.fromCompendium="fromCompendium"===sheetData.object.hasID,sheetData.isSetFromGame=sheetData.link.id&&(sheetData.fromDirectory||sheetData.fromCompendium),sheetData.difficultyLevel=CoC7Check.difficultyLevel,sheetData.actorNames=sheetData.object.actors.map((a=>a.name)).join(", "),sheetData}activateListeners(html){super.activateListeners(html),html.find("select[name=type],select[name=check],select[name=attributeKey],select[name=characteristicKey],input[type=checkbox]").change(this._onChangeSubmit.bind(this)),html.find(".effect-control").click(this._onEffectControl.bind(this))}_onChangeSubmit(event){switch(event.currentTarget.name){case"fromCompendium":case"fromDirectory":this.object.hasID=event.currentTarget.name===this.object.hasID?"":event.currentTarget.name}this._onSubmit(event)}_onEffectControl(event){event.preventDefault();const button=event.currentTarget;switch(button.dataset.action){case"add":return this._addEffectChange();case"delete":button.closest(".effect-change").remove(),this._onSubmit(event)}}async _addEffectChange(){const idx=this.object.link.effect.changes.length;return this.submit({preventClose:!0,updateData:{[`effect.changes.${idx}`]:{key:"",mode:CONST.ACTIVE_EFFECT_MODES.ADD,value:""}}})}async _updateObject(event,formData){let hasEffect=!1;const effect={duration:{},changes:[]};for(const key in formData)switch(key){case"checkName":this.object.link.setValue("name",formData.checkName);break;case"blind":case"pushing":case"difficulty":case"displayName":case"icon":case"id":case"modifier":case"pack":case"sanMin":case"sanMax":case"sanReason":this.object.link.setValue(key,formData[key]);break;case"hasModifiers":case"hasLabel":case"hasIcon":this.object[key]=formData[key];break;case"effect.label":effect.label=formData[key],hasEffect=!0;break;case"effect.icon":effect.icon=formData[key],hasEffect=!0;break;case"effect.tint":effect.tint=formData[key],hasEffect=!0;break;case"effect.disabled":effect.disabled=formData[key],hasEffect=!0;break;case"effect.duration.seconds":effect.duration.seconds=formData[key],hasEffect=!0;break;case"effect.duration.rounds":effect.duration.rounds=formData[key],hasEffect=!0;break;case"effect.duration.turns":effect.duration.turns=formData[key],hasEffect=!0;break;default:{const match=key.match(/^effect\.changes\.(\d+)\.key$/);match&&(effect.changes.push({key:formData[key],mode:formData["effect.changes."+match[1]+".mode"],value:formData["effect.changes."+match[1]+".value"]}),hasEffect=!0)}}hasEffect&&this.object.link.setValue("object",effect);const target=event.currentTarget;if(target){switch(target.name){case"type":this.object.link.setValue("check",target.value),target.value===CoC7Link.CHECK_TYPE.CHECK&&(this.object.link.setValue("linkType",CoC7Link.LINK_TYPE.SKILL),this.object.link.setValue("name",""));break;case"check":this.object.link.setValue("linkType",target.value),target.value===CoC7Link.LINK_TYPE.CHARACTERISTIC?this.object.link.setValue("name",CoCActor.getCharacteristicDefinition()[0].key):target.value===CoC7Link.LINK_TYPE.ATTRIBUTE?this.object.link.setValue("name","lck"):this.object.link.setValue("name","");break;case"attributeKey":case"characteristicKey":this.object.link.setValue("name",target.value)}if("submit"===event.type){switch(event.submitter.dataset.action){case"clipboard":CoC7Utilities.copyToClipboard(this.object.link.link);break;case"chat":CoC7Link.toChatMessage(this.object.link.object);break;case"whisper-owner":CoC7Link.toWhisperMessage(this.object.link.object,this.object.actors);break;case"whisper-selected":if(!canvas.tokens.controlled.length)return void ui.notifications.warn(game.i18n.localize("CoC7.ErrorNoTokensSelected"));CoC7Link.toWhisperMessage(this.object.link.object,canvas.tokens.controlled.filter((t=>t.actor.owners.length)).map((t=>t.actor)))}return}}this.render(!0)}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("CoC7Link"===data.type)this.setLink(await CoC7Link.fromDropData(data)),this.render(!0);else if("Folder"===data.type&&"Actor"===data.documentName||["Item","Actor"].includes(data.type)){const dataList=await CoC7Utilities.getDataFromDropEvent(event,data.documentName??data.type);data.documentName??"Actor"===data.type?(this.object.actors=dataList.filter((a=>a.owners.length)),this.render(!0)):1===dataList.length&&["skill","weapon"].includes(dataList[0].type)&&(dataList[0].pack?(this.object.hasID="fromCompendium",this.object.link.setValue("pack",dataList[0].pack)):this.object.hasID="fromDirectory",this.object.link.setValue("id",dataList[0].id),this.object.link.setValue("name",dataList[0].name),this.render(!0))}}setLink(link){return this.object.link=link,""!==link.pack?this.object.hasID="fromCompendium":""!==link.id&&(this.object.hasID="fromDirectory"),link.difficulty!==CoC7Check.difficultyLevel.regular||0!==parseInt(link.modifier,10)||link.isPushing?this.object.hasModifiers=!0:this.object.hasModifiers=!1,""!==link.displayName&&(this.object.hasLabel=!0),""!==link.icon&&(this.object.hasIcon=!0),""}static async create(linkData={},option={}){const object=foundry.utils.mergeObject({link:null,hasID:"",hasModifiers:!1,hasLabel:!1,hasIcon:!1,actors:[]},option),dialog=new CoC7ContentLinkDialog(object,{});dialog.setLink(await CoC7Link.fromDropData(linkData)),dialog.render(!0)}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),data={allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,hideDifficulty:options.hideDifficulty??!1,options};void 0!==options.cardType&&(!options.forcedCardType??1)&&(data.cardTypes=CoC7ChatMessage.cardTypes(options));const html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",data);return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}});dlg.render(!0)}))}}class RollCard{constructor(){this.rolls=[],this.initiator=null}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){const buttons=toggle.querySelectorAll(".toggle-switch");for(const b of buttons)card.unsetFlag(b.dataset.flag);card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===data.roll.initiator)));if(messages.length){const timestamp=new Date(messages[0].timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,void 0!==data._rollMode&&(card._rollMode=data._rollMode),await card.process(data)}else game.socket.emit("system.CoC7",data)}static async resolveOld(userId){const messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===userId)));if(messages.length){await messages[0].setFlag("CoC7","state","resolved");const card=await this.fromMessage(messages[0]);card.closeCard(),await card.updateChatCard()}}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated",initiator:this.initiator}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check),"combinedCard"===this.config.type&&(this.initiator=data.roll.initiator)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isKeeper(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return foundry.utils.mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;for(const r of this.rolls)r.passed&&(count+=1);return count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}get checkGMInitiator(){return game.users.get(this.initiator)?.isGM}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll[check.diceModifier||0],silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const pool={};for(const dice of card.rolls){const diceModifier=parseInt(dice.diceModifier,10);isNaN(diceModifier)||(pool[diceModifier]=!1)}const roll=await CoC7Dice.combinedRoll({pool});roll.initiator=game.user.id;const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,roll};AudioHelper.play({src:CONFIG.sounds.dice},!0),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM,roll:{initiator:game.user.id}};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.system));for(const r of this.rolls)r.rolled||(r.modifier=r.diceModifier||0,r.difficulty=r.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=r.flatDiceModifier||0,r.flatThresholdModifier=r.flatThresholdModifier||0,await r._perform({roll:this._roll[r.modifier],silent:!0}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return foundry.utils.mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=foundry.utils.mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!htmlCardElement.dataset.cardClass)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).object;data=foundry.utils.diffObject(this,foundry.utils.expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){const buttons=toggle.querySelectorAll(".ic-radio-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isKeeper(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return void 0===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error(game.i18n.localize("CoC7.ErrorEvaluatingDamage"));const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:game.i18n.format("CoC7.DamageDealTo",{name:targets[index].name,damage:this.totalDamageString})})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.system?.range[range]?.damage,db=this.actor.db;if(db=(""===(db??"").toString().trim()?0:db).toString().trim(),db.startsWith("-")||(db="+"+db),this.weapon.system.properties.addb&&(formula+=db),this.weapon.system.properties.ahdb&&(formula+=CoC7Utilities.halfDB(this.actor.db)),formula){const maxDamage=new Roll(formula)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=this.weapon?.system?.range[range]?.damage+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.system.attribs.armor.value:0}set armor(x){this._armor=x}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return foundry.utils.mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;for(const r of this.rolls)r.winner&&(count+=1);return count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.system.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank=void 0){if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.actorKey)),rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.system.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.combat){if(this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1){this.rolls=[this.rolls[0],this.rolls[1]];for(const r of this.rolls)delete r.winner,delete r.tie}this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0)}else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;const dlg=new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}});dlg.render(!0)}))}}class CoC7ChatMessage{static get ROLL_TYPE_ATTRIBUTE(){return"R/AT"}static get ROLL_TYPE_CHARACTERISTIC(){return"R/CH"}static get ROLL_TYPE_COMBAT(){return"R/CO"}static get ROLL_TYPE_SKILL(){return"R/SK"}static get ROLL_TYPE_ENCOUNTER(){return"R/EC"}static get CARD_TYPE_COMBINED(){return"C/CO"}static get CARD_TYPE_GROUP(){return"C/GR"}static get CARD_TYPE_NORMAL(){return"C/NO"}static get CARD_TYPE_OPPOSED(){return"C/OP"}static get CARD_TYPE_SAN_CHECK(){return"C/SC"}static get CARD_TYPE_NONE(){return"C/NO"}static cardTypes(config){if(config.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)return null;const select={[CoC7ChatMessage.CARD_TYPE_NORMAL]:"CoC7.RegularRollCard",[CoC7ChatMessage.CARD_TYPE_COMBINED]:"CoC7.CombinedRollCard",[CoC7ChatMessage.CARD_TYPE_OPPOSED]:"CoC7.OpposedRollCard"};return config.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE&&"san"===config.attribute&&(select[CoC7ChatMessage.CARD_TYPE_SAN_CHECK]="CoC7.SanityLossEncounter"),select}static normalizeRequest(options){if(void 0!==options.event||void 0===options.cardType||void 0===options.actor||void 0===options.skillId&&void 0===options.skillName&&void 0===options.attribute&&void 0===options.characteristic&&options.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER){if(void 0===options.event||void 0===options.cardType||void 0===options.rollType)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{value:game.i18n.localize("CoC7.Roll")})),!1}else if(void 0!==options.skillId)options.actor.items.get(options.skillId)&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL);else if(void 0!==options.skillName){const skillIds=options.actor.getSkillsByName(options.skillName);skillIds.length>0&&(options.skillId=skillIds[0].id,options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL)}else void 0!==options.attribute&&["lck","san"].includes(options.attribute)?options.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:void 0!==options.characteristic&&void 0!==options.actor.system.characteristics[options.characteristic]&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC);if(![CoC7ChatMessage.CARD_TYPE_COMBINED,CoC7ChatMessage.CARD_TYPE_GROUP,CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_OPPOSED,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(options.cardType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidCardType")})),!1;if(![CoC7ChatMessage.ROLL_TYPE_SKILL,CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,CoC7ChatMessage.ROLL_TYPE_ENCOUNTER].includes(options.rollType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidRollType")})),!1;const config={options:{cardType:options.cardType,shiftKey:options.fastForward??options.event?.shiftKey??options.fastForward??!1,altKey:options.event?.altKey??!1,isCtrlKey:isCtrlKey(options.event??!1),createEncounter:options.createEncounter??!1,openLinkTool:options.openLinkTool??!1,sendToChat:options.sendToChat??!1,sendToClipboard:options.sendToClipboard??!1,isCombat:options.event?.currentTarget.classList?.contains("combat")??!1,preventStandby:options.preventStandby??!1,bonusDice:0},dialogOptions:{rollType:options.rollType,cardType:options.cardType,attribute:"",chatMessage:options.chatMessage??!0,forcedCardType:options.forcedCardType??!1,hideDifficulty:options.hideDifficulty??!1}};switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:if(config.options.skillId=options.skillId??options.event?.currentTarget.closest(".item")?.dataset.skillId,config.options.itemId=options.event?.currentTarget.closest(".item")?.dataset.itemId,config.options.characteristic=options.characteristic??options.event?.currentTarget.parentElement.dataset.characteristic,config.options.attribute=options.attribute??options.event?.currentTarget.parentElement.dataset.attrib,config.dialogOptions.attribute=config.options.attribute,config.options.actorId=options.event?.currentTarget.closest("form").dataset.actorId??options.actor.id,config.options.tokenKey=options.event?.currentTarget.closest("form").dataset.tokenId??options.actor.tokenKey,config.options.weaponAltSkill=options.event?.currentTarget.classList.contains("alternativ-skill"),config.options.actor=options.actor,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&config.options.isCombat){const item=config.options.actor.items.get(config.options.itemId);if(!item)return!1;"weapon"===item.type&&(config.options.weaponName=item.name,config.dialogOptions.rollType=CoC7ChatMessage.ROLL_TYPE_COMBAT)}if(void 0===config.options.actorId||void 0===config.options.tokenKey&&void 0===config.options.actor)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorActor")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&void 0===config.options.skillId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Skill")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC){if(void 0===config.options.characteristic)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Characteristic")})),!1;if(!game.user.isGM&&!config.options.actor.system.characteristics[config.options.characteristic]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE){if(void 0===config.options.attribute)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Attribute")})),!1;if(!game.user.isGM&&!config.options.actor.system.attribs[config.options.attribute]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT){if(void 0===config.options.itemId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Weapon")})),!1;if(config.options.altKey)return!1}config.options.hasPlayerOwner=config.options.actor.hasPlayerOwner??!1,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC?(config.dialogOptions.disableFlatThresholdModifier=config.options.isCtrlKey,config.dialogOptions.disableFlatDiceModifier=config.options.isCtrlKey):(config.dialogOptions.disableFlatThresholdModifier=!1,config.dialogOptions.disableFlatDiceModifier=!1),config.dialogOptions.modifier=0,config.dialogOptions.difficulty=options.difficulty??CoC7Check.difficultyLevel[game.settings.get("CoC7","defaultCheckDifficulty")],config.dialogOptions.flatDiceModifier=0,config.dialogOptions.flatThresholdModifier=0}return config}static async trigger(options={}){const config=CoC7ChatMessage.normalizeRequest(options);if(!1!==config)if(config.options.isCtrlKey&&game.user.isGM&&[CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(config.dialogOptions.cardType))CoC7ChatMessage.createLink(config);else{if(!(config.options.sendToChat||config.options.sendToClipboard||config.options.openLinkTool||config.options.createEncounter)||!game.user.isGM||CoC7ChatMessage.CARD_TYPE_NONE!==config.dialogOptions.cardType){if(void 0!==config.options.actor){if(void 0!==config.options.attribute){const bonusDice=config.options.actor.system?.attribs?.[config.options.attribute]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.characteristic){const bonusDice=config.options.actor.system?.characteristics?.[config.options.characteristic]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.itemId){const itemModifiers=Object.values(config.options.actor.system.skills).find((k=>k.foundryID===config.options.itemId));void 0!==itemModifiers?.bonusDice&&(config.dialogOptions.modifier=itemModifiers.bonusDice)}config.dialogOptions.modifier=Math.min(Math.max(config.dialogOptions.modifier,-2),2)}return config.options.shiftKey||await CoC7ChatMessage.createRoll(config),CoC7ChatMessage.runRoll(config)}CoC7ChatMessage.createLink(config)}}static createLink(config){switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_COMBAT:case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:{const linkData={type:"CoC7Link"};if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL){if(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.SKILL,linkData.name=config.options.actor.items.get(config.options.skillId)?.shortName,!linkData.name)return}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC)linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.CHARACTERISTIC,linkData.name=config.options.characteristic;else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE)(config.options.altKey||config.options.createEncounter)&&"san"===config.options.attribute?linkData.check=CoC7Link.CHECK_TYPE.SANLOSS:(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.ATTRIBUTE,linkData.name=config.options.attribute);else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)linkData.check=CoC7Link.CHECK_TYPE.ITEM,linkData.name=config.options.weaponName;else{if(config.dialogOptions.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER)return;linkData.check=CoC7Link.CHECK_TYPE.SANLOSS,linkData.sanMin=config.options.actor?.system?.special?.sanLoss?.checkPassed,linkData.sanMax=config.options.actor?.system?.special?.sanLoss?.checkFailled,linkData.sanReason=config.options.actor.system.infos.type?.length?config.options.actor.system.infos.type:config.options.actor.name}"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),config.options.sendToChat?CoC7Link.toChatMessage(linkData):config.options.sendToClipboard?CoC7Link.fromDropData(linkData).then((link=>{CoC7Utilities.copyToClipboard(link.link)})):CoC7ContentLinkDialog.create(linkData,{actors:[config.options.actor].filter((a=>a.owners.length)),hasModifiers:config.options.shiftKey})}}}static async createRoll(config){const usage=await RollDialog.create(config.dialogOptions);if(usage){const cardType=usage.get("cardType");cardType&&(config.dialogOptions.cardType=cardType),config.dialogOptions.modifier=Number(usage.get("bonusDice")),config.dialogOptions.difficulty=Number(usage.get("difficulty")),config.dialogOptions.flatDiceModifier=Number(usage.get("flatDiceModifier")),config.dialogOptions.flatThresholdModifier=Number(usage.get("flatThresholdModifier"))}}static async runRoll(config){switch(config.dialogOptions.cardType){case CoC7ChatMessage.CARD_TYPE_SAN_CHECK:{const sanData=await SanDataDialog.create({promptLabel:!0});if(sanData){let sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0;const sanReason=sanData.get("sanReason");isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)),SanCheckCard.create(config.options.actor.actorKey,{sanMin,sanMax,sanReason},{sanModifier:config.dialogOptions.modifier,sanDifficulty:config.dialogOptions.difficulty,fastForward:config.options.shiftKey})}}break;case CoC7ChatMessage.CARD_TYPE_NORMAL:{const check=new CoC7Check;return check.diceModifier=config.dialogOptions.modifier,check.difficulty=config.dialogOptions.difficulty,check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.flatDiceModifier=config.dialogOptions.flatDiceModifier,check.flatThresholdModifier=config.dialogOptions.flatThresholdModifier,check.standby=!config.options.preventStandby&&game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&config.options.hasPlayerOwner,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL?(check.skill=config.options.skillId,check.canBePushed=check._getItemFromId(check.skill)?.system?.properties?.push??!1,await check.roll()):config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE?await check.rollAttribute(config.options.attribute):await check.rollCharacteristic(config.options.characteristic),config.dialogOptions.chatMessage&&check.toMessage(),{result:check.modifiedResult,successLevel:check.rolledSuccessLevel,isFumble:check.isFumble,isCritical:check.isCritical,successLevels:{1:check.regularThreshold,2:check.hardThreshold,3:check.extremeThreshold},passed:check.passed}}case CoC7ChatMessage.CARD_TYPE_OPPOSED:case CoC7ChatMessage.CARD_TYPE_COMBINED:{const check=new CoC7Check;check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.characteristic=config.options.characteristic,check.attribute=config.options.attribute,check.skillId=config.options.skillId,check.rollMode=game.settings.get("core","rollMode"),check.initiator=game.user.id;let data={};config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?(data={type:OpposedCheckCard.defaultConfig.type,combat:config.options.isCombat,action:"new"},check.item=config.options.itemId,check.weaponAltSkill=config.options.weaponAltSkill,check.denyPush=!0,await check._perform()):(data={type:CombinedCheckCard.defaultConfig.type,action:"new"},check.difficulty=config.dialogOptions.difficulty),data.roll=check.JSONRollData,data._rollMode=game.settings.get("core","rollMode"),config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?OpposedCheckCard.dispatch(data):CombinedCheckCard.dispatch(data)}}}}class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isBlind||this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item"),itemList=li.closest(".item-list");for(const item of itemList.querySelectorAll(".selectable"))item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1;$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);this.checkTotal(),"validate"===action&&this.data.data.validate&&this.close()}async rollCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:this.data.data.characteristics.list[key].label,formula})}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value)?(validation.classList.add("warning"),this.data.data.validate=!1):(validation.classList.remove("warning"),this.data.data.validate=!0);validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&(this.data.data.validate=0===Object.values(this.data.data.characteristics.values).filter((val=>isNaN(parseInt(val)))).length)}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class SkillSpecializationSelectDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","skill-name-dialog"],title:"",template:"systems/CoC7/templates/apps/skill-specialization-select.hbs",width:400,height:"auto",closeOnSubmit:!1})}get title(){return game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:this.object.specializationName})}activateListeners(html){super.activateListeners(html),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("[name=existing-skill]").change(this._onSelectChange.bind(this))}async _onSelectChange(event){this.object.selected=event.currentTarget.value,this.render(!0)}async _onClickSubmit(event){if(""===this.object.selected){const obj=$(event.currentTarget).closest("form");this.object.name=obj.find("input[name=new-skill-name]").val()??"",this.object.baseValue=obj.find("input[name=base-value]").val()??""}if(""===this.object.selected&&""===this.object.name)return!1;this.object.resolve({selected:this.object.selected,name:this.object.name,baseValue:this.object.baseValue}),this.close()}async _updateObject(event,formData){}static async create({skills=[],allowCustom=!1,fixedBaseValue=!1,specializationName="",label="",baseValue=null}={}){const select=[];for(const skill of skills)select.push({id:skill.id,name:skill.name,base:skill.system.base});return await new Promise((resolve=>{new SkillSpecializationSelectDialog({specializationName,allowCustom,fixedBaseValue,allowSelect:skills.length>0,skills:select,selected:"",name:"",label,baseValue,resolve},{}).render(!0)}))}}class SkillValueDialog{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"noResponse":this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.action="roll-melee-damage",this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target;break;case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme&&"initiator"===this.winner.roll.side?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.diceModifier=0,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.notResponding=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.notResponding||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.notResponding?"noResponse":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;switch(this[flag]=!this[flag],flag){case"outnumbered":case"surprised":this.diceModifier=Math.max(-2,Math.min(2,parseInt(this.diceModifier,10)+(this[flag]?1:-1)))}}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.ownership))if(v===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">';for(const k of owners){const user=game.users.get(k);user&&(content=content+'<option value="'+k+'">'+user.name+"</option>")}content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(user=game.users.get(value))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const message=game.messages.get(this.messageId);if(!game.user.isGM&&message.user.id!==game.user.id)return void ui.notifications.info(game.i18n.localize("CoC7.UnableToInteractWithChatCard"));const html=await renderTemplate(this.template,this),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"noResponse":target.dodging=!1,target.notResponding=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=null,target.itemId=null;break;case"fightBack":target.dodging=!1,target.notResponding=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.diceModifier&&(check.diceModifier=this.diceModifier),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishNoReponseResult(){this.rolled=!0,this.resolved=!0,this.notResponding=!0;const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.bonusDieA=!1,this.bonusDieB=!1,this.penaltyDieA=!1,this.penaltyDieB=!1,this.totalBulletsFired=0,this._targets=[];for(const t of[...game.user.targets]){const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)}if(this._targets.length)this._targets=[this._targets[0]],this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.system.properties.auto&&(this.fullAuto=!0))}}if(this.tokenKey)for(const t of this._targets)if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.system.characteristics.dex.value/15&&t.toggleFlag("pointBlankRange")}!0!==t.pointBlankRange&&this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.system.properties.shotgun?distInYd<=this.weapon.baseRange?t.baseRange=!0:distInYd<=this.weapon.longRange?t.longRange=!0:distInYd<=this.weapon.extremeRange?t.extremeRange=!0:t.outOfRange=!0:(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.system.skill.main.id)}get autoWeaponSkill(){return this.weapon.system.skill.alternativ.id?this.actor.items.get(this.weapon.system.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;for(const r of this.rolls)anyHit=anyHit||r.isSuccess;return anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"∞":this.weapon.system.usesPerRound.max?parseInt(this.weapon.system.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.system.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){for(const t of this.targets)t.shotDifficulty=this.shotDifficulty(t)}get calculatedBonusDice(){return this._calculatedModifier>2?this._calculatedModifier:0}get calculatedPenaltyDice(){return this._calculatedModifier<-2?-this._calculatedModifier:0}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.system.range.normal.damage;this.weapon.system.properties.shotgun&&(t.longRange&&(damage=this.weapon.system.range.long.damage),t.extremeRange&&(damage=this.weapon.system.range.extreme.damage));let difficulty,modifier=parseInt(target.modifier,10);difficulty=this.weapon.system.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),this.bonusDieA&&modifier++,this.bonusDieB&&modifier++,this.penaltyDieA&&modifier--,this.penaltyDieB&&modifier--,this._calculatedModifier=modifier,modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}else modifier>2&&(modifier=2);return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName=`${game.i18n.localize("CoC7.RollDifficultyRegular")}`),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName=`${game.i18n.localize("CoC7.RollDifficultyHard")}`),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName=`${game.i18n.localize("CoC7.RollDifficultyExtreme")}`),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName=`${game.i18n.localize("CoC7.RollDifficultyCritical")}`),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName=`${game.i18n.localize("CoC7.RollDifficultyImpossible")}`),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.system.usesPerRound.burst)?parseInt(this.weapon.system.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):(this[flag]=!this[flag],console.log(flag,this[flag]))}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.system.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);const cardTargets=card.querySelectorAll(".target");for(const t of cardTargets){const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}const cardShots=card.querySelectorAll(".shot");if(cardShots)for(const s of cardShots){const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)}rangeInitiator.rolls=[];const rolls=card.querySelectorAll(".roll-result");for(const r of rolls){const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)}rangeInitiator.damage=[];const damageRolls=card.querySelectorAll(".damage-results");for(const dr of damageRolls){const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)}return rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[];if(volleySize>0){let damageFormula=String(h.shot.damage);damageFormula&&""!==damageFormula||(damageFormula="0");const damageWithoutDB=damageFormula;this.item.system.properties.addb&&(damageFormula=damageFormula+"+"+this.actor.db),this.item.system.properties.ahdb&&(damageFormula+=CoC7Utilities.halfDB(this.actor.db));const damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageWithoutDB} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll);const dice=[];for(const die of roll.dice)for(const result of die.results)dice.push({faces:die.faces,result:result.result});damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,dice,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate(),await CoC7Dice.showRollDice3d(roll);const dice=[];for(const die of roll.dice)for(const result of die.results)dice.push({faces:die.faces,result:result.result});damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,dice,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){return this.token&&this.token.document?.texture.src?this.token.document?.texture.src:this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],this.actor&&"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("change","input[type=range].slider",CoC7Chat._onChatCardRange.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&(0===chatMessage.type||0===chatMessage.style)){const card=$(chatMessage.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||game.user.isTrusted&&game.settings.get("CoC7","trustedCanSeeChatCard")||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey||zone.dataset?.actorId);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");if(!game.user.isTrusted||!game.settings.get("CoC7","trustedCanModfyChatCard"))for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag");const gmRangeOnly=html.find(".gm-range-only");if(!game.user.isTrusted||!game.settings.get("CoC7","trustedCanModfyChatCard"))for(const range of gmRangeOnly)range.disabled=!0}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");for(const i of targetsSelector.querySelectorAll("img"))i.style.border="none";targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");for(const t of targets.querySelectorAll(".target"))t.style.display="none",t.dataset.active="false";const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardRange(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;if(!CoC7Chat._getChatCardActor(card))return;const messageId=card.closest(".message").dataset.messageId;let messageCard;card.classList.contains("range")?messageCard=CoC7RangeInitiator.getFromCard(card):card.classList.contains("target")?messageCard=CoC7MeleeTarget.getFromCard(card):card.classList.contains("initiator")&&(messageCard=CoC7MeleeInitiator.getFromCard(card)),messageCard.diceModifier=event.currentTarget.value,await messageCard.updateChatCard(),document.querySelector('[data-message-id="'+messageId+'"]').querySelector('input[type=range][name="'+button.name+'"]').focus()}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;const originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card),check=await initiator.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await initiator.publishCheckResult();break}case"melee-target-no-response":{const target=CoC7MeleeTarget.getFromCard(card);await target.publishNoReponseResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card),check=await target.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),isCtrlKey(event),check.updateChatCard({makePublic:!0});break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.clearSanLossReason(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.diceModifier=0,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;switch(this[flag]=!this[flag],flag){case"outnumbered":case"surprised":this.diceModifier=Math.max(-2,Math.min(2,parseInt(this.diceModifier,10)+(this[flag]?1:-1)))}}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.diceModifier&&(check.diceModifier=this.diceModifier),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const message=await game.CoC7socket.executeAsGM("gmcreatemessageas",{targetKey:this.targetKey,messageId:this.messageId,fastForward:this.fastForward,actorKey:this.actorKey});this.targetCard=message.id||message._id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(game.i18n.format("CoC7.LuckNotEnough",{name:this.actor.name})),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{constructor(data,context){if(data.type in CONFIG.Actor.documentClasses&&!context?.extended)return new CONFIG.Actor.documentClasses[data.type](data,{extended:!0,...context});super(data,context)}async initialize(){super.initialize(),await this.creatureInit()}prepareBaseData(){if(["character","npc","creature"].includes(this.type)){this.system.skills={};for(const i of this.items)"skill"===i.type&&(this.system.skills[`${i.itemIdentifier}`]={foundryID:i.id,cocid:i.flags?.CoC7?.cocidFlag?.id,value:i.rawValue,bonusDice:i.system.bonusDice});if(void 0===this.system.attribs.san.dailyLimit)if(this.system.attribs.san.oneFifthSanity){const s=this.system.attribs.san.oneFifthSanity.split("/");s[1]&&!isNaN(Number(s[1]))?this.system.attribs.san.dailyLimit=Number(s[1]):this.system.attribs.san.dailyLimit=0}else this.system.attribs.san.dailyLimit=0;this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.build.current=this.hp}super.prepareBaseData()}prepareEmbeddedDocuments(){super.prepareEmbeddedDocuments()}prepareDerivedData(){if(["character","npc","creature"].includes(this.type)){super.prepareDerivedData(),this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.hp.max=this.rawHpMax,null===this.hp&&(this.system.attribs.hp.value=this.rawHpMax),this.system.attribs.mp.max=this.rawMpMax,null===this.mp&&(this.system.attribs.mp.value=this.rawMpMax),this.system.attribs.san.max=this.rawSanMax,null===this.san&&(this.system.attribs.san.value=this.rawSanMax);const filterMatrix=[];this.system.attribs.hp.auto&&filterMatrix.push("system.attribs.hp.max"),this.system.attribs.mp.auto&&filterMatrix.push("system.attribs.mp.max"),this.system.attribs.san.auto&&filterMatrix.push("system.attribs.san.max"),this.system.attribs.mov.auto&&filterMatrix.push("system.attribs.mov.value"),this.system.attribs.db.auto&&filterMatrix.push("system.attribs.db.value"),this.system.attribs.build.auto&&filterMatrix.push("system.attribs.build.value");const changes=this.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);changes.sort(((a,b)=>a.priority-b.priority));const selectChanges=changes.filter((e=>filterMatrix.includes(e.key)));for(const change of selectChanges)change.effect.apply(this,change);this.hpMax&&this.hpMax<this.hp&&(this.system.attribs.hp.value=this.hpMax),this.mpMax&&this.mpMax<this.mp&&(this.system.attribs.mp.value=this.mpMax),this.sanMax&&this.sanMax<this.san&&(this.system.attribs.san.value=this.sanMax)}}static defaultImg(type){switch(type){case"container":return"icons/svg/chest.svg";case"creature":return"systems/CoC7/assets/icons/floating-tentacles.svg";case"npc":return"systems/CoC7/assets/icons/cultist.svg"}}static async create(data,options={}){return"character"===data.type?data.prototypeToken=foundry.utils.mergeObject(data.prototypeToken||{},{actorLink:!0,disposition:1,sight:{enabled:!0}}):"npc"===data.type||"creature"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img=CoCActor.defaultImg(data.type)):"container"===data.type&&(void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img=CoCActor.defaultImg(data.type)),data.prototypeToken=foundry.utils.mergeObject(data.prototypeToken||{},{actorLink:!0})),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.system.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.system.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.system.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.system.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.system.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.system.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,shortName:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,shortName:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,shortName:"CHARAC.EDU",label:"CHARAC.Education",formula:null}};if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get hasTempoInsane(){return this.hasConditionStatus(COC7.status.tempoInsane)}get getTempoInsaneDurationText(){return this.hasConditionValue(COC7.status.tempoInsane,"durationText")}get hasIndefInsane(){return this.hasConditionStatus(COC7.status.indefInsane)}get portrait(){return game.settings.get("CoC7","useToken")&&(this.token?.texture?.src||this.prototypeToken?.texture?.src)||this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.DOCUMENT===result.tableRoll.results[0].type){const item=game.items.get(result.tableRoll.results[0].documentId);if(void 0!==item){item.system?.type?.phobia&&(result.phobia=!0),item.system?.type?.mania&&(result.mania=!0),result.description=`${item.name}:`+await TextEditor.enrichHTML(item.system.description.value,{async:!0}),result.name=item.name;const itemData=item.toObject();delete itemData._id,await this.createEmbeddedDocuments("Item",[itemData])}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].type&&(result.description=await TextEditor.enrichHTML(result.tableRoll.results[0].text,{async:!0}))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.setCondition(COC7.status.tempoInsane,{realTime,duration}),result):result}static emptySkill(skillName,value,{rarity=!1,push=!0,combat=!1,img=!1,specialization=!1}={}){const data={name:skillName,type:"skill",system:{value,skillName,specialization:"",properties:{special:!1,rarity,push,combat}}};if(!1!==img&&(data.img=img),!1!==specialization){const parts=CoC7Item.getNamePartsSpec(skillName,specialization);data.system.specialization=parts.specialization,data.system.skillName=parts.skillName,data.name=parts.name,data.system.properties.special=!0}return data}async createSkill(skillName,value,showSheet=!1){const data=CoCActor.emptySkill(skillName,value);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name);if(!1===skillData)return;const value=Number(skillData.get("base-value")),parts=CoC7Item.getNamePartsSpec(name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),data={name:parts.name,type:"skill",system:{base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const parts=CoC7Item.getNamePartsSpec(game.i18n.localize(COC7.creatureFightingSkill),game.i18n.localize(COC7.fightingSpecializationName)),data={type:"skill",name:parts.name,system:{base:0,value:null,skillName:parts.skillName,specialization:parts.specialization,properties:{combat:!0,fighting:!0,special:!0},flags:{}}},skill=await this.createEmbeddedDocuments("Item",[data],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",system:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1});if(skill.length>0&&attack.length>0){const createdAttack=this.items.get(attack[0].id);await createdAttack.update({"system.skill.main.id":skill[0].id,"system.skill.main.name":skill[0].name})}}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",system:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptyBook(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newBookName)))return this.createBook(game.i18n.localize(COC7.newBookName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newBookName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newBookName)+" "+index;return this.createBook(itemName,showSheet)}async createBook(itemName,showSheet=!1){const data={name:itemName,type:"book",system:{}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySpell(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSpellName)))return this.createSpell(game.i18n.localize(COC7.newSpellName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;return this.createSpell(itemName,showSheet)}static emptySpell(itemName){return{name:itemName,type:"spell",system:{}}}async createSpell(itemName,showSheet=!1){const data=CoCActor.emptySpell(itemName);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),"character"!==this.type?1:null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null,properties={}){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",system:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.system.properties[key]=Object.prototype.hasOwnProperty.call(properties,key)??!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.system.biography?foundry.utils.duplicate(this.system.biography):[];bio.push({title,value:null}),await this.update({"system.biography":bio},{renderSheet:!1})}async updateBioValue(index,content){const bio=foundry.utils.duplicate(this.system.biography);bio[index].value=content,await this.update({"system.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=foundry.utils.duplicate(this.system.biography);bio[index].title=title,await this.update({"system.biography":bio})}async deleteBioSection(index){const bio=foundry.utils.duplicate(this.system.biography);bio.splice(index,1),await this.update({"system.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=foundry.utils.duplicate(this.system.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"system.biography":bio})}async moveBioSectionDown(index){const bio=foundry.utils.duplicate(this.system.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"system.biography":bio})}async updateTextArea(textArea){const name="system."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const processedDataArray=[];let baseValue=0,baseCalculated=0,archetype=!1,occupation=!1;for(let data of dataArray)switch(data.type){case"skill":{if(baseValue=data.system.base,baseCalculated=await CoC7Item.calculateBase(this,data),"character"!==this.type){if(this.getItemIdByName(data.name))return;if(baseValue&&String(baseValue)!==String(data.system.value)&&(data.system.value=baseCalculated),isNaN(Number(data.system.value))){let value;try{value=(await new Roll(data.system.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.system.value=Math.floor(value))}}else data.system.value=null;let addThis=!0;if(CoC7Item.isAnySpec(data)){const isAnyButNotFlagged=(!data.system.properties?.requiresname??!1)&&!data.system.properties?.picknameonly;let skillList=[];const group=game.system.api.cocid.guessGroupFromDocument(data);if(group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>(item.system.properties?.special??!1)&&!item.system.properties?.requiresname&&!item.system.properties?.picknameonly))),data.system?.flags?.occupation||data.system?.flags?.archetype){const existingSkills=this.skills.filter((el=>!!el.system.specialization&&((!data.system?.flags?.occupation||!el.system.flags?.occupation)&&((!data.system?.flags?.archetype||!el.system.flags?.archetype)&&data.system.specialization.toLocaleLowerCase()===el.system.specialization.toLocaleLowerCase()))));if(existingSkills.length>0)if(skillList.length>0){for(let i=existingSkills.length-1;i>=0;i--){const found=skillList.findIndex((item=>item.name===existingSkills[i].name||item.flags?.CoC7?.cocidFlag?.id===existingSkills[i].flags?.CoC7?.cocidFlag?.id));found>-1&&skillList.splice(found,1)}skillList=skillList.concat(existingSkills)}else skillList=existingSkills}skillList.length>0&&skillList.sort(CoC7Utilities.sortByNameKey);const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:isAnyButNotFlagged||(data.system.properties?.requiresname??!1),fixedBaseValue:data.system.properties?.keepbasevalue??!1,specializationName:data.system.specialization,label:data.name,baseValue:data.system.base});if(Object.prototype.hasOwnProperty.call(skillData,"selected"))if(skillData.selected){const existingItem=this.items.get(skillData.selected);if(existingItem){const changes={};data.system.properties?.keepbasevalue||""!==skillData.baseValue&&(baseCalculated=skillData.baseValue,changes["system.value"]=baseCalculated);for(const[key,value]of Object.entries(data.system.flags))value&&(changes[`system.flags.${key}`]=!0);Object.keys(changes).length>0&&(changes._id=existingItem.id,await this.updateEmbeddedDocuments("Item",[changes])),data.name=CoC7Item.getNameWithoutSpec(existingItem),addThis=!1}else{const existing=skillList.find((i=>i.id===skillData.selected));if(existing){const flags=data.system?.flags,keepBase=data.system.properties?.keepbasevalue??!1;data=foundry.utils.duplicate(existing);for(const[key,value]of Object.entries(flags))value&&(data.system.flags[key]=!0);keepBase&&(""!==skillData.baseValue&&(data.system.base=skillData.baseValue),baseValue=skillData.baseValue,baseCalculated=await CoC7Item.calculateBase(this,data))}}}else{const parts=CoC7Item.getNamePartsSpec(skillData.name,data.system.specialization);data.system.properties?.keepbasevalue||(""!==skillData.baseValue&&(data.system.base=skillData.baseValue),baseValue=skillData.baseValue,baseCalculated=await CoC7Item.calculateBase(this,data)),data.system.skillName=parts.skillName,data.name=parts.name}}addThis&&(String(baseValue)!==String(baseCalculated)&&(data.system.base=baseCalculated),processedDataArray.push(foundry.utils.duplicate(data)));break}case"weapon":if("container"!==this.type){const mainSkill=data.system?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;if(name.match(/i\.skill\./)){const availableSkills=await game.system.api.cocid.fromCoCIDBest({cocid:name,showLoading:!0});availableSkills.length&&(await this.addItems([availableSkills[0]]),skill=await this.getSkillsByName(mainSkill)[0])}if(!skill){const existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(mainSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}}skill&&(data.system.skill.main.id=skill.id)}const secondSkill=data.system?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=secondSkill.match(/\(([^)]+)\)/)?secondSkill.match(/\(([^)]+)\)/)[1]:secondSkill;if(name.match(/i\.skill\./)){const availableSkills=await game.system.api.cocid.fromCoCIDBest({cocid:name,showLoading:!0});availableSkills.length&&(await this.addItems([availableSkills[0]]),skill=await this.getSkillsByName(secondSkill)[0])}if(!skill){const existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(secondSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}}skill&&(data.system.skill.alternativ.id=skill.id)}}processedDataArray.push(foundry.utils.duplicate(data));break;case"setup":{if(data.system.enableCharacterisitics){data.system.characteristics.list={},data.system.characteristics.list.str=this.getCharacteristic("str"),data.system.characteristics.list.con=this.getCharacteristic("con"),data.system.characteristics.list.siz=this.getCharacteristic("siz"),data.system.characteristics.list.dex=this.getCharacteristic("dex"),data.system.characteristics.list.app=this.getCharacteristic("app"),data.system.characteristics.list.int=this.getCharacteristic("int"),data.system.characteristics.list.pow=this.getCharacteristic("pow"),data.system.characteristics.list.edu=this.getCharacteristic("edu"),data.system.characteristics.list.luck={},data.system.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.system.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.system.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.system.characteristics.values||(data.system.characteristics.values={}),data.system.characteristics.values.str=data.system.characteristics.list.str.value,data.system.characteristics.values.con=data.system.characteristics.list.con.value,data.system.characteristics.values.siz=data.system.characteristics.list.siz.value,data.system.characteristics.values.dex=data.system.characteristics.list.dex.value,data.system.characteristics.values.app=data.system.characteristics.list.app.value,data.system.characteristics.values.int=data.system.characteristics.list.int.value,data.system.characteristics.values.pow=data.system.characteristics.list.pow.value,data.system.characteristics.values.edu=data.system.characteristics.list.edu.value,data.system.characteristics.values.luck=data.system.characteristics.list.luck.value,data.system.characteristics.points.enabled?data.system.title=game.i18n.localize("CoC7.SpendPoints"):data.system.title=game.i18n.localize("CoC7.RollCharac"),data.system.pointsWarning=!(null!==data.system.characteristics.values.str&&null!==data.system.characteristics.values.con&&null!==data.system.characteristics.values.siz&&null!==data.system.characteristics.values.dex&&null!==data.system.characteristics.values.app&&null!==data.system.characteristics.values.int&&null!==data.system.characteristics.values.pow&&null!==data.system.characteristics.values.edu);if(!await CharacRollDialog.create(data.system))return;{const updateData={};for(const key of["str","con","siz","dex","app","int","pow","edu"])data.system.characteristics.values[key]&&(updateData[`system.characteristics.${key}.value`]=data.system.characteristics.values[key],updateData[`system.characteristics.${key}.formula`]=data.system.characteristics.rolls[key]);data.system.characteristics.values.luck&&(updateData["system.attribs.lck.value"]=data.system.characteristics.values.luck),data.system.characteristics.values.pow&&(updateData["system.attribs.san.value"]=data.system.characteristics.values.pow,updateData["system.attribs.san.dailyLimit"]=Math.floor(data.system.characteristics.values.pow/5),updateData["system.attribs.mp.max"]=Math.floor(data.system.characteristics.values.pow/5)),await this.update(updateData,{renderSheet:!1}),await this.update({"system.attribs.hp.value":this.rawHpMax,"system.attribs.hp.max":this.rawHpMax},{renderSheet:!1})}}const era=Object.entries(data.flags?.CoC7?.cocidFlag?.eras).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:data.system.items,era:void 0===era[0]||era[0]}),skills=items.filter((it=>"skill"===it.type)),othersItems=items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"system.backstory":data.system.backstory},{renderSheet:!1});else for(const sectionName of data.system.bioSections)!this.system.biography?.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);const monetary=foundry.utils.mergeObject(this.system.monetary,foundry.utils.duplicate(data.system.monetary)),sheet=this.sheet;let state=!1;do{state=await new Promise((resolve=>setTimeout((()=>{resolve(sheet._state)}),100)))}while(state===Application.RENDER_STATES.RENDERING);await this.update({"system.monetary":monetary}),Hooks.call("setupFinishedCoC7");break}case"archetype":if("character"===this.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];for(const entry of Object.entries(data.system.coreCharacteristics)){const[key,value]=entry;if(data.system.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}}let charac;if(coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.system.coreCharacteristics[charac]=!0,data.system.coreCharacteristicsFormula.enabled){let value=Number(data.system.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.system.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:char.label,formula:data.system.coreCharacteristicsFormula.value})}),value=char.value<roll.total?roll.total:char.value}await this.update({[`system.characteristics.${charac}.value`]:value})}data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),await this.addUniqueItems(data.system.skills,"archetype"),processedDataArray.push(foundry.utils.duplicate(data)),archetype=!0}break;case"occupation":if("character"===this.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}if(data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),Number(data.system.creditRating.max)>0){const actorCreditRating=game.system.api.cocid.findCocIdInList("i.skill.credit-rating",data.system.skills);0===actorCreditRating.length?0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&(data.system.skills.push("i.skill.credit-rating"),data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills})):0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&data.system.skills.push(actorCreditRating[0])}const pointsDialogData={};pointsDialogData.characteristics=data.system.occupationSkillPoints;let total=0,optionalChar=!1;for(const entry of Object.entries(data.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)}if(pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.system.groups.length;index++){data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:data.system.groups[index].skills});const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow");for(const value of data.system.groups[index].skills)if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.system.flags?.occupation){data.system.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.system.personal)){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.system.personal)});for(const s of this.skills)if(!s.system.flags.occupation&&!s.system.properties.noadjustments&&!s.system.properties.noxpgain){data.system.skills.find((item=>item.name===s.name))||dialogData.skills.push(s)}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.system.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"system.adjustments.occupation":Number(data.system.creditRating.min)})),processedDataArray.push(foundry.utils.duplicate(data)),occupation=!0}break;default:processedDataArray.push(foundry.utils.duplicate(data))}if(0===processedDataArray.length)return[];const processed=await super.createEmbeddedDocuments(embeddedName,processedDataArray,options);return archetype&&(await this.update({"system.development.archetype":this.archetypePoints}),Hooks.call("archetypeFinishedCoC7")),occupation&&(await this.update({"system.development.occupation":this.occupationPoints,"system.development.personal":this.personalPoints}),Hooks.call("occupationFinishedCoC7")),processed}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id);return id}getItemsByName(itemName){const itemList=[];for(const value of this.items)value.name===itemName&&itemList.push(value);return itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()!==name.toLowerCase()&&value.flags?.CoC7?.cocidFlag?.id!==skillName||"skill"!==value.type||skillList.push(value);return skillList}getFirstItemByCoCID(cocid){return this.items.find((i=>i.flags?.CoC7?.cocidFlag?.id===cocid))}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[],characteristicList=foundry.utils.isNewerVersion(game.version,"12")?game.system.template.Actor.character.characteristics:game.system.template.Actor.templates.characteristics.characteristics;for(const[key,value]of Object.entries(characteristicList))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.system.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.system.attribs.san.value}:null}async runRoll(options={}){void 0===options.cardType&&(options.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL),void 0===options.preventStandby&&(options.preventStandby=!0),options.actor=this;return await CoC7ChatMessage.trigger(options)}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"system.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"system.development.archetype":null})}get luck(){return parseInt(this.system.attribs?.lck?.value)}async setLuck(value){return await this.update({"system.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){return parseInt(this.system.attribs.hp.value)}get rawHpMax(){return this.system.attribs.hp.auto?null!=this.system.characteristics.siz.value&&null!=this.system.characteristics.con.value?CoCActor.hpFromCharacteristics(this.system.characteristics,this.type):this.system.attribs.hp.max?parseInt(this.system.attribs.hp.max):null:parseInt(this.system.attribs.hp.max)}get hpMax(){return parseInt(this.system.attribs.hp.max)}async _setHp(value){return value<0&&(value=0),value>this.system.attribs.hp.max&&(value=parseInt(this.system.attribs.hp.max)),await this.update({"system.attribs.hp.value":value})}async addUniqueItems(skillList,flag=null){const processed=[];for(let skill of skillList)if(skill=foundry.utils.duplicate(skill),flag&&(Object.prototype.hasOwnProperty.call(skill.system,"flags")||(skill.system.flags={}),skill.system.flags[flag]=!0),CoC7Item.isAnySpec(skill))processed.push(skill);else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else processed.push(skill)}0!==processed.length&&await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addItems(itemList,flag=null){const processed=[];for(const item of itemList)flag&&(item.system.flags||(item.system.flags={}),item.system.flags[flag]=!0),processed.push(foundry.utils.duplicate(item));if(0!==processed.length)return await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.system.flags||(skill.system.flags={}),skill.system.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get rawMpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?CoCActor.mpFromCharacteristics(this.system.characteristics):0:parseInt(this.system.attribs.mp.max)}getReasonSanLoss(sanReason){return"string"==typeof sanReason?this.system.sanityLossEvents.filter((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()))[0]??{type:"",totalLoss:0,immunity:!1}:{type:"",totalLoss:0,immunity:!1}}sanLostToReason(sanReason){if(sanReason){return this.getReasonSanLoss(sanReason).totalLoss}return 0}sanLossReasonEncountered(sanReason){if(sanReason){return""!==this.getReasonSanLoss(sanReason).type}return!1}setReasonSanLoss(sanReason,sanLoss){if("string"==typeof sanReason&&""!==sanReason){const sanityLossEvents=foundry.utils.duplicate(this.system.sanityLossEvents),index=sanityLossEvents.findIndex((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()));return sanLoss>0?-1===index?sanityLossEvents.push({type:sanReason,totalLoss:sanLoss,immunity:!1}):sanityLossEvents[index].totalLoss+=sanLoss:index>-1&&(sanityLossEvents.splice(index,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)}))),this.update({"system.sanityLossEvents":sanityLossEvents})}}maxLossToSanReason(sanReason,sanMaxFormula){const sanMax=new Roll(sanMaxFormula.toString())[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total,sanityLossEvent=this.getReasonSanLoss(sanReason);return sanityLossEvent.immunity?0:Math.max(0,sanMax-sanityLossEvent.totalLoss)}async looseSan(sanReason,sanLoss){return this.getReasonSanLoss(sanReason).immunity?0:(await this.setSan(this.san-sanLoss),sanLoss>0&&this.setReasonSanLoss(sanReason,sanLoss),sanLoss)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.system.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.system.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.system.attribs.san?.dailyLoss||0}get dailySanLimit(){return this.system.attribs.san?.dailyLimit||0}get rawSanMax(){if(this.system.attribs)return this.system.attribs?.san?.auto?this.cthulhuMythos?Math.max(99-this.cthulhuMythos,0):99:parseInt(this.system.attribs.san.max)}get sanMax(){return parseInt(this.system.attribs.san.max)}get mp(){return parseInt(this.system.attribs.mp.value)}get mpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?Math.floor(this.system.characteristics.pow.value/5):0:parseInt(this.system.attribs.mp.max)}async setMp(value){return value<0&&(value=0),value>parseInt(this.system.attribs.mp.max)&&(value=parseInt(this.system.attribs.mp.max)),await this.update({"system.attribs.mp.value":value})}get san(){return parseInt(this.system.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.system.adjustments?.occupation&&(occupationPoints+=skill.system.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;for(const entry of Object.entries(this.occupation.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))}return points}async resetOccupationPoints(){await this.update({"system.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"system.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"system.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.system.adjustments?.archetype&&(archetypePoints+=skill.system.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.system.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.system.adjustments?.experience&&(experiencePoints+=skill.system.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.system.adjustments?.personal&&(personalPoints+=skill.system.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.system.characteristics.int.value)}get hasDevelopmentPhase(){for(const skill of this.skills)if(skill.system.flags?.developement)return!0;if(this.onlyRunOncePerSession)return!1;for(const sanityLossEvent of this.system.sanityLossEvents)if(!sanityLossEvent.immunity)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.system.attribs.san.max&&(value=this.system.attribs.san.max);const loss=parseInt(this.system.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.system.attribs.san.dailyLoss)?parseInt(this.system.attribs.san.dailyLoss):0;totalLoss+=loss,loss>=5&&await this.setCondition(COC7.status.tempoInsane),totalLoss>=this.system.attribs.san.dailyLimit&&await this.setCondition(COC7.status.indefInsane),await this.update({"system.attribs.san.value":value,"system.attribs.san.dailyLoss":totalLoss})}else await this.update({"system.attribs.san.value":value});return value}async setAttribAuto(value,attrib){const updatedKey=`system.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.system.attribs[attrib].auto,attrib)}static dbFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?"1D4":`${Math.floor((sum-45)/80)}D6`}static buildFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?1:Math.floor((sum-45)/80)+1}static hpFromCharacteristics(characteristics,type){const sum=parseInt(characteristics.siz.value??0,10)+parseInt(characteristics.con.value??0,10),divisor=game.settings.get("CoC7","pulpRuleDoubleMaxHealth")&&"character"===type?5:10;return Math.floor(sum/divisor)}static mpFromCharacteristics(characteristics){return Math.floor(characteristics.pow.value/5)}static movFromCharacteristics(characteristics,type,age){let MOV;return MOV=characteristics.dex.value>characteristics.siz.value&&characteristics.str.value>characteristics.siz.value?9:characteristics.dex.value>=characteristics.siz.value||characteristics.str.value>=characteristics.siz.value?8:7,"creature"===type||game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||isNaN(parseInt(age))||(MOV=parseInt(age)>=40?MOV-Math.floor(parseInt(age)/10)+3:MOV),Math.max(0,MOV)}get rawBuild(){return this.system.attribs&&this.system.attribs.build?("auto"===this.system.attribs.build.value&&(this.system.attribs.build.auto=!0),this.system.attribs.build.auto?CoCActor.buildFromCharacteristics(this.system.characteristics):this.system.attribs.build.value):null}get build(){return this.system.attribs.build.value}get rawDb(){return this.system.attribs&&this.system.attribs.db?("auto"===this.system.attribs.db.value&&(this.system.attribs.db.auto=!0),this.system.attribs.db.auto?CoCActor.dbFromCharacteristics(this.system.characteristics):this.system.attribs.db.value):null}get db(){return this.system.attribs.db.value}get rawMov(){if(!this.system.attribs)return null;if(!this.system.attribs.mov)return null;if("auto"===this.system.attribs.mov.value&&(this.system.attribs.mov.auto=!0),this.system.attribs.mov.auto){const MOV=CoCActor.movFromCharacteristics(this.system.characteristics,this.system.type,this.system.infos.age);if(MOV>0)return MOV}return this.system.attribs.mov.value}get mov(){return this.system.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.system.flags||(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),this.update({"system.flags.locked":!1})),this.system.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"system.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.system.flags[flagName],name=`system.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}static toolTipSkillText(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const isCombat=game.CoC7Tooltips.ToolTipHover.classList?.contains("combat"),skillId=game.CoC7Tooltips.ToolTipHover.closest(".item")?.dataset.skillId,actorAppId=game.CoC7Tooltips.ToolTipHover.closest(".window-app")?.dataset?.appid;if(void 0!==skillId&&void 0!==actorAppId&&void 0!==ui.windows[actorAppId]?.actor?.id){const actorId=ui.windows[actorAppId].actor.id,actor=game.actors.get(actorId);if(actor){const skill=actor.items.get(skillId);if(skill){let toolTip=game.i18n.format(isCombat?"CoC7.ToolTipCombat":"CoC7.ToolTipSkill",{skill:skill.name,regular:skill.value,hard:Math.floor(skill.value/2),extreme:Math.floor(skill.value/5)});return game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:actor.name}):""})),toolTip}}}}return!1}async getItemOrAdd(itemIdentifier,type="skill"){if(itemIdentifier.match(/^i\.([^\\.]+)\../)){let item=this.getFirstItemByCoCID(itemIdentifier);if(!item){const newItems=await game.system.api.cocid.fromCoCIDBest({cocid:itemIdentifier,showLoading:!0});if(1===newItems.length&&(await this.createEmbeddedDocuments("Item",newItems),item=this.getFirstItemByCoCID(itemIdentifier),item))if("skill"===item.type)ui.notifications.info(game.i18n.format("CoC7.InfoSkillAddedAtBase",{name:item.name,percent:item.value}));else if("weapon"===item.type){await item.reload();const updates={};if(""===item.system.skill.main.id&&""!==item.system.skill.main.name){const skill=await this.getItemOrAdd(item.system.skill.main.name,"skill");skill.length&&(updates["system.skill.main.id"]=skill[0].id,updates["system.skill.main.name"]=skill[0].name)}if(""===item.system.skill.alternativ.id&&""!==item.system.skill.alternativ.name){const skill=await this.getItemOrAdd(item.system.skill.alternativ.name,"skill");skill.length&&(updates["system.skill.alternativ.id"]=skill[0].id,updates["system.skill.alternativ.name"]=skill[0].name)}Object.keys(updates).length&&await item.update(updates)}}if(item)return[item]}let myItems=this.getSkillsByName(itemIdentifier);if(!myItems.length){const era=game.settings.get("CoC7","worldEra"),newItem=game.items.find((d=>{if(d.type===type&&d.name===itemIdentifier){const eras=newItem.flags?.CoC7?.cocidFlag?.eras;return!(eras&&Object.keys(eras).length>0&&!eras[era])}return!1}));if(newItem&&myItems.push(newItem),0===myItems.length)for(const pack of game.packs)if("Item"===pack.metadata?.type){await pack.getDocuments();const newItem=game.items.find((d=>{if(d.type===type&&d.name===itemIdentifier){const eras=newItem.flags?.CoC7?.cocidFlag?.eras;return!(eras&&Object.keys(eras).length>0&&!eras[era])}return!1}));newItem&&myItems.push(newItem)}if(1===myItems.length&&(await this.createEmbeddedDocuments("Item",myItems),myItems=this.getSkillsByName(itemIdentifier),1===myItems.length))if("skill"===myItems[0].type)ui.notifications.info(game.i18n.format("CoC7.InfoSkillAddedAtBase",{name:myItems[0].name,percent:myItems[0].value}));else if("weapon"===myItems[0].type){await myItems[0].reload();const updates={};if(""===myItems[0].system.skill.main.id&&""!==myItems[0].system.skill.main.name){const skill=await this.getItemOrAdd(myItems[0].system.skill.main.name,"skill");skill.length&&(updates["system.skill.main.id"]=skill[0].id,updates["system.skill.main.name"]=skill[0].name)}if(""===myItems[0].system.skill.alternativ.id&&""!==myItems[0].system.skill.alternativ.name){const skill=await this.getItemOrAdd(myItems[0].system.skill.alternativ.name,"skill");skill.length&&(updates["system.skill.alternativ.id"]=skill[0].id,updates["system.skill.alternativ.name"]=skill[0].name)}Object.keys(updates).length&&await myItems[0].update(updates)}}return myItems}async skillCheck(skillData,fastForward,options={}){const skillIdentifier=skillData.name?skillData.name:skillData;let skill=await this.getItemOrAdd(skillIdentifier,"skill");if(skill.length&&(options.name=skill[0].name),!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+" "+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillIdentifier,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[foundry.utils.duplicate(item)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await SkillValueDialog.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,"false"===options.pushing?check.pushing=!1:check.pushing=!!options.pushing,await check.roll(),check.toMessage(check.pushing)}async weaponCheck(weaponData,fastForward=!1){let weapon;if(void 0!==weaponData.uuid&&(weapon=await fromUuid(weaponData.uuid)),void 0!==weaponData.id&&(weapon=this.items.get(weaponData.id)),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasNoWeaponNamed",{actorName:this.name,weaponName:weaponData.name}));{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}});const actor=void 0!==this.parent?.actor?this.parent.actor:this;if(!0!==create)return;if(await actor.createEmbeddedDocuments("Item",[item.toJSON()]),weapons=actor.getItemsFromName(item.name),!weapons.length)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasTooManyWeaponsNamed",{actorName:this.name,weaponName:weaponData.name}));weapon=weapons[0]}if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){if("optional"===game.settings.get("CoC7","initiativeRule")){const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.system.characteristics.dex.value/100}return hasGun?this.system.characteristics.dex.value+50:this.system.characteristics.dex.value}getActorFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!1})}getWeaponSkills(itemId){let weapon=fromUuidSync(itemId);if(weapon?void 0===weapon.system&&(weapon=game.packs.get(weapon.pack).get(weapon._id)):weapon=this.items.get(itemId),"weapon"!==weapon.type)return null;const skills=[];return weapon.system.skill.main.id&&skills.push(this.items.get(weapon.system.skill.main.id)),weapon.usesAlternativeSkill&&weapon.system.skill.alternativ.id&&skills.push(this.items.get(weapon.system.skill.alternativ.id)),skills}find(name){if(!name)return;const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.name=char.label,char.key?.toLocaleLowerCase()===name.toLowerCase()||char.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase()||char.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase()||char.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.name=attr.label,attr.key?.toLocaleLowerCase()===name.toLowerCase()||attr.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase()||attr.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase()||attr.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenUuid(){return this.sheet.token?this.sheet.token.uuid:null}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.prototypeToken.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}get hasRollableCharacteristics(){for(const[,value]of Object.entries(this.system.characteristics))if(isNaN(Number(value.formula)))return!0;return!1}get hosRollableSkills(){for(const skill of this.skills)if(isNaN(skill.system?.value))return!0;return!1}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`system.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const average=new AverageRoll("("+value.formula+")")[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({minimize:!0,maximize:!0}).total;characteristics[`system.characteristics.${key}.value`]=average}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics())[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let skillsRolled=0,message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){skillsRolled++;const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}const sanityLossEvents=[];let changed=!1;for(const sanityLossEvent of this.system.sanityLossEvents)sanityLossEvent.immunity?sanityLossEvents.push(sanityLossEvent):sanityLossEvent.totalLoss>1?(sanityLossEvent.totalLoss--,sanityLossEvents.push(sanityLossEvent),changed=!0):changed=!0;if(changed&&(skillsRolled&&(message+="<br>"),message+=`<span>${game.i18n.format("CoC7.ReduceSanityLimits")}</span>`,await this.update({"system.sanityLossEvents":sanityLossEvents})),!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(skillsRolled?title:"",message,{speaker}),this.onlyRunOncePerSession=!0}return{failure,success}}async developLuck(fastForward=!1){const currentLuck=this.system.attribs.lck.value;currentLuck||await this.update({"system.attribs.lck.value":0});const pulpRuleDevelopmentRollLuck=game.settings.get("CoC7","pulpRuleDevelopmentRollLuck"),upgradeRoll=(await new Roll("1D100").roll({async:!0})).total,higherThanCurrentLuck=upgradeRoll>currentLuck;let augmentRoll;pulpRuleDevelopmentRollLuck?augmentRoll=higherThanCurrentLuck?"2D10+10":"1D10+5":higherThanCurrentLuck&&(augmentRoll="1D10");const title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(pulpRuleDevelopmentRollLuck||higherThanCurrentLuck){const augmentValue=(await new Roll(augmentRoll).roll({async:!0})).total;await this.update({"system.attribs.lck.value":this.system.attribs.lck.value+augmentValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll,score:currentLuck,augment:augmentValue})}</span>`}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll,score:currentLuck})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}hasConditionStatus(conditionName){const conditionValue=this.system.conditions?.[conditionName]?.value;return"boolean"==typeof conditionValue&&conditionValue}hasConditionValue(conditionName,field){if(this.hasConditionStatus(conditionName)){if(conditionName===COC7.status.tempoInsane&&"durationText"===field){const realTime=this.hasConditionValue(conditionName,"realTime"),duration=this.hasConditionValue(conditionName,"duration");if(void 0!==duration){if(!0===realTime)return duration+" "+game.i18n.localize("CoC7.rounds");if(!1===realTime)return duration+" "+game.i18n.localize("CoC7.hours")}return""}return this.system.conditions?.[conditionName]?.[field]}}async toggleCondition(conditionName){this.hasConditionStatus(conditionName)?await this.unsetCondition(conditionName):await this.setCondition(conditionName)}async setCondition(conditionName,{forceValue=!1,justThis=!1,realTime=null,duration=null}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>CoC7ActiveEffect.filterActiveEffects(effect,conditionName))).map((effect=>effect.id)),custom={};switch(conditionName){case COC7.status.dead:custom.flags={core:{overlay:!0}};break;case COC7.status.tempoInsane:custom.flags={CoC7:{realTime:void 0}},custom.duration={rounds:void 0,seconds:void 0},!0!==realTime&&!1!==realTime||(custom.flags.CoC7.realTime=realTime,custom.flags={CoC7:{realTime}},null!=duration&&(realTime?custom.duration.rounds=duration:custom.duration.seconds=3600*duration))}if(0===effects.length){const effect=CONFIG.statusEffects.filter((effect=>effect.id===conditionName));if(1===effect.length){const source={icon:effect[0].icon,disabled:!1};foundry.utils.isNewerVersion(game.version,"11")?(source.name=game.i18n.localize(effect[0].name),source.statuses=[effect[0].id]):(source.label=game.i18n.localize(effect[0].label),source.flags={core:{statusId:effect[0].id}});const effectData=foundry.utils.mergeObject(source,custom);await super.createEmbeddedDocuments("ActiveEffect",[effectData])}else forceValue=!0}else custom._id=effects[0],await super.updateEmbeddedDocuments("ActiveEffect",[custom]),forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons")){switch(conditionName){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.value`]:!0});break;case COC7.status.tempoInsane:{const fields={};fields[`system.conditions.${conditionName}.value`]=!0,!0!==realTime&&!1!==realTime||(fields[`system.conditions.${conditionName}.realTime`]=realTime,null!=duration&&(fields[`system.conditions.${conditionName}.duration`]=duration)),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.realTime`)||(fields[`system.conditions.${conditionName}.-=realTime`]=null),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.duration`)||(fields[`system.conditions.${conditionName}.-=duration`]=null),await this.update(fields)}}if(!justThis)switch(conditionName){case COC7.status.criticalWounds:if(await this.setCondition(COC7.status.prone),!this.hasConditionStatus(COC7.status.unconscious)&&!this.hasConditionStatus(COC7.status.dead)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}break;case COC7.status.dead:await this.unsetCondition(COC7.status.criticalWounds),await this.unsetCondition(COC7.status.dying),await this.unsetCondition(COC7.status.unconscious)}}}async unsetCondition(conditionName,{forceValue=!1}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>CoC7ActiveEffect.filterActiveEffects(effect,conditionName))).map((effect=>effect.id));effects.length>0?await super.deleteEmbeddedDocuments("ActiveEffect",effects):forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons"))switch(conditionName){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.-=value`]:null}),await this.update({[`system.conditions.${conditionName}.value`]:!1})}}async resetCounter(counter){await this.update({[counter]:0})}async resetDailySanity(){await this.update({"system.attribs.san.dailyLimit":Math.floor(this.system.attribs.san.value/5),"system.attribs.san.dailyLoss":0})}get fightingSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.fighting&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get closeCombatWeapons(){const weaponList=[];for(const value of this.items)if("weapon"===value.type&&!value.system.properties.rngd){const skill=this.items.get(value.system.skill.main.id);value.system.skill.main.value=skill?skill.value:0,weaponList.push(value)}return weaponList.sort(CoC7Utilities.sortByNameKey),weaponList}get firearmSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&(value.system.properties.firearm||value.system.properties.ranged||"i.skill.fighting-throw"===value.flags.CoC7?.cocidFlag?.id)&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skill=this.getFirstItemByCoCID("i.skill.dodge");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge"));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skill=this.getFirstItemByCoCID("i.skill.credit-rating");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skill=this.getFirstItemByCoCID("i.skill.cthulhu-mythos");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.system.value)}return 0}get mythosHardened(){return this.getFlag("CoC7","mythosHardened")||!1}get useMythosHardened(){return this.mythosHardened&&game.settings.get("CoC7","allowMythosHardened")}async setMythosHardened(){await this.setFlag("CoC7","mythosHardened",!0)}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.system.value)}return 0}static monetaryFormat(format,symbol,value){switch(format){case COC7.monetaryFormatKeys.lsd:return Math.floor(value/240)+"/"+Math.floor(value/12)%20+"/"+value%12;case COC7.monetaryFormatKeys.roman:return Math.floor(value/400)+"/"+Math.floor(value/16)%25+"/"+Math.floor(value/8)%2+"/"+Math.floor(value/4)%2+"/"+value%4;case COC7.monetaryFormatKeys.decimalLeft:return symbol+Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"");case COC7.monetaryFormatKeys.decimalRight:return Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"")+" "+symbol;case COC7.monetaryFormatKeys.integerLeft:return symbol+Number(value).toLocaleString();case COC7.monetaryFormatKeys.integerRight:return Number(value).toLocaleString()+" "+symbol}return"0"}static monetaryValue(format,values,CR,type,value){CR=CR||0;const row=values.find((r=>("object"==typeof r.min||r.min<=CR)&&("object"==typeof r.max||r.max>=CR)));if(void 0!==row&&void 0!==row[type]&&void 0!==row[value])switch(format){case COC7.monetaryFormatKeys.lsd:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 240*CR*row[value];case COC7.monetaryTypeKeys.value:return 240*row[value];case COC7.monetaryTypeKeys.s:return 12*row[value];case COC7.monetaryTypeKeys.d:return 1*row[value]}break;case COC7.monetaryFormatKeys.roman:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 400*CR*row[value];case COC7.monetaryTypeKeys.value:return 400*row[value];case COC7.monetaryTypeKeys.denarii:return 16*row[value];case COC7.monetaryTypeKeys.quinarii:return 8*row[value];case COC7.monetaryTypeKeys.sestertii:return 4*row[value];case COC7.monetaryTypeKeys.asses:return 1*row[value]}break;default:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return CR*row[value];case COC7.monetaryTypeKeys.value:return 1*row[value]}}return 0}get spendingLevel(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"spendingType","spendingValue")}get cash(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"cashType","cashValue")}get assets(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"assetsType","assetsValue")}get skills(){const skillList=[];for(const value of this.items)"skill"===value.type&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHp(value){value<0&&(value=0),value>this.system.attribs.hp.max&&(value=this.system.attribs.hp.max);const healthBefore=this.hp;let damageTaken;return isNaN(healthBefore)||value>=healthBefore?await this._setHp(value):(damageTaken=healthBefore-value,await this.dealDamage(damageTaken,{ignoreArmor:!0})),value}async dealDamage(amount,options={}){const armorData=options.armor?options.armor:this.system.attribs.armor,grossDamage=parseInt(amount);let armorValue=0;options.ignoreArmor||null===armorData||(CoC7Utilities.isFormula(armorData)?armorValue=(await new Roll(armorData).roll({async:!0})).total:isNaN(Number(armorData))?isNaN(Number(armorData?.value))?ui.notifications.warn(game.i18n.format("CoC7.ErrorUnableToParseArmorFormula",{value:armorData})):armorValue=Number(armorData.value):armorValue=Number(armorData));const netDamage=grossDamage-armorValue;if(netDamage<=0)return 0;if(await this._setHp(this.hp-netDamage),netDamage>=this.system.attribs.hp.max)await this.setCondition(COC7.status.dead);else if(game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")){if(0===this.hp)netDamage>=Math.ceil(this.system.attribs.hp.max/2)?this.setCondition(COC7.status.dying):this.setCondition(COC7.status.unconscious);else if(netDamage>=Math.ceil(this.system.attribs.hp.max/2)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}else{let hasMajorWound=!1;netDamage>=Math.ceil(this.system.attribs.hp.max/2)?(await this.setCondition(COC7.status.criticalWounds),hasMajorWound=!0):hasMajorWound=this.hasConditionStatus(COC7.status.criticalWounds),0===this.hp&&(await this.setCondition(COC7.status.unconscious),hasMajorWound&&this.setCondition(COC7.status.dying))}return netDamage}get majorWound(){return this.hasConditionStatus(COC7.status.criticalWounds)}get dying(){return this.hasConditionStatus(COC7.status.dying)}get unconscious(){return this.hasConditionStatus(COC7.status.unconscious)}get dead(){return this.hasConditionStatus(COC7.status.dead)}get prone(){return this.hasConditionStatus(COC7.status.prone)}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static get type(){return{characteristic:"characteristic",attribute:"attribute",skill:"item",item:"item",value:"value"}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.system.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){return 0===this._rawValue?"0":this._rawValue?this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString():void 0}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){if(this.rawValue){if(this.difficulty){if(this.difficulty>=CoC7Check.difficultyLevel.extreme)return this.extremeThreshold<50?96:100;if(this.difficulty>=CoC7Check.difficultyLevel.hard)return this.hardThreshold<50?96:100}return this.rawValue<50?96:100}return null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get shortName(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}if(oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),oldCheck.messageId){const o=await game.messages.get(oldCheck.messageId);void 0!==o.rolls?.[0]?.options?.coc7Result&&(o.rolls[0].options.coc7Result.pushing=!0,await o.update({rolls:o.rolls}))}publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll&&0!==this._rawValue)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.system.skill&&(this.item.system.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.system.skill.main.id):this.item.system.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.system.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null,options={}){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform(options)}static createFromActorRollData(rollData){const roll={};switch(rollData.difficulty&&(roll.difficulty=rollData.difficulty),rollData.diceModifier&&(roll.diceModifier=rollData.diceModifier),!0===rollData.denyPush&&(roll.denyPush=!0),rollData.flatDiceModifier&&(roll.flatDiceModifier=rollData.flatDiceModifier),rollData.flatThresholdModifier&&(roll.flatThresholdModifier=rollData.flatThresholdModifier),rollData.actor?.actorKey?roll.actorKey=rollData.actor.actorKey:rollData.actor?.name&&(roll.actorName=rollData.actor.name),rollData.type){case CoC7Check.type.characteristic:roll.characteristic=rollData.value?.key;break;case CoC7Check.type.attribute:roll.attribute=rollData.value?.key;break;case CoC7Check.type.item:roll.actorKey=rollData.value.actor.actorKey,"skill"===rollData.value?.type?roll.skill=rollData.value.id:roll.item=rollData.value.id;break;case CoC7Check.type.skill:roll.actorKey=rollData.value.actor.actorKey,roll.skill=rollData.value.id;break;case CoC7Check.type.value:roll.displayName=rollData.value.name,roll.rawValue=rollData.value.threshold}return CoC7Check.create(roll)}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,item=null,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null,denyPush}={}){const check=new CoC7Check;return check.difficulty=difficulty,!0===denyPush&&(check.denyPush=!0),diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute?check.attribute=attribute:item&&(check.item=item)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}get rolledSuccessLevel(){return this.successLevel}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||game.modules.get("dice-so-nice")?.active||AudioHelper.play({src:CONFIG.sounds.dice},!0),options.forceDSN&&await CoC7Dice.showRollDice3d(this.dice.roll),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total,firstValue=0===selected?10:Math.floor(selected/10);for(const d of this.dice.roll.dice)d instanceof CONFIG.Dice.terms.t&&(d.results[0].result===firstValue?(firstValue=-1,d.results[0].active=!0):d.results[0].active=!1);this.dice.roll._total=this.dice.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async increaseLuckSpend(luckAmount){const spendingAmount=parseInt(luckAmount,10);this.totalLuckSpent=parseInt(this.totalLuckSpent??0,10)+spendingAmount;const modifiedResult=Math.max(1,this.modifiedResult-this.totalLuckSpent);1===modifiedResult?this.successLevel=CoC7Check.successLevel.critical:modifiedResult<=this.extremeThreshold?this.successLevel=CoC7Check.successLevel.extreme:modifiedResult<=this.hardThreshold?this.successLevel=CoC7Check.successLevel.hard:modifiedResult<=this.rawValue?this.successLevel=CoC7Check.successLevel.regular:this.fumbleThreshold<=modifiedResult?this.successLevel=CoC7Check.successLevel.fumble:modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),this.difficulty<=this.successLevel&&(this.isSuccess=!0,this.isFailure=!1),this.luckSpent=!0;let remove=0;for(let index=0,maxIndex=this.increaseSuccess.length;index<maxIndex;index++)this.increaseSuccess[index].luckToSpend=this.increaseSuccess[index].luckToSpend-spendingAmount,this.increaseSuccess[index].luckToSpend<1&&remove++;for(let index=0;index<remove;index++)this.increaseSuccess.shift();this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.system.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.system.malfunction&&Number(this.modifiedResult)>=Number(this.item.system.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),void 0===this.canBePushed&&(this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1)),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.dice)this.dice.roll.options.coc7Result={successLevel:Object.keys(CoC7Check.successLevel).find((key=>CoC7Check.successLevel[key]===this.successLevel))??"unknown",difficultySet:!this.isUnknown,passed:this.passed,pushing:!1,pushed:this.pushing,luckSpent:this.totalLuckSpent??0};else if("string"==typeof this.messageId){const o=await game.messages.get(this.messageId);void 0!==o.rolls?.[0]?.options?.coc7Result&&(o.rolls[0].options.coc7Result.luckSpent=this.totalLuckSpent??0,await o.update({rolls:o.rolls}))}if(this.canAwardExperience=this.skill&&!this.skill.system.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.system.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;return this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){if(luckAmount){this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty;for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;this.luckSpent=!0,this.isSuccess=!0,this.isFailure=!1,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()}else this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update)}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.system&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.system.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`)})+` (${this.actor.system.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.system.characteristics[this.characteristic].label)})+` (${this.actor.system.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=foundry.utils.mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=foundry.utils.mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?(this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0}},void 0!==chatData.speaker&&(chatData.flags.CoC7.originalSpeaker=foundry.utils.duplicate(chatData.speaker)),game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(foundry.utils.isNewerVersion(game.version,"11")?chatData.rolls=[this.dice.roll]:chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const chatData={flavor:this.flavor};makePublic&&(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData)),chatData.blind&&(this.isBlind=!0);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}chatData.content=newContent,CONST.CHAT_MESSAGE_TYPES.ROLL===message.type&&(message.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),forceRoll&&this.dice?.roll&&(game.user.isGM||!this.isBlind)&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);if(thresholdStr&&thresholdStr.length){threshold=Number(thresholdStr[0]);for(const match of thresholdStr)escaped=escaped.replace(`(${match})`,"")}const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length){difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]);for(const match of difficultyStr)escaped=escaped.replace(`[${match}]`,"")}if(escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"app":return{short:game.i18n.localize("CHARAC.APP"),label:game.i18n.localize("CHARAC.Appearance")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};case"edu":return{short:game.i18n.localize("CHARAC.EDU"),label:game.i18n.localize("CHARAC.Education")};case"luck":return{short:game.i18n.localize("CoC7.Luck"),label:game.i18n.localize("CoC7.Luck")};default:{const characteristicList=foundry.utils.isNewerVersion(game.version,"12")?game.system.template.Actor.character.characteristics:game.system.template.Actor.templates.characteristics.characteristics;for(const[,value]of Object.entries(characteristicList))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold=void 0,event=null){await CoC7Utilities.rollDice(event,{threshold})}static createMacro(bar,data,slot){if("Item"!==data.type)return;const item=fromUuidSync(data.uuid,bar);if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));let command="";if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`}if(""!==command){const macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));return macro?(game.user.assignHotbarMacro(macro,slot),!1):(Macro.create(foundry.utils.duplicate({name:item.name,type:"script",img:item.img,command})).then((macro=>{game.user.assignHotbarMacro(macro,slot)})),!1)}return!0}static async toggleDevPhase(toggle){await game.settings.set("CoC7","developmentEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(toggle){await game.settings.set("CoC7","charCreationEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets(),Hooks.call("toggleCharCreation",toggle)}static async getTarget(){const users=game.users.filter((user=>user.active)),actors=game.actors;let checkOptions=`<input type="checkbox" name="COCCheckAllPC" id="COCCheckAllPC">\n\n    <label for="COCCheckAllPC">${game.i18n.localize("CoC7.allActors")}</label>`;const playerTokenIds=users.map((u=>u.character?.id)).filter((id=>void 0!==id)),selectedPlayerIds=canvas.tokens.controlled.map((token=>token.actor.id));actors.forEach((actor=>{const checked=(selectedPlayerIds.includes(actor.id)||playerTokenIds.includes(actor.id))&&"checked";checkOptions+=`\n     <br>\n     <input type="checkbox" name="${actor.id}" id="${actor.id}" value="${actor.name}" ${checked}>\n\n     <label for="${actor.id}">${actor.name}</label>\n       `})),new Dialog({title:`${game.i18n.localize("CoC7.dreaming")}`,content:`${game.i18n.localize("CoC7.restTargets")}: ${checkOptions} <br>`,buttons:{whisper:{label:`${game.i18n.localize("CoC7.startRest")}`,callback:async html=>{const targets=[];let all=!1;const users=html.find('[type="checkbox"]');for(const user of users)"COCCheckAllPC"===user.name&&user.checked&&(all=!0),(user.checked||all)&&targets.push(user.id);await CoC7Utilities.startRest(targets)}}}}).render(!0)}static async startRest(targets){if(!targets.length)return;const actors=game.actors.filter((actor=>targets.includes(actor.id)));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;for(const actor of actors)if(["character","npc","creature"].includes(actor.type)){let quickHealer=!1;for(const item of actor.items)"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0);const isCriticalWounds=!game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")&&actor.hasConditionStatus(COC7.status.criticalWounds),dailySanityLoss=actor.system.attribs.san.dailyLoss,hpValue=actor.system.attribs.hp.value,hpMax=actor.system.attribs.hp.max,mpValue=actor.system.attribs.mp.value,mpMax=actor.system.attribs.mp.max,pow=actor.system.characteristics.pow.value;if(chatContent+=`<br><b>${actor.name}. </b>`,hpValue<hpMax)if(!0===isCriticalWounds)chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`;else{let healAmount=1;game.settings.get("CoC7","pulpRuleFasterRecovery")&&(healAmount=2),!0===quickHealer&&healAmount++,healAmount=Math.min(healAmount,hpMax-hpValue),chatContent+=1===healAmount?`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`:`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:healAmount})}. </b>`,actor.update({"system.attribs.hp.value":actor.system.attribs.hp.value+healAmount})}dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"system.attribs.san.dailyLoss":0,"system.attribs.san.dailyLimit":Math.floor(actor.system.attribs.san.value/5)}));const hours=7;if(hours>0&&mpValue<mpMax){let magicAmount=hours*Math.ceil(pow/100);magicAmount=Math.min(magicAmount,mpMax-mpValue),chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: ${magicAmount}.</b>`,actor.update({"system.attribs.mp.value":actor.system.attribs.mp.value+magicAmount})}}const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(toggle){await game.settings.set("CoC7","xpEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"))}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)actors.push(token.actor.tokenKey);else game.user.character&&actors.push(game.user.character.tokenKey);for(const tk of actors){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()}if(!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){if(game.user.isGM)for(const a of game.actors.contents)"character"===a?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"system.flags.locked":!0}),a.render(!1));else for(const a of game.actors.contents)a.isOwner&&(a.update({"system.flags.locked":!0}),a.render(!1))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=await fromUuid(dataList.uuid);return folder?folder.contents:[]}if(dataList.type===entityType){const item=await fromUuid(dataList.uuid);return item?[item]:[]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))}}static quoteRegExp(string){const len=string.length;let qString="";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString}static setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}static getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}static SfromUuid(uuid){let doc,parts=uuid.split(".");if("Compendium"===parts[0])return null;{const[docName,docId]=parts.slice(0,2);parts=parts.slice(2);doc=CONFIG[docName].collection.instance.get(docId)}for(;doc&&parts.length>1;){const[embeddedName,embeddedId]=parts.slice(0,2);doc=doc.getEmbeddedDocument(embeddedName,embeddedId),parts=parts.slice(2)}return doc||null}static isDocumentUuidPack(uuid){return!!uuid.includes("Compendium")}static isDocumentUuid(uuid){const identifiers=["Actor","Scene","Token","Item","Compendium"];for(let i=0;i<identifiers.length;i++)if(uuid.includes(identifiers[i]))return!0;return!1}static getActorDocumentFromDropData(dropData){let docUuid,actor;return docUuid=dropData.tokenUuid?dropData.tokenUuid:void 0!==dropData.uuid?dropData.uuid:dropData.sceneId&&dropData.tokenId?`Scene.${dropData.sceneId}.Token.${dropData.tokenId}`:dropData.actorId||dropData.actorKey||dropData.id,"Token"===dropData.type?docUuid=dropData.uuid:docUuid&&(actor=CoC7Utilities.getActorFromKey(docUuid),actor||"Item"!==dropData.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid),docUuid}static getDocumentFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=foundry.utils.duplicate(scene)),token}return game.actors.get(key)||null}static getActorFromKey(key){const doc=CoC7Utilities.getDocumentFromKey(key);return doc?doc.actor?doc.actor:"CoCActor"===doc.constructor?.name?doc:null:null}static async createImportCharactersFolderIfNotExists(){let folderName=game.i18n.localize("CoC7.ImportedCharactersFolder");"CoC7.ImportedCharactersFolder"===folderName&&(folderName="Imported characters");let importedCharactersFolder=game.folders.find((entry=>entry.name===folderName&&"Actor"===entry.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:folderName,type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("CoC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}static async guessItem(type,name,{combat=null,source="",fallbackAny=!1}={}){let existing=null;name=name.toLocaleLowerCase();for(let o=0,oM=source.length;o<oM;o++)switch(source.substring(o,o+1)){case"i":if(existing=game.items.find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing;break;case"w":case"m":case"s":for(const pack of game.packs)if("Item"===pack.metadata.type&&("w"===source[o]&&"world"===pack.metadata.package||"S"===source[o]&&"CoC7"===pack.metadata.package||"s"===source[o]&&!["world","CoC7"].includes(pack.metadata.package))){if(existing=(await pack.getDocuments()).find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing}}if(fallbackAny&&"skill"===type){const match=name.match(/^(.+ \()(?!any).+(\))$/);if(match)return await CoC7Utilities.guessItem(type,match[1]+"any"+match[2],{combat,source})}}static toKebabCase(s){if(!s)return"";const match=s.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);return match?match.join("-").toLowerCase():""}static sortByNameKey(a,b){return a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase().localeCompare(b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase())}static getAnIdForGm(){const keepers=game.users.filter((u=>u.active&&u.isGM&&u.id!==game.user.id));switch(keepers.length){case 0:return ui.notifications.error("CoC7.ErrorMissingKeeperUser",{localize:!0}),!1;case 1:return keepers[0].id}return keepers[Math.floor(Math.random()*keepers.length)].id}static halfDB(db){db=(""===(db??"").toString().trim()?0:db).toString().trim();const roll=new Roll(db);for(const term of roll.terms)foundry.utils.isNewerVersion(game.version,"12")&&term instanceof foundry.dice.terms.Die?term._faces=Math.floor(term._faces/2):term instanceof Die?term.faces=Math.floor(term.faces/2):term instanceof NumericTerm&&(term.number=term.number<0?Math.ceil(term.number/2):Math.floor(term.number/2));let formula=roll.formula.toString().trim();return formula.startsWith("-")||(formula="+"+formula),formula}}class CoCIDEditor extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-editor.hbs",width:900,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0})}async getData(){const sheetData=super.getData();sheetData.supportedLanguages=CONFIG.supportedLanguages,this.options.editable=this.object.sheet.isEditable,sheetData.guessCode=game.system.api.cocid.guessId(this.object),sheetData.idPrefix=game.system.api.cocid.getPrefix(this.object),sheetData.cocidFlag=this.object.flags?.CoC7?.cocidFlag,sheetData.id=sheetData.cocidFlag?.id||"",sheetData.lang=sheetData.cocidFlag?.lang||game.i18n.lang,sheetData.priority=sheetData.cocidFlag?.priority||0,sheetData.eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData.eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(sheetData.cocidFlag?.eras??{})[key]});sheetData.eras.sort(CoC7Utilities.sortByNameKey);const CoCIDKeys=Object.assign(foundry.utils.flattenObject(game.i18n._fallback.CoC7?.CoCIDFlag?.keys??{}),foundry.utils.flattenObject(game.i18n.translations.CoC7?.CoCIDFlag?.keys??{})),prefix=new RegExp("^"+CoC7Utilities.quoteRegExp(sheetData.idPrefix));sheetData.existingKeys=Object.keys(CoCIDKeys).reduce(((obj,k)=>(k.match(prefix)&&obj.push({k,name:CoCIDKeys[k]}),obj)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.isSystemID=void 0!==CoCIDKeys[sheetData.id];const match=sheetData.id.match(/^([^\\.]+)\.([^\\.]*)\.(.+)/);if(sheetData._existing=match&&void 0!==match[3]?match[3]:"",sheetData.id&&sheetData.lang){const worldDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"world"}),usedEras={},uniqueWorldPriority={};sheetData.worldDocumentInfo=await Promise.all(worldDocuments.map((async d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueWorldPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";const folders=[];let e=d?.folder;for(;e?.name;)folders.unshift(e?.name),e=e.folder;return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:await TextEditor.enrichHTML(d.link,{async:!0}),folder:folders.map((n=>n.indexOf(" ")>-1?'"'+n+'"':n)).join(" &gt; ")}}))),Object.entries(uniqueWorldPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateWorldPriority=!0),sheetData.worldDuplicates=worldDocuments.length??0;const compendiumDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"compendiums"}),uniqueCompendiumPriority={};sheetData.compendiumDocumentInfo=await Promise.all(compendiumDocuments.map((async d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueCompendiumPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";const folders=[];let e=d?.folder;for(;e?.name;)folders.unshift(e?.name),e=e.folder;for(folders.unshift(d.compendium.metadata.label),e=d?.compendium.folder;e?.name;)folders.unshift(e?.name),e=e.folder;return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:await TextEditor.enrichHTML(d.link,{async:!0}),folder:folders.map((n=>n.indexOf(" ")>-1?'"'+n+'"':n)).join(" &gt; ")}}))),Object.entries(uniqueCompendiumPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateCompendiumPriority=!0),sheetData.compendiumDuplicates=compendiumDocuments.length??0,sheetData.usedEras=[];for(const[key,value]of Object.entries(usedEras))sheetData.usedEras.push({id:key,name:game.i18n.localize(value)});sheetData.usedEras.sort(CoC7Utilities.sortByNameKey)}else sheetData.compendiumDocumentInfo=[],sheetData.worldDocumentInfo=[],sheetData.worldDuplicates=0,sheetData.compendiumDuplicates=0,sheetData.warnDuplicateWorldPriority=!1,sheetData.warnDuplicateCompendiumPriority=!1;return sheetData}activateListeners(html){super.activateListeners(html),html.find("a.copy-to-clipboard").click((function(e){CoC7Utilities.copyToClipboard($(this).siblings("input").val())})),this.object.sheet.isEditable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find("input[name=_existing").change((function(e){const obj=$(this),prefix=obj.data("prefix");let value=obj.val();""!==value&&(value=prefix+CoC7Utilities.toKebabCase(value)),html.find("input[name=id]").val(value).trigger("change")})),html.find("select[name=known]").change((function(e){const obj=$(this);html.find("input[name=id]").val(obj.val())})),html.find("a[data-guess]").click((async function(e){e.preventDefault();const guess=$(this).data("guess");html.find("input[name=id]").val(guess).trigger("change")})))}static async eraToggle(document,propertyId){if("setup"===document.type){const update={[propertyId]:!0};if(void 0!==document.flags?.CoC7?.cocidFlag?.eras)for(const[key]of Object.entries(document.flags.CoC7.cocidFlag.eras))key!==propertyId&&(update["-="+key]=null);await document.update({"flags.CoC7.cocidFlag.eras":update})}else void 0===document.flags?.CoC7?.cocidFlag?.eras?.[propertyId]?void 0===document.flags?.CoC7?.cocidFlag?.eras?await document.update({"flags.CoC7.cocidFlag.eras":{[propertyId]:!0}}):await document.update({[`flags.CoC7.cocidFlag.eras.${propertyId}`]:!0}):await document.update({[`flags.CoC7.cocidFlag.eras.-=${propertyId}`]:null})}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await CoCIDEditor.eraToggle(this.object,propertyId);const options=foundry.utils.duplicate(this.options);await this.close(),await this.render(!0,options)}async _updateObject(event,formData){const id=formData.id||"";await this.object.update({"flags.CoC7.cocidFlag.id":id,"flags.CoC7.cocidFlag.lang":formData.lang||game.i18n.lang,"flags.CoC7.cocidFlag.priority":formData.priority||0,"flags.CoC7.cocidFlag.eras":this.object.flags?.CoC7?.cocidFlag?.eras??{}});const html=$(this.object.sheet.element).find("header.window-header a.header-button.edit-coc-id-warning,header.window-header a.header-button.edit-coc-id-exisiting");html.length&&html.css({color:id?"var(--color-text-light-highlight)":"red"}),this.render()}}function addCoCIDSheetHeaderButton(headerButtons,sheet){if(game.user.isGM){const sheetCoCID=sheet.object.flags?.CoC7?.cocidFlag,CoCIDEditorButton={class:void 0===sheetCoCID||void 0===sheetCoCID.id||""===sheetCoCID.id?"edit-coc-id-warning":"edit-coc-id-exisiting",label:"CoC7.CoCIDFlag.id",icon:"fas fa-fingerprint",onclick:()=>{new CoCIDEditor(sheet.object,{}).render(!0,{focus:!0})}},numberOfButtons=headerButtons.length;headerButtons.splice(numberOfButtons-1,0,CoCIDEditorButton)}}class CoC7ContextMenu{bind(menu,html,callback){this._callback=callback,this._html=html,this._menu=menu;try{const menuTrigger=html.find(`[data-context-menu=${menu.id}]`);if(0===menuTrigger.length)return;menuTrigger.contextmenu(this._onContextMenu.bind(this));const menuElement=CoC7ContextMenu.CreateMenu(menu);menuElement.on("click",".menu-action",this._onMenuAction.bind(this)),0!==this.menu.length?this.menu.replaceWith(menuElement):this.menuContainer.append(menuElement)}catch(error){console.error(error)}}get menuContainer(){let menuContainer=this._html.find(".menu-container");return 0===menuContainer.length&&(this._html.append('<div class="menu-container"></div>'),menuContainer=this._html.find(".menu-container")),menuContainer}get menu(){return this.menuContainer.find(`.context-menu-wrapper.${this._menu.id}`)}_onMenuAction(event){return this._callback(event,this.target)}static closeAll(){$("body").find(".menu-container").find(".context-menu-wrapper").each((function(i,m){m.style.visibility="hidden"}))}_onContextMenu(event){event.preventDefault(!0),CoC7ContextMenu.closeAll();const target=event?.currentTarget;if(this.target=target,!target)return;const menuName=target.dataset?.contextMenu;if(menuName===this._menu.id){const wrapper=this.menu;if(wrapper.length>0){const subMenu=wrapper.find(".sub-menu");let left=event.clientX,top=event.clientY;const menuHeight=wrapper.outerHeight(),menuWidth=wrapper.outerWidth();window.innerHeight<menuHeight+top&&(top-=menuHeight),window.innerWidth<menuWidth+left&&(left=window.innerWidth-menuWidth),subMenu.length>0&&(window.innerWidth<menuWidth+left+subMenu.outerWidth()?subMenu.css({right:menuWidth-5+"px",left:""}):subMenu.css({left:menuWidth-5+"px",right:""})),wrapper.css({left:`${left}px`,top:`${top}px`,visibility:"visible"})}}}static canSee(visibility){switch(visibility.toLowerCase()){case"gm":return game.user.isGM;case"trusted":return game.user.isTrusted;default:return!0}}static CreateMenu(menu){const classes="string"==typeof menu.classes?[menu.classes]:menu.classes;classes.push("context-menu-wrapper");const wrapper=$("<div></div>");if(wrapper.addClass(menu.id),classes.forEach((c=>wrapper.addClass(c))),menu.section)menu.section.forEach((s=>{const section=CoC7ContextMenu.CreateSection(s,{multi:!0});section&&wrapper.append(section)}));else{const section=CoC7ContextMenu.CreateSection(menu);section&&wrapper.append(section)}return wrapper}static CreateSection(s,{multi=!1,subMenu=!1}={}){if(!s.items)return null;if(s.visibility&&!CoC7ContextMenu.canSee(s.visibility))return null;const classes=s.classes?"string"==typeof s.classes?[s.classes]:s.classes:[];multi&&classes.push("menu-section"),subMenu&&classes.push("sub-menu");const section=$("<ul></ul>");return classes.forEach((c=>section.addClass(c))),s.items.forEach((i=>{const li=$("<li></li>");if(li.addClass("menu-item"),i.action&&(li.addClass("menu-action"),li.attr("data-action",i.action)),"string"==typeof i.label?li.append(`<span>${i.label}</span>`):(i.label.icon&&li.append(`<i class="${i.label.icon}"></i>`),i.label.text&&li.append(`<span>${i.label.text}</span>`)),i.subMenu){li.addClass("sub-menu-button"),li.append('<i class="fas fa-caret-right"></i>');const sub=CoC7ContextMenu.CreateSection(i.subMenu,{subMenu:!0});sub&&li.append(sub)}section.append(li)})),section}}class CoC7ActorSheet extends ActorSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu"),sheetData.canDragToken=!!this.token&&game.user.isGM,sheetData.linkedActor=!0===this.actor.prototypeToken?.actorLink,sheetData.isToken=this.actor.isToken,sheetData.itemsByType={},sheetData.skills={},sheetData.combatSkills={},sheetData.weapons={},sheetData.rangeWpn=[],sheetData.meleeWpn=[],sheetData.actorFlags={},sheetData.effects="character"===this.actor.type?CoC7ActiveEffect.prepareActiveEffectCategories(this.actor.effects):CoC7ActiveEffect.prepareNPCActiveEffectCategories(this.actor.effects),sheetData.permissionLimited=!game.user.isGM&&(this.actor.ownership[game.user.id]??this.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED,sheetData.isKeeper=game.user.isGM,sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(sheetData.data.system.flags.locked=!1),"vehicle"!==this.actor.type&&(sheetData.data.system.characteristics||(sheetData.data.system.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,short:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,short:"CHARAC.EDU",label:"CHARAC.Education",formula:null}}),sheetData.data.system.attribs||(sheetData.data.system.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),sheetData.data.system.biography||(sheetData.data.system.biography={personalDescription:{type:"string",value:""}}),sheetData.data.system.infos||(sheetData.data.system.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),sheetData.data.system.flags||(sheetData.data.system.flags={locked:!0,manualCredit:!1}),sheetData.data.system.credit||(sheetData.data.system.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),sheetData.data.system.development||(sheetData.data.system.development={personal:null,occupation:null,archetype:null}),sheetData.data.system.biography||(sheetData.data.system.biography=[]),sheetData.pulpRuleArchetype=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.pulpRuleOrganization=game.settings.get("CoC7","pulpRuleOrganization")),sheetData.isDead=this.actor.dead,sheetData.isDying=this.actor.dying,sheetData.items){for(const item of sheetData.items){if("skill"===item.type)if(item.system.properties.special&&(item.system.properties.fighting&&(item.system.specialization=game.i18n.localize("CoC7.FightingSpecializationName")),item.system.properties.firearm&&(item.system.specialization=game.i18n.localize("CoC7.FirearmSpecializationName")),item.system.properties.ranged&&(item.system.specialization=game.i18n.localize("CoC7.RangedSpecializationName"))),"character"!==this.actor.type){if(isNaN(Number(item.system.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));try{value=(await new Roll(item.system.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(game.i18n.format("CoC7.ErrorUnableToParseSkillFormula",{value:item.system.value,name:item.name})),value=null}if(value){item.system.value=value;const itemToUpdate=this.actor.items.get(item._id);console.info(`[COC7] (Actor:${this.name}) Evaluating skill ${item.name}:${item.system.value} to ${value}`),await itemToUpdate.update({"system.value":value})}}const skill=this.actor.items.get(item._id),{base,rawValue,value}=skill.system;item.system.rawValue=rawValue||value||base,item.system.value=value||base}else{const skill=this.actor.items.get(item._id);if(item.system.base=await skill.asyncBase(),item.system.value){let updatedExp=(item.system.adjustments?.experience?parseInt(item.system.adjustments.experience):0)+parseInt(item.system.value)-skill.value;updatedExp<=0&&(updatedExp=null),console.info(`[COC7] Updating skill ${skill.name} experience. Experience missing: ${updatedExp}`),await this.actor.updateEmbeddedDocuments("Item",[{_id:item._id,"system.adjustments.experience":updatedExp,"system.value":null}]),item.system.adjustments||(item.system.adjustments={}),item.system.adjustments.experience=updatedExp,item.system.rawValue=skill.rawValue,item.system.value=skill.value}else item.system.value=skill.value,item.system.rawValue=skill.rawValue}let list=sheetData.itemsByType[item.type];list||(list=[],sheetData.itemsByType[item.type]=list),list.push(item)}for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey);sheetData.skills=sheetData.items.filter((item=>"skill"===item.type)).sort(CoC7Utilities.sortByNameKey),sheetData.meleeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.fighting)),sheetData.rangeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&(!0===skill.system.properties.firearm||!0===skill.system.properties.ranged)));const cbtSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat));if(cbtSkills)for(const skill of cbtSkills)sheetData.combatSkills[skill._id]=skill;const weapons=sheetData.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.system.properties.auto||!0===weapon.system.properties.brst,weapon.system.ammo||(weapon.system.ammo=0),weapon.skillSet=!0,""===weapon.system.skill.main.id)weapon.skillSet=!1;else{if(sheetData.combatSkills[weapon.system.skill.main.id]){const skill=this.actor.items.get(weapon.system.skill.main.id);weapon.system.skill.main.name=skill.system.skillName,weapon.system.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.system.skill.alternativ.id&&sheetData.combatSkills[weapon.system.skill.alternativ.id]){const skill=this.actor.items.get(weapon.system.skill.alternativ.id);weapon.system.skill.alternativ.name=skill.system.skillName,weapon.system.skill.alternativ.value=skill.value}}weapon.system._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.system.properties[key],weapon.system._properties.push(property)}sheetData.weapons[weapon._id]=weapon,weapon.system.properties.rngd?sheetData.rangeWpn.push(weapon):sheetData.meleeWpn.push(weapon)}const token=this.token;if(sheetData.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,sheetData.hasEmptyValueWithFormula=!1,sheetData.data.system.characteristics)for(const characteristic of Object.values(sheetData.data.system.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),sheetData.hasEmptyValueWithFormula=sheetData.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle","container"].includes(this.actor.type))sheetData.data.system.attribs.hp.auto=!1,sheetData.data.system.attribs.mp.auto=!1,sheetData.data.system.attribs.san.auto=!1,sheetData.data.system.attribs.mov.auto=!1,sheetData.data.system.attribs.db.auto=!1,sheetData.data.system.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();sheetData.data.system=foundry.utils.mergeObject(sheetData.data.system,auto)}return sheetData.data.system.attribs.mp.value<0&&(sheetData.data.system.attribs.mp.value=null),sheetData.data.system.attribs.san.value<0&&(sheetData.data.system.attribs.san.value=null),["vehicle"].includes(this.actor.type)||sheetData.data.system.biography instanceof Array&&sheetData.data.system.biography.length&&(sheetData.data.system.biography[0].isFirst=!0,sheetData.data.system.biography[sheetData.data.system.biography.length-1].isLast=!0),sheetData.showInventoryItems=!1,sheetData.showInventoryBooks=!1,sheetData.showInventorySpells=!1,sheetData.showInventoryTalents=!1,sheetData.showInventoryStatuses=!1,sheetData.showInventoryWeapons=!1,sheetData.showInventoryArmor=!1,sheetData.hasConditions=this.actor.effects.size>0||void 0!==this.actor.system.conditions&&Object.keys(this.actor.system.conditions).filter((condition=>this.actor.system.conditions[condition].value)).length>0,sheetData}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),html.find(".section-header").click(this._onSectionHeader.bind(this)),html.find(".items-header").click(this._onItemHeader.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),this.actor.isOwner&&!this.actor.compendium?.locked&&(html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this))),this.actor.isOwner&&void 0===this.actor.compendium){if(game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const rollMenu={id:"skill-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"gm",items:[{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}},{action:"request-roll",label:"Request roll"}]}]},sanMenu={id:"san-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"encounter",label:"Encounter"},{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"trusted",items:[{action:"request-roll",label:"Request roll"},{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"},{action:"link-encounter",label:"Encounter"}]}}]}]},rollContextMenu=new CoC7ContextMenu;rollContextMenu.bind(rollMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(rollContextMenu);const sanContextMenu=new CoC7ContextMenu;sanContextMenu.bind(sanMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(sanContextMenu)}else html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this));html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".token-drag-handle").on("dragstart",this._onDragTokenStart.bind(this)),html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".condition-monitor").click(this._onConditionToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".item-name.effect-name").click((event=>this._onEffect(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".show-detail").dblclick((event=>this._onRenderItemSheet(event))),html.find(".item-edit").click((event=>this._onRenderItemSheet(event))),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.stopPropagation(),ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":{const properties={};ev.currentTarget.dataset.melee?properties.melee=!0:ev.currentTarget.dataset.rngd&&(properties.rngd=!0),this.actor.createEmptyWeapon(ev,properties)}}})),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".add-new-section").click((()=>{this.actor.createBioSection(),this.render()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find(".clear_conditions").click((event=>{if(void 0!==this.actor.system.conditions){const disable={};for(const condition in this.actor.system.conditions)void 0!==this.actor.system.conditions[condition].value&&!0===this.actor.system.conditions[condition].value&&(disable[`system.conditions.${condition}.value`]=!1);Object.keys(disable).length>0&&this.actor.update(disable)}const effects=this.actor.effects.map((effect=>effect.id));effects.length>0&&this.actor.deleteEmbeddedDocuments("ActiveEffect",effects)})),html.find(".test-trigger").click((async event=>{if(!game.settings.get("CoC7","hiddendevmenu"))return null})),html.find(".skill-name.rollable:not(.withouttooltip)").mouseenter(this.toolTipSkillEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".characteristic-label").mouseenter(this.toolTipCharacteristicEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".attribute-label.rollable").mouseenter(this.toolTipAttributeEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".auto-toggle").mouseenter(this.toolTipAutoEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".item-control.development-flag").mouseenter(this.toolTipFlagForDevelopment.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.actor))))}toolTipSkillEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((()=>{const toolTip=game.actors.documentClass.toolTipSkillText();!1!==toolTip&&game.CoC7Tooltips.displayToolTip(toolTip)}),delay))}toolTipCharacteristicEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const char=game.CoC7Tooltips.ToolTipHover.closest(".char-box");if(void 0!==char&&char){const charId=char.dataset.characteristic,characteristic=sheet.actor.characteristics[charId];let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:characteristic.label,regular:characteristic.value??0,hard:characteristic.hard??0,extreme:characteristic.extreme??0});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipAttributeEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const attrib=game.CoC7Tooltips.ToolTipHover.closest(".attribute");if(void 0!==attrib){const attributeId=attrib.dataset.attrib;let toolTip="";const attributes=sheet.actor.system.attribs[attributeId];switch(attributeId){case"lck":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:attributes.label,regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip);break;case"db":toolTip=game.i18n.localize("CoC7.ToolTipDB"),game.CoC7Tooltips.displayToolTip(toolTip);break;case"san":toolTip=game.i18n.format("CoC7.ToolTipSanity",{skill:"Sanity",regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.i18n.localize("CoC7.ToolTipKeeperSanity")+(game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):"")})),game.CoC7Tooltips.displayToolTip(toolTip)}}}}),delay)}}toolTipAutoEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const toolTip=game.i18n.localize("CoC7.ToolTipAutoToggle");game.CoC7Tooltips.displayToolTip(toolTip)}}),delay))}toolTipFlagForDevelopment(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId),toolTip=game.i18n.format("CoC7.ToolTipSkillFlagToggle",{status:game.i18n.localize(skill.system.flags.developement?"CoC7.ToolTipSkillFlagged":"CoC7.ToolTipSkillUnflagged")});game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}_onContextMenuClick(event,target){const targetType=target.dataset?.targetType,rollOptions={preventStandby:!0,fastForward:!1,actor:this.actor};switch(targetType){case"skill":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL,rollOptions.skillId=target.closest(".item")?.dataset.skillId;break;case"characteristic":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,rollOptions.characteristic=target.closest(".char-box").dataset.characteristic;break;case"attribute":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.attribute=target.closest(".attribute").dataset.attrib}switch(event.currentTarget.dataset.action){case"roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL;break;case"opposed-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_OPPOSED;break;case"combined-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED;break;case"request-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL,rollOptions.preventStandby=!1;break;case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToClipboard=!0;break;case"link-encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0;break;case"encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_SAN_CHECK,rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.fastForward=!0}CoC7ChatMessage.trigger(rollOptions)}_onRenderItemSheet(event){const li=$(event.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",message.actorTo=await new Promise((resolve=>{new Dialog({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,buttons:{confirm:{label:game.i18n.localize("CoC7.Validate"),callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)if("user"===name)return resolve(value)}}},default:"confirm",close:()=>{}}).render(!0)})),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onDragStart(event){if(super._onDragStart(event),this.token){const dragData=JSON.parse(event.dataTransfer.getData("text/plain"));dragData.tokenUuid=this.token.uuid,dragData.tokenId=this.token.id,dragData.sceneId=this.token.parent.id,event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"characteristic",check:"check",type:"CoC7Link",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"attribute",check:"check",type:"CoC7Link",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain");if(""===dataString)return!1;const data=JSON.parse(dataString);"CoC7Link"===data.type&&data.check===CoC7Link.CHECK_TYPE.EFFECT&&CoC7Link._onLinkActorClick(this.actor,data),await super._onDrop(event)}async _onConditionToggle(event){event.preventDefault(),event.currentTarget.dataset.condition&&await this.actor.toggleCondition(event.currentTarget.dataset.condition)}async revive(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onDragTokenStart(event){const data={type:"Token",uuid:this.token.uuid};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onResetCounter(event){event.preventDefault(),await this.actor.resetDailySanity()}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,isCtrlKey(event))}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked,Hooks.call("actorLockClickedCoC7",[!isLocked])}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value)||null;switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"system.attribs.hp.value":case"system.attribs.build.current":this.actor.setHp(value);break;case"system.attribs.mp.value":this.actor.setMp(value);break;case"system.attribs.san.value":this.actor.setSan(value);break;case"system.attribs.lck.value":this.actor.setLuck(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}async _onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=await item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>{summary.remove(),li.toggleClass("expanded")}))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),div.slideDown(200,(()=>li.toggleClass("expanded")))}}async _onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel;if(void 0===pannelClass)return;const pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200,(()=>pannel.toggleClass("expanded"))):pannel.slideDown(200,(()=>pannel.toggleClass("expanded")));const camelFlag=chatHelper.hyphenToCamelCase(`data.pannel.${pannelClass}.expanded`);this.actor.update({[camelFlag]:!pannel.hasClass("expanded")},{render:!1})}_onInventoryHeader(event){event.preventDefault();const li=$(event.currentTarget).siblings("li");li.is(":visible")?li.slideUp(200):li.slideDown(200)}_onItemHeader(event){event.preventDefault();const ol=$(event.currentTarget).next("ol");ol.is(":visible")?ol.slideUp(200):ol.slideDown(200)}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.system.description.enrichedValue=await TextEditor.enrichHTML(skill.system.description.value,{async:!0});new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onEffect(event){event.preventDefault();const effectId=event.currentTarget.closest("li").dataset.effectId,effect=this.actor.effects.get(effectId);isCtrlKey(event)&&game.user.isGM&&CoC7ContentLinkDialog.create({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.EFFECT,object:effect})}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:CoC7Link.CHECK_TYPE.ITEM,name:weapon.name};CoC7ContentLinkDialog.create(linkData,{actors:[this.actor]})}else{let proceedWithoutTarget=game.settings.get("CoC7","disregardNoTargets");if(!proceedWithoutTarget&&game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),"db"===event.currentTarget.parentElement.dataset.attrib)return;const data={rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_OPPOSED,event,actor:this.actor};event.currentTarget.classList.contains("characteristic-label")?data.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:event.currentTarget.classList.contains("attribute-label")&&(data.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE),event.altKey&&(data.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED),CoC7ChatMessage.trigger(data)}async _onRollCharacteriticTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,characteristic:event.currentTarget.closest(".char-box").dataset.characteristic,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if("db"!==attrib)game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,attribute:event.currentTarget.closest(".attribute").dataset.attrib,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,cardType:event.altKey&&"san"===attrib?CoC7ChatMessage.CARD_TYPE_SAN_CHECK:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor});else if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}}_onRollSkillTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,skillId:event?.currentTarget.closest(".item")?.dataset.skillId,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _updateObject(event,formData){const overrides=foundry.utils.flattenObject(this.actor.overrides),name=event?.currentTarget?.name;name&&overrides&&overrides[name]&&ui.notifications.warn(game.i18n.format("CoC7.EffectAppliedCantOverride",{name})),this.object.img!==formData.img&&(this.object.token??this.object.prototypeToken).texture.src===CoCActor.defaultImg(this.object.type)&&(this.object.token?this.object.token.update({"texture.src":formData.img}):this.object.prototypeToken.update({"texture.src":formData.img}));const biographyKeyRegex=/^system.biography\.(\d+)\.(.+)$/,biographyKeys=Object.keys(formData).map((k=>k.match(biographyKeyRegex))).filter((m=>m));if(biographyKeys.length){const biography=foundry.utils.duplicate(this.actor.system.biography);for(const biographyKey of biographyKeys)biography[biographyKey[1]][biographyKey[2]]=formData["system.biography."+biographyKey[1]+"."+biographyKey[2]],delete formData[biographyKey[0]];formData["system.biography"]=biography}if(event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating")===item.name&&void 0!==this.actor.occupation?.system?.creditRating?.max){const creditValue=(item.value||0)-(item.system.adjustments?.experience||0);(creditValue>Number(this.actor.occupation.system.creditRating.max)||creditValue<Number(this.actor.occupation.system.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.system.creditRating.min),max:Number(this.actor.occupation.system.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")){if("system.attribs.san.value"===event.currentTarget.name)return await this.actor.setSan(parseInt(event.currentTarget.value)),void this.render(!0);if("system.attribs.hp.value"===event.currentTarget.name)return await this.actor.setHp(parseInt(event.currentTarget.value)),void this.render(!0)}if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);if(item){const data={};if(item.system.properties.special){const parts=CoC7Item.getNamePartsSpec(event.currentTarget.value,item.system.specialization);data.name=parts.name,data["system.skillName"]=parts.skillName,data["system.specialization"]=parts.specialization}else data["system.skillName"]=event.currentTarget.value,data.name=event.currentTarget.value;await item.update(data)}}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"system.skill.main.id":skill.id,"system.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"system.skill.alternativ.id":skill.id,"system.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(game.i18n.format("CoC7.ErrorUnableToParseFormula",{value:event.currentTarget.value}));else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"system.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"system.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":null});break;case"long":await weapon.update({"system.range.long.damage":null});break;case"extreme":await weapon.update({"system.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const sheetData=await super.getData();return sheetData.allowFormula=!0,sheetData.displayFormula=this.actor.getActorFlag("displayFormula")||!1,sheetData.hasSan=null!==sheetData.data.system.attribs.san.value,sheetData.hasMp=null!==sheetData.data.system.attribs.mp.value,sheetData.hasLuck=null!==sheetData.data.system.attribs.lck.value,sheetData.isCreature=!1,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.showInventoryArmor=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"armor")||!sheetData.data.system.flags.locked,sheetData.showInventoryWeapons=!1,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons||sheetData.showInventoryArmor,sheetData.enrichedBiographyPersonalDescription=await TextEditor.enrichHTML(sheetData.data.system.biography.personalDescription?.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const sanlossMenu={id:"san-loss-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}]},sanlossContextMenu=new CoC7ContextMenu;sanlossContextMenu.bind(sanlossMenu,html,this._onSanLossContextMenuClick.bind(this)),this.menus.push(sanlossContextMenu)}html.find(".roll-san").click(this._onSanCheck.bind(this))}async _onSanLossContextMenuClick(event){const rollOptions={rollType:CoC7ChatMessage.ROLL_TYPE_ENCOUNTER,preventStandby:!0,fastForward:!1,event,cardType:CoC7ChatMessage.CARD_TYPE_SAN_CHECK,actor:this.actor};switch(event.currentTarget.dataset.action){case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToClipboard=!0}CoC7ChatMessage.trigger(rollOptions)}async _onSanCheck(event){if(event.preventDefault(),this.actor.system.special.sanLoss.checkPassed||this.actor.system.special.sanLoss.checkFailled)if(isCtrlKey(event)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.system.special.sanLoss.checkPassed,sanMax:this.actor.system.special.sanLoss.checkFailled,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=(new CoC7Link)._createDocumentLink(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else{const sanData={sanMax:this.actor.sanLossCheckFailled,sanMin:this.actor.sanLossCheckPassed,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};SanCheckCard.checkTargets(sanData,event.shiftKey)}}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!1,minimizable:!0})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){html.height("auto")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7NPCSheet{async getData(){const sheetData=await super.getData();return sheetData.isCreature=!0,sheetData}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc","creature"]})}}class CoC7CreateMythosEncounter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7"],title:game.i18n.localize("CoC7.SanityLossTypeDialogTitle"),template:"systems/CoC7/templates/apps/sanity-loss-type.hbs",height:"auto"})}async getData(){const data=await super.getData();return data.isImmunity="immunity"===data.object.type,data}activateListeners(html){html.find(".field_type").change(this._onSelectChange.bind(this)),html.find(".dialog-button").click(this._onButtonClick.bind(this)),super.activateListeners(html)}_onButtonClick(event){if("add"===event.currentTarget.dataset.button){const html=$(event.currentTarget).closest(".window-content"),type=html.find(".field_type").val(),name=html.find(".field_name").val(),value=parseInt(html.find(".field_value").val()),sanityLossEvents=this.object.actor.system.sanityLossEvents??[];sanityLossEvents.push({type:name,totalLoss:value,immunity:"immunity"===type}),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.object.actor.update({"system.sanityLossEvents":sanityLossEvents})}this.close()}_onSelectChange(event){const html=$(event.currentTarget).closest(".window-content");this.object.name=html.find(".field_name").val(),this.object.type=html.find(".field_type").val(),this.render(!0)}async _updateObject(event,formData){}}class CoC7CharacterSheet extends CoC7ActorSheet{_getHeaderButtons(){if("CoC7CharacterSheet"===this.constructor.name){this.summarized||(this.summarized=!1);let buttons=super._getHeaderButtons();return buttons=[{label:this.summarized?game.i18n.localize("CoC7.Maximize"):game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:this.summarized?"fas fa-window-maximize":"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}return super._getHeaderButtons()}async toggleSheetMode(event){this.summarized=!this.summarized;let options=foundry.utils.duplicate(CoC7CharacterSheet.defaultOptions);this.summarized&&(options=foundry.utils.mergeObject(options,{classes:["coc7","actor","character","summarized"],height:200,resizable:!1,width:700})),options.token=this.options.token,await this.close(),await this.render(!0,options)}async getData(){const sheetData=await super.getData();this.isEditable&&void 0===this.actor.getFlag("CoC7","skillListMode")&&await this.actor.setFlag("CoC7","skillListMode",!1),this.isEditable&&void 0===this.actor.getFlag("CoC7","skillShowUncommon")&&await this.actor.setFlag("CoC7","skillShowUncommon",!0),sheetData.skillListModeValue=this.actor.getFlag("CoC7","skillListMode")??!1,sheetData.skillShowUncommon=this.actor.getFlag("CoC7","skillShowUncommon")??!0,sheetData.showIconsOnly=game.settings.get("CoC7","showIconsOnly"),this.actor.occupation?(sheetData.data.system.infos.occupation=this.actor.occupation.name,sheetData.data.system.infos.occupationSet=!0):sheetData.data.system.infos.occupationSet=!1,this.actor.archetype?(sheetData.data.system.infos.archetype=this.actor.archetype.name,sheetData.data.system.infos.archetypeSet=!0):sheetData.data.system.infos.archetypeSet=!1,sheetData.totalExperience=this.actor.experiencePoints,sheetData.totalOccupation=this.actor.occupationPointsSpent,sheetData.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.system.development?.occupation),sheetData.totalArchetype=this.actor.archetypePointsSpent,sheetData.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.system.development?.archetype),sheetData.totalPersonal=this.actor.personalPointsSpent,sheetData.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.system.development?.personal),sheetData.creditRatingMax=Number(this.actor.occupation?.system.creditRating.max),sheetData.creditRatingMin=Number(this.actor.occupation?.system.creditRating.min),sheetData.invalidCreditRating=this.actor.creditRatingSkill?.system.adjustments?.occupation>sheetData.creditRatingMax||this.actor.creditRatingSkill?.system.adjustments?.occupation<sheetData.creditRatingMin,sheetData.pulpTalentCount=sheetData.itemsByType.talent?.length?sheetData.itemsByType.talent?.length:0,sheetData.minPulpTalents=this.actor.archetype?.system.talents?this.actor.archetype?.system.talents:0,sheetData.invalidPulpTalents=sheetData.pulpTalentCount<sheetData.minPulpTalents,sheetData.hasDevelopmentPhase=this.actor.hasDevelopmentPhase,sheetData.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),sheetData.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),sheetData.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),sheetData.showDevPannel=sheetData.allowDevelopment||sheetData.allowCharCreation,sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});sheetData.manualCredit=this.actor.getActorFlag("manualCredit"),sheetData.manualCredit||(sheetData.monetary={spendingLevel:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.spendingLevel),assets:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.assets),cash:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.cash)}),sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.summarized=this.summarized&&!sheetData.permissionLimited,sheetData.isSummarized=this.summarized,sheetData.skillList=[];let previousSpec="";for(const skill of sheetData.skills)!sheetData.skillShowUncommon&&skill.system.properties.rarity||(skill.system.properties.special&&previousSpec!==skill.system.specialization&&(previousSpec=skill.system.specialization,sheetData.skillList.push({isSpecialization:!0,name:skill.system.specialization})),sheetData.skillList.push(skill));if(sheetData.skillsByValue=[...sheetData.skills].sort(((a,b)=>b.system.value-a.system.value)),sheetData.topSkills=[...sheetData.skillsByValue].slice(0,14),sheetData.skillsByValue=sheetData.skillsByValue.filter((skill=>sheetData.skillShowUncommon||!skill.system.properties.rarity)),sheetData.topWeapons=[...sheetData.meleeWpn,...sheetData.rangeWpn].sort(((a,b)=>a.system.skill.main?.value-b.system.skill.main?.value)).reverse().slice(0,3),sheetData.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),sheetData.displayPlayerName&&!sheetData.data.system.infos.playername){const user=this.actor.characterUser;user&&(sheetData.data.system.infos.playername=user.name)}return sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.showInventoryArmor=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"armor")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons||sheetData.showInventoryArmor,sheetData.enrichedBackstory=await TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}_saveScrollPositions(html){super._saveScrollPositions(html);this._scrollPositionsX=[".right-panel .tab.development ol"].reduce(((pos,sel)=>{const el=html.find(sel);return pos[sel]=Array.from(el).map((el=>el.scrollLeft)),pos}),{})}_restoreScrollPositions(html){super._restoreScrollPositions(html);const selectors=[".right-panel .tab.development ol"],positions=this._scrollPositionsX||{};for(const sel of selectors){html.find(sel).each(((i,el)=>{el.scrollLeft=positions[sel]?.[i]||0}))}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character/index.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],scrollY:[".right-panel .tab"],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find(".toggle-list-mode").click((event=>{this.toggleSkillListMode(event)})),html.find(".toggle-uncommon-mode").click((event=>{this.toggleSkillUncommonMode(event)})),game.user.isGM&&(html.find(".sanity-loss-type-add").click(this._onAddSanityLossReason.bind(this)),html.find(".sanity-loss-type-delete").click(this._onDeleteSanityLossReason.bind(this)),html.find(".mythosEncountersTotalLoss").blur(this._onEditSanityLossReason.bind(this)),html.find(".toggle-keeper-flags").click(this._onToggleKeeperFlags.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this))))}_onAddMonetary(){const values=this.actor.system.monetary.values?foundry.utils.duplicate(this.actor.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.actor.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=foundry.utils.duplicate(this.actor.system.monetary.values);values.splice(Number(div.dataset.index),1),this.actor.update({"system.monetary.values":values})}_onToggleKeeperFlags(event){switch(event.preventDefault(),event.currentTarget.dataset.flag){case"mythosInsanityExperienced":this.actor.setFlag("CoC7","mythosInsanityExperienced",!this.actor.mythosInsanityExperienced);break;case"mythosHardened":this.actor.setFlag("CoC7","mythosHardened",!this.actor.mythosHardened)}}async _onAddSanityLossReason(event){event.preventDefault(),new CoC7CreateMythosEncounter({actor:this.actor,type:event.currentTarget.dataset.type},{}).render(!0)}async _onEditSanityLossReason(event){const input=$(event.currentTarget),offset=input.closest(".flexrow").data("offset");if(void 0!==this.actor.system.sanityLossEvents?.[offset]?.totalLoss){const sanityLossEvents=foundry.utils.duplicate(this.actor.system.sanityLossEvents);sanityLossEvents[offset].totalLoss=parseInt(input.val(),10),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}}_onDeleteSanityLossReason(event){event.preventDefault();const offset=$(event.currentTarget).closest(".flexrow").data("offset"),sanityLossEvents=this.actor.system.sanityLossEvents??[];sanityLossEvents.splice(offset,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}async toggleSkillListMode(event){return await this.actor.setFlag("CoC7","skillListMode",!this.actor.getFlag("CoC7","skillListMode")),await this.render(!0)}async toggleSkillUncommonMode(event){return await this.actor.setFlag("CoC7","skillShowUncommon",!this.actor.getFlag("CoC7","skillShowUncommon")),await this.render(!0)}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.monetary?.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),super._updateObject(event,formData)}static renderSheet(sheet,html){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground"))if("null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase())sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");else if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":default:CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover")}}}if(game.settings.get("CoC7","artWorkOtherSheetBackground")&&("null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()?sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"):sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground"))),game.settings.get("CoC7","artworkSheetImage")&&("null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()?sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"):sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage"))),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactive-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}if(void 0!==sheet.actor?.system.pannel)for(const[key,value]of Object.entries(sheet.actor.system.pannel)){const pannelClass=chatHelper.camelCaseToHyphen(key),pannel=html.find(`.pannel.${pannelClass}`);value.expanded?pannel.addClass("expanded"):pannel.removeClass("expanded")}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){const updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id),roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),this):this}class CoCIDBatch extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-batch.hbs",width:700,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!1,submitOnChange:!1})}async getData(){const sheetData=super.getData();return sheetData.foundKeys=Object.keys(sheetData.object.foundKeys).reduce(((out,key)=>(out.push({name:key,key:sheetData.object.foundKeys[key]}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.missingNames=Object.keys(sheetData.object.missingNames).reduce(((out,key)=>(out.push({key:sheetData.object.foundKeys[key]??"",name:key,custom:sheetData.object.missingNames[key],suffix:sheetData.object.missingNames[key].replace(this.object.suffixRegExp,"")}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData}activateListeners(html){super.activateListeners(html),html.find(".existing").change(this.onSetName.bind(this)),html.find(".fa-wand-magic").click(this.onClickGuess.bind(this)),html.find("input").keyup(this.onKeyup.bind(this))}onSetName(event){const obj=$(event.currentTarget);this.object.missingNames[obj.closest("li").data("name")]=obj.val(),this.render(!0)}onClickGuess(event){const name=$(event.currentTarget).closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+CoC7Utilities.toKebabCase(name),this.render(!0)}onKeyup(event){const obj=$(event.currentTarget),name=obj.closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+obj.val()}async _updateObject(event,formData){event.submitter&&(this.object.typeName===game.i18n.localize("CoC7.Entities.Skill")&&(this.close(),await CoCIDBatch.processSkillKeys(this.object.updateList,this.object.missingNames)),this.object.resolve(!0))}static async processSkillKeys(updateList,missingNames){const items=[],actors={},scenes={};for(const update of updateList){update.cocidFlag.id=missingNames[update.name],void 0===update.cocidFlag.lang&&(update.cocidFlag.lang=game.i18n.lang),void 0===update.cocidFlag.priority&&(update.cocidFlag.priority=0),void 0===update.cocidFlag.eras&&(update.cocidFlag.eras={});const flags=foundry.utils.flattenObject({flags:{CoC7:{cocidFlag:update.cocidFlag}}});if(void 0!==update.scene){if(void 0===scenes[update.scene]){const scene=game.scenes.get(update.scene);scenes[update.scene]=scene.toObject()}const tokenOffset=scenes[update.scene].tokens.findIndex((t=>t._id===update.token));if(tokenOffset>-1){const itemOffset=scenes[update.scene].tokens[tokenOffset].actorData.items.findIndex((i=>i._id===update.item));if(itemOffset>-1){const expandedFlags=foundry.utils.expandObject(Object.entries(flags).reduce(((out,entry)=>(entry[0].match(/^flags\.CoC7\.cocidFlag/)&&(out[entry[0]]=entry[1]),out)),{}));scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset]=foundry.utils.mergeObject(scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset],expandedFlags)}}}else if(void 0!==update.actor){void 0===actors[update.actor]&&(actors[update.actor]=[]);const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);actors[update.actor].push(item)}else{const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);items.push(item)}}if(items.length&&await Item.updateDocuments(items),Object.keys(actors).length)for(const actorId of Object.keys(actors))await Item.updateDocuments(actors[actorId],{parent:game.actors.get(actorId)});if(Object.keys(scenes).length)for(const sceneId of Object.keys(scenes)){game.scenes.get(sceneId).update(scenes[sceneId])}return!0}static async populateSkillKeys(updateList,missingNames,foundKeys){for(const actor of game.actors.contents){const actorData=actor.toObject();if(actorData.items)for(const item of actorData.items){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({actor:actor._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}for(const item of game.items.contents){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}for(const scene of game.scenes){const sceneData=scene.toObject();for(const token of sceneData.tokens??[])if(token.actorId&&!token.actorLink){const actorData=foundry.utils.duplicate(token.actorData);for(const item of actorData.items??[]){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({scene:sceneData._id,token:token._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}}if(Object.keys(missingNames).filter((key=>""===missingNames[key])).length>0){const items=await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\.skill\./,type:"i",era:!1});for(const item of items)foundKeys[item.name]=item.flags.CoC7.cocidFlag.id;const CoCIDKeys=Object.assign(foundry.utils.flattenObject(game.i18n._fallback.CoC7?.CoCIDFlag?.keys??{}),foundry.utils.flattenObject(game.i18n.translations.CoC7?.CoCIDFlag?.keys??{}));for(const key in CoCIDKeys)foundKeys[game.i18n.format("CoC7.CoCIDFlag.keys."+key)]=key;for(const name in missingNames)void 0!==foundKeys[name]&&(missingNames[name]=foundKeys[name])}}static async create(type){const updateList=[],missingNames={},foundKeys={};let typeName="",idPrefix="",suffixRegExp=null;return"skill"===type&&(typeName=game.i18n.localize("CoC7.Entities.Skill"),idPrefix="i.skill.",suffixRegExp=/^i\.skill\./,await CoCIDBatch.populateSkillKeys(updateList,missingNames,foundKeys),0===Object.keys(missingNames).filter((key=>""===missingNames[key])).length?(await CoCIDBatch.processSkillKeys(updateList,missingNames),!0):new Promise((resolve=>{new CoCIDBatch({typeName,idPrefix,suffixRegExp,updateList,missingNames,foundKeys,resolve}).render(!0)})))}}class Updater{static async checkForUpdate(){let systemUpdateVersion=game.settings.get("CoC7","systemUpdateVersion");game.actors.size+game.scenes.size+game.items.size+game.journal.size+game.tables.size===0&&(systemUpdateVersion=game.system.version,await game.settings.set("CoC7","systemUpdateVersion",systemUpdateVersion));const runMigrate=foundry.utils.isNewerVersion(game.system.version,systemUpdateVersion??"0");this.updatedModules=game.settings.get("CoC7","systemUpdatedModuleVersion")||{},this.currentModules={};for(const pack of game.packs)if(!["CoC7","world"].includes(pack.metadata.packageName)&&["Actor","Item","Scene"].includes(pack.metadata.type)&&!Object.prototype.hasOwnProperty.call(this.currentModules,pack.metadata.packageName)){const module=game.modules.get(pack.metadata.packageName);if(module&&(runMigrate||!Object.prototype.hasOwnProperty.call(this.updatedModules,module.id)||String(this.updatedModules[module.id])!==String(module.version))){const knownModuleVersions={"call-of-cthulhu-foundryvtt-investigator-wizard":"1.0.5","cha-coc-fvtt-en-quickstart":"5.0.5","cha-coc-fvtt-en-starterset":"5.0.5"};"string"==typeof knownModuleVersions[module.id]?foundry.utils.isNewerVersion(module.version,knownModuleVersions[module.id])&&(this.currentModules[module.id]=module.version):this.currentModules[module.id]=module.version}}(runMigrate||Object.keys(this.currentModules).length>0)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format(0===Object.keys(this.currentModules).length?"CoC7.Migrate.Message":"CoC7.Migrate.WithModulesMessage",{version:game.system.version,modules:"<ul><li>"+Object.keys(this.currentModules).map((mod=>game.modules.get(mod).title)).join("</li><li>")+"</li></ul>"}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){await this.updateDocuments(),game.settings.get("CoC7","pulpRules")&&(game.settings.set("CoC7","pulpRuleDoubleMaxHealth",!0),game.settings.set("CoC7","pulpRuleDevelopmentRollLuck",!0),game.settings.set("CoC7","pulpRuleArchetype",!0),game.settings.set("CoC7","pulpRuleOrganization",!0),game.settings.set("CoC7","pulpRuleTalents",!0),game.settings.set("CoC7","pulpRuleFasterRecovery",!0),game.settings.set("CoC7","pulpRuleIgnoreMajorWounds",!0),game.settings.set("CoC7","pulpRuleIgnoreAgePenalties",!0)),await CoCIDBatch.create("skill");const settings=foundry.utils.mergeObject(this.updatedModules||{},this.currentModules);game.settings.set("CoC7","systemUpdatedModuleVersion",settings),game.settings.set("CoC7","systemUpdateVersion",game.system.version),ui.notifications.info(game.i18n.format("CoC7.Migrate.Complete"),{permanent:!0})}static async updateDocuments(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Actor document ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorActor",{name:actor.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Item document ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorItem",{name:item.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Table document ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorTable",{name:table.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Macro document ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorMacro",{name:macro.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const scene of game.scenes)try{const updateData=Updater.migrateSceneData(scene);foundry.utils.isEmpty(updateData)||(console.log(`Migrating Scene document ${scene.name}`),await scene.update(updateData,{enforceTypes:!1})),scene.tokens.forEach((t=>t._actor=null))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorScene",{name:scene.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const pack of game.packs)"CoC7"!==pack.metadata.packageName&&["Actor","Item","Macro","RollTable","Scene"].includes(pack.metadata.type)&&await Updater.migrateCompendiumData(pack)}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),Updater._migrateActorKeeperNotes(actor,updateData),Updater._migrateActorNpcCreature(actor,updateData),Updater._migrateActorStatusEffectActive(actor,updateData),Updater._migrateActorSanLossReasons(actor,updateData),Updater._migrateActorMonetary(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(foundry.utils.expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const documentType=pack.metadata.type;if(!["Actor","Item","Macro","RollTable","Scene"].includes(documentType))return;const wasLocked=pack.locked;await pack.configure({locked:!1});try{await pack.migrate()}catch(err){console.log("pack migrate failed",pack,err)}const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(documentType){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject());break;case"Scene":updateData=Updater.migrateSceneData(doc)}foundry.utils.isEmpty(updateData)||(console.log(`Migrated ${documentType} document ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorDocumentPack",{name:doc.name,collection:pack.collection,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemEmbeddedv10(item,updateData),Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),Updater._migrateItemKeeperNotes(item,updateData),Updater._migrateItemSpellAutomated(item,updateData),Updater._migrateItemKeeperNotesMerge(item,updateData),Updater._migrateItemEras(item,updateData),Updater._migrateItemv10(item,updateData),Updater._migrateItemBookUnits(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static migrateSceneData(scene){const returns={tokens:[]};return void 0!==scene.tokens&&scene.tokens.length&&(returns.tokens=scene.tokens.map((token=>{const t=token.toObject(),updateData={};if(Updater._migrateTokenArtwork(t,updateData),Object.keys(updateData).length&&foundry.utils.mergeObject(t,updateData),!t.actorId||t.actorLink)t.actorData={};else if(game.actors.has(t.actorId)){if(!t.actorLink){const actorData=foundry.utils.duplicate(t.actorData);actorData.type=token.actor?.type;const update=Updater.migrateActorData(actorData);["items","effects"].forEach((embeddedName=>{if(!update[embeddedName]?.length)return;const updates=new Map(update[embeddedName].map((u=>[u._id,u])));t.actorData[embeddedName].forEach((original=>{const update=updates.get(original._id);update&&foundry.utils.mergeObject(original,update)})),delete update[embeddedName]})),foundry.utils.mergeObject(t.actorData,update)}}else t.actorId=null,t.actorData={};return t}))),returns}static _migrateItemKeeperNotes(item,updateData){return["archetype","chase","item","occupation","setup","skill","spell","status","talent","weapon"].includes(item.type)&&("string"==typeof item.system.description?updateData["system.description"]={value:item.system.description,keeper:""}:void 0===item.system.description||null===item.system.description?updateData["system.description"]={value:"",keeper:""}:void 0===item.system.description.keeper&&(updateData["system.description.keeper"]="")),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.system.adjustments?.experience&&(updateData["system.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){let image=String(item.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1]))}else if("book"===item.type)for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.spells"]&&(updateData["system.spells"]=item.system.spells),updateData["system.spells"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));return updateData}static _migrateItemSpellAutomated(item,updateData){"spell"===item.type&&void 0!==item.system.cost&&(updateData["system.castingTime"]=item.system.castingTime||"",updateData["system.costs.hitPoints"]=item.system.cost.hp||0,updateData["system.costs.magicPoints"]=item.system.cost.mp||0,updateData["system.costs.sanity"]=item.system.cost.san||0,updateData["system.costs.power"]=item.system.cost.pow||0,updateData["system.costs.others"]="",updateData["system.-=cost"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null)}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.system.description.unidentified&&(updateData["system.author"]=item.system.author||"",updateData["system.date"]=item.system.date||"",updateData["system.language"]=item.system.language||"",updateData["system.sanityLoss"]=item.system.sanLoss||0,updateData["system.mythosRating"]=Number(item.system.mythosRating)||0,updateData["system.content"]=item.system.description.unidentified,updateData["system.description.keeper"]=item.system.description.notes,updateData["system.difficultyLevel"]="regular",updateData["system.fullStudies"]=0,updateData["system.initialReading"]=!1,updateData["system.keeperNotes"]="",updateData["system.gains.cthulhuMythos.initial"]=Number(item.system.gain.cthulhuMythos.CMI)||0,updateData["system.gains.cthulhuMythos.final"]=Number(item.system.gain.cthulhuMythos.CMF)||0,updateData["system.gains.occult"]=Number(item.system.gain.occult)||0,updateData["system.gains.others"]=[],updateData["system.study"]={necessary:Number(item.system.weeksStudyTime)||0,progress:0,units:"CoC7.weeks"},updateData["system.-=sanLoss"]=null,updateData["system.-=weeksStudyTime"]=null,updateData["system.-=gain"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null,updateData["system.gains.-=other"]=null,updateData["system.-=properties"]=null,updateData["system.-=flags"]=null),updateData}static _migrateItemBookUnits(item,updateData){"book"===item.type&&void 0!==item.system.study.necessary&&void 0===item.system.study.units&&(updateData["system.study.units"]="CoC7.weeks")}static _migrateItemKeeperNotesMerge(item,updateData){"spell"!==item.type&&"book"!==item.type||(void 0!==item.system.notes&&(void 0!==item.system.description.keeper?updateData["system.description.keeper"]=item.system.description.keeper+item.system.notes:updateData["system.description.keeper"]=item.system.notes,updateData["system.-=notes"]=null),void 0!==item.system.keeperNotes&&(void 0!==updateData["system.description.keeper"]?updateData["system.description.keeper"]=item.system.keeperNotes+updateData["system.description.keeper"]:updateData["system.description.keeper"]=item.system.keeperNotes,updateData["system.-=keeperNotes"]=null))}static _migrateItemEmbeddedv10(item,updateData){if("occupation"===item.type){let changed=!1;for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&void 0===v.system&&(item.system.groups[o].skills[k].system=v.data,changed=!0);changed&&(updateData["system.groups"]=item.system.groups)}if(["setup"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&void 0===v.system&&(item.system.items[k].system=v.data,changed=!0);changed&&(updateData["system.items"]=item.system.items)}if(["archetype","occupation"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&void 0===v.system&&(item.system.skills[k].system=v.data,changed=!0);changed&&(updateData["system.skills"]=item.system.skills)}if(["book"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&void 0===v.system&&(item.system.spells[k].system=v.data,changed=!0);changed&&(updateData["system.spells"]=item.system.spells)}}static _migrateItemv10(item,updateData){if("skill"!==item.type||void 0!==item.system.skillName&&""!==item.system.skillName){if("setup"===item.type){for(const[k,v]of Object.entries(item.system.items))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].name=v.name,"Uniki"===updateData["system.items"][k].name&&(updateData["system.items"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.items"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.items"][k].name=parts.name,updateData["system.items"][k].system.skillName=parts.skillName,updateData["system.items"][k].system.specialization=parts.specialization}}else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].name=v.name,"Uniki"===updateData["system.groups"][o].skills[k].name&&(updateData["system.groups"][o].skills[k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.groups"][o].skills[k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.groups"][o].skills[k].name=parts.name,updateData["system.groups"][o].skills[k].system.skillName=parts.skillName,updateData["system.groups"][o].skills[k].system.specialization=parts.specialization}}else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}}else{updateData.name=item.name,"Uniki"===updateData.name&&(updateData.name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData.name,"string"==typeof item.system.specialization?.group?item.system.specialization.group:item.system.specialization);updateData.name=parts.name,updateData["system.skillName"]=parts.skillName,updateData["system.specialization"]=parts.specialization}}static _migrateItemEras(item,updateData){if(void 0!==item.system.eras){let eras={};for(const[key,value]of Object.entries(item.system.eras))if(!0===value||"string"!=typeof value&&void 0!==value.selected)switch(key){case"1920":eras.standard=!0;break;case"mdrn":eras.modern=!0,eras.modernPulp=!0;break;case"pulp":eras.pulp=!0;break;case"ddts":eras.downDarkerTrails=!0,eras.downDarkerTrailsPulp=!0;break;case"drka":eras.darkAges=!0,eras.darkAgesPulp=!0;break;case"glit":eras.gasLight=!0;break;case"nvct":eras.invictus=!0}if("setup"===item.type){const key=Object.keys(eras)[0];eras=key?{[key]:!0}:{standard:!0}}const CoC7={cocidFlag:{id:"",lang:game.i18n.lang,priority:0,eras}};void 0===item.flags?.CoC7?(item.flags.CoC7=CoC7,updateData["flags.CoC7"]=CoC7):void 0===item.flags?.CoC7?.cocidFlag?(item.flags.CoC7.cocidFlag=CoC7.cocidFlag,updateData["flags.CoC7.cocidFlag"]=CoC7.cocidFlag):(item.flags.CoC7.cocidFlag.eras=CoC7.cocidFlag.eras,updateData["flags.CoC7.cocidFlag.eras"]=CoC7.cocidFlag.eras),updateData["system.-=eras"]=null}}static _migrateActorArtwork(actor,updateData){let image=String(actor.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),void 0!==actor.prototypeToken&&void 0!==actor.prototypeToken.texture?.src&&(image=String(actor.prototypeToken.texture.src).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(updateData["prototypeToken.texture.src"]="systems/CoC7/assets/icons/"+image[1])),void 0!==actor.effects)for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1])}static _migrateActorKeeperNotes(actor,updateData){["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&void 0===actor.system.description&&(updateData["system.description"]={keeper:""})}static _migrateActorMonetary(actor,updateData){if("character"===actor.type&&void 0!==actor.system.credit?.multiplier){updateData["system.monetary.symbol"]=actor.system.credit?.monetarySymbol?actor.system.credit.monetarySymbol:"$",""===updateData["system.monetary.symbol"].toString().trim()&&(updateData["system.monetary.symbol"]="$");const multiplier=parseInt(actor.system.credit.multiplier)?parseInt(actor.system.credit.multiplier):1;if(updateData["system.monetary.spent"]=actor.system.credit.spent,updateData["system.monetary.assetsDetails"]=actor.system.credit.assetsDetails,updateData["system.monetary.spendingLevel"]=actor.system.credit.spendingLevel,updateData["system.monetary.cash"]=actor.system.credit.cash,updateData["system.monetary.assets"]=actor.system.credit.assets,updateData["system.monetary.values"]=foundry.utils.duplicate(actor.system.monetary.values),1!==multiplier)for(const value of updateData["system.monetary.values"])value.cashValue=multiplier*value.cashValue,value.assetsValue=multiplier*value.assetsValue,value.spendingValue=multiplier*value.spendingValue;updateData["system.-=credit"]=null}}static _migrateActorSanLossReasons(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.encounteredCreatures){const groups={};for(const sanityLossEvent of actor.system.encounteredCreatures)sanityLossEvent.totalLoss>0&&(groups[sanityLossEvent.name]=Math.max(groups[sanityLossEvent.name]??0,sanityLossEvent.totalLoss));const sanityLossEvents=[];for(const name in groups)sanityLossEvents.push({type:name,totalLoss:groups[name],immunity:!1});updateData["system.sanityLossEvents"]=sanityLossEvents,updateData["system.-=encounteredCreatures"]=null}}static _migrateActorStatusEffectActive(actor,updateData){if(["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&(void 0!==actor.system.status||void 0===actor.system.conditions)){if(updateData["system.conditions.criticalWounds.value"]=!1,updateData["system.conditions.unconscious.value"]=!1,updateData["system.conditions.dying.value"]=!1,updateData["system.conditions.dead.value"]=!1,updateData["system.conditions.prone.value"]=!1,updateData["system.conditions.tempoInsane.value"]=!1,updateData["system.conditions.indefInsane.value"]=!1,void 0!==actor.system.status?.criticalWounds?.value&&actor.system.status?.criticalWounds.value&&(updateData["system.conditions.criticalWounds.value"]=!0),void 0!==actor.system.status?.unconscious?.value&&actor.system.status?.unconscious.value&&(updateData["system.conditions.unconscious.value"]=!0),void 0!==actor.system.status?.dying?.value&&actor.system.status?.dying.value&&(updateData["system.conditions.dying.value"]=!0),void 0!==actor.system.status?.dead?.value&&actor.system.status?.dead.value&&(updateData["system.conditions.dead.value"]=!0),void 0!==actor.system.status?.prone?.value&&actor.system.status?.prone.value&&(updateData["system.conditions.prone.value"]=!0),void 0!==actor.system.status?.tempoInsane?.value&&actor.system.status?.tempoInsane.value&&(updateData["system.conditions.tempoInsane.value"]=!0),void 0!==actor.system.status?.indefInsane?.value&&actor.system.status?.indefInsane.value&&(updateData["system.conditions.indefInsane.value"]=!0),void 0!==actor.effects){const effects=actor.effects;let changed=!1;for(let i=0,im=effects.length;i<im;i++){const effect=effects[i],match=effect.icon.match(/\/(hanging-spider|tentacles-skull|arm-sling|heart-beats|tombstone|knocked-out-stars|falling|skull|unconscious)\./);if(null!==match){let statusId="";switch(match[1]){case"hanging-spider":statusId="tempoInsane";break;case"tentacles-skull":statusId="indefInsane";break;case"arm-sling":statusId="criticalWounds";break;case"heart-beats":statusId="dying";break;case"tombstone":case"skull":statusId="dead";break;case"knocked-out-stars":case"unconscious":statusId="unconscious";break;case"falling":statusId="prone"}""!==statusId&&(updateData[`system.conditions.${statusId}.value`]||(updateData[`system.conditions.${statusId}.value`]=!0,changed=!0),effect.flags.core?.statusId!==statusId&&(effects[i]=foundry.utils.mergeObject(effect,{flags:{core:{statusId}}}),changed=!0))}}changed&&(updateData.effects=effects)}updateData["system.-=status"]=null}return updateData}static _migrateActorNpcCreature(actor,updateData){return["npc"].includes(actor.type)&&void 0!==actor.system&&(void 0===actor.system.special&&(updateData["system.special"]={checkPassed:null,checkFailled:null}),void 0===actor.system.attacksPerRound&&(updateData["system.attacksPerRound"]=1)),updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.attribs?.san){const oneFifthSanity=Math.ceil(actor.system.attribs.san.value/5);void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.attribs.san.oneFifthSanity&&null!==actor.system.attribs.san.oneFifthSanity||(updateData["system.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.value&&null!==actor.system.indefiniteInsanityLevel.value||(updateData["system.indefiniteInsanityLevel.value"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.max&&null!==actor.system.indefiniteInsanityLevel.max||(updateData["system.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.system.attribs.mp&&(void 0!==actor.system.attribs.mp.value&&null!==actor.system.attribs.mp.value||(updateData["system.attribs.mp.value"]=oneFifthSanity),void 0!==actor.system.attribs.mp.max&&null!==actor.system.attribs.mp.max||(updateData["system.attribs.mp.max"]=oneFifthSanity)),void 0!==actor.system.notes&&null!==actor.system.notes||(updateData["system.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){let image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateTokenArtwork(token,updateData){const image=String(token.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}}const nameCharacters="\\u3000\\u3400-\\u4DBF\\u3040-\\u30FF\\u4E00-\\u9FFF\\w\\(\\)\\-\\/&\"'･（）／"+CoC7Utilities.quoteRegExp("áéíóàèìòùÀÈÌÒÙáéíóúýÁÉÍÓÚÝâêîôûÂÊÎÔÛãñõÃĀÑÕäëïöüÿÄËÏÖÜŸàèçÇßØøÅåÆæœ“”«»ąćęłńóśźżĄĆĘŁŃÓŚŹŻ"),keys={en:{description:"CoC7.English",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:skills(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:languages)[:\n]",sectionSpells:"\n(?:spells)[:\n]",handgun:"(?<type> Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle|(^| )\\.38)",rifle:"(?<type>Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Grenade|Dynamite)",example:"Example Character, age 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 SAN 55 HP 14 DB: 1D4\nBuild: 1 Move: 7 MP: 10 Luck: 40 Armor: 1\nAttacks per round: 3 SAN loss: 1d4/1d8\nCombat\nBite 50% (25/10), damage 1D6\nBrawl 30% (15/6), damage 1D3\nDerringer 40% (20/8), damage 1D8+1\nDodge 50% (25/10)\nSkills\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLanguages: English 80%, Eklo 5%.\nSpells: Summon NPC, Dispel NPC."},de:{description:"CoC7.German",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",diceShort:"w|d",fulldb:"(Schadensbonus|Sb)",halfdb:"(½|1/2 Schadensbonus|Sb/2)",sectionCombats:"\n(?:Kampf|Angriff:|ANGRIFFE)[:\n]",newCombatHeader:"\nKampf\n",sectionSkills:"\n(?:Fertigkeiten(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Sprachen)[:\n]",sectionSpells:"\n(?:Zauber)[:\n]",handgun:"(?<type> Gun|Revolver|Pistole|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Gewehr|Schrotflinte|Carabiner|Karabiner|Gauge |Lee-Enfield|Elefanten)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Granate|Dynamit)",example:"Vorname Nachname\nAlter: 29\nBeruf: Ein Beruf\nST 50\nMA 60\nKO 60\nGE 60\nGR 55\nER 65\nIN 80\nBI 85\nTrefferpunkte: 11\nGeistige Stabilität: 60\nSchadensbonus: 0\nStatur: 0\nMagiepunkte: 12\nBewegungsweite: 8\n\nKampf\nAngriffe: 1\nHandgemenge 30% (15/6), Schaden 1D3\nMesser 30% (15/6), Schaden 1D4\nAusweichen 30% (15/6)\n\nFertigkeiten: Anthropologie 70% (35/14), Archäologie 30% (15/6), Bibliotheksnutzung 50% (25/10), Erste Hilfe 50% (25/10), Finanzkraft 40% (20/8), Geschichte 60% (30/12), Klettern 50% (25/10)\n\nSprachen: Englisch 85% (42/17); Deutsch 45% (22/9), Latein 45% (22/9)"},pl:{description:"CoC7.Polish",dbNone:"brak",armorNone:"brak",attacksPerRoundNone:"brak",sanLossNone:"brak",diceShort:"k|d",fulldb:"(Modyfikator Obrażeń|MO)",halfdb:"(½|1/2 MO|MO/2)",sectionCombats:"\n(?:Walka|Ataki)[:\n]",newCombatHeader:"\nWalka\n",sectionSkills:"\n(?:Umiejętności(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Języki)[:\n]",sectionSpells:"\n(?:Zaklęcia)[:\n]",handgun:"(?<type> Pistolet|Rewolwer|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Karabin|Strzelba|Wiatrówka|Garand|Gauge |Lee-Enfield|Strzelba na słonie)",smb:"(?<type>Pistolet maszynowy|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Mołotowa|Granat|Laska dynamitu|Dynamit)",example:"Przykładowa postać, 27 lat\nBibliotekarz\nS 75 KON 60 BC 80 ZR 70 WYG 60 INT 80\nMOC 50 WYK 85 P 55 PW 14 MO: 1D4\nKrzepa: 1 Ruch: 7 PM: 10 Szczęście: 40 Pancerz: 1\nAtaki w rundzie: 3 Utrata Poczytalności: 1K4/1K8\nWalka\nUgryzienie 50% (25/10), obrażenia 1K6\nWalka 30% (15/6), obrażenia 1K3\nDerringer 40% (20/8), obrażenia 1K8+1\nUnik 50% (25/10)\nUmiejętności\nTresura Zwierząt 55%, Urok Osobisty 30%, Pierwsza Pomoc 25%, Ukrywanie 20%,\nNasłuchiwanie 50%, Medycyna 45%, Przekonywanie 25%, Psychologia 75%,\nNauka (Astronomia) 90%, Nauka (Botanika) 35%, Nauka (Zoologia) 10%,\nSpostrzegawczość 35%, Ukrywanie 10%\nJęzyki: Angielski 80%, Eklo 5%.\nZaklęcia: Przyzwanie NPC, Odesłanie NPC."},fr:{description:"CoC7.French",dbNone:"Acune",armorNone:"(?:Acune|aucune)",attacksPerRoundNone:"Acune",sanLossNone:"Acune",fulldb:"(BD|Bonus aux dommages|Impact|Imp)",halfdb:"(½|1/2 Imp|Imp/2)",sectionCombats:"\n(?:Combat|Armes|Attaques)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:Compétences(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Langues?)\\s*[:\n]",sectionSpells:"\n(?:Sortilèges\\s*|Sorts)[:\n]",handgun:"(?<type>Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Carabine|Lee-Enfield|Fusil)",smb:"(?<type>SMG|Thompson)",machineGun:"(?<type>Browning|Vickers|Mitrailleuse)",launched:"(?<type>Boomerang de guerre|Javeline|Pierre|Shuriken|Bâton de dynamite|Cocktail Molotov|Grenade à main|Molotov|Grenade|Dynamite)",example:"Example Character, 27 ans\nFOR 75 CON 60 TAI 80 DEX 70 APP 60 INT 80\nPOU 50 ÉDU 85 SAN 55 PV 14 BD: 1D4\nCarrure: 1 Mvt: 7 PM: 10 Chance: 40 Armure: 1\nAttaques par round 3 Perte de SAN: 1d4/1d8\nAttaques\nBite 50% (25/10), dommage 1D6\nBrawl 30% (15/6), dommage 1D3\nDerringer 40% (20/8), dommage 1D8+1\nEsquiver 50% (25/10)\nCompétences\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLangue: English 80%, Eklo 5%.\nSortilèges: Summon NPC, Dispel NPC."},es:{description:"CoC7.Spanish",dbNone:"ninguna",armorNone:"ninguna",attacksPerRoundNone:"ninguno",sanLossNone:"no",fulldb:"(BD|bd|bonificación de daño)",halfdb:"(½|medio daño|mitad|daño a la mitad)",sectionCombats:"\n(?:Combate|Armas)[:\n]",newCombatHeader:"\nCombate\n",sectionSkills:"\n(?:Habilidades(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Idiomas|Lenguajes|Lenguas)[:\n]",sectionSpells:"\n(?:Conjuros|Hechizos)[:\n]",handgun:"(?<type>Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)",smb:"(?<type>Subfusil|Thompson)",machineGun:"(?<type>Browning|Vickers|Ametralladora)",launched:"(?<type>Molotov|Granada|Dinamita)",example:"Example Character, 27 años\nFUE 75 CON 60 TAM 80 DES 70 APA 60 INT 80\nPOD 50 EDU 85 COR 55 PV 14 BD: 1D4\nCorpulencia: 1 Movimiento: 7 PM: 10 Suerte: 40 Armadura: 1\nNúmero de Ataques 3 Pérdida de cordura: 1d4/1d8\nCombate\nBite 50% (25/10), daño 1D6\nBrawl 30% (15/6), daño 1D3\nDerringer 40% (20/8), daño 1D8+1\nEsquivar 50% (25/10)\nHabilidades\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nIdiomas: English 80%, Eklo 5%.\nConjuros: Summon NPC, Dispel NPC."},"zh-TW":{description:"CoC7.TraditionalChinese",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB|傷害加值)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks|戰鬥技能|戰鬥列表|武器)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:(?:Skills|技能列表)(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|語言)[:\n]",sectionSpells:"\n(?:spells|咒文列表|咒文)[:\n]",handgun:"(?<type> 遂發槍|\\.22短口自動手槍|\\.25短口手槍(單管)|\\.32或7\\.65mm左輪手槍|\\.32或7\\.65mm自動手槍|\\.357 Magnum左輪手槍|\\.38或9mm左輪手槍|\\.38自動手槍|貝雷塔M9|格洛克17|9mm自動手槍|魯格P08|\\.41左輪手槍|\\.44馬格南左輪手槍|\\.45左輪手槍|\\.45自動手槍|沙漠之鷹|Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>步槍|卡賓槍|半自動步槍|獵象槍|Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson|衝鋒槍)",machineGun:"(?<type>Browning|Vickers|機槍)",launched:"(?<type>Molotov|Grenade|Dynamite爆炸物|手榴彈|重武器)",example:"示範角色, 年齡 27\n力量 75 體質 60 體型 80 敏捷 70 外貎 60 智力 80\n意志 50 教育 85 SAN 55 HP 14 DB: 1D4\n體格: 1 Move: 7 MP: 10 幸運: 40 護甲: 1\n攻擊次數: 3 理智喪失: 1d4/1d8\n戰鬥列表\n咬 50% (25/10), 傷害 1D6\n空手 30% (15/6), 傷害 1D3\n手槍 40% (20/8), 傷害 1D8+1\n閃避 50% (25/10)\n技能列表\n動物馴養 55%, 取悅 30%, 急救 25%, 潛行 20%,\n聆聽 50%, 藥學 45%, 精神分析 25%, 心理學 75%,\n科學 (司法科學) 90%, 科學 (密碼學) 35%, \n偵查 35%, 喬裝 10%\n語言: 粵語 80%, 讀唇 5%.\n咒文: 召喚 NPC, 指揮 NPC."},ja:{description:"CoC7.Japanese",dbNone:"なし",armorNone:"なし",attacksPerRoundNone:"なし",sanLossNone:"なし",fulldb:"(Damage Bonus|DB|db|ダメージ(・|･)?ボーナス)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks|戦闘|武器)[:：\n]",newCombatHeader:"\n戦闘\n",sectionSkills:"\n(?:(?:Skills|技能)\\s*(?:\\s*\\([^\\)]+\\))?)[:：\n]",sectionLangauges:"\n(?:Languages|言語)\\s*[:：\n]",sectionSpells:"\n(?:spells|呪文)\\s*[:：\n]",handgun:"(?<type>拳銃|オートマチック|リボルバー|デリンジャー|ベレッタ|ルガー|デザート(・|･)?イーグル|Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>ライフル|ショットガン|カービン|ゲージ|リー＝エンフィールド|エレファント(・|･)?ガン|Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>サブマシンガン|トンプソン|Submachine Gun|Thompson)",machineGun:"(?<type>ブローニング|ヴッカース|マシンガン|Browning|Vickers)",launched:"(?<type>モロトフ|グレネード|ダイナマイト|Molotov|Grenade|Dynamite)",example:"サンプル 太郎、27歳、記者\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 正気度 55 耐久力 14 ダメージ・ボーナス：1D4\nビルド：1 移動：7 マジック・ポイント：10 幸運：40 装甲：1\n1ラウンドの攻撃回数：3 正気度喪失：1D4/1D8\n戦闘\n噛みつき 50% (25/10)、ダメージ 1D6\n格闘 30% (15/6)、ダメージ 1D3+DB\nデリンジャー 40% (20/8)、ダメージ 1D8+1\n回避 50% (25/10)\n技能\n言いくるめ 25%、医学 45%、隠密 10%、\n聞き耳 50%、説得 25%、心理学 75%、\n科学 (天文学) 90%、科学 (植物学) 35%、科学 (動物学) 10%、\n動物使い 55%、変装 20%、目星 35%、魅惑 30%。\n言語：英語 80%、アクロ語 5%。\n呪文：NPCの召喚、NPCの退散。"}},translations={en:{age:"(?<![a-z])age(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.en.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.en.dbNone+")[,\\s\n]*",build:"(?<![a-z])Build(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor(\\s*:)?\\s+(?<armor>"+keys.en.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks)(\\s*:)?\\s+(?<attacksPerRound>"+keys.en.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss)(\\s*:)?\\s+(?<sanLoss>"+keys.en.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*damage)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.en.fulldb+"|"+keys.en.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Fighting|Firearms|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.en.sectionCombats+"|"+keys.en.sectionSkills+"|"+keys.en.sectionLangauges+"|"+keys.en.sectionSpells+")"},de:{age:"(?<![a-z])Alter(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Beruf(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])ST(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KO(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])GR(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])IN(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MA(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])GE(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])ER(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])BI(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:gS|STA|Geistige Stabilität)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:TP|Trefferpunkte)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magiepunkte)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.de.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|W\\d+)?|"+keys.de.dbNone+")[,\\s\n]*",build:"(?<![a-z])(?:Statur|Stat.)(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Panzerung(\\s*:)?\\s+(?<armor>"+keys.de.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:BW|Bewegungsweite)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Glück(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Angriffe pro Runde|Angriffe|Pro Runde)(\\s*:)?\\s+(?<attacksPerRound>"+keys.de.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Stabilitätsverlust)(\\s*:)?\\s+(?<sanLoss>"+keys.de.sanLossNone+"|\\d[DW]?[+\\d]*\\/\\d[DW]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*Schaden)?\\s+(?<damage>(:?(:?\\d+w|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.de.fulldb+"|"+keys.de.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d|w)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Ausweichen)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,;]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Angriffe|Handgemenge|Nahkampf|Faustfeuerwaffe|Beißen)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.de.sectionCombats+"|"+keys.de.sectionSkills+"|"+keys.de.sectionLangauges+"|"+keys.de.sectionSpells+")"},pl:{age:"(?<age>\\d+)\\s+(?:lata|lat|rok)[,\\s]*",occupation:"[,\\s]*Zawód(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])S(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])BC(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MOC(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])ZR(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])WYG(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])WYK(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:P|Poczytalność)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PW|Punkty Wytrzymałości)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Punkty Magii)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.pl.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|K\\d+)?|"+keys.pl.dbNone+")[,\\s\n]*",build:"(?<![a-z])Krzepa(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Pancerz(\\s*:)?\\s+(?<armor>"+keys.pl.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Ruch(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Szczęście(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Ataki w rundzie|# Ataki)(\\s*:)?\\s+(?<attacksPerRound>"+keys.pl.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Utrata Poczytalności|utrata P)(\\s*:)?\\s+(?<sanLoss>"+keys.pl.sanLossNone+"|\\d[DK]?[+\\d]*\\/\\d[DK]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*obrażenia)?\\s+(?<damage>(:?(:?\\d+k|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.pl.fulldb+"|"+keys.pl.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Unik)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Walka|Broń Palna|Bijatyka|Ugryzienie)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.pl.sectionCombats+"|"+keys.pl.sectionSkills+"|"+keys.pl.sectionLangauges+"|"+keys.pl.sectionSpells+")"},fr:{age:"(?<age>\\d+)\\s*ans(?![a-z])[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FOR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAI(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POU(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])ÉDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<!([a-z]|de\\s))(?:SAN|Santé Mentale)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Points de vie)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Points de magie)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.fr.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.fr.dbNone+")[,\\s\n]*",build:"(?<![a-z])Carrure(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])(?:Armure|Protection)(\\s*:)?\\s+(?<armor>"+keys.fr.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:Mvt|Mouvement|Déplacement)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Chance(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attaques par round)(\\s*:)?\\s+(?<attacksPerRound>"+keys.fr.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Perte de Santé mentale|Perte de SAN)(\\s*:)?\\s+(?<sanLoss>"+keys.fr.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:dommage|dégâts))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.fr.fulldb+"|"+keys.fr.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquiver?)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Au contact|À distance|Combat rapproché|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.fr.sectionCombats+"|"+keys.fr.sectionSkills+"|"+keys.fr.sectionLangauges+"|"+keys.fr.sectionSpells+")"},es:{age:"(?<age>\\d+)\\s*a[ñÑ]os(?![a-z])[,\\s]*",occupation:"[,\\s]*Ocupación(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FUE(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAM(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POD(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DES(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APA(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:COR|Cordura)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Puntos de vida|P\\. ?V\\.)(\\s*:)?\\s+(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Puntos Mágicos|Puntos de Magia)(\\s*:)?\\s+(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.es.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.es.dbNone+")[,\\s\n]*",build:"(?<![a-z])Corpulencia(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armadura(\\s*:)?\\s+(?<armor>"+keys.es.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Movimiento(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Suerte(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Número de Ataques)(\\s*:)?\\s+(?<attacksPerRound>"+keys.es.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Pérdida de cordura|Pérdida de COR)(\\s*:)?\\s+(?<sanLoss>"+keys.es.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*daño)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.es.fulldb+"|"+keys.es.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquivar)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Combatir|Armas de fuego|Pelea|Mordisco)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.es.sectionCombats+"|"+keys.es.sectionSkills+"|"+keys.es.sectionLangauges+"|"+keys.es.sectionSpells+")"},"zh-TW":{age:"(?<![a-z])age|年齡(\\s*:)?\\s*(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR|力量(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON|體質(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ|體型(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT|智力(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW|意志(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX|敏捷(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP|外貎(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU|教育(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity|理智)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points|生命)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys["zh-TW"].fulldb+")(\\s*:)?\\s*(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys["zh-TW"].dbNone+")[,\\s\n]*",build:"(?<![a-z])Build|體格(\\s*:)?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor|護甲(\\s*:)?\\s*(?<armor>"+keys["zh-TW"].armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck|幸運(\\s*:)?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks|攻擊次數|# 攻擊)(\\s*:)?\\s*(?<attacksPerRound>"+keys["zh-TW"].attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss|理智喪失|SAN值損失|SAN值喪失|扣SAN)(\\s*:)?\\s*(?<sanLoss>"+keys["zh-TW"].sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:damage|傷害))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys["zh-TW"].fulldb+"|"+keys["zh-TW"].halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge|閃避|閃躲)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%?(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(近戰技能|射擊技能|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys["zh-TW"].sectionCombats+"|"+keys["zh-TW"].sectionSkills+"|"+keys["zh-TW"].sectionLangauges+"|"+keys["zh-TW"].sectionSpells+")"},ja:{age:"[(（]?(?<age>\\d+)(\\s+)*(?:歳|才)[)）]?[,、\\s]*",occupation:"[,、\\s]*(職業)?(\\s*[:：])?\\s+(?<occupation>.+)[,、\\s\n]*",str:"(?<![a-z])STR(\\s*[:：])?\\s*(?<str>\\d+|-)[,、\\s\n]*",con:"(?<![a-z])CON(\\s*[:：])?\\s*(?<con>\\d+|-)[,、\\s\n]*",siz:"(?<![a-z])SIZ(\\s*[:：])?\\s*(?<siz>\\d+|-)[,、\\s\n]*",int:"(?<![a-z])INT(\\s*[:：])?\\s*(?<int>\\d+|-)[,、\\s\n]*",pow:"(?<![a-z])POW(\\s*[:：])?\\s*(?<pow>\\d+|-)[,、\\s\n]*",dex:"(?<![a-z])DEX(\\s*[:：])?\\s*(?<dex>\\d+|-)[,、\\s\n]*",app:"(?<![a-z])APP(\\s*[:：])?\\s*(?<app>\\d+|-)[,、\\s\n]*",edu:"(?<![a-z])EDU(\\s*[:：])?\\s*(?<edu>\\d+|-)[,、\\s\n]*",san:"(?<![a-z])(?:(SAN|Sanity|正気度))(\\s*[:：])?\\s*(?<san>\\d+|-)[,、\\s\n]*",hp:"(?<![a-z])(?:(HP|Hit points|耐久力|ヒット(・|･)?ポイント))(\\s*[:：])?\\s*(?<hp>\\d+|-)[,、\\s\n]*",mp:"(?<![a-z])(?:(MP|Magic points|マジック(・|･)?ポイント))(\\s*[:：])?\\s*(?<mp>\\d+|-)[,、\\s\n]*",db:"(?<![a-z])(?:"+keys.ja.fulldb+")(\\s*[:：])?\\s*(?<db>[+-]?\\s*\\d+(?:d\\d+|D\\d+)?|"+keys.ja.dbNone+")[,、\\s\n]*",build:"(?<![a-z])(Build|ビルド)(\\s*[:：])?\\s*(?<build>[+-]?\\d+)[,、\\s\n]*",armor:"(?<![a-z])(Armor|装甲)(\\s*[:：])?\\s*(?<armor>"+keys.ja.armorNone+"|\\d+)[,、\\s\n]*",mov:"(?<![a-z])(Move|MOV|移動率?)(\\s*[:：])?\\s*(?<mov>\\d+)[,、\\s\n]*",lck:"(?<![a-z])(Luck|幸運)(\\s*[:：])?\\s*(?<lck>\\d+|-)[,、\\s\n]*",attacksPerRound:"(?<![a-z])(?:(Attacks per round|# Attacks|((1|1 |１)ラウンドの)?攻撃回数))(\\s*[:：])?\\s*(?<attacksPerRound>"+keys.ja.attacksPerRoundNone+"|\\d+(?!d))[,、\\s\n]*",sanLoss:"(?<![a-z])(?:(Sanity loss|SAN loss|正気度喪失))(\\s*[:：]\\D*)?\\s*(?<sanLoss>"+keys.ja.sanLossNone+"|\\dD?[+\\d]*[\\/／]\\dD?[+\\d]*)[,、\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t\\w "+nameCharacters+"]+)(\\**[,、]?\\s+|\\*)(?:\\(|(?<percentage>\\d+)[%％][,、]?(?:\\s*[\\(（]\\d+[\\/／]\\d+[\\)）]\\s*[,、]?)?)?(\\s*(?:damage|ダメージ))?\\s*(?<damage>(:?\\d+[dD])?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.ja.fulldb+"|"+keys.ja.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+[dD])?\\d+)*)\\)?",weaponDodge:"(?<name>(Dodge|回避))(\\s*[:：])?\\s*\\(?(?<percentage>\\d+)\\)?\\s*[%％]?(?:\\s*[\\(（]\\d+[\\/／]\\d+[\\)）])?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate|\\d))[\\s:：]*\\(?(?<percentage>\\d+)[^d][%％]?\\)?(\\s*[\\(（]\\d+[\\/／]\\d+[\\)）])?\\s?[\\.,、]?\\s*",guessStartCombat:"(^|(?<!,)\n)(近接(戦闘|格闘)|格闘|攻撃|素手|噛みつき|射撃|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,、\\s\n]+",sections:"("+keys.ja.sectionCombats+"|"+keys.ja.sectionSkills+"|"+keys.ja.sectionLangauges+"|"+keys.ja.sectionSpells+")"}};class CoC7ActorImporterRegExp{static checkLanguage(lang=null){return lang||(lang=game.i18n.lang),void 0===translations[lang]&&(lang="en"),lang}static getExampleText(lang){let example=keys.en.example;return void 0!==keys[lang]&&(example=keys[lang].example),example}static getTranslations(){const output={};for(const key in keys)output[key]=keys[key].description;return output}static getKeys(lang){return keys[lang]||keys.en}static getRegularExpressions(lang){return translations[lang]||translations.en}}class CoC7ActorImporter{constructor(){this.parsed={},this.itemLocations=""}static get asNumber(){return"n"}static get asString(){return"s"}getRegEx(regex,modifiers="iu"){return"RegExp"===regex.constructor?.name?regex:new RegExp(regex,modifiers)}cleanString(s){return"CoC7.Japanese"===this.keys.description?s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*[(（]\s*/g," (").replace(/\s*[)）]\s*/g,")").replace(/\s*[.。]?\s*[.。]?$/,"").replace(/^[〈《]/,"").replace(/[〉》]$/,""):s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*\.?$/,"")}translateRoll(s){if(void 0===s)return s;if(void 0!==this.keys.diceShort){const regEx=new RegExp("(?<n1>\\d+)"+this.keys.diceShort+"(?<n2>\\d+)","iug");return s.replace(regEx,"$<n1>D$<n2>")}return s}toHTML(s){return 0===s.trim().length||0===(s=s.trim().split("\n").map((text=>text.trim().replace(/^[,.\s、。]+$/,""))).filter((text=>text)).join("</p><p>")).length?"":"<p>"+s+"</p>"}check(regExKey,{removeFromText=!0,saveKeys=!0,type=CoC7ActorImporter.asString,text=!1,requiredGroup=!1}={}){let output=!1,regExp=!1;if(void 0!==this.regEx[regExKey]?regExp=this.getRegEx(this.regEx[regExKey]):void 0!==this.keys[regExKey]&&(regExp=this.getRegEx(this.keys[regExKey])),!1!==regExp){!1===text&&(text=this.text);const check=regExp.exec(text);let value=null;if(null!==check&&(!1===requiredGroup||void 0!==(check.groups||{})[requiredGroup])){if(output=check.groups||{},removeFromText&&(this.text=this.text.replace(check[0].trim(),"\n").trim()),saveKeys)for(const key of Object.keys(check.groups))switch(type){case CoC7ActorImporter.asString:this.parsed[key]=String(check.groups[key]).replace("\n"," ");break;case CoC7ActorImporter.asNumber:value=Number(check.groups[key]),isNaN(value)||(this.parsed[key]=Number(check.groups[key]))}output["-source"]=check[0],output["-index"]=check.index}}return output}processCombat(text){if(0===text.trim().length)return;let weapon,dodge,newline;CONFIG.debug.CoC7Importer&&console.log("combat text",text);let lastPercent=!1,maxLoops=40;do{if(maxLoops--,text=text.trim(),dodge=this.check("weaponDodge",{saveKeys:!1,text}))text=text.replace(dodge["-source"],"\n"),void 0===this.parsed.skills&&(this.parsed.skills=[]),this.parsed.skills.push({name:this.cleanString(dodge.name),value:Number(dodge.percentage),push:!1});else if(weapon=this.check("weapon",{saveKeys:!1,text,requiredGroup:!1===lastPercent&&"percentage"})){text=text.replace(weapon["-source"],"\n");const name=this.cleanString(weapon.name||"");let damage=this.translateRoll(this.cleanString(weapon.damage||""));const isRanged=!!(this.check("handgun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("rifle",{text:name,removeFromText:!1,saveKeys:!1})||this.check("smb",{text:name,removeFromText:!1,saveKeys:!1})||this.check("machineGun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("launched",{text:name,removeFromText:!1,saveKeys:!1}));let found;lastPercent=null===weapon.percentage||void 0===weapon.percentage||Number(weapon.percentage);let ahdb=!1,addb=!1;do{found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.halfdb+")\\s*("+this.keys.fulldb+")?[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found?(ahdb=!0,damage=damage.replace(found[0],"")):(found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.fulldb+")\\s*[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found&&(addb=!0,damage=damage.replace(found[0],"")))}while(found);const damages=damage.split("/"),isShotgun=3===damages.length,data={name,type:"weapon",system:{skill:{id:lastPercent},properties:{},range:{normal:{value:isShotgun?10:0,damage:damages[0]},long:{value:isShotgun?20:0,damage:isShotgun?damages[1]:""},extreme:{value:isShotgun?50:0,damage:isShotgun?damages[2]:""}}}};data.system.properties.shotgun=isShotgun,data.system.properties.rngd=isRanged||isShotgun,data.system.properties.melee=!data.system.properties.rngd,data.system.properties.ahdb=ahdb,data.system.properties.addb=addb,void 0===this.parsed.attacks&&(this.parsed.attacks=[]),this.parsed.attacks.push(data)}else(newline=text.match(/^(.+)\n/))?text=text.replace(newline[0],"\n"):(newline=text.match(/^[^\n]+$/))&&(text="")}while(maxLoops>0&&(weapon||dodge||text));0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedWeaponText")),console.debug("Unexpected weapons:",text))}processSkills(text,key="skills"){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);let skill;breaks.length>1&&(text=breaks[0]);let maxLoops=40;do{maxLoops--,text=text.trim(),skill=this.check("skill",{saveKeys:!1,text}),skill&&(text=text.replace(skill["-source"],"\n"),void 0===this.parsed[key]&&(this.parsed[key]=[]),this.parsed[key].push({name:this.cleanString(skill.name),value:Number(skill.percentage)}))}while(maxLoops>0&&skill);0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedSkillsText")),console.debug("Unexpected skills:",text))}processSpells(text){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);breaks.length>1&&(text=breaks[0]);const spellsArr=text.replace(/([\n\r]+)/g," ").split(/(?<!\([^)]+)[,、]/);this.text=this.text.replace(text.trim(),"\n");for(const spell of spellsArr)void 0===this.parsed.spells&&(this.parsed.spells=[]),this.parsed.spells.push(this.cleanString(spell))}async parseCharacter(text){this.text=String(text).trim().replace(/\u2013|\u2014|\u2212/g,"-").replace(/\u2019/g,"'").replace(/[\udbc0-\udbfe][\udc00-\udfff]/g,"");let header,min=this.text.length,check=this.check("str",{type:CoC7ActorImporter.asNumber})["-index"];if(isNaN(check)||(min=Math.min(min,check)),check=this.check("con",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("siz",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("int",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("pow",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("dex",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("app",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("edu",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("san",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("hp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("mp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),min>0){if(header=this.text.substr(0,min),check=this.check("name",{text:header}),!1===check?this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter"):header=header.replace(check["-source"],"\n"),check=this.check("age",{text:header}),!1!==check&&(header=header.replace(check["-source"],"\n")),!this.check("occupation",{text:header})&&""!==header.trim()){let occupation=header;header.indexOf(".")>-1&&(occupation=header.substr(0,header.indexOf(".")+1)),this.parsed.occupation=occupation.replace(/([\n\r]+)/g," ").trim().replace(/,$/,""),this.text=this.text.replace(occupation.trim(),"\n")}}else this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter");if(void 0!==this.parsed.occupation&&void 0===this.parsed.age){const occupationAge=this.parsed.occupation.match(/^(?<age>\d+),(?<occupation>.+)$/);occupationAge&&(this.parsed.age=occupationAge.groups.age,this.parsed.occupation=occupationAge.groups.occupation.trim())}this.check("db")&&!this.check("dbNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.db})||(this.parsed.db="0"),this.parsed.db=this.translateRoll(this.parsed.db),this.check("build"),this.check("armor")&&!this.check("armorNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.armor})||(this.parsed.armor="0"),this.check("mov",{type:CoC7ActorImporter.asNumber}),this.check("lck",{type:CoC7ActorImporter.asNumber}),this.check("sanLoss"),this.parsed.sanLoss=this.translateRoll(this.parsed.sanLoss),this.check("attacksPerRound")&&this.check("attacksPerRoundNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.attacksPerRound})&&(this.parsed.attacksPerRound="0"),this.text="\n"+this.text;let sections=this.getRegEx("("+this.keys.sectionCombats+")","i");null===this.text.match(sections)&&(sections=this.check("guessStartCombat",{saveKeys:!1,removeFromText:!1}),sections&&(this.text=[this.text.slice(0,sections["-index"]),this.keys.newCombatHeader,this.text.slice(sections["-index"])].join("")));const regExpSections=this.getRegEx(this.regEx.sections,"i");if(sections=this.text.split(regExpSections),null!==sections)for(let i=0,im=sections.length;i<im;i++)null!==sections[i].match(this.getRegEx("("+this.keys.sectionCombats+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processCombat(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSkills+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionLangauges+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1],"languages"),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSpells+")","i"))&&void 0!==sections[i+1]&&(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSpells(sections[i+1]),i++);return this.parsed.gmnotes=this.toHTML(this.text),this.parsed}disableAttribAuto(key,attribValue,check,updateData){const value=Math.max(0,Number(attribValue));return value!==Number(check)&&(updateData[`system.attribs.${key}.auto`]=!1,updateData[`system.attribs.${key}.value`]=value,"build"===key?updateData[`system.attribs.${key}.current`]=value:updateData[`system.attribs.${key}.max`]=value),updateData}async createEntity(characterData,entityType){const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();"npc"!==entityType&&(entityType="creature");const actorData={name:characterData.name,type:entityType,folder:importedCharactersFolder.id,system:characterData.actor},npc=await Actor.create(actorData);await npc.createEmbeddedDocuments("Item",characterData.items,{renderSheet:!1});const updateData={};let value=0;void 0!==characterData.actor.attribs.hp?.value&&this.disableAttribAuto("hp",characterData.actor.attribs.hp.value,npc.hpMax,updateData),void 0!==characterData.actor.attribs.mp?.value&&this.disableAttribAuto("mp",characterData.actor.attribs.mp.value,npc.mpMax,updateData),void 0!==characterData.actor.attribs.mov?.value&&this.disableAttribAuto("mov",characterData.actor.attribs.mov.value,npc.mov,updateData),void 0!==characterData.actor.attribs.build?.value&&this.disableAttribAuto("build",characterData.actor.attribs.build.value,npc.build,updateData),void 0!==characterData.actor.attribs.db?.value&&(value=String(characterData.actor.attribs.db.value).replace(/^\+\s*/,""),value!==String(npc.db)&&(updateData["system.attribs.db.auto"]=!1,updateData["system.attribs.db.value"]=value)),Object.keys(updateData).length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateData:",updateData),await npc.update(updateData));const updateItemData=[];let lastWeaponSkill=null;for(const pair of this.weaponSkills){!1!==pair[0]&&(lastWeaponSkill=npc.items.filter((i=>i.name===pair[0].name&&"skill"===i.type&&Number(i.system.value)===Number(pair[0].system.value))));const weapon=npc.items.filter((i=>i.name===pair[1].name&&"weapon"===i.type&&i.system.range.normal.damage===pair[1].system.range.normal.damage));lastWeaponSkill[0]&&weapon[0]&&updateItemData.push({_id:weapon[0].id,"system.skill.main.id":lastWeaponSkill[0].id,"system.skill.main.name":lastWeaponSkill[0].name})}return updateItemData.length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateItemData:",updateItemData),await npc.updateEmbeddedDocuments("Item",updateItemData)),npc}actorData(pc){const system={characteristics:{},attribs:{},infos:{},special:{},description:{keeper:""},flags:{locked:!1,displayFormula:!1}};for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==pc[key]&&(system.characteristics[key]={value:Number(pc[key])});for(const key of["san","mov","build","armor","lck","hp","mp"])void 0!==pc[key]&&(system.attribs[key]={value:Number(pc[key])});void 0!==pc.db&&(system.attribs.db={value:pc.db});for(const key of["age","occupation"])void 0!==pc[key]&&(system.infos[key]=pc[key]);if(void 0!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split(/[/／]/);system.special.sanLoss={checkPassed:passed,checkFailled:failed}}return void 0!==pc.attacksPerRound&&(system.special.attacksPerRound=Number(pc.attacksPerRound)),system.description.keeper=pc.gmnotes,CONFIG.debug.CoC7Importer&&console.debug("actorData:",system),system}async itemsData(pc){const items=[];if(this.weaponSkills=[],void 0!==pc.attacks)for(const attack of pc.attacks){let skill=!1;!0!==attack.system?.skill?.id&&(skill=await this.weaponSkill(attack),items.push(skill)),attack.system.skill.id=null,items.push(attack),this.weaponSkills.push([foundry.utils.duplicate(skill),attack])}if(void 0!==pc.skills)for(const skill of pc.skills){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,void 0!==skill.push&&(cloned.system.properties.push=skill.push),items.push(foundry.utils.duplicate(cloned))}else{const options={};void 0!==skill.push&&(options.push=skill.push),items.push(CoCActor.emptySkill(skill.name,skill.value,options))}}if(void 0!==pc.languages)for(const skill of pc.languages){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,items.push(foundry.utils.duplicate(cloned))}else items.push(CoCActor.emptySkill(skill.name,skill.value,{img:CoC7Item.iconLanguage,specialization:game.i18n.localize("CoC7.LanguageSpecializationName")}))}if(void 0!==pc.spells)for(const name of pc.spells){const existing=await CoC7Utilities.guessItem("spell",name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();items.push(foundry.utils.duplicate(cloned))}else items.push(CoCActor.emptySpell(name))}return items}async weaponSkill(weapon){let skill=null;const localizedFirearm=game.i18n.localize("CoC7.FirearmSpecializationName");if(this.getRegEx(this.keys.handgun).exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillNameHandgun")+")",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Handgun skill: `,skill)):this.getRegEx(this.keys.rifle).exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillNameRifleShotgun")+")",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillNameRifle")+")",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillNameShotgun")+")",{combat:!0,source:this.itemLocations}))),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Rifle skill: ${skill}`)):this.getRegEx(this.keys.smb).exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillNameSmb")+")",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Submachine Gun skill: ${skill}`)):this.getRegEx(this.keys.machineGun).exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillnameMachineGun")+")",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Machine Gun skill: ${skill}`)):this.getRegEx(this.keys.launched).exec(weapon.name)&&(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillnameLaunch")+")",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Launch skill: ${skill}`)),null!=skill){return skill.clone({system:{value:weapon.system?.skill?.id}})}const firearms=weapon.system?.properties?.rngd,parts=CoC7Item.getNamePartsSpec(weapon.name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),newSkill={type:"skill",name:parts.name,system:{skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0},base:weapon.system?.skill?.id,value:weapon.system?.skill?.id}};return CONFIG.debug.CoC7Importer&&console.debug(`Weapon skill not found for ${weapon.name}, creating a new one`,newSkill),newSkill}needsConversion(npc){let needsConversionResult=!0;for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==npc[key]&&npc[key]>30&&(needsConversionResult=!1);return CONFIG.debug.CoC7Importer&&console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){CONFIG.debug.CoC7Importer&&console.debug("createActor:",inputs);const lang=CoC7ActorImporterRegExp.checkLanguage(inputs.lang);this.keys=CoC7ActorImporterRegExp.getKeys(lang),this.regEx=CoC7ActorImporterRegExp.getRegularExpressions(lang),this.itemLocations=inputs.source,CONFIG.debug.CoC7Importer&&console.debug("Regular Expressions:",lang,this.keys,this.regEx);let character=await this.parseCharacter(inputs.text);CONFIG.debug.CoC7Importer&&console.debug("parseCharacter:",character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));const characterData={name:character.name,actor:this.actorData(character),items:await this.itemsData(character)};if(void 0!==inputs.testMode&&!0===inputs.testMode)return characterData;return await this.createEntity(characterData,inputs.entity)}async convert7E(creature){CONFIG.debug.CoC7Importer&&console.debug("Converting npc",creature);for(const key of["str","con","siz","dex","app","int","pow"])void 0!==creature[key]&&(creature[key]*=5);return void 0!==creature.edu&&(creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99),void 0!==creature.db&&("-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2)),CONFIG.debug.CoC7Importer&&console.debug("convert7E: ",creature),creature}}class CoC7DirectoryPicker extends FilePicker{get title(){return game.i18n.localize("CoC7.PickDirectory")}_onSubmit(event){event.preventDefault();const path=event.target.target.value,activeSource=this.activeSource,bucket=event.target.bucket?event.target.bucket.value:null;this.field.value=CoC7DirectoryPicker.format({activeSource,bucket,path}),this.close()}static DefaultDirectory(val){return null===val?"":String(val)}static format(value){return null!==value.bucket?`[${value.activeSource}:${value.bucket}] ${value.path}`:`[${value.activeSource}] ${value.path}`}static parse(raw){const str=raw??"",matches=str.match(/^\[([^:]+)(:(.+))?\]\s*(.+)?$/u);return matches?{activeSource:matches[1],bucket:matches[3]??"",current:matches[4]}:{activeSource:"data",bucket:null,current:str}}static processHtml(html){$(html).find('input[data-dtype="DefaultDirectory"]').each(((i,el)=>{const input=$(el);if(input.prop("readonly",!0),!input.next().length){const picker=new CoC7DirectoryPicker({field:input[0],...CoC7DirectoryPicker.parse(input.val())}),pickerButton=$('<button type="button" class="file-picker" title="'+game.i18n.localize("CoC7.PickDirectory")+'"><i class="fas fa-file-import fa-fw"></i></button>');CoC7DirectoryPicker.createDefaultDirectory(),pickerButton.on("click",(()=>{picker.render(!0)})),input.parent().append(pickerButton)}}))}activateListeners(html){super.activateListeners(html),$(html).find("ol.files-list").remove(),$(html).find("footer div").remove(),$(html).find("footer button").text(game.i18n.localize("CoC7.PickDirectory"))}static async createDefaultDirectory(){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));try{return await CoC7DirectoryPicker.createDirectory(parsed.activeSource,parsed.current,{bucket:parsed.bucket}),!0}catch(e){if(!e.message.startsWith("EEXIST"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1}}static async uploadToDefaultDirectory(file,filename){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));return(await FilePicker.upload(parsed.activeSource,parsed.current,new File([file],filename,{type:"image/png"}),{bucket:parsed.bucket})).path?parsed.current+"/"+filename:(ui.notifications.error(game.i18n.localize("CoC7.FileUploadError")),!1)}}class CoC7DholeHouseActorImporter{static getBackstory(backstoryJSON){const sections=[["description","Description"],["traits","Traits"],["ideology","Ideology"],["injurues","Injuries","injuries"],["people","People"],["phobias","Phobias"],["locations","Locations"],["tomes","Tomes"],["possessions","Possessions"],["encounters","Encounters"]],backstory={block:[],sections:[]};for(const section of sections)null!==backstoryJSON[section[0]]&&(void 0!==section[2]&&""!==section[2]||(section[2]=section[0]),backstory.block.push(`<h3>${section[1]}</h3>\n<div class="${section[2]}">\n${backstoryJSON[section[0]]}\n</div>`),backstory.sections.push({title:section[1],value:backstoryJSON[section[0]]}));return backstory.block="<h2>Backstory</h2>\n"+backstory.block.join("\n",backstory.block),backstory}static async convertDholeHouseCharacterData(dholeHouseData,options){CONFIG.debug.CoC7Importer&&console.log("Source:",dholeHouseData),dholeHouseData=dholeHouseData.Investigator;const backstories=CoC7DholeHouseActorImporter.getBackstory(dholeHouseData.Backstory??{});return{name:dholeHouseData.PersonalDetails.Name,actor:{characteristics:{str:{value:parseInt(dholeHouseData.Characteristics.STR,10)},con:{value:parseInt(dholeHouseData.Characteristics.CON,10)},siz:{value:parseInt(dholeHouseData.Characteristics.SIZ,10)},dex:{value:parseInt(dholeHouseData.Characteristics.DEX,10)},app:{value:parseInt(dholeHouseData.Characteristics.APP,10)},int:{value:parseInt(dholeHouseData.Characteristics.INT,10)},pow:{value:parseInt(dholeHouseData.Characteristics.POW,10)},edu:{value:parseInt(dholeHouseData.Characteristics.EDU,10)}},attribs:{san:{value:parseInt(dholeHouseData.Characteristics.Sanity,10),max:parseInt(dholeHouseData.Characteristics.SanityMax,10),dailyLimit:Math.floor(dholeHouseData.Characteristics.Sanity/5)},hp:{value:parseInt(dholeHouseData.Characteristics.HitPts,10),max:parseInt(dholeHouseData.Characteristics.HitPtsMax,10)},mp:{value:parseInt(dholeHouseData.Characteristics.MagicPts,10),max:parseInt(dholeHouseData.Characteristics.MagicPtsMax,10)},lck:{value:parseInt(dholeHouseData.Characteristics.Luck,10)},mov:{value:parseInt(dholeHouseData.Characteristics.Move,10),max:parseInt(dholeHouseData.Characteristics.Move,10)},db:{value:dholeHouseData.Characteristics.DamageBonus},build:{value:parseInt(dholeHouseData.Characteristics.Build,10)}},infos:{occupation:dholeHouseData.PersonalDetails.Occupation,age:dholeHouseData.PersonalDetails.Age,sex:dholeHouseData.PersonalDetails.Gender,residence:dholeHouseData.PersonalDetails.Residence,birthplace:dholeHouseData.PersonalDetails.Birthplace},backstory:backstories.block,biography:backstories.sections,description:{keeper:game.i18n.localize("CoC7.DholeHouseActorImporterSource")}},skills:await CoC7DholeHouseActorImporter.extractSkills(dholeHouseData.Skills.Skill??[],options),possesions:await CoC7DholeHouseActorImporter.extractPossessions(dholeHouseData.Possessions?.item??[],options)}}static makeSkillName(name,specialization){return"None"===specialization&&(specialization="Any"),"Language (Other)"===name||"Language (Own)"===name?name="Language":"Operate Heavy Machine"===name?name="Operate Heavy Machinery":"Throw"===name&&""===specialization&&(name="Fighting",specialization="Throw"),{skillName:""===specialization?name:specialization,specialization:""===specialization?"":name,name:name+(""===specialization?"":" ("+specialization+")")}}static async extractSkills(dholeHouseskills,options){const skills=[];for(const skill of dholeHouseskills){if("None"===skill.subskill)continue;const parts=CoC7DholeHouseActorImporter.makeSkillName(skill.name,skill.subskill??""),existing=await CoC7Utilities.guessItem("skill",parts.name,{source:options.source,fallbackAny:!0});let cloned=null;void 0!==existing?(cloned=foundry.utils.duplicate(existing.toObject()),cloned.name=parts.name,cloned.system.skillName=parts.skillName,cloned.system.specialization=parts.specialization,cloned.system.properties?.requiresname&&(cloned.system.properties.requiresname=!1),cloned.system.properties?.picknameonly&&(cloned.system.properties.picknameonly=!1)):(cloned=CoCActor.emptySkill(parts.skillName,parseInt(skill.value??0,10),{specialization:""!==parts.specialization&&parts.specialization}),cloned.system.properties=cloned.system.properties??{},"Fighting"===parts.specialization?(cloned.system.properties.fighting=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Firearms"===parts.specialization?(cloned.system.properties.firearm=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Dodge"===parts.skillName&&(cloned.system.properties.push=!1)),"Any"===cloned.system.skillName&&(cloned.name=cloned.name.replace(" (Any)"," (None)"),cloned.system.skillName="None"),cloned.system.base=parseInt(skill.value??0,10),cloned.system.value=parseInt(skill.value??0,10),cloned.system.flags=cloned.system.flags??{},cloned.system.flags.occupation=!0===skill.occupation||"true"===skill.occupation,skills.push(cloned)}return skills}static findWeaponSkillId(skillName,character){const skills=character.getEmbeddedCollection("Item"),checkName=skillName.replace(/^\((.+)\)$/,"$1");return skills.find((i=>i.system?.skillName===checkName||i.system?.skillName?.indexOf(checkName)>-1))}static async extractPossessions(dholehousePossessions,options){const items=[];Array.isArray(dholehousePossessions)||null==dholehousePossessions||(dholehousePossessions=[dholehousePossessions]);for(const item of dholehousePossessions){const existing=await CoC7Utilities.guessItem("item",item.description,{source:options.source});let cloned=null;cloned=void 0!==existing?foundry.utils.duplicate(existing.toObject()):{name:item.description,type:"item"},items.push(cloned)}return items}static async extractWeapons(dholehouseWeapons,character,options){const weapons=[];Array.isArray(dholehouseWeapons)||(dholehouseWeapons=[dholehouseWeapons]);for(const weapon of dholehouseWeapons){const skill=CoC7DholeHouseActorImporter.findWeaponSkillId(weapon.skillname,character),damage=weapon.damage.replace(/\+DB/i,""),addb=damage!==weapon.damage,existing=await CoC7Utilities.guessItem("weapon",weapon.name,{source:options.source});let cloned=null;void 0!==existing?(cloned=foundry.utils.duplicate(existing.toObject()),cloned.system.skill.main.name=skill?.name??"",cloned.system.skill.main.id=skill?.id??"",cloned.system.range=cloned.system.range??{},cloned.system.range.normal=cloned.system.range.normal??{},cloned.system.range.normal.damage=damage,cloned.system.ammo=weapon.ammo,cloned.system.malfunction=weapon.malf,cloned.system.properties=cloned.system.properties??{},cloned.system.properties.melee=skill?.system.properties?.fighting??!1,cloned.system.properties.rngd=skill?.system.properties?.firearm??!1,cloned.system.properties.addb=addb):cloned={name:weapon.name,type:"weapon",system:{skill:{main:{name:skill?.name??"",id:skill?.id??""}},range:{normal:{damage}},ammo:weapon.ammo,malfunction:weapon.malf,properties:{melee:skill?.system.properties?.fighting??!1,rngd:skill?.system.properties?.firearm??!1,addb}}},weapons.push(cloned)}return weapons}static async savePortrait(base64Portrait,fileName){const base64Response=await fetch("data:image/png;base64,"+base64Portrait),imageBlob=await base64Response.blob();return CoC7DirectoryPicker.uploadToDefaultDirectory(imageBlob,fileName)}static async createNPCFromDholeHouse(dholeHouseCharacterData,options){if(!game.user?.can("FILES_UPLOAD"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1;const characterData=await CoC7DholeHouseActorImporter.convertDholeHouseCharacterData(dholeHouseCharacterData,options);CONFIG.debug.CoC7Importer&&console.log("Character Data:",characterData);const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();if(!CoC7DirectoryPicker.createDefaultDirectory())return!1;const actorData={name:characterData.name,type:"character",folder:importedCharactersFolder.id,system:characterData.actor},npc=await Actor.create(actorData);if(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait?.length>10){const fileName="avatar-"+npc.id+".png",portrait=await CoC7DholeHouseActorImporter.savePortrait(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait,fileName);!1!==portrait&&npc.update({img:portrait})}CONFIG.debug.CoC7Importer&&console.log("Items: ",characterData.items),await npc.createEmbeddedDocuments("Item",characterData.skills,{renderSheet:!1}),await npc.createEmbeddedDocuments("Item",characterData.possesions,{renderSheet:!1});const weapons=await CoC7DholeHouseActorImporter.extractWeapons(dholeHouseCharacterData.Investigator.Weapons?.weapon??[],npc,options);return CONFIG.debug.CoC7Importer&&console.log("Weapons: ",weapons),await npc.createEmbeddedDocuments("Item",weapons,{renderSheet:!1}),npc}}class CoC7ActorImporterDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-importer"],title:game.i18n.localize("CoC7.ActorImporter"),template:"systems/CoC7/templates/apps/actor-importer.html",closeOnSubmit:!1,width:600,height:"auto"})}async getData(){const data=await super.getData();return data.importType=data.object.importType,data.convert6E=data.object.convert6E,data.source=data.object.source,data.characterData=data.object.characterData,data.canUpload=game.user?.can("FILES_UPLOAD"),["npc","creature"].includes(data.importType)&&(data.languages=CoC7ActorImporterRegExp.getTranslations(),data.language=CoC7ActorImporterRegExp.checkLanguage(data.object.language),data.placeholder=CoC7ActorImporterRegExp.getExampleText(data.language)),data}activateListeners(html){super.activateListeners(html),html.find("#dholehouse-character-preview").hide(),html.find("#coc-entity-type,#coc-entity-lang").change(this._onChangeSubmit.bind(this)),html.find("#dholehouse-json-file-picker").change(this._onJSONFileSelected.bind(this)),html.find("#coc-pasted-character-data").on("keyup",(function(e){const charactersTooExtended=$(this).val().match(/[\udbc0-\udbfe][\udc00-\udfff]/),prompt=$("#coc-prompt");prompt.data("extended")&&charactersTooExtended?prompt.html(game.i18n.localize("CoC7.TextFieldInvalidCharacters")).addClass("error"):prompt.html(prompt.data("text")).removeClass("error")})).trigger("keyup"),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("form").submit((e=>{e.preventDefault()}))}static getInputs(form){const inputs={};return inputs.entity=form.find("#coc-entity-type").val().trim(),CONFIG.debug.CoC7Importer&&console.debug("entity type:",inputs.entity),form.find("#coc-convert-6E").length>0&&(inputs.convertFrom6E=form.find("#coc-convert-6E").val().trim()),form.find("#coc-entity-lang").length>0&&(inputs.lang=CoC7ActorImporterRegExp.checkLanguage(form.find("#coc-entity-lang").val().trim())),form.find("#source").length>0&&(inputs.source=form.find("#source").val().trim()),form.find("#coc-pasted-character-data").length>0&&(inputs.text=form.find("#coc-pasted-character-data").val().trim()),CONFIG.debug.CoC7Importer&&console.debug("received text","##"+inputs.text+"##"),inputs}_onJSONFileSelected(event){const jsonFileInput=document.getElementById("dholehouse-json-file-picker"),portraitImage=document.getElementById("dholehouse-character-portrait"),characterName=document.getElementById("dholehouse-character-name"),preview=document.getElementById("dholehouse-character-preview"),file=jsonFileInput.files[0],dialog=this,fileReader=new FileReader;fileReader.onload=function(e){try{dialog.characterJSON=JSON.parse(fileReader.result)}catch(e){return $("#coc-prompt").html(game.i18n.localize("CoC7.TextFieldInvalidJSON")).addClass("error"),void event.preventDefault()}const personalDetails=dialog.characterJSON?.Investigator?.PersonalDetails;personalDetails?(characterName.textContent=personalDetails.Name,portraitImage.src="data:image/png;base64,"+personalDetails.Portrait,preview.style.display="block",$(".dialog.actor-importer").height("auto")):ui.notifications.error(game.i18n.localize("CoC7.DholeHouseInvalidActor"))},fileReader.readAsText(file)}_onChangeSubmit(event){this._onSubmit(event)}async _onClickSubmit(event){const id=event.currentTarget.dataset.button;if("no"===id)this.close();else if("getExampleNow"===id){const content=CoC7ActorImporterRegExp.getExampleText(this.object.language);CoC7Utilities.copyToClipboard(content).then((()=>ui.notifications.info(game.i18n.localize("CoC7.Copied"))))}else if("import"===id){const app=$(event.currentTarget).closest("div.dialog.actor-importer");app.hide();const form=$(event.currentTarget).closest("form"),inputs=CoC7ActorImporterDialog.getInputs(form);if("dholehouse"===inputs.entity&&this.characterJSON){const character=await CoC7DholeHouseActorImporter.createNPCFromDholeHouse(this.characterJSON,{source:inputs.source});!1!==character?(CONFIG.debug.CoC7Importer&&console.debug("character:",character),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:game.i18n.localize("CoC7.Entities.Character"),actorName:character.name})),await character.sheet.render(!0),this.close()):app.show()}else inputs.text&&""!==inputs.text?(CoC7ActorImporterDialog.importActor(inputs),this.close()):app.show()}}async _updateObject(event,formData){this.object.importType=formData["coc-entity-type"],this.object.characterData=formData["coc-pasted-character-data"]?.trim(),void 0!==formData["coc-convert-6E"]&&(this.object.convert6E=formData["coc-convert-6E"]),void 0!==formData["coc-entity-lang"]&&(this.object.language=formData["coc-entity-lang"]),void 0!==formData.source&&(this.object.source=formData.source),this.render(!0)}static async importActor(inputs){"."!==inputs.text[inputs.text.length]&&(inputs.text+=".");const actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);CONFIG.debug.CoC7Importer&&console.debug("createdActor:",createdActor),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:createdActor.type?.toUpperCase(),actorName:createdActor.name})),await createdActor.sheet.render(!0)}static async create(options={}){options.importType=options.importType??"npc",options.language=options.language??CoC7ActorImporterRegExp.checkLanguage(null),options.convert6E=options.language??"coc-guess",options.source=options.source??"iwms",options.characterData=options.characterData??"",new CoC7ActorImporterDialog(options).render(!0)}}Hooks.once("ready",(()=>{game.modules.get("CoC7-Importer-Tests")?.active&&(window.CoC7ActorImporter=CoC7ActorImporter)}));class DropCoCID extends Dialog{static processForm(response,element,resolve){element.find("input").is(":checked")&&game.settings.set("CoC7","dropCoCID",response?"Y":"N"),resolve(response)}static processItem(response,item){return response&&item.flags?.CoC7?.cocidFlag?.id?item.flags.CoC7.cocidFlag.id:foundry.utils.duplicate(item)}static async create(){switch(game.settings.get("CoC7","dropCoCID")){case"":return new Promise((resolve=>{new DropCoCID({title:game.i18n.format("CoC7.Settings.DropCoCID.Name"),content:"<p>"+game.i18n.format("CoC7.Settings.DropCoCID.Dialog")+'</p><p><input type="checkbox" id="rememberthis" style="vertical-align: sub;"><label for="rememberthis">'+game.i18n.format("CoC7.Settings.DropCoCID.Remember")+"</label></p>",classes:["coc7","app","dialog"],buttons:{yes:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("Yes"),callback:element=>{DropCoCID.processForm(!0,element,resolve)}},no:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("No"),callback:element=>{DropCoCID.processForm(!1,element,resolve)}}}}).render(!0)}));case"Y":return!0;case"N":return!1}}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[],groups=this.item.system.groups?foundry.utils.duplicate(this.item.system.groups):[];for(const item of dataList)if(item&&item.system&&[type].includes(item.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;if(groups[index].skills.find((el=>el.name===item.name)))continue}0===useCoCID&&(useCoCID=await DropCoCID.create()),groups[index].skills=groups[index].skills.concat([DropCoCID.processItem(useCoCID,item)])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.name));-1!==index&&groups[i].skills.splice(index,1)}}0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))}await this.item.update({"system.groups":groups}),await this.item.update({[`system.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.system.groups;await this.item.update({"system.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=foundry.utils.duplicate(this.item.system.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"system.groups":groups})}}async _onItemSummary(event,collectionName="items"){event.preventDefault();const obj=$(event.currentTarget),li=obj.parents(".item"),group=obj.closest(".group");let item;if(item=group.length?this.item.system.groups[group.data("group")][collectionName].find((s=>s._id===li.data("item-id"))):this.item.system[collectionName].find((s=>s._id===li.data("item-id"))),!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}async _onGroupItemDelete(event){const item=$(event.currentTarget).closest(".item"),group=Number(item.closest(".item-list.group").data("group")),groups=foundry.utils.duplicate(this.item.system.groups);if(void 0!==groups[group]){const itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=groups[group].skills.findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));itemIndex>-1&&(groups[group].skills.splice(itemIndex,1),await this.item.update({"system.groups":groups}))}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/occupation.html",width:525,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey);for(let index=0,len=sheetData.data.system.groups.length;index<len;index++)sheetData.data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.groups[index].skills}),sheetData.data.system.groups[index].isEmpty=0===sheetData.data.system.groups[index].skills.length,sheetData.data.system.groups[index].skills.sort(CoC7Utilities.sortByNameKey);sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(sheetData.data.system.occupationSkillPoints),sheetData.itemProperties=[];for(const[key,value]of Object.entries(sheetData.data.system.type))value&&sheetData.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}static occupationPointsString(occupationSkillPoints){const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}let occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return mandatory.length&&(occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(occupationPointsString+=optionnal.join(orString)),occupationPointsString}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;if(system.groups){formData["system.groups"]=Object.values(system.groups||[]);for(let index=0;index<this.item.system.groups.length;index++)formData[`system.groups.${index}.skills`]=foundry.utils.duplicate(this.item.system.groups[index].skills)}super._updateObject(event,formData)}}class CoC7InvestigatorWizard extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"investigator-wizard-application",classes:["coc7","dialog","investigator-wizard"],title:game.i18n.localize("CoC7.InvestigatorWizard.Title"),template:"systems/CoC7/templates/apps/investigator-wizard.hbs",width:520,height:600,closeOnSubmit:!1,scrollY:[".scrollsection"],dragDrop:[{dragSelector:".draggable",dropSelector:null}]})}get pageList(){return{PAGE_NONE:-1,PAGE_INTRODUCTION:0,PAGE_CONFIGURATION:1,PAGE_SETUPS:2,PAGE_ARCHETYPES:3,PAGE_CHARACTISTICS:4,PAGE_ATTRIBUTES:5,PAGE_VIEW_ATTRIBUTES:6,PAGE_OCCUPATIONS:7,PAGE_OCCUPATION_SKILLS:8,PAGE_ARCHETYPE_SKILLS:9,PAGE_POINTS_SKILLS:10,PAGE_INVESTIGATOR:11,PAGE_BACKSTORY:12,PAGE_CREATE:13}}get characteristicsMethods(){return{METHOD_DEFAULT:1,METHOD_ROLL:1,METHOD_POINTS:2,METHOD_VALUES:3,METHOD_CHOOSE:4}}get cocidCreditRating(){return"i.skill.credit-rating"}get cocidLanguageOwn(){return"i.skill.language-own"}get pageOrder(){const pages=this.pageList;let pageOrder=[pages.PAGE_INTRODUCTION];return game.user.isGM&&pageOrder.push(pages.PAGE_CONFIGURATION),""===this.object.defaultSetup&&pageOrder.push(pages.PAGE_SETUPS),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPES),pageOrder.push(pages.PAGE_CHARACTISTICS),game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||pageOrder.push(pages.PAGE_ATTRIBUTES),pageOrder=pageOrder.concat([pages.PAGE_VIEW_ATTRIBUTES,pages.PAGE_OCCUPATIONS,pages.PAGE_OCCUPATION_SKILLS]),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPE_SKILLS),pageOrder=pageOrder.concat([pages.PAGE_POINTS_SKILLS,pages.PAGE_INVESTIGATOR,pages.PAGE_BACKSTORY,pages.PAGE_CREATE]),pageOrder}static async loadCacheItemByCoCID(){return new Promise(((resolve,reject)=>{game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\./,type:"i",showLoading:!0}).then((items=>{const list={};for(const item of items)list[item.flags.CoC7.cocidFlag.id]=item;resolve(list)}))}))}async filterCacheItemByCoCID(regexp){return Object.entries(await this.object.cacheCoCID).filter((entry=>entry[0].match(regexp))).map((entry=>entry[1]))}async getCacheItemByCoCID(id){return(await this.object.cacheCoCID)[id]??!1}async expandItemArray(itemList){const items=itemList.filter((it=>"string"!=typeof it)),cocids=itemList.filter((it=>"string"==typeof it));if(cocids.length){const source=await this.object.cacheCoCID,missing=[];for(const cocid of cocids)void 0!==source[cocid]?items.push(source[cocid]):missing.push(cocid);if(missing.length){const era=game.i18n.format(COC7.eras[this.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:this.object.defaultEra});ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:missing.join(", "),lang:game.i18n.lang,era}))}}return items}getAgeAdjustments(){for(const key in this.object.setupModifiers)this.object.setupModifiers[key]=0;if(!game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")){if(this.object.age>=40){const key=Math.floor(this.object.age/10);this.object.requiresAgeAdjustments={edu:{total:key-2>4?4:key-2,rolled:!1},deduct:{total:key>1?5*Math.pow(2,key-4):0,from:["str","con","dex"],values:{}},reduce:{total:5*(key-3),from:"app"}}}else this.object.age>=20?this.object.requiresAgeAdjustments={edu:{total:1,rolled:!1}}:this.object.age>=15&&(this.object.requiresAgeAdjustments={deduct:{total:5,from:["str","siz"],values:{}},reduce:{total:5,from:"edu"},luck:!0});void 0!==this.object.requiresAgeAdjustments.reduce&&(this.object.setupModifiers[this.object.requiresAgeAdjustments.reduce.from]=-this.object.requiresAgeAdjustments.reduce.total)}}async getData(){const sheetData=await super.getData();let setup,archetype,occupation;sheetData.isKeeper=game.user.isGM,sheetData.pages=this.pageList,sheetData.canNext=!1,sheetData.createButton=!1;let showMonetary=!1;switch(sheetData.object.step){case sheetData.pages.PAGE_INTRODUCTION:sheetData.era=game.i18n.format(COC7.eras[sheetData.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:sheetData.object.defaultEra}),sheetData.canNext=!0;break;case sheetData.pages.PAGE_CONFIGURATION:if(game.user.isGM){sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.defaultSetup)),void 0===setup?(sheetData.object.defaultSetup="",sheetData.object.setup=""):sheetData.description=await TextEditor.enrichHTML(setup.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.ownership={[CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE]:"OWNERSHIP.NONE",[CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED]:"OWNERSHIP.LIMITED",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER]:"OWNERSHIP.OBSERVER",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER]:"OWNERSHIP.OWNER"},sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value)});sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_DEFAULT,sheetData.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.chooseRolledValues?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_CHOOSE:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.hasArchetypes=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.canNext=!0}break;case sheetData.pages.PAGE_SETUPS:""===sheetData.object.defaultSetup&&(sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.setups.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.setup&&(setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.setup)),void 0!==setup&&(sheetData.description=await TextEditor.enrichHTML(setup.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.canNext=!0)));break;case sheetData.pages.PAGE_ARCHETYPES:if(sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),0===sheetData.archetypes.length)sheetData.canNext=!0;else if(sheetData.archetypes.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.archetype&&(archetype=sheetData.archetypes.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.archetype)),void 0!==archetype)){sheetData.description=await TextEditor.enrichHTML(archetype.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.bonusPoints=archetype.system.bonusPoints;const coreCharacteristics=[];for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&coreCharacteristics.push(coreCharacteristic);0===coreCharacteristics.length?this.object.coreCharacteristic="":1===coreCharacteristics.length&&(this.object.coreCharacteristic=coreCharacteristics[0]),sheetData.coreCharacteristic=coreCharacteristics.map((c=>c.toLocaleUpperCase())).join(" "+game.i18n.localize("CoC7.Or")+" ");const skills=[];archetype.system.skills=await this.expandItemArray(archetype.system.skills);for(const skill of archetype.system.skills)skills.push(skill.name);sheetData.skills=skills.join(", "),sheetData.suggestedOccupations=await TextEditor.enrichHTML(archetype.system.suggestedOccupations,{async:!0,secrets:game.user.isGM}),sheetData.suggestedTraits=await TextEditor.enrichHTML(archetype.system.suggestedTraits,{async:!0,secrets:game.user.isGM}),sheetData.canNext=!0}break;case sheetData.pages.PAGE_CHARACTISTICS:if(sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_ROLL,""!==sheetData.object.setup&&(setup=await this.getCacheItemByCoCID(this.object.setup),void 0!==setup)){if(setup.system.characteristics.points.enabled||this.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.chooseRolledValues?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_CHOOSE:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData.setup={total:0,points:setup.system.characteristics.points.value,characteristics:[{key:"str",roll:setup.system.characteristics.rolls.str,label:"CHARAC.Strength"},{key:"con",roll:setup.system.characteristics.rolls.con,label:"CHARAC.Constitution"},{key:"siz",roll:setup.system.characteristics.rolls.siz,label:"CHARAC.Size"},{key:"dex",roll:setup.system.characteristics.rolls.dex,label:"CHARAC.Dexterity"},{key:"app",roll:setup.system.characteristics.rolls.app,label:"CHARAC.Appearance"},{key:"int",roll:setup.system.characteristics.rolls.int,label:"CHARAC.Intelligence"},{key:"pow",roll:setup.system.characteristics.rolls.pow,label:"CHARAC.Power"},{key:"edu",roll:setup.system.characteristics.rolls.edu,label:"CHARAC.Education"}],luck:{roll:setup.system.characteristics.rolls.luck,label:"CoC7.Luck"}},sheetData.coreCharacteristics=[],""!==sheetData.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype),void 0!==archetype)){for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&sheetData.coreCharacteristics.push({key:coreCharacteristic,name:game.i18n.format(sheetData.setup.characteristics.find((c=>c.key===coreCharacteristic))?.label??"Unknown")});sheetData.coreCharacteristics.sort(CoC7Utilities.sortByNameKey),""!==this.object.coreCharacteristic&&archetype.system.coreCharacteristicsFormula.enabled&&(sheetData.setup.characteristics.find((c=>c.key===this.object.coreCharacteristic)).roll=archetype.system.coreCharacteristicsFormula.value)}let empties=!1;for(const key in sheetData.object.setupPoints)""!==sheetData.object.setupPoints[key]?"luck"!==key&&(sheetData.setup.total+=parseInt(sheetData.object.setupPoints[key],10)):empties=!0;this.object.coreCharacteristic&&(sheetData.coreCharacteristic=this.object.coreCharacteristic.toLocaleUpperCase()),!empties&&this.object.age>=15&&([sheetData.characteristicsMethods.METHOD_ROLL,sheetData.characteristicsMethods.METHOD_VALUES,sheetData.characteristicsMethods.METHOD_CHOOSE].includes(sheetData.characteristicsMethod)||sheetData.setup.total.toString()===sheetData.setup.points.toString())&&(sheetData.canNext=!0)}break;case sheetData.pages.PAGE_ATTRIBUTES:sheetData.pulpRuleIgnoreAgePenalties=game.settings.get("CoC7","pulpRuleIgnoreAgePenalties"),sheetData.canNext=!0,sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),min:1-parseInt(this.object.setupPoints[key],10),label:CoC7Utilities.getCharacteristicNames(key).label};if(void 0===this.object.requiresAgeAdjustments.edu||this.object.requiresAgeAdjustments.edu.rolled||(sheetData.canNext=!1),void 0!==this.object.requiresAgeAdjustments.deduct){sheetData.deductTotal=0;for(const key of this.object.requiresAgeAdjustments.deduct.from)sheetData.deductTotal=sheetData.deductTotal-parseInt(this.object.setupModifiers[key],10);sheetData.deductFrom=this.object.requiresAgeAdjustments.deduct.from.map((n=>game.i18n.localize("CHARAC."+n.toUpperCase()))).join(", ").replace(/(, )([^,]+)$/,"$1"+game.i18n.localize("CoC7.Or")+" $2").replace(/^([^,]+),([^,]+)$/,"$1$2"),sheetData.deductTotal!==this.object.requiresAgeAdjustments.deduct.total&&(sheetData.canNext=!1)}void 0!==this.object.requiresAgeAdjustments.reduce&&(sheetData.reduceFrom=game.i18n.localize("CHARAC."+this.object.requiresAgeAdjustments.reduce.from.toUpperCase())),void 0!==this.object.requiresAgeAdjustments.luck&&(sheetData.luckValue=Math.max(this.object.setupPoints.luck,this.object.setupModifiers.luck),0===this.object.setupModifiers.luck&&(sheetData.canNext=!1));break;case sheetData.pages.PAGE_VIEW_ATTRIBUTES:sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),prefix:"",suffix:"%",label:CoC7Utilities.getCharacteristicNames(key).label};sheetData.points.db={value:CoCActor.dbFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.BonusDamage"},(isNaN(sheetData.points.db.value)||Number(sheetData.points.db.value)>=0)&&(sheetData.points.db.prefix="+"),sheetData.points.build={value:CoCActor.buildFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.Build"},Number(sheetData.points.build.value)>=0&&(sheetData.points.build.prefix="+"),sheetData.points.hp={value:CoCActor.hpFromCharacteristics(sheetData.points,"character"),prefix:"",suffix:"",label:"CoC7.HitPoints"},sheetData.points.hp.prefix=sheetData.points.hp.value+"/",sheetData.points.mp={value:CoCActor.mpFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.MagicPoints"},sheetData.points.mp.prefix=sheetData.points.mp.value+"/",sheetData.points.san={value:sheetData.points.pow.value,prefix:"",suffix:"/99",label:"CoC7.Sanity"},sheetData.points.mov={value:CoCActor.movFromCharacteristics(sheetData.points,"character",this.object.age),prefix:"",suffix:"",label:"CoC7.Movement"},sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATIONS:if(sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.occupations.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.occupation&&(occupation=sheetData.occupations.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.occupation)),void 0!==occupation)){sheetData.description=await TextEditor.enrichHTML(occupation.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(occupation.system.occupationSkillPoints),sheetData.creditRating=occupation.system.creditRating,sheetData.personal=occupation.system.personal,sheetData.personalText=occupation.system.personalText,sheetData.skills=await this.expandItemArray(occupation.system.skills),sheetData.groups={};for(let index=0;index<occupation.system.groups.length;index++)sheetData.groups[index]={options:occupation.system.groups[index].options,skills:[]},sheetData.groups[index].skills=await this.expandItemArray(occupation.system.groups[index].skills);sheetData.points=0;const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.points+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.points+=Math.max(...options)),sheetData.canNext=!0}break;case sheetData.pages.PAGE_INVESTIGATOR:sheetData.language=void 0!==this.object.skillItems[this.cocidLanguageOwn],sheetData.language?sheetData.languageName=this.object.skillItems[this.cocidLanguageOwn].item.name:sheetData.languageName="",sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATION_SKILLS:sheetData.default=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isOccupationDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.default++):!1!==sheetData.object.skillItems[key].rows[index].inOccupationGroup?(group=sheetData.object.skillItems[key].rows[index].inOccupationGroup,isMultiple&&(isPickable=!0)):group="other";let toggle=sheetData.object.skillItems[key].rows[index].occupationToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].archetypeToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:sheetData.object.skillItems[key].rows[index].isCreditRating,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.max=(parseInt(sheetData.default,10)||0)+(parseInt(sheetData.object.personal,10)||0)+Object.values(sheetData.object.occupationGroups).reduce(((s,v)=>s+(parseInt(v,10)||0)),0),sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_ARCHETYPE_SKILLS:sheetData.max=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isArchetypeDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.max++):group="other";let toggle=sheetData.object.skillItems[key].rows[index].archetypeToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].occupationToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:!1,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_POINTS_SKILLS:if(sheetData.skills=[],sheetData.creditRatingOkay=!(this.object.creditRating.max>0),sheetData.personal={count:0,total:2*(parseInt(this.object.setupPoints.int,10)+parseInt(this.object.setupModifiers.int,10)),remaining:0},sheetData.occupation={count:0,total:0,remaining:0},sheetData.archetype={count:0,total:0,remaining:0},""!==sheetData.object.setup&&(showMonetary=(await this.getCacheItemByCoCID(sheetData.object.setup)).system.monetary.values.length>0),""!==sheetData.object.occupation&&(occupation=await this.getCacheItemByCoCID(this.object.occupation),occupation)){const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.occupation.total+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.occupation.total+=Math.max(...options))}if(""!==this.object.archetype){const archetype=await game.system.api.cocid.fromCoCID(this.object.archetype);1===archetype.length&&(sheetData.archetype.total=archetype[0].system.bonusPoints)}if(Object.keys(this.object.skillItems).length>0){for(const key in this.object.skillItems){const skill=this.object.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=foundry.utils.duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=foundry.utils.duplicate(row.selected));let base=item.system.base;if(!Number.isNumeric(base))for(const key in this.object.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new AverageRoll("("+base+")")[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({minimize:!0,maximize:!0}).total));let totalPoints=parseInt(base,10);if(Number(row.personalPoints)>0){const num=Number(row.personalPoints);sheetData.personal.count+=num,totalPoints+=num}if(Number(row.occupationPoints)>0){const num=Number(row.occupationPoints);sheetData.occupation.count+=num,totalPoints+=num}if(Number(row.archetypePoints)>0){const num=Number(row.archetypePoints);sheetData.archetype.count+=num,totalPoints+=num}if(Number(row.experiencePoints)>0){totalPoints+=Number(row.experiencePoints)}let name=item.name;key===this.cocidLanguageOwn?name=item.system.specialization+" ("+item.system.skillName+")":skill.flags.isCreditRating?(name=name+" ["+this.object.creditRating.min+" - "+this.object.creditRating.max+"]",totalPoints>=this.object.creditRating.min&&totalPoints<=this.object.creditRating.max&&(sheetData.creditRatingOkay=!0)):"string"==typeof row.selected&&(name=item.system.specialization+" ("+row.selected+")"),sheetData.skills.push({key,index,name,isOccupation:row.occupationToggle,isArchetype:row.archetypeToggle,base,personalPoints:row.personalPoints,occupationPoints:row.occupationPoints,archetypePoints:row.archetypePoints,experiencePoints:row.experiencePoints,totalPoints,showCreditRating:showMonetary&&key===this.cocidCreditRating})}}}sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData.creditRatingOkay&&(sheetData.canNext=!0)}sheetData.personal.remaining=sheetData.personal.total-sheetData.personal.count,sheetData.occupation.remaining=sheetData.occupation.total-sheetData.occupation.count,sheetData.archetype.remaining=sheetData.archetype.total-sheetData.archetype.count;break;case sheetData.pages.PAGE_BACKSTORY:{const allBackstories=await this.object.cacheBackstories;sheetData.backstories={};for(let index=0;index<this.object.bioSections.length;index++)sheetData.backstories[index]={index,name:this.object.bioSections[index].name,rolls:game.system.api.cocid.findCocIdInList(this.object.bioSections[index].key,allBackstories).length?this.object.bioSections[index].key:"",value:this.object.bioSections[index].value}}sheetData.canNext=!0,sheetData.createButton=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;break;case sheetData.pages.PAGE_CREATE:sheetData.canNext=!0,sheetData.createButton=!0}return sheetData}activateListeners(html){super.activateListeners(html),html.keypress((e=>/textarea/i.test((e.target||e.srcElement).tagName)||13!==(e.keyCode||e.which||e.charCode||0))),html.find(".submit_on_change").change(this._onChangeSubmit.bind(this)),html.find(".roll-characteristic").click(this._onRollCharacteristic.bind(this)),html.find(".increase-10-characteristic").click(this._onIncreaseCharacteristic10.bind(this)),html.find(".increase-characteristic").click(this._onIncreaseCharacteristic.bind(this)),html.find(".decrease-characteristic").click(this._onDecreaseCharacteristic.bind(this)),html.find(".decrease-10-characteristic").click(this._onDecreaseCharacteristic10.bind(this)),html.find("button.roll_all").click(this._onRollAll.bind(this)),html.find("button.roll_choose").click(this._onRollChoose.bind(this)),html.find("button.roll_edu").click(this._onRollEdu.bind(this)),html.find("button.roll_luck").click(this._onRollLuck.bind(this)),html.find(".item input.submit_on_blur").blur(this._onChangeSubmit.bind(this)),html.find(".item input.save-characteristic-on-blur").blur(this._onChangeSaveCharacteristic.bind(this)),html.find(".item.toggleable").click(this._onToggleSkill.bind(this)),html.find(".item.clickable").click(this._onClickPickSkill.bind(this)),html.find(".skills-list input").click(this._onClickSkillSpecial.bind(this)),html.find(".skills-list .remove-skill").click(this._onClickRemoveSkill.bind(this)),html.find(".item input.skill-adjustment").blur(this._onChangeSkillPoints.bind(this)),html.find("textarea.backstory-text").keyup(this._onChangeBackstoryText.bind(this)),html.find("button.backstory-roll").click(this._onRollBackstory.bind(this)),html.find("button.backstory-reset").click(this._onResetBackstory.bind(this))}async rollMessage(rolls){if(rolls.length){const html=[];for(const roll of rolls)html.push(await renderTemplate(Roll.CHAT_TEMPLATE,{formula:(CoC7Utilities.getCharacteristicNames(roll[0])?.label??roll[0])+": "+roll[1],tooltip:await roll[2].getTooltip(),total:roll[2].total}));ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html.join("<div>&nbsp;</div>"),whisper:ChatMessage.getWhisperRecipients("GM")})}}addItemToList(item,{isOccupationDefault=!1,inOccupationGroup=!1,occupationToggle=!1,isArchetypeDefault=!1,archetypeToggle=!1,isCreditRating=!1}={}){const key=item.flags.CoC7?.cocidFlag?.id??item.name;if("skill"!==item.type)return void this.object.investigatorItems.push(item);const isMultiple=!(!item.system.properties.special||!(item.system.properties.requiresname&&!item.system.properties.onlyone||item.system.properties.picknameonly||item.name===game.i18n.format("CoC7.AnySpecName"))),flags={isOccupationDefault,inOccupationGroup,isArchetypeDefault,isCreditRating,occupationToggle,archetypeToggle},rows={occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected:!1};if(void 0===this.object.skillItems[key])this.object.skillItems[key]={item,flags:foundry.utils.mergeObject(flags,{isMultiple},{inplace:!1}),rows:[]},isMultiple&&!1===isOccupationDefault&&!1===inOccupationGroup&&!1===isArchetypeDefault||this.object.skillItems[key].rows.push(foundry.utils.mergeObject(flags,rows,{inplace:!1}));else{if(isMultiple)this.object.skillItems[key].rows.push(foundry.utils.mergeObject(flags,rows,{inplace:!1}));else for(const flag in flags)this.object.skillItems[key].rows[0][flag]=this.object.skillItems[key].rows[0][flag]||flags[flag];for(const flag in flags)this.object.skillItems[key].flags[flag]=this.object.skillItems[key].flags[flag]||flags[flag]}!isMultiple&&flags.isCreditRating&&(this.object.skillItems[key].rows[0].occupationPoints=this.object.creditRating.min)}clearSetupPoints(){for(const key in this.object.setupPoints)this.object.setupPoints[key]="";this.object.rolledValues=[]}async setSkillLists(){this.object.skillItems={},this.object.occupationGroups={},this.object.investigatorItems=[],this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues);const setup=await this.getCacheItemByCoCID(this.object.setup),occupation=await this.getCacheItemByCoCID(this.object.occupation);let archetype=!1;if(""!==this.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype)),setup&&occupation&&(!game.settings.get("CoC7","pulpRuleArchetype")||archetype)){this.object.bioSections=[];for(let index=0;index<setup.system.bioSections.length;index++)this.object.bioSections.push({name:setup.system.bioSections[index],value:"",key:"rt..backstory-"+CoC7Utilities.toKebabCase(setup.system.bioSections[index])});this.object.personal=occupation.system.personal,this.object.personalText=occupation.system.personalText,this.object.creditRating=occupation.system.creditRating;let items=[];items=await this.expandItemArray(setup.system.items);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index]);items=await this.expandItemArray(occupation.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isOccupationDefault:!0,occupationToggle:!0});for(let group=0,gm=occupation.system.groups.length;group<gm;group++){this.object.occupationGroups[group]=occupation.system.groups[group].options,items=await this.expandItemArray(occupation.system.groups[group].skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{inOccupationGroup:group})}if(archetype){items=await this.expandItemArray(archetype.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isArchetypeDefault:!0,archetypeToggle:!0})}if(Number(this.object.creditRating.max)>0){const nameCreditRating=game.i18n.format("CoC7.CoCIDFlag.keys."+this.cocidCreditRating),flags={isOccupationDefault:!0,occupationToggle:!0,isCreditRating:!0};if(void 0!==this.object.skillItems[this.cocidCreditRating])this.addItemToList(this.object.skillItems[this.cocidCreditRating].item,flags);else if(void 0!==this.object.skillItems[nameCreditRating])this.addItemToList(this.object.skillItems[nameCreditRating].item,flags);else{const skill=await game.system.api.cocid.fromCoCID(this.cocidCreditRating);skill.length&&this.addItemToList(skill[0],flags)}}}}_onDragStart(event){if(event.currentTarget.dataset.characteristicKey){const dragData={type:"investigatorCharacteristic",key:event.currentTarget.dataset.characteristicKey,value:event.currentTarget.dataset.value};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}else if(event.currentTarget.dataset.offset){const dragData={type:"investigatorValue",offset:event.currentTarget.dataset.offset};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_canDragStart(selector){return!0}_canDragDrop(selector){return!0}async _onDrop(event){try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if(void 0!==dataList.type&&"investigatorCharacteristic"===dataList.type){if(dataList.destination=event.target.closest("li").dataset.characteristicKey,void 0===dataList.destination&&(dataList.destination=event.target.closest("li").dataset.empty),dataList.okay=!1,"x"===dataList.destination){const offset=this.object.rolledValues.findIndex((i=>!0===i.assigned));offset>-1&&(this.object.rolledValues[offset]={value:this.object.setupPoints[dataList.key],assigned:!1},this.object.setupPoints[dataList.key]=""),dataList.okay=!0}else if("-"===dataList.key&&void 0!==this.object.setupPoints[dataList.destination]){const index=this.object.placeable.indexOf(parseInt(dataList.value,10));-1!==index&&this.object.placeable.splice(index,1),""!==this.object.setupPoints[dataList.destination]&&this.object.placeable.push(parseInt(this.object.setupPoints[dataList.destination],10)),this.object.setupPoints[dataList.destination]=parseInt(dataList.value,10),this.object.placeable.sort().reverse(),dataList.okay=!0}else if(void 0!==this.object.setupPoints[dataList.key]&&"-"===dataList.destination)""!==this.object.setupPoints[dataList.key]&&(this.object.placeable.push(parseInt(this.object.setupPoints[dataList.key],10)),this.object.setupPoints[dataList.key]="",this.object.placeable.sort().reverse(),dataList.okay=!0);else if(void 0!==this.object.setupPoints[dataList.key]&&void 0!==this.object.setupPoints[dataList.destination]){const temp=""===this.object.setupPoints[dataList.key]?"":parseInt(this.object.setupPoints[dataList.key],10);this.object.setupPoints[dataList.key]=""===this.object.setupPoints[dataList.destination]?"":parseInt(this.object.setupPoints[dataList.destination],10),this.object.setupPoints[dataList.destination]=temp,dataList.okay=!0}if(dataList.okay)return void this.render(!0)}else if(void 0!==dataList.type&&"investigatorValue"===dataList.type){if(dataList.destination=event.target.closest("li").dataset.characteristicKey,dataList.okay=!1,!1===this.object.rolledValues[dataList.offset].assigned){let old;""!==this.object.setupPoints[dataList.destination]&&(old=this.object.setupPoints[dataList.destination]),this.object.setupPoints[dataList.destination]=this.object.rolledValues[dataList.offset].value,void 0!==old?this.object.rolledValues[dataList.offset].value=old:this.object.rolledValues[dataList.offset].assigned=!0,dataList.okay=!0}if(dataList.okay)return void this.render(!0)}}catch(err){}const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if([this.pageList.PAGE_ARCHETYPE_SKILLS,this.pageList.PAGE_OCCUPATION_SKILLS].includes(this.object.step))for(const item of dataList)"skill"===item.type&&(this.addItemToList(item),this.render(!0))}_onClickSkillSpecial(event){event.stopPropagation()}_onClickRemoveSkill(event){event.stopPropagation();const key=event.currentTarget?.parentNode?.dataset?.key,index=event.currentTarget?.parentNode?.dataset?.index;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows.splice(index,index),this.render(!0))}async _onToggleSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows[index][toggleKey]=!this.object.skillItems[key].rows[index][toggleKey],this.render(!0))}async _onClickPickSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;if(void 0!==this.object.skillItems[key]){index>-1&&(this.object.skillItems[key].rows[index][toggleKey]=!1,this.object.skillItems[key].rows[index].selected=!1,this.render(!0));let skillList=[];const group=game.system.api.cocid.guessGroupFromKey(key);group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>!(item.system.properties?.special&&(item.system.properties?.requiresname||item.system.properties?.picknameonly)))),skillList.length>1&&skillList.sort(CoC7Utilities.sortByNameKey));const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:this.object.skillItems[key].item.system.properties?.requiresname??!1,fixedBaseValue:!0,specializationName:this.object.skillItems[key].item.system.specialization,label:this.object.skillItems[key].item.name});if(index>-1)""!==skillData.selected?(this.object.skillItems[key].rows[index].selected=skillList.find((i=>i.id===skillData.selected)),this.object.skillItems[key].rows[index][toggleKey]=!0):""!==skillData.name&&(this.object.skillItems[key].rows[index].selected=skillData.name,this.object.skillItems[key].rows[index][toggleKey]=!0);else{let selected=!1;""!==skillData.selected?selected=skillList.find((i=>i.id===skillData.selected)):""!==skillData.name&&(selected=skillData.name),this.object.skillItems[key].rows.push({isOccupationDefault:!1,inOccupationGroup:!1,isArchetypeDefault:!1,isCreditRating:!1,occupationToggle:"occupationToggle"===toggleKey,archetypeToggle:"archetypeToggle"===toggleKey,occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected})}this.render(!0)}}async _onChangeSkillPoints(event){const input=$(event.currentTarget),adjustment=input.data("adjustment"),li=input.closest("li"),key=li.data("key"),index=li.data("index");void 0!==this.object.skillItems[key]?.rows[index][adjustment]&&(this.object.skillItems[key].rows[index][adjustment]=input.val()),this.render(!0)}async _onChangeBackstoryText(event){const textarea=$(event.currentTarget),index=textarea.data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=textarea.val())}async _onRollBackstory(event){const button=$(event.currentTarget),index=button.data("index"),key=button.data("key");if(void 0!==this.object.bioSections[index]){const rolltable=await game.system.api.cocid.fromCoCID(key);if(1===rolltable.length){const tableResults=await rolltable[0].roll();for(const tableResult of tableResults.results)tableResult.type===CONST.TABLE_RESULT_TYPES.TEXT&&(this.object.bioSections[index].value=(this.object.bioSections[index].value+"\n"+tableResult.text.trim()).trim())}}this.render(!0)}async _onResetBackstory(event){const index=$(event.currentTarget).data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=""),this.render(!0)}async _onRollLuck(event){const setup=await this.getCacheItemByCoCID(this.object.setup);if(setup){const die=await new Roll(setup.system.characteristics.rolls.luck.toString()).evaluate({async:!0});this.object.setupModifiers.luck=[die.total];const html=await renderTemplate(Roll.CHAT_TEMPLATE,{formula:game.i18n.localize("CoC7.InvestigatorWizard.RollTwiceForLuck")+": "+setup.system.characteristics.rolls.luck.toString(),tooltip:await die.getTooltip(),total:die.total});ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html,whisper:ChatMessage.getWhisperRecipients("GM")}),this.render(!0)}}async _onRollEdu(event){if(event.preventDefault(),void 0!==this.object.requiresAgeAdjustments.edu&&!this.object.requiresAgeAdjustments.edu.rolled&&this.object.requiresAgeAdjustments.edu.total){let value=parseInt(this.object.setupPoints.edu,10);const message=[];for(let rolls=this.object.requiresAgeAdjustments.edu.total;rolls>0;rolls--){const die=await new Roll("1d100").evaluate({async:!0});if(die.total>value){const augmentDie=await new Roll("1d10").evaluate({async:!0});message.push(`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value,augment:augmentDie.total})}</span><br>`),value+=parseInt(augmentDie.total,10)}else message.push(`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value})}</span><br>`)}ChatMessage.create({flavor:game.i18n.localize("CoC7.RollAll4Dev"),user:game.user.id,speaker:{alias:game.user.name},content:message.join(""),whisper:ChatMessage.getWhisperRecipients("GM")}),this.object.setupModifiers.edu=value-parseInt(this.object.setupPoints.edu,10),this.object.requiresAgeAdjustments.edu.rolled=!0,this.render(!0)}}async _onRollAll(event){event.preventDefault();const rolls=[];for(const key of["str","con","siz","dex","app","int","pow","edu","luck"]){const result=await this.rollCharacteristic(key);!1!==result&&rolls.push(result)}this.rollMessage(rolls),this.render(!0)}async _onRollChoose(event){if(event.preventDefault(),""!==this.object.setup){const setup=await this.getCacheItemByCoCID(this.object.setup);if(void 0!==setup){const rollFormulas={};for(const key of["str","con","siz","dex","app","int","pow","edu"])rollFormulas[key]=setup.system.characteristics.rolls[key];if(""!==this.object.archetype){const archetype=await this.getCacheItemByCoCID(this.object.archetype);void 0!==archetype&&""!==this.object.coreCharacteristic&&archetype.system.coreCharacteristicsFormula.enabled&&(rollFormulas[this.object.coreCharacteristic]=archetype.system.coreCharacteristicsFormula.value)}this.object.rolledValues=[];const html=[];for(const key in rollFormulas){const roll=new Roll(rollFormulas[key].toString());await roll.evaluate({async:!0}),this.object.rolledValues.push({value:roll.total,assigned:!1}),html.push(await renderTemplate(Roll.CHAT_TEMPLATE,{formula:rollFormulas[key].toString(),tooltip:await roll.getTooltip(),total:roll.total}))}ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html.join("<div>&nbsp;</div>"),whisper:ChatMessage.getWhisperRecipients("GM")})}}this.render(!0)}async _onIncreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,10),this.render(!0)}async _onIncreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,1),this.render(!0)}async _onDecreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-1),this.render(!0)}_onDecreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-10),this.render(!0)}modifyOffset(key,value,min,max){this.object.setupModifiers[key]=Math.max(Math.min(parseInt(this.object.setupModifiers[key],10)+value,parseInt(max,10)),parseInt(min,10))}modifyCharacteristic(key,value){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+value,this.object.setupPoints[key]=Number(input.value))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key,result=await this.rollCharacteristic(characKey);!1!==result&&this.rollMessage([result]),this.render(!0)}async rollCharacteristic(key){const li=$(`#investigator-wizard-application li.item[data-key=${key}]`),input=li.find("input"),formula=li.data("roll");if(input&&formula&&(this.object.rerollsEnabled||""===this.object.setupPoints[key])){const roll=new Roll(formula.toString());return await roll.evaluate({async:!0}),input.val(roll.total),this.object.setupPoints[key]=Number(roll.total),[key,formula.toString(),roll]}return!1}_onChangeSubmit(event){this._onSubmit(event)}_onChangeSaveCharacteristic(event){const obj=$(event.currentTarget),name=obj.prop("name");if(void 0!==this.object.setupPoints[name]){this.object.setupPoints[name]=obj.val();let empties=!1,total=0;for(const key in this.object.setupPoints)""!==this.object.setupPoints[key]?"luck"!==key&&(total+=parseInt(this.object.setupPoints[key],10)):empties=!0;const objTotal=obj.closest("ol.item-list").find("span.total"),max=parseInt(objTotal.siblings("span.value").text(),10);objTotal.text(total),total!==max||empties?obj.closest("form").find("button.submit-button[data-button=next]").length>0&&this.render(!0):0===obj.closest("form").find("button.submit-button[data-button=next]").length&&this.render(!0)}}getPageNumber(direction){const pageOrder=this.pageOrder,key=parseInt(Object.keys(pageOrder).find((key=>pageOrder[key]===this.object.step)),10)+direction;return pageOrder[key]}async _updateObject(event,formData){if(["back","next"].includes(event.submitter?.dataset.button)){if(event.submitter.className.indexOf("currently-submitting")>-1)return;event.submitter.className=event.submitter.className+" currently-submitting"}if(void 0!==formData["default-setup"]&&void 0!==formData["world-era"]&&void 0!==formData["default-ownership"]){if(this.object.defaultSetup!==formData["default-setup"]&&(this.object.defaultSetup=formData["default-setup"],game.settings.set("CoC7","InvestigatorWizardSetup",this.object.defaultSetup),this.object.setup=this.object.defaultSetup,this.clearSetupPoints(),await this.setSkillLists()),this.object.defaultOwnership!==formData["default-ownership"]&&(this.object.defaultOwnership=formData["default-ownership"],game.settings.set("CoC7","InvestigatorWizardOwnership",this.object.defaultOwnership)),this.object.defaultEra!==formData["world-era"]){const obj=$(this.element.find("form")),started=Date.now();obj.find(".dialog-buttons:first").hide(),obj.find(".scrollsection:first").hide(),obj.find(".erachange:first").show(),this.object.defaultEra=formData["world-era"],await game.settings.set("CoC7","worldEra",this.object.defaultEra),this.object.cacheCoCID=await CoC7InvestigatorWizard.loadCacheItemByCoCID();const buffer=500-(Date.now()-started);buffer>10&&await new Promise((resolve=>setTimeout(resolve,buffer)))}if(void 0!==formData["characteristics-method"]){const type=Number(formData["characteristics-method"]);type===this.characteristicsMethods.METHOD_DEFAULT?(this.object.enforcePointBuy=!1,this.object.chooseRolledValues=!1,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_POINTS?(this.object.enforcePointBuy=!0,this.object.chooseRolledValues=!1,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_VALUES?(this.object.enforcePointBuy=!1,this.object.chooseRolledValues=!1,game.settings.get("CoC7","pulpRuleArchetype")?this.object.quickFireValues=[90,80,70,60,60,50,50,40]:this.object.quickFireValues=[80,70,60,60,50,50,50,40]):type===this.characteristicsMethods.METHOD_CHOOSE&&(this.object.enforcePointBuy=!1,this.object.chooseRolledValues=!0,this.object.quickFireValues=[]),game.settings.set("CoC7","InvestigatorWizardPointBuy",this.object.enforcePointBuy),game.settings.set("CoC7","InvestigatorWizardQuickFire",this.object.quickFireValues),game.settings.set("CoC7","InvestigatorWizardChooseValues",this.object.chooseRolledValues)}this.object.rerollsEnabled="string"==typeof formData["rerolls-enabled"],game.settings.set("CoC7","InvestigatorWizardRerolls",this.object.rerollsEnabled);for(let i=0,im=this.object.quickFireValues.length;i<im;i++){const num=Number(formData["quick-fire-values-"+i]);num>0&&(this.object.quickFireValues[i]=num)}this.object.quickFireValues.sort().reverse(),this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues),"string"==typeof formData["default-enabled"]?"0"===this.object.defaultQuantity.toString()?(this.object.defaultQuantity=1,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):(this.object.defaultQuantity=formData["default-quantity"],game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):"0"!==this.object.defaultQuantity.toString()&&(this.object.defaultQuantity=0,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity))}else if(void 0!==formData["coc-setup"])this.object.setup!==formData["coc-setup"]&&(this.object.setup=formData["coc-setup"],this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-archetype"])this.object.archetype!==formData["coc-archetype"]&&(this.object.archetype=formData["coc-archetype"],this.object.coreCharacteristic="",this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-occupation"])this.object.occupation!==formData["coc-occupation"]&&(this.object.occupation=formData["coc-occupation"],await this.setSkillLists());else{for(const key in this.object.setupPoints)void 0!==formData[key]&&this.object.setupPoints[key]!==formData[key]&&(this.object.setupPoints[key]=formData[key]);void 0!==formData["coc-core-characteristic"]&&this.object.coreCharacteristic!==formData["coc-core-characteristic"]&&(this.object.coreCharacteristic=formData["coc-core-characteristic"],this.clearSetupPoints(),this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues))}const flatKeys=["name","age","residence","birthplace","language","avatar","token"];for(const key of flatKeys)void 0!==formData[key]&&this.object[key]!==formData[key]&&(this.object[key]=formData[key],"age"===key&&this.getAgeAdjustments());if("back"===event.submitter?.dataset.button){const pageNumber=this.getPageNumber(-1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}else if("next"===event.submitter?.dataset.button){if(this.object.step===this.pageList.PAGE_CREATE||this.object.step===this.pageList.PAGE_BACKSTORY&&game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole)return void this.attemptToCreate();{const pageNumber=this.getPageNumber(1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}}this.render(!0)}async attemptToCreate(){const actorData=await this.normalizeCharacterData(this.object);if(game.user.isGM||game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole){(await CoC7InvestigatorWizard.createCharacter(actorData)).sheet.render(!0),this.close()}else{const keepers=game.users.filter((u=>u.active&&u.isGM));if(keepers.length){actorData.ownership[game.user.id]=CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER;const data={type:"character-wizard",listener:keepers[0].id,payload:actorData};game.socket.emit("system.CoC7",data),ui.notifications.info(game.i18n.localize("CoC7.InvestigatorWizard.CreatingInvestigator")),this.close()}else ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}async normalizeCharacterData(data){const weaponSkills={melee:{},rngd:{}},items=[];for(const key in data.skillItems){const skill=data.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=foundry.utils.duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=foundry.utils.duplicate(row.selected),row.selected=!1),row.occupationToggle&&(item.system.flags.occupation=!0),row.archetypeToggle&&(item.system.flags.archetype=!0);let base=item.system.base;if(!Number.isNumeric(base))for(const key in data.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new AverageRoll("("+base+")")[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({minimize:!0,maximize:!0}).total)),item.system.base=base,item.system.adjustments=item.system.adjustments??{},Number(row.personalPoints)>0&&(item.system.adjustments.personal=parseInt(row.personalPoints,10)),Number(row.occupationPoints)>0&&(item.system.adjustments.occupation=parseInt(row.occupationPoints,10)),Number(row.archetypePoints)>0&&(item.system.adjustments.archetype=parseInt(row.archetypePoints,10)),Number(row.experiencePoints)>0&&(item.system.adjustments.experience=parseInt(row.experiencePoints,10)),key===this.cocidLanguageOwn?(item.system.skillName=data.language,item.name=item.system.specialization+" ("+item.system.skillName+")"):"string"==typeof row.selected&&(item.system.skillName=row.selected,item._id=foundry.utils.randomID(),item.name=item.system.specialization+" ("+item.system.skillName+")",void 0!==item.flags.CoC7?.cocidFlag?.id&&(item.flags.CoC7.cocidFlag.id=game.system.api.cocid.guessId(item))),item.system.properties?.fighting?(weaponSkills.melee[item.name]=item._id,weaponSkills.melee[item.system.skillName]=item._id):(item.system.properties?.firearm||item.system.properties?.ranged)&&(weaponSkills.rngd[item.name]=item._id,weaponSkills.rngd[item.system.skillName]=item._id),items.push(item)}}}for(const sourceItem of data.investigatorItems){const item=foundry.utils.duplicate(sourceItem);item.system.properties.melee?(void 0!==weaponSkills.melee[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.melee[item.system.skill.main.name]),void 0!==weaponSkills.melee[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.melee[item.system.skill.alternativ.name])):item.system.properties.rngd&&(void 0!==weaponSkills.rngd[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.rngd[item.system.skill.main.name]),void 0!==weaponSkills.rngd[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.rngd[item.system.skill.alternativ.name])),items.push(item)}let monetary={};const setup=await this.getCacheItemByCoCID(this.object.setup);setup&&(monetary=foundry.utils.duplicate(setup.system.monetary));const development={personal:2*(parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)),occupation:0,archetype:0};if(""!==data.archetype){const archetype=await game.system.api.cocid.fromCoCID(data.archetype);1===archetype.length&&(items.push(archetype[0].toObject()),development.archetype=archetype[0].system.bonusPoints)}if(""!==data.occupation){const occupation=await game.system.api.cocid.fromCoCID(data.occupation);if(1===occupation.length){items.push(occupation[0].toObject());const options=[];for(const[key,carac]of Object.entries(occupation[0].system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))):development.occupation+=carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10)));options.length>0&&(development.occupation+=Math.max(...options))}}const biography=[];for(let index=0,im=data.bioSections.length;index<im;index++)biography.push({title:data.bioSections[index].name,value:data.bioSections[index].value});return{type:"character",name:data.name,img:data.avatar,system:{characteristics:{str:{value:parseInt(data.setupPoints.str,10)+parseInt(data.setupModifiers.str,10)},con:{value:parseInt(data.setupPoints.con,10)+parseInt(data.setupModifiers.con,10)},siz:{value:parseInt(data.setupPoints.siz,10)+parseInt(data.setupModifiers.siz,10)},dex:{value:parseInt(data.setupPoints.dex,10)+parseInt(data.setupModifiers.dex,10)},app:{value:parseInt(data.setupPoints.app,10)+parseInt(data.setupModifiers.app,10)},int:{value:parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)},pow:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)},edu:{value:parseInt(data.setupPoints.edu,10)+parseInt(data.setupModifiers.edu,10)}},attribs:{lck:{value:Math.max(parseInt(data.setupPoints.luck,10),parseInt(data.setupModifiers.luck,10))},san:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)}},infos:{age:data.age,residence:data.residence,birthplace:data.birthplace},development,biography,monetary},prototypeToken:{name:data.name,actorLink:!0,texture:{src:data.token},disposition:CONST.TOKEN_DISPOSITIONS.FRIENDLY,sight:{enabled:!0}},items,ownership:{default:parseInt(data.defaultOwnership,10)}}}static async createCharacterFromData(actorData){const actor=await CoC7InvestigatorWizard.createCharacter(actorData),functionId=Hooks.on("renderActorSheet",((app,html,data)=>{app.object.id===actor.id&&(game.socket.emit("system.CoC7",{type:"open-character",listener:Object.keys(actorData.ownership).find((k=>"default"!==k)),payload:actor.id}),Hooks.off("renderActorSheet",functionId))}));actor.sheet.render(!0)}static async createCharacter(actorData){const actor=await Actor.create(actorData);return await actor.update({"system.attribs.hp.value":actor.rawHpMax,"system.attribs.mp.value":actor.rawMpMax,"system.attribs.san.max":actor.rawMpMax}),await actor.resetDailySanity(),actor}static async create(options={}){!0!==game.settings.get("CoC7","InvestigatorWizardChooseValues")&&!1!==game.settings.get("CoC7","InvestigatorWizardChooseValues")&&await game.settings.set("CoC7","InvestigatorWizardChooseValues",game.settings.get("CoC7","InvestigatorWizardChooseValues")[0]??!1),options=foundry.utils.mergeObject({step:0,defaultSetup:game.settings.get("CoC7","InvestigatorWizardSetup"),defaultQuantity:game.settings.get("CoC7","InvestigatorWizardQuantity"),defaultOwnership:game.settings.get("CoC7","InvestigatorWizardOwnership"),defaultEra:game.settings.get("CoC7","worldEra"),rerollsEnabled:game.settings.get("CoC7","InvestigatorWizardRerolls"),enforcePointBuy:game.settings.get("CoC7","InvestigatorWizardPointBuy"),quickFireValues:game.settings.get("CoC7","InvestigatorWizardQuickFire"),chooseRolledValues:game.settings.get("CoC7","InvestigatorWizardChooseValues"),placeable:foundry.utils.duplicate(game.settings.get("CoC7","InvestigatorWizardQuickFire")),cacheCoCID:CoC7InvestigatorWizard.loadCacheItemByCoCID(),cacheBackstories:game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^rt\.\.backstory-/,type:"rt"}),cacheItems:{},setup:game.settings.get("CoC7","InvestigatorWizardSetup"),skillItems:{},occupationGroups:{},investigatorItems:[],setupPoints:{str:"",con:"",siz:"",dex:"",app:"",int:"",pow:"",edu:"",luck:""},setupModifiers:{str:0,con:0,siz:0,dex:0,app:0,int:0,pow:0,edu:0,luck:0},rolledValues:[],archetype:"",coreCharacteristic:"",occupation:"",bioSections:[],personal:0,personalText:"",creditRating:{min:0,max:0},name:"",age:"",requiresAgeAdjustments:!1,residence:"",birthplace:"",language:"",avatar:"icons/svg/mystery-man.svg",token:"icons/svg/mystery-man.svg"},options),new CoC7InvestigatorWizard(options).render(!0)}}class CoCIDActorUpdateItems extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"coc-id-actor-update-items",classes:["coc7","dialog","investigator-wizard"],title:game.i18n.localize("CoC7.ActorCoCIDItemsBest"),template:"systems/CoC7/templates/apps/coc-id-actor-update-items.hbs",width:520,height:410,closeOnSubmit:!1})}async getData(){const sheetData=await super.getData();sheetData.lang=CONFIG.supportedLanguages[game.i18n.lang]??"?";const defaultEra=game.settings.get("CoC7","worldEra");return sheetData.isEn="en"===game.i18n.lang,sheetData.era=game.i18n.format(COC7.eras[defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:defaultEra}),sheetData}getUpdateData(item){const output={flags:{CoC7:{cocidFlag:item.flags.CoC7.cocidFlag}},name:item.name,system:{}};for(const key of["chat","keeper","notes","opposingDifficulty","pushedFaillureConsequences","special","value"])"string"==typeof item.system.description?.[key]&&item.system.description[key].length&&(Object.prototype.hasOwnProperty.call(output.system,"description")||(output.system.description={}),output.system.description[key]=item.system.description[key]);switch(item.type){case"archetype":output.system.suggestedOccupations=item.system.suggestedOccupations,output.system.suggestedTraits=item.system.suggestedTraits;break;case"book":case"spell":case"status":case"weapon":break;case"occupation":output.system.suggestedContacts=item.system.suggestedContacts;break;case"skill":output.system.skillName=item.system.skillName,output.system.specialization=item.system.specialization}return output}async updateActors(actorList,parent,any){if(parent){const unlinkedActors=await actorList.filter((a=>!1===a.token?.actorLink)).map((a=>a.id)).filter(((a,o,v)=>v.indexOf(a)===o)).reduce((async(c,i)=>(c.push(await fromUuid("Actor."+i)),c)),[]);actorList=unlinkedActors.concat(actorList)}const ids={},anys={};for(const actor of actorList)for(const item of actor.items.contents)"string"==typeof item.flags?.CoC7?.cocidFlag?.id&&(!any&&item.flags.CoC7.cocidFlag.id.match(/-any$/)?(Object.prototype.hasOwnProperty.call(anys,item.flags.CoC7.cocidFlag.id)||(anys[item.flags.CoC7.cocidFlag.id]=[]),anys[item.flags.CoC7.cocidFlag.id].push(actor.name)):ids[item.flags.CoC7.cocidFlag.id]={});const found=await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:game.system.api.cocid.makeGroupRegEx(Object.keys(ids)),type:"i",showLoading:!0});for(const item of found)ids[item.flags.CoC7.cocidFlag.id]=this.getUpdateData(item.toObject());Object.keys(anys).length&&console.log("Invalid any keys on Actors",anys);const allUpdates=[];for(const actor of actorList){const updates=[];for(const item of actor.items.contents)Object.prototype.hasOwnProperty.call(ids,item.flags?.CoC7?.cocidFlag?.id)&&updates.push(foundry.utils.mergeObject({_id:item.id},ids[item.flags.CoC7.cocidFlag.id]));updates.length&&allUpdates.push({_id:actor.id,items:updates})}allUpdates.length&&Actor.updateDocuments(allUpdates)}async _updateObject(event,formData){if("update"===event.submitter?.dataset.button){if(event.submitter.className.indexOf("currently-submitting")>-1)return;event.submitter.className=event.submitter.className+" currently-submitting";const parent="string"==typeof formData["coc-id-actor-update-items-parent"],any="string"==typeof formData["coc-id-actor-update-items-any"];switch((formData["coc-id-actor-update-items-which"]??"").toString()){case"1":await this.updateActors(canvas.scene.tokens.contents.map((d=>d.object.actor)),parent,any);break;case"2":await this.updateActors(Object.values(ui.windows).filter((s=>s instanceof ActorSheet)).map((s=>s.object)),parent,any);break;case"3":await this.updateActors(game.actors.contents,!1,any)}}this.close()}static async create(options={}){new CoCIDActorUpdateItems(options).render(!0)}}class CoC7MenuLayer extends PlaceablesLayer{constructor(){super(),this.objects={}}static get layerOptions(){return foundry.utils.mergeObject(super.layerOptions,{name:"coc7menu",zIndex:60})}static get documentName(){return"Token"}get placeables(){return[]}}class CoC7Menu{static getButtons(controls){canvas.coc7gmtools=new CoC7MenuLayer;const isKeeper=game.user.isGM,showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu");controls.push({name:"coc7menu",title:"CoC7.GmTools",layer:"coc7gmtools",icon:"game-icon game-icon-tentacle-strike",visible:isKeeper,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async toggle=>await CoC7Utilities.toggleDevPhase(toggle)},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async toggle=>await CoC7Utilities.toggleCharCreation(toggle)},{button:!0,icon:"fas fa-fingerprint",name:"actor-coc-id-best",title:"CoC7.ActorCoCIDItemsBest",onClick:async()=>await CoCIDActorUpdateItems.create()},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create()},{button:!0,icon:"fas fa-user-check",name:"investigator-wizard",title:"CoC7.InvestigatorWizard.Title",onClick:async()=>await CoC7InvestigatorWizard.create()},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async toggle=>await CoC7Utilities.toggleXPGain(toggle)},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.getTarget()}]}),showHiddenDevMenu&&(canvas.coc7DevTools=new CoC7MenuLayer,controls.push({name:"coc7DevMenu",title:"Dev tools. If you don't know what it is, you don't need it and you shouldn't use it !!",layer:"coc7DevTools",icon:"game-icon game-icon-police-badge",visible:isKeeper,tools:[{toggle:!0,icon:"game-icon game-icon-dice-fire",name:"alwaysCrit",active:game.CoC7.dev.dice.alwaysCrit,title:"All rolls will crit",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=!1,game.CoC7.dev.dice.alwaysCrit=toggle}},{toggle:!0,icon:"game-icon game-icon-fire-extinguisher",name:"alwaysFumble",active:game.CoC7.dev.dice.alwaysFumble,title:"All rolls will fumble",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=toggle,game.CoC7.dev.dice.alwaysCrit=!1}}]}))}static renderControls(app,html,data){const isKeeper=game.user.isGM,keeperMenu=html.find(".game-icon-tentacle-strike").parent();keeperMenu.addClass("coc7-menu"),isKeeper&&keeperMenu.after('<li class="scene-control coc7-menu coc7-create-link" title="'+game.i18n.localize("CoC7.CreateLink")+'"><i class="fas fa-link"></i></li>'),keeperMenu.after('<li class="scene-control coc7-menu coc7-dice-roll" title="'+game.i18n.localize("CoC7.RollDice")+'"><i class="game-icon game-icon-d10"></i></li>'),html.find(".coc7-menu.coc7-dice-roll").click((event=>CoC7Utilities.rollDice(event))),html.find(".coc7-menu.coc7-create-link").click((event=>CoC7ContentLinkDialog.create(event)))}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["CoC7Link","locator","getToken"]}static async onDropSomething(canvas,data){if(data.type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(data.type)){const gridSize=canvas.scene.grid.size,x=data.x-gridSize/2,y=data.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));switch(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),data.type){case"CoC7Link":if(data.check===CoC7Link.CHECK_TYPE.EFFECT){if(dropTargetTokens.length)for(const token of dropTargetTokens)CoC7Link._onLinkActorClick(token.actor,data)}else dropTargetTokens.length?CoC7Link.toWhisperMessage(data,dropTargetTokens.filter((t=>t.actor.owners.length)).map((t=>t.actor))):CoC7Link.toWhisperMessage(data,game.users.players.filter((u=>!!u.character)).map((u=>u.character)));break;case"getToken":void 0!==data.appId&&"string"==typeof data.callBack&&void 0!==ui.windows[data.appId]&&"function"==typeof ui.windows[data.appId][data.callBack]&&ui.windows[data.appId][data.callBack](dropTargetTokens);break;default:if(data.docUuid&&data.callBack){const doc=CoC7Utilities.SfromUuid(data.docUuid);if(doc[data.callBack]&&"function"==typeof doc[data.callBack])try{data.scene=canvas.scene.uuid,doc[data.callBack](data)}catch(error){console.warn(error.message)}}}}}}class CoC7SettingsDirectory extends Settings{activateListeners(html){super.activateListeners(html),game.user.isGM&&(html.find("#settings-game").append('<button class="trigger-data-migration"><i class="fas fa-wrench"></i> '+game.i18n.localize("CoC7.Migrate.TriggerButton")+"</button>"),html.find("#settings-documentation").append('<button class="trigger-system-manual"><i class="fas fa-books"></i> '+game.i18n.localize("CoC7.System.Documentation")+"</button>"),html.find(".trigger-data-migration").click((()=>{new Dialog({title:game.i18n.localize("CoC7.Migrate.TriggerTitle"),content:game.i18n.localize("CoC7.Migrate.TriggerContents"),buttons:{migrate:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Migrate.TriggerRestart"),callback:async()=>{await game.settings.set("CoC7","systemUpdateVersion",0),window.location.reload()}},close:{icon:'<i class="fas fa-ban"></i>',label:game.i18n.localize("Cancel"),callback:()=>{}}},default:"close"},{}).render(!0)})),html.find(".trigger-system-manual").click((async()=>{(await game.packs.get("CoC7.system-doc").getDocument(CONFIG.CoC7.Manual))?.sheet.render(!0)})))}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7ActorDirectory extends ActorDirectory{activateListeners(html){super.activateListeners(html);let allowWizard=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;if(!allowWizard){const allowed=game.settings.get("CoC7","InvestigatorWizardQuantity");if(allowed>0){allowWizard=game.actors.filter((a=>[a.ownership.default,a.ownership[game.user.id]??CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE].includes(CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER))).length<allowed}}allowWizard&&(html.find("footer.directory-footer").append('<a class="investigator-wizard">'+game.i18n.localize("CoC7.InvestigatorWizard.Title")+"</a>"),html.find(".investigator-wizard").click((()=>{CoC7InvestigatorWizard.create()}))),game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole&&(html.find("footer.directory-footer").append('<a class="actor-import">'+game.i18n.localize("CoC7.ActorImporter")+"</a>"),html.find(".actor-import").click((()=>{CoC7ActorImporterDialog.create()})))}}class CoC7Spell extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/pentagram-rose.svg"),super(data,context),this.context=context}async cast(priv){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));const costs=foundry.utils.duplicate(this.system.costs),losses=[];let convertSurplusIntoHitPoints;if(costs.magicPoints=CoC7Utilities.isFormula(costs.magicPoints)?(await new Roll(costs.magicPoints).roll({async:!0})).total:parseInt(costs.magicPoints),costs.magicPoints&&costs.magicPoints>this.actor.system.attribs.mp.value&&(convertSurplusIntoHitPoints=await new Promise((resolve=>{const convertedHitPoints=costs.magicPoints-this.actor.system.attribs.mp.value,convertedMagicPoints=costs.magicPoints-convertedHitPoints,data={title:" ",content:game.i18n.format("CoC7.NotEnoughMagicPoints",{actorMagicPoints:this.actor.system.attribs.mp.value,convertedHitPoints,convertedMagicPoints,originalMagicPoints:costs.magicPoints,spell:this.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>(costs.hitPoints=convertedHitPoints,costs.magicPoints=convertedMagicPoints,resolve(!0))}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)})),!convertSurplusIntoHitPoints))return;for(const[key,value]of Object.entries(costs))value&&0!==Number(value)&&losses.push(await this.resolveLosses(key,value,priv));const description=this.system.description.value,html=await renderTemplate("systems/CoC7/templates/items/spell/chat.html",{description,losses});let chatData={user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:this.name,content:html};return priv&&(chatData=ChatMessage.applyRollMode(chatData,"gmroll")),await ChatMessage.create(chatData)}async resolveLosses(characteristic,value,priv){let characteristicName,loss;loss=CoC7Utilities.isFormula(value)?(await new Roll(value).roll({async:!0})).total:parseInt(value);const actorData=this.actor.system;switch(characteristic){case"hitPoints":characteristicName=game.i18n.localize("CoC7.HitPoints"),this.actor.dealDamage(loss,{ignoreArmor:!0});break;case"sanity":characteristicName=game.i18n.localize("CoC7.SanityPoints"),loss=await this.grantSanityLoss(loss,priv);break;case"magicPoints":characteristicName=game.i18n.localize("CoC7.MagicPoints"),this.actor.setMp(actorData.attribs.mp.value-loss);break;case"power":characteristicName=game.i18n.localize("CHARAC.Power"),this.actor.update({"system.characteristics.pow.value":actorData.characteristics.pow.value-loss})}return{characteristicName,loss}}async grantSanityLoss(value,priv){const template=SanCheckCard.template;let html=await renderTemplate(template,{}),chatData={user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.CastingSpell",{spell:this.name}),content:html};priv&&(chatData=ChatMessage.applyRollMode(chatData,"gmroll"));const message=await ChatMessage.create(chatData),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=value;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);return await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),await sanityCheck.updateChatCard(),sanityCheck.sanLoss}}async update(data,context){if(void 0!==this.context.parent&&void 0!==this.context.bookId){let item,book;null===this.context.parent?(item=game.items.get(this.context.bookId),book=item.toObject()):book=this.context.parent.items.get(this.context.bookId).toObject();for(let i=0,im=book.system.spells.length;i<im;i++)book.system.spells[i]._id===this.id&&(book.system.spells[i]=foundry.utils.mergeObject(book.system.spells[i],data));null===this.context.parent?(await item.update({"system.spells":book.system.spells}),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)):(await this.context.parent.updateEmbeddedDocuments("Item",[book]),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)),this.sheet.render(!0)}else await super.update(data,context)}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.system.spells?foundry.utils.duplicate(this.system.spells):[];for(const spell of spells)collection.push(spell);return await this.update({"system.spells":collection})}async spellDetail(index){const isKeeper=game.user.isGM,data=this.system.spells[index],parent=this.actor?this.actor:null,spell=new CoC7Spell(data,{parent,bookId:this.id});if(isKeeper||spell.system.learned)return await spell.sheet.render(!0)}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.system.difficultyLevel),language=this.system.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.system.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.system.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.system.study.necessary;let fullStudy=this.system.fullStudy,progress=this.system.study.progress;if(isNaN(progress))return await this.update({"system.study.progress":0});if(value&&progress>value)return await this.update({"system.fullStudy":++fullStudy,"system.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"system.study.progress":++progress}),progress===necessary)return await this.update({"system.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"system.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.system.mythosRating;if(this.system.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"system.study.progress":this.system.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.system.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.system.mythosRating;let mythosFinal=this.system.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythosFinal)},{name:this.system.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"system.fullStudies":++this.system.fullStudies})}async grantInitialReading(){if(this.system.initialReading)return;const developments=[],mythos={gains:this.system.gains.cthulhuMythos.initial,type:this.system.type.mythos},occult={gains:this.system.gains.occult,type:this.system.type.occult},other_gains=this.system.gains.others,other_type=this.system.type.other;if(mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other_type)for(const skill of other_gains){const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})}return await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.system.sanityLoss&&await this.rollSanityLoss(),await this.update({"system.initialReading":!0})}async grantSpellLearning(spelllearned){for(const spell of this.system.spells)if(spell._id===spelllearned._id){spell.system.learned=!0;await this.actor.items.find((item=>"spell"===item.type&&item.name===spelllearned.name))?ui.notifications.warn(game.i18n.format("CoC7.SpellAlreadyLearned",{spell:spelllearned.name,book:this.name})):spelllearned.system.learned=!0;break}await this.update({"system.spells":this.system.spells}),spelllearned.system.learned&&(ui.notifications.info(game.i18n.format("CoC7.SpellSuccessfullyLearned",{spell:spelllearned.name,book:this.name})),await this.actor.createEmbeddedDocuments("Item",[foundry.utils.duplicate(spelllearned)]))}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.type&&item.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[foundry.utils.duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"system.properties.special":!0,"system.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"system.study.progress":0}),await this.update({"system.study.necessary":2*this.system.study.necessary})}async rollSanityLoss(){const value=this.system.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.html",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.system.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",check.spell=spell,await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning(check.spell)}}}const ECC_CLASS="enhanced-chat-card",PERMISSION_TYPE_GM="gm",PERMISSION_TYPE_NOT_GM="!gm",PERMISSION_TYPE_SPEAKER="speaker",PERMISSION_TYPE_USER="user",PERMISSION_TYPE_BLACKLIST="blacklist",STATE_ON="switched-on",STATE_OFF="switched-off";async function updateMessage(messageId,newContent){const chatMessage=game.messages.get(messageId);await chatMessage.update({content:newContent})}async function GMUpdate(data,options,cardClassName,messageId=void 0){const card=await EnhancedChatCard.fromData(data,options,cardClassName,messageId);return await card.GMUpdate(),card.toObject()}async function advise(){}class EnhancedChatCardLib{constructor(){this.types=new Map,this.socket=null}static injectCSS(){let style=$("head").find("style");style?.length||($("head").append($('<style  type="text/css"></style>')),style=$("head").find("style")),style.append(".ecc-restricted {color: red}\n    .ecc-restricted:hover {cursor: not-allowed}")}static set socket(x){game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.socket=x}static get socket(){if(game.enhancedChatCardsLib){if(game.enhancedChatCardsLib.socket)return game.enhancedChatCardsLib.socket;ui.notifications.error("ECC no socket")}else ui.notifications.error("ECC not Initialized")}static get types(){return game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.types}static register(cardConstructors){cardConstructors.forEach((cardConstructor=>{EnhancedChatCardLib.types.get(cardConstructor.name)||EnhancedChatCardLib.types.set(cardConstructor.name,cardConstructor)}))}}function setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}function getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}class EnhancedChatCard{constructor(data={},options={}){this.data=data,this.data.flags||(this.data.flags={}),this._options=options}async initialize(){}get options(){return foundry.utils.mergeObject(this.constructor.defaultOptions,this._options)}set options(x){this._options=x}get template(){return this.options.template}get cssClasses(){return this.options.classes?.join(" ")}get speaker(){return this.options.ooc?game.user:this.options.speaker&&ChatMessage.getSpeakerActor(this.options.speaker)?ChatMessage.getSpeakerActor(this.options.speaker):game.user}async getData(){return{card:this,flags:this.flags,data:this.toObject(),options:this.options,css:this.cssClasses,user:game.user,speaker:this.speaker}}toObject(){if(!this.data)return;const data={};for(const k of Object.keys(this.data)){const v=this.data[k];data[k]=v instanceof Object?v.toObject?v.toObject():foundry.utils.deepClone(v):v}return data}async toMessage(optionnalChatData={}){await this.initialize();const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$(html)[0];this.options.attachObject&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes);const speaker=this.options.speaker&&!this.options.ooc?ChatMessage.getSpeaker(this.options.speaker):{},chatData=foundry.utils.mergeObject({user:game.user.id,speaker,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"selfroll"===this.rollMode&&(chatData.whisper=[game.user.id]),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({attachObject=!0}={}){if(this.options.compute&&await this.localCompute(),this.options.GMUpdate&&await this.ExecuteGMUpdate(),this.messageId){const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$.parseHTML(html)[0];attachObject&&!this.data.EEC_ACTION?.detachData&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes),game.enhancedChatCardsLib.socket.executeAsGM("updateMessage",this.messageId,htmlCardElement.outerHTML)}else this.toMessage()}async activateListeners(html){html.on("change","input,select,textarea",this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} .ecc-switch`,this._onToggle.bind(this)),html.on("click",`.${ECC_CLASS} .submit`,this._onSubmit.bind(this)),html.on("focusout",`.${ECC_CLASS} input`,this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} button`,this._onButton.bind(this)),html.on("keydown",`.${ECC_CLASS} form`,this._onKey.bind(this)),html.find("[data-ecc-visibility]").each((async(i,el)=>await this.setVisibility(el))),html.find("[data-ecc-permissions]").each((async(i,el)=>await this.setPermission(el))),html.find(`.${ECC_CLASS} .ecc-switch`).each(((i,el)=>this.setState(el))),html.find(`.${ECC_CLASS} input[type="radio"]`).each(((i,el)=>this.setRadioState(el)))}setState(element){if(element&&(element.dataset.flag&&element.classList.add(this.flags[element.dataset.flag]?STATE_ON:STATE_OFF),element.dataset.name)){const value=getByPath(this,element.dataset.name);element.classList.add(value?STATE_ON:STATE_OFF)}}setRadioState(element){if(!element||!element.name)return;const splited=element.name.split(".");"data"===splited[0].toLowerCase()&&this.data&&void 0!==this.data[splited[1]]&&this.data[splited[1]]===element.value&&(element.checked=!0)}async setVisibility(element){if(!element.dataset.eccVisibility)return;await this.hasPerm(element.dataset.eccVisibility,!0)||(element.style.display="none")}async setPermission(element){if(!element.dataset.eccPermissions)return;await this.hasPerm(element.dataset.eccPermissions)||(element.classList.add("ecc-restricted"),$(element).is("input")&&("range"===element.type?$(element).attr("disabled",!0):$(element).attr("readonly",!0)),$(element).is("select")&&$(element).attr("disabled",!0))}async hasPerm(restrictedTo,vision=!1){if(!restrictedTo.length)return!0;let permissionsArray=restrictedTo.split(" ");const whiteList=!permissionsArray.includes(PERMISSION_TYPE_BLACKLIST);if(whiteList||(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_BLACKLIST))),game.user.isGM){if(!vision)return!0;if(permissionsArray.includes(PERMISSION_TYPE_GM))return whiteList;if(permissionsArray.includes(PERMISSION_TYPE_NOT_GM))return!whiteList}if(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_GM)),permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_NOT_GM)),permissionsArray.includes(PERMISSION_TYPE_USER)){if(this.message.isAuthor)return whiteList;permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_USER))}if(permissionsArray.includes(PERMISSION_TYPE_SPEAKER)){const speaker=this.message.data.speaker;if(speaker.token&&speaker.scene){const actor=await fromUuid(`Scene.${speaker.scene}.Token.${speaker.token}`);if(actor&&actor.isOwner)return whiteList}else if(speaker.actor){const actor=game.actors.get(speaker.actor);if(actor&&actor.isOwner)return whiteList}permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_SPEAKER))}if(permissionsArray.length)for(let i=0;i<permissionsArray.length;i++){const uuid=permissionsArray[i];let actor=await fromUuid(uuid);if(actor||(actor=game.actors.get(uuid)),actor)return actor.isOwner;ui.notifications.error(`Unable to find actor ${uuid}`)}return!whiteList}static async bindListeners(html){const htmlCardElement=html[0].querySelector(`.${ECC_CLASS}`);if(!htmlCardElement)return;const card=await EnhancedChatCard.fromHTMLCardElement(htmlCardElement);card&&card.activateListeners(html)}get flags(){return this.data.flags}async assignObjects(){}async localCompute(){}async GMUpdate(){}async ExecuteGMUpdate(){const newData=await game.enhancedChatCardsLib.socket.executeAsGM("GMUpdate",this.toObject(),this._options,this.constructor.name,this.messageId);this.data=newData,await this.assignObjects()}async _onButton(event){event.preventDefault();const target=event.currentTarget;target.style.display="none";const action=target.dataset.action;let formUpdate,actionUpdate=!1;const card=target.closest(`.${ECC_CLASS}`);card?formUpdate=this._update(card):console.error(`Could not find a EEC class for this card: ${this.constructor.name}`);const originalDisplayStyle=target.style.display;(action||(console.warn("no action associated with this button"),formUpdate))&&(this[action]||(console.warn(`no ${action} action found for this card`),formUpdate))&&(this[action]&&(actionUpdate=await this[action]({event,updateCard:!1})),formUpdate||actionUpdate?await this.updateChatCard():target.style.display=originalDisplayStyle)}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onChange(event){if(this.options.submitOnChange)return this._onSubmit(event)}_onSubmit(event){const target=event.currentTarget;if("BUTTON"===target.tagName&&"action"in target.dataset)return;event.preventDefault();const card=target.closest(`.${ECC_CLASS}`);if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i],data=new FormDataExtended(form).object;for(const[key,value]of Object.entries(data)){getByPath(this,key)!==value&&(setByPath(this,key,value),updates=!0)}}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{attachObject:!0,classes:[ECC_CLASS],exclude:[],excludeStartWith:"_",submitOnChange:!0,speaker:ChatMessage.getSpeaker(),ooc:!1,compute:!0,GMUpdate:!1}}get objectDataString(){const saveData={data:this.data,options:this._options};return JSON.stringify(saveData,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(htmmlCard){if(!htmmlCard)return;if(!htmmlCard.dataset.eccClass)return;if(!htmmlCard.dataset.object)return;const cardData=JSON.parse(unescape(htmmlCard.dataset.object)),message=htmmlCard.closest(".message"),messageId=message?.dataset?.messageId;return await this.fromData(cardData.data,cardData.options,htmmlCard.dataset.eccClass,messageId)}static async fromData(data,options,cardClassName,messageId=void 0){const CardClass=game.enhancedChatCardsLib.types.get(cardClassName);if(!CardClass)return void console.error(`Unknown chat card type: ${cardClassName}`);const card=new CardClass(data,options);return messageId&&(card.messageId=messageId),await card.assignObjects(),card}setData(name){(name||"string"===$.type(name))&&setByPath(this,name,!0)}unsetData(name){(name||"string"===$.type(name))&&setByPath(this,name,!1)}toggleData(name){if(!name&&"string"!==$.type(name))return;setByPath(this,name,!getByPath(this,name))}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const name=target.dataset.flag?`data.flags.${target.dataset.flag}`:target.dataset.name;if(!name)return;const toggle=target.closest(".ecc-radio");if(toggle){const buttons=toggle.querySelectorAll(".ecc-switch");for(const b of buttons){const bName=b.dataset.flag?`data.flags.${b.dataset.flag}`:b.dataset.name;this.unsetData(bName)}this.setData(name)}else this.toggleData(name);const card=target.closest(`.${ECC_CLASS}`);this.options.submitOnChange&&card&&this._update(card),await this.updateChatCard()}}class _participant{constructor(data={}){this.data=data}_fetch(){if(!this._doc&&this.data.docUuid&&(this._doc=CoC7Utilities.getDocumentFromKey(this.data.docUuid)),!this._actor)if(this._doc)switch(this._doc.constructor?.name){case"TokenDocument":this._actor=this._doc.actor;break;case"CoCActor":this._actor=this._doc}else this._actor=CoC7Utilities.getActorFromKey(this.data.docUuid)}get actor(){return this._fetch(),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get isActive(){return this.data.active||!1}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=CoC7Utilities.getActorFromKey(this.data.docUuid)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get uuid(){return this.data.uuid}get hasMaxBonusDice(){return this.bonusDice>=2}get bonusDice(){return isNaN(this.data.bonusDice)||this.data.bonusDice<0||this.data.bonusDice>2?0:this.data.bonusDice}set bonusDice(x){isNaN(x)?ui.notifications.error("Bonus dice can Only be a number"):x>2?ui.notifications.error("Max 2 bonus dice"):x<0?ui.notifications.error("No negativ bonus dice"):this.data.bonusDice=x}get hp(){return this.data.hp||(this.data.hp=0),this.actor&&(this.data.hp=this.actor.hp),this.data.hp}set hp(x){this.data.hp=x,this.actor&&this.actor.setHp(x)}addBonusDice(){this.data.bonusDice>=2?ui.notifications.error("Already have max bonus dice"):this.data.bonusDice+=1}removeBonusDice(){this.data.bonusDice<=0?ui.notifications.error("Already have 0 bonus dice"):this.data.bonusDice-=1}resetBonusDice(){this.data.bonusDice=0}get hasBonusDice(){return this.hasOneBonusDice||this.hasTwoBonusDice}get hasOneBonusDice(){return this.bonusDice>=1}get hasTwoBonusDice(){return this.bonusDice>=2}get canAssist(){return this.assist?.length>0}get canBeCautious(){return!this.hasMaxBonusDice}get assist(){return this.data.assist||[]}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=0):this.data.hasValidDex=!0),this.data.dex}get hasAGunReady(){return this.data.hasAGunReady||!1}get initiative(){let init=this.dex;return this.hasAGunReady&&(init+=50),init}get isChaser(){return!!this.data.chaser}get isPrey(){return!this.isChaser}get isValid(){return this.hasValidDex&&this.hasValidMov}get hasValidDex(){return!isNaN(Number(this.data.dex))}get hasValidMov(){return!isNaN(Number(this.data.mov))}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}tooSlow(){this.data.excluded=!0}includeInChase(){this.data.excluded=!1,this.data.escaped=!1}escaped(){this.data.escaped=!0}set slowest(x){this.data.slowest=x}get slowest(){return this.data.slowest}set fastest(x){this.data.fastest=x}get fastest(){return this.data.fastest}calculateMovementActions(minMov){void 0===this.movementAction||void 0===this.adjustedMov||isNaN(minMov)?this.movementAction=0:this.movementAction=this.adjustedMov-minMov+1}set movementAction(x){this.data.movementAction=x}get movementAction(){return this.data.movementAction}set currentMovementActions(x){this.data.currentMovementActions=x}get currentMovementActions(){return this.data.currentMovementActions||0}get hasMaxMvtActions(){return this.currentMovementActions>=this.movementAction}get hasNoMvtActions(){return this.currentMovementActions<=0}addMovementActions(x=1){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}alterMovementActions(x){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}get movementActionArray(){const baseArray=Array(this.movementAction).fill("base");if(this.currentMovementActions>=0){for(let i=0;i<this.currentMovementActions;i++)baseArray[i]="base available";return baseArray}if(this.currentMovementActions<0){return Array(Math.abs(this.currentMovementActions)).fill("deficit").concat(baseArray)}}get cssClass(){const cssClasses=[];return this.isChaser?cssClasses.push("chaser"):cssClasses.push("prey"),this.data.excluded&&cssClasses.push("excluded","too_slow"),this.data.escaped&&cssClasses.push("escaped"),this.data.fastest&&cssClasses.push("fastest"),this.data.slowest&&cssClasses.push("slowest"),this.data.active&&cssClasses.push("active"),this.data.currentMovementActions<=0&&cssClasses.push("no-actions"),cssClasses.join(" ")}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){check.options=[];for(const c of["con"]){const characteristic=this.actor.getCharacteristic(c);characteristic?.value&&check.options.push(characteristic.label)}for(const s of this.actor.driveSkills)check.options.push(s.name);for(const s of this.actor.pilotSkills)check.options.push(s.name);if(check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}else this.data.speedCheck?.name&&this.data.speedCheck?.score&&(check.name=this.data.speedCheck.name,check.score=this.data.speedCheck.score,check.refSet=!1);return check.canBeRolled=!0,check.rolled||check.score||(check.cssClasses+=" invalid",check.canBeRolled=!1),check.isValid=check.rolled&&!isNaN(check.score),check}}function sortByRoleAndDex(a,b){return!a&&b?1:!b&&a?-1:a||b?b.chaser&&!a.chaser?1:a.chaser&&!b.chaser?-1:a.dex-b.dex:0}class ChaseObstacleCard extends EnhancedChatCard{static get defaultOptions(){const options=foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/chat/cards/chase-obstacle.html",GMUpdate:!0});return options.classes.push("obstacle-card"),options}async getData(){const data=await super.getData();if(data.status=[],data.strings={},data.displayActorOnCard=game.settings.get("CoC7","displayActorOnCard"),data.status.push({name:game.i18n.localize("CoC7.ActionCost")+` :${this.data.totalActionCost}`}),data.card.breakableObstacle=data.data.obstacle?.barrier&&data.data.obstacle.hasHitPoints,data.card.validCheck=!1,data.data.states?.obstacleDefined&&(data.data.obstacle.hazard||data.data.obstacle.barrier&&!data.data.obstacle.hasHitPoints)&&(data.data.states.tryToNegotiate=!0,data.data.states.tryToBreak=!1,data.data.states.breakOrNegotiateDefined=!0),this.participant?.actor?(data.skill=this.participant.actor.find(data.data.obstacle.checkName),data.checkOptions=this.chase.getActorSkillsAndCharacteristics(this.data.participantUuid),data.skill?(data.validCheck=!0,data.validSkill=!0):data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)):(data.checkOptions=this.chase.allSkillsAndCharacteristics,data.dummyActor=!0,data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)),data.data.bonusDice||(data.data.bonusDice=0),data.data.bonusDice<2&&data.data.totalActionCost<data.data.movementAction&&(data.canTakeCautiousApproach=!0),data.customWeapon=!1,"0"===this.data.weaponChoice&&(data.customWeapon=!0),data.validCheck){let checkName,value;data.skill?(checkName=data.skill.value.name,value=data.skill.value.value):(checkName=data.data.obstacle.checkName,value=data.data.checkThreshold),data.strings.checkRollRequest=game.i18n.format("CoC7.AskRoll",{name:checkName,value}),0!==data.data.bonusDice&&(data.data.bonusDice>0?data.strings.checkRollRequest+=` (+${data.data.bonusDice})`:data.strings.checkRollRequest+=` (${data.data.bonusDice})`)}if(data.data.states?.obstacleDefined){if(data.strings.obstacleDefined=game.i18n.format("CoC7.FacingObstacle",{type:data.data.obstacle.barrier?game.i18n.localize("CoC7.ABarrier"):game.i18n.localize("CoC7.AHazard")}),data.data.obstacle.name&&(data.strings.obstacleDefined+=` (${data.data.obstacle.name})`),data.data.states.canAskRoll=!0,data.data.obstacle.barrier&&(data.status.push({name:game.i18n.localize("CoC7.Barrier")}),data.data.obstacle.hasHitPoints&&data.status.push({name:game.i18n.localize("CoC7.Breakable")})),data.data.obstacle.hazard&&data.status.push({name:game.i18n.localize("CoC7.Hazard")}),this.data.states.tryToNegotiate&&(data.validCheck?data.validSkill||data.status.push({name:game.i18n.localize("CoC7.NoValidSkill"),css:"warning"}):(data.status.push({name:game.i18n.localize("CoC7.NoValidCheck"),css:"error"}),data.strings.EnterValueTitle=game.i18n.format("CoC7.SkillSelectBase",{name:data.data.obstacle.checkName}),data.data.checkThreshold||(data.data.states.canAskRoll=!1))),this.data.states.tryToBreak){let damageStatus=game.i18n.localize("CoC7.BreakDown");this.data.objects?.obstacleDamageRoll?.total&&(damageStatus+=` : ${this.data.objects.obstacleDamageRoll.total}`),data.status.push({name:damageStatus}),this.data.states.obstacleDamageRolled&&(this.data.objects?.obstacleDamageRoll?.total<=0?data.strings.obstacleDamage=game.i18n.localize("CoC7.NoDamageDealt"):(data.inlineDamageRoll=createInlineRoll(this.data.objects.obstacleDamageRoll)?.outerHTML,data.strings.obstacleDamage=game.i18n.format("CoC7.DamageDealt",{value:data.inlineDamageRoll})))}if(this.data.states.tryToNegotiate&&data.status.push({name:game.i18n.localize("CoC7.Negotiate")}),this.data.totalCautiousApproach){const cautiousStatus={name:game.i18n.localize("CoC7.Cautious"),css:""};this.data.totalCautiousApproach>1?(cautiousStatus.css="strong",data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingVeryCautious")):data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingCautious"),this.data.flags.consumeBonusDice&&(cautiousStatus.css+=" consume"),data.status.push(cautiousStatus)}this.data.objects?.check&&(this.data.obstacle.hazard&&(this.data.movePlayer=!0),this.data.objects.check.passed?(void 0===this.data.movePlayer&&(this.data.movePlayer=!0),data.strings.obstaclePassed=game.i18n.localize("CoC7.ObstaclePassed"),this.data.objects.check.luckSpent&&(data.strings.obstaclePassed+=` (${game.i18n.localize("CoC7.GotLucky")})`),data.status.push({name:game.i18n.localize("CoC7.Success"),css:"success"})):this.data.objects.check.isFumble?(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFumble"),data.status.push({name:game.i18n.localize("CoC7.Fumble"),css:"fumble"})):(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFail"),data.status.push({name:game.i18n.localize("CoC7.Failure"),css:"failure"})))}if(this.data.states.playerActionDefined&&(this.data.obstacle.hazard?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToNegotiateHazard"):this.data.obstacle.barrier&&(this.data.states.tryToNegotiate?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToGetPastBarriers"):this.data.states.tryToBreak&&(data.strings.playerIntentions=game.i18n.localize("CoC7.TryToBreak")))),this.data.states.checkRolled&&(this.data.states.cardResolved?data.htmlCheck=await(this.data.objects.check.inlineCheck?.outerHTML):data.htmlCheck=await this.data.objects.check.getHtmlRoll()),this.data.states.cardResolved){data.playerDamageTaken=!1,data.obstalceDefinitionChanged=!1;this.listChanges().changes&&(data.obstalceDefinitionChanged=!0),this.data.obstacle.hasDamage&&this.data.objects?.check?.isFailure&&(data.playerDamageTaken=!0,data.inlineDamageTakenRoll=createInlineRoll(this.data.objects.failedDamageRoll)?.outerHTML,0===data.data.totalPlayerDamageTaken?data.strings.damageTaken=game.i18n.localize("CoC7.YouTakeNoDamage"):data.strings.damageTaken=game.i18n.format("CoC7.YouTakeSomeDamage",{amount:data.data.totalPlayerDamageTaken}),data.status.push({name:game.i18n.localize("CoC7.TotalDamage")+` :${data.data.totalPlayerDamageTaken}`})),this.data.obstacle.hasActionCost&&this.data.obstacle.hazard&&this.data.objects?.check?.isFailure&&(data.actionLost=!0,data.strings.actionLost=game.i18n.localize("CoC7.YouLostTime"),data.inlineActionLostRoll=createInlineRoll(this.data.objects.failedActionRoll)?.outerHTML),data.status.push({name:game.i18n.localize("CoC7.CardResolved")})}return this.data.states.closed&&(this.data.movePlayer?data.strings.finalOutcome=game.i18n.localize("CoC7.MoveToLocation"):data.strings.finalOutcome=game.i18n.localize("CoC7.DontMoveToLocation")),data}async GMUpdate(){if(game.user.isGM){if(this.data.states.cardResolved){if(this.data.objects?.failedDamageRoll?.total){const totalDamage=this.data.objects.failedDamageRoll.total,armorValue=this.data.flags.ignoreArmor?0:this.data.armor;CoC7Utilities.isFormula(armorValue)?this.data.armor=(await new Roll(armorValue).roll({async:!0})).total:isNaN(Number(armorValue))||(this.data.armor=Number(armorValue)),void 0===this.data.totalPlayerDamageTaken&&(this.data.totalPlayerDamageTaken=totalDamage-this.data.armor,this.data.totalPlayerDamageTaken<0&&(this.data.totalPlayerDamageTaken=0))}void 0===this.data.reflectObstaleChanges&&(this.data.reflectObstaleChanges=!0),void 0===this.data.movePlayer&&(this.data.movePlayer=(this.data.states.tryToNegotiate||this.data.obstacle.hazard)&&!this.data.states.failedConsequencesRolled),this.data.obstacle.barrier&&this.data.obstacle.hasHitPoints&&this.data.objects?.obstacleDamageRoll?.total&&(void 0===this.data.totalObstacleDamage&&(this.data.totalObstacleDamage=this.data.objects.obstacleDamageRoll.total),void 0===this.data.flags.obstacleDestoyed&&(this.data.flags.obstacleDestoyed=this.data.obstacle.HitPoints-this.data.totalObstacleDamage<=0))}this.data.states.closed&&(this.data.movementActionArray=foundry.utils.duplicate(this.participant.movementActionArray),this.data.EEC_ACTION={detachData:!0})}else console.error("CoC7: GMUpdate called from non GM user")}async localCompute(){}async assignObjects(){this.data.objects?.check&&"Object"===this.data.objects.check?.constructor?.name&&(this.data.objects.check=CoC7Check.fromData(this.data.objects.check)),this.data.objects?.obstacleDamageRoll&&"Object"===this.data.objects.obstacleDamageRoll?.constructor?.name&&(this.data.objects.obstacleDamageRoll=Roll.fromData(this.data.objects.obstacleDamageRoll)),this.data.objects?.failedDamageRoll&&"Object"===this.data.objects.failedDamageRoll?.constructor?.name&&(this.data.objects.failedDamageRoll=Roll.fromData(this.data.objects.failedDamageRoll)),this.data.objects?.failedActionRoll&&"Object"===this.data.objects.failedActionRoll?.constructor?.name&&(this.data.objects.failedActionRoll=Roll.fromData(this.data.objects.failedActionRoll))}async initialize(){this.chase&&void 0!==this.chase.activeParticipantData?.uuid&&(void 0===this.data&&(this.data={}),void 0===this.data.states&&(this.data.states={}),this.data.obstacle=this.location?.obstacleDetails,this.data.participantUuid=this.chase.activeParticipantData.uuid,this.participantData?.bonusDice>0&&(this.data.bonusDice=this.participantData.bonusDice,this.data.flags.consumeBonusDice=!0,this.data.flags.hasBonusDice=this.participant.hasBonusDice),this.data.movementActionArray=foundry.utils.duplicate(this.participant.movementActionArray),this.data.movementAction=this.participant.currentMovementActions,this.data.totalActionCost=0)}get participant(){if(this.participantData)return new _participant(this.participantData)}get participantData(){if(this.chase&&this.data.participantUuid)return this.chase.getParticipantData(this.data.participantUuid)}get location(){if(this.chase)return this.chase.getLocationData(this.data.locationUuid)}get obstacle(){if(this.location)return this.location.obstacleDetails}get chase(){if(this.data.chaseUuid)return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.data.chaseUuid)),this._chase}get roll(){let rollData;if(this.participant.actor&&this.data.obstacle.checkName){const actorSkill=this.participant.actor.find(this.data.obstacle.checkName);rollData=void 0!==actorSkill?actorSkill:{type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold}},rollData.actor={actorKey:this.participant.actor.id}}else this.data.obstacle.checkName&&this.data.checkThreshold&&(rollData={type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold},actor:{name:this.participant.name}});return rollData&&(rollData.diceModifier=this.data?.bonusDice||0,rollData.difficulty=CoC7Check.difficultyLevel.regular,rollData.denyPush=!0),rollData||void 0}get validFailedRolls(){if(!this.data.objects?.check?.isFailure)return!1;if(this.data.obstacle.hasDamage){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;if(!this.data.obstacle.failedCheckDamage)return!1;if(this.data.obstacle.failedCheckDamage&&!Roll.validate(damage))return!1}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;if(!this.data.obstacle.failedActionCost)return!1;if(this.data.obstacle.failedActionCost&&!Roll.validate(actionCost))return!1}return!0}get weaponsOptions(){const weapons=[];if(this.participant.actor?.itemTypes?.weapon?.forEach((w=>{let formula=w.system.range.normal.damage,db=this.participant.actor.db;db=null===db||0===Number(db)?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),w.system.properties.addb&&(formula+=db),w.system.properties.ahbd&&(formula=formula+db+"/2"),weapons.push({name:`${w.name} (${formula})`,damage:formula,uuid:w.uuid})})),weapons.sort(CoC7Utilities.sortByNameKey),!weapons.find((w=>w.name.toUpperCase().startsWith(game.i18n.localize("CoC7.UnarmedWeaponName")?.toUpperCase())))){let db="";this.participant.actor&&(db=this.participant.actor.db,db&&!db.startsWith("-")&&(db="+"+db),null!==db&&0!==Number(db)||(db="")),weapons.unshift({name:`${game.i18n.localize("CoC7.UnarmedWeaponName")} (1D3${db})`,damage:`1D3${db}`,uuid:"unarmed"})}return weapons.push({name:game.i18n.localize("CoC7.Other"),damage:this.data?.customWeaponDamage||null,uuid:0}),weapons}get usedWeapon(){if(!this.data?.weaponChoice){if(!this.weaponsOptions)return;this.data||(this.data={}),this.data.weaponChoice=this.weaponsOptions[0].uuid}if(this.data.weaponChoice){const weapon=this.weaponsOptions.find((e=>e.uuid===this.data.weaponChoice));if(weapon)return weapon}}get inflictedDamageFormula(){if(this.usedWeapon){const weapon=this.usedWeapon;return weapon&&weapon.damage&&Roll.validate(weapon.damage)?weapon.damage:void 0}}get validObstacleDamage(){return!!(this.data.obstacle.hasHitPoints&&!isNaN(Number(this.data.obstacle.HitPoints))&&Number(this.data.obstacle.HitPoints)>0&&this.inflictedDamageFormula)}get strings(){const strings={};return strings.damageRollRequest=this.usedWeapon.name,strings}async validateCard(options){let loactionChanged,participantChaged=!1;const obstacleUpdate={obstacleDetails:{}},participantUpdate={};this.data.flags.obstacleDestoyed&&(loactionChanged=!0,obstacleUpdate.obstacle=!1,obstacleUpdate.obstacleDetails.hazard=!1,obstacleUpdate.obstacleDetails.barrier=!1);const diff=this.listChanges();if(diff.changes&&this.data.reflectObstaleChanges)for(const[key,value]of Object.entries(diff.obstacle))"type"!==key&&(obstacleUpdate.obstacleDetails[value.key]=value.new,loactionChanged=!0);if(this.data.totalObstacleDamage>0&&this.data.obstacle.hasHitPoints){let remainingHp=this.data.obstacle.HitPoints;remainingHp-=this.data.totalObstacleDamage,remainingHp<0&&(remainingHp=0),this.obstacle.HitPoints!==remainingHp&&(obstacleUpdate.obstacleDetails.HitPoints=remainingHp,this.data.obstacle.HitPoints=remainingHp,loactionChanged=!0)}if(this.data.totalPlayerDamageTaken>0&&(participantChaged=!0,this.participant.actor?await this.participant.actor.dealDamage(this.data.totalPlayerDamageTaken,{ignoreArmor:!0}):(participantUpdate.hp=this.participantData.hp,participantUpdate.hp-=this.data.totalPlayerDamageTaken,participantUpdate.hp<0&&(participantUpdate.hp=0))),this.data.totalActionCost>0&&(participantChaged=!0,participantUpdate.currentMovementActions=this.participantData.currentMovementActions,participantUpdate.currentMovementActions-=this.data.totalActionCost),void 0===this.data.flags.consumeBonusDice&&(this.data.flags.consumeBonusDice=!0),this.data.flags.consumeBonusDice?(participantChaged=!0,participantUpdate.bonusDice=0):isNaN(this.data.bonusDice)||this.data.bonusDice===this.participant.bonusDice||(participantUpdate.bonusDice=this.data.bonusDice),this.data.movePlayer){let targetLocation;targetLocation=this.data.forward?this.location:this.chase.getLocationShift(this.location.uuid,{skip:-1}),targetLocation.uuid&&await this.chase.moveParticipantToLocation(this.participantData.uuid,targetLocation.uuid,{scrollToLocation:!0,activateLocation:!1,render:!1})}return loactionChanged&&await this.chase.updateLocation(this.location.uuid,obstacleUpdate,{render:!1}),participantChaged&&await this.chase.updateParticipant(this.participantData.uuid,participantUpdate,{render:!1}),this.data.states.closed=!0,await this.chase.activateNextParticipantTurn(),!0}async defineObstacle(options){return this.data.states||(this.data.states={}),this.data.states.obstacleDefined=!0,!0}async tryToNegotiateObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!0,this.data.states.tryToBreak=!1,!0}async tryToBreakDownObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!0,!0}async cancelObstacleDefinition(options){return this.data.states.obstacleDefined=!1,this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0}async cancelBreakOrPassChoice(options){return this.data.obstacle.hasHitPoints?(this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0):this.cancelObstacleDefinition()}async requestRoll(options){return this.data.states.playerActionDefined=!0,!0}async takeCautiousApproach(options){return this.data.totalCautiousApproach||(this.data.totalCautiousApproach=0),this.data.totalCautiousApproach+=1,this.data.bonusDice+=1,this.data.totalActionCost+=1,this.data.flags.consumeBonusDice||(this.data.flags.consumeBonusDice=!0),this.data.flags.hasBonusDice||(this.data.flags.hasBonusDice=!0),this.data.movementAction<=this.data.totalActionCost&&(this.data.flags.consumeBonusDice=!1,this.data.states.cardResolved=!0,this.data.movePlayer=!1),!0}async rollSkillCheck(options){const target=options.event.currentTarget;if(!target.classList.contains("disabled")){if(target.classList.toggle("disabled"),this.roll)return this.data.objects||(this.data.objects={}),this.data.objects.check=CoC7Check.createFromActorRollData(this.roll),!!this.data.objects.check&&(this.data.objects.check.denyPush=!0,await this.data.objects.check._perform({forceDSN:!0}),this.data.totalActionCost+=1,this.data.states.checkRolled=!0,target.classList.toggle("disabled"),this.data.objects.check.passed?(this.data.movePlayer=!0,this.data.states.cardResolved=!0):void 0===this.data.armor&&this.participant.actor&&(this.data.armor=this.participant.actor.system.attribs.armor.value||0),!0);ui.notifications.error(game.i18n.localize("CoC7.NothingToRoll"))}}async useLuck(options){return await CoC7Check.alter(this.data.objects.check,"useLuck",{target:options.event.currentTarget,update:!1}),this.data.objects.check.passed&&(this.data.states.cardResolved=!0,this.data.movePlayer=!0,this.data.totalActionCost+=1),!0}async rollFailConsequences(options){if(this.data.objects||(this.data.objects={}),this.data.obstacle.hasDamage&&this.data.objects.check?.isFailure){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;this.data.objects.failedDamageRoll=new Roll(damage),await this.data.objects.failedDamageRoll.evaluate({async:!0})}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost&&this.data.objects.check?.isFailure){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;this.data.objects.failedActionRoll=new Roll(actionCost),await this.data.objects.failedActionRoll.evaluate({async:!0}),this.data.totalActionCost+=this.data.objects.failedActionRoll.total-1}return this.data.states.failedConsequencesRolled=!0,this.data.states.cardResolved=!0,!0}async askRollObstacleDamage(options){return this.data.states.playerActionDefined=!0,!0}async rollObstacleDamage(options){return this.data.objects||(this.data.objects={}),this.data.objects.obstacleDamageRoll=new Roll(this.usedWeapon?.damage),await this.data.objects.obstacleDamageRoll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.data.objects.obstacleDamageRoll),this.data.states.obstacleDamageRolled=!0,this.data.totalActionCost+=1,this.data.states.cardResolved=!0,!0}listChanges(validate=!1){const diff={obstacle:{},player:{},changes:!1},names={barrier:game.i18n.localize("CoC7.Type"),hazard:game.i18n.localize("CoC7.Type"),hasHitPoints:game.i18n.localize("CoC7.Breakable"),HitPoints:game.i18n.localize("CoC7.HitPoints"),hasActionCost:game.i18n.localize("CoC7.ActionCost"),failedActionCost:game.i18n.localize("CoC7.ActionCost"),hasDamage:game.i18n.localize("CoC7.FightBack"),failedCheckDamage:game.i18n.localize("CoC7.WeaponDamage"),checkName:game.i18n.localize("CoC7.Check"),name:game.i18n.localize("CoC7.Name")};validate&&!this.data.validation&&(this.data.validation={});const newObstacle=foundry.utils.diffObject(this.obstacle,this.data.obstacle);for(const[key]of Object.entries(newObstacle))""===newObstacle[key]&&null===this.obstacle[key]||!isNaN(Number(newObstacle[key]))&&Number(newObstacle[key])===this.obstacle[key]||(diff.changes=!0,diff.obstacle[key]={old:this.obstacle[key],new:newObstacle[key],name:names[key],key},validate&&(this.data.validation[key]=!0));return diff}}class CoC7Chase extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/running-solid.svg"),super(data,context),this.context=context}get participants(){const pList=[],preys=this.system.participants.filter((p=>!p.chaser)).map((p=>new _participant(p))),chasers=this.system.participants.filter((p=>p.chaser)).map((p=>new _participant(p)));return this.system.participants.forEach((p=>{p.assist=[],p.chaser?p.assist=chasers.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name}))):p.assist=preys.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name})));const particpant=new _participant(p);pList.push(particpant)})),pList}get participantsObject(){const participants=this.participants;return participants.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),participants}get activeParticipantData(){return this.system.participants.find((p=>p.active))}get activeActor(){const p=this.activeParticipantData;if(p)return p.docUuid?CoC7Utilities.getActorFromKey(p.docUuid):void 0}get participantsByAdjustedMov(){const pList=this.actualParticipants.sort(((a,b)=>a.adjustedMov-b.adjustedMov));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get participantsByInitiative(){const pList=this.actualParticipants.sort(((a,b)=>b.initiative-a.initiative));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get preys(){return this.participants.filter((p=>!p.isChaser&&p.isValid))||[]}get chasers(){return this.participants.filter((p=>p.isChaser&&p.isValid))||[]}get allHaveValidMov(){return this.participants.every((e=>e.hasValidMov))}get allHaveSpeedRoll(){return this.participants.every((p=>p.speedCheck?.rolled))}getParticipantLocation(participantUuid){if(!this.system.locations?.list?.length)return;if(!this.started)return;const location=this.locations.find((l=>{const lp=l.participants?.find((p=>participantUuid===p.uuid));return!!lp}));return location||void 0}getParticipantData(participantUuid){const participant=this.system.participants.find((p=>participantUuid===p.uuid));if(participant)return foundry.utils.duplicate(participant)}getParticipant(participantUuid){const participantData=this.getParticipantData(participantUuid);if(participantData)return new _participant(participantData)}get nextActiveParticipant(){if(this.started)return this.participantsByInitiative.find((p=>p.data.currentMovementActions>0))}get slowestPrey(){const preys=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isPrey));if(preys.length>0)return preys[0]}get fastestChaser(){const chasers=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isChaser));if(chasers.length>0)return chasers.slice(-1).pop()}get actualParticipants(){const slowestPrey=this.slowestPrey,fastestChaser=this.fastestChaser;let pList=this.participants;return!this.system.includeLatecomers&&slowestPrey&&(pList=pList.filter((p=>p.isPrey||p.isChaser&&p.adjustedMov>=slowestPrey.adjustedMov))),!this.system.includeEscaped&&fastestChaser&&(pList=pList.filter((p=>p.isChaser||p.isPrey&&p.adjustedMov<=fastestChaser.adjustedMov))),pList}get slowestParticipant(){const pList=this.participantsByAdjustedMov;if(pList.length>0)return pList[0]}async updateParticipants(list,{render=!0}={}){const participantsData=this.cleanParticipantList(list);return await this.update({"system.participants":participantsData},{render})}async updateParticipant(particiantUuid,updateData,{render=!0}={}){const participants=foundry.utils.duplicate(this.system.participants),update=foundry.utils.duplicate(updateData),participantIndex=participants.findIndex((p=>particiantUuid===p.uuid));-1!==participantIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(participants[participantIndex],update,{overwrite:!0}),await this.updateParticipants(participants,{render}))}cleanParticipantList(list){const participantsData=list||foundry.utils.duplicate(this.system.participants);return list.forEach((p=>{let data;data="_participant"===p.constructor.name?p.data:p;const index=this.findIndex(participantsData,data.uuid);-1===index?(participantsData.push(data),ui.notifications.warn(game.i18n.localize("CoC7.ParticipantDataMissing"))):participantsData[index]=data})),participantsData}async assistParticipant(assistantUuid,beneficiaryUuid,{useMovementActions=!0,render=!0}={}){const assistant=this.getParticipant(assistantUuid),beneficiary=this.getParticipant(beneficiaryUuid),participantsData=foundry.utils.duplicate(this.system.participants),assistantIndex=participantsData.findIndex((p=>assistantUuid===p.uuid)),beneficiaryIndex=participantsData.findIndex((p=>beneficiaryUuid===p.uuid));if(assistant&&beneficiary)if(beneficiary.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorBeneficiaryAtMaxBonus",{name:beneficiary.name}));else{if(useMovementActions){if(assistant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid,actions:assistant.currentMovementActions}));assistant.alterMovementActions(-1),participantsData[assistantIndex]=foundry.utils.duplicate(assistant.data)}beneficiary.addBonusDice(),participantsData[beneficiaryIndex]=foundry.utils.duplicate(beneficiary.data),await this.update({"system.participants":participantsData},{render})}else ui.notifications.error(game.i18n.localize("CoC7.ParticipantNotFound"))}async toggleBonusDice(participantUuid,diceNumber,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.bonusDice>=diceNumber?participant.removeBonusDice():participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async cautiousApproach(participantUuid,{useMovementActions=!0,render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(participant.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorParticipantAtMaxBonus",{participantUuid}));else{if(useMovementActions){if(participant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(-1)}participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}}async alterParticipantMovementAction(participantUuid,count,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.alterMovementActions(count),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async activateNextParticipantTurn({scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const activeParticipant=this.nextActiveParticipant,options={scrollToLocation,activateLocation,render,html};return activeParticipant?this.activateParticipant(activeParticipant.uuid,options):this.activateParticipant(void 0,options)}async activateParticipant(participantUuid,{scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const dataUpdate=this.getActivateParticipantUpdateData(participantUuid,{scrollToLocation,activeLocation:activateLocation,html});await this.update(dataUpdate,{render})}getActivateParticipantUpdateData(participantUuid,{scrollToLocation=!0,activateLocation=!0,html=null}={}){const pUuid=participantUuid,participantsDataUpdate={},participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{delete p.active,pUuid&&pUuid===p.uuid&&(p.active=!0)})),participantsDataUpdate["system.participants"]=participants;const participantLocation=this.getParticipantLocation(pUuid);let locationsDataUpdate=null;return participantLocation?activateLocation?locationsDataUpdate=this.getActivateLocationUpdateData(participantLocation.uuid,{scrollToLocation,html}):scrollToLocation&&(locationsDataUpdate={},locationsDataUpdate["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,locationsDataUpdate["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(participantLocation.uuid,{html})):locationsDataUpdate=this.getActivateLocationUpdateData(void 0,{scrollToLocation}),locationsDataUpdate?foundry.utils.mergeObject(participantsDataUpdate,locationsDataUpdate):participantsDataUpdate}activeParticipantObstacleCheck(locationUuid,{moveParticipant=!0}={}){new ChaseObstacleCard({chaseUuid:this.uuid,locationUuid,moveParticipant,forward:locationUuid!==this.activeLocation.uuid}).toMessage()}async progressToNextRound({render=!0}={}){const participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{p.currentMovementActions<p.movementAction&&(p.currentMovementActions+=p.movementAction,p.currentMovementActions>p.movementAction&&(p.currentMovementActions=p.movementAction))})),await this.updateParticipants(participants,{render:!1}),this.activateNextParticipantTurn({render})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.update({"system.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.uuid};game.socket.emit("system.CoC7",data)}}get locations(){const locations=this.started?this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[]:this.initTrack;return this.processLocations(locations),locations}getLocationData(locationUuid,{duplicateData=!0}={}){return(duplicateData?foundry.utils.duplicate(this.locations):this.locations).find((l=>locationUuid===l.uuid))}processLocations(locations){if(locations?.length){locations[0].first=!0;for(let index=0;index<locations.length;index++){const classes=[],location=locations[index];location.name||classes.push("empty"),location.active&&classes.push("active"),location.init&&!this.started&&classes.push("init"),location.cssClasses=classes.join(" ")}locations.length>1&&(locations[locations.length-1].last=!0),locations.forEach((l=>{if(l.participants&&l.participants.length){l.participants=l.participants.filter((p=>!(null===p)));for(let i=0;i<l.participants.length;i++){const elem=l.participants[i];let p;"string"==typeof elem||elem instanceof String?p=this.system.participants.find((p=>elem===p.uuid)):"_participant"===elem?.constructor?.name?(p=void 0,ui.notifications.warn(game.i18n.localize("CoC7.ParticipantAlreadyProcessed"))):p=void 0,void 0!==p?l.participants[i]=new _participant(p):console.error("Undefined paticipant while processing participants array")}l.participants.sort(sortByRoleAndDex)}}))}}get initTrack(){if(!this.system.locations.list||0===this.system.locations.list.length)return;const locations=[],init=this.startingLine;let locationsIndexStart,initIndexStart,locationsLength;if(locationsIndexStart=init.length<=0||this.system.startingIndex>=init.length?0:init.length-this.system.startingIndex,initIndexStart=this.system.startingIndex<=0||this.system.startingIndex<=init.length?0:this.system.startingIndex-init.length,locationsLength=0===locationsIndexStart?this.system.locations.list.length:this.system.locations.list.length+locationsIndexStart,0!==init.length&&this.system.startingIndex<0)for(let index=0;index<Math.abs(this.system.startingIndex);index++)init.push({uuid:this.generateNewUuid(),init:!0,participants:[]});const chaseLocations=foundry.utils.duplicate(this.system.locations);for(let index=0;index<locationsLength;index++){let location={};const participants=[];index>=locationsIndexStart&&index-locationsIndexStart<chaseLocations.list.length&&(location=foundry.utils.duplicate(chaseLocations.list[index-locationsIndexStart]),location.init=!1,location.participants?.forEach((p=>{null!=p&&participants.push(p)}))),index>=initIndexStart&&index-initIndexStart<init.length&&(foundry.utils.mergeObject(location,init[index-initIndexStart],{overwrite:!1}),init[index-initIndexStart].participants?.forEach((p=>{null!=p&&participants.push(p)})),location.participants=participants),location.first=!1,location.end=!1,locations.push(location)}return locations}get startingLine(){const preys=this.system.includeEscaped?this.preys:this.preys?.filter((p=>!p.data.escaped)),chasers=this.system.includeLatecomers?this.chasers:this.chasers?.filter((c=>!c.data.excluded)),chaseTrack=[],chasersMinMov=this.findMinMov(chasers),chasersMaxMov=this.findMaxMov(chasers),preysMinMov=this.findMinMov(preys),preysMaxMov=this.findMaxMov(preys);if(-1!==chasersMinMov&&-1!==chasersMaxMov){for(let mov=chasersMinMov;mov<=chasersMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};chasers.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}for(let index=0;index<this.system.startingRange;index++)chaseTrack.push({uuid:this.generateNewUuid(),init:!0,participants:[]})}if(-1!==preysMinMov&&-1!==preysMaxMov)for(let mov=preysMinMov;mov<=preysMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};preys.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}return chaseTrack}async updateLocationsList(list,{render=!0}={}){const updatedList=this.cleanLocationsList(list);await this.update({"system.locations.list":updatedList},{render})}async updateLocation(locationUuid,updateData,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),update=foundry.utils.duplicate(updateData),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));-1!==locationIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(locations[locationIndex],update,{overwrite:!0}),await this.updateLocationsList(locations,{render}))}cleanLocationsList(list){const updatedList=foundry.utils.duplicate(list),partipantsUuidArray=this.system.participants.map((p=>p.uuid));return updatedList.forEach((l=>{if(delete l.cssClasses,delete l.first,delete l.last,delete l.end,l.participants&&l.participants.length){for(let i=0;i<l.participants.length;i++)l.participants=l.participants.filter((p=>!(null===p))),l.participants[i].data?.uuid&&(l.participants[i]=l.participants[i].data.uuid);l.participants=l.participants.filter((uuid=>partipantsUuidArray.includes(uuid)))}})),updatedList}async insertLocation(insertAtUuid,{shift=0,locData={},render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list);locations.forEach((l=>{delete l.active}));const locationIndex=locations.findIndex((l=>insertAtUuid===l.uuid));if(-1===locationIndex)return!1;const newLocationIndex=locationIndex+shift;if(newLocationIndex>locations.length)return!1;const newLocation=foundry.utils.duplicate(locData);return newLocation.uuid=this.generateNewUuid(),newLocation.init=locations[locationIndex].init,newLocation.active=!0,locations.splice(newLocationIndex,0,newLocation),await this.updateLocationsList(locations,{render})}async removeLocation(uuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>uuid===l.uuid));if(locations.splice(locationIndex,1),locations.forEach((l=>{delete l.active})),locations.length>0){let index=locationIndex-1;index<0&&(index=0),locations[index].active=!0}return await this.updateLocationsList(locations,{render})}async activateLocation(locationUuid,{scrollToLocation=!0,render=!0}={}){const updateData=this.getActivateLocationUpdateData(locationUuid,{scrollToLocation});await this.update(updateData,{render})}getClearActiveLocationUpdateData({scrollToLocation=!0,html=null}={}){const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=0,updateData["system.scroll.chaseTrack.to"]=-1),updateData}getActivateLocationUpdateData(locationUuid,{scrollToLocation=!0,html=null}={}){if(!locationUuid)return this.getClearActiveLocationUpdateData({scrollToLocation});const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active,locationUuid===l.uuid&&(l.active=!0)})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,updateData["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(locationUuid,{html})),updateData}get activeLocation(){if(!this.locations)return;const location=this.locations.find((l=>l.active));if(!location)return;location.participants?.length&&(location.hasParticipant=!0);const actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get previousLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(0===activeIndex)return;const location=this.locations[activeIndex-1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get nextLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(activeIndex===this.locations.length-1)return;const location=this.locations[activeIndex+1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}async locatorDropped(data){await this.setLocationCoordinates(data.locationUuid,data.x,data.y,data.scene)}async setLocationCoordinates(locationUuid,x,y,sceneId,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return locations[locationIndex].coordinates={x,y,scene:sceneId},await this.updateLocationsList(locations,{render})}async clearActiveLocationCoordinates({render=!0}={}){if(this.activeLocation)return await this.clearLocationCoordinates(this.activeLocation.uuid,{render})}async clearLocationCoordinates(locationUuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return delete locations[locationIndex].coordinates,await this.updateLocationsList(locations,{render})}async cutToTheChase(){if(this.allHaveSpeedRoll){if(this.actualParticipants?.length<2)ui.notifications.warn(game.i18n.localize("CoC7.NeedMin2Participants"));else if(this.allHaveValidMov){const participants=this.participants,minMov=this.findMinMov(this.actualParticipants);participants.forEach((p=>{p.calculateMovementActions(minMov),p.currentMovementActions=p.movementAction,p.bonusDice=0})),await this.updateParticipants(participants,{render:!1}),await this.updateLocationsList(this.locations,{render:!1}),await this.start()}}else ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"))}async restart(){const locations=this.locations.filter((l=>!l.init));for(let i=0;i<locations.length;i++)locations[i].participants&&(locations[i].participants=[]),locations[i].active&&delete locations[i].active;const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];for(let i=0;i<participantsData.length;i++)participantsData[i].active&&delete participantsData[i].active;await this.setchaseTrackScroll(0,0,{render:!1}),await this.updateLocationsList(locations,{render:!1}),await this.updateParticipants(participantsData,{render:!1}),await this.stop()}getLocationShift(locationUuid,{skip=1}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destinationIndex=locations.findIndex((l=>locationUuid===l.uuid))+skip;return 0===locations.length?null:destinationIndex>=locations.length?locations[locations.length-1]:destinationIndex<0?locations[0]:locations[destinationIndex]}async removeParticipant(participantUuid,{render=!0}={}){const p=this.getParticipant(participantUuid);await Dialog.confirm({title:game.i18n.localize("CoC7.RemoveParticipant"),content:`<p>${game.i18n.format("CoC7.RemoveParticipantHint",{name:p.name})}</p>`,yes:async()=>{const newParticipantsData=foundry.utils.duplicate(this.system.participants).filter((p=>participantUuid!==p.uuid)),locationsData=foundry.utils.duplicate(this.system.locations.list);locationsData.forEach((l=>{l.participants&&l.participants.length&&(l.participants=l.participants.filter((uuid=>participantUuid!==uuid)))})),await this.updateParticipants(newParticipantsData,{render:!1}),await this.updateLocationsList(locationsData,{render})}})}async addParticipant(participant,{render=!0,locationUuid=null,recalculateMovementActions=!0,update=!1}={}){const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];if(participant.data.chaseUuid&&delete participant.data.chaseUuid,participant.data.locationUuid&&delete participant.data.locationUuid,participant.data.update&&delete participant.data.update,!participant.uuid){let unique=!1;for(;!unique;)participant.data.uuid=foundry.utils.randomID(16),unique=0===participantsData.filter((p=>p.uuid===participant.uuid)).length}if(update){participant.currentMovementActions>participant.movementAction&&(participant.currentMovementActions=participant.movementAction);const index=participantsData.findIndex((p=>p.uuid===participant.uuid));participantsData[index]=participant.data}else participantsData.push(participant.data);if(await this.updateParticipants(participantsData,{render:render&&!this.started&&!this.recalculateMovementActions}),recalculateMovementActions){const slowest=this.slowestParticipant?.adjustedMov,participants=this.participants;participants.forEach((p=>p.calculateMovementActions(slowest))),await this.updateParticipants(participants,{render:render&&!this.started})}if(this.started&&!participant.data.escaped&&!participant.data.excluded){const locationsData=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];0===locationsData.length&&ui.notifications.error(game.i18n.localize("CoC7.ErrorEmptyLocationsList"));let locationIndex=locationsData.findIndex((l=>locationUuid===l.uuid));-1===locationIndex&&(locationIndex=0),locationsData[locationIndex].participants||(locationsData[locationIndex].participants=[]),-1===locationsData[locationIndex].participants.findIndex((p=>p===participant.uuid))&&locationsData[locationIndex].participants.push(participant.uuid),await this.updateLocationsList(locationsData,{render})}}async editParticipant(participantUuid,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){}async moveParticipant(participantUuid,locationMoved,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){let modified=!1;const locations=foundry.utils.duplicate(this.system.locations.list),originIndex=locations.findIndex((l=>l.participants?.includes(participantUuid)));let destinationIndex=originIndex+locationMoved;destinationIndex>locations.length-1&&(destinationIndex=locations.length-1),destinationIndex<0&&(destinationIndex=0);const totalMove=destinationIndex-originIndex,participant=this.getParticipant(participantUuid),participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(useMovementActions){if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid:this.participantUuid}));if(participant.currentMovementActions<Math.abs(totalMove))return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(0-Math.abs(totalMove)),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render:!1}),modified=!0}return 0!==totalMove&&(await this.moveParticipantToLocation(participantUuid,locations[destinationIndex].uuid,{render:!1}),modified=!0),activateParticipant&&(await this.activateParticipant(participantUuid,{scrollToLocation,activateLocation,render:!1}),modified=!0),activateLocation&&!activateParticipant&&(await this.activateLocation(locations[destinationIndex].uuid,{scrollToLocation,render:!1}),modified=!0),modified&&render&&await this.sheet.render(!0),totalMove}async moveParticipantToLocation(participantUuid,locationUuid,{scrollToLocation=!0,activateLocation=!0,animate=null,moveToken=!0,render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destination=locations.find((l=>locationUuid===l.uuid));if(!destination)return void console.error(`Failed to move ${participantUuid}. Location ${locationUuid} unknown`);const origin=locations.find((l=>l.participants?.includes(participantUuid)));if(!origin)return void console.error(`Failed to find ${participantUuid} in locations`);if(destination.participants||(destination.participants=[]),destination.participants.includes(participantUuid))return;destination.participants.push(participantUuid);const oldParticipantsList=origin.participants.filter((p=>participantUuid!==p));if(origin.participants=oldParticipantsList,moveToken&&destination.coordinates){const participant=this.getParticipant(participantUuid);let particpantDocument=CoC7Utilities.getDocumentFromKey(participant?.data?.docUuid);if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token)){const foundTokens=canvas.scene.tokens.filter((d=>d.actorLink&&d.actor?.id===particpantDocument.id));1===foundTokens.length&&(particpantDocument=foundTokens[0])}if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token))console.warn("No token associated with this actor");else if(destination.coordinates.scene!==game.scenes.viewed.uuid&&console.warn("Caution the scene is not the active scene"),particpantDocument.parent?.uuid!==destination.coordinates.scene)ui.notifications.error(game.i18n.localize("CoC7.ErrorTokenNotOnScene"));else{const scene=CoC7Utilities.getDocumentFromKey(destination.coordinates.scene);let x=destination.coordinates.x;const y=destination.coordinates.y;let targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize();const update=[];let foundFreeSpace=!1;for(;!foundFreeSpace;){const overlapingToken=scene.tokens.find((t=>t.id!==particpantDocument.id&&t.object.bounds.intersects(targetRect)));overlapingToken?(x=overlapingToken.object.bounds.right+1,targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize()):foundFreeSpace=!0}update.push({_id:particpantDocument.id,x,y});const showTokenMovement="boolean"==typeof animate?animate:this.system.showTokenMovement;await particpantDocument.parent.updateEmbeddedDocuments("Token",update,{animate:showTokenMovement})}}await this.updateLocationsList(locations,{render})}async setchaseTrackScroll({from,to=-1,render=!0}={}){await this.update({"system.scroll.chaseTrack.from":void 0===from?this.chaseTrackCurrentScrollPosition:from,"system.scroll.chaseTrack.to":void 0===to?this.chaseTrackCurrentScrollPosition:to},{render})}get chaseTrackCurrentScrollPosition(){const html=this.sheet?._element;if(!html)return-1;const chaseTrack=html[0].querySelector(".chase-track");return chaseTrack?chaseTrack.scrollLeft:-1}get chaseTrackActiveLocationScrollPosition(){return this.activeLocation?this.getChaseTrackLocationScrollPosition(this.activeLocation.uuid):-1}getChaseTrackLocationScrollPosition(locationUuid,{html=null}){const htmlElement=html||this.sheet?._element;if(!htmlElement||!htmlElement[0])return-1;const chaseTrack=htmlElement[0].querySelector(".chase-track");if(!chaseTrack)return-1;const activeLocationElement=chaseTrack.querySelector(`.chase-location[data-uuid="${locationUuid}"]`);if(!activeLocationElement)return-1;const leftScroll=activeLocationElement.offsetLeft+activeLocationElement.clientWidth/2-chaseTrack.clientWidth/2;return leftScroll<0?0:Math.floor(leftScroll)}findMinMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1}findMaxMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}get started(){return this.getFlag("CoC7","started")}async start(){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px","")),pCount=this.actualParticipants.length,width=Math.max((11.2*pCount+3)*remSize,40*remSize);this.sheet._tabs[0].active="setup",this.sheet.position.width=width,await this.setFlag("CoC7","started",!0),await this.activateNextParticipantTurn()}async stop(){return this.unsetFlag("CoC7","started")}generateNewUuid(){return foundry.utils.randomID(16)}getActorSkillsAndCharacteristics(participantUuid){const participant=this.getParticipant(participantUuid);if(!participant.actor)return;const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),participant.actor.skills.forEach((s=>list.push(s.name))),list}get activeActorSkillsAndCharacteristics(){const particicpantData=this.activeParticipantData;if(particicpantData)return this.getActorSkillsAndCharacteristics(particicpantData.uuid)}get allSkillsAndCharacteristics(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}get allSkillsAndCharacteristicsShort(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${c.label}`))),list.push(`${game.i18n.localize("CoC7.Luck")}`),list.push(`${game.i18n.localize("CoC7.SAN")}`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}}class CoC7Skill extends CoC7Item{constructor(data,context){if(void 0===data.system?.skillName){const skill=CoC7Skill.guessNameParts(data.name),{name,skillName,specialization,...newProperties}=skill;data.name=name,data.system||={};const properties={...data.system.properties,...newProperties};data.system={...data.system,skillName,specialization,properties}}super(data,context)}static guessNameParts(skillName){const output={combat:!1,fighting:!1,firearm:!1,name:skillName,skillName,special:!1,specialization:""},match=skillName.match(/^(.+)\s*\(([^)]+)\)$/);if(match){output.skillName=match[2].trim(),output.special=!0;const specialization=match[1].trim();output.specialization=specialization,output.name=specialization+" ("+output.skillName+")",output.fighting=specialization===game.i18n.localize("CoC7.FightingSpecializationName"),output.firearm=specialization===game.i18n.localize("CoC7.FirearmSpecializationName"),output.ranged=specialization===game.i18n.localize("CoC7.RangedSpecializationName"),output.combat=output.fighting||output.firearm||output.ranged}return output}get hasActiveEffects(){return this.activeEffects.length>0}get activeEffects(){if(this.parent&&this.parent.effects){const effectKeyFull=`skill.${this.name}`.toLowerCase(),effectKeyShort=`skill.${this.system.skillName}`.toLowerCase();let changes=this.parent.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.data.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);return changes.sort(((a,b)=>a.priority-b.priority)),changes=changes.filter((e=>e.key.toLowerCase()===effectKeyShort||e.key.toLowerCase()===effectKeyFull)),changes}return[]}get itemIdentifier(){return this.name}get rawValue(){let value=0;return"character"===this.actor.type?(value=this.base,value+=this.system.adjustments?.personal?parseInt(this.system.adjustments?.personal):0,value+=this.system.adjustments?.occupation?parseInt(this.system.adjustments?.occupation):0,value+=this.system.adjustments?.experience?parseInt(this.system.adjustments?.experience):0,game.settings.get("CoC7","pulpRuleArchetype")&&this.system.adjustments?.archetype&&(value+=parseInt(this.system.adjustments?.archetype))):value=parseInt(this.system.value),isNaN(value)?null:value}get value(){const value=this.parent?.system.skills?.[`${this.itemIdentifier}`]?.value;return value||this.rawValue}async updateValue(value){if("character"===this.actor.type){const delta=parseInt(value)-this.rawValue,exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+delta;await this.update({"system.adjustments.experience":exp>0?exp:0})}else await this.update({"system.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.type){const exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+parseInt(x);await this.update({"system.adjustments.experience":exp>0?exp:0})}}}class CoC7Vehicle extends CoCActor{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/jeep.svg"),super(data,context)}get rawBuild(){return this.build}get build(){const build=parseInt(this.system.attribs.build.value);return isNaN(build)?null:build}get hp(){if(null===this.system.attribs.build.current||void 0===this.system.attribs.build.current||""===this.system.attribs.build.current)return this.build;if(this.system.attribs.build.current>this.system.attribs.build.value)return this.build;const hp=parseInt(this.system.attribs.build.current);return isNaN(hp)?null:hp}get hpMax(){return this.build}get rawHpMax(){return this.build}async setHp(value){return value>this.build&&(value=this.build),await this.update({"system.attribs.build.current":value})}get rawDb(){return this.db}get db(){const db=parseInt(this.system.attribs.db?.value);return isNaN(db)?null:db}get rawMov(){return this.mov}get mov(){const mov=parseInt(this.system.attribs.mov?.value);return isNaN(mov)?null:mov}get mpMax(){return parseInt(this.system.attribs?.mp?.max)||0}get rawMpMax(){return this.mpMax}get sanMax(){return null}get rawSanMax(){return null}}class CoC7DecaderDie extends Die{constructor(termData){termData.faces=10,super(termData)}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7DecaderDieOther extends CoC7DecaderDie{static get DENOMINATION(){return"o"}}const SETTINGS={pulpRules:{name:"",hint:"",scope:"world",config:!1,default:!1,type:Boolean},initiativeRule:{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!1,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)},developmentRollForLuck:{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!1,default:!1,type:Boolean},allowMythosHardened:{name:"SETTINGS.allowMythosHardenedTitle",hint:"SETTINGS.allowMythosHardenedHint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDoubleMaxHealth:{name:"CoC7.Settings.PulpRules.DoubleMaxHealth.Name",hint:"CoC7.Settings.PulpRules.DoubleMaxHealth.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDevelopmentRollLuck:{name:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Name",hint:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleArchetype:{name:"CoC7.Settings.PulpRules.Archetype.Name",hint:"CoC7.Settings.PulpRules.Archetype.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleOrganization:{name:"CoC7.Settings.PulpRules.Organization.Name",hint:"CoC7.Settings.PulpRules.Organization.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleTalents:{name:"CoC7.Settings.PulpRules.Talents.Name",hint:"CoC7.Settings.PulpRules.Talents.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleFasterRecovery:{name:"CoC7.Settings.PulpRules.FasterRecovery.Name",hint:"CoC7.Settings.PulpRules.FasterRecovery.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreMajorWounds:{name:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Name",hint:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreAgePenalties:{name:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Name",hint:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Hint",scope:"world",config:!1,default:!1,type:Boolean},opposedRollTieBreaker:{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"world",config:!1,default:!1,type:Boolean}};function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}class CoC7GameRuleSettings extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:"SETTINGS.TitleRules",id:"rules-settings",template:"systems/CoC7/templates/system/rule-settings.html",width:550,height:"auto",closeOnSubmit:!0})}getData(){const options={},pulpRules={true:!1,false:!1};for(const[k,v]of Object.entries(SETTINGS))options[k]={value:game.settings.get("CoC7",k),setting:v},k.match(/^pulpRule.{2,}$/)&&(pulpRules[options[k].value]=!0);return options.pulpSelection=pulpRules.true?pulpRules.false?"some":"all":"none",options}static registerSettings(){for(const[k,v]of Object.entries(SETTINGS))game.settings.register("CoC7",k,v);_setInitiativeOptions(game.settings.get("CoC7","initiativeRule"))}activateListeners(html){super.activateListeners(html),html.find("#pulpRulesSelect").on("change",(event=>this.onChangePulpSelect(event))),html.find("input.pulpRulesSelect[type=checkbox]").on("click",(event=>this.onClickPulp(event))),html.find("button[name=reset]").on("click",(event=>this.onResetDefaults(event)))}onChangePulpSelect(event){const val=$(event.currentTarget).val();"none"!==val&&"all"!==val||$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){const checkbox=$(this);"none"===val?checkbox.prop("checked",!1):checkbox.prop("checked",!0)}))}onClickPulp(event){const pulpRules={true:!1,false:!1};$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){$(this).prop("checked")?pulpRules.true=!0:pulpRules.false=!0})),$("#pulpRulesSelect").val(pulpRules.true?pulpRules.false?"some":"all":"none")}async onResetDefaults(event){event.preventDefault();for await(const[k,v]of Object.entries(SETTINGS))await game.settings.set("CoC7",k,v?.default);return this.render()}async _updateObject(event,data){const pulpRules={true:!1,false:!1};for await(const key of Object.keys(SETTINGS))game.settings.set("CoC7",key,data[key]),key.match(/^pulpRule.{2,}$/)&&(pulpRules[data[key]]=!0);game.settings.set("CoC7","pulpRules",pulpRules.true&&!pulpRules.false)}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&[type].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/archetype.html",width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const coreCharacteristics=[];for(const[key,selected]of Object.entries(sheetData.data.system.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedSuggestedOccupations=await TextEditor.enrichHTML(sheetData.data.system.suggestedOccupations,{async:!0,secrets:sheetData.editable}),sheetData.enrichedSuggestedTraits=await TextEditor.enrichHTML(sheetData.data.system.suggestedTraits,{async:!0,secrets:sheetData.editable}),sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey),sheetData.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(sheetData.coreCharacteristicsString+=coreCharacteristics.join(orString)),sheetData.itemProperties=[],sheetData.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${sheetData.data.system.talents}`),sheetData.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${sheetData.data.system.bonusPoints}`),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7ArmorSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","armor"],template:"systems/CoC7/templates/items/armor.hbs",width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.html",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.initialReading=this.item.system.initialReading,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.spellsLearned=this.spellsLearned,sheetData.exhausted=!1!==await this.item.checkExhaustion(),sheetData.studyCompleted=this.item.system.study.progress===this.item.system.study.necessary,sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.spellListEmpty=0===this.item.system.spells.length,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedContent=await TextEditor.enrichHTML(sheetData.data.system.content,{async:!0,secrets:sheetData.editable}),sheetData}get spellsLearned(){let amount=0;const spells=this.item.system.spells;for(const spell of spells)spell.system.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".edit-spell").click((event=>this._onSpellDetail(event))),html.find(".spell-name").click((event=>this._onSpellDetail(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="system.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onSpellDetail(event){event.preventDefault();const index=$(event.currentTarget).parents("li").data("index");return await this.item.spellDetail(index)}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.system.spells?foundry.utils.duplicate(this.item.system.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"system.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];for(const item of dataList)item&&["skill","spell"].includes(item.type)&&("spell"===item.type?spells.push(item):"skill"===item.type&&this.item.system.type.other&&this.modifyOthersGains(null,"add",{name:item.name}));await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode,options={}){let index=null,element=null;event&&(event.preventDefault(),element=$(event.currentTarget),index=element.parents("tr").data("index"));const skills=this.item.system.gains.others?foundry.utils.duplicate(this.item.system.gains.others):[];switch(mode){case"add":skills.push({name:options.name||game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"system.gains.others":skills})}}class CoC7CharacterSheetV3 extends CoC7CharacterSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV3","actor","character"],template:"systems/CoC7/templates/actors/character-sheet-v3.hbs",width:980,height:810,scrollY:[".sheet-body"]})}_getHeaderButtons(){let buttons=super._getHeaderButtons();return buttons=[{label:game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}async toggleSheetMode(event){const ClassName=CONFIG.Actor.sheetClasses.character["CoC7.CoC7CharacterSheetMinimized"]?.cls;if(void 0!==ClassName){const token=this.options.token;await this.close(),await new ClassName(this.object,{editable:this.object.isOwner}).render(!0,{token})}}async getData(){const sheetData=await super.getData(),hp=this.actor.system.attribs.hp;if(sheetData.imgSaturation=hp.value/hp.max,sheetData.biographySections=[],sheetData.data.system.biography instanceof Array&&sheetData.data.system.biography.length){for(const biography of sheetData.data.system.biography)sheetData.biographySections.push({title:biography.title,value:biography.value,enriched:await TextEditor.enrichHTML(biography.value,{async:!0,secrets:sheetData.editable})});sheetData.biographySections[0].isFirst=!0,sheetData.biographySections[sheetData.biographySections.length-1].isLast=!0}return sheetData.showPartValues=!game.settings.get("CoC7","hidePartValues"),sheetData}activateListeners(html){super.activateListeners(html),this.object.sheet.isEditable&&(html.find(".add-new-section-scroll").click((()=>{this.actor.createBioSection(),html.find(".sheet-body").each(((i,el)=>{el.scrollTop=el.scrollHeight-el.clientHeight})),this.render()})),html.find(".portrait-frame").click((()=>{this._tabs.find((t=>".sheet-nav"===t._navSelector))?.activate("portrait-frame")})),html.find(".optionbox .photo-frame").click((event=>{const objectFit=event.currentTarget.dataset.objectFit;this.actor.update({"flags.CoC7.portraitFrame":objectFit})})))}}class CoC7CharacterSheetMinimized extends CoC7CharacterSheet{constructor(options={}){super(options),this.summarized=!0}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","actor","character","summarized"],height:200,width:700})}_getHeaderButtons(){let buttons=super._getHeaderButtons();return buttons=[{label:game.i18n.localize("CoC7.Maximize"),class:"test-extra-icon",icon:"fas fa-window-maximize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}async toggleSheetMode(event){const ClassName=CONFIG.Actor.sheetClasses.character["CoC7.CoC7CharacterSheetV3"]?.cls;if(void 0!==ClassName){const token=this.options.token;await this.close(),await new ClassName(this.object,{editable:this.object.isOwner}).render(!0,{token})}}}class CoC7ContainerSheet extends ActorSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","storage"],template:"systems/CoC7/templates/actors/storage-sheet.html",width:672,height:765,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"items"}]})}async _onDrop(event){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if(!this.options.editable)return;const items=this.actor.items.toObject()||[];for(const item of dataList)item&&item.system&&["book","item","spell","weapon"].includes(item.type)&&items.push(item.toObject());await this.actor.update({items})}onCloseSheet(){}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.isKeeper=game.user.isGM,sheetData.editable=this.isEditable,sheetData.itemsByType={},sheetData.items){for(const item of sheetData.items)Object.prototype.hasOwnProperty.call(sheetData.itemsByType,item.type)||(sheetData.itemsByType[item.type]=[]),sheetData.itemsByType[item.type].push(item);for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey)}return sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryWeapons=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"weapon")||!sheetData.data.system.flags.locked,sheetData.showInventoryArmor=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"armor")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryWeapons||sheetData.showInventoryArmor,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".show-detail").click(this._onItemSummary.bind(this)),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".lock").click(this._onLockClicked.bind(this))}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(message.actorTo=value)}}),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}async _onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=await item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").slideToggle(200)}}class CoC7ChaseParticipantImporter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:game.i18n.localize("CoC7.AddActorToChase"),template:"systems/CoC7/templates/apps/chase-participant-importer.html",classes:["coc7","dialog","chase-participant-importer"],editable:!0,resizable:!1,submitOnChange:!0,closeOnSubmit:!1,width:300,height:"auto"})}activateListeners(html){super.activateListeners(html);new DragDrop({dropSelector:".form-container",permissions:{drop:game.user.isGM},callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);new DragDrop({dragSelector:".chase-token",permissions:{dragstart:game.user.isGM},callbacks:{dragstart:this._onTokenSelectorDragStart.bind(this)}}).bind(html[0]),html.find(".reset-participant").click((async()=>{this.object={},this._actor=null,await this.render(!0)})),html.find(".food-chain").click((async()=>{this.object.chaser=!this.object.chaser,await this.render(!0)})),html.find("[data-action]").click(this._onAction.bind(this))}async _onTokenSelectorDragStart(event){const data={type:"getToken",appId:this.appId,callBack:"addTokenToChase"};event.dataTransfer.setData("text/plain",JSON.stringify(data))}async getData(){if(!this.object.initiative){const init=CoCActor.getCharacteristicDefinition().find((c=>"dex"===c.key));this.object.initiative=init.label}if(!this.object.speedCheck){const speedCheck=CoCActor.getCharacteristicDefinition().find((c=>"con"===c.key));this.object.speedCheck={name:speedCheck.label}}this.validateParticipant();const data=await super.getData();if(data.participant=new _participant(this.object),data.object.speedCheck.name&&this.actor){const speedCheck=this.actor.find(data.object.speedCheck.name);speedCheck?(data.object.speedCheck.score=speedCheck.value.value,data.speedCheckReadOnly=!0):data.participant.speedCheck.score&&!this.object.speedCheck?.score&&(data.object.speedCheck.score=data.participant.speedCheck.score)}if(data.object.initiative&&this.actor){const initiative=this.actor.find(data.object.initiative);initiative?(data.object.dex=initiative.value.value,data.initReadOnly=!0):data.object.dex=data.participant.initiative}return data.actor=this.actor,data.chase=this.chase,data.data=this.data,data.optionsList={},this.chase&&(data.skillsAndCharacteristicsList=this.chase.allSkillsAndCharacteristicsShort),this.actor&&(data.skillsAndCharacteristicsList=[],CoCActor.getCharacteristicDefinition().forEach((c=>data.skillsAndCharacteristicsList.push(`${c.label}`))),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.Luck")}`),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.SAN")}`),this.actor.skills.forEach((s=>data.skillsAndCharacteristicsList.push(s.name)))),data}get chase(){return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.object.chaseUuid)),this._chase}get actor(){return this.object.docUuid?(this._actor||(this._actor=CoC7Utilities.getActorFromKey(this.object.docUuid)),this._actor):null}async _updateObject(event,formData){foundry.utils.mergeObject(this,formData),await this.render(!0)}async _onDropParticipant(event){const dropString=event.dataTransfer.getData("text/plain"),dropData=JSON.parse(dropString),docUuid=CoC7Utilities.getActorDocumentFromDropData(dropData);this.object.docUuid=docUuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)}async addTokenToChase(tokens){1===tokens.length?(this.object.docUuid=tokens[0].document?.uuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)):ui.notifications.warn(game.i18n.localize("CoC7.ErrorTokenIncorrect"))}async _onAction(event){event.preventDefault();switch(event.currentTarget.dataset.action){case"chase-cancel":this.close();break;case"chase-add":{const participant=new _participant(this.object);if(this.chase.started){if(!(participant.movementAction&&participant.movementAction>0))return void ui.notifications.warn(game.i18n.localize("CoC7.DoesNotMeetMinimumReqToBeAdded"));if(this.data.overrideMovementAction){const slowest=this.chase.slowestParticipant;isNaN(participant.adjustedMov)&&(participant.mov=slowest.adjustedMov),this.data.recalculationNeeded=!1}}await this.chase.addParticipant(participant,{locationUuid:this.object.locationUuid,recalculateMovementActions:this.data.recalculationNeeded,update:this.object.update}),this.close()}break;case"roll-speed-check":{const participant=new _participant(this.object);if(participant.speedCheck.refSet){const roll=new CoC7Check;participant.data.rolled=!0,roll.actor=participant.actor.actorKey,participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0}foundry.utils.mergeObject(this.object,participant.data),this.render(!0)}}}validateParticipant(){const participant=new _participant(this.object);if(this.data||(this.data={}),this.object.excluded=!1,this.object.escaped=!1,this.data.recalculationNeeded=!1,this.data.participantExcluded=!1,this.data.movementActionDelta=0,!this.data.overrideMovementAction){const slowestPrey=this.chase.slowestPrey,fastestChaser=this.chase.fastestChaser,slowest=this.chase.slowestParticipant;participant.adjustedMov<slowest?.adjustedMov?(this.data.recalculationNeeded=!0,participant.movementAction=1):(this.data.recalculationNeeded=!1,participant.calculateMovementActions(slowest?.adjustedMov)),participant.isChaser&&slowestPrey&&!this.chase.system.includeLastCommers&&participant.adjustedMov<slowestPrey.adjustedMov&&(this.object.excluded=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooSlow"),this.data.recalculationNeeded=!1),participant.isPrey&&fastestChaser&&!this.chase.system.includeEscaped&&participant.adjustedMov>fastestChaser.adjustedMov&&(this.object.escaped=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooFast"),this.data.recalculationNeeded=!1)}}static async create(data){if(data.dropData){const docUuid=CoC7Utilities.getActorDocumentFromDropData(data.dropData);docUuid&&(data.docUuid=docUuid),delete data.dropData}return new CoC7ChaseParticipantImporter(data).render(!0)}}class CoC7ChaseSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],template:"systems/CoC7/templates/items/chase.html",width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}static get type(){return"coc7ChaseSheet"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(options={}){const sheetData=super.getData(options);return sheetData.participants=this.item.participantsObject,sheetData.participantsByInitiative=this.item.participantsByInitiative,sheetData.preys=this.item.preys,sheetData.chasers=this.item.chasers,sheetData.preysMinMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.preysMaxMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMinMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMaxMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasers.forEach((p=>{p.adjustedMov<sheetData.preysMinMov?p.tooSlow():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.chasersMaxMov,p.slowest=p.adjustedMov===sheetData.chasersMinMov})),sheetData.preys.forEach((p=>{p.adjustedMov>sheetData.chasersMaxMov?p.escaped():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.preysMaxMov,p.slowest=p.adjustedMov===sheetData.preysMinMov})),sheetData.locations=this.item.locations,sheetData.allHaveValidMov=this.allHaveValidMov,sheetData.activeLocation=this.item.activeLocation,sheetData.activeLocation&&(sheetData.activeLocation.title=sheetData.activeLocation.coordinates?game.i18n.format("CoC7.LocationCoordinate",{x:sheetData.activeLocation.coordinates.x,y:sheetData.activeLocation.coordinates.y}):game.i18n.localize("CoC7.DragOnCanvas")),sheetData.previousLocation=this.item.previousLocation,sheetData.nextLocation=this.item.nextLocation,sheetData.started=this.item.started,sheetData.isKeeper=game.user.isGM,sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".dropdown-element").on("click",(event=>this._onDropDownElementSelected(event))),html.find(".dropbtn").click((event=>{event.preventDefault(),event.stopPropagation();event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show")})),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".pin-location").contextmenu(this.clearActiveLocationCoordinates.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this)),html.find(".button").click(this._onButtonClick.bind(this)),html.find(".name-container").click(this._onLocationClick.bind(this)),html.find(".obstacle-type").click(this._onObstacleTypeClick.bind(this)),html.find(".toggle").click(this._onToggle.bind(this)),html.find(".participant-control").click(this._onParticipantControlClicked.bind(this)),html.find(".chase-control").click(this._onChaseControlClicked.bind(this)),html.find(".location-control").click(this._onLocationControlClick.bind(this));new DragDrop({dragSelector:".pin-location",permissions:{dragstart:this._canPinLocationDragStart.bind(this)},callbacks:{dragstart:this._onPinLocationDragStart.bind(this)}}).bind(html[0]);new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);if(new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0]),this.item.started){html.find(".chase-location .chase-participant").click(this._onChaseParticipantClick.bind(this));new DragDrop({dragSelector:".chase-participant",dropSelector:".chase-location",permissions:{dragstart:this._canChaseParticipantDragStart.bind(this),drop:this._canChaseParticipantDragDrop.bind(this)},callbacks:{dragstart:this._onChaseParticipantDragStart.bind(this),drop:this._onChaseParticipantDragDrop.bind(this),dragover:this._onDragEnter.bind(this)}}).bind(html[0]),html.find(".chase-location").on("dragleave",(event=>this._onDragLeave(event)))}}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).object;if(data=updateData?foundry.utils.mergeObject(data,updateData):foundry.utils.expandObject(data),this.item.system.locations?.list?.length&&data.system.startingIndex>this.item.system.locations.list.length&&(data.system.startingIndex=this.item.system.locations.list.length),data.system.participants){const participants=foundry.utils.duplicate(this.item.system.participants);for(const[k,v]of Object.entries(data.system.participants)){const index=participants.findIndex((p=>p.uuid===k));if(-1===index)ui.notifications.error("Participant table corrupted");else{const original=participants[index],cleaned=clean(v);foundry.utils.mergeObject(original,cleaned),participants[index]=original}}data.system.participants=participants}if(data.locations){const locations=foundry.utils.duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);foundry.utils.mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}delete data.locations,data.system.locations={list:locations}}return foundry.utils.flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget,override="true"===target?.dataset?.override;if(target?.name?.includes(".hp")){const[,,uuid]=target.name.split("."),participant=this.item.getParticipant(uuid);participant&&participant.actor&&(isNaN(Number(target.value))||await participant.actor.setHp(Number(target.value)))}if(override){const[,type,uuid,subType,data]=target.name.split("."),index=this.findParticipantIndex(uuid);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"system.participants":participants})}}super._updateObject(event,formData)}static async setScroll(app,html,data){if(!data.editable)return;const initialOpening=html[0].classList.contains("window-app"),chaseTrack=html[0].querySelector(".chase-track");if(!chaseTrack)return;let start=data.data.scroll?.chaseTrack.from,end=data.data.scroll?.chaseTrack.to;if(void 0===start&&(start=0),void 0===end&&(end=-1),initialOpening){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px",""));if(app.item.started){const pCount=app.item.actualParticipants?.length,width=(11.2*pCount+3)*remSize;app.activateTab("setup"),app.position.width=Math.max(width,40*remSize)}else app.position.width=45*remSize;return await app.item.activateNextParticipantTurn({html})}start&&-1!==start&&chaseTrack.scrollTo({top:0,left:start,behavior:"instant"}),-1!==end&&chaseTrack.scrollTo({top:0,left:end,behavior:"smooth"})}static onClose(app,html){app.item.update({"system.trackScrollPosition":-1})}findParticipantIndex(uuid){return this.item.system.participants.findIndex((p=>p.uuid===uuid))}findLocationIndex(uuid){return this.item.system.locations.list.findIndex((p=>p.uuid===uuid))}findLocation(uuid){return this.item.system.locations.list.find((p=>p.uuid===uuid))}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}async _onDropDownElementSelected(event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget;target.closest(".dropdown-content")?.classList.toggle("show");const assistantUuid=target.closest(".initiative-block")?.dataset?.uuid,beneficiaryUuid=target.dataset.beneficiaryUuid;await this.item.assistParticipant(assistantUuid,beneficiaryUuid)}async _onToggle(event){const target=event.currentTarget,toggle=target.getAttribute("toggle"),data=foundry.utils.expandObject({[toggle]:!target.classList.contains("switched-on")});if(data.locations){const locations=foundry.utils.duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);foundry.utils.mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}await this.item.updateLocationsList(locations)}}async _onObstacleTypeClick(event){const target=event.currentTarget,uuid=target.closest(".obstacle").dataset.uuid,locations=foundry.utils.duplicate(this.item.system.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={});const obstacle=locations[locationIndex].obstacleDetails,type=target.classList.contains("barrier")?"barrier":"hazard",active=obstacle[type];obstacle.barrier=!1,obstacle.hazard=!1,obstacle[type]=!active,locations[locationIndex].obstacle=!active,await this.item.updateLocationsList(locations)}async _onLocationClick(event){const lUuid=event.currentTarget.closest(".chase-location").dataset.uuid;await this.item.activateLocation(lUuid)}async _onLocationControlClick(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;const action=target.dataset.action,lUuid=target.closest(".chase-location").dataset.uuid;switch(action){case"remove":await this.item.removeLocation(lUuid);break;case"add-after":await this.item.insertLocation(lUuid,{shift:1});break;case"add-before":await this.item.insertLocation(lUuid,{shift:0});break;case"add-participant":CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid:lUuid,dropData:{}})}}async _onChaseParticipantClick(event){const pUuid=event.currentTarget.dataset?.uuid;await this.item.activateParticipant(pUuid)}async _onParticipantControlClicked(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;if(target.classList.contains("dropdown"))return;event.stopPropagation();const participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(participantUuid){switch(target.dataset.action){case"drawGun":await this.toggleParticipantGun(participantUuid);break;case"decreaseActions":await this._onChangeMovementActions(-1,event);break;case"increaseActions":await this._onChangeMovementActions(1,event);break;case"moveBackward":await this.item.moveParticipant(participantUuid,-1,{render:!0});break;case"moveForward":await this.item.moveParticipant(participantUuid,1,{render:!0});break;case"activateParticipant":return await this.item.activateParticipant(participantUuid);case"bonusDice":{const diceNumber=target.dataset.count;await this.item.toggleBonusDice(participantUuid,diceNumber),this.item.activateNextParticipantTurn()}break;case"cautiousApproach":await this.item.cautiousApproach(participantUuid);break;case"editParticipant":{const participant=this.item.getParticipant(participantUuid),location=this.item.getParticipantLocation(participantUuid);participant.data.chaseUuid=this.item.uuid,participant.data.locationUuid=location.uuid,participant.data.update=!0,CoC7ChaseParticipantImporter.create(participant.data)}break;case"removeParticipant":await this.item.removeParticipant(participantUuid)}this.item.activateNextParticipantTurn()}}async _onChaseControlClicked(event){event.preventDefault();const target=event.currentTarget;event.stopPropagation();const locationUuid=target.closest(".obstacle")?.dataset?.uuid;if(locationUuid)return"obstacle-skill-check"===target.dataset.action?this.item.activeParticipantObstacleCheck(locationUuid):void 0}async _onChangeMovementActions(count,event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget,participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(!participantUuid)return;const participants=this.item.participants,participant=participants.find((p=>participantUuid===p.uuid));participant.hasMaxMvtActions&&count>0||(participant.alterMovementActions(count),await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}async _onButtonClick(event){const target=event.currentTarget,action=target.dataset?.action;if(action)switch(action){case"init":if(!isNaN(this.item.system.locations.total)&&this.item.system.locations.total>0){const locations=Array.apply(null,Array(this.item.system.locations.total)).map((function(){return{uuid:foundry.utils.randomID(16)}}));locations[0].name="Start",locations.length>1&&(locations[locations.length-1].name="End"),await this.item.updateLocationsList(locations)}break;case"reset":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmResetChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmResetChaseHint")}</p>`,yes:async()=>{await this.item.updateLocationsList([]),await this.item.stop()}});break;case"cut2chase":this.item.allHaveSpeedRoll?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmCut2Chase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmCut2ChaseHint")}</p>`,yes:()=>this.item.cutToTheChase()}):ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"));break;case"restart":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmRestartChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmRestartChaseHint")}</p>`,yes:()=>this.item.restart()});break;case"nextRound":this.item.nextActiveParticipant?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmNextChaseRound")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmNextChaseRoundHint")}</p>`,yes:()=>this.item.progressToNextRound()}):this.item.progressToNextRound()}}_canPinLocationDragStart(selector){return!!game.user.isGM}async _onPinLocationDragStart(event){const a=event.currentTarget,i=a.querySelector("i.icon"),dragIcon=a.querySelector(".pin-image");event.dataTransfer.setDragImage(dragIcon,0,dragIcon.height);const locationElement=a.closest(".chase-location"),data={type:"locator",CoC7Type:"chase"};data.icon=i.dataset.linkIcon,data.locationUuid=locationElement.dataset.uuid,data.docUuid=this.item.uuid,data.callBack="locatorDropped",event.dataTransfer.setData("text/plain",JSON.stringify(data))}_canChaseParticipantDragStart(selector){return!!game.user.isGM}_canChaseParticipantDragDrop(selector){return!!game.user.isGM}async _onChaseParticipantDragStart(dragEvent){const dragData={uuid:dragEvent.currentTarget.dataset.uuid,type:"participant"};dragEvent.dataTransfer.setData("text/plain",JSON.stringify(dragData))}async _onChaseParticipantDragDrop(dragEvent){const dataString=dragEvent.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);this._onDragLeave(dragEvent);const locationUuid=dragEvent.currentTarget.dataset.uuid;if("participant"===data.type){const oldLocation=this.findLocation(locationUuid);if(oldLocation&&oldLocation.participants?.includes(data.uuid))return;await this.item.setchaseTrackScroll({render:!1}),await this.item.moveParticipantToLocation(data.uuid,locationUuid)}else CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid,dropData:data})}_onDragOver(dragEvent){this._onDragEnter(dragEvent)}_onDragEnter(dragEvent){dragEvent.currentTarget.classList.add("drag-over")}_onDragLeave(dragEvent){const target=dragEvent.currentTarget;target.classList?.remove("drag-over")}async _onDropParticipant(event){const target=event.currentTarget,uuid=target.dataset?.uuid,dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,uuid)}async _onAddParticipant(event){event.preventDefault();const data={chaseUuid:this.item.uuid};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data.dropData=JSON.parse(dataString)}CoC7ChaseParticipantImporter.create(data)}async _onRollParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"system.participants":participants})}_onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}_onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"system.participants":participants})}async _onDeleteDriver(event){const uuid=event.currentTarget.closest(".driver").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];delete participants[index].docUuid,await this.item.update({"system.participants":participants})}async _onDeleteParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];participants.splice(index,1),await this.item.update({"system.participants":participants})}async _onResetRoll(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"system.participants":participants})}async alterParticipant(data,uuid){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],oldParticipant=participants[this.findParticipantIndex(uuid)];oldParticipant.mov&&delete oldParticipant.mov,foundry.utils.mergeObject(oldParticipant,participant),await this.item.update({"system.participants":participants})}async clearActiveLocationCoordinates(){await this.item.clearActiveLocationCoordinates()}async addParticipant(data){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":if(data.id){const item=game.items.get(data.id);if("skill"!==item?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}participant.speedCheck||(this.item.system.vehicle?participant.speedCheck={type:"item",name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.drive-auto")}:participant.speedCheck={id:"con",type:"characteristic",name:game.i18n.localize("CHARAC.Constitution")});const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];let unique=!1;for(;!unique;)participant.uuid=foundry.utils.randomID(16),unique=0===participants.filter((p=>p.uuid===participant.uuid)).length;participants.push(participant),await this.item.update({"system.participants":participants})}async toggleParticipantGun(participantUuid){const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],participant=participants.find((p=>participantUuid===p.uuid));participant&&(participant.hasAGunReady=!participant.hasAGunReady,await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}}function clean(obj){for(const propName in obj){const tp=foundry.utils.getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class CoC7ItemSheetV2 extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],template:"systems/CoC7/templates/items/item-sheetV2.html",width:500,height:450,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(options={}){const sheetData=super.getData(options);return sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{width:525,height:506})}}class CoC7JournalSheet extends JournalSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7MacroConfig extends MacroConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7PlaylistConfig extends PlaylistConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7RollTableConfig extends RollTableConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SceneConfig extends SceneConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)),html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&["item","weapon","skill","book","spell"].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=foundry.utils.duplicate(this.item.system.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"system.bioSections":bio})}async _onAddBio(){const bio=this.item.system.bioSections?foundry.utils.duplicate(this.item.system.bioSections):[];bio.push(null),await this.item.update({"system.bioSections":bio})}_onAddMonetary(){const values=this.item.system.monetary.values?foundry.utils.duplicate(this.item.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.item.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=foundry.utils.duplicate(this.item.system.monetary.values);values.splice(Number(div.dataset.index),1),this.item.update({"system.monetary.values":values})}async _onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],template:"systems/CoC7/templates/items/setup.html",width:565,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const era=Object.entries(this.item.flags?.CoC7?.cocidFlag?.eras??{}).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:this.item.system.items,era:void 0===era[0]||era[0]});sheetData.skills=items.filter((it=>"skill"===it.type)),sheetData.otherItems=items.filter((it=>"skill"!==it.type)),sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.itemsListEmpty=0===sheetData.otherItems.length,sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});return sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedBackstory=await TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.bioSections&&(formData["system.bioSections"]=Object.values(system.bioSections||[])),system.monetary.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),"system.characteristics.points.enabled"===event.currentTarget?.name&&(formData["system.characteristics.rolls.enabled"]=!event.currentTarget.checked),"system.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData["system.characteristics.points.enabled"]=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return`systems/CoC7/templates/items/${this.item.type}-sheet.html`}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hadNonCharacterOwner=sheetData.hasOwner&&"character"!==this.actor?.type,sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.isSpecialized=this.item.system.properties.special,sheetData.canModifySpec=!this.item.system.properties.firearm&&!this.item.system.properties.fighting,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _updateObject(event,formData){const skillName=formData["system.skillName"]||this.item.system.skillName;if(this.item.system.properties?.special){const specialization=formData["system.specialization"]||this.item.system.specialization;formData.name=specialization+" ("+skillName+")"}else formData.name=skillName;return super._updateObject(event,formData)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/spell/main.html",classes:["coc7","item","spell"],width:500,height:"auto",resizable:!1,scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".option").click((event=>this.modifyType(event))),html.find("#cast-spell").click((event=>{event.preventDefault(),this.item.cast(!1)})),html.find("#cast-spell-hidden").click((event=>{event.preventDefault(),this.item.cast(!0)}))}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],template:"systems/CoC7/templates/items/status.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}activateListeners(html){super.activateListeners(html),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],template:"systems/CoC7/templates/items/talent.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:555,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=await super.getData();sheetData.properties=[],this.actor.system.properties.armed&&sheetData.properties.push(game.i18n.localize("CoC7.ArmedVehicle"));const expanded=this.actor.getFlag("CoC7","expanded");return sheetData.expanded=void 0===expanded||expanded,sheetData.expanded?sheetData.options.height=420:sheetData.options.height="auto",sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=foundry.utils.duplicate(this.actor.system.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"system.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=foundry.utils.duplicate(this.actor.system.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"system.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.attribs.armor.locations&&(formData["system.attribs.armor.locations"]=Object.values(system.attribs.armor.locations||[])),super._updateObject(event,formData)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:545,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.combatSkill=[],sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hasOwner&&(sheetData.firearmSkills=this.actor.firearmSkills,sheetData.fightingSkills=this.actor.fightingSkills,sheetData.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.system.properties.combat))),sheetData.combatSkill.sort(CoC7Utilities.sortByNameKey)),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({price:this.item.system.price[key]??0,id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.usesAlternateSkill=!0===this.item.system.properties.auto||!0===this.item.system.properties.brst||!0===this.item.system.properties.thrown,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionSpecial=await TextEditor.enrichHTML(sheetData.data.system.description.special,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onPropertyClick(event){event.preventDefault();const propertyId=event.currentTarget.closest(".weapon-property").dataset.property;await this.item.toggleProperty(propertyId)}}function compendiumFilter(){const oldSearchFilter=Compendium.prototype._onSearchFilter;Compendium.prototype._onSearchFilter=function(event,query,rgx,html){if("Item"===this.collection.documentName){void 0===html&&(query=this.element[0].querySelector(this.options.filters[0].inputSelector).value,rgx=new RegExp(RegExp.escape(query),"i"),html=this.element[0].querySelector(this.options.filters[0].contentSelector));const typeSelect=this.element[0].querySelector("select[name=coc7type"+this.appId+"]"),eraSelect=this.element[0].querySelector("select[name=coc7era"+this.appId+"]"),type=typeSelect.value;let era="";switch(type){case"occupation":case"setup":case"skill":case"weapon":eraSelect.parentElement.style.display="",era=eraSelect.value;break;default:eraSelect.parentElement.style.display="hide"}const isNameSearch=!!query,isSearch=isNameSearch||""!==type||""!==era,entryIds=new Set,folderIds=new Set,autoExpandFolderIds=new Set;if(isSearch){const includeFolder=(folder,autoExpand=!0)=>{if(!folder)return;if("string"==typeof folder&&(folder=this.collection.folders.get(folder)),!folder)return;const folderId=folder._id;folderIds.has(folderId)?autoExpand&&!autoExpandFolderIds.has(folderId)&&autoExpandFolderIds.add(folderId):(folderIds.add(folderId),autoExpand&&autoExpandFolderIds.add(folderId),folder.folder&&includeFolder(folder.folder))};isNameSearch&&this._matchSearchFolders(rgx,includeFolder),function(app,isNameSearch,query,type,era,entryIds,folderIds,includeFolder){const entries=app.collection.index??app.collection.contents,matchedFolderIds=new Set(folderIds);for(const entry of entries){const entryId=app._getEntryId(entry);if(matchedFolderIds.has(entry.folder?._id??entry.folder))entryIds.add(entryId);else{const matchName=!isNameSearch||query.test(SearchFilter.cleanQuery(app._getEntryName(entry))),matchType=""===type||type===entry.type,eras=Object.keys(entry.flags?.CoC7?.cocidFlag?.eras??{}),matchEras=""===era||0===eras.length||eras.includes(era);matchName&&matchType&&matchEras&&(entryIds.add(entryId),includeFolder(entry.folder))}}}(this,isNameSearch,rgx,type,era,entryIds,folderIds,includeFolder)}for(const el of html.querySelectorAll(".directory-item"))if(!el.classList.contains("hidden"))if(el.classList.contains("folder")){const match=isSearch&&folderIds.has(el.dataset.folderId);el.style.display=!isSearch||match?"flex":"none",autoExpandFolderIds.has(el.dataset.folderId)?isSearch&&match&&el.classList.remove("collapsed"):el.classList.toggle("collapsed",!game.folders._expanded[el.dataset.uuid])}else el.style.display=!isSearch||entryIds.has(el.dataset.entryId)?"flex":"none"}else oldSearchFilter.call(this,event,query,rgx,html)},Hooks.on("renderCompendium",(async(app,html,data)=>{if("Item"===app.collection.documentName){app.collection.indexed||await app.collection.getIndex();const types=[...new Set(data.index.filter((i=>"#[CF_tempEntity]"!==i.name)).map((item=>item.type)))],select=[],selectedType=app.options.filterCoC7?.type??"",selectedEra=app.options.filterCoC7?.era??"";select.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");const groupTypes=[{key:"archetype",name:"CoC7.Entities.Archetype"},{key:"book",name:"CoC7.Entities.Book"},{key:"item",name:"CoC7.Entities.Item"},{key:"occupation",name:"CoC7.Entities.Occupation"},{key:"setup",name:"CoC7.Entities.Setup"},{key:"skill",name:"CoC7.Entities.Skill"},{key:"spell",name:"CoC7.Entities.Spell"},{key:"status",name:"CoC7.Entities.Status"},{key:"talent",name:"CoC7.Entities.Talent"},{key:"weapon",name:"CoC7.Entities.Weapon"}];for(const groupType of groupTypes)types.includes(groupType.key)&&select.push('<option value="'+groupType.key+'"'+(selectedType===groupType.key?' selected="selected"':"")+">"+game.i18n.localize(groupType.name)+"</option>");const eras=[];eras.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");for(const era of Object.entries(COC7.eras).map((e=>({id:e[0],name:game.i18n.localize(e[1])}))).sort(CoC7Utilities.sortByNameKey))eras.push('<option value="'+era.id+'"'+(selectedEra===era.id?' selected="selected"':"")+">"+era.name+"</option>");let uncommon=game.i18n.localize("CoC7.SkillRarityShort");"CoC7.SkillRarityShort"===uncommon&&(uncommon="??"),html.find("li.directory-item").each((function(){const row=$(this);let item=[];item=void 0!==data.index?data.index.find((i=>i._id===row.data("document-id"))):app.collection.index.get(row.data("document-id")),item&&"skill"===item.type&&row.find("a").html(item.name+" ("+(item.system?.base??"?")+"%"+(item.system?.properties?.rarity?" "+uncommon:"")+")")})),html.find("header.directory-header").after('<div class="compendiumfilter"><div class="header-search flexrow"><i class="fas fa-layer-group"></i><select name="coc7type'+app.appId+'" style="">'+select.join("")+'</select></div><div class="header-search flexrow era_select" style="display:none"><i class="fas fa-layer-group"></i><select name="coc7era'+app.appId+'" style="">'+eras.join("")+"</select></div></div>"),html.find("select").change(app.options.filters[0].callback.bind(app))}}))}class CoCID{static init(){CONFIG.Actor.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("system.base"),CONFIG.Item.compendiumIndexFields.push("system.properties"),CONFIG.JournalEntry.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Macro.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Playlist.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.RollTable.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Scene.compendiumIndexFields.push("flags.CoC7.cocidFlag"),game.system.api={cocid:CoCID}}static regExKey(){return new RegExp("^("+Object.keys(CoCID.gamePropertyLookup).join("|")+")\\.(.*?)\\.(.+)$")}static getPrefix(document){for(const type in CoCID.documentNameLookup)if(document instanceof CoCID.documentNameLookup[type])return type+"."+(document.type??"")+".";return""}static guessId(document){return CoCID.getPrefix(document)+CoC7Utilities.toKebabCase(document.name)}static guessGroupFromKey(id){if(id){const key=id.replace(/([^\\.-]+)$/,"");if("-"===key.substr(-1))return key}return""}static guessGroupFromDocument(document){return CoCID.guessGroupFromKey(document.flags?.CoC7?.cocidFlag?.id)}static eraText(era){return!1===era?game.i18n.localize("CoC7.Any"):(!0===era&&(era=game.settings.get("CoC7","worldEra")),game.i18n.format(COC7.eras[era]??"CoC7.CoCIDFlag.error.unknown-era",{era}))}static async expandItemArray({itemList,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){let items=[];const cocids=itemList.filter((it=>"string"==typeof it));if(items=itemList.filter((it=>"string"!=typeof it)),cocids.length){const found=await CoCID.fromCoCIDRegexBest({cocidRegExp:CoCID.makeGroupRegEx(cocids),type:"i",lang,era,langFallback,showLoading}),all=[];for(const cocid of cocids){const item=found.find((i=>i.flags.CoC7.cocidFlag.id===cocid));item&&all.push(item)}if(all.length<cocids.length){const notmissing=[];for(const doc of all)notmissing.push(doc.flags.CoC7.cocidFlag.id);!0===era&&(era=game.settings.get("CoC7","worldEra")),ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:cocids.filter((x=>!notmissing.includes(x))).join(", "),lang,era:CoCID.eraText(era)}))}items=items.concat(all)}return items}static findCocIdInList(cocid,list){let itemName="";const CoCIDKeys=Object.assign(foundry.utils.flattenObject(game.i18n._fallback.CoC7?.CoCIDFlag?.keys??{}),foundry.utils.flattenObject(game.i18n.translations.CoC7?.CoCIDFlag?.keys??{}));return void 0!==CoCIDKeys[cocid]&&(itemName=CoCIDKeys[cocid]),(void 0===list.filter?Object.values(list):list).filter((i=>i.flags?.CoC7?.cocidFlag?.id===cocid||""!==itemName&&itemName===i.name))}static makeGroupRegEx(cocids){if("string"==typeof cocids)cocids=[cocids];else if(void 0===cocids||"function"!=typeof cocids.filter)return;const splits={},rgx=CoCID.regExKey();for(const i of cocids){const key=i.match(rgx);key&&(void 0===splits[key[1]]&&(splits[key[1]]={}),void 0===splits[key[1]][key[2]]&&(splits[key[1]][key[2]]=[]),splits[key[1]][key[2]].push(key[3]))}const regExParts=[];for(const t in splits){const row=[];for(const s in splits[t])splits[t][s].length>1?row.push(s+"\\.("+splits[t][s].join("|")+")"):row.push(s+"\\."+splits[t][s].join(""));row.length>1?regExParts.push(t+"\\.("+row.join("|")+")"):regExParts.push(t+"\\."+row.join(""))}return regExParts.length>1?new RegExp("^("+regExParts.join("|")+")$"):new RegExp("^"+regExParts.join("")+"$")}static async fromCoCIDRegexAll({cocidRegExp,type,lang=game.i18n.lang,era=!1,scope="all",langFallback=!0,showLoading=!1}={}){let candidates=await CoCID.fromCoCIDRegexAllMixed({cocidRegExp,type,lang,era,scope,langFallback,showLoading});return langFallback&&"en"!==lang&&(candidates=CoCID.filterByLanguage(candidates,lang)),candidates.sort(CoCID.compareCoCIDPrio),await CoCID.onlyDocuments(candidates,showLoading)}static async fromCoCIDAll({cocid,lang=game.i18n.lang,era=!1,scope="all",langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];const parts=cocid.match(CoCID.regExKey());return parts?(""===lang&&(lang=game.i18n.lang),CoCID.fromCoCIDRegexAll({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$"),type:parts[1],lang,era,scope,langFallback,showLoading})):[]}static async fromCoCIDRegexBest({cocidRegExp,type,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!1===era)return ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[];let candidates=await this.fromCoCIDRegexAllMixed({cocidRegExp,type,lang,era,scope:"all",langFallback,showLoading});langFallback&&"en"!==lang&&(candidates=CoCID.filterByLanguage(candidates,lang)),candidates.sort(CoCID.compareCoCIDPrio);const ids={};for(const candidate of candidates)Object.prototype.hasOwnProperty.call(ids,candidate.flags.CoC7.cocidFlag.id)||(ids[candidate.flags.CoC7.cocidFlag.id]=candidate);return await CoCID.onlyDocuments(Object.values(ids),showLoading)}static fromCoCID(cocid,lang=game.i18n.lang,era=!0,langFallback=!0){return!1===era?(ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[]):CoCID.fromCoCIDBest({cocid,lang,era,langFallback})}static fromCoCIDBest({cocid,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];if(!1===era)return ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[];const type=cocid.split(".")[0],cocidRegExp=new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$");return CoCID.fromCoCIDRegexBest({cocidRegExp,type,lang,era,langFallback,showLoading})}static async fromCoCIDRegexAllMixed({cocidRegExp,type,lang=game.i18n.lang,era=!1,scope="all",langFallback=!0,showLoading=!1}={}){if(!cocidRegExp)return[];let results=[],count=0;return showLoading&&(["all","world"].includes(scope)&&count++,["all","compendiums"].includes(scope)&&(count+=game.packs.size)),["all","world"].includes(scope)&&(results=results.concat(await CoCID.docsFromWorld({cocidRegExp,type,lang,era,langFallback,progressBar:count}))),["all","compendiums"].includes(scope)&&(results=results.concat(await CoCID.indexesFromCompendia({cocidRegExp,type,lang,era,langFallback,progressBar:count}))),showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),results}static async docsFromWorld({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}={}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra")),progressBar>0&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100/progressBar)});const gameProperty=CoCID.getGameProperty(`${type}..`),candidateDocuments=game[gameProperty]?.filter((d=>{const cocidFlag=d.getFlag("CoC7","cocidFlag");if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));return void 0===candidateDocuments?[]:candidateDocuments}static async indexesFromCompendia({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra"));const documentType=CoCID.getDocumentType(type).name;let indexDocuments=[],count=1;for(const pack of game.packs)progressBar>0&&(SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100*count/progressBar)}),count++),pack.documentName===documentType&&(pack.indexed||await pack.getIndex(),indexDocuments=indexDocuments.concat(pack.index.filter((i=>{if("string"!=typeof i.flags?.CoC7?.cocidFlag?.id)return!1;const eras=i.flags.CoC7.cocidFlag.eras??{},matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(i.flags.CoC7.cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(i.flags.CoC7.cocidFlag.lang)&&matchingEras}))));return indexDocuments}static compareCoCIDPrio(a,b){const ap=parseInt(a.flags.CoC7.cocidFlag.priority,10),bp=parseInt(b.flags.CoC7.cocidFlag.priority,10);if(ap===bp){const ao=a instanceof foundry.abstract.DataModel;return ao===b instanceof foundry.abstract.DataModel?0:ao?-1:1}return bp-ap}static getGameProperty(cocid){const type=cocid.split(".")[0],gameProperty=CoCID.gamePropertyLookup[type];if(!gameProperty)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return gameProperty}static get gamePropertyLookup(){return{a:"actors",c:"cards",i:"items",je:"journal",m:"macros",p:"playlists",rt:"tables",s:"scenes"}}static getDocumentType(cocid){const type=cocid.split(".")[0],documentType=CoCID.documentNameLookup[type];if(!documentType)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return documentType}static get documentNameLookup(){return{a:Actor,c:Card,i:Item,je:JournalEntry,m:Macro,p:Playlist,rt:RollTable,s:Scene}}static async onlyDocuments(candidates,showLoading){const len=candidates.length;let count=0;for(const offset in candidates)showLoading&&(SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(count/len)}),count+=100),candidates[offset]instanceof foundry.abstract.DataModel||(candidates[offset]=await fromUuid(candidates[offset].uuid));return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),candidates}static filterByLanguage(indexes,lang){const ids=indexes.reduce(((c,i)=>(c[i.flags.CoC7.cocidFlag.id]=c[i.flags.CoC7.cocidFlag.id]||i.flags.CoC7.cocidFlag.lang===lang,c)),{});return indexes.filter((i=>"en"!==i.flags.CoC7.cocidFlag.lang||!ids[i.flags.CoC7.cocidFlag.id]))}static async documentsFromWorld({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}={}){console.warn("Calling documentsFromWorld directly is depreciated");let documents=await CoCID.docsFromWorld({cocidRegExp,type,lang,era,langFallback,progressBar});return langFallback&&"en"!==lang&&(documents=CoCID.filterByLanguage(documents,lang)),documents.sort(CoCID.compareCoCIDPrio),documents}static async documentsFromCompendia({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}){console.warn("Calling documentsFromCompendia directly is depreciated");let indexes=await CoCID.indexesFromCompendia({cocidRegExp,type,lang,era,langFallback,progressBar});return langFallback&&"en"!==lang&&(indexes=CoCID.filterByLanguage(indexes,lang)),indexes.sort(CoCID.compareCoCIDPrio),await CoCID.onlyDocuments(indexes,progressBar>0)}}const{RegionBehaviorType}=foundry.data.regionBehaviors??{},RegionBehaviorTypeClass=void 0===RegionBehaviorType?class{}:RegionBehaviorType;class CoC7ClickableEvents extends RegionBehaviorTypeClass{static initSelf(){if(!foundry.utils.isNewerVersion(game.version,"12"))return;Object.assign(CONFIG.RegionBehavior.dataModels,{coc7ClickableEvents:CoC7ClickableEvents}),Object.assign(CONFIG.RegionBehavior.typeIcons,{coc7ClickableEvents:"fa-solid fa-computer-mouse"}),DocumentSheetConfig.registerSheet(RegionBehavior,"CoC7",foundry.applications.sheets.RegionBehaviorConfig,{types:["coc7ClickableEvents"],makeDefault:!0});const oldOnClickLeft=TokenLayer.prototype._onClickLeft;TokenLayer.prototype._onClickLeft=function(event){if(oldOnClickLeft.call(this,event),canvas.activeLayer instanceof TokenLayer){const destination=canvas.activeLayer.toLocal(event);for(const region of canvas.scene.regions.contents)region.behaviors.filter((b=>!b.disabled)).find((b=>b.system instanceof CoC7ClickableEvents))&&region.object.polygonTree.testPoint(destination)&&region.behaviors.filter((b=>!b.disabled)).map((async b=>{!0===await b.system._handleMouseOverEvent()&&await b.system._handleLeftClickEvent()}))}};const oldOnClickRight=TokenLayer.prototype._onClickRight;TokenLayer.prototype._onClickRight=function(event){if(oldOnClickRight.call(this,event),canvas.activeLayer instanceof TokenLayer){const destination=canvas.activeLayer.toLocal(event);for(const region of canvas.scene.regions.contents)region.behaviors.filter((b=>!b.disabled)).find((b=>b.system instanceof CoC7ClickableEvents))&&region.object.polygonTree.testPoint(destination)&&region.behaviors.filter((b=>!b.disabled)).map((async b=>{!0===await b.system._handleMouseOverEvent()&&await b.system._handleRightClickEvent()}))}},document.body.addEventListener("mousemove",(async function(event){if(canvas.activeLayer instanceof TokenLayer){const pointer=canvas?.app?.renderer?.events?.pointer;if(!pointer)return;const destination=canvas.activeLayer.toLocal(event);let setPointer=!1;for(const region of canvas.scene.regions.contents)region.behaviors.filter((b=>!b.disabled)).find((b=>b.system instanceof CoC7ClickableEvents))&&region.object.polygonTree.testPoint(destination)&&(setPointer=await region.behaviors.filter((b=>!b.disabled)).reduce((async(c,b)=>{const r=await b.system._handleMouseOverEvent();return!1!==r&&!0!==r&&console.error(b.uuid+" did not return a boolean"),c=c||r}),!1));document.getElementById("board").style.cursor=setPointer?"pointer":""}}))}static defineSchema(){return{mouseOver:new foundry.data.fields.JavaScriptField({async:!0,gmOnly:!0,initial:"return false",label:"CoC7.ClickableEvents.MouseOver.Title",hint:"CoC7.ClickableEvents.MouseOver.Hint"}),leftClick:new foundry.data.fields.JavaScriptField({async:!0,gmOnly:!0,label:"CoC7.ClickableEvents.LeftClick.Title"}),rightClick:new foundry.data.fields.JavaScriptField({async:!0,gmOnly:!0,label:"CoC7.ClickableEvents.RightClick.Title"})}}async _handleMouseOverEvent(){try{const fn=new foundry.utils.AsyncFunction("scene","region","behavior",`{${this.mouseOver}\n}`);return await fn.call(globalThis,this.scene,this.region,this.behavior)}catch(err){console.error(err)}}async _handleLeftClickEvent(){try{const fn=new foundry.utils.AsyncFunction("scene","region","behavior",`{${this.leftClick}\n}`);return await fn.call(globalThis,this.scene,this.region,this.behavior)}catch(err){console.error(err)}}async _handleRightClickEvent(){try{const fn=new foundry.utils.AsyncFunction("scene","region","behavior",`{${this.rightClick}\n}`);return await fn.call(globalThis,this.scene,this.region,this.behavior)}catch(err){console.error(err)}}static async ClickRegionLeftUuid(docUuid){const doc=await fromUuid(docUuid);doc?doc.behaviors.filter((b=>!b.disabled)).map((async b=>{!0===await b.system._handleMouseOverEvent()&&await b.system._handleLeftClickEvent()})):console.error("journalPageUuids "+docUuid+" not loaded")}static async ClickRegionRightUuid(docUuid){const doc=await fromUuid(docUuid);doc?doc.behaviors.filter((b=>!b.disabled)).map((async b=>{!0===await b.system._handleMouseOverEvent()&&await b.system._handleRightClickEvent()})):console.error("journalPageUuids "+docUuid+" not loaded")}static async hasPermissionDocument(documentUuid){const doc=await fromUuid(documentUuid);return doc?.testUserPermission(game.user,CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER)??!1}static async InSceneRelativeTeleport(event,destinationRegion){if("tokenMoveIn"===event.name){const sourceTL=event.region.shapes.reduce(((c,p)=>{if(p instanceof foundry.data.PolygonShapeData)for(let i=0,im=p.points.length;i<im;i+=2)(!1===c[0]||p.points[i]<c[0])&&(c[0]=p.points[i]),(!1===c[1]||p.points[i+1]<c[1])&&(c[1]=p.points[i+1]);else if(p instanceof foundry.data.RectangleShapeData){const x=Math.min(p.x+p.width,p.x),y=Math.min(p.y+p.height,p.y);(!1===c[0]||x<c[0])&&(c[0]=x),(!1===c[1]||y<c[1])&&(c[1]=y)}return c}),[!1,!1]),destinationTL=(await fromUuid(destinationRegion)).shapes.reduce(((c,p)=>{if(p instanceof foundry.data.PolygonShapeData)for(let i=0,im=p.points.length;i<im;i+=2)(!1===c[0]||p.points[i]<c[0])&&(c[0]=p.points[i]),(!1===c[1]||p.points[i+1]<c[1])&&(c[1]=p.points[i+1]);else if(p instanceof foundry.data.RectangleShapeData){const x=Math.min(p.x+p.width,p.x),y=Math.min(p.y+p.height,p.y);(!1===c[0]||x<c[0])&&(c[0]=x),(!1===c[1]||y<c[1])&&(c[1]=y)}return c}),[!1,!1]),destinationX=event.data.destination.x-sourceTL[0]+destinationTL[0],destinationY=event.data.destination.y-sourceTL[1]+destinationTL[1];await event.data.token.object.stopAnimation(),event.data.token.update({x:destinationX,y:destinationY},{animate:!1})}}static async MapPinToggle(toggle,{journalPageUuids=[],noteUuids=[],permissionFalse=CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE,permissionTrue=CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER}={}){game.socket.emit("system.CoC7",{type:"toggleMapNotes",toggle:!0}),game.settings.set("core",NotesLayer.TOGGLE_SETTING,!0);for(const docUuid of journalPageUuids){const doc=await fromUuid(docUuid);if(doc){let permission=permissionTrue;toggle||(permission=permissionFalse),await doc.update({"ownership.default":permission})}else console.error("journalPageUuids "+docUuid+" not loaded")}for(const docUuid of noteUuids){const doc=await fromUuid(docUuid);if(doc){let texture="systems/CoC7/assets/art/map-pin.svg";toggle||(texture="systems/CoC7/assets/art/map-pin-dark.svg"),await doc.update({"texture.src":texture})}else console.error("noteUuids "+docUuid+" not loaded")}}static async openDocument(documentUuid,pageId=null,anchor=null){const doc=await fromUuid(documentUuid);doc?.testUserPermission(game.user,CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER)&&(pageId?doc.pages.get(pageId)?.testUserPermission(game.user,CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER)&&doc.sheet.render(!0,{pageId,anchor}):doc.sheet.render(!0))}static async toggleTileJournalPages(active,tileUuids,journalUuids,pageUuids,{pagePermission=CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER}={}){for(const docUuid of tileUuids){const doc=await fromUuid(docUuid);doc?await doc.update({hidden:!active}):console.error("Tile "+docUuid+" not loaded")}const permission=active?pagePermission:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE;for(const docUuid of pageUuids){const doc=await fromUuid(docUuid);doc?await doc.update({"ownership.default":permission}):console.error("Journal Page "+docUuid+" not loaded")}for(const docUuid of journalUuids){const doc=await fromUuid(docUuid);doc?0!==pageUuids.length&&permission!==pagePermission&&0!==doc.pages.contents.filter((d=>d.ownership.default===pagePermission)).length||await doc.update({"ownership.default":active?CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE}):console.error("Journal "+docUuid+" not loaded")}}static async toScene(sceneUuid){const doc=await fromUuid(sceneUuid);doc?setTimeout((()=>{doc.view()}),100):console.error("Scene "+sceneUuid+" not loaded")}}function init_listen(){Hooks.once("init",(async()=>{CONFIG.ActiveEffect.documentClass=CoC7ActiveEffect,CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={vehicle:CoC7Vehicle},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book,spell:CoC7Spell,chase:CoC7Chase,skill:CoC7Skill},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-inventory-items.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/common/active-effects.hbs","systems/CoC7/templates/actors/parts/actor-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-keeper-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/actors/character-sheet-v2.html","systems/CoC7/templates/actors/character/summary.html","systems/CoC7/templates/items/book/details.html","systems/CoC7/templates/items/spell/details.html","systems/CoC7/templates/apps/investigator-wizard/introduction.hbs","systems/CoC7/templates/apps/investigator-wizard/configuration.hbs","systems/CoC7/templates/apps/investigator-wizard/select-setup.hbs","systems/CoC7/templates/apps/investigator-wizard/select-archetype.hbs","systems/CoC7/templates/apps/investigator-wizard/select-occupation.hbs","systems/CoC7/templates/apps/investigator-wizard/set-characteristics.hbs","systems/CoC7/templates/apps/investigator-wizard/set-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/view-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/set-investigator.hbs","systems/CoC7/templates/apps/investigator-wizard/set-occupation-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/toggle-skill.hbs","systems/CoC7/templates/apps/investigator-wizard/set-archetype-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/points-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/backstory.hbs","systems/CoC7/templates/apps/investigator-wizard/create.hbs","systems/CoC7/templates/chat/messages/roll-container.hbs","systems/CoC7/templates/chat/messages/roll-dice.hbs","systems/CoC7/templates/actors/parts/actor-picture-frame-v3.hbs","systems/CoC7/templates/actors/parts/actor-characteristics-v3.hbs","systems/CoC7/templates/actors/parts/actor-development-v3.hbs","systems/CoC7/templates/actors/parts/actor-skills-v3.hbs","systems/CoC7/templates/actors/parts/actor-combat-v3.hbs","systems/CoC7/templates/actors/parts/actor-possessions-v3.hbs","systems/CoC7/templates/actors/parts/actor-background-v3.hbs","systems/CoC7/templates/actors/parts/actor-keeper-notes-v3.hbs","systems/CoC7/templates/actors/parts/actor-active-effects-v3.hbs"])}(),function(){if(game.settings.registerMenu("CoC7","gameRules",{name:"CoC7.Settings.Rules.Name",label:"CoC7.Settings.Rules.Label",hint:"CoC7.Settings.Rules.Hint",icon:"fas fa-book",type:CoC7GameRuleSettings,restricted:!0}),CoC7GameRuleSettings.registerSettings(),game.settings.register("CoC7","useContextMenus",{name:"SETTINGS.UseContextMenus",hint:"SETTINGS.UseContextMenusHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","dholeUploadDirectory",{name:"CoC7.Settings.DholeUpload.Directory.Name",hint:"CoC7.Settings.DholeUpload.Directory.Hint",scope:"world",config:!0,type:CoC7DirectoryPicker.DefaultDirectory,default:"[data] worlds/"+game.world.id+"/dhole-images"}),game.settings.register("CoC7","worldEra",{name:"CoC7.Settings.WorldEra.Name",hint:"CoC7.Settings.WorldEra.Hint",scope:"world",config:!0,default:"standard",type:String,choices:COC7.eras,onChange:()=>{ui.players.render(!0)}}),game.settings.register("CoC7","showWorldEra",{name:"CoC7.Settings.ShowWorldEra.Name",hint:"CoC7.Settings.ShowWorldEra.Hint",scope:"world",config:!0,default:!0,type:Boolean,onChange:()=>{ui.players.render(!0)}}),game.settings.register("CoC7","dropCoCID",{name:"CoC7.Settings.DropCoCID.Name",hint:"CoC7.Settings.DropCoCID.Hint",scope:"world",config:!0,default:"",type:String,choices:{"":"CoC7.Settings.DropCoCID.Prompt",Y:"CoC7.Settings.DropCoCID.UseCoCID",N:"CoC7.Settings.DropCoCID.IgnoreCoCID"}}),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","trustedCanModfyChatCard",{name:"SETTINGS.TrustedCanModfyChatCard",hint:"SETTINGS.TrustedCanModfyChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","trustedCanSeeChatCard",{name:"SETTINGS.TrustedCanSeeChatCard",hint:"SETTINGS.TrustedCanSeeChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","distanceElevation",{name:"SETTINGS.CheckElevation",hint:"SETTINGS.CheckElevationHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","distanceTheatreOfTheMind",{name:"SETTINGS.SceneDistanceNotCalcualtedNoError",hint:"SETTINGS.SceneDistanceNotCalcualtedNoErrorHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","tokenDropMode",{name:"SETTINGS.TokenDropMode",hint:"SETTINGS.TokenDropModeHint",scope:"world",config:!0,default:"ask",type:String,choices:{ask:"SETTINGS.TokenDropModeAsk",roll:"SETTINGS.TokenDropModeRoll",average:"SETTINGS.TokenDropModeAverage",ignore:"SETTINGS.TokenDropModeIgnore"}}),game.settings.register("CoC7","overrideGameArtwork",{name:"SETTINGS.OverrideGameArtwork",hint:"SETTINGS.OverrideGameArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideGameArtwork")&&(game.settings.register("CoC7","artPauseImage",{name:"SETTINGS.ArtPauseImage",hint:"SETTINGS.ArtPauseImageHint",scope:"world",config:!0,default:"systems/CoC7/assets/icons/time-trap.svg",type:String}),game.settings.register("CoC7","artPauseText",{name:"SETTINGS.ArtPauseText",hint:"SETTINGS.ArtPauseTextHint",scope:"world",config:!0,default:"The Blind Idiot God is dreaming...",type:String})),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","toolTipDelay",{name:"CoC7.toolTipDelay",scope:"world",config:!0,default:1500,type:Number}),game.settings.register("CoC7","hidePartValues",{name:"SETTINGS.hidePartValues",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","showIconsOnly",{name:"SETTINGS.showIconsOnly",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")){function _setRootFontSize(size){$(":root").css("font-size",size),ui.sidebar.render(!0);for(const[,w]of Object.entries(ui.windows))w.render(!0)}game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number,onChange:size=>_setRootFontSize(size)})}if(game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardNoTargets",{name:"SETTINGS.DoNotPromptNoTargetSelected",hint:"SETTINGS.DoNotPromptNoTargetSelectedHit",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"client",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","experimentalFeatures",{name:"SETTINGS.ShowExperimentalFeatures",hint:"SETTINGS.ShowExperimentalFeaturesHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","hiddendevmenu",{name:"Hidden dev menu",hint:"Use at your own risk",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","showWelcomeMessage",{name:"SETTINGS.showWelcomeMessage",hint:"SETTINGS.showWelcomeMessage",scope:"world",config:!1,default:!0,type:Boolean}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","systemUpdatedModuleVersion",{scope:"world",config:!1,default:{}}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),game.settings.register("CoC7","showInstructions",{name:"Show changelog/instructions",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","InvestigatorWizardSetup",{name:"Force specific setup CoC ID for Investigator Wizard",scope:"world",config:!1,type:String,default:""}),game.settings.register("CoC7","InvestigatorWizardQuantity",{name:"Number of investigators a single user without create actor rights can own",scope:"world",config:!1,type:Number,default:0}),game.settings.register("CoC7","InvestigatorWizardOwnership",{name:"Default permissions for non owner players",scope:"world",config:!1,type:Number,default:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE}),game.settings.register("CoC7","InvestigatorWizardRerolls",{name:"Allow players to reroll characteristics",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardPointBuy",{name:"Force point buy instead of setup choice",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardQuickFire",{name:"Quick fire setup values",scope:"world",config:!1,type:Array,default:[]}),game.settings.register("CoC7","InvestigatorWizardChooseValues",{name:"Choose where to place rolled characteristics",scope:"world",config:!1,type:Boolean,default:!1}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),CONFIG.Dice.terms.t=CoC7DecaderDie,CONFIG.Dice.terms.o=CoC7DecaderDieOther}(),Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7ContainerSheet,{types:["container"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"]}),Actors.registerSheet("CoC7",CoC7CharacterSheetMinimized,{types:["character"]}),Actors.registerSheet("CoC7",CoC7CharacterSheetV3,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArmorSheet,{types:["armor"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0}),Scenes.unregisterSheet("core",SceneConfig),Scenes.registerSheet("CoC7",CoC7SceneConfig,{makeDefault:!0}),Journal.unregisterSheet("core",JournalSheet),Journal.registerSheet("CoC7",CoC7JournalSheet,{makeDefault:!0}),RollTables.unregisterSheet("core",RollTableConfig),RollTables.registerSheet("CoC7",CoC7RollTableConfig,{makeDefault:!0}),Macros.unregisterSheet("core",MacroConfig),Macros.registerSheet("CoC7",CoC7MacroConfig,{makeDefault:!0}),Playlists.unregisterSheet("core",PlaylistConfig),Playlists.registerSheet("CoC7",CoC7PlaylistConfig,{makeDefault:!0}),Handlebars.registerHelper("rollActorImg",(function(actorKey){return chatHelper.getActorImgFromKey(actorKey)||"../icons/svg/mystery-man-black.svg"})),Handlebars.registerHelper("localizeRollName",(function(options){const difficulty=options.hash.difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(options.hash.difficulty),modifier=options.hash.modifier>0?`+${options.hash.modifier}`:options.hash.modifier<0&&options.hash.modifier.toString();return game.i18n.format("CoC7.LinkCheck"+(difficulty?"Diff":"")+(modifier?"Modif":"")+(options.hash.pushing?"Pushing":""),{difficulty,modifier,name:options.hash.name})})),Handlebars.registerHelper("calcHard",(function(value){return value.toString().match(/^\d+$/)?Math.floor(value/2):0})),Handlebars.registerHelper("calcExtreme",(function(value){return value.toString().match(/^\d+$/)?Math.floor(value/5):0})),compendiumFilter(),CoCID.init(),CoC7Link.init(),Hooks.once("diceSoNiceReady",(dice3d=>{for(const system in dice3d.DiceFactory.systems){const d100=dice3d.DiceFactory.systems[system].dice.find((d=>"d100"===d.type));if(void 0!==d100){if(void 0===dice3d.DiceFactory.systems[system].dice.find((d=>"dt"===d.type))){const diceDecader=Object.assign(Object.create(Object.getPrototypeOf(d100)),d100);diceDecader.type="dt",dice3d.DiceFactory.systems[system].dice.push(diceDecader)}if(void 0===dice3d.DiceFactory.systems[system].dice.find((d=>"do"===d.type))){const diceDecader=Object.assign(Object.create(Object.getPrototypeOf(d100)),d100);diceDecader.type="do",dice3d.DiceFactory.systems[system].dice.push(diceDecader)}}}})),CoC7ClickableEvents.initSelf(),CONFIG.TextEditor.enrichers.push({pattern:/@chaosiumUUID\[([^#\]]+)(?:#([^\]]+))?](?:{([^}]+)})?/gi,enricher:async(match,{relativeTo}={})=>{const[selectors,hash,name]=match.slice(1,4);let data={name,classes:["content-link","broken"],icon:"fas fa-unlink"};const parts=selectors?.split(/\s*,\s*/);if(parts){const keys=parts.reduce(((c,i)=>{const keyval=i.match(/^(([^:]+):)(.+)?$/);return keyval?c[keyval[2]]=keyval[3]:c.uuid=i,c}),{});if(keys.uuid){const doc=await fromUuid(keys.uuid,{relative:relativeTo});if(doc&&(data={name:name||doc.name||keys.uuid,classes:["content-link"],dataset:{link:"",uuid:doc.uuid,id:doc.id,type:doc.documentName},icon:keys.icon??CONFIG[doc.documentName].sidebarIcon},hash&&(data.dataset.hash=hash),keys.img)){const a=document.createElement("a");a.classList.add(data.classes);for(const[k,v]of Object.entries(data.dataset))null!=v&&(a.dataset[k]=v);return a.innerHTML=`<img src="${keys.img}" height="16px" style="vertical-align:bottom;border:0;">${data.name}`,a}}}return TextEditor.createAnchor(data)}})}))}class CoC7Tooltips{constructor(){this.ToolTipHover=null,this.toolTipTimer=null}displayToolTip(toolTip){if(void 0!==this.ToolTipHover){const bounds=this.ToolTipHover.getBoundingClientRect();if(!isNaN(bounds.left||"")&&!isNaN(bounds.top||"")){let left=bounds.left,top=bounds.top;const heightText=$(this.ToolTipHover).outerHeight();$("body").append('<div id="help-tooltip">'+toolTip+"</div>");const tip=$("#help-tooltip"),heightTip=tip.outerHeight(),widthTip=tip.outerWidth();window.innerHeight<1.5*heightText+heightTip+top?top-=heightTip:top+=1.5*heightText,window.innerWidth<widthTip+left&&(left=window.innerWidth-widthTip),tip.css({left:left+"px",top:top+"px"})}}}toolTipLeave(event){game.CoC7Tooltips.ToolTipHover===event.currentTarget&&(clearTimeout(game.CoC7Tooltips.toolTipTimer),game.CoC7Tooltips.ToolTipHover=null,$("#help-tooltip").remove())}}let CoC7Tour=class{};"undefined"!=typeof Tour&&(CoC7Tour=class extends Tour{async waitForElement(selector){return new Promise(((resolve,reject)=>{if(document.querySelector(selector))return void resolve();new MutationObserver(((mutations,observer)=>{document.querySelectorAll(selector).forEach((el=>{resolve(),observer.disconnect()}))})).observe(document.body,{childList:!0,subtree:!0})}))}async _preStep(){if(await super._preStep(),0===this.stepIndex)for(const app of Object.values(ui.windows))app.close();await this.waitForElement(this.currentStep.selector),void 0!==this.currentStep.sidebarTab&&ui.sidebar.activateTab(this.currentStep.sidebarTab)}async _postStep(){if(await super._postStep(),!(this.stepIndex<0)&&this.hasNext&&this.currentStep.action)if(this.isResetting)this.isResetting=!1;else if("click"===this.currentStep.action)document.querySelector(this.currentStep.selector).click()}async reset(){"completed"!==this.status&&(this.isResetting=!0),await super.reset()}});class EnableVariantRulesEn extends CoC7Tour{constructor(config){super(foundry.utils.mergeObject({title:"Enable optional/variant rules.",description:"Learn how to enable Pulp Cthulhu rules, or other variant rules",canBeResumed:!1,display:!0,steps:[{id:"goto-settings",selector:'.tabs>a[data-tab="settings"]',title:"COC7.Tour.GotoSettingsTitle",content:"COC7.Tour.GotoSettingsContent",sidebarTab:"settings"},{id:"goto-configure",selector:'[data-action="configure"]',title:"COC7.Tour.GotoConfigureTitle",content:"COC7.Tour.GotoConfigureContent",action:"click"},{id:"goto-system-settings",selector:'[data-tab="system"]',title:"COC7.Tour.GotoSystemSettingsTitle",content:"COC7.Tour.GotoSystemSettingsContent",action:"click"},{id:"goto-game-rules",selector:'[data-category="system"] [data-key="CoC7.gameRules"]',title:"COC7.Tour.GotoGameRulesTitle",content:"COC7.Tour.GotoGameRulesContent",action:"click"},{id:"save-game-rules",selector:"#rules-settings [name=submit]",title:"COC7.Tour.SaveGameRulesTitle",content:"COC7.Tour.SaveGameRulesContent"}],localization:{"COC7.Tour.GotoSettingsTitle":"Game Settings","COC7.Tour.GotoSettingsContent":"Go to the Game Settings tab","COC7.Tour.GotoConfigureTitle":"Configure Settings","COC7.Tour.GotoConfigureContent":"Click on the Configure Settings button","COC7.Tour.GotoSystemSettingsTitle":"System Settings","COC7.Tour.GotoSystemSettingsContent":"Go to the System Settings tab","COC7.Tour.GotoGameRulesTitle":"Configure Variant/Optional Rules","COC7.Tour.GotoGameRulesContent":"Click on the Configure Variant/Optional Rules button","COC7.Tour.SaveGameRulesTitle":"Save rule changes","COC7.Tour.SaveGameRulesContent":"Once you have made your changes click on the Save Changes button"}},config))}}class EnableVariantRulesFr extends EnableVariantRulesEn{constructor(config){super({title:"Activez les règles optionnelles.",description:"Activez les règles optionelles et Pulp Cthulhu",localization:{"COC7.Tour.GotoSettingsTitle":"Paramètres","COC7.Tour.GotoSettingsContent":'Ouvrir l\'onglet "Paramètres"',"COC7.Tour.GotoConfigureTitle":"Configuration des options","COC7.Tour.GotoConfigureContent":'Cliquez sur "Configuration des options"',"COC7.Tour.GotoSystemSettingsTitle":"Système de jeu","COC7.Tour.GotoSystemSettingsContent":'Ouvrez l\'onglet "Système de jeu"',"COC7.Tour.GotoGameRulesTitle":"Configurer les variantes/règles optionnelles","COC7.Tour.GotoGameRulesContent":'Clickez sur le boutton "Configurer les variantes/règles optionnelles"',"COC7.Tour.SaveGameRulesTitle":"Sauvegarder les modifications","COC7.Tour.SaveGameRulesContent":'Apres avoir choisis les options cliquez sur le bouton "Sauvegarder les modifications"'}})}}function ready_listen(){Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready"),game.settings.get("CoC7","showWelcomeMessage")&&game.user.isGM,game.CoC7Tooltips=new CoC7Tooltips;const instructionsVersion=game.settings.get("CoC7","showInstructions");let lang=game.i18n.lang;const readMe={de:"PIUXjbPhnfLtqw3I",en:"sxB2OXbfwV6M0nyQ",es:"35FM7ZOdzC6L2xlj",fr:"tdakyzTVOQsAMdSm",uk:"98TuflgZUmQoJdSK"};void 0===readMe[lang]&&(lang="en"),CONFIG.CoC7=CONFIG.CoC7??{},CONFIG.CoC7.Manual=readMe[lang],foundry.utils.isNewerVersion(game.system.version,instructionsVersion??"0")&&((await game.packs.get("CoC7.system-doc").getDocument(CONFIG.CoC7.Manual))?.sheet.render(!0),game.settings.set("CoC7","showInstructions",game.system.version)),async function(){try{let lang=game.i18n.lang;const tours={en:{"enable-variant-rules":EnableVariantRulesEn},fr:{"enable-variant-rules":EnableVariantRulesFr}};void 0===tours[lang]&&(lang="en");for(const tourName in tours[lang])game.tours.register("CoC7",tourName,new tours[lang][tourName])}catch(err){console.error("TOUR ERROR",err)}}()}))}const CoC7Hooks={listen(){Hooks.on("createToken",(async(tokenDocument,options,craetorId)=>{if(game.user.id===craetorId&&("icons/svg/mystery-man.svg"===tokenDocument.texture.src&&tokenDocument.texture.src!==tokenDocument._object.actor.img&&(tokenDocument.texture.src=tokenDocument._object.actor.img),"character"!==tokenDocument._object.actor.type&&(tokenDocument._object.actor.hasRollableCharacteristics||tokenDocument._object.actor.hosRollableSkills)))switch(game.settings.get("CoC7","tokenDropMode")){case"ask":new Dialog({title:game.i18n.localize("CoC7.TokenCreationRoll.Title"),content:game.i18n.localize("CoC7.TokenCreationRoll.Prompt"),buttons:{roll:{label:game.i18n.localize("CoC7.TokenCreationRoll.ButtonRoll"),callback:async()=>{await tokenDocument._object.actor.rollCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Rolled",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0}},average:{label:game.i18n.localize("CoC7.TokenCreationRoll.ButtonAverage"),callback:async()=>{await tokenDocument._object.actor.averageCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Averaged",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0}},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0);break;case"roll":tokenDocument._object.actor.rollCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Rolled",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0;break;case"average":tokenDocument._object.actor.averageCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Averaged",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0}})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),dice3d.addDicePreset({type:"do",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"})})),init_listen(),ready_listen(),Hooks.on("renderActorSheet",(async(data,html,options)=>{})),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderMessageHook(app,html,data),CoC7Chat.renderChatMessageHook(app,html,data),void 0!==app.flags?.CoC7?.["group-message"]&&CoC7GroupMessage.renderChatMessage(app,html,data)})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#document-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[],showExperimental=!!game.settings.get("CoC7","experimentalFeatures");entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),!showExperimental&&["vehicle"].includes(entityOption.value)||entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{})),Hooks.on("renderPause",(async(data,html,options)=>{let imageReplaced=!1,textReplaced=!1;game.settings.get("CoC7","overrideGameArtwork")&&("null"===game.settings.get("CoC7","artPauseImage").toLowerCase()&&html.find("img").remove(),""!==game.settings.get("CoC7","artPauseImage")&&(html.find("img").attr("src",game.settings.get("CoC7","artPauseImage")),imageReplaced=!0),""!==game.settings.get("CoC7","artPauseText")&&(html.find("h3").html(game.settings.get("CoC7","artPauseText")),textReplaced=!0)),imageReplaced||html.find("img").attr("src","systems/CoC7/assets/images/timetrap2.webp"),textReplaced||html.find("figcaption").html(game.i18n.localize("CoC7.PauseName"))})),Hooks.on("renderPlayerList",((playerList,html,data)=>{game.settings.get("CoC7","showWorldEra")&&$("<h4>").append('<div><i class="fa-regular fa-calendar"></i>'+game.i18n.format(COC7.eras[game.settings.get("CoC7","worldEra")]??"CoC7.CoCIDFlag.error.unknown-era",{era:game.settings.get("CoC7","worldEra")})+"</div>").insertAfter($("h3",html))})),Hooks.on("renderRealRoll",((app,html,options)=>{for(const term in options.dieTerms)for(const input in options.dieTerms[term].inputs)if(options.dieTerms[term]instanceof CoC7DecaderDie){const tag=html.find('[name="'+term+"."+input+'"]');1===tag.length&&(tag[0].placeholder=game.i18n.localize("CoC7.RealRollDecaderPlaceholderName"))}})),Hooks.on("renderSettingsConfig",((app,html,user)=>{CoC7DirectoryPicker.processHtml(html)}))}};async function gmcreatemessageas(data){const meleeTarget=new CoC7MeleeTarget(data.targetKey,data.messageId,data.fastForward);meleeTarget.initiatorKey=data.actorKey;return await meleeTarget.createChatCard()}async function gmtradeitemto(data){try{let actor;actor=data.scene?game.scenes.get(data.scene).tokens.get(data.actorFrom).actor:game.actors.get(data.actorFrom);const item=actor.items.get(data.item);await game.actors.get(data.actorTo).createEmbeddedDocuments("Item",[item.toJSON()])&&actor.deleteEmbeddedDocuments("Item",[item.id])}catch(e){return ui.notifications.error(e),!1}return!0}class CoC7SystemSocket{static async callSocket(data){if(void 0!==data.listener){if(game.user.id===data.listener)switch(data.type){case"character-wizard":CoC7InvestigatorWizard.createCharacterFromData(data.payload);break;case"open-character":game.actors.get(data.payload).sheet.render(!0);break;case"group-message-new":CoC7GroupMessage.newGroupMessage(data);break;case"group-message-roll":CoC7GroupMessage.performMyRolls(data);break;case"group-message-update":CoC7GroupMessage.updateTheMessage(data)}}else{if(game.user.isGM)switch(data.type){case OpposedCheckCard.defaultConfig.type:OpposedCheckCard.dispatch(data);break;case CombinedCheckCard.defaultConfig.type:CombinedCheckCard.dispatch(data);break;case"invoke":(await fromUuid(data.item))[data.method](data.data)}switch(data.type){case"updateChar":CoC7Utilities.updateCharSheets();break;case"toggleMapNotes":game.settings.set("core",NotesLayer.TOGGLE_SETTING,!0===data.toggle)}}}static requestKeeperAction(data){if(game.user.isGM)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const keepers=game.users.filter((u=>u.active&&u.isGM));keepers.length?(data.listener=keepers[0].id,game.socket.emit("system.CoC7",data)):ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}static requestUserAction(data,{userId=null,errorIfMissing=!0,includeSelf=!0}={}){if(userId&&void 0!==userId)if(userId===game.user.id)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const user=game.users.get(userId);void 0!==user.id&&user.active?(data.listener=user.id,game.socket.emit("system.CoC7",data)):errorIfMissing&&ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingUser"))}else includeSelf&&CoC7SystemSocket.callSocket(data),game.socket.emit("system.CoC7",data)}}function _onLeftClick(event){return event.shiftKey}Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.displayInitDices]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.trustedCanModfyChatCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.overrideGameArtwork]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleGameArtwork")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard},dev:{dice:{alwaysCrit:!1,alwaysFumble:!1}},eras:(era,name)=>{COC7.eras[era]=name},ClickRegionLeftUuid:CoC7ClickableEvents.ClickRegionLeftUuid,ClickRegionRightUuid:CoC7ClickableEvents.ClickRegionRightUuid,hasPermissionDocument:CoC7ClickableEvents.hasPermissionDocument,InSceneRelativeTeleport:CoC7ClickableEvents.InSceneRelativeTeleport,MapPinToggle:CoC7ClickableEvents.MapPinToggle,openDocument:CoC7ClickableEvents.openDocument,toggleTileJournalPages:CoC7ClickableEvents.toggleTileJournalPages,toScene:CoC7ClickableEvents.toScene},Combat.prototype.rollInitiative=rollInitiative})),function(...cardclass){Hooks.on("renderChatLog",((app,html,data)=>EnhancedChatCardLib.injectCSS(app,html,data))),Hooks.once("socketlib.ready",(function(){EnhancedChatCardLib.register(cardclass),EnhancedChatCardLib.socket=socketlib.registerSystem(game.system.id),EnhancedChatCardLib.socket.register("updateMessage",updateMessage),EnhancedChatCardLib.socket.register("GMUpdate",GMUpdate),EnhancedChatCardLib.socket.register("advise",advise)})),Hooks.on("renderChatMessage",((app,html,data)=>EnhancedChatCard.bindListeners(html)))}(ChaseObstacleCard),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("socketlib.ready",(function(){game.CoC7socket=socketlib.registerSystem("CoC7"),game.CoC7socket.register("gmcreatemessageas",gmcreatemessageas),game.CoC7socket.register("gmtradeitemto",gmtradeitemto)})),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.dead));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.unconscious)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg");const effectNameKey=foundry.utils.isNewerVersion(game.version,"11")?"name":"label";CONFIG.statusEffects.unshift({id:COC7.status.tempoInsane,[effectNameKey]:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:COC7.status.indefInsane,[effectNameKey]:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:COC7.status.criticalWounds,[effectNameKey]:"CoC7.CriticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:COC7.status.dying,[effectNameKey]:"CoC7.Dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("createActiveEffect",((data,options,userId)=>{if(game.userId===userId){const statusKey=CoC7ActiveEffect.getStatusKey(data);if(statusKey)switch(statusKey){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.setCondition(statusKey,{forceValue:!0});break;case COC7.status.tempoInsane:{const realTime=data.flags.CoC7?.realTime;let duration=null;!0===realTime?duration=data.duration?.rounds:!1===realTime&&(duration=data.duration?.seconds,isNaN(duration)||(duration=Math.floor(duration/3600))),data.parent.setCondition(COC7.status.tempoInsane,{forceValue:!0,realTime,duration})}}}})),Hooks.on("deleteActiveEffect",((data,options,userId)=>{if(game.userId===userId){const statusKey=CoC7ActiveEffect.getStatusKey(data);if(statusKey)switch(statusKey){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.unsetCondition(statusKey,{forceValue:!0})}}})),Hooks.on("changeSidebarTab",(directory=>{if(directory instanceof ItemDirectory){const item=game.items.find((i=>"__CoC7InternalItem__"===i.name));if(item){const itemElement=directory._element.find(`[data-document-id='${item.id}']`);itemElement&&(itemElement[0].style.display="none")}}})),Hooks.on("hotbarDrop",((bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),function(){const body=$("body");document.addEventListener("click",CoC7ContextMenu.closeAll),body.on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick)}(),game.CoC7.skillList=await(game.packs.get("CoC7.skills")?.getDocuments()),game.socket.on("system.CoC7",(async data=>{CoC7SystemSocket.callSocket(data)}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};for(const t of game.tables)tableChoice[t._id]=t.name;game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("renderCoC7ChaseSheet",((app,html,data)=>CoC7ChaseSheet.setScroll(app,html,data))),Hooks.on("closeCoC7ChaseSheet",((app,html)=>CoC7ChaseSheet.onClose(app,html))),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderActorSheet",CoC7CharacterSheet.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheet.renderSheet),Hooks.on("getSceneControlButtons",CoC7Menu.getButtons),Hooks.on("renderSceneControls",CoC7Menu.renderControls),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),Hooks.on("dropActorSheetData",(function(actor,sheet,data){if("Item"===data.type&&data.actorId){if(actor.data._id===data.actorId)return;let actorFrom=null;switch(actorFrom=data.sceneId&&data.tokenId?game.scenes.get(data.sceneId).tokens.get(data.tokenId).actor:game.actors.get(data.actorId),actor.data.type){case"character":case"npc":case"creature":if(!["chase"].includes(data.data.type))return;break;case"vehicle":return;case"container":if(!["book","item","spell","weapon"].includes(data.data.type))return}actorFrom&&actorFrom.deleteEmbeddedDocuments("Item",[data.data._id])}})),CONFIG.ui.settings=CoC7SettingsDirectory,CONFIG.ui.compendium=CoC7CompendiumDirectory,CONFIG.ui.actors=CoC7ActorDirectory,Hooks.on("drawNote",(function(note){note.document.getFlag("CoC7","hide-background")&&note.controlIcon.bg.clear()})),Hooks.on("renderCoC7JournalSheet",(function(application,html,data){if(application.object.getFlag("CoC7","css-adventure-entry")&&(html.hasClass("coc7-adventure-entry")||html.addClass("coc7-adventure-entry"),application.object.getFlag("CoC7","fixed-adventure-heading")&&!html.hasClass("fixed-adventure-heading"))){const obj=$(html);obj.addClass("fixed-adventure-heading");const subheading=data.pages?.[0]?.flags?.CoC7?.["fixed-adventure-subheading"]??"";if(""===subheading)obj.find("article.journal-entry-page.text.level1")?.before('<div style="padding: 0.5em;"></div>');else{const short=0===subheading.trim().length;obj.find("article.journal-entry-page.text.level1")?.before('<div class="adventure-heading-section flexrow"><div class="bookmark'+(short?" short":"")+'"><img src="systems/CoC7/assets/art/'+(short?"bookmarks.webp":"bookmark.webp")+'"></div><div class="adventure-heading"><div class="heading">'+data.title+"</div>"+(short?"":'<div class="subheading">'+subheading+"</div>")+"</div></div>")}}})),Hooks.on("renderJournalTextPageSheet",(function(application,html,data){application.object.parent.getFlag("CoC7","css-adventure-entry")&&(html.hasClass("coc7-adventure-entry")||(html.addClass("coc7-adventure-entry"),html.find("section.tmi-toggleable p.toggle").click((event=>{const obj=$(event.currentTarget),section=obj.closest("section.tmi-toggleable").find("div.toggle:first");section.is(":visible")?(obj.text("Reveal"),section.slideUp()):(obj.text("Hide"),section.slideDown())}))))})),Hooks.on("PopOut:loaded",(function(app,node){const sheetClass=CONFIG.Actor.sheetClasses.character?.["CoC7.CoC7CharacterSheetV3"]?.cls;sheetClass&&app instanceof sheetClass&&(node.style.marginLeft="87px")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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azovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RpdmUtZWZmZWN0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9kaWNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9pdGVtLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2hlbHBlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9hdmVyYWdlLXJvbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItcGlja2VyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWdyb3VwLW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZC1hY3Rvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9zYW4tY2hlY2suanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1saW5rLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctY29udGVudC1saW5rLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9yb2xsLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9yb2xsLWNhcmQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvZGFtYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9zYW5kYXRhLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWNoYXQtbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb25jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC1zZWxlY3Rpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3BvaW50LXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2hhci1zZWxlY3Rpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NoYXItcm9sbC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXNwZWNpYWxpemF0aW9uLXNlbGVjdC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtdmFsdWUtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbWJhdC9tZWxlZS10YXJnZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvcmFuZ2Vjb21iYXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL2FjdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdXRpbGl0aWVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYy1pZC1lZGl0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29udGV4dC1tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NyZWF0ZS1teXRob3MtZW5jb3VudGVycy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2MtaWQtYmF0Y2guanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3VwZGF0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kaG9sZWhvdXNlX2ltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kcm9wLWNvYy1pZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2MtaWQtYWN0b3ItdXBkYXRlLWl0ZW1zLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2V0dGluZ3MtZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb21wZW5kaXVtLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3ItZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zcGVsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9ib29rL2RhdGEuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9za2lsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvdmVoaWNsZS9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLW90aGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2dhbWUtcnVsZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9hcm1vci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvYm9vay9zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXItdjMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvY2hhcmFjdGVyLW1pbmltaXplZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2hhc2UtcGFydGljaXBhbnQtaW1wb3J0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2NoYXNlL3NoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvaXRlbS1zaGVldFYyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvaXRlbS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctam91cm5hbC1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctbWFjcm8tY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1wbGF5bGlzdC1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LXJvbGwtdGFibGUtY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1zY2VuZS1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9zZXR1cC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3NraWxsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zcGVsbC9zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3N0YXR1cy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3RhbGVudC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy92ZWhpY2xlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvd2VhcG9uLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvbXBlbmRpdW0tZmlsdGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvYy1pZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWNsaWNrYWJsZS1ldmVudHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2luaXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9sb2FkLXRlbXBsYXRlcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci1zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci1zaGVldHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvaGFuZGxlYmFycy1oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2RpY2Utc28tbmljZS1yZWFkeS1sYXN0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3Rvb2x0aXBzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctdG91ci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdG91cnMvZW5hYmxlLXZhcmlhbnQtcnVsZXMtZW4uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWZyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZWFkeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci10b3Vycy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2NyZWF0ZS10b2tlbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvZGljZS1zby1uaWNlLXJlYWR5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItYWN0b3Itc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1jaGF0LW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1pdGVtLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItcGF1c2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1wbGF5ZXItbGlzdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLXJlYWwtcm9sbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLXNldHRpbmdzLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3Mvc29ja2V0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctc3lzdGVtLXNvY2tldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29jNy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvZGljZWJvdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvZHJvcC1hY3Rvci1zaGVldC1kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9kcmF3LW5vdGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1jb2M3LWpvdXJuYWwtc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1qb3VybmFsLXRleHQtcGFnZS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcG9wb3V0LWxvYWRlZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBOYW1lc3BhY2UgQ09DNyBDb25maWd1cmF0aW9uIFZhbHVlc1xuZXhwb3J0IGNvbnN0IENPQzcgPSB7fVxuXG4vLyBDdXN0b20gY2hhdE1lc3NhZ2Vcbi8vIENPTkZJRy5DaGF0TWVzc2FnZS50ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2hhdC1tZXNzYWdlLmh0bWwnO1xuXG4vKipcbiAqIFRoZSBzZXQgb2YgRXJhcyB1c2VkIHdpdGhpbiB0aGUgc3lzdGVtXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5DT0M3LmVyYXMgPSB7XG4gIHN0YW5kYXJkOiAnQ29DNy5FcmExOTIwJyxcbiAgbW9kZXJuOiAnQ29DNy5FcmFNb2Rlcm4nLFxuICBtb2Rlcm5QdWxwOiAnQ29DNy5FcmFNb2Rlcm5QdWxwJyxcbiAgcHVscDogJ0NvQzcuRXJhUHVscCcsXG4gIGRvd25EYXJrZXJUcmFpbHM6ICdDb0M3LkVyYURvd25EYXJrZXJUcmFpbHMnLFxuICBkb3duRGFya2VyVHJhaWxzUHVscDogJ0NvQzcuRXJhRG93bkRhcmtlclRyYWlsc1B1bHAnLFxuICBkYXJrQWdlczogJ0NvQzcuRXJhRGFya0FnZXMnLFxuICBkYXJrQWdlc1B1bHA6ICdDb0M3LkVyYURhcmtBZ2VzUHVscCcsXG4gIHJlZ2VuY3k6ICdDb0M3LkVyYVJlZ2VuY3knLFxuICByZWdlbmN5UHVscDogJ0NvQzcuRXJhUmVnZW5jeVB1bHAnLFxuICByZWlnbk9mVGVycm9yOiAnQ29DNy5FcmFSZWlnbk9mVGVycm9yJyxcbiAgZ2FzTGlnaHQ6ICdDb0M3LkVyYUdhc0xpZ2h0JyxcbiAgZ2FzTGlnaHRQdWxwOiAnQ29DNy5FcmFHYXNMaWdodFB1bHAnLFxuICBpbnZpY3R1czogJ0NvQzcuRXJhSW52aWN0dXMnXG59XG5cbkNPQzcubW9uZXRhcnlGb3JtYXRLZXlzID0ge1xuICBkZWNpbWFsTGVmdDogJ2RlY2ltYWxMZWZ0JyxcbiAgZGVjaW1hbFJpZ2h0OiAnZGVjaW1hbFJpZ2h0JyxcbiAgaW50ZWdlckxlZnQ6ICdpbnRlZ2VyTGVmdCcsXG4gIGludGVnZXJSaWdodDogJ2ludGVnZXJSaWdodCcsXG4gIGxzZDogJ2xzZCcsXG4gIHJvbWFuOiAncm9tYW4nXG59XG5cbkNPQzcubW9uZXRhcnlGb3JtYXRzID0ge1xuICBkZWNpbWFsTGVmdDogJ0NvQzcuTW9uZXRhcnlGb3JtYXREZWNpbWFsTGVmdCcsXG4gIGRlY2ltYWxSaWdodDogJ0NvQzcuTW9uZXRhcnlGb3JtYXREZWNpbWFsUmlnaHQnLFxuICBpbnRlZ2VyTGVmdDogJ0NvQzcuTW9uZXRhcnlGb3JtYXRJbnRlZ2VyTGVmdCcsXG4gIGludGVnZXJSaWdodDogJ0NvQzcuTW9uZXRhcnlGb3JtYXRJbnRlZ2VyUmlnaHQnLFxuICBsc2Q6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0THNkJyxcbiAgcm9tYW46ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0Um9tYW4nXG59XG5cbkNPQzcubW9uZXRhcnlUeXBlS2V5cyA9IHtcbiAgbm9uZTogJ25vbmUnLFxuICBhc3NlczogJ2Fzc2VzJyxcbiAgc2VzdGVydGlpOiAnc2VzdGVydGlpJyxcbiAgcXVpbmFyaWk6ICdxdWluYXJpaScsXG4gIGRlbmFyaWk6ICdkZW5hcmlpJyxcbiAgZDogJ2QnLFxuICBzOiAncycsXG4gIHZhbHVlOiAndmFsdWUnLFxuICBtdWx0aXBsaWVyOiAnbXVsdGlwbGllcidcbn1cblxuQ09DNy5tb25ldGFyeVR5cGVzID0ge1xuICBub25lOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlTm9uZScsXG4gICAgZmlsdGVyOiBbXVxuICB9LFxuICBhc3Nlczoge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZUFzc2VzJyxcbiAgICBmaWx0ZXI6IFsncm9tYW4nXVxuICB9LFxuICBzZXN0ZXJ0aWk6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVTZXN0ZXJ0aWknLFxuICAgIGZpbHRlcjogWydyb21hbiddXG4gIH0sXG4gIHF1aW5hcmlpOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlUXVpbmFyaWknLFxuICAgIGZpbHRlcjogWydyb21hbiddXG4gIH0sXG4gIGRlbmFyaWk6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVEZW5hcmlpJyxcbiAgICBmaWx0ZXI6IFsncm9tYW4nXVxuICB9LFxuICBkOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlRGVuaWVycycsXG4gICAgZmlsdGVyOiBbJ2xzZCddXG4gIH0sXG4gIHM6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVTb3VzJyxcbiAgICBmaWx0ZXI6IFsnbHNkJ11cbiAgfSxcbiAgdmFsdWU6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVPbmUnLFxuICAgIGZpbHRlcjogW11cbiAgfSxcbiAgbXVsdGlwbGllcjoge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZUNyZWRpdFJhdGluZycsXG4gICAgZmlsdGVyOiBbXVxuICB9XG59XG5cbkNPQzcuY2hhcmFjdGVyaXN0aWNzID0ge1xuICBzdHI6ICdDb0M3LkNoYXJhY1N0cicsXG4gIGNvbjogJ0NvQzcuQ2hhcmFjQ29uJyxcbiAgc2l6OiAnQ29DNy5DaGFyYWNTaXonLFxuICBkZXg6ICdDb0M3LkNoYXJhY0RleCcsXG4gIGFwcDogJ0NvQzcuQ2hhcmFjQXBwJyxcbiAgaW50OiAnQ29DNy5DaGFyYWNJbnQnLFxuICBwb3c6ICdDb0M3LkNoYXJhY1BvdycsXG4gIGVkdTogJ0NvQzcuQ2hhcmFjRWR1J1xufVxuXG4vKipcbiAqIFRoZSBzZXQgb2YgU2tpbGxzIGF0dHJpYnV0ZXMgdXNlZCB3aXRoaW4gdGhlIHN5c3RlbVxuICogQHR5cGUge09iamVjdH1cbiAqL1xuQ09DNy5za2lsbFByb3BlcnRpZXMgPSB7XG4gIG5vYWRqdXN0bWVudHM6ICdDb0M3LlNraWxsTm9BZGp1c3RtZW50cycsXG4gIG5veHBnYWluOiAnQ29DNy5Ta2lsbE5vWHBHYWluJyxcbiAgc3BlY2lhbDogJ0NvQzcuU2tpbGxTcGVjaWFsJyxcbiAgcmFyaXR5OiAnQ29DNy5Ta2lsbFJhcml0eScsXG4gIHB1c2g6ICdDb0M3LlNraWxsUHVzaCcsXG4gIGNvbWJhdDogJ0NvQzcuU2tpbGxDb21iYXQnLFxuICBmaWdodGluZzogJ0NvQzcuU2tpbGxGaWdodGluZycsXG4gIGZpcmVhcm06ICdDb0M3LlNraWxsRmlyZWFybScsXG4gIHJhbmdlZDogJ0NvQzcuU2tpbGxSYW5nZWQnLFxuICByZXF1aXJlc25hbWU6ICdDb0M3LlNraWxsUmVxdWlyZXNOYW1lJyxcbiAga2VlcGJhc2V2YWx1ZTogJ0NvQzcuU2tpbGxLZWVwQmFzZVZhbHVlJyxcbiAgcGlja25hbWVvbmx5OiAnQ29DNy5Ta2lsbFBpY2tOYW1lT25seScsXG4gIG9ubHlvbmU6ICdDb0M3LlNraWxsU3BlY2lhbGl6YXRpb25Jc1VuaXF1ZSdcbn1cblxuQ09DNy53ZWFwb25Qcm9wZXJ0aWVzID0ge1xuICBtZWxlZTogJ0NvQzcuV2VhcG9uLlByb3BlcnR5Lk1lbGVlJyxcbiAgcm5nZDogJ0NvQzcuV2VhcG9uUm5nZCcsXG4gIG1udnI6ICdDb0M3LldlYXBvblByb3BlcnlNYW5ldXZlcicsXG4gIHRocm93bjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LlRocm93bicsXG4gIHNob3RndW46ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5TaG90Z3VuJyxcbiAgZGJybDogJ0NvQzcuV2VhcG9uRGJybCcsXG4gIGltcGw6ICdDb0M3LldlYXBvbkltcGwnLFxuICBicnN0OiAnQ29DNy5XZWFwb25CcnN0JyxcbiAgYXV0bzogJ0NvQzcuV2VhcG9uQXV0bycsXG4gIGFoZGI6ICdDb0M3LldlYXBvbkFoZGInLFxuICBhZGRiOiAnQ29DNy5XZWFwb25BZGRiJyxcbiAgc2xudDogJ0NvQzcuV2VhcG9uU2xudCcsXG4gIHNwY2w6ICdDb0M3LldlYXBvblNwY2wnLFxuICBtb250OiAnQ29DNy5XZWFwb25Nb250JyxcbiAgYmxzdDogJ0NvQzcuV2VhcG9uQmxzdCcsXG4gIHN0dW46ICdDb0M3LldlYXBvblN0dW4nLFxuICByYXJlOiAnQ29DNy5XZWFwb25SYXJlJyxcbiAgYnVybjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LkJ1cm4nXG59XG5cbkNPQzcuc3BlbGxQcm9wZXJ0aWVzID0ge1xuICBjYWxsOiAnQ29DNy5DYWxsU3BlbGwnLFxuICBkaXNtaXNzOiAnQ29DNy5EaXNtaXNzU3BlbGwnLFxuICBjb250YWN0OiAnQ29DNy5Db250YWN0U3BlbGwnLFxuICBzdW1tb246ICdDb0M3LlN1bW1vblNwZWxsJyxcbiAgYmluZDogJ0NvQzcuQmluZFNwZWxsJyxcbiAgZW5jaGFudG1lbnQ6ICdDb0M3LkVuY2hhbnRtZW50U3BlbGwnLFxuICBnYXRlOiAnQ29DNy5HYXRlU3BlbGwnLFxuICBjb21iYXQ6ICdDb0M3LkNvbWJhdFNwZWxsJ1xufVxuXG5DT0M3LmJvb2tUeXBlID0ge1xuICBteXRob3M6ICdDb0M3Lk15dGhvc0Jvb2snLFxuICBvY2N1bHQ6ICdDb0M3Lk9jY3VsdEJvb2snLFxuICBvdGhlcjogJ0NvQzcuT3RoZXInXG59XG5cbkNPQzcudGFsZW50VHlwZSA9IHtcbiAgcGh5c2ljYWw6ICdDb0M3LlBoeXNpY2FsVGFsZW50JyxcbiAgbWVudGFsOiAnQ29DNy5NZW50YWxUYWxlbnQnLFxuICBjb21iYXQ6ICdDb0M3LkNvbWJhdFRhbGVudCcsXG4gIG1pc2NlbGxhbmVvdXM6ICdDb0M3Lk1pc2NlbGxhbmVvdXNUYWxlbnQnLFxuICBiYXNpYzogJ0NvQzcuQmFzaWNUYWxlbnQnLFxuICBpbnNhbmU6ICdDb0M3Lkluc2FuZVRhbGVudCcsXG4gIG90aGVyOiAnQ29DNy5PdGhlclRhbGVudCdcbn1cblxuQ09DNy5zdGF0dXNUeXBlID0ge1xuICBtYW5pYTogJ0NvQzcuTWFuaWEnLFxuICBwaG9iaWE6ICdDb0M3LlBob2JpYSdcbn1cblxuQ09DNy5vY2N1cGF0aW9uUHJvcGVydGllcyA9IHtcbiAgY2xhc3NpYzogJ0NvQzcuQ2xhc3NpYycsXG4gIGxvdmVjcmFmdGlhbjogJ0NvQzcuTG92ZWNyYWZ0aWFuJyxcbiAgbW9kZXJuOiAnQ29DNy5Nb2Rlcm4nLFxuICBwdWxwOiAnQ29DNy5QdWxwJ1xufVxuXG5DT0M3LmZvcm11bGEgPSB7fVxuXG5DT0M3LmZvcm11bGEuYWN0b3IgPSB7XG4gICdAU1RSJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUnLFxuICAnQENPTic6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlJyxcbiAgJ0BTSVonOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZScsXG4gICdAREVYJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxuICAnQEFQUCc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuYXBwLnZhbHVlJyxcbiAgJ0BJTlQnOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmludC52YWx1ZScsXG4gICdAUE9XJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnLFxuICAnQEVEVSc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZWR1LnZhbHVlJ1xufVxuXG5DT0M3LmZvcm11bGEuYWN0b3JzaGVldCA9IHtcbiAgJ0BTVFInOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZScsXG4gICdAQ09OJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUnLFxuICAnQFNJWic6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlJyxcbiAgJ0BERVgnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZScsXG4gICdAQVBQJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5hcHAudmFsdWUnLFxuICAnQElOVCc6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlJyxcbiAgJ0BQT1cnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZScsXG4gICdARURVJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5lZHUudmFsdWUnXG59XG5cbkNPQzcuc3RhdHVzID0ge1xuICB0ZW1wb0luc2FuZTogJ3RlbXBvSW5zYW5lJyxcbiAgaW5kZWZJbnNhbmU6ICdpbmRlZkluc2FuZScsXG4gIHVuY29uc2Npb3VzOiAndW5jb25zY2lvdXMnLFxuICBjcml0aWNhbFdvdW5kczogJ2NyaXRpY2FsV291bmRzJyxcbiAgZHlpbmc6ICdkeWluZycsXG4gIHByb25lOiAncHJvbmUnLFxuICBkZWFkOiAnZGVhZCdcbn1cblxuQ09DNy5uZXdCb29rTmFtZSA9ICdDb0M3Lk5ld0Jvb2tOYW1lJ1xuQ09DNy5uZXdTa2lsbE5hbWUgPSAnQ29DNy5OZXdTa2lsbE5hbWUnXG5DT0M3Lm5ld1NwZWxsTmFtZSA9ICdDb0M3Lk5ld1NwZWxsTmFtZSdcbkNPQzcubmV3SXRlbU5hbWUgPSAnQ29DNy5OZXdJdGVtTmFtZSdcbkNPQzcubmV3V2VhcG9uTmFtZSA9ICdDb0M3Lk5ld1dlYXBvbk5hbWUnXG5cbkNPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsID0gJ0NvQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsJ1xuXG5DT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lID0gJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG5DT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuQ09DNy5yYW5nZWRTcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5SYW5nZWRTcGVjaWFsaXphdGlvbk5hbWUnXG5cbkNPQzcuY29tYmF0Q2FyZHMgPSB7XG4gIGZpZ2h0QmFjazogJ0NvQzcuRmlnaHRCYWNrJyxcbiAgZG9kZ2U6ICdDb0M3LkRvZGdlJyxcbiAgbWFuZXV2ZXI6ICdDb0M3Lk1hbmV1dmVyJyxcbiAgbm9SZXNwb25zZTogJ0NvQzcuTm9SZXNwb25zZSdcbn1cbiIsIi8qIGdsb2JhbCBBY3RpdmVFZmZlY3QsIGZvdW5kcnksIGdhbWUgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuL2NvbmZpZy5qcydcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29DN0FjdGl2ZUVmZmVjdCBleHRlbmRzIEFjdGl2ZUVmZmVjdCB7XG4gIGFwcGx5IChhY3RvciwgY2hhbmdlKSB7XG4gICAgaWYgKGNoYW5nZS5rZXkgPT09ICdzeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZScpIHtcbiAgICAgIC8vIEFybW9yIGNhbiBiZSBmcmVlIHRleHQgaWYgYm90aCBhcmUgbnVtYmVycyBhbGxvdyBjYWxjdWxhdGlvblxuICAgICAgaWYgKCFpc05hTihjaGFuZ2UudmFsdWUpICYmICFpc05hTihhY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZSkpIHtcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWUgPSBOdW1iZXIoYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWUpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaGFuZ2Uua2V5ID09PSAnc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUnKSB7XG4gICAgICAvLyBJZiBkYiBpcyBjdXJyZW50bHkgYSBudW1iZXIgYWxsb3cgc3RyaW5ncyB0byBiZSBhcHBsaWVkXG4gICAgICBpZiAoaXNOYU4oY2hhbmdlLnZhbHVlKSAmJiAhaXNOYU4oYWN0b3Iuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUpKSB7XG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gU3RyaW5nKGFjdG9yLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjaGFuZ2VzID0gc3VwZXIuYXBwbHkoYWN0b3IsIGNoYW5nZSlcbiAgICByZXR1cm4gY2hhbmdlc1xuICB9XG5cbiAgLyoqXG4gICAqIE1hbmFnZSBBY3RpdmUgRWZmZWN0IGluc3RhbmNlcyB0aHJvdWdoIHRoZSBBY3RvciBTaGVldCB2aWEgZWZmZWN0IGNvbnRyb2wgYnV0dG9ucy5cbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCAgICAgIFRoZSBsZWZ0LWNsaWNrIGV2ZW50IG9uIHRoZSBlZmZlY3QgY29udHJvbFxuICAgKiBAcGFyYW0ge0FjdG9yfEl0ZW19IG93bmVyICAgICAgVGhlIG93bmluZyBkb2N1bWVudCB3aGljaCBtYW5hZ2VzIHRoaXMgZWZmZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlfG51bGx9ICAgICAgICBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgY2hhbmdlcyBhcmUgY29tcGxldGUuXG4gICAqL1xuICBzdGF0aWMgb25NYW5hZ2VBY3RpdmVFZmZlY3QgKGV2ZW50LCBvd25lcikge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KCdsaScpXG4gICAgY29uc3QgZWZmZWN0ID0gbGkuZGF0YXNldC5lZmZlY3RJZFxuICAgICAgPyBvd25lci5lZmZlY3RzLmdldChsaS5kYXRhc2V0LmVmZmVjdElkKVxuICAgICAgOiBudWxsXG4gICAgc3dpdGNoIChhLmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdjcmVhdGUnOlxuICAgICAgICByZXR1cm4gb3duZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVmZmVjdE5ldycpLFxuICAgICAgICAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAgICAgICBvcmlnaW46IG93bmVyLnV1aWQsXG4gICAgICAgICAgICAnZHVyYXRpb24ucm91bmRzJzpcbiAgICAgICAgICAgICAgbGkuZGF0YXNldC5lZmZlY3RUeXBlID09PSAndGVtcG9yYXJ5JyA/IDEgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBkaXNhYmxlZDogbGkuZGF0YXNldC5lZmZlY3RUeXBlID09PSAnaW5hY3RpdmUnXG4gICAgICAgICAgfVxuICAgICAgICBdKVxuICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgIHJldHVybiBlZmZlY3Quc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICByZXR1cm4gZWZmZWN0LmRlbGV0ZSgpXG4gICAgICBjYXNlICd0b2dnbGUnOlxuICAgICAgICByZXR1cm4gZWZmZWN0LnVwZGF0ZSh7IGRpc2FibGVkOiAhZWZmZWN0LmRpc2FibGVkIH0pXG4gICAgfVxuICB9XG5cbiAgX3ByZXBhcmVEdXJhdGlvbiAoKSB7XG4gICAgY29uc3QgZHVyYXRpb24gPSBzdXBlci5fcHJlcGFyZUR1cmF0aW9uKClcbiAgICBpZiAoZHVyYXRpb24udHlwZSA9PT0gJ3NlY29uZHMnKSB7XG4gICAgICBpZiAoZHVyYXRpb24uc2Vjb25kcyA+IDM2MDApIHtcbiAgICAgICAgZHVyYXRpb24ubGFiZWwgPSBuZXcgRGF0ZShkdXJhdGlvbi5zZWNvbmRzICogMTAwMCkudG9JU09TdHJpbmcoKS5zbGljZSgxMSwgMTkpXG4gICAgICB9IGVsc2UgaWYgKGR1cmF0aW9uLnNlY29uZHMgPiAxMDApIHtcbiAgICAgICAgZHVyYXRpb24ubGFiZWwgPSBuZXcgRGF0ZShkdXJhdGlvbi5zZWNvbmRzICogMTAwMCkudG9JU09TdHJpbmcoKS5zbGljZSgxNCwgMTkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkdXJhdGlvblxuICB9XG5cbiAgc3RhdGljIGZpbHRlckFjdGl2ZUVmZmVjdHMgKGVmZmVjdCwgY29uZGl0aW9uTmFtZSkge1xuICAgIGlmICghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMScpKSB7XG4gICAgICAvLyBGb3VuZHJ5VlRUIHYxMFxuICAgICAgcmV0dXJuIGVmZmVjdC5mbGFncy5jb3JlPy5zdGF0dXNJZCA9PT0gY29uZGl0aW9uTmFtZVxuICAgIH1cbiAgICByZXR1cm4gZWZmZWN0LnN0YXR1c2VzLmhhcyhjb25kaXRpb25OYW1lKVxuICB9XG5cbiAgc3RhdGljIGdldFN0YXR1c0tleSAoZWZmZWN0KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBbXVxuICAgIGlmICghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMScpKSB7XG4gICAgICAvLyBGb3VuZHJ5VlRUIHYxMFxuICAgICAgb3B0aW9ucyA9IFtlZmZlY3QuZ2V0RmxhZygnY29yZScsICdzdGF0dXNJZCcpXVxuICAgIH0gZWxzZSBpZiAoZWZmZWN0LnN0YXR1c2VzLnNpemUgPiAwKSB7XG4gICAgICBvcHRpb25zID0gWy4uLmVmZmVjdC5zdGF0dXNlcy52YWx1ZXMoKV1cbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnMuZmluZCh2ID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChDT0M3LnN0YXR1cywgdikpXG4gIH1cblxuICBnZXQgaXNTdGF0dXMgKCkge1xuICAgIHJldHVybiB0eXBlb2YgQ29DN0FjdGl2ZUVmZmVjdC5nZXRTdGF0dXNLZXkodGhpcykgPT09ICdzdHJpbmcnXG4gIH1cblxuICBzdGF0aWMgcHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMgKGVmZmVjdHMsIHsgc3RhdHVzID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAvLyBEZWZpbmUgZWZmZWN0IGhlYWRlciBjYXRlZ29yaWVzXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IHtcbiAgICAgIHRlbXBvcmFyeToge1xuICAgICAgICB0eXBlOiAndGVtcG9yYXJ5JyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UZW1wb3JhcnknKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH0sXG4gICAgICBwYXNzaXZlOiB7XG4gICAgICAgIHR5cGU6ICdwYXNzaXZlJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QYXNzaXZlJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9LFxuICAgICAgaW5hY3RpdmU6IHtcbiAgICAgICAgdHlwZTogJ2luYWN0aXZlJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbmFjdGl2ZScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfSxcbiAgICAgIHN1cHByZXNzZWQ6IHtcbiAgICAgICAgdHlwZTogJ3N1cHByZXNzZWQnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlN1cHByZXNzZWQnKSxcbiAgICAgICAgZWZmZWN0czogW10sXG4gICAgICAgIGluZm86IFtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5hdmFpbGFibGUnKV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzKSB7XG4gICAgICBjYXRlZ29yaWVzLnN0YXR1cyA9IHtcbiAgICAgICAgdHlwZTogJ3N0YXR1cycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1N0YXR1cycpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBJdGVyYXRlIG92ZXIgYWN0aXZlIGVmZmVjdHMsIGNsYXNzaWZ5aW5nIHRoZW0gaW50byBjYXRlZ29yaWVzXG4gICAgZm9yIChjb25zdCBlIG9mIGVmZmVjdHMpIHtcbiAgICAgIGlmIChlLmlzU3VwcHJlc3NlZCkgY2F0ZWdvcmllcy5zdXBwcmVzc2VkLmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBpZiAoZS5pc1N0YXR1cykgY2F0ZWdvcmllcy5zdGF0dXMuZWZmZWN0cy5wdXNoKGUpXG4gICAgICBlbHNlIGlmIChlLmRpc2FibGVkKSBjYXRlZ29yaWVzLmluYWN0aXZlLmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBpZiAoZS5pc1RlbXBvcmFyeSkgY2F0ZWdvcmllcy50ZW1wb3JhcnkuZWZmZWN0cy5wdXNoKGUpXG4gICAgICBlbHNlIGNhdGVnb3JpZXMucGFzc2l2ZS5lZmZlY3RzLnB1c2goZSlcbiAgICB9XG5cbiAgICBjYXRlZ29yaWVzLnN1cHByZXNzZWQuaGlkZGVuID0gIWNhdGVnb3JpZXMuc3VwcHJlc3NlZC5lZmZlY3RzLmxlbmd0aFxuICAgIHJldHVybiBjYXRlZ29yaWVzXG4gIH1cblxuICBzdGF0aWMgcHJlcGFyZU5QQ0FjdGl2ZUVmZmVjdENhdGVnb3JpZXMgKGVmZmVjdHMpIHtcbiAgICBsZXQgY291bnQgPSAwXG4gICAgLy8gRGVmaW5lIGVmZmVjdCBoZWFkZXIgY2F0ZWdvcmllc1xuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSB7XG4gICAgICBhY3RpdmU6IHtcbiAgICAgICAgdHlwZTogJ2FjdGl2ZScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0FjdGl2ZScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfSxcbiAgICAgIGluYWN0aXZlOiB7XG4gICAgICAgIHR5cGU6ICdpbmFjdGl2ZScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0luYWN0aXZlJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9XG4gICAgfVxuICAgIC8vIEl0ZXJhdGUgb3ZlciBhY3RpdmUgZWZmZWN0cywgY2xhc3NpZnlpbmcgdGhlbSBpbnRvIGNhdGVnb3JpZXNcbiAgICBmb3IgKGNvbnN0IGUgb2YgZWZmZWN0cykge1xuICAgICAgY291bnQgKz0gMVxuICAgICAgZS5fZ2V0U291cmNlTmFtZSgpIC8vIFRyaWdnZXIgYSBsb29rdXAgZm9yIHRoZSBzb3VyY2UgbmFtZVxuICAgICAgaWYgKGUuaXNTdXBwcmVzc2VkIHx8IGUuZGlzYWJsZWQpIGNhdGVnb3JpZXMuaW5hY3RpdmUuZWZmZWN0cy5wdXNoKGUpXG4gICAgICBlbHNlIGNhdGVnb3JpZXMuYWN0aXZlLmVmZmVjdHMucHVzaChlKVxuICAgIH1cblxuICAgIGlmIChjb3VudCA+IDApIGNhdGVnb3JpZXMuZXhwZW5kZWQgPSB0cnVlXG4gICAgcmV0dXJuIGNhdGVnb3JpZXNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBDT05GSUcsIGZvdW5kcnksIGdhbWUsIFJvbGwgKi9cblxuZXhwb3J0IGNsYXNzIENvQzdEaWNlIHtcbiAgc3RhdGljIGFzeW5jIHJvbGwgKG1vZGlmID0gMCwgcm9sbE1vZGUgPSBudWxsLCBoaWRlRGljZSA9IGZhbHNlKSB7XG4gICAgbGV0IGFsdGVybmF0aXZlRGljZSA9ICcnXG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGlmIChtb2RpZiA8IDApIHtcbiAgICAgICAgYWx0ZXJuYXRpdmVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllUGVuYWx0eScpXG4gICAgICB9IGVsc2UgaWYgKG1vZGlmID4gMCkge1xuICAgICAgICBhbHRlcm5hdGl2ZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVCb251cycpXG4gICAgICAgIC8vIFRlbXBvcmFyeSBmaXggZm9yIGJyb256ZSB0ZXh0dXJlIGluIERzTlxuICAgICAgICAvLyBGb3VuZHJ5VlRUIHYxMlxuICAgICAgICBpZiAoYWx0ZXJuYXRpdmVEaWNlID09PSAnYnJvbnplJyAmJiBmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpLnZlcnNpb24sICc1LjAuMCcpICYmICFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpLnZlcnNpb24sICc1LjAuNScpKSB7XG4gICAgICAgICAgYWx0ZXJuYXRpdmVEaWNlID0gJ2Jyb256ZTAxJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGxldCByb2xsXG4gICAgaWYgKFxuICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKVxuICAgICkge1xuICAgICAgcm9sbCA9IFJvbGwuZnJvbURhdGEoQ29DN0RpY2UuY3JpdDAxKVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzRnVtYmxlICYmXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdoaWRkZW5kZXZtZW51JylcbiAgICApIHtcbiAgICAgIHJvbGwgPSBSb2xsLmZyb21EYXRhKENvQzdEaWNlLmZ1bWJsZTk5KVxuICAgIH0gZWxzZSB7XG4gICAgICByb2xsID0gYXdhaXQgbmV3IFJvbGwoXG4gICAgICAgICcxZHQnICtcbiAgICAgICAgICAoYWx0ZXJuYXRpdmVEaWNlICE9PSAnJ1xuICAgICAgICAgICAgPyAnKzFkb1snICsgYWx0ZXJuYXRpdmVEaWNlICsgJ10nXG4gICAgICAgICAgICA6ICcrMWR0J1xuICAgICAgICAgICkucmVwZWF0KE1hdGguYWJzKG1vZGlmKSkgK1xuICAgICAgICAgICcrMWQxMCdcbiAgICAgICkucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgdW5pdDoge1xuICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgcmVzdWx0czogW11cbiAgICAgIH0sXG4gICAgICB0ZW5zOiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgfSxcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgcm9sbFxuICAgIH1cblxuICAgIGlmIChyb2xsTW9kZSkgcmVzdWx0LnJvbGxNb2RlID0gcm9sbE1vZGVcbiAgICBpZiAoaGlkZURpY2UpIHJlc3VsdC5oaWRlRGljZSA9IGhpZGVEaWNlXG4gICAgZm9yIChjb25zdCBkIG9mIHJvbGwuZGljZSkge1xuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XG4gICAgICAgIHJlc3VsdC50ZW5zLnJlc3VsdHMucHVzaChkLnRvdGFsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnVuaXQudG90YWwgPSBkLnRvdGFsID09PSAxMCA/IDAgOiBkLnRvdGFsXG4gICAgICAgIHJlc3VsdC51bml0LnJlc3VsdHMucHVzaChyZXN1bHQudW5pdC50b3RhbClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1vZGlmIDwgMCkge1xuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPVxuICAgICAgICByZXN1bHQudW5pdC50b3RhbCA9PT0gMCAmJiByZXN1bHQudGVucy5yZXN1bHRzLmluY2x1ZGVzKDApXG4gICAgICAgICAgPyAxMDBcbiAgICAgICAgICA6IE1hdGgubWF4KC4uLnJlc3VsdC50ZW5zLnJlc3VsdHMpXG4gICAgfSBlbHNlIGlmIChyZXN1bHQudW5pdC50b3RhbCA9PT0gMCkge1xuICAgICAgY29uc3QgZGljZSA9IHJlc3VsdC50ZW5zLnJlc3VsdHMuZmlsdGVyKHQgPT4gdCA+IDApXG4gICAgICByZXN1bHQudGVucy50b3RhbCA9IGRpY2UubGVuZ3RoID09PSAwID8gMTAwIDogTWF0aC5taW4oLi4uZGljZSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPSBNYXRoLm1pbiguLi5yZXN1bHQudGVucy5yZXN1bHRzKVxuICAgIH1cbiAgICByZXN1bHQudG90YWwgPSByZXN1bHQudW5pdC50b3RhbCArIHJlc3VsdC50ZW5zLnRvdGFsXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNob3dSb2xsRGljZTNkIChyb2xsKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IHN5bmNEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3luY0RpY2UzZCcpXG5cbiAgICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG5cbiAgICAgIGF3YWl0IGdhbWUuZGljZTNkLnNob3dGb3JSb2xsKFxuICAgICAgICByb2xsLFxuICAgICAgICBnYW1lLnVzZXIsXG4gICAgICAgIHN5bmNEaWNlLFxuICAgICAgICAoY2hhdERhdGEud2hpc3Blci5sZW5ndGggPT09IDAgPyBudWxsIDogY2hhdERhdGEud2hpc3BlciksXG4gICAgICAgIGNoYXREYXRhLmJsaW5kXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNvbWJpbmVkUm9sbCAob3B0aW9ucykge1xuICAgIG9wdGlvbnMucG9vbCA9IG9wdGlvbnMucG9vbCA/PyB7fVxuICAgIG9wdGlvbnMucG9vbFsnMCddID0gZmFsc2VcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucy5wb29sKS5tYXAodiA9PiBwYXJzZUludCh2LCAxMCkpXG4gICAgbGV0IHBlbmFsdHlEaWNlID0gTWF0aC5hYnMoTWF0aC5taW4oMCwgTWF0aC5taW4oLi4ua2V5cykpKVxuICAgIGxldCBib251c0RpY2UgPSBNYXRoLm1heCgwLCBNYXRoLm1heCguLi5rZXlzKSlcbiAgICBjb25zdCBoYXNEU04gPSBnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlXG5cbiAgICBjb25zdCBwb29sID0gW11cbiAgICBwb29sLnB1c2goJzFkdCsxZDEwJylcblxuICAgIGlmIChwZW5hbHR5RGljZSA+IDApIHtcbiAgICAgIHBvb2wucHVzaChcbiAgICAgICAgKGhhc0RTTlxuICAgICAgICAgID8gJysxZG9bJyArIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZVBlbmFsdHknKSArICddJ1xuICAgICAgICAgIDogJysxZHQnXG4gICAgICAgICkucmVwZWF0KE1hdGguYWJzKHBlbmFsdHlEaWNlKSlcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGJvbnVzRGljZSA+IDApIHtcbiAgICAgIHBvb2wucHVzaChcbiAgICAgICAgLy8gVGVtcG9yYXJ5IGZpeCBmb3IgYnJvbnplIHRleHR1cmUgaW4gRHNOXG4gICAgICAgIC8vIEZvdW5kcnlWVFQgdjEyXG4gICAgICAgIChoYXNEU05cbiAgICAgICAgICA/ICcrMWRvWycgKyAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllQm9udXMnKSA9PT0gJ2Jyb256ZScgJiYgZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKS52ZXJzaW9uLCAnNS4wLjAnKSAmJiAhZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKS52ZXJzaW9uLCAnNS4wLjUnKSA/ICdicm9uemUwMScgOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVCb251cycpKSArICddJ1xuICAgICAgICAgIDogJysxZHQnXG4gICAgICAgICkucmVwZWF0KE1hdGguYWJzKGJvbnVzRGljZSkpXG4gICAgICApXG4gICAgfVxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBuZXcgUm9sbChwb29sLmpvaW4oJycpKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBncm91cHM6IHtcbiAgICAgICAgYmFzZURpZTogMCxcbiAgICAgICAgcGVuYWx0eURpY2U6IFtdLFxuICAgICAgICBib251c0RpY2U6IFtdXG4gICAgICB9LFxuICAgICAgdW5pdDogMCxcbiAgICAgIHJvbGxcbiAgICB9XG4gICAgbGV0IGJhc2VTZXQgPSBmYWxzZVxuICAgIGZvciAoY29uc3QgZCBvZiByb2xsLmRpY2UpIHtcbiAgICAgIGlmIChkIGluc3RhbmNlb2YgQ09ORklHLkRpY2UudGVybXMudCkge1xuICAgICAgICBpZiAoIWJhc2VTZXQpIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJhc2VEaWUgPSBkLnRvdGFsXG4gICAgICAgICAgYmFzZVNldCA9IHRydWVcbiAgICAgICAgfSBlbHNlIGlmIChwZW5hbHR5RGljZSA+IDApIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLnBlbmFsdHlEaWNlLnB1c2goZC50b3RhbClcbiAgICAgICAgICBwZW5hbHR5RGljZS0tXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0Lmdyb3Vwcy5ib251c0RpY2UucHVzaChkLnRvdGFsKVxuICAgICAgICAgIGJvbnVzRGljZS0tXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC51bml0ID0gZC50b3RhbCA9PT0gMTAgPyAwIDogZC50b3RhbFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG91dHB1dCA9IHt9XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zLnBvb2wpIHtcbiAgICAgIG91dHB1dFtrZXldID0ge1xuICAgICAgICB1bml0OiB7XG4gICAgICAgICAgdG90YWw6IHJlc3VsdC51bml0LFxuICAgICAgICAgIHJlc3VsdHM6IFtyZXN1bHQudW5pdF1cbiAgICAgICAgfSxcbiAgICAgICAgdGVuczoge1xuICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByb2xsXG4gICAgICB9XG4gICAgICBjb25zdCBtb2RpZiA9IHBhcnNlSW50KGtleSwgMTApXG4gICAgICBsZXQgbW9kaWZpZXIgPSBtb2RpZlxuICAgICAgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLnB1c2gocmVzdWx0Lmdyb3Vwcy5iYXNlRGllKVxuICAgICAgZm9yIChjb25zdCBvZmZzZXQgPSBNYXRoLmFicyhtb2RpZmllcik7IG1vZGlmaWVyIDwgMDsgbW9kaWZpZXIrKykge1xuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLnBlbmFsdHlEaWNlW21vZGlmaWVyICsgb2Zmc2V0XVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IG9mZnNldCA9IG1vZGlmaWVyOyBtb2RpZmllciA+IDA7IG1vZGlmaWVyLS0pIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLnB1c2goXG4gICAgICAgICAgcmVzdWx0Lmdyb3Vwcy5ib251c0RpY2VbTWF0aC5hYnMobW9kaWZpZXIgLSBvZmZzZXQpXVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAobW9kaWYgPCAwKSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMudG90YWwgPVxuICAgICAgICAgIG91dHB1dFtrZXldLnVuaXQudG90YWwgPT09IDAgJiYgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLmluY2x1ZGVzKDApXG4gICAgICAgICAgICA/IDEwMFxuICAgICAgICAgICAgOiBNYXRoLm1heCguLi5vdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMpXG4gICAgICB9IGVsc2UgaWYgKG91dHB1dFtrZXldLnVuaXQudG90YWwgPT09IDApIHtcbiAgICAgICAgY29uc3QgZGljZSA9IG91dHB1dFtrZXldLnRlbnMucmVzdWx0cy5maWx0ZXIodCA9PiB0ID4gMClcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9IGRpY2UubGVuZ3RoID09PSAwID8gMTAwIDogTWF0aC5taW4oLi4uZGljZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMudG90YWwgPSBNYXRoLm1pbiguLi5vdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMpXG4gICAgICB9XG4gICAgICBvdXRwdXRba2V5XS50b3RhbCA9IG91dHB1dFtrZXldLnVuaXQudG90YWwgKyBvdXRwdXRba2V5XS50ZW5zLnRvdGFsXG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxuXG4gIC8vIFByZWRldGVybWluZWQgdmFsdWUgb2YgZGljZSwgdXNlZCBvbmx5IGZvciBERVYgYW5kIHRlc3QgcHVycG9zZXNcbiAgc3RhdGljIGZ1bWJsZTk5ID0ge1xuICAgIGNsYXNzOiAnUm9sbCcsXG4gICAgb3B0aW9uczoge30sXG4gICAgZGljZTogW10sXG4gICAgZm9ybXVsYTogJzFkdCArIDFkMTAnLFxuICAgIHRlcm1zOiBbXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnQ29DN0RlY2FkZXJEaWUnLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBudW1iZXI6IDEsXG4gICAgICAgIGZhY2VzOiAxMCxcbiAgICAgICAgbW9kaWZpZXJzOiBbXSxcbiAgICAgICAgcmVzdWx0czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJlc3VsdDogOSxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdPcGVyYXRvclRlcm0nLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBvcGVyYXRvcjogJysnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ0RpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiA5LFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgXSxcbiAgICB0b3RhbDogOTksXG4gICAgZXZhbHVhdGVkOiB0cnVlXG4gIH1cblxuICBzdGF0aWMgY3JpdDAxID0ge1xuICAgIGNsYXNzOiAnUm9sbCcsXG4gICAgb3B0aW9uczoge30sXG4gICAgZGljZTogW10sXG4gICAgZm9ybXVsYTogJzFkdCArIDFkMTAnLFxuICAgIHRlcm1zOiBbXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnQ29DN0RlY2FkZXJEaWUnLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBudW1iZXI6IDEsXG4gICAgICAgIGZhY2VzOiAxMCxcbiAgICAgICAgbW9kaWZpZXJzOiBbXSxcbiAgICAgICAgcmVzdWx0czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJlc3VsdDogMTAsXG4gICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnT3BlcmF0b3JUZXJtJyxcbiAgICAgICAgb3B0aW9uczoge30sXG4gICAgICAgIGV2YWx1YXRlZDogdHJ1ZSxcbiAgICAgICAgb3BlcmF0b3I6ICcrJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdEaWUnLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBudW1iZXI6IDEsXG4gICAgICAgIGZhY2VzOiAxMCxcbiAgICAgICAgbW9kaWZpZXJzOiBbXSxcbiAgICAgICAgcmVzdWx0czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJlc3VsdDogMSxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIF0sXG4gICAgdG90YWw6IDEsXG4gICAgZXZhbHVhdGVkOiB0cnVlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcsIGZvdW5kcnksIGdhbWUsIEl0ZW0sIFJvbGwsIFRleHRFZGl0b3IsIFRva2VuLCB1aSwgZnJvbVV1aWQgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DSURFZGl0b3IgfSBmcm9tICcuLi9hcHBzL2NvYy1pZC1lZGl0b3IuanMnXG5cbi8qKlxuICogT3ZlcnJpZGUgYW5kIGV4dGVuZCB0aGUgYmFzaWMgOmNsYXNzOmBJdGVtYCBpbXBsZW1lbnRhdGlvblxuICovXG5leHBvcnQgY2xhc3MgQ29DN0l0ZW0gZXh0ZW5kcyBJdGVtIHtcbiAgLyoqIENyZWF0ZSBkZXJpdmVkIGRvY3VtZW50IGNsYXNzZXMgZm9yIHNwZWNpZmljIEl0ZW0gdHlwZXMgKi9cbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICAvKiogQHNlZSBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMgaW4gbW9kdWxlL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cyAqL1xuICAgIGlmIChkYXRhLnR5cGUgaW4gQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzICYmICFjb250ZXh0Py5leHRlbmRlZCkge1xuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIG5ldyBjbGFzcyB3aWxsIGNhbGwgaXQncyBzdXBlcigpLFxuICAgICAgICogdGhlIGV4dGVuZGVkIGZsYWcgd2lsbCBiZSB0cnVlLCB0aHVzIGJ5cGFzc2luZyB0aGlzIHdob2xlIHByb2Nlc3NcbiAgICAgICAqIGFuZCByZXN1bWUgZGVmYXVsdCBiZWhhdmlvclxuICAgICAgICovXG4gICAgICByZXR1cm4gbmV3IENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3Nlc1tkYXRhLnR5cGVdKGRhdGEsIHtcbiAgICAgICAgLi4ueyBleHRlbmRlZDogdHJ1ZSB9LFxuICAgICAgICAuLi5jb250ZXh0XG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NraWxscy5zdmcnXG4gICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N0YXR1cycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL2F1cmEuc3ZnJ1xuICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9zd29yZC5zdmcnXG4gICAgICB9XG4gICAgfVxuICAgIC8qKiBEZWZhdWx0IGJlaGF2aW9yLCBqdXN0IGNhbGwgc3VwZXIoKSBhbmQgZG8gYWxsIHRoZSBkZWZhdWx0IEl0ZW0gaW5pdHMgKi9cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgYXN5bmMgX2NyZWF0ZURvY3VtZW50TGluayAoZXZlbnREYXRhLCB7IHJlbGF0aXZlVG8sIGxhYmVsIH0gPSB7fSkge1xuICAgIGlmICh0eXBlb2YgZXZlbnREYXRhLnR5cGUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBldmVudERhdGEudXVpZCA9PT0gJ3N0cmluZycgJiYgZXZlbnREYXRhLnR5cGUgPT09ICdJdGVtJyAmJiBldmVudERhdGEudXVpZC5tYXRjaCgvXkFjdG9yXFwuLykgJiYgcmVsYXRpdmVUbyBpbnN0YW5jZW9mIENPTkZJRy5Kb3VybmFsRW50cnlQYWdlLmRvY3VtZW50Q2xhc3MpIHtcbiAgICAgIC8vIElmIGRyb3BwaW5nIGEgc2tpbGwvd2VhcG9uIGZyb20gYW4gQWN0b3Igb250byBhIEpvdXJuYWwgRW50cnkgUGFnZSBjb252ZXJ0IHRvIGEgY2hlY2sgbGlua1xuICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IGZyb21VdWlkKGV2ZW50RGF0YS51dWlkKVxuICAgICAgaWYgKFsnc2tpbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICByZXR1cm4gJ0Bjb2M3LmNoZWNrW3R5cGU6JyArIGl0ZW0udHlwZSArICcsbmFtZTonICsgaXRlbS5uYW1lICsgJ10nXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5fY3JlYXRlRG9jdW1lbnRMaW5rKGV2ZW50RGF0YSwgeyByZWxhdGl2ZVRvLCBsYWJlbCB9KVxuICB9XG5cbiAgc3RhdGljIGdldCBpY29uTGFuZ3VhZ2UgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMvbGFuZ3VhZ2Uuc3ZnJ1xuICB9XG5cbiAgc3RhdGljIGdldCBmbGFncyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1hbGZ1bmN0aW9uOiAnbWFsZmMnXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBvbiBvZiB0aGUgaXRlbSBwcm9wZXJ0eSBpbiBkYXRhLmRhdGEucHJvcGVydGllc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlJZCA6IG5hbWUgZm9yIHRoZSBwcm9wZXJ0eSB0byB0b2dnbGVcbiAgICovXG4gIGFzeW5jIHRvZ2dsZVByb3BlcnR5IChwcm9wZXJ0eUlkLCBvdmVycmlkZSA9IGZhbHNlKSB7XG4gICAgbGV0IGNoZWNrZWRQcm9wcyA9IHt9XG4gICAgbGV0IGZpZ2h0aW5nXG4gICAgbGV0IGZpcmVhcm1zXG4gICAgbGV0IHJhbmdlZFxuICAgIGlmICh0eXBlb2YgQ09DNy5lcmFzW3Byb3BlcnR5SWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIENvQ0lERWRpdG9yLmVyYVRvZ2dsZSh0aGlzLCBwcm9wZXJ0eUlkKVxuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAnd2VhcG9uJyAmJiAhb3ZlcnJpZGUpIHtcbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnYWhkYicpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmFoZGIpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWhkYic6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWRkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5haGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdhZGRiJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYWRkYikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hZGRiJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5haGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFkZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3Nob3RndW4nKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bic6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UuZXh0cmVtZS52YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbCxcbiAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy52YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmxvbmcuZGFtYWdlJzogbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ21lbGVlJyB8fCBwcm9wZXJ0eUlkID09PSAncm5nZCcpIHtcbiAgICAgICAgbGV0IG1lbGVlV2VhcG9uXG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnICYmICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3JuZ2QnICYmICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdybmdkJyAmJiB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVsZWVXZWFwb24pIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMubWVsZWUnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYnJzdCc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmF1dG8nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5kYnJsJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucm5nZCc6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3NraWxsJyAmJiAhb3ZlcnJpZGUpIHtcbiAgICAgIGxldCBtb2RpZiA9IGZhbHNlXG4gICAgICBzd2l0Y2ggKHByb3BlcnR5SWQpIHtcbiAgICAgICAgY2FzZSAnY29tYmF0JzpcbiAgICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAgICAgICAvLyBDbG9zZSBjb21iYXQgYnkgZGVmYXVsdFxuICAgICAgICAgICAgZmlnaHRpbmcgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCc6IGZhbHNlLFxuICAgICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IGZhbHNlLFxuICAgICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcbiAgICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJhbmdlZCc6IGZhbHNlLFxuICAgICAgICAgICAgICAnc3lzdGVtLnNwZWNpYWxpemF0aW9uJzogJycsXG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdmaWdodGluZyc6XG4gICAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgICAgICAgIGZpcmVhcm1zID0gZmFsc2VcbiAgICAgICAgICAgIHJhbmdlZCA9IGZhbHNlXG4gICAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZmlyZWFybSc6XG4gICAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgICAgICAgZmlyZWFybXMgPSB0cnVlXG4gICAgICAgICAgICByYW5nZWQgPSBmYWxzZVxuICAgICAgICAgICAgZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdyYW5nZWQnOlxuICAgICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5yYW5nZWQpIHtcbiAgICAgICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgICAgICAgZmlyZWFybXMgPSBmYWxzZVxuICAgICAgICAgICAgcmFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBpZiAobW9kaWYpIHtcbiAgICAgICAgLy8gc2V0IHNwZWNpYWxpc2F0aW9uIGlmIGZpZ2h0aW5nIG9yIGZpcmVhcm1cbiAgICAgICAgaWYgKGZpZ2h0aW5nKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucmFuZ2VkJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5za2lsbE5hbWUsXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSlcbiAgICAgICAgICApXG4gICAgICAgICAgY2hlY2tlZFByb3BzLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICB9IGVsc2UgaWYgKGZpcmVhcm1zKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucmFuZ2VkJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5za2lsbE5hbWUsXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5maXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lKVxuICAgICAgICAgIClcbiAgICAgICAgICBjaGVja2VkUHJvcHMubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHMuc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgIH0gZWxzZSBpZiAocmFuZ2VkKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJhbmdlZCc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5za2lsbE5hbWUsXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5yYW5nZWRTcGVjaWFsaXphdGlvbk5hbWUpXG4gICAgICAgICAgKVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9wZXJ0eUlkID09PSAnc3BlY2lhbCcpIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW3Byb3BlcnR5SWRdKSB7XG4gICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJhbmdlZCc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiBmYWxzZSxcbiAgICAgICAgICAnc3lzdGVtLnNwZWNpYWxpemF0aW9uJzogJycsXG4gICAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWUsXG4gICAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgdGhpcy5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoY2hlY2tlZFByb3BzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgdGhpcy51cGRhdGUoY2hlY2tlZFByb3BzKVxuICAgICAgcmV0dXJuIGl0ZW1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJvcE5hbWUgPSBgc3lzdGVtLnByb3BlcnRpZXMuJHtwcm9wZXJ0eUlkfWBcbiAgICAgIGNvbnN0IHByb3BWYWx1ZSA9ICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW3Byb3BlcnR5SWRdXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtwcm9wTmFtZV06IHByb3BWYWx1ZSB9KS50aGVuKGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBoYXNQcm9wZXJ0eSAocHJvcGVydHlJZCkge1xuICAgIHJldHVybiB0aGlzLmlzSW5jbHVkZWRJblNldCgncHJvcGVydGllcycsIHByb3BlcnR5SWQpXG4gIH1cblxuICBnZXQgc2hvcnROYW1lICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm5hbWVcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVJvbGwgKHJvbGwpIHtcbiAgICBpZiAoJ3VwZGF0ZVJvbGwnIGluIHRoaXMuc2hlZXQpIHJldHVybiBhd2FpdCB0aGlzLnNoZWV0LnVwZGF0ZVJvbGwocm9sbClcbiAgICBlbHNlIGlmICgndXBkYXRlUm9sbCcgaW4gdGhpcykgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlUm9sbChyb2xsKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHN0YXRpYyBnZXROYW1lUGFydHNTcGVjIChza2lsbE5hbWUsIHNwZWNpYWxpemF0aW9uKSB7XG4gICAgaWYgKCFzcGVjaWFsaXphdGlvbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogJycsXG4gICAgICAgIHNraWxsTmFtZVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzcGVjTmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICdeKCcgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKHNwZWNpYWxpemF0aW9uKSArICcpXFxcXHMqXFxcXCgoLispXFxcXCkkJyxcbiAgICAgICdpJ1xuICAgIClcbiAgICBjb25zdCBtYXRjaCA9IHNraWxsTmFtZS5tYXRjaChzcGVjTmFtZVJlZ2V4KVxuICAgIGlmIChtYXRjaCkge1xuICAgICAgc3BlY2lhbGl6YXRpb24gPSBtYXRjaFsxXVxuICAgICAgc2tpbGxOYW1lID0gbWF0Y2hbMl1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJyxcbiAgICAgIHNwZWNpYWxpemF0aW9uLFxuICAgICAgc2tpbGxOYW1lXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldE5hbWVXaXRob3V0U3BlYyAoaXRlbSkge1xuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQ29DN0l0ZW0pIHtcbiAgICAgIGlmIChpdGVtLnN5c3RlbT8ucHJvcGVydGllcz8uc3BlY2lhbCAmJiB0eXBlb2YgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiYgdHlwZW9mIGl0ZW0uc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gaXRlbS5za2lsbE5hbWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG5cbiAgc3RhdGljIGlzQW55U3BlYyAoaXRlbSkge1xuICAgIGlmIChpdGVtLnR5cGUgIT09ICdza2lsbCcgfHwgIWl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIFtcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpLnRvTG93ZXJDYXNlKCksXG4gICAgICAnYW55J1xuICAgIF0uaW5jbHVkZXMoQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzLnNraWxsLmd1ZXNzTmFtZVBhcnRzKGl0ZW0ubmFtZSkuc2tpbGxOYW1lLnRvTG93ZXJDYXNlKCkpXG4gIH1cblxuICBhc3luYyBjaGVja1NraWxsUHJvcGVydGllcyAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuXG4gICAgY29uc3QgY2hlY2tlZFByb3BzID0ge31cbiAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQpIHtcbiAgICAgIC8vIGlmIHNraWxsIGlzIG5vdCBhIHNwZWNpYWxpc2F0aW9uIG1ha2UgaXQgYSBzcGVjaWFsaXNhdGlvblxuICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsID0gdHJ1ZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnXSA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gSWYgc2tpbGwgaXMgY29tYmF0IHNraWxsIGFuZCBubyBzcGVjaWFsaXNhdGlvbiBzZXQgdGhlbiBtYWtlIGl0IGEgZmlnaHRpbmcoIGNsb3NlY29tYmF0KSBza2lsbFxuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyAmJlxuICAgICAgICAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyA9IHRydWVcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyddID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBpZiBza2lsbCBpcyBjbG9zZSBjb21iYXQgd2l0aG91dCBzcGVjaWFsaXNhdGlvbiBuYW1lIG1ha2Ugc2V0IGl0IGFjY29yZGluZyB0byB0aGUgZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyAmJlxuICAgICAgICAoIXRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uIHx8IHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uID09PSAnJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgLy8gaWYgc2tpbGwgaXMgcmFuZ2UgY29tYmF0IHdpdGhvdXQgYSBzcGVjaWFsaXNhdGlvbiBuYW1lIG1ha2Ugc2V0IGl0IGFjY29yZGluZyB0byB0aGUgZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gJiZcbiAgICAgICAgKCF0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiB8fCB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9PT0gJycpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5maXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gZmFsc2VcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyddID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID0gZmFsc2VcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJ10gPSBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhjaGVja2VkUHJvcHMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoZWNrZWRQcm9wcylcbiAgICB9XG5cbiAgICByZXR1cm4gY2hlY2tlZFByb3BzXG4gIH1cblxuICBpc0luY2x1ZGVkSW5TZXQgKHNldCwgcHJvcGVydHlJZCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW1bc2V0XSkgdGhpcy5zeXN0ZW1bc2V0XSA9IFtdXG4gICAgY29uc3QgcHJvcGVydHlJbmRleCA9IHRoaXMuc3lzdGVtW3NldF0uaW5kZXhPZihwcm9wZXJ0eUlkKVxuICAgIGlmIChwcm9wZXJ0eUluZGV4ID4gLTEpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3MpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5kZXZlbG9wZW1lbnQnOiB0cnVlIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdW5mbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3MpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5kZXZlbG9wZW1lbnQnOiBmYWxzZSB9KVxuICAgIH1cbiAgfVxuXG4gIGdldCBkZXZlbG9wZW1lbnRGbGFnICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJdGVtRmxhZygnZGV2ZWxvcGVtZW50JylcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUl0ZW1GbGFnIChmbGFnTmFtZSwgZXJhc2VBZGp1c3RtZW50ID0gdHJ1ZSkge1xuICAgIGNvbnN0IGZsYWdWYWx1ZSA9ICF0aGlzLmdldEl0ZW1GbGFnKGZsYWdOYW1lKVxuICAgIGNvbnN0IG5hbWUgPSBgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YFxuICAgIGlmIChcbiAgICAgIChmbGFnTmFtZSA9PT0gJ29jY3VwYXRpb24nIHx8IGZsYWdOYW1lID09PSAnYXJjaGV0eXBlJykgJiZcbiAgICAgICFmbGFnVmFsdWUgJiZcbiAgICAgIGVyYXNlQWRqdXN0bWVudFxuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICBbYHN5c3RlbS5hZGp1c3RtZW50cy4ke2ZsYWdOYW1lfWBdOiBudWxsLFxuICAgICAgICBbbmFtZV06IGZsYWdWYWx1ZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGZsYWdOYW1lID09PSAnZGV2ZWxvcGVtZW50Jykge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxYcEdhaW5EaXNhYmxlZCcpKVxuICAgICAgfVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBzZXRJdGVtRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YF06IHRydWUgfSlcbiAgfVxuXG4gIGFzeW5jIHVuc2V0SXRlbUZsYWcgKGZsYWdOYW1lLCBlcmFzZUFkanVzdG1lbnQgPSB0cnVlKSB7XG4gICAgY29uc3QgbmFtZSA9IGBzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXG4gICAgaWYgKFxuICAgICAgKGZsYWdOYW1lID09PSAnb2NjdXBhdGlvbicgfHwgZmxhZ05hbWUgPT09ICdhcmNoZXR5cGUnKSAmJlxuICAgICAgZXJhc2VBZGp1c3RtZW50XG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgIFtgc3lzdGVtLmFkanVzdG1lbnRzLiR7ZmxhZ05hbWV9YF06IG51bGwsXG4gICAgICAgIFtuYW1lXTogZmFsc2VcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmYWxzZSB9KVxuICB9XG5cbiAgZ2V0SXRlbUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gdHJ1ZVxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdXG4gIH1cblxuICBnZXQgdXNlc0FsdGVybmF0aXZlU2tpbGwgKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnR5cGUgPT09ICd3ZWFwb24nICYmXG4gICAgICAodGhpcy5zeXN0ZW0ucHJvcGVydGllcz8uYXV0byA9PT0gdHJ1ZSB8fFxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzPy5icnN0ID09PSB0cnVlIHx8XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXM/LnRocm93biA9PT0gdHJ1ZSlcbiAgICApXG4gIH1cblxuICBnZXQgbWF4VXNlc1BlclJvdW5kICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBtdWx0aVNob3QgPSBwYXJzZUludCh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubWF4KVxuICAgIGlmIChpc05hTihtdWx0aVNob3QpKSByZXR1cm4gMFxuICAgIHJldHVybiBtdWx0aVNob3RcbiAgfVxuXG4gIGdldCB1c2VzUGVyUm91bmQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHNpbmdsZVNob3QgPSBwYXJzZUludCh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubm9ybWFsKVxuICAgIGlmIChpc05hTihzaW5nbGVTaG90KSkgcmV0dXJuIDBcbiAgICByZXR1cm4gc2luZ2xlU2hvdFxuICB9XG5cbiAgZ2V0IHVzZXNQZXJSb3VuZFN0cmluZyAoKSB7XG4gICAgbGV0IHVzZXNQZXJSb3VuZFxuICAgIGlmICh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubm9ybWFsKSB7XG4gICAgICB1c2VzUGVyUm91bmQgPSB0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubm9ybWFsXG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZXNQZXJSb3VuZCA9ICcxJ1xuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm1heCkge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAoJHt0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubWF4fSlgXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8pIHtcbiAgICAgIHVzZXNQZXJSb3VuZCArPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbkF1dG8nKX1gXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmJyc3QpIHtcbiAgICAgIHVzZXNQZXJSb3VuZCArPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbkJyc3QnKX1gXG4gICAgICBpZiAodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KSB7XG4gICAgICAgIHVzZXNQZXJSb3VuZCArPSBgKCR7dGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0fSlgXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVzZXNQZXJSb3VuZFxuICB9XG5cbiAgZ2V0IG11bHRpcGxlU2hvdHMgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLm1heFVzZXNQZXJSb3VuZCA8PSAxKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBzaW5nbGVTaG90ICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMudXNlc1BlclJvdW5kKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBiYXNlUmFuZ2UgKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnJhbmdlLm5vcm1hbC52YWx1ZSlcbiAgICBpZiAoIWlzTmFOKHJlc3VsdCkpIHtcbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSb2xsKFxuICAgICAgdGhpcy5zeXN0ZW0ucmFuZ2Uubm9ybWFsLnZhbHVlLFxuICAgICAgdGhpcy5wYXJlbnQ/LnBhcnNlQ2hhcmFjdGVyaXN0aWNzKCkgPz8ge31cbiAgICApLmV2YWx1YXRlU3luYygpLnRvdGFsXG4gIH1cblxuICBnZXQgbG9uZ1JhbmdlICgpIHtcbiAgICBjb25zdCByZXN1bHQgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5yYW5nZS5sb25nLnZhbHVlKVxuICAgIGlmICghaXNOYU4ocmVzdWx0KSkge1xuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICByZXR1cm4gbmV3IFJvbGwoXG4gICAgICB0aGlzLnN5c3RlbS5yYW5nZS5sb25nLnZhbHVlLFxuICAgICAgdGhpcy5wYXJlbnQ/LnBhcnNlQ2hhcmFjdGVyaXN0aWNzKCkgPz8ge31cbiAgICApLmV2YWx1YXRlU3luYygpLnRvdGFsXG4gIH1cblxuICBnZXQgZXh0cmVtZVJhbmdlICgpIHtcbiAgICBjb25zdCByZXN1bHQgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5yYW5nZS5leHRyZW1lLnZhbHVlKVxuICAgIGlmICghaXNOYU4ocmVzdWx0KSkge1xuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICByZXR1cm4gbmV3IFJvbGwoXG4gICAgICB0aGlzLnN5c3RlbS5yYW5nZS5leHRyZW1lLnZhbHVlLFxuICAgICAgdGhpcy5wYXJlbnQ/LnBhcnNlQ2hhcmFjdGVyaXN0aWNzKCkgPz8ge31cbiAgICApLmV2YWx1YXRlU3luYygpLnRvdGFsXG4gIH1cblxuICBnZXQgc2tpbGxQcm9wZXJ0aWVzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gW11cblxuICAgIGNvbnN0IHNraWxsUHJvcGVydGllcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlKSB7XG4gICAgICAgIHNraWxsUHJvcGVydGllcy5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBza2lsbFByb3BlcnRpZXNcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjYWxjdWxhdGVCYXNlIChhY3RvciwgZGF0YSkge1xuICAgIGlmIChkYXRhLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBudWxsXG4gICAgaWYgKFN0cmluZyhkYXRhLnN5c3RlbS5iYXNlKS5pbmNsdWRlcygnQCcpKSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuYWN0b3IuJykpIHtcbiAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBmb3VuZHJ5LnV0aWxzLmdldFByb3BlcnR5KGFjdG9yLCB2YWx1ZS5zdWJzdHJpbmcoMTEpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgdmFsdWVcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhbHVlID0gTWF0aC5mbG9vcihcbiAgICAgICAgICBuZXcgUm9sbChkYXRhLnN5c3RlbS5iYXNlLCBwYXJzZWQpWyghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpID8gJ2V2YWx1YXRlJyA6ICdldmFsdWF0ZVN5bmMnKS8qIC8vIEZvdW5kcnlWVFQgdjExICovXSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIClcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB2YWx1ZSA9IDBcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH1cbiAgICByZXR1cm4gIWlzTmFOKHBhcnNlSW50KGRhdGEuc3lzdGVtLmJhc2UpKSA/IHBhcnNlSW50KGRhdGEuc3lzdGVtLmJhc2UpIDogbnVsbFxuICB9XG5cbiAgZ2V0IF9iYXNlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gW251bGwsIGZhbHNlXVxuICAgIGlmICh0eXBlb2YgdGhpcy5zeXN0ZW0uYmFzZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbdGhpcy5zeXN0ZW0uYmFzZSwgZmFsc2VdXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3lzdGVtLmJhc2UuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZm91bmRyeS51dGlscy5nZXRQcm9wZXJ0eSh0aGlzLCB2YWx1ZS5zdWJzdHJpbmcoNSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCB2YWx1ZVxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKFxuICAgICAgICAgIG5ldyBSb2xsKHRoaXMuc3lzdGVtLmJhc2UsIHBhcnNlZClbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHZhbHVlID0gMFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gW3ZhbHVlLCB0cnVlXVxuICAgIH1cbiAgICByZXR1cm4gW1xuICAgICAgIWlzTmFOKHBhcnNlSW50KHRoaXMuc3lzdGVtLmJhc2UpKVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmJhc2UpXG4gICAgICAgIDogbnVsbCxcbiAgICAgIGZhbHNlXG4gICAgXVxuICB9XG5cbiAgYXN5bmMgYXN5bmNCYXNlICgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5fYmFzZVxuICAgIGlmIChlWzFdKSB7XG4gICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgIGBbQ09DN10gKCR7dGhpcy5wYXJlbnQ/Lm5hbWV9KSBFdmFsdWF0aW5nIHNraWxsICR7dGhpcy5uYW1lfToke3RoaXMuc3lzdGVtLmJhc2V9IHRvICR7ZVswXX1gXG4gICAgICApXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmFzZSc6IGVbMF0gfSlcbiAgICB9XG4gICAgcmV0dXJuIGVbMF1cbiAgfVxuXG4gIGdldCBiYXNlICgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5fYmFzZVxuICAgIGlmIChlWzFdKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmFzZSc6IGVbMF0gfSlcbiAgICB9XG4gICAgcmV0dXJuIGVbMF1cbiAgfVxuXG4gIGdldEJ1bGxldExlZnQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5zeXN0ZW0uYW1tbykge1xuICAgICAgdGhpcy5zZXRCdWxsZXRzKDApXG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYW1tb1xuICB9XG5cbiAgYXN5bmMgcmVsb2FkICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBtYXhCdWxsZXQgPSB0aGlzLnN5c3RlbS5idWxsZXRzXG4gICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmJ1bGxldHMpXG4gICAgICA6IDFcbiAgICBhd2FpdCB0aGlzLnNldEJ1bGxldHMobWF4QnVsbGV0KVxuICB9XG5cbiAgYXN5bmMgc2V0QnVsbGV0cyAoYnVsbGV0cykge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hbW1vJzogYnVsbGV0cyB8fCAwIH0pXG4gIH1cblxuICBhc3luYyBhZGRCdWxsZXQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxuICAgIGNvbnN0IG1heEJ1bGxldHMgPSB0aGlzLnN5c3RlbS5idWxsZXRzXG4gICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmJ1bGxldHMpXG4gICAgICA6IDFcbiAgICBpZiAoYnVsbGV0cyArIDEgPj0gbWF4QnVsbGV0cykgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKG1heEJ1bGxldHMpXG4gICAgZWxzZSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoYnVsbGV0cyArIDEpXG4gIH1cblxuICBhc3luYyBzaG9vdEJ1bGxldHMgKHgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBidWxsZXRzID0gYXdhaXQgdGhpcy5nZXRCdWxsZXRMZWZ0KClcbiAgICBpZiAoeCA+IGJ1bGxldHMpIGF3YWl0IHRoaXMuc2V0QnVsbGV0cygwKVxuICAgIGVsc2UgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKGJ1bGxldHMgLSB4KVxuICB9XG5cbiAgc3RhdGljIG1lcmdlT3B0aW9uYWxTa2lsbHMgKHNraWxsTGlzdCwgb3B0aW9ucykge1xuICAgIGNvbnN0IGpvaW50QXJyYXkgPSBza2lsbExpc3QuY29uY2F0KG9wdGlvbnMpXG4gICAgcmV0dXJuIGpvaW50QXJyYXlcbiAgICAgIC5yZWR1Y2UoKG5ld0FycmF5LCBpdGVtKSA9PiB7XG4gICAgICAgIC8vIElmIHNraWxsIGlzIG5vdCBhIGdlbmVyaWMgc3BlYyBhbmQgaXMgYWxyZWFkeSBpbmNsdWRlZCB3ZSBkb24ndCBhZGQgaXRlbVxuICAgICAgICBpZiAoXG4gICAgICAgICAgIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSAmJlxuICAgICAgICAgIG5ld0FycmF5LmZpbmQoc2tpbGwgPT4gc2tpbGwubmFtZSA9PT0gaXRlbS5uYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gbmV3QXJyYXlcbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIGl0ZW0gaXMgYWRkZWRcbiAgICAgICAgcmV0dXJuIFsuLi5uZXdBcnJheSwgaXRlbV1cbiAgICAgIH0sIFtdKVxuICAgICAgLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICB9XG5cbiAgLyoqIFRPRE8gOiByaWVuIGEgZmFpcmUgaWNpICEhXG4gICAqIEdldCB0aGUgQWN0b3Igd2hpY2ggaXMgdGhlIGF1dGhvciBvZiBhIGNoYXQgY2FyZFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICAgIFRoZSBjaGF0IGNhcmQgYmVpbmcgdXNlZFxuICAgKiBAcmV0dXJuIHtBY3RvcnxudWxsfSAgICAgICAgIFRoZSBBY3RvciBlbnRpdHkgb3IgbnVsbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9nZXRDaGF0Q2FyZEFjdG9yIChjYXJkKSB7XG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgY29uc3QgdG9rZW5LZXkgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgIGlmICh0b2tlbktleSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gdG9rZW5LZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZCkgfHwgbnVsbFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIENoYXQgTWVzc2FnZSBIZWxwZXJzICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogUHJlcGFyZSBhbiBvYmplY3Qgb2YgY2hhdCBkYXRhIHVzZWQgdG8gZGlzcGxheSBhIGNhcmQgZm9yIHRoZSBJdGVtIGluIHRoZSBjaGF0IGxvZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gaHRtbE9wdGlvbnMgICAgT3B0aW9ucyB1c2VkIGJ5IHRoZSBUZXh0RWRpdG9yLmVucmljaEhUTUwgZnVuY3Rpb25cbiAgICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgICAgICAgIEFuIG9iamVjdCBvZiBjaGF0IGRhdGEgdG8gcmVuZGVyXG4gICAqL1xuICBhc3luYyBnZXRDaGF0RGF0YSAoaHRtbE9wdGlvbnMgPSB7fSkge1xuICAgIC8vIEZvdW5kcnlWVFQgdjExXG4gICAgaHRtbE9wdGlvbnMuYXN5bmMgPSB0cnVlXG4gICAgY29uc3QgZGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtKVxuICAgIC8vIEZpeCA6IGRhdGEgY2FuIGhhdmUgZGVzY3JpcHRpb24gZGlyZWN0bHkgaW4gZmllbGQsIG5vdCB1bmRlciB2YWx1ZS5cbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uID0ge1xuICAgICAgICB2YWx1ZTogZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgc3BlY2lhbDogJydcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9ICcnXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsID0gJydcbiAgICB9XG4gICAgY29uc3QgbGFiZWxzID0gW11cblxuICAgIC8vIFJpY2ggdGV4dCBkZXNjcmlwdGlvblxuICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgaHRtbE9wdGlvbnNcbiAgICApXG4gICAgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsLFxuICAgICAgaHRtbE9wdGlvbnNcbiAgICApXG5cbiAgICAvLyBJdGVtIHR5cGUgc3BlY2lmaWMgcHJvcGVydGllc1xuICAgIGNvbnN0IHByb3BzID0gW11cbiAgICBjb25zdCBmbiA9IHRoaXNbYF8ke3RoaXMudHlwZX1DaGF0RGF0YWBdXG4gICAgaWYgKGZuKSBmbi5iaW5kKHRoaXMpKGRhdGEsIGxhYmVscywgcHJvcHMsIGh0bWxPcHRpb25zKVxuXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHByb3BzLnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmlsdGVyIHByb3BlcnRpZXMgYW5kIHJldHVyblxuICAgIGRhdGEucHJvcGVydGllcyA9IHByb3BzLmZpbHRlcihwID0+ICEhcClcbiAgICBkYXRhLmxhYmVscyA9IGxhYmVsc1xuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBfd2VhcG9uQ2hhdERhdGEgKGRhdGEsIGxhYmVscywgcHJvcHMpIHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlKSBwcm9wcy5wdXNoKHZhbHVlKVxuICAgIH1cblxuICAgIGxldCBza2lsbExhYmVsID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsJylcbiAgICBsZXQgc2tpbGxOYW1lID0gJydcbiAgICBsZXQgZm91bmQgPSBmYWxzZVxuICAgIGlmICh0aGlzLnN5c3RlbS5za2lsbC5tYWluLmlkKSB7XG4gICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3I/Lml0ZW1zLmdldCh0aGlzLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgIHNraWxsTmFtZSArPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoc2tpbGwpXG4gICAgICAgIGZvdW5kID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHRoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpIHtcbiAgICAgIHNraWxsTGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxzJylcbiAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IGAvJHtDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoc2tpbGwpfWBcbiAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFmb3VuZCkge1xuICAgICAgc2tpbGxOYW1lID0gdGhpcy5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lXG4gICAgICBpZiAodGhpcy51c2VzQWx0ZXJuYXRpdmVTa2lsbCAmJiB0aGlzLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IGAvJHt0aGlzLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWV9YFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChza2lsbE5hbWUpIHtcbiAgICAgIGxhYmVscy5wdXNoKHtcbiAgICAgICAgbmFtZTogc2tpbGxMYWJlbCxcbiAgICAgICAgdmFsdWU6IHNraWxsTmFtZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBsYWJlbHMucHVzaCh7XG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uVXNlc1BlclJvdW5kJyksXG4gICAgICB2YWx1ZTogdGhpcy51c2VzUGVyUm91bmRTdHJpbmdcbiAgICB9KVxuXG4gICAgbGFiZWxzLnB1c2goe1xuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbk1hbGZ1bmN0aW9uJyksXG4gICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0ubWFsZnVuY3Rpb24gPyB0aGlzLnN5c3RlbS5tYWxmdW5jdGlvbiA6ICctJ1xuICAgIH0pXG5cbiAgICBpZiAodGhpcy5zeXN0ZW0uYnVsbGV0cykge1xuICAgICAgbGFiZWxzLnB1c2goe1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQnVsbGV0c0luTWFnJyksXG4gICAgICAgIHZhbHVlOiB0aGlzLnN5c3RlbS5idWxsZXRzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNhbkJlUHVzaGVkICgpIHtcbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnICYmIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMucHVzaCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBpbXBhbGUgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmltcGxcbiAgfVxuXG4gIGdldCBpc0RvZGdlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5kb2RnZScpLnRvTG93ZXJDYXNlKClcbiAgICApXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBDT05TVCwgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIFJheSwgVG9rZW4sIHVpICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuLyoqXG4gKiBSZXR1cm4gPGE+IGVsZW1lbnQgb2YgYSByb2xsIGluc3RhbmNlLiBmb3VuZHJ5LmpzIHJlZjpUZXh0RWRpdG9yLl9jcmVhdGVJbmxpbmVSb2xsXG4gKiBAcGFyYW0ge1JvbGx9IHJvbGwgICAgICBUaGUgcm9sbCBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUlubGluZVJvbGwgKHJvbGwpIHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBjbHM6IFsnaW5saW5lLXJvbGwnXSxcbiAgICBkYXRhc2V0OiB7fVxuICB9XG5cbiAgdHJ5IHtcbiAgICBkYXRhLmNscy5wdXNoKCdpbmxpbmUtcmVzdWx0JylcbiAgICBkYXRhLnJlc3VsdCA9IHJvbGwudG90YWxcbiAgICBkYXRhLnRpdGxlID0gcm9sbC5mb3JtdWxhXG4gICAgZGF0YS5kYXRhc2V0LnJvbGwgPSBlc2NhcGUoSlNPTi5zdHJpbmdpZnkocm9sbCkpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvLyBDb25zdHJ1Y3QgYW5kIHJldHVybiB0aGUgZm9ybWVkIGxpbmsgZWxlbWVudFxuICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgYS50aXRsZSA9IGRhdGEudGl0bGVcbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhc2V0KSkge1xuICAgIGEuZGF0YXNldFtrXSA9IHZcbiAgfVxuICBhLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhcyBmYS1kaWNlLWQyMFwiPjwvaT4gJHtkYXRhLnJlc3VsdH1gXG4gIHJldHVybiBhXG59XG5cbi8qKlxuICogRnVuY3Rpb24gdXNlZCBmb3IgSlNPTi5zdHJpbmdpZnkgcmVwbGFjZXIuXG4gKiBFeGNsdWRlIGFueSBrZXkgc3RhcnRpbmcgd2l0aCBfXG4gKiBAcGFyYW0geyp9IGtleSAgICAgVGhlIG9iamVjdCdzIHByb3BlcnR5IEtleVxuICogQHBhcmFtIHsqfSB2YWx1ZSAgIFRoZSBhc3NvY2lhdGVkIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleGNsdWRlXyAoa2V5LCB2YWx1ZSkge1xuICAvLyBjb252ZXJ0IFJlZ0V4cCB0byBzdHJpbmdcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfJykpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkIC8vIHJlbW92ZSBmcm9tIHJlc3VsdFxuICB9XG4gIHJldHVybiB2YWx1ZSAvLyByZXR1cm4gYXMgaXNcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB1c2VkIGZvciBKU09OLnN0cmluZ2lmeSByZXBsYWNlci5cbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9fXG4gKiBAcGFyYW0geyp9IGtleSAgICAgVGhlIG9iamVjdCdzIHByb3BlcnR5IEtleVxuICogQHBhcmFtIHsqfSB2YWx1ZSAgIFRoZSBhc3NvY2lhdGVkIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleGNsdWRlX18gKGtleSwgdmFsdWUpIHtcbiAgLy8gY29udmVydCBSZWdFeHAgdG8gc3RyaW5nXG4gIGlmIChrZXkuc3RhcnRzV2l0aCgnX18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG4vKipcbiAqIFJldHVybiB0cnVlIGlzIENUUkwga2V5IGlzIHByZXNzZWRcbiAqIFVzZWQgZm9yIE1BQyBjb21wYXQuXG4gKiBAcGFyYW0ge1MuRXZlbnR9IGV2ZW50XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDdHJsS2V5IChldmVudCkge1xuICBpZiAoZXZlbnQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgcmV0dXJuIChcbiAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgZXZlbnQuY3RybEtleSB8fFxuICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gIClcbn1cblxuZXhwb3J0IGNsYXNzIGNoYXRIZWxwZXIge1xuICBzdGF0aWMgaHlwaGVuVG9DYW1lbENhc2UgKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvLShbYS16XSkvZywgZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZ1sxXS50b1VwcGVyQ2FzZSgpXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVNZXNzYWdlICh0aXRsZSwgbWVzc2FnZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWVzc2FnZURhdGEgPSB7fVxuICAgIG1lc3NhZ2VEYXRhLmZsYXZvciA9IHRpdGxlXG4gICAgbWVzc2FnZURhdGEuc3BlYWtlciA9IG9wdGlvbnMuc3BlYWtlciB8fCBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBpZiAob3B0aW9ucy53aGlzcGVyKSB7XG4gICAgICBtZXNzYWdlRGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgIG1lc3NhZ2VEYXRhLndoaXNwZXIgPSBvcHRpb25zLndoaXNwZXJcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnJvbGwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBtZXNzYWdlRGF0YS5yb2xsID0gb3B0aW9ucy5yb2xsXG4gICAgICBtZXNzYWdlRGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLlJPTExcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGxNb2RlID0gQ09OU1QuRElDRV9ST0xMX01PREVTLlNFTEZcbiAgICB9XG4gICAgbWVzc2FnZURhdGEudXNlciA9IGdhbWUudXNlci5pZFxuICAgIG1lc3NhZ2VEYXRhLmNvbnRlbnQgPSBtZXNzYWdlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUobWVzc2FnZURhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGNhbWVsQ2FzZVRvSHlwaGVuIChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbQS1aXSkvZywgZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgcmV0dXJuICctJyArIHN0cmluZy50b0xvd2VyQ2FzZSgpXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gbnVsbFxuICAgIC8vIENhc2UgMCAtIGEgZG9jdW1lbnQgVXVpZFxuICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkKGtleSkpIHtcbiAgICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkUGFjayhrZXkpKSByZXR1cm4gZnJvbVV1aWQoa2V5KSAvLyBUT0RPIENoZWNrIHdlIGNhbiBkbyB0aGF0XG4gICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQoa2V5KVxuICAgIH1cblxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoa2V5KVxuICAgICAgcmV0dXJuIHRva2VuPy5hY3RvclxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldFNwZWFrZXJGcm9tS2V5IChhY3RvcktleSkge1xuICAgIGNvbnN0IHNwZWFrZXIgPSB7fVxuICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIGlmIChhY3RvcktleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBhY3RvcktleS5zcGxpdCgnLicpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgc3BlYWtlci50b2tlbiA9IHRva2VuSWRcbiAgICAgIHNwZWFrZXIuc2NlbmUgPSBzY2VuZUlkXG4gICAgICBpZiAoYWN0b3IudG9rZW4/Lm5hbWUpIHNwZWFrZXIuYWxpYXMgPSBhY3Rvci50b2tlbi5uYW1lXG4gICAgICBzcGVha2VyLmFjdG9yID0gYWN0b3IuaWRcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlci5hY3RvciA9IGFjdG9yS2V5XG4gICAgICBzcGVha2VyLmFsaWFzID0gYWN0b3IubmFtZVxuICAgIH1cbiAgICByZXR1cm4gc3BlYWtlclxuICB9XG5cbiAgc3RhdGljIGF0dGFjaE9iamVjdFRvRWxlbWVudCAob2JqZWN0LCBlbGVtZW50LCBvYmplY3ROYW1lID0gJycpIHtcbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXMob2JqZWN0KSkge1xuICAgICAgaWYgKCFwcm9wLnN0YXJ0c1dpdGgoJ18nKSkge1xuICAgICAgICBpZiAodHlwZW9mIG9iamVjdFtwcm9wXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBjaGF0SGVscGVyLmF0dGFjaE9iamVjdFRvRWxlbWVudChcbiAgICAgICAgICAgIG9iamVjdFtwcm9wXSxcbiAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICBgJHtvYmplY3ROYW1lfToke3Byb3B9OmBcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxlbWVudC5kYXRhc2V0W2Ake29iamVjdE5hbWV9JHtwcm9wfWBdID0gb2JqZWN0W3Byb3BdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0T2JqZWN0RnJvbUVsZW1lbnQgKG9iamVjdCwgZWxlbWVudCkge1xuICAgIGZ1bmN0aW9uIGRlc2VyaWFsaXplIChvYmosIGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnOicpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBrZXkuc2xpY2UoMSlcbiAgICAgICAgY29uc3Qgb2JqUHJvcCA9IHMuc2xpY2Uocy5pbmRleE9mKCc6JykgKyAxKVxuICAgICAgICBjb25zdCBvYmpOYW1lID0gcy5zdWJzdHJpbmcoMCwgcy5pbmRleE9mKCc6JykpXG4gICAgICAgIGlmICh0eXBlb2Ygb2JqW29iak5hbWVdID09PSAndW5kZWZpbmVkJykgb2JqW29iak5hbWVdID0ge31cbiAgICAgICAgZGVzZXJpYWxpemUob2JqW29iak5hbWVdLCBvYmpQcm9wLCB2YWx1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSBvYmpba2V5XSA9IHRydWVcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09ICdmYWxzZScpIG9ialtrZXldID0gZmFsc2VcbiAgICAgICAgZWxzZSBpZiAoTnVtYmVyKHZhbHVlKS50b1N0cmluZygpID09PSB2YWx1ZSkgb2JqW2tleV0gPSBOdW1iZXIodmFsdWUpXG4gICAgICAgIGVsc2Ugb2JqW2tleV0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZWxlbWVudCB8fCAhb2JqZWN0KSByZXR1cm5cbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXMoZWxlbWVudC5kYXRhc2V0KSkge1xuICAgICAgaWYgKHByb3AgPT09ICd0ZW1wbGF0ZScpIHJldHVyblxuICAgICAgZGVzZXJpYWxpemUob2JqZWN0LCBwcm9wLCBlbGVtZW50LmRhdGFzZXRbcHJvcF0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldFRva2VuRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgY29uc3QgdG9rZW5Eb2MgPSBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0/LnRva2VuXG4gICAgICAgIHJldHVybiB0b2tlbkRvYy5vYmplY3QgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIGlmICghdG9rZW4uc2NlbmUpIHRva2VuLnNjZW5lID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc2NlbmUuZG9jdW1lbnQpXG4gICAgICAgIHJldHVybiB0b2tlblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChrZXkpXG4gICAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvclRva2VuKGFjdG9yKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvclRva2VuIChhY3Rvcikge1xuICAgIGlmICghYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGFjdG9yLnRva2VuIHx8IGFjdG9yLnByb3RvdHlwZVRva2VuXG4gICAgLyoqKioqKioqKioqKioqKioqKiovXG4gICAgLy8gLy8gQ2FzZSAwIC0gQWN0b3IgaXMgYSB0b2tlbiAoc3ludGhldGljIGFjdG9yKSwgcmV0dXJuIHRoYXQgdG9rZW4uXG4gICAgLy8gaWYoYWN0b3IuaXNUb2tlbikgcmV0dXJuIGFjdG9yLnRva2VuO1xuICAgIC8vIGVsc2V7XG4gICAgLy8gIC8vIENhc2UgMSAtIEFjdG9yIGlzIG5vdCBhIHRva2VuLCBmaW5kIGlmIGEgdG9rZW4gZXhpc3QgZm9yIHRoYXQgYWN0b3IuXG4gICAgLy8gIGNvbnN0IGFjdG9yVG9rZW5zID0gYWN0b3IuZ2V0QWN0aXZlVG9rZW5zKCk7XG4gICAgLy8gIGlmKCBhY3RvclRva2Vucy5sZW5ndGgpe1xuICAgIC8vICAgIC8vIENhc2UgMS4xIC0gSWYgaGUgaGFzIG9ubHkgb25lIFRva2VuIHJldHVybiBpdC5cbiAgICAvLyAgICBpZiggMSA9PT0gYWN0b3JUb2tlbnMubGVuZ3RoKSByZXR1cm4gYWN0b3JUb2tlbnNbMF07XG5cbiAgICAvLyAgICAvLyBDYXNlIDEuMiAtIEFjdG9yIGhhcyBtdWx0aXBsZSB0b2tlbnMsIGZpbmQgaWYgb25lIG9mIHRoZW0gaXMgdGhlIGNvbnRyb2xsZWQgdG9rZW4uXG4gICAgLy8gICAgY29uc3QgY29udHJvbGxlZFRva2VucyA9IGFjdG9yVG9rZW5zLmZpbHRlciggdCA9PiB0Ll9jb250cm9sbGVkKTtcbiAgICAvLyAgICBpZiggY29udHJvbGxlZFRva2Vucy5sZW5ndGgpe1xuICAgIC8vICAgICAgLy8gUmV0dXJuIHRoZSAxc3QgY29udHJvbGxlZCB0b2tlbiwgcmlzZSBhIHdhcm5pbmcgaWYgaGUgaGFzIG11bHRpcGxlIGNvbnRyb2xsZWQgdG9rZW5zLlxuICAgIC8vICAgICAgaWYoIHZlcmJvc2UgJiYgY29udHJvbGxlZFRva2Vucy5sZW5ndGggPiAxKSB1aS5ub3RpZmljYXRpb25zLndhcm4oIGBBY3RvciAke2FjdG9yLm5hbWV9IGhhcyAke2NvbnRyb2xsZWRUb2tlbnMubGVuZ3RofSBjb250cm9sbGVkIHRva2Vucy4gVXNpbmcgdGhlIGZpcnN0IGZvdW5kYCk7XG4gICAgLy8gICAgICByZXR1cm4gY29udHJvbGxlZFRva2Vuc1swXTtcbiAgICAvLyAgICB9XG5cbiAgICAvLyAgICAvLyBDYXNlIDEuMyBhY3RvciBkb2Vzbid0IGhhdmUgYW55IGFjdGl2ZSB0b2tlbi4gUmV0dXJuIHRoZSBmaXJzdCB2YWxpZCB0b2tlbiBmb3IgdGhhdCBhY3RvciBhbmQgcmFpc2UgYSB3YXJuaW5nLlxuICAgIC8vICAgIGlmKCB2ZXJib3NlKSB1aS5ub3RpZmljYXRpb25zLndhcm4oIGBBY3RvciAke2FjdG9yLm5hbWV9IGRvZXNuJ3QgaGF2ZSBhbnkgY29udHJvbGxlZCB0b2tlbi4gVXNpbmcgZmlyc3QgdG9rZW4gZm91bmQuYCk7XG4gICAgLy8gICAgcmV0dXJuIGFjdG9yVG9rZW5zWzBdO1xuICAgIC8vICB9XG5cbiAgICAvLyAgaWYoIHZlcmJvc2UpIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoIGBDb3VsZCBub3QgZmluIGFueSB0b2tlbiBmb3IgJHthY3Rvci5uYW1lfS5gKTtcbiAgICAvLyAgcmV0dXJuIG51bGw7XG4gICAgLy8gfVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9ySW1nRnJvbUtleSAoYWN0b3JLZXkpIHtcbiAgICBpZiAoIWFjdG9yS2V5KSByZXR1cm4gbnVsbFxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSB7XG4gICAgICAvLyBUcnkgdG8gZmluZCBhIHRva2VuLlxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShhY3RvcktleSlcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBpZiAoKHRva2VuLmRvY3VtZW50IHx8IHRva2VuKS50ZXh0dXJlLnNyYykge1xuICAgICAgICAgIGlmICgodG9rZW4uZG9jdW1lbnQgfHwgdG9rZW4pLnRleHR1cmUuc3JjLmluZGV4T2YoJyonKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiAodG9rZW4uZG9jdW1lbnQgfHwgdG9rZW4pLnRleHR1cmUuc3JjXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSB7XG4gICAgICAvLyBpZiBubyB0b2tlbiBmb3VuZCBmb3IgdGhhdCBhY3RvciByZXR1cm4gdGhlIHByb3RvdHlwZSB0b2tlbiBpbWFnZS5cbiAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbikge1xuICAgICAgICBpZiAoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMpIHtcbiAgICAgICAgICBpZiAoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmM/LmluZGV4T2YoJyonKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyY1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0b3IuaW1nXG4gIH1cblxuICBzdGF0aWMgZ2V0RGlzdGFuY2UgKHN0YXJ0VG9rZW4sIGVuZFRva2VuKSB7XG4gICAgLy8gc3RhcnRUb2tlbi51cGRhdGVTb3VyY2UoKTtcbiAgICAvLyBjYW52YXMuc2lnaHQuaW5pdGlhbGl6ZVRva2VucygpO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5jZW50ZXIgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4uaWQgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBpZiAoc3RhcnRUb2tlbi5zY2VuZT8uaWQgfHwgZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc3RhcnRUb2tlbi5zY2VuZS5pZClcbiAgICAgICAgaWYgKHR5cGVvZiBzY2VuZT8udG9rZW5zICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IHRva2VucyA9IHNjZW5lPy50b2tlbnNcbiAgICAgICAgICAgIC5maWx0ZXIodG9rZW4gPT4gdG9rZW4uYWN0b3IuaWQgPT09IGVuZFRva2VuLmRhdGEuZG9jdW1lbnQuaWQpXG4gICAgICAgICAgICAubWFwKHRva2VuID0+IHRva2VuLm9iamVjdClcbiAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZW5kVG9rZW4gPSB0b2tlbnNbMF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGRpc3RhbmNlID0ge1xuICAgICAgZ3JpZFVuaXQ6IDAsXG4gICAgICB2YWx1ZTogMCxcbiAgICAgIHVuaXQ6IGNhbnZhcy5zY2VuZS5ncmlkLnVuaXRzXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBzdGFydFRva2VuICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIHN0YXJ0VG9rZW4uY2VudGVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGVuZFRva2VuICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGVuZFRva2VuLmNlbnRlciAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IHJheSA9IG5ldyBSYXkoc3RhcnRUb2tlbi5jZW50ZXIsIGVuZFRva2VuLmNlbnRlcilcbiAgICAgIGNvbnN0IHNlZ21lbnQgPSBbeyByYXkgfV1cbiAgICAgIGRpc3RhbmNlID0ge1xuICAgICAgICBncmlkVW5pdDogcmF5LmRpc3RhbmNlIC8gY2FudmFzLnNjZW5lLmdyaWQuc2l6ZSxcbiAgICAgICAgLy8gdmFsdWU6IChyYXkuZGlzdGFuY2UvY2FudmFzLnNjZW5lLmRhdGEuZ3JpZCkqY2FudmFzLnNjZW5lLmRhdGEuZ3JpZERpc3RhbmNlLFxuICAgICAgICB2YWx1ZTogY2FudmFzLmdyaWQubWVhc3VyZURpc3RhbmNlcyhzZWdtZW50LCB7XG4gICAgICAgICAgZ3JpZFNwYWNlczogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZ3JpZFNwYWNlcycpXG4gICAgICAgIH0pWzBdLFxuICAgICAgICB1bml0OiBjYW52YXMuc2NlbmUuZ3JpZC51bml0c1xuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3RhbmNlRWxldmF0aW9uJykpIHtcbiAgICAgICAgY29uc3QgZWxldmF0aW9uID0gTWF0aC5hYnMoXG4gICAgICAgICAgKHN0YXJ0VG9rZW4uZG9jdW1lbnQuZWxldmF0aW9uIHx8IDApIC0gKGVuZFRva2VuLmRvY3VtZW50LmVsZXZhdGlvbiB8fCAwKVxuICAgICAgICApXG4gICAgICAgIGRpc3RhbmNlLnZhbHVlID0gTWF0aC5zcXJ0KFxuICAgICAgICAgIGRpc3RhbmNlLnZhbHVlICogZGlzdGFuY2UudmFsdWUgKyBlbGV2YXRpb24gKiBlbGV2YXRpb25cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3RhbmNlVGhlYXRyZU9mVGhlTWluZCcpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlRGlzdGFuY2VDYWxjdWxhdGlvbkZhaWx1cmUnKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gZGlzdGFuY2VcbiAgfVxuXG4gIHN0YXRpYyB0b1lhcmRzIChkaXN0YW5jZSkge1xuICAgIHN3aXRjaCAoZGlzdGFuY2UudW5pdCkge1xuICAgICAgY2FzZSAnZnQnOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWUgLyAzXG5cbiAgICAgIGNhc2UgJ3lkJzpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG5cbiAgICAgIGNhc2UgJ20nOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3Um9sbCB7XG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHJvbGxEaXYgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5kaWNlLXJvbGwnKVxuICAgIGlmICghcm9sbERpdikgcmV0dXJuIG51bGxcblxuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgcm9sbERpdilcblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBnZXQgcmVzdWx0VHlwZSAoKSB7XG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBwYXJzZUludCh0aGlzLnN1Y2Nlc3NMZXZlbClcbiAgICBzd2l0Y2ggKHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GdW1ibGUnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmUnKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JLZXkpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICh0aGlzLml0ZW1JZCAmJiB0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgaWYgKHRoaXMuc2tpbGxJZCAmJiB0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5za2lsbElkKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzaG93RGljZVJvbGwgKCkge1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBkaWNlUmVzdWx0cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGRpZVJlc3VsdCBvZiB0aGlzLmRpY2VzLnRlbnMpIHtcbiAgICAgICAgZGljZVJlc3VsdHMucHVzaChkaWVSZXN1bHQudmFsdWUgPT09IDEwMCA/IDAgOiBkaWVSZXN1bHQudmFsdWUgLyAxMClcbiAgICAgIH1cbiAgICAgIGRpY2VSZXN1bHRzLnB1c2godGhpcy5kaWNlcy51bml0LnZhbHVlKVxuXG4gICAgICBjb25zdCBkaWNlRGF0YSA9IHtcbiAgICAgICAgZm9ybXVsYTogYCR7dGhpcy5kaWNlcy50ZW5zLmxlbmd0aH1kMTAwKzFkMTBgLFxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcbiAgICAgICAgd2hpc3BlcjogbnVsbCxcbiAgICAgICAgYmxpbmQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLmRpY2UzZC5zaG93KGRpY2VEYXRhKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgY29uc3Qgcm9sbCA9IG9iamVjdCB8fCBuZXcgQ29DN1JvbGwoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgZWxlbWVudClcbiAgICByb2xsLmRpY2VzID0ge1xuICAgICAgdGVuczogW10sXG4gICAgICB1bml0OiB7fVxuICAgIH1cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KFxuICAgICAgcm9sbC5kaWNlcyxcbiAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2UtcmVzdWx0JylcbiAgICApXG4gICAgcm9sbC5kaWNlcy5oYXNCb251cyA9IHJvbGwuZGljZU1vZGlmaWVyICE9PSAwXG4gICAgcm9sbC5kaWNlcy5ib251cyA9IE1hdGguYWJzKHJvbGwuZGljZU1vZGlmaWVyKVxuICAgIHJvbGwuZGljZXMuYm9udXNUeXBlID1cbiAgICAgIHJvbGwuZGljZU1vZGlmaWVyIDwgMFxuICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyUGVuYWx0eScpXG4gICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJCb251cycpXG4gICAgY29uc3QgdGVuRGljZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRlbi1kaWNlJylcbiAgICBpZiAodGVuRGljZSkge1xuICAgICAgZm9yIChjb25zdCBkIG9mIHRlbkRpY2UucXVlcnlTZWxlY3RvckFsbCgnbGknKSkge1xuICAgICAgICBjb25zdCBkaWUgPSB7XG4gICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzTWF4OiBmYWxzZSxcbiAgICAgICAgICBpc01pbjogZmFsc2UsXG4gICAgICAgICAgdmFsdWU6IC0xXG4gICAgICAgIH1cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChkaWUsIGQpXG4gICAgICAgIHJvbGwuZGljZXMudGVucy5wdXNoKGRpZSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdW5pdERpZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXQtZGllJylcbiAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdC1kaWUnKS5xdWVyeVNlbGVjdG9yKCdsaScpXG4gICAgICA6IG51bGxcbiAgICByb2xsLmRpY2VzLnVuaXQudmFsdWUgPSB1bml0RGllID8gcGFyc2VJbnQodW5pdERpZS5kYXRhc2V0LnZhbHVlKSA6IG51bGxcblxuICAgIHJvbGwuaW5jcmVhc2VTdWNjZXNzID0gW11cbiAgICBjb25zdCBpbmNyZWFzZVN1Y2Nlc3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmNyZWFzZS1zdWNjZXNzJylcbiAgICBpZiAoaW5jcmVhc2VTdWNjZXNzICYmIGluY3JlYXNlU3VjY2Vzcy5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSkge1xuICAgICAgZm9yIChjb25zdCBpc2wgb2YgaW5jcmVhc2VTdWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpKSB7XG4gICAgICAgIGNvbnN0IG5ld1N1Y2Nlc0xldmVsID0ge31cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChuZXdTdWNjZXNMZXZlbCwgaXNsKVxuICAgICAgICByb2xsLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5ld1N1Y2Nlc0xldmVsKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyb2xsLmx1Y2tOZWVkZWQpIHtcbiAgICAgIHJvbGwubHVja05lZWRlZFR4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbmRMdWNrJywge1xuICAgICAgICBsdWNrTmVlZGVkVmFsdWU6IHJvbGwubHVja05lZWRlZFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKCFvYmplY3QpIHJldHVybiByb2xsXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNoZWNrIChjaGVjaykge1xuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxuXG4gICAgcm9sbC5yb2xsVHlwZSA9IGNoZWNrLnJvbGxUeXBlXG4gICAgcm9sbC5zaWRlID0gY2hlY2suc2lkZVxuICAgIHJvbGwuYWN0aW9uID0gY2hlY2suYWN0aW9uXG4gICAgcm9sbC5yZWZNZXNzYWdlSWQgPSBjaGVjay5yZWZNZXNzYWdlSWRcbiAgICByb2xsLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZFxuXG4gICAgcm9sbC5zdWNjZXNzTGV2ZWwgPSBjaGVjay5zdWNjZXNzTGV2ZWxcbiAgICByb2xsLmRpZmZpY3VsdHkgPSBjaGVjay5kaWZmaWN1bHR5XG4gICAgcm9sbC5za2lsbElkID0gY2hlY2suc2tpbGwgPyBjaGVjay5za2lsbC5pZCA6IG51bGxcbiAgICByb2xsLml0ZW1JZCA9IGNoZWNrLml0ZW0gPyBjaGVjay5pdGVtLmlkIDogbnVsbFxuICAgIHJvbGwuZGljZU1vZCA9IGNoZWNrLmRpY2VNb2RpZmllclxuICAgIHJvbGwudmFsdWUgPSBwYXJzZUludChjaGVjay5yYXdWYWx1ZSlcbiAgICByb2xsLmZ1bWJsZSA9IGNoZWNrLmlzRnVtYmxlXG4gICAgcm9sbC5jcml0aWNhbCA9IGNoZWNrLmlzQ3JpdGljYWxcbiAgICByb2xsLmNoYXJhY3RlcmlzdGljID0gY2hlY2suY2hhcmFjdGVyaXN0aWMgPyBjaGVjay5jaGFyYWN0ZXJpc3RpYyA6IG51bGxcbiAgICByb2xsLnJlc3VsdCA9IGNoZWNrLmRpY2UudG90YWxcblxuICAgIHJvbGwuYWN0b3JLZXkgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcblxuICAgIGlmIChjaGVjay5hY3Rvci5pc1Rva2VuKSB7XG4gICAgICByb2xsLnRva2VuSWQgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHJvbGwuYWN0b3JJZCA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgcm9sbC50b2tlbktleSA9IG51bGxcbiAgICAgIHJvbGwuYWN0b3JJZCA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoQ2hlY2tUb0VsZW1lbnQgKGh0bWxFbGVtZW50LCBjaGVjaykge1xuICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2soY2hlY2spXG4gICAgcm9sbC5hdHRhY2hUb0VsZW1lbnQoaHRtbEVsZW1lbnQpXG5cbiAgICByZXR1cm4gcm9sbFxuICB9XG5cbiAgYXR0YWNoVG9FbGVtZW50IChodG1sRWxlbWVudCkge1xuICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KHRoaXMsIGh0bWxFbGVtZW50KVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3RGFtYWdlIHtcbiAgc3RhdGljIGdldE1haW5EaWUgKGRhbWFnZVN0cmluZykge1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDIwJykpIHJldHVybiAnZDIwJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEyJykpIHJldHVybiAnZDEyJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEwJykpIHJldHVybiAnZDEwJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDgnKSkgcmV0dXJuICdkOCdcbiAgICBpZiAoZGFtYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Q0JykpIHJldHVybiAnZDQnXG4gICAgcmV0dXJuICdkNidcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgY29uc3QgZGFtYWdlID0gb2JqZWN0IHx8IHt9XG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChkYW1hZ2UsIGVsZW1lbnQpXG4gICAgY29uc3Qgcm9sbHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGxzJykucXVlcnlTZWxlY3RvckFsbCgnbGknKVxuICAgIGRhbWFnZS5yb2xscyA9IFtdXG4gICAgZm9yIChjb25zdCByIG9mIHJvbGxzKSB7XG4gICAgICBjb25zdCByb2xsID0ge31cbiAgICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgcilcbiAgICAgIGNvbnN0IGdyb3VwID0gcm9sbC5ncm91cFxuICAgICAgY29uc3QgZGljZSA9IHtcbiAgICAgICAgZmFjZXM6IHJvbGwuZmFjZXMsXG4gICAgICAgIHJlc3VsdDogcm9sbC5yZXN1bHRcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSByb2xsLmdyb3VwXG4gICAgICBkZWxldGUgcm9sbC5mYWNlc1xuICAgICAgZGVsZXRlIHJvbGwucmVzdWx0XG4gICAgICBpZiAodHlwZW9mIGRhbWFnZS5yb2xsc1tncm91cF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJvbGwuZGljZSA9IFtdXG4gICAgICAgIGRhbWFnZS5yb2xscy5wdXNoKHJvbGwpXG4gICAgICB9XG4gICAgICBkYW1hZ2Uucm9sbHNbZ3JvdXBdLmRpY2UucHVzaChkaWNlKVxuICAgIH1cbiAgICBpZiAoIW9iamVjdCkgcmV0dXJuIGRhbWFnZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgTWF0aFRlcm0sIE51bWVyaWNUZXJtLCBQYXJlbnRoZXRpY2FsVGVybSwgUm9sbCwgUm9sbFRlcm0gKi9cbmNsYXNzIEF2ZXJhZ2VQYXJlbnRoZXRpY2FsVGVybSBleHRlbmRzIFBhcmVudGhldGljYWxUZXJtIHtcbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIF9ldmFsdWF0ZVN5bmMgKHsgbWluaW1pemUgPSBmYWxzZSwgbWF4aW1pemUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAvLyBFdmFsdWF0ZSB0aGUgaW5uZXIgUm9sbFxuICAgIGNvbnN0IHJvbGwgPSB0aGlzLnJvbGwgfHwgbmV3IEF2ZXJhZ2VSb2xsKHRoaXMudGVybSlcbiAgICB0aGlzLnJvbGwgPSByb2xsLmV2YWx1YXRlKHsgbWluaW1pemUsIG1heGltaXplLCBhc3luYzogZmFsc2UgfSlcblxuICAgIC8vIFByb3BhZ2F0ZSBmbGF2b3IgdGV4dCB0byBpbm5lciB0ZXJtc1xuICAgIGlmICh0aGlzLmZsYXZvcikgdGhpcy5yb2xsLnRlcm1zLmZvckVhY2godCA9PiB7IHQub3B0aW9ucy5mbGF2b3IgPSB0Lm9wdGlvbnMuZmxhdm9yID8/IHRoaXMuZmxhdm9yIH0pXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQXZlcmFnZVJvbGwgZXh0ZW5kcyBSb2xsIHtcbiAgLyoqXG4gICAqIEV2YWx1YXRlIHRoZSByb2xsIHN5bmNocm9ub3VzbHkuXG4gICAqIEEgdGVtcG9yYXJ5IGhlbHBlciBtZXRob2QgdXNlZCB0byBtaWdyYXRlIGJlaGF2aW9yIGZyb20gMC43LnggKHN5bmMgYnkgZGVmYXVsdCkgdG8gMC45LnggKGFzeW5jIGJ5IGRlZmF1bHQpLlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdICAgICAgT3B0aW9ucyB3aGljaCBpbmZvcm0gaG93IGV2YWx1YXRpb24gaXMgcGVyZm9ybWVkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubWluaW1pemVdICAgIEZvcmNlIHRoZSByZXN1bHQgdG8gYmUgbWluaW1pemVkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubWF4aW1pemVdICAgIEZvcmNlIHRoZSByZXN1bHQgdG8gYmUgbWF4aW1pemVkXG4gICAqIEByZXR1cm5zIHtSb2xsfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2V2YWx1YXRlU3luYyAoeyBtaW5pbWl6ZSA9IGZhbHNlLCBtYXhpbWl6ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIC8vIFN0ZXAgMSAtIFJlcGxhY2UgaW50ZXJtZWRpYXRlIHRlcm1zIHdpdGggZXZhbHVhdGVkIG51bWJlcnNcbiAgICB0aGlzLnRlcm1zID0gdGhpcy50ZXJtcy5tYXAodGVybSA9PiB7XG4gICAgICBpZiAoISh0ZXJtIGluc3RhbmNlb2YgUm9sbFRlcm0pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUm9sbCBldmFsdWF0aW9uIGVuY291bnRlcmVkIGFuIGludmFsaWQgdGVybSB3aGljaCB3YXMgbm90IGEgUm9sbFRlcm0gaW5zdGFuY2UnKVxuICAgICAgfVxuICAgICAgaWYgKHRlcm0uaXNJbnRlcm1lZGlhdGUpIHtcbiAgICAgICAgdGVybS5ldmFsdWF0ZSh7IG1pbmltaXplLCBtYXhpbWl6ZSwgYXN5bmM6IGZhbHNlIH0pXG4gICAgICAgIHRoaXMuX2RpY2UgPSB0aGlzLl9kaWNlLmNvbmNhdCh0ZXJtLmRpY2UpXG5cbiAgICAgICAgLy8gVGhpcyBzZWN0aW9uIGlzIHJlcGxhY2VkIHRvIGNhbGN1bGF0ZSB0aGUgYXZlcmFnZVxuICAgICAgICBsZXQgdG90YWwgPSB0ZXJtLnRvdGFsXG4gICAgICAgIGlmIChtaW5pbWl6ZSAmJiBtYXhpbWl6ZSAmJiB0ZXJtLmRpY2UubGVuZ3RoKSB7XG4gICAgICAgICAgdG90YWwgPSBNYXRoLmZsb29yKCh0ZXJtLmRpY2VbMF0uZmFjZXMgKyAxKSAvIDIgKiB0ZXJtLnRvdGFsKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBOdW1lcmljVGVybSh7IG51bWJlcjogdG90YWwsIG9wdGlvbnM6IHRlcm0ub3B0aW9ucyB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRlcm1cbiAgICB9KVxuXG4gICAgLy8gU3RlcCAyIC0gU2ltcGxpZnkgcmVtYWluaW5nIHRlcm1zXG4gICAgdGhpcy50ZXJtcyA9IHRoaXMuY29uc3RydWN0b3Iuc2ltcGxpZnlUZXJtcyh0aGlzLnRlcm1zKVxuXG4gICAgLy8gU3RlcCAzIC0gRXZhbHVhdGUgcmVtYWluaW5nIHRlcm1zXG4gICAgdGhpcy50ZXJtcyA9IHRoaXMudGVybXMubWFwKHRlcm0gPT4ge1xuICAgICAgaWYgKCF0ZXJtLl9ldmFsdWF0ZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0ZXJtLmZhY2VzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiBuZXcgTnVtZXJpY1Rlcm0oeyBudW1iZXI6IE1hdGguZmxvb3IoKHRlcm0uZmFjZXMgKyAxKSAvIDIgKiB0ZXJtLm51bWJlciksIG9wdGlvbnM6IHRlcm0ub3B0aW9ucyB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlcm0uZXZhbHVhdGUoeyBtaW5pbWl6ZSwgbWF4aW1pemUsIGFzeW5jOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGVybVxuICAgIH0pXG5cbiAgICAvLyBTdGVwIDQgLSBFdmFsdWF0ZSB0aGUgZmluYWwgZXhwcmVzc2lvblxuICAgIHRoaXMuX3RvdGFsID0gdGhpcy5fZXZhbHVhdGVUb3RhbCgpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdCBhIGZvcm11bGEgYnkgaWRlbnRpZnlpbmcgaXRzIG91dGVyLW1vc3QgcGFyZW50aGV0aWNhbCBhbmQgbWF0aCB0ZXJtc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gX2Zvcm11bGEgICAgICBUaGUgcmF3IGZvcm11bGEgdG8gc3BsaXRcbiAgICogQHJldHVybnMge3N0cmluZ1tdfSAgICAgICAgICBBbiBhcnJheSBvZiB0ZXJtcywgc3BsaXQgb24gcGFyZW50aGV0aWNhbCB0ZXJtc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9zcGxpdFBhcmVudGhlc2VzIChfZm9ybXVsYSkge1xuICAgIHJldHVybiB0aGlzLl9zcGxpdEdyb3VwKF9mb3JtdWxhLCB7XG4gICAgICBvcGVuUmVnZXhwOiBBdmVyYWdlUGFyZW50aGV0aWNhbFRlcm0uT1BFTl9SRUdFWFAsXG4gICAgICBjbG9zZVJlZ2V4cDogQXZlcmFnZVBhcmVudGhldGljYWxUZXJtLkNMT1NFX1JFR0VYUCxcbiAgICAgIG9wZW5TeW1ib2w6ICcoJyxcbiAgICAgIGNsb3NlU3ltYm9sOiAnKScsXG4gICAgICBvbkNsb3NlOiBncm91cCA9PiB7XG4gICAgICAgIC8vIEV4dHJhY3QgZ3JvdXAgYXJndW1lbnRzXG4gICAgICAgIGNvbnN0IGZuID0gZ3JvdXAub3Blbi5zbGljZSgwLCAtMSlcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGdyb3VwLnRlcm1zLmpvaW4oJycpXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IGZsYXZvcjogZ3JvdXAuZmxhdm9yID8gZ3JvdXAuZmxhdm9yLnNsaWNlKDEsIC0xKSA6IHVuZGVmaW5lZCB9XG5cbiAgICAgICAgLy8gQ2xhc3NpZnkgdGhlIHJlc3VsdGluZyB0ZXJtc1xuICAgICAgICBjb25zdCB0ZXJtcyA9IFtdXG4gICAgICAgIGlmIChmbiBpbiBNYXRoKSB7XG4gICAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuX3NwbGl0TWF0aEFyZ3MoZXhwcmVzc2lvbilcbiAgICAgICAgICB0ZXJtcy5wdXNoKG5ldyBNYXRoVGVybSh7IGZuLCB0ZXJtczogYXJncywgb3B0aW9ucyB9KSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZm4pIHRlcm1zLnB1c2goZm4pXG4gICAgICAgICAgdGVybXMucHVzaChuZXcgQXZlcmFnZVBhcmVudGhldGljYWxUZXJtKHsgdGVybTogZXhwcmVzc2lvbiwgb3B0aW9ucyB9KSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGVybXNcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDT05TVCwgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgVG9rZW5Eb2N1bWVudCwgdWkgKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBBY3RvclBpY2tlckRpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2FjdG9yLXBpY2tlciddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QaWNrV2hpY2hBY3RvclRpdGxlJyksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9tZXNzYWdlcy9hY3Rvci1waWNrZXIuaGJzJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgd2lkdGg6IDQxNSxcbiAgICAgIGhlaWdodDogMzc1XG4gICAgfSlcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLm9uKCdjbGljaycsICcuZGlyZWN0b3J5LWl0ZW0nLCB0aGlzLl9vblBpY2suYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5jYW4tcGluZycpLmhvdmVyKHRoaXMuX29uSG92ZXJJbi5iaW5kKHRoaXMpLCB0aGlzLl9vbkhvdmVyT3V0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnN1Ym1pdC1idXR0b24nLCB0aGlzLl9vblN1Ym1pdEJ1dHRvbi5iaW5kKHRoaXMpKVxuICB9XG5cbiAgX29uUGljayAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBmb3IgKGNvbnN0IGwgb2YgbGkucGFyZW50RWxlbWVudC5jaGlsZHJlbikge1xuICAgICAgbC5jbGFzc0xpc3QudG9nZ2xlKCdwaWNrZWQnLCBsID09PSBsaSlcbiAgICB9XG4gICAgdGhpcy5vYmplY3Quc2VsZWN0ZWQgPSBsaS5kYXRhc2V0LmVudHJ5VXVpZFxuICB9XG5cbiAgYXN5bmMgX29uSG92ZXJJbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKCFjYW52YXMucmVhZHkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0b2tlbiA9IChhd2FpdCBmcm9tVXVpZChsaS5kYXRhc2V0LmVudHJ5VXVpZCkpPy5vYmplY3RcbiAgICBpZiAodG9rZW4/LmlzVmlzaWJsZSkge1xuICAgICAgaWYgKCF0b2tlbi5jb250cm9sbGVkKSB7XG4gICAgICAgIHRva2VuLl9vbkhvdmVySW4oZXZlbnQsIHsgaG92ZXJPdXRPdGhlcnM6IHRydWUgfSlcbiAgICAgICAgdGhpcy5faGlnaGxpZ2h0ZWQgPSB0b2tlblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vbkhvdmVyT3V0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAodGhpcy5faGlnaGxpZ2h0ZWQpIHtcbiAgICAgIHRoaXMuX2hpZ2hsaWdodGVkLl9vbkhvdmVyT3V0KGV2ZW50KVxuICAgIH1cbiAgICB0aGlzLl9oaWdobGlnaHRlZCA9IG51bGxcbiAgfVxuXG4gIGFzeW5jIF9vblN1Ym1pdEJ1dHRvbiAoZXZlbnQpIHtcbiAgICB0aGlzLm9iamVjdC5yZXNvbHZlKGF3YWl0IGZyb21VdWlkKHRoaXMub2JqZWN0LnNlbGVjdGVkKSlcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKCkge1xuICAgIGNvbnN0IGFsbG93ZWRUeXBlcyA9IFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddXG4gICAgbGV0IGZvdW5kID0gW11cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00gJiYgY2FudmFzLnJlYWR5ICYmIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGggPiAwKSB7XG4gICAgICBmb3VuZCA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodCA9PiB0LmRvY3VtZW50KVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2FudmFzLnJlYWR5KSB7XG4gICAgICAgIGZvdW5kID0gY2FudmFzLnRva2Vucy5wbGFjZWFibGVzLmZpbHRlcih0ID0+IGFsbG93ZWRUeXBlcy5pbmNsdWRlcyh0LmRvY3VtZW50LmFjdG9yLnR5cGUpICYmICh0LmFjdG9yLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IHQuYWN0b3Iub3duZXJzaGlwLmRlZmF1bHQpID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKS5tYXAodCA9PiB0LmRvY3VtZW50KVxuICAgICAgfVxuICAgICAgY29uc3QgZm91bmRJRHMgPSBmb3VuZC5tYXAodCA9PiB0LmFjdG9ySWQpXG4gICAgICBmb3VuZCA9IGZvdW5kLmNvbmNhdChnYW1lLmFjdG9ycy5maWx0ZXIoYSA9PiBhbGxvd2VkVHlwZXMuaW5jbHVkZXMoYS50eXBlKSAmJiAhZm91bmRJRHMuaW5jbHVkZXMoYS5pZCkgJiYgKGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gYS5vd25lcnNoaXAuZGVmYXVsdCkgPT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVIpKVxuICAgIH1cbiAgICBpZiAoZm91bmQubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gZm91bmRbMF1cbiAgICB9XG4gICAgaWYgKGZvdW5kLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXVxuICAgICAgZm9yIChjb25zdCBvcHRpb24gb2YgZm91bmQpIHtcbiAgICAgICAgY29uc3QgaXNUb2tlbkRvY3VtZW50ID0gKG9wdGlvbiBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQpXG4gICAgICAgIG9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgdXVpZDogb3B0aW9uLnV1aWQsXG4gICAgICAgICAgbmFtZTogb3B0aW9uLm5hbWUsXG4gICAgICAgICAgaW1nOiAoaXNUb2tlbkRvY3VtZW50ID8gb3B0aW9uLmFjdG9yLnBvcnRyYWl0IDogb3B0aW9uLnBvcnRyYWl0KSxcbiAgICAgICAgICBjYW5QaW5nOiBpc1Rva2VuRG9jdW1lbnRcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICAgIGxldCBzZWxlY3RlZCA9IG9wdGlvbnNbMV0udXVpZFxuICAgICAgaWYgKGdhbWUudXNlci5jaGFyYWN0ZXIpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbiA9IGZvdW5kLmZpbmQob3B0aW9uID0+IChvcHRpb24uYWN0b3JJZCA/PyBvcHRpb24uaWQpID09PSBnYW1lLnVzZXIuY2hhcmFjdGVyLmlkKVxuICAgICAgICBpZiAoZGVmYXVsdE9wdGlvbikge1xuICAgICAgICAgIHNlbGVjdGVkID0gZGVmYXVsdE9wdGlvbi51dWlkXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBuZXcgQWN0b3JQaWNrZXJEaWFsb2coeyBvcHRpb25zLCBzZWxlY3RlZCwgcmVzb2x2ZSB9KS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQ29udHJvbGxlZEFjdG9yJykpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIFRva2VuRG9jdW1lbnQsIHVpICovXG5pbXBvcnQgeyBBY3RvclBpY2tlckRpYWxvZyB9IGZyb20gJy4vYWN0b3ItcGlja2VyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdHcm91cE1lc3NhZ2Uge1xuICAvLyBTdGVwIDZjOiBHTSAvIC0gPSBSZW1vdmUgYSByb2xsXG4gIHN0YXRpYyBhc3luYyByZW1vdmVSb2xsICh7IG1lc3NhZ2VJZCwgbXNnLCB3aGljaCB9KSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBtc2cgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgbXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8ucm9sbFN0YXR1c2VzW3doaWNoXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7XG4gICAgICAgIFsnZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4tPScgKyB3aGljaF06IG51bGxcbiAgICAgIH1cbiAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCA2YjogR00gLyBOb24gR00gPSBQdXNoIFJvbGxcbiAgc3RhdGljIGFzeW5jIHB1c2hNeVJvbGwgKHsgbWVzc2FnZUlkLCBtc2csIHdoaWNoIH0pIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1zZyA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgbGV0IGdtSWQgPSBmYWxzZVxuICAgIGlmICghbXNnLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykpIHtcbiAgICAgIGdtSWQgPSBDb0M3VXRpbGl0aWVzLmdldEFuSWRGb3JHbSgpXG4gICAgfVxuICAgIHN3aXRjaCAobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS50eXBlKSB7XG4gICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS53YXNQdXNoZWQnXSA9IHRydWVcbiAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtQ29tYmluZWRSb2xsKHsgbXNnLCBnbUlkLCB1cGRhdGVzLCBwdXNoaW5nOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdvcHBvc2VkJzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHJvbGxzID0geyBbd2hpY2hdOiBtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLnJvbGxTdGF0dXNlc1t3aGljaF0ucm9sbCB9XG4gICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtTm9ybWFsUm9sbCh7IG1zZywgcm9sbHMsIGdtSWQsIHVwZGF0ZXMsIHB1c2hpbmc6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIC8vIFN0ZXAgNmE6IEdNIC8gTm9uIEdNID0gU3BlbmQgbHVja1xuICBzdGF0aWMgYXN5bmMgc3BlbmRNeUx1Y2sgKHsgbWVzc2FnZUlkLCBtc2csIHdoaWNoLCBpbmRleCwgbHVja0Ftb3VudCB9KSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBtc2cgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgbXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8ucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10udHlwZSkge1xuICAgICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgICAgaWYgKCFsdWNrQW1vdW50KSB7XG4gICAgICAgICAgICBjb25zdCBjaGVjayA9IENvQzdDaGVjay5mcm9tRGF0YShtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZClcbiAgICAgICAgICAgIGx1Y2tBbW91bnQgPSBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NbaW5kZXhdLmx1Y2tUb1NwZW5kID8/IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGx1Y2tBbW91bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5nZXRBY3Rvcihtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLmFjdG9yVXVpZClcbiAgICAgICAgICAgIGlmICghKGFjdG9yIGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCA/IGFjdG9yLmFjdG9yIDogYWN0b3IpLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RFbm91Z2hMdWNrJywge1xuICAgICAgICAgICAgICAgICAgYWN0b3I6IGFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHdoaWNoIGluIG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoZWNrID0gQ29DN0NoZWNrLmZyb21EYXRhKG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQpXG4gICAgICAgICAgICAgIGNoZWNrLmluY3JlYXNlTHVja1NwZW5kKGx1Y2tBbW91bnQpXG4gICAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5jb21wbGV0ZWQnXSA9IGNoZWNrLkpTT05Sb2xsRGF0YVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZXMpLmxlbmd0aCkge1xuICAgICAgICAgICAgICBpZiAobXNnLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZUdyb3VwTWVzc2FnZSh7IG1zZywgdXBkYXRlcyB9KVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdtSWQgPSBDb0M3VXRpbGl0aWVzLmdldEFuSWRGb3JHbSgpXG4gICAgICAgICAgICAgICAgaWYgKGdtSWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXI6IGdtSWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdncm91cC1tZXNzYWdlLXVwZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJZDogbXNnLmlkLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVzXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdvcHBvc2VkJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBjaGVjayA9IENvQzdDaGVjay5mcm9tRGF0YShtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZClcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5kZXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGNoZWNrLnVwZ3JhZGVDaGVjayhpbmRleCwgZmFsc2UpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsdWNrQW1vdW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBjaGVjay5mb3JjZVBhc3MobHVja0Ftb3VudCwgZmFsc2UpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0ge1xuICAgICAgICAgICAgICBbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5jb21wbGV0ZWQnXTogY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGlmIChtc2cuY2FuVXNlck1vZGlmeShnYW1lLnVzZXIsICd1cGRhdGUnKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ21JZCA9IENvQzdVdGlsaXRpZXMuZ2V0QW5JZEZvckdtKClcbiAgICAgICAgICAgICAgICBpZiAoZ21JZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcjogZ21JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2UtdXBkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZXNcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0NvQzcuRXJyb3JSb2xsQWxyZWFkeUNvbXBsZXRlZCcsIHsgbG9jYWxpemU6IHRydWUgfSlcbiAgICB9XG4gIH1cblxuICAvLyBTdGVwIDU6IEdNIC8gLSA9IFVwZGF0ZSB0aGUgbWVzc2FnZVxuICBzdGF0aWMgYXN5bmMgdXBkYXRlVGhlR3JvdXBNZXNzYWdlICh7IG1zZywgdXBkYXRlcywgcm9sbERhdGEgfSA9IHt9KSB7XG4gICAgaWYgKG1zZz8uZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddKSB7XG4gICAgICBpZiAodHlwZW9mIHJvbGxEYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByb2xsRGF0YSA9IHt9XG4gICAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gbXNnPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzKSB7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IENvQzdHcm91cE1lc3NhZ2UucGFyc2VSb2xscyh7IHJvbGw6IG1zZz8uZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddLnJvbGxTdGF0dXNlc1t3aGljaF0ucm9sbCwgcXVpY2s6IHRydWUgfSlcbiAgICAgICAgICByb2xsRGF0YVt3aGljaF0gPSByb2xsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgcm9sbERhdGEgfSwgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLCBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdCh1cGRhdGVzKT8uZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddID8/IHt9LCB7IHBlcmZvcm1EZWxldGlvbnM6IHRydWUgfSkpXG4gICAgICBmb3IgKGNvbnN0IHdoaWNoIGluIG9wdGlvbnMucm9sbFN0YXR1c2VzKSB7XG4gICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkKSB7XG4gICAgICAgICAgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZCA9IENvQzdDaGVjay5mcm9tRGF0YShvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvcHRpb25zLmFsbFJvbGxzQ29tcGxldGVkID0gdHJ1ZVxuICAgICAgZm9yIChjb25zdCB3aGljaCBpbiBvcHRpb25zLnJvbGxTdGF0dXNlcykge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgb3B0aW9ucy5hbGxSb2xsc0NvbXBsZXRlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5hbGxSb2xsc0NvbXBsZXRlZCddID0gb3B0aW9ucy5hbGxSb2xsc0NvbXBsZXRlZFxuICAgICAgc3dpdGNoIChvcHRpb25zLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnY29tYmluZWQnOlxuICAgICAgICAgIG9wdGlvbnMuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgICAgICBvcHRpb25zLmlzRmFpbHVyZSA9IGZhbHNlXG4gICAgICAgICAgaWYgKG9wdGlvbnMuYWxsUm9sbHNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIGxldCBzdWNjZXNzZXMgPSAwXG4gICAgICAgICAgICBsZXQgZmFpbHVyZXMgPSAwXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHdoaWNoIGluIG9wdGlvbnMucm9sbFN0YXR1c2VzKSB7XG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkLmlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3NlcysrXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZC5pc0ZhaWx1cmUpIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlcysrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWNjZXNzZXMgPiAwICYmIChvcHRpb25zLmNvbWJpbmVkID09PSAnYW55JyB8fCAoZmFpbHVyZXMgPT09IDAgJiYgb3B0aW9ucy5jb21iaW5lZCA9PT0gJ2FsbCcpKSkge1xuICAgICAgICAgICAgICBvcHRpb25zLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMuaXNGYWlsdXJlID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuaXNTdWNjZXNzJ10gPSBvcHRpb25zLmlzU3VjY2Vzc1xuICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5pc0ZhaWx1cmUnXSA9IG9wdGlvbnMuaXNGYWlsdXJlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgICAgaWYgKG9wdGlvbnMuYWxsUm9sbHNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaXNUaWUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXNDb21iYXQpIHtcbiAgICAgICAgICAgICAgLy8gU29ydCBjb21iYXQgcm9sbHMgYnkgaW5kZXguIGF0dGFja2VycyBmaXJzdFxuICAgICAgICAgICAgICBvcHRpb25zLnJvbGxPcmRlciA9IEFycmF5LmZyb20oKG5ldyBJbnQ4QXJyYXkob3B0aW9ucy5yb2xsT3JkZXIubWFwKHYgPT4gcGFyc2VJbnQodi5zdWJzdHIoMSksIDEwKSkpKS5zb3J0KCkpLm1hcCh2ID0+ICdyJyArIHYpXG4gICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NMZXZlbHMgPSB7fVxuICAgICAgICAgICAgICBvcHRpb25zLmRlZmVuZGVySXNEb2RnaW5nID0gZmFsc2VcbiAgICAgICAgICAgICAgZm9yIChjb25zdCB3aGljaCBpbiBvcHRpb25zLnJvbGxTdGF0dXNlcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkLnBhc3NlZCkge1xuICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsc1tvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkLnN1Y2Nlc3NMZXZlbF0gPSBwYXJzZUludChzdWNjZXNzTGV2ZWxzW29wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsXSA/PyAwLCAxMCkgKyAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNEb2RnaW5nICYmICFvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNBdHRhY2tlcikge1xuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kZWZlbmRlcklzRG9kZ2luZyA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLmRlZmVuZGVySXNEb2RnaW5nJ10gPSBvcHRpb25zLmRlZmVuZGVySXNEb2RnaW5nXG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLmFkdmFudGFnZUF0dGFja2VyID09PSBmYWxzZSAmJiBvcHRpb25zLmFkdmFudGFnZURlZmVuZGVyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmVuZGVySXNEb2RnaW5nKSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25zLmFkdmFudGFnZURlZmVuZGVyID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLmFkdmFudGFnZURlZmVuZGVyJ10gPSBvcHRpb25zLmFkdmFudGFnZURlZmVuZGVyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuYWR2YW50YWdlQXR0YWNrZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuYWR2YW50YWdlQXR0YWNrZXInXSA9IG9wdGlvbnMuYWR2YW50YWdlQXR0YWNrZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3QgYmVzdCA9IE1hdGgubWF4KC4uLk9iamVjdC5rZXlzKHN1Y2Nlc3NMZXZlbHMpKVxuICAgICAgICAgICAgICBvcHRpb25zLm5lZWRzVGllQnJlYWtlciA9IGZhbHNlXG4gICAgICAgICAgICAgIG9wdGlvbnMucmVzdWx0VGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICAgICAgICAgIGlmIChiZXN0ID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gb3B0aW9ucy5yb2xsU3RhdHVzZXMpIHtcbiAgICAgICAgICAgICAgICAgIGxldCByb2xsSXNXaW5uZXIgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgbGV0IHJvbGxJc1RpZSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwgPT09IGJlc3QgJiYgc3VjY2Vzc0xldmVsc1tiZXN0XSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByb2xsSXNXaW5uZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsID09PSBiZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFkdmFudGFnZUF0dGFja2VyICYmIG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc0F0dGFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcm9sbElzV2lubmVyID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuYWR2YW50YWdlRGVmZW5kZXIgJiYgIW9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc0F0dGFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcm9sbElzV2lubmVyID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIHJvbGxJc1dpbm5lciA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICByb2xsSXNUaWUgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5uZWVkc1RpZUJyZWFrZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5pc1RpZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmlzV2lubmVyID0gcm9sbElzV2lubmVyXG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNUaWUgPSByb2xsSXNUaWVcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5pc1dpbm5lciddID0gcm9sbElzV2lubmVyXG4gICAgICAgICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuaXNUaWUnXSA9IHJvbGxJc1RpZVxuICAgICAgICAgICAgICAgICAgaWYgKHJvbGxJc1dpbm5lciAmJiAhcm9sbElzVGllKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNBdHRhY2tlcikge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNNYW5ldXZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXN1bHRUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvbGxEYXRhW3doaWNoXS5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlc3VsdFRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvbGxEYXRhW3doaWNoXS5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNNYW5ldXZlcikge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNEb2RnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlc3VsdFRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRvZGdlU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcm9sbERhdGFbd2hpY2hdLmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVzdWx0VGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFuZXV2ZXJTdWNjZXNzJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByb2xsRGF0YVt3aGljaF0uYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXN1bHRUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BdHRhY2tTdWNjZXNzJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcm9sbERhdGFbd2hpY2hdLmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5uZWVkc1RpZUJyZWFrZXInXSA9IG9wdGlvbnMubmVlZHNUaWVCcmVha2VyXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBTb3J0IGJ5IHN1Y2Nlc3Nlc1xuICAgICAgICAgICAgICBjb25zdCBvcHBvc2VkUm9sbFRpZUJyZWFrZXIgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvcHBvc2VkUm9sbFRpZUJyZWFrZXInKVxuICAgICAgICAgICAgICBvcHRpb25zLnJvbGxPcmRlci5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW2FdLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwgPiBvcHRpb25zLnJvbGxTdGF0dXNlc1tiXS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW2FdLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwgPCBvcHRpb25zLnJvbGxTdGF0dXNlc1tiXS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3Bwb3NlZFJvbGxUaWVCcmVha2VyKSB7XG4gICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yb2xsU3RhdHVzZXNbYV0uY29tcGxldGVkLm1vZGlmaWVkUmVzdWx0ID4gb3B0aW9ucy5yb2xsU3RhdHVzZXNbYl0uY29tcGxldGVkLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1thXS5jb21wbGV0ZWQubW9kaWZpZWRSZXN1bHQgPCBvcHRpb25zLnJvbGxTdGF0dXNlc1tiXS5jb21wbGV0ZWQubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW2FdLmNvbXBsZXRlZC5yYXdWYWx1ZSA+IG9wdGlvbnMucm9sbFN0YXR1c2VzW2JdLmNvbXBsZXRlZC5yYXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1thXS5jb21wbGV0ZWQucmF3VmFsdWUgPCBvcHRpb25zLnJvbGxTdGF0dXNlc1tiXS5jb21wbGV0ZWQucmF3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAwXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGNvbnN0IG9mZnNldE1heCA9IG9wdGlvbnMucm9sbE9yZGVyLmxlbmd0aFxuICAgICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMFxuICAgICAgICAgICAgICBjb25zdCBhID0gb3B0aW9ucy5yb2xsU3RhdHVzZXNbb3B0aW9ucy5yb2xsT3JkZXJbMF1dXG4gICAgICAgICAgICAgIGlmICghYS5mYWlsZWQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKDsgb2Zmc2V0IDwgb2Zmc2V0TWF4OyBvZmZzZXQrKykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IG9wdGlvbnMucm9sbFN0YXR1c2VzW29wdGlvbnMucm9sbE9yZGVyW29mZnNldF1dXG4gICAgICAgICAgICAgICAgICBpZiAoYS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsICE9PSBiLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwgfHwgKG9wcG9zZWRSb2xsVGllQnJlYWtlciA/IGEuY29tcGxldGVkLm1vZGlmaWVkUmVzdWx0ICE9PSBiLmNvbXBsZXRlZC5tb2RpZmllZFJlc3VsdCA6IGEuY29tcGxldGVkLnJhd1ZhbHVlICE9PSBiLmNvbXBsZXRlZC5yYXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0LS1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gLTFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBvcHRpb25zLmlzVGllID0gb2Zmc2V0ID4gMFxuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9mZnNldE1heDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlzV2lubmVyID0gZmFsc2VcbiAgICAgICAgICAgICAgICBsZXQgaXNUaWUgPSBmYWxzZVxuICAgICAgICAgICAgICAgIGlmIChpIDw9IG9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgaXNXaW5uZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICBpc1RpZSA9IG9wdGlvbnMuaXNUaWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgd2hpY2ggPSBvcHRpb25zLnJvbGxPcmRlcltpXVxuICAgICAgICAgICAgICAgIG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc1dpbm5lciA9IGlzV2lubmVyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmlzVGllID0gaXNUaWVcbiAgICAgICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuaXNXaW5uZXInXSA9IGlzV2lubmVyXG4gICAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmlzVGllJ10gPSBpc1RpZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9wdGlvbnMubmVlZHNUaWVCcmVha2VyID0gZmFsc2VcbiAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLm5lZWRzVGllQnJlYWtlciddID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5pc1RpZSddID0gb3B0aW9ucy5pc1RpZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKENvQzdHcm91cE1lc3NhZ2UuZ2V0VGVtcGxhdGVQYXRoKG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10udHlwZSksIG9wdGlvbnMpXG4gICAgICB1cGRhdGVzLmNvbnRlbnQgPSBodG1sXG4gICAgICBhd2FpdCBtc2cudXBkYXRlKHVwZGF0ZXMpXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCA0OiBHTSAvIC0gPSBQcmVwYXJlIG1lc3NhZ2UgZGF0YVxuICBzdGF0aWMgYXN5bmMgdXBkYXRlVGhlTWVzc2FnZSAoeyBtZXNzYWdlSWQsIHVwZGF0ZXMgfSkge1xuICAgIGNvbnN0IG1zZyA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAobXNnPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10gPz8gZmFsc2UpIHtcbiAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldENoZWNrICh7IG1zZywgdGhlUm9sbCB9KSB7XG4gICAgY29uc3QgY2hlY2tEYXRhID0ge1xuICAgICAgZGlmZmljdWx0eTogdGhlUm9sbC5kaWZmaWN1bHR5LFxuICAgICAgZGljZU1vZGlmaWVyOiB0aGVSb2xsLmJvbnVzLFxuICAgICAgYWN0b3JLZXk6ICh0aGVSb2xsLmFjdG9yLmFjdG9yS2V5ID8/IHRoZVJvbGwuYWN0b3IuYWN0b3IuYWN0b3JLZXkpLFxuICAgICAgZGVueVB1c2g6IGZhbHNlLFxuICAgICAgY29tYmF0OiAobXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXS5pc0NvbWJhdCA/PyBmYWxzZSlcbiAgICB9XG4gICAgc3dpdGNoICh0aGVSb2xsLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljJzpcbiAgICAgICAgY2hlY2tEYXRhLmNoYXJhY3RlcmlzdGljID0gdGhlUm9sbC5rZXlcbiAgICAgICAgY2hlY2tEYXRhLmRlbnlQdXNoID0gKG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10uZGVueVB1c2ggPz8gZmFsc2UpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICBjaGVja0RhdGEuYXR0cmlidXRlID0gdGhlUm9sbC5rZXlcbiAgICAgICAgY2hlY2tEYXRhLmRlbnlQdXNoID0gKG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10uZGVueVB1c2ggPz8gZmFsc2UpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgIGNoZWNrRGF0YS5za2lsbCA9IHRoZVJvbGwuc2tpbGxcbiAgICAgICAgY2hlY2tEYXRhLmRlbnlQdXNoID0gKChtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddLmRlbnlQdXNoID8/IGZhbHNlKSB8fCAhdGhlUm9sbC5wdXNoYWJsZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICBjaGVja0RhdGEuaXRlbSA9IHRoZVJvbGwuaXRlbVxuICAgICAgICBjaGVja0RhdGEuZGVueVB1c2ggPSAoKG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10uZGVueVB1c2ggPz8gZmFsc2UpIHx8ICF0aGVSb2xsLnB1c2hhYmxlKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgICByZXR1cm4gQ29DN0NoZWNrLmNyZWF0ZShjaGVja0RhdGEpXG4gIH1cblxuICAvLyBTdGVwIDM6IEdNIC8gTm9uIEdNID0gUGVyZm9ybSBhIHJvbGxcbiAgc3RhdGljIGFzeW5jIHBlcmZvcm1Sb2xsICh7IG1zZywgd2hpY2gsIHJvbGwsIHB1c2hpbmcgfSA9IHt9KSB7XG4gICAgY29uc3QgdGhlUm9sbCA9IGF3YWl0IENvQzdHcm91cE1lc3NhZ2UucGFyc2VSb2xscyh7IHJvbGwsIHF1aWNrOiBmYWxzZSB9KVxuICAgIGlmICghdGhlUm9sbCkge1xuICAgICAgcmV0dXJuIHt9XG4gICAgfVxuICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5nZXRDaGVjayh7IG1zZywgdGhlUm9sbCB9KVxuICAgIGlmIChwdXNoaW5nKSB7XG4gICAgICBjaGVjay5wdXNoaW5nID0gcHVzaGluZ1xuICAgIH1cbiAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSh7XG4gICAgICBmb3JjZURTTjogdHJ1ZVxuICAgIH0pXG4gICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmNvbXBsZXRlZCddID0gY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgcmV0dXJuIHVwZGF0ZXNcbiAgfVxuXG4gIC8vIFN0ZXAgMmI6IEdNIC8gTm9uIEdNID0gcGVyZm9ybSByb2xsIGRhdGFcbiAgc3RhdGljIGFzeW5jIHBlcmZvcm1Db21iaW5lZFJvbGwgKHsgbWVzc2FnZUlkLCBtc2csIGdtSWQsIHVwZGF0ZXMsIHB1c2hpbmcgPSBmYWxzZSB9KSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBtc2cgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbERhdGEgPSB7fVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gbXNnPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzKSB7XG4gICAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5wYXJzZVJvbGxzKHsgcm9sbDogbXNnPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsLCBxdWljazogZmFsc2UgfSlcbiAgICAgIGlmIChyb2xsKSB7XG4gICAgICAgIHJvbGxEYXRhW3doaWNoXSA9IHJvbGxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwb29sID0ge31cbiAgICBmb3IgKGNvbnN0IHdoaWNoIGluIHJvbGxEYXRhKSB7XG4gICAgICBwb29sW3BhcnNlSW50KHJvbGxEYXRhW3doaWNoXS5ib251cyA/PyAwLCAxMCldID0gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0RpY2UuY29tYmluZWRSb2xsKHsgcG9vbCB9KVxuXG4gICAgbGV0IGZpcnN0ID0gdHJ1ZVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gcm9sbERhdGEpIHtcbiAgICAgIGNvbnN0IGJvbnVzID0gcGFyc2VJbnQocm9sbERhdGFbd2hpY2hdLmJvbnVzID8/IDAsIDEwKVxuICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLmdldENoZWNrKHsgbXNnLCB0aGVSb2xsOiByb2xsRGF0YVt3aGljaF0gfSlcbiAgICAgIGlmIChwdXNoaW5nKSB7XG4gICAgICAgIGNoZWNrLnB1c2hpbmcgPSBwdXNoaW5nXG4gICAgICB9XG4gICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSh7XG4gICAgICAgIHJvbGw6IHJvbGxbYm9udXNdLFxuICAgICAgICBzaWxlbnQ6IChmaXJzdCA9PT0gZmFsc2UgPyB0cnVlIDogdW5kZWZpbmVkKSxcbiAgICAgICAgZm9yY2VEU046IGZpcnN0XG4gICAgICB9KVxuICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmNvbXBsZXRlZCddID0gY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgICBmaXJzdCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKG1zZy5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZUdyb3VwTWVzc2FnZSh7IG1zZywgdXBkYXRlcyB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBnbUlkID0gQ29DN1V0aWxpdGllcy5nZXRBbklkRm9yR20oKVxuICAgICAgaWYgKGdtSWQgIT09IGZhbHNlKSB7XG4gICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgIGxpc3RlbmVyOiBnbUlkLFxuICAgICAgICAgIHR5cGU6ICdncm91cC1tZXNzYWdlLXVwZGF0ZScsXG4gICAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgICAgdXBkYXRlc1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFN0ZXAgMmE6IEdNIC8gTm9uIEdNID0gcGVyZm9ybSByb2xsIGRhdGFcbiAgc3RhdGljIGFzeW5jIHBlcmZvcm1Ob3JtYWxSb2xsICh7IG1lc3NhZ2VJZCwgbXNnLCByb2xscywgZ21JZCwgdXBkYXRlcywgcHVzaGluZyA9IGZhbHNlIH0pIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1zZyA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHdoaWNoIGluIHJvbGxzKSB7XG4gICAgICBpZiAodHlwZW9mIG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10/LnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkID09PSAndW5kZWZpbmVkJyB8fCBwdXNoaW5nKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odXBkYXRlcywgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtUm9sbCh7IG1zZywgd2hpY2gsIHJvbGw6IHJvbGxzW3doaWNoXSwgcHVzaGluZyB9KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0NvQzcuRXJyb3JSb2xsQWxyZWFkeUNvbXBsZXRlZCcsIHsgbG9jYWxpemU6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1zZy5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZUdyb3VwTWVzc2FnZSh7IG1zZywgdXBkYXRlcyB9KVxuICAgIH0gZWxzZSBpZiAoZ21JZCAhPT0gZmFsc2UpIHtcbiAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICBsaXN0ZW5lcjogZ21JZCxcbiAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2UtdXBkYXRlJyxcbiAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgIHVwZGF0ZXNcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCAyOiBHTSAvIE5vbiBHTSA9IFByZXBhcmUgcm9sbCBkYXRhXG4gIHN0YXRpYyBhc3luYyBwZXJmb3JtTXlSb2xscyAoeyBtZXNzYWdlSWQsIG1zZywgcm9sbHMgfSkge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZUlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbXNnID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIH1cbiAgICBjb25zdCB1cGRhdGVzID0ge31cbiAgICBmb3IgKGNvbnN0IHdoaWNoIGluIHJvbGxzKSB7XG4gICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLm5hbWVSb2xsKHsgd2hpY2gsIHJvbGw6IHJvbGxzW3doaWNoXSwgdXBkYXRlcyB9KVxuICAgIH1cblxuICAgIGNvbnN0IGdtSWQgPSAobXNnLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykgPyBmYWxzZSA6IENvQzdVdGlsaXRpZXMuZ2V0QW5JZEZvckdtKCkpXG5cbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKG1zZy5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgICB9IGVsc2UgaWYgKGdtSWQgIT09IGZhbHNlKSB7XG4gICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgIGxpc3RlbmVyOiBnbUlkLFxuICAgICAgICAgIHR5cGU6ICdncm91cC1tZXNzYWdlLXVwZGF0ZScsXG4gICAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgICAgdXBkYXRlc1xuICAgICAgICB9KVxuICAgICAgICAvLyBXYWl0IGZvciBhIGJpdCB0byByZWR1Y2UgcmFjZSBjb25kaXRpb25zXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDApKVxuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS50eXBlKSB7XG4gICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgIENvQzdHcm91cE1lc3NhZ2UucGVyZm9ybUNvbWJpbmVkUm9sbCh7IG1zZywgZ21JZCwgdXBkYXRlcyB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgIENvQzdHcm91cE1lc3NhZ2UucGVyZm9ybU5vcm1hbFJvbGwoeyBtc2csIHJvbGxzLCBnbUlkLCB1cGRhdGVzIH0pXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCAyOiBHTSAvIE5vbiBHTSA9IE5hbWUgcm9sbHNcbiAgc3RhdGljIGFzeW5jIG5hbWVSb2xsICh7IHdoaWNoLCByb2xsLCB1cGRhdGVzIH0pIHtcbiAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnBhcnNlUm9sbHMoeyByb2xsLCBxdWljazogZmFsc2UgfSlcbiAgICBpZiAocGFyc2VkKSB7XG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuc2hvcnROYW1lJ10gPSBwYXJzZWQuc2hvcnROYW1lXG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuZnVsbE5hbWUnXSA9IHBhcnNlZC5mdWxsTmFtZVxuICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLnRhZ3MnXSA9IHBhcnNlZC50YWdzID8/IFtdXG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcucGVyY2VudCddID0gcGFyc2VkLnBlcmNlbnQgPz8gMVxuICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmlzTWFuZXV2ZXInXSA9IHBhcnNlZC5pc01hbmV1dmVyID8/IGZhbHNlXG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuaXNEb2RnaW5nJ10gPSBwYXJzZWQuaXNEb2RnZSA/PyBmYWxzZVxuICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmlzV2VhcG9uJ10gPSBwYXJzZWQuaXNEb2RnZSA/PyBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIC8vIFN0ZXAgMTogR00gLyAtID0gQ3JlYXRlIG1lc3NhZ2VcbiAgc3RhdGljIGFzeW5jIG5ld0dyb3VwTWVzc2FnZSAoeyByb2xsRGF0YSA9IHVuZGVmaW5lZCwgb3B0aW9ucyB9KSB7XG4gICAgaWYgKHR5cGVvZiByb2xsRGF0YSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJvbGxEYXRhID0ge31cbiAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gb3B0aW9ucy5yb2xsU3RhdHVzZXMpIHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IENvQzdHcm91cE1lc3NhZ2UucGFyc2VSb2xscyh7IHJvbGw6IG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsLCBxdWljazogdHJ1ZSB9KVxuICAgICAgICByb2xsRGF0YVt3aGljaF0gPSByb2xsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbHNCeVVzZXIgPSB7fVxuICAgIGNvbnN0IHJvbGxSZXF1aXJlc05hbWUgPSB7fVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gcm9sbERhdGEpIHtcbiAgICAgIGxldCBhc1VzZXJJZCA9ICcnXG4gICAgICBzd2l0Y2ggKHJvbGxEYXRhW3doaWNoXS5hdXRvUm9sbC5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChyb2xsRGF0YVt3aGljaF0uYXV0b1JvbGxbMF0gIT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICAgICAgYXNVc2VySWQgPSByb2xsRGF0YVt3aGljaF0uYXV0b1JvbGxbMF1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBhc1VzZXJJZCA9IGdhbWUudXNlci5pZFxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGxpbmcgPSBmYWxzZVxuICAgICAgICAgIGlmIChyb2xsRGF0YVt3aGljaF0uc2hvcnROYW1lID09PSAnLScpIHtcbiAgICAgICAgICAgIHJvbGxSZXF1aXJlc05hbWVbd2hpY2hdID0gcm9sbERhdGFbd2hpY2hdLnJvbGxcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmIChhc1VzZXJJZCAhPT0gJycpIHtcbiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocm9sbHNCeVVzZXIsIGFzVXNlcklkKSkge1xuICAgICAgICAgIHJvbGxzQnlVc2VyW2FzVXNlcklkXSA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgcm9sbHNCeVVzZXJbYXNVc2VySWRdW3doaWNoXSA9IG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsXG4gICAgICAgIG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsaW5nID0gYXNVc2VySWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wbGF0ZURhdGEgPSBPYmplY3QuYXNzaWduKHsgcm9sbERhdGEgfSwgb3B0aW9ucylcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoQ29DN0dyb3VwTWVzc2FnZS5nZXRUZW1wbGF0ZVBhdGgob3B0aW9ucy50eXBlKSwgdGVtcGxhdGVEYXRhKVxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgICdncm91cC1tZXNzYWdlJzogb3B0aW9uc1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cbiAgICBzd2l0Y2ggKGNoYXREYXRhLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8udHlwZSkge1xuICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgIGNoYXREYXRhLnNwZWFrZXIgPSBPYmplY3QuYXNzaWduKGNoYXREYXRhLnNwZWFrZXIgPz8ge30sIHsgYWxpYXM6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcHBvc2VkUm9sbENhcmQnKSB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY29tYmluZWQnOlxuICAgICAgICBjaGF0RGF0YS5zcGVha2VyID0gT2JqZWN0LmFzc2lnbihjaGF0RGF0YS5zcGVha2VyID8/IHt9LCB7IGFsaWFzOiBPYmplY3QudmFsdWVzKHJvbGxEYXRhKVswXS5hY3Rvci5uYW1lIH0pXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIGNvbnN0IHVwZGF0ZXMgPSB7fVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gcm9sbFJlcXVpcmVzTmFtZSkge1xuICAgICAgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5uYW1lUm9sbCh7IHdoaWNoLCByb2xsOiByb2xsUmVxdWlyZXNOYW1lW3doaWNoXSwgdXBkYXRlcyB9KVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS51cGRhdGVUaGVHcm91cE1lc3NhZ2UoeyBtc2csIHVwZGF0ZXMsIHJvbGxEYXRhIH0pXG4gICAgfVxuICAgIGZvciAoY29uc3QgdXNlcklkIGluIHJvbGxzQnlVc2VyKSB7XG4gICAgICBpZiAodXNlcklkICE9PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2Utcm9sbCcsXG4gICAgICAgICAgbGlzdGVuZXI6IHVzZXJJZCxcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1zZy5pZCxcbiAgICAgICAgICByb2xsczogcm9sbHNCeVVzZXJbdXNlcklkXVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJvbGxzQnlVc2VyLCBnYW1lLnVzZXIuaWQpKSB7XG4gICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnBlcmZvcm1NeVJvbGxzKHtcbiAgICAgICAgbXNnLFxuICAgICAgICByb2xsczogcm9sbHNCeVVzZXJbZ2FtZS51c2VyLmlkXVxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGlzVXNlckFjdGl2ZSAoeyB3aGljaCwgbXNnIH0pIHtcbiAgICBpZiAobXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8ucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsaW5nID8/IGZhbHNlKSB7XG4gICAgICBjb25zdCB1c2VyID0gZ2FtZS51c2Vycy5nZXQobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGxpbmcpXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00gfHwgIXVzZXIgfHwgIXVzZXIuYWN0aXZlKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7XG4gICAgICAgICAgWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcucm9sbGluZyddOiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChtc2cuY2FuVXNlck1vZGlmeShnYW1lLnVzZXIsICd1cGRhdGUnKSkge1xuICAgICAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZ21JZCA9IENvQzdVdGlsaXRpZXMuZ2V0QW5JZEZvckdtKClcbiAgICAgICAgICBpZiAoZ21JZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgICAgICBsaXN0ZW5lcjogZ21JZCxcbiAgICAgICAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2UtdXBkYXRlJyxcbiAgICAgICAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgICAgICAgIHVwZGF0ZXNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGJ1dHRvbi5jbG9zZXN0KCdsaS5jaGF0LW1lc3NhZ2UnKT8uZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCBrZXkgPSBidXR0b24uZGF0YXNldC5rZXlcbiAgICBsZXQgdmFsdWUgPSBidXR0b24uZGF0YXNldC52YWx1ZVxuICAgIGlmIChtZXNzYWdlSWQgJiYga2V5KSB7XG4gICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0LW9ubHktZ20nKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBtc2cgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgICBpZiAodHlwZW9mIG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10/LltrZXldICE9PSAndW5kZWZpbmVkJyAmJiBtc2cuY2FuVXNlck1vZGlmeShnYW1lLnVzZXIsICd1cGRhdGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHZhbHVlID0gIW1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ11ba2V5XVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7XG4gICAgICAgICAgWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuJyArIGtleV06IHZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICBjYXNlICdhZHZhbnRhZ2VEZWZlbmRlcic6XG4gICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuYWR2YW50YWdlQXR0YWNrZXInXSA9ICF2YWx1ZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdhZHZhbnRhZ2VBdHRhY2tlcic6XG4gICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuYWR2YW50YWdlRGVmZW5kZXInXSA9ICF2YWx1ZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZUdyb3VwTWVzc2FnZSh7IG1zZywgdXBkYXRlcyB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmFjdGlvblxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGJ1dHRvbi5jbG9zZXN0KCdsaS5jaGF0LW1lc3NhZ2UnKT8uZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCB3aGljaCA9IGJ1dHRvbi5kYXRhc2V0LndoaWNoXG4gICAgaWYgKG1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbXNnID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgICAgaWYgKHR5cGVvZiBtc2cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2hpY2ggIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXNbd2hpY2hdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgZnJvbVV1aWQobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGwuc3BsaXQoJyMnKVswXSlcbiAgICAgICAgICBpZiAoIWFjdG9yIHx8ICFhY3Rvci5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdDb0M3LkVycm9yTm9BY3RvclBlcm1pc3Npb24nLCB7IGxvY2FsaXplOiB0cnVlIH0pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgJ2ltcGF0aWVudC1yb2xsJzpcbiAgICAgICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5pc1VzZXJBY3RpdmUoe1xuICAgICAgICAgICAgICAgIHdoaWNoLFxuICAgICAgICAgICAgICAgIG1zZ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbm9ybWFsLXJvbGwnOlxuICAgICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLnBlcmZvcm1NeVJvbGxzKHtcbiAgICAgICAgICAgICAgICBtc2csXG4gICAgICAgICAgICAgICAgcm9sbHM6IHsgW3doaWNoXTogbXNnLmZsYWdzLkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddLnJvbGxTdGF0dXNlc1t3aGljaF0ucm9sbCB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICd1c2UtbHVjayc6XG4gICAgICAgICAgICAgIENvQzdHcm91cE1lc3NhZ2Uuc3BlbmRNeUx1Y2soe1xuICAgICAgICAgICAgICAgIHdoaWNoLFxuICAgICAgICAgICAgICAgIGluZGV4OiBidXR0b24uZGF0YXNldC5pbmRleCxcbiAgICAgICAgICAgICAgICBsdWNrQW1vdW50OiBidXR0b24uZGF0YXNldC5sdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgIG1zZ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOlxuICAgICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLnJlbW92ZVJvbGwoe1xuICAgICAgICAgICAgICAgIHdoaWNoLFxuICAgICAgICAgICAgICAgIG1zZ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAncHVzaCc6XG4gICAgICAgICAgICAgIENvQzdHcm91cE1lc3NhZ2UucHVzaE15Um9sbCh7XG4gICAgICAgICAgICAgICAgd2hpY2gsXG4gICAgICAgICAgICAgICAgbXNnXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbGV0IG9rYXkgPSBmYWxzZVxuICAgICAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gbXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgZnJvbVV1aWQobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGwuc3BsaXQoJyMnKVswXSlcbiAgICAgICAgICAgIGlmIChhY3Rvci5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICAgICAgICAgIG9rYXkgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghb2theSkge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQ29DNy5FcnJvck5vQWN0b3JQZXJtaXNzaW9uJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlICdyb2xsLW9uY2UnOlxuICAgICAgICAgICAgICBpZiAobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS50eXBlID09PSAnY29tYmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgICAgICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtQ29tYmluZWRSb2xsKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3RvZ2dsZSc6XG4gICAgICAgICAgICAgIENvQzdHcm91cE1lc3NhZ2UuX29uVG9nZ2xlKGV2ZW50KVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByZW5kZXJDaGF0TWVzc2FnZSAoYXBwLCBodG1sLCBkYXRhKSB7XG4gICAgY29uc3QgY2FuTW9kaWZ5ID0ge1xuICAgICAgZ206IGdhbWUudXNlci5pc0dNXG4gICAgfVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gYXBwLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8ucm9sbFN0YXR1c2VzKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGF3YWl0IGZyb21VdWlkKGFwcC5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsLnNwbGl0KCcjJylbMF0pXG4gICAgICBjYW5Nb2RpZnlbd2hpY2hdID0gYWN0b3I/LmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykgPz8gZmFsc2VcbiAgICB9XG4gICAgY2FuTW9kaWZ5LmFueSA9IE9iamVjdC52YWx1ZXMoY2FuTW9kaWZ5KS5maWx0ZXIoYiA9PiBiKS5sZW5ndGggPiAwXG4gICAgZm9yIChjb25zdCBrZXkgaW4gY2FuTW9kaWZ5KSB7XG4gICAgICBpZiAoIWNhbk1vZGlmeVtrZXldKSB7XG4gICAgICAgIGh0bWwuZmluZCgnLnZpc2libGUtb25seS0nICsga2V5KS5yZW1vdmUoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaHRtbC5maW5kKCcuaGlkZGVuLW9ubHktJyArIGtleSkucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9XG4gICAgaHRtbC5vbignY2xpY2snLCAnLnJvbGwtY2FyZC12MiBidXR0b246bm90KC50b2dnbGUtc3dpdGNoKScsIENvQzdHcm91cE1lc3NhZ2UuX29uQ2xpY2suYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcucm9sbC1jYXJkLXYyIGE6bm90KC50b2dnbGUtbGluayknLCBDb0M3R3JvdXBNZXNzYWdlLl9vbkNsaWNrLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnJvbGwtY2FyZC12MiBidXR0b24udG9nZ2xlLXN3aXRjaCcsIENvQzdHcm91cE1lc3NhZ2UuX29uVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnJvbGwtY2FyZC12MiBhLnRvZ2dsZS1saW5rJywgQ29DN0dyb3VwTWVzc2FnZS5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRBY3RvciAoaWRlbnRpZmllcikge1xuICAgIGlmIChpZGVudGlmaWVyLm1hdGNoKC9eYVxcLi8pKSB7XG4gICAgICByZXR1cm4gKChhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGlkZW50aWZpZXIpKT8uWzBdKSA/PyBudWxsXG4gICAgfVxuICAgIGlmIChpZGVudGlmaWVyLmluZGV4T2YoJy4nKSA+IC0xKSB7XG4gICAgICByZXR1cm4gYXdhaXQgZnJvbVV1aWQoaWRlbnRpZmllcilcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChpZGVudGlmaWVyKSA/PyBudWxsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcGFyc2VSb2xscyAoeyByb2xsLCBxdWljayA9IHRydWUsIGRlZmF1bHRVdWlkID0gJycgfSkge1xuICAgIGNvbnN0IG1hdGNoID0gcm9sbC5tYXRjaCgvXig/PGE+W14jXSsjKT8oPzx0PmF0dHJpYnV0ZXxjaGFyYWN0ZXJpc3RpY3xpdGVtfHNraWxsKSMoPzxrPlteI10rKSgjKD88bT4uKikpPyQvKVxuICAgIGlmIChtYXRjaCkge1xuICAgICAgY29uc3QgbW9kaWZpZXJzID0gKG1hdGNoLmdyb3Vwcy5tID8/ICcnKS50b0xvd2VyQ2FzZSgpLnNwbGl0KCcjJylcbiAgICAgIGNvbnN0IGJvbnVzID0gcGFyc2VJbnQobW9kaWZpZXJzLmZpbmQobSA9PiBtLm1hdGNoKC9eWystXVxcZCskLykpID8/IDAsIDEwKVxuICAgICAgY29uc3QgZGlmZmljdWx0eSA9IG1vZGlmaWVycy5maW5kKG0gPT4gbS5tYXRjaCgvXlxcZCskLykpXG4gICAgICBjb25zdCBwdXNoaW5nID0gbW9kaWZpZXJzLmZpbHRlcihtID0+IG0gPT09ICdwJykubGVuZ3RoID4gMFxuICAgICAgLy8gY29uc3QgYXR0YWNrZXIgPSBtb2RpZmllcnMuZmlsdGVyKG0gPT4gbSA9PT0gJ3gnKS5sZW5ndGggPiAwIC8vIE5ZSVxuICAgICAgLy8gY29uc3QgZGVmZW5kZXIgPSBtb2RpZmllcnMuZmlsdGVyKG0gPT4gbSA9PT0gJ28nKS5sZW5ndGggPiAwIC8vIE5ZSVxuICAgICAgY29uc3Qgcm9sbERhdGEgPSB7XG4gICAgICAgIHR5cGU6IG1hdGNoLmdyb3Vwcy50LFxuICAgICAgICBrZXk6IG1hdGNoLmdyb3Vwcy5rLFxuICAgICAgICBib251cyxcbiAgICAgICAgZGlmZmljdWx0eTogKChkaWZmaWN1bHR5ID8/ICcnKS50b1N0cmluZygpID09PSAnMCcgPyBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd24gOiAoZGlmZmljdWx0eSA/IHBhcnNlSW50KGRpZmZpY3VsdHksIDEwKSA6IChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JykgPT09ICd1bmtub3duJyA/IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikpKSxcbiAgICAgICAgcHVzaGluZ1xuICAgICAgfVxuICAgICAgaWYgKCFtYXRjaC5ncm91cHMuYSAmJiBkZWZhdWx0VXVpZCAmJiBkZWZhdWx0VXVpZCAhPT0gJycpIHtcbiAgICAgICAgbWF0Y2guZ3JvdXBzLmEgPSBkZWZhdWx0VXVpZCArICcjJ1xuICAgICAgfVxuICAgICAgaWYgKG1hdGNoLmdyb3Vwcy5hKSB7XG4gICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5nZXRBY3RvcihtYXRjaC5ncm91cHMuYS5zdWJzdHIoMCwgbWF0Y2guZ3JvdXBzLmEubGVuZ3RoIC0gMSkpXG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG4gICAgICAgIHJvbGxEYXRhLmFjdG9yID0gYWN0b3JcbiAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSBnYW1lLnVzZXJzLmZpbHRlcih1ID0+ICF1LmlzR00gJiYgcm9sbERhdGEuYWN0b3IuY2FuVXNlck1vZGlmeSh1LCAndXBkYXRlJykpLm1hcCh1ID0+IHsgcmV0dXJuIHsgaWQ6IHUuaWQsIGFjdGl2ZTogdS5hY3RpdmUgfSB9KVxuICAgICAgICBpZiAocm9sbERhdGEuYXV0b1JvbGwubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJvbGxEYXRhLmF1dG9Sb2xsID0gcm9sbERhdGEuYXV0b1JvbGwuZmlsdGVyKGQgPT4gZC5hY3RpdmUpLm1hcChkID0+IGQuaWQpXG4gICAgICAgICAgaWYgKHJvbGxEYXRhLmF1dG9Sb2xsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSBbJ3ByZXZlbnQnLCAncm9sbCddXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBhY3RvciA9IGF3YWl0IEFjdG9yUGlja2VyRGlhbG9nLmNyZWF0ZSgpXG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ0NvQzcuV2Fybk5vQ29udHJvbGxlZEFjdG9yJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICAgICAgcm9sbERhdGEuYWN0b3IgPSBhY3RvclxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSBbZ2FtZS51c2VyLmlkXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvbGxEYXRhLmF1dG9Sb2xsID0gZ2FtZS51c2Vycy5maWx0ZXIodSA9PiAhdS5pc0dNICYmIHJvbGxEYXRhLmFjdG9yLmNhblVzZXJNb2RpZnkodSwgJ3VwZGF0ZScpKS5tYXAodSA9PiB7IHJldHVybiB7IGlkOiB1LmlkLCBhY3RpdmU6IHUuYWN0aXZlIH0gfSlcbiAgICAgICAgICBpZiAocm9sbERhdGEuYXV0b1JvbGwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSByb2xsRGF0YS5hdXRvUm9sbC5maWx0ZXIoZCA9PiBkLmFjdGl2ZSkubWFwKGQgPT4gZC5pZClcbiAgICAgICAgICAgIGlmIChyb2xsRGF0YS5hdXRvUm9sbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSBbJ3ByZXZlbnQnLCAncm9sbCddXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByb2xsRGF0YS5yb2xsID0gcm9sbERhdGEuYWN0b3IudXVpZCArICcjJyArIHJvbGxEYXRhLnR5cGUgKyAnIycgKyByb2xsRGF0YS5rZXkgKyAocm9sbERhdGEuYm9udXMgPCAwID8gJyMnICsgcm9sbERhdGEuYm9udXMgOiAocm9sbERhdGEuYm9udXMgPiAwID8gJyMrJyArIHJvbGxEYXRhLmJvbnVzIDogJycpKSArIChkaWZmaWN1bHR5ID09PSAwID8gJyMwJyA6IChkaWZmaWN1bHR5ID8gJyMnICsgcGFyc2VJbnQoZGlmZmljdWx0eSwgMTApIDogJycpKVxuICAgICAgcm9sbERhdGEucG9ydHJhaXQgPSAocm9sbERhdGEuYWN0b3IgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ID8gcm9sbERhdGEuYWN0b3IudGV4dHVyZS5zcmMgOiByb2xsRGF0YS5hY3Rvci5wb3J0cmFpdClcbiAgICAgIHJvbGxEYXRhLnNob3J0TmFtZSA9ICctJ1xuICAgICAgcm9sbERhdGEuZnVsbE5hbWUgPSAnLSdcbiAgICAgIHN3aXRjaCAocm9sbERhdGEudHlwZSkge1xuICAgICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpYyc6XG4gICAgICAgICAgcm9sbERhdGEuc2hvcnROYW1lID0gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHJvbGxEYXRhLmtleSk/LnNob3J0ID8/ICctJ1xuICAgICAgICAgIHJvbGxEYXRhLmZ1bGxOYW1lID0gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHJvbGxEYXRhLmtleSk/LmxhYmVsID8/ICctJ1xuICAgICAgICAgIHJvbGxEYXRhLnBlcmNlbnQgPSAocm9sbERhdGEuYWN0b3IgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ID8gcm9sbERhdGEuYWN0b3IuYWN0b3IgOiByb2xsRGF0YS5hY3Rvcikuc3lzdGVtPy5jaGFyYWN0ZXJpc3RpY3Nbcm9sbERhdGEua2V5XT8udmFsdWUgPz8gMVxuICAgICAgICAgIGlmIChyb2xsRGF0YS5zaG9ydE5hbWUgPT09ICctJykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgICBzd2l0Y2ggKHJvbGxEYXRhLmtleSkge1xuICAgICAgICAgICAgY2FzZSAnbGNrJzpcbiAgICAgICAgICAgICAgcm9sbERhdGEuc2hvcnROYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgICAgICAgICByb2xsRGF0YS5mdWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3Nhbic6XG4gICAgICAgICAgICAgIHJvbGxEYXRhLnNob3J0TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKVxuICAgICAgICAgICAgICByb2xsRGF0YS5mdWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICB9XG4gICAgICAgICAgcm9sbERhdGEucGVyY2VudCA9IChyb2xsRGF0YS5hY3RvciBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgPyByb2xsRGF0YS5hY3Rvci5hY3RvciA6IHJvbGxEYXRhLmFjdG9yKS5zeXN0ZW0/LmF0dHJpYnNbcm9sbERhdGEua2V5XT8udmFsdWUgPz8gMVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgICBpZiAoIXF1aWNrKSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbHMgPSBhd2FpdCAocm9sbERhdGEuYWN0b3IgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ID8gcm9sbERhdGEuYWN0b3IuYWN0b3IgOiByb2xsRGF0YS5hY3RvcikuZ2V0SXRlbU9yQWRkKHJvbGxEYXRhLmtleSwgJ3NraWxsJylcbiAgICAgICAgICAgIGlmIChza2lsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHJvbGxEYXRhLnNraWxsID0gc2tpbGxzWzBdXG4gICAgICAgICAgICAgIHJvbGxEYXRhLnNob3J0TmFtZSA9IHNraWxsc1swXS5zaG9ydE5hbWVcbiAgICAgICAgICAgICAgcm9sbERhdGEuZnVsbE5hbWUgPSBza2lsbHNbMF0uc2hvcnROYW1lXG4gICAgICAgICAgICAgIHJvbGxEYXRhLnB1c2hhYmxlID0gKHNraWxsc1swXS5zeXN0ZW0ucHJvcGVydGllcz8ucHVzaCA/PyBmYWxzZSlcbiAgICAgICAgICAgICAgcm9sbERhdGEucGVyY2VudCA9IHNraWxsc1swXS52YWx1ZVxuICAgICAgICAgICAgICByb2xsRGF0YS5pc01hbmV1dmVyID0gc2tpbGxzWzBdLmlzRG9kZ2VcbiAgICAgICAgICAgICAgcm9sbERhdGEuaXNEb2RnZSA9IHNraWxsc1swXS5pc0RvZGdlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIGlmICghcXVpY2spIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgKHJvbGxEYXRhLmFjdG9yIGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCA/IHJvbGxEYXRhLmFjdG9yLmFjdG9yIDogcm9sbERhdGEuYWN0b3IpLmdldEl0ZW1PckFkZChyb2xsRGF0YS5rZXksICd3ZWFwb24nKVxuICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICByb2xsRGF0YS5pdGVtID0gaXRlbXNbMF1cbiAgICAgICAgICAgICAgcm9sbERhdGEuc2hvcnROYW1lID0gaXRlbXNbMF0uc2hvcnROYW1lXG4gICAgICAgICAgICAgIHJvbGxEYXRhLmZ1bGxOYW1lID0gaXRlbXNbMF0uc2hvcnROYW1lXG4gICAgICAgICAgICAgIHJvbGxEYXRhLmlzTWFuZXV2ZXIgPSBpdGVtc1swXS5zeXN0ZW0ucHJvcGVydGllcz8ubW52ciA/PyBmYWxzZVxuICAgICAgICAgICAgICByb2xsRGF0YS5pc1dlYXBvbiA9IHRydWVcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGl0ZW1zWzBdLnN5c3RlbS5za2lsbFtpdGVtc1swXS51c2VzQWx0ZXJuYXRpdmVTa2lsbCA/ICdhbHRlcm5hdGl2JyA6ICdtYWluJ10uaWRcbiAgICAgICAgICAgICAgaWYgKHNraWxsSWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IChyb2xsRGF0YS5hY3RvciBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgPyByb2xsRGF0YS5hY3Rvci5hY3RvciA6IHJvbGxEYXRhLmFjdG9yKS5pdGVtcy5maW5kKGQgPT4gZC5pZCA9PT0gc2tpbGxJZClcbiAgICAgICAgICAgICAgICByb2xsRGF0YS50YWdzID0gW3NraWxsLm5hbWVdXG4gICAgICAgICAgICAgICAgcm9sbERhdGEucGVyY2VudCA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgICAgICAgcm9sbERhdGEucHVzaGFibGUgPSAoc2tpbGwuc3lzdGVtLnByb3BlcnRpZXM/LnB1c2ggPz8gZmFsc2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIHJldHVybiByb2xsRGF0YVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldFRlbXBsYXRlUGF0aCAodHlwZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L21lc3NhZ2VzL29wcG9zZWQuaGJzJ1xuICAgICAgY2FzZSAnY29tYmluZWRhbGwnOlxuICAgICAgY2FzZSAnY29tYmluZWRhbnknOlxuICAgICAgY2FzZSAnY29tYmluZWQnOlxuICAgICAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9tZXNzYWdlcy9jb21iaW5lZC5oYnMnXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlR3JvdXBNZXNzYWdlIChvcHRpb25zKSB7XG4gICAgLy8gVE9ETzogQWRkIGFkZGl0aW9uYWwgcm9sbHNcbiAgICAvLyBUT0RPOiBQaHlzaWNhbCBIdW1hbiBMaW1pdHNcbiAgICBpZiAoIUNvQzdHcm91cE1lc3NhZ2UuZ2V0VGVtcGxhdGVQYXRoKG9wdGlvbnMudHlwZSkpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgbGV0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgdHlwZTogJycsXG4gICAgICBkZW55UHVzaDogZmFsc2UsXG4gICAgICBzaG93Q29tcGxldGVkUm9sbHM6IHRydWUsXG4gICAgICBhbGxSb2xsc0NvbXBsZXRlZDogZmFsc2UsXG4gICAgICBpc0NvbWJhdDogZmFsc2UsXG4gICAgICBpc0VkaXRhYmxlOiB0cnVlLFxuICAgICAgcm9sbFN0YXR1c2VzOiB7fSxcbiAgICAgIHJvbGxPcmRlcjogW11cbiAgICB9LCBvcHRpb25zKVxuXG4gICAgc3dpdGNoIChjb25maWcudHlwZSkge1xuICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgIGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgIGRlbnlQdXNoOiB0cnVlLFxuICAgICAgICAgIGlzVGllOiBmYWxzZSxcbiAgICAgICAgICBuZWVkc1RpZUJyZWFrZXI6IGZhbHNlLFxuICAgICAgICAgIGFkdmFudGFnZUF0dGFja2VyOiBmYWxzZSxcbiAgICAgICAgICBhZHZhbnRhZ2VEZWZlbmRlcjogZmFsc2UsXG4gICAgICAgICAgZGVmZW5kZXJJc0RvZGdpbmc6IGZhbHNlLFxuICAgICAgICAgIHdpbm5lclJvbGxzRGFtYWdlOiBmYWxzZVxuICAgICAgICB9LCBjb25maWcpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjb21iaW5lZGFsbCc6XG4gICAgICBjYXNlICdjb21iaW5lZGFueSc6XG4gICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgIGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgIGNvbWJpbmVkOiAoY29uZmlnLnR5cGUgPT09ICdjb21iaW5lZGFsbCcgPyAnYWxsJyA6IChjb25maWcudHlwZSA9PT0gJ2NvbWJpbmVkYW55JyA/ICdhbnknIDogJycpKSxcbiAgICAgICAgICBhY3RvclV1aWQ6ICcnLFxuICAgICAgICAgIGlzU3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgICB3YXNQdXNoZWQ6IGZhbHNlXG4gICAgICAgIH0sIGNvbmZpZylcbiAgICAgICAgY29uZmlnLnR5cGUgPSAnY29tYmluZWQnXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbERhdGEgPSB7fVxuICAgIGxldCBjb3VudCA9IDBcbiAgICBmb3IgKGNvbnN0IG9mZnNldCBpbiBvcHRpb25zLnJvbGxSZXF1aXNpdGVzKSB7XG4gICAgICBjb25zdCB3aGljaCA9ICdyJyArIG9mZnNldFxuICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IENvQzdHcm91cE1lc3NhZ2UucGFyc2VSb2xscyh7IHJvbGw6IG9wdGlvbnMucm9sbFJlcXVpc2l0ZXNbb2Zmc2V0XSwgcXVpY2s6IHRydWUsIGRlZmF1bHRVdWlkOiBjb25maWcuYWN0b3JVdWlkID8/ICcnIH0pXG4gICAgICBpZiAoIXJvbGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICAgIGlmIChjb25maWcudHlwZSA9PT0gJ2NvbWJpbmVkJykge1xuICAgICAgICBpZiAoY29uZmlnLmFjdG9yVXVpZCA9PT0gJycgfHwgY29uZmlnLmFjdG9yVXVpZCA9PT0gcm9sbC5hY3Rvci51dWlkKSB7XG4gICAgICAgICAgY29uZmlnLmFjdG9yVXVpZCA9IHJvbGwuYWN0b3IudXVpZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0NvQzcuRXJyb3JDb21iaW5lZFJvbGxzUmVxdWlyZVNpbmdsZUFjdG9yJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJvbGxEYXRhW3doaWNoXSA9IHJvbGxcbiAgICAgIGNvbmZpZy5yb2xsU3RhdHVzZXNbd2hpY2hdID0ge1xuICAgICAgICByb2xsOiByb2xsLnJvbGwsXG4gICAgICAgIHJvbGxhYmxlOiAoY29uZmlnLnR5cGUgIT09ICdjb21iaW5lZCcpLFxuICAgICAgICByb2xsaW5nOiBmYWxzZSxcbiAgICAgICAgc2hvcnROYW1lOiByb2xsLnNob3J0TmFtZSxcbiAgICAgICAgZnVsbE5hbWU6IHJvbGwuZnVsbE5hbWUsXG4gICAgICAgIHBlcmNlbnQ6IHJvbGwucGVyY2VudCxcbiAgICAgICAgdGFnczogW10sXG4gICAgICAgIGlzTWFuZXV2ZXI6IGZhbHNlLFxuICAgICAgICBpc0RvZGdpbmc6IGZhbHNlLFxuICAgICAgICBpc1dlYXBvbjogZmFsc2VcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoY29uZmlnLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgICAgY29uZmlnLnJvbGxTdGF0dXNlc1t3aGljaF0gPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGlzQXR0YWNrZXI6IGNvdW50ID09PSAwLCAvLyBDdXJyZW50bHkgb25seSAxdjEgYXR0YWNrZXIgZmlyc3RcbiAgICAgICAgICAgIGlzV2lubmVyOiBmYWxzZSxcbiAgICAgICAgICAgIGlzVGllOiBmYWxzZVxuICAgICAgICAgIH0sIGNvbmZpZy5yb2xsU3RhdHVzZXNbd2hpY2hdKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2NvbWJpbmVkJzpcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY29uZmlnLnJvbGxPcmRlci5wdXNoKHdoaWNoKVxuICAgICAgY291bnQrK1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnR5cGUgPT09ICdvcHBvc2VkJyAmJiBPYmplY3Qua2V5cyhyb2xsRGF0YSkubGVuZ3RoICE9PSAyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdDb0M3LkVycm9yT3Bwb3NlZFJvbGxzTGltaXRlZFRvVHdvQWN0b3JzJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgZGVsZXRlIGNvbmZpZy5yb2xsUmVxdWlzaXRlc1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgcmV0dXJuIENvQzdHcm91cE1lc3NhZ2UubmV3R3JvdXBNZXNzYWdlKHsgcm9sbERhdGEsIG9wdGlvbnM6IGNvbmZpZyB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBnbUlkID0gQ29DN1V0aWxpdGllcy5nZXRBbklkRm9yR20oKVxuICAgICAgaWYgKGdtSWQgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIEVycm9yIG1lc3NhZ2Ugc2hvd24gaW4gQ29DN1V0aWxpdGllcy5nZXRBbklkRm9yR20oKVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7IHR5cGU6ICdncm91cC1tZXNzYWdlLW5ldycsIGxpc3RlbmVyOiBnbUlkLCBvcHRpb25zOiBjb25maWcgfSlcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUgKi9cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuaXRlbUlkKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XG4gICAgcmV0dXJuIFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHRoaXMuX3RhcmdldEFjdG9yID0gdGhpcy50YXJnZXRUb2tlbi5hY3RvclxuICAgICAgZWxzZSB0aGlzLl90YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuX3RhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IHRhcmdldEtleSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLl90YXJnZXRLZXlcbiAgfVxuXG4gIGdldCBoYXNUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHNldCB0YXJnZXRLZXkgKHgpIHtcbiAgICB0aGlzLl90YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgdGFyZ2V0SW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLnRhcmdldEtleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHRhcmdldE5hbWUgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXQpIHJldHVybiAnZHVtbXknXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm5hbWVcbiAgfVxuXG4gIGdldCBhY3RvckltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgYXN5bmMgc2F5IChtZXNzYWdlLCBmbGF2b3IgPSBudWxsKSB7XG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgICAgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuLmRvY3VtZW50XG4gICAgICB9XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBmbGF2b3IsXG4gICAgICBjb250ZW50OiBtZXNzYWdlXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICApIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKSAvLyBDaGFuZ2UgZm9yIHVzZXJcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBmb3VuZHJ5LCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCwgY2hhdEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci5qcydcblxuZnVuY3Rpb24gcmVwbGFjZXIgKGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuXG4gIGNvbnN0IGV4Y2x1ZGUgPSBbJ19hY3RvciddXG4gIGlmIChleGNsdWRlLmluY2x1ZGVzKGtleSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBjb25zdCBjaGVja3MgPSBbJ3NhbkNoZWNrJywgJ2ludENoZWNrJ11cbiAgaWYgKGNoZWNrcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuIHZhbHVlLkpTT05Sb2xsRGF0YVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG5leHBvcnQgY2xhc3MgU2FuQ2hlY2tDYXJkIGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIHNhbkRhdGEgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoXG4gICAgICBhY3RvcktleSxcbiAgICAgIHR5cGVvZiBvcHRpb25zLmZhc3RGb3J3YXJkICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IEJvb2xlYW4ob3B0aW9ucy5mYXN0Rm9yd2FyZClcbiAgICAgICAgOiBmYWxzZVxuICAgIClcbiAgICBzYW5EYXRhLnNhblJlYXNvbiA9IHNhbkRhdGEuc2FuUmVhc29uID8/ICcnXG4gICAgdGhpcy5zYW5EYXRhID0gc2FuRGF0YVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBpZiAoc2FuRGF0YS5tb2RpZmllciAmJiAhaXNOYU4oTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbk1vZGlmaWVyID0gTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmIChzYW5EYXRhLmRpZmZpY3VsdHkgJiYgIWlzTmFOKE51bWJlcihzYW5EYXRhLmRpZmZpY3VsdHkpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgPSBOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KVxuICAgIH1cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5pc0JsaW5kICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyBCb29sZWFuKHRoaXMub3B0aW9ucy5pc0JsaW5kKVxuICAgICAgOiBzdXBlci5pc0JsaW5kXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gdGhpcy5vcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyB0aGlzLm9wdGlvbnMubW9kaWZpZXJcbiAgICAgIDogMFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NTb3VyY2UgKCkge1xuICAgIGlmICghdGhpcy5zYW5EYXRhLnRva2VuS2V5KSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLnNhbkRhdGEudG9rZW5LZXkpXG4gIH1cblxuICBnZXQgaW52b2x1bnRhcnlBY3Rpb24gKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkICYmXG4gICAgICAodGhpcy5zYW5DaGVjay5pc0ZhaWx1cmUgfHwgdGhpcy5zYW5DaGVjay5pc0Z1bWJsZSlcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHNhbkxvc3NGb3JtdWxhICgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5zYW5Sb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuTWF4ICYmIHRoaXMuc2FuQ2hlY2suZmFpbGVkKSB7XG4gICAgICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpKVxuICAgICAgICAgID8gTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpXG4gICAgICAgICAgOiB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1pbiAmJiB0aGlzLnNhbkNoZWNrLnBhc3NlZCkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKSlcbiAgICAgICAgICA/IE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKVxuICAgICAgICAgIDogdGhpcy5zYW5EYXRhLnNhbk1pblxuICAgICAgfVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzYW5Mb3N0VG9SZWFzb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLnNhbkxvc3RUb1JlYXNvbih0aGlzLnNhbkRhdGEuc2FuUmVhc29uKVxuICB9XG5cbiAgZ2V0IG1heFBvc3NpYmxlU2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICApXG4gIH1cblxuICBnZXQgbWF4U2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuRGF0YS5zYW5NYXgudG9TdHJpbmcoKSlbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgfVxuXG4gIGdldCBzYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLnNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKVxuICB9XG5cbiAgZ2V0IGZpcnN0RW5jb3VudGVyICgpIHtcbiAgICByZXR1cm4gIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZFxuICB9XG5cbiAgZ2V0IGlzQWN0b3JMb29zaW5nU2FuICgpIHtcbiAgICAvLyBObyBzYW4gbG9zcyBkdXJpbmcgYm91dCBvZiBtYWQuXG4gICAgaWYgKHRoaXMuYWN0b3IuaGFzVGVtcG9JbnNhbmUpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8vIFRoZSBzYW4gbG9zcyBpcyBhIDBcbiAgICBpZiAodGhpcy5zYW5Mb3NzRm9ybXVsYSA9PT0gMCkgcmV0dXJuIGZhbHNlXG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uICYmXG4gICAgICB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgICAgKSA9PT0gMFxuICAgICkge1xuICAgICAgdGhpcy5zdGF0ZS5pbW11bmVUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBib3V0RHVyYXRpb25UZXh0ICgpIHtcbiAgICBpZiAodGhpcy5ib3V0RHVyYXRpb24pIHtcbiAgICAgIGlmICh0aGlzLmJvdXRSZWFsVGltZSkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5ib3V0RHVyYXRpb259ICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJvdW5kcycpfWBcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmJvdXRTdW1tYXJ5KSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmJvdXREdXJhdGlvbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuaG91cnMnKX1gXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgeW91R2FpbkN0aHVsaHVNeXRob3NTdHJpbmcgKCkge1xuICAgIGlmICh0aGlzLm15dGhvc0dhaW4pIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LllvdUdhaW5lZEN0aHVsaHVNeXRob3MnLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLm15dGhvc0dhaW5cbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBhZHZhbmNlU3RhdGUgKHN0YXRlKSB7XG4gICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgY2FzZSAna2VlcENyZWF0dXJlU2FuRGF0YSc6IHtcbiAgICAgICAgdGhpcy5zdGF0ZS5rZWVwQ3JlYXR1cmVTYW5EYXRhID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQnOiB7XG4gICAgICAgIHRoaXMuc3RhdGVbc3RhdGVdID0gdHJ1ZVxuICAgICAgICBpZiAoIXRoaXMuaXNBY3Rvckxvb3NpbmdTYW4pIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnc2FuTG9zc0FwcGxpZWQnOiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlTYW5Mb3NzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2VudGVyQm91dE9mTWFkbmVzc1JlYWxUaW1lJzoge1xuICAgICAgICB0aGlzLmJvdXREdXJhdGlvbiA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgICAgdGhpcy5ib3V0UmVhbFRpbWUgPSB0cnVlXG4gICAgICAgIHRoaXMuYm91dFN1bW1hcnkgPSBmYWxzZVxuICAgICAgICB0aGlzLmJvdXRSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyhcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIHRoaXMuYm91dER1cmF0aW9uXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzUmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZW50ZXJCb3V0T2ZNYWRuZXNzU3VtbWFyeSc6IHtcbiAgICAgICAgdGhpcy5ib3V0RHVyYXRpb24gPSAoYXdhaXQgbmV3IFJvbGwoJzFEMTAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICAgIHRoaXMuYm91dFJlYWxUaW1lID0gZmFsc2VcbiAgICAgICAgdGhpcy5ib3V0U3VtbWFyeSA9IHRydWVcbiAgICAgICAgdGhpcy5ib3V0UmVzdWx0ID0gYXdhaXQgdGhpcy5hY3Rvci5lbnRlckJvdXRPZk1hZG5lc3MoXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgdGhpcy5ib3V0RHVyYXRpb25cbiAgICAgICAgKVxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NSZXNvbHZlZCA9IHRydWVcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VySW5zYW5pdHkoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnYm91dE9mTWFkbmVzc092ZXInOiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3IudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gICAgICAgIGF3YWl0IHRoaXMudHJpZ2dlckluc2FuaXR5KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ25vTXl0aG9zR2FpbmVkJzoge1xuICAgICAgICB0aGlzLnN0YXRlLmN0aHVsaHVNeXRob3NBd2FyZGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSAwXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdjdGh1bGh1TXl0aG9zQXdhcmRlZCc6IHtcbiAgICAgICAgbGV0IGFtb3VudEdhaW5lZCA9IDFcbiAgICAgICAgaWYgKCF0aGlzLmFjdG9yLm15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQpIHtcbiAgICAgICAgICBhbW91bnRHYWluZWQgPSA1XG4gICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5leHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSgpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZS5jdGh1bGh1TXl0aG9zQXdhcmRlZCA9IHRydWVcbiAgICAgICAgY29uc3QgY3RodWxodU15dGhvc1NraWxsID0gdGhpcy5hY3Rvci5jdGh1bGh1TXl0aG9zU2tpbGxcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPVxuICAgICAgICAgIGN0aHVsaHVNeXRob3NTa2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSB8fCAwXG4gICAgICAgIGlmIChjdGh1bGh1TXl0aG9zU2tpbGwpIHtcbiAgICAgICAgICBhd2FpdCBjdGh1bGh1TXl0aG9zU2tpbGwudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IG9sZFZhbHVlICsgYW1vdW50R2FpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSBhbW91bnRHYWluZWRcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBieXBhc3NSb2xsU2FuICgpIHtcbiAgICB0aGlzLmlzQnlwYXNzZWQgPSB0cnVlXG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuaWdub3JlU2FuQ2hlY2sgPSB0cnVlXG4gICAgdGhpcy5wcmVIYXJkZW5lZFNhbkxvc3MgPSB0aGlzLm9yaWdpbmFsU2FuTG9zcyA9IHRoaXMuc2FuTG9zc0Zvcm11bGFcbiAgICB0aGlzLnNhbkxvc3MgPSB0aGlzLmFwcGx5TXl0aG9zSGFyZGVuZWQodGhpcy5wcmVIYXJkZW5lZFNhbkxvc3MpXG4gIH1cblxuICBhcHBseU15dGhvc0hhcmRlbmVkIChzYW5Mb3NzKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IudXNlTXl0aG9zSGFyZGVuZWQgPyBNYXRoLmZsb29yKHNhbkxvc3MgLyAyKSA6IHNhbkxvc3NcbiAgfVxuXG4gIGFzeW5jIHJvbGxTYW4gKCkge1xuICAgIHRoaXMuc2FuQ2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICB0aGlzLnNhbkNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIHRoaXMuc2FuQ2hlY2suYXR0cmlidXRlID0gJ3NhbidcbiAgICB0aGlzLnNhbkNoZWNrLmRpZmZpY3VsdHkgPVxuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgdGhpcy5zYW5DaGVjay5kaWNlTW9kaWZpZXIgPSB0aGlzLm9wdGlvbnMuc2FuTW9kaWZpZXIgfHwgMFxuICAgIGF3YWl0IHRoaXMuc2FuQ2hlY2suX3BlcmZvcm0oeyBmb3JjZURTTjogdHJ1ZSB9KVxuICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQgPSB0aGlzLnNhbkNoZWNrLnBhc3NlZFxuICAgIGlmICghdGhpcy5pc0FjdG9yTG9vc2luZ1Nhbikge1xuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICBpZiAodGhpcy5hY3Rvci5oYXNUZW1wb0luc2FuZSkge1xuICAgICAgICB0aGlzLnN0YXRlLmltbXVuZUFscmVhZHlJbkJvdXQgPSB0cnVlXG4gICAgICAgIGlmICghdGhpcy5zYW5DaGVjay5wYXNzZWQpIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc0FwcGxpZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSBmYWxzZVxuICAgICAgdGhpcy5wcmVIYXJkZW5lZFNhbkxvc3MgPSAwXG4gICAgICB0aGlzLm9yaWdpbmFsU2FuTG9zcyA9IDBcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLnNhbkxvc3NGb3JtdWxhID09PSAnbnVtYmVyJykge1xuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5vcmlnaW5hbFNhbkxvc3MgPSB0aGlzLnNhbkxvc3NGb3JtdWxhXG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhblJlYXNvbikge1xuICAgICAgICBjb25zdCBtYXggPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICAgICAgKVxuICAgICAgICB0aGlzLnByZUhhcmRlbmVkU2FuTG9zcyA9IHRoaXMub3JpZ2luYWxTYW5Mb3NzXG4gICAgICAgIGlmICh0aGlzLnByZUhhcmRlbmVkU2FuTG9zcyA+IG1heCkge1xuICAgICAgICAgIHRoaXMucHJlSGFyZGVuZWRTYW5Mb3NzID0gbWF4XG4gICAgICAgICAgdGhpcy5zdGF0ZS5saW1pdGVkTG9zc1RvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJlSGFyZGVuZWRTYW5Mb3NzID0gdGhpcy5vcmlnaW5hbFNhbkxvc3NcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuc2FuQ2hlY2suaXNGdW1ibGUpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMub3JpZ2luYWxTYW5Mb3NzID0gbmV3IFJvbGwodGhpcy5zYW5EYXRhLnNhbk1heClbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgIHRoaXMucHJlSGFyZGVuZWRTYW5Mb3NzID0gdGhpcy5hY3Rvci5tYXhMb3NzVG9TYW5SZWFzb24oXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgIHRoaXMub3JpZ2luYWxTYW5Mb3NzXG4gICAgICApXG4gICAgfSBlbHNlIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBtaW4gPSBuZXcgUm9sbCh0aGlzLnNhbkxvc3NGb3JtdWxhKVsoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/ICdldmFsdWF0ZScgOiAnZXZhbHVhdGVTeW5jJykvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqL10oeyBtaW5pbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgY29uc3QgbWF4ID0gdGhpcy5hY3Rvci5tYXhMb3NzVG9TYW5SZWFzb24oXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICAgIClcbiAgICAgIGlmIChtaW4gPj0gbWF4KSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5wcmVIYXJkZW5lZFNhbkxvc3MgPSB0aGlzLm9yaWdpbmFsU2FuTG9zcyA9IHRoaXMubWF4XG4gICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYXBwbHlNeXRob3NIYXJkZW5lZCh0aGlzLnByZUhhcmRlbmVkU2FuTG9zcylcbiAgfVxuXG4gIGFzeW5jIHJvbGxTYW5Mb3NzICgpIHtcbiAgICB0aGlzLnNhbkxvc3NSb2xsID0gbmV3IFJvbGwoYCR7dGhpcy5zYW5Mb3NzRm9ybXVsYX1gKVxuXG4gICAgYXdhaXQgdGhpcy5zYW5Mb3NzUm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcblxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuc2FuTG9zc1JvbGwpXG5cbiAgICBjb25zdCBtYXggPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zc1JvbGwudG90YWwgPiBtYXgpIHtcbiAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMub3JpZ2luYWxTYW5Mb3NzID0gdGhpcy5zYW5Mb3NzUm9sbC50b3RhbFxuICAgIHRoaXMucHJlSGFyZGVuZWRTYW5Mb3NzID0gTWF0aC5taW4odGhpcy5vcmlnaW5hbFNhbkxvc3MsIG1heClcbiAgICB0aGlzLnNhbkxvc3MgPSB0aGlzLmFwcGx5TXl0aG9zSGFyZGVuZWQodGhpcy5wcmVIYXJkZW5lZFNhbkxvc3MpXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgYXBwbHlTYW5Mb3NzICgpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLmxvb3NlU2FuKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sIHRoaXMuc2FuTG9zcylcblxuICAgIGlmICh0aGlzLnNhbkxvc3MgPiAwKSB0aGlzLnN0YXRlLmFjdG9yTG9zdFNhbiA9IHRydWVcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NBcHBsaWVkID0gdHJ1ZVxuICAgIGlmICh0aGlzLmFjdG9yLnNhbiA8PSAwKSB7XG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXG5cbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLnBlcm1hbmVudGx5SW5zYW5lID0gdHJ1ZVxuXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh0aGlzLnNhbkxvc3MgPCA1KSB7XG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmFjdG9yLmhhc0luZGVmSW5zYW5lKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuc2hha2VuID0gdHJ1ZVxuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5VGFibGVSb2xsZWQgPSBmYWxzZVxuICAgICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuc2hha2VuID0gdHJ1ZVxuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5VGFibGVSb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWN0b3IuZGFpbHlTYW5Mb3NzID49IHRoaXMuYWN0b3IuZGFpbHlTYW5MaW1pdCkge1xuICAgICAgLy8gdGhpcy5hY3Rvci5zYW4vNVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5VGFibGVSb2xsZWQgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxJbnQgKCkge1xuICAgIHRoaXMuaW50Q2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICB0aGlzLmludENoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIHRoaXMuaW50Q2hlY2suY2hhcmFjdGVyaXN0aWMgPSAnaW50J1xuICAgIHRoaXMuaW50Q2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuaW50RGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLmludENoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5pbnRNb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5pbnRDaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgaWYgKHRoaXMuaW50Q2hlY2sucGFzc2VkIHx8IHRoaXMuc3RhdGUuYWxyZWFkeUluc2FuZSkge1xuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUudGVtcG9yYXJ5SW5zYW5lID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUudGVtcG9yYXJ5SW5zYW5lID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUubWVtb3J5UmVwcmVzc2VkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdHJpZ2dlckluc2FuaXR5ICgpIHtcbiAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gdHJ1ZVxuICAgIGlmICh0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmUpXG4gICAgfVxuICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgY2xlYXJTYW5Mb3NzUmVhc29uICgpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldFJlYXNvblNhbkxvc3ModGhpcy5zYW5EYXRhLnNhblJlYXNvbiwgMClcbiAgICBpZiAoIXRoaXMuc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkKSB7XG4gICAgICB0aGlzLnN0YXRlLmtlZXBDcmVhdHVyZVNhbkRhdGEgPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIC8vIEF0dGFjaGUgdGhlIHNhbkNoZWNrIHJlc3VsdCB0byB0aGUgbWVzc2FnZS5cbiAgICBpZiAodGhpcy5zdGF0ZS5zYW5Sb2xsZWQpIHtcbiAgICAgIHRoaXMuX19pbmxpbmVTYW5DaGVjayA9IHRoaXMuc2FuQ2hlY2suaW5saW5lQ2hlY2sub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zc1JvbGwpIHtcbiAgICAgIGNvbnN0IGEgPSBjcmVhdGVJbmxpbmVSb2xsKHRoaXMuc2FuTG9zc1JvbGwpXG4gICAgICB0aGlzLl9faW5saW5lU2FuTG9zc1JvbGwgPSBhLm91dGVySFRNTFxuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlLmludFJvbGxlZCAmJiB0aGlzLmludENoZWNrKSB7XG4gICAgICB0aGlzLl9faW5saW5lSW50Q2hlY2sgPSB0aGlzLmludENoZWNrLmlubGluZUNoZWNrLm91dGVySFRNTFxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShTYW5DaGVja0NhcmQudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoSlNPTi5zdHJpbmdpZnkodGhpcywgcmVwbGFjZXIpKVxuXG4gICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmh0bWwnXG4gIH1cblxuICBzdGF0aWMgY2hlY2tUYXJnZXRzIChzYW5EYXRhLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGFyZ2V0cyA9IFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgICBpZiAodGFyZ2V0cy5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3QgdCBvZiB0YXJnZXRzKSB7XG4gICAgICAgIGlmICh0LmFjdG9yLmlzVG9rZW4pIHtcbiAgICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKHQuYWN0b3IudG9rZW5LZXksIHNhbkRhdGEsIHtcbiAgICAgICAgICAgIGZhc3RGb3J3YXJkXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKHQuYWN0b3IuaWQsIHNhbkRhdGEsIHsgZmFzdEZvcndhcmQgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob1RhcmdldHNTYW5DaGVjaycpKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKC4uLmFyZ3MpIHtcbiAgICBjb25zdCBjaGF0Q2FyZCA9IG5ldyBTYW5DaGVja0NhcmQoLi4uYXJncylcbiAgICBpZiAoY2hhdENhcmQuYWN0b3IuaGFzSW5kZWZJbnNhbmUpIHtcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmFscmVhZHlJbnNhbmUgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGNoYXRDYXJkLmFjdG9yLnNhbiA8PSAwKSB7XG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcblxuICAgICAgY2hhdENhcmQuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5wZXJtYW5lbnRseUluc2FuZSA9IHRydWVcblxuICAgICAgY2hhdENhcmQuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShTYW5DaGVja0NhcmQudGVtcGxhdGUsIGNoYXRDYXJkKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoSlNPTi5zdHJpbmdpZnkoY2hhdENhcmQsIHJlcGxhY2VyKSlcbiAgICBhd2FpdCBjaGF0Q2FyZC5zYXkoaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGNvbnN0IGh0bWxNZXNzYWdlID0gJC5wYXJzZUhUTUwobWVzc2FnZS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgaHRtbENhcmQgPSBodG1sTWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcuY2hhdC1jYXJkJylcblxuICAgIHJldHVybiBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbENhcmQpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCBzYW5DaGVja0NhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcblxuICAgIGNvbnN0IHNhbkNoZWNrQ2FyZCA9IG5ldyBTYW5DaGVja0NhcmQoKVxuICAgIE9iamVjdC5hc3NpZ24oc2FuQ2hlY2tDYXJkLCBzYW5DaGVja0NhcmREYXRhKVxuICAgIGlmICghc2FuQ2hlY2tDYXJkLm1lc3NhZ2VJZCkge1xuICAgICAgc2FuQ2hlY2tDYXJkLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIH1cblxuICAgIGlmIChzYW5DaGVja0NhcmQuc2FuQ2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgc2FuQ2hlY2tDYXJkLnNhbkNoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgICBzYW5DaGVja0NhcmQuc2FuQ2hlY2tcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoc2FuQ2hlY2tDYXJkLmludENoZWNrPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5pbnRDaGVjayA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgIG5ldyBDb0M3Q2hlY2soKSxcbiAgICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBzYW5DaGVja0NhcmQuc2FuTG9zc1JvbGwgPSBSb2xsLmZyb21EYXRhKHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbClcbiAgICB9XG5cbiAgICByZXR1cm4gc2FuQ2hlY2tDYXJkXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBjYW52YXMsIENoYXRNZXNzYWdlLCBDT05GSUcsIENPTlNULCBmb3VuZHJ5LCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4vY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0dyb3VwTWVzc2FnZSB9IGZyb20gJy4vY29jNy1ncm91cC1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5cbi8qKlxuICogQWxsb3cgZm9yIHBhcnNpbmcgb2YgQ29DNyBlbGVtZW50cyBpbiBjaGF0IG1lc3NhZ2UgYW5kIHNoZWV0cy5cbiAqIEZvcm1hdCBpcyA6XG4gKiBAY29jNy5UWVBFX09GX1JFUVVFU1RbT1BUSU9OU117RElTUExBWUVEX05BTUV9XG4gKiBUWVBFX09GX1JFUVVFU1QgOlxuICogLSBzYW5sb3NzOiB0cmlnZ2VyIGEgc2FuIGNoZWNrLCB1cG9uIGZhaWx1cmUgd2lsbCBwcm9wb3NlIHRvIGRlZHVjdCB0aGUgY29ycmVzcG9uZGluZyBTQU4uXG4gKiAtIGNoZWNrOiB0cmlnZ2VyIGEgY2hlY2sgZGVwZW5kaW5nIG9uIHRoZSBvcHRpb25zLlxuICogLSBpdGVtOiBUcmlnZ2VyIGEgd2VhcG9uIGNoZWNrXG4gKiAtIGVmZmVjdDogQWRkIGFuIGVmZmVjdFxuICpcbiAqIE9QVElPTlM6IFtdID0gb3B0aW9uYWxcbiAqIHNhbmxvc3M6XG4gKiAgIHNhbk1heDogbWF4IFNBTiBsb3NzXG4gKiAgIHNhbk1pbjogbWluIFNBTiBsb3NzXG4gKiAgIHNhblJlYXNvbjogUmVhc29uXG4gKiBjaGVjazpcbiAqICAgdHlwZTogdHlwZSBvZiBjaGVjayAoY2hhcmFjdGVyaXN0aWMsIHNraWxsLCBhdHRyaWIpLlxuICogICBuYW1lOiBuYW1lIG9mIHRoZSBza2lsbC9jaGFyYWN0ZXJpc3RpYy5cbiAqICAgW2RpZmZpY3VsdHldOiA/IChibGluZCksIDAgKHJlZ3VsYXIpLCArIChoYXJkKSwgKysgKGV4dHJlbWUpLCArKysgKGNyaXRpY2FsKS5cbiAqICAgW21vZGlmaWVyXTogLXggKHggcGVuYWx0eSBkaWNlKSwgK3ggKHggYm9udXMgZGljZSksIDAgKG5vIG1vZGlmaWVyKS5cbiAqICAgW2ljb25dOiBpY29uIHRvIHVzZSAoZm9udCBhd3NvbWUpLlxuICogICBbYmxpbmRdOiB3aWxsIHRyaWdnZXIgYSBibGluZCByb2xsLlxuICogICBbcHVzaGluZ106IHdpbGwgdHJpZ2dlciBhIHB1c2hlZCByb2xsXG4gKlxuICogW0RJU1BMQVlFRF9OQU1FOiBuYW1lIHRvIGRpc3BsYXkuXVxuICpcbiAqIFRvIGFkZC9lZGl0IGEgbmV3IGxpbmsgdXBkYXRlIHRoZXNlIHNlY3Rpb25zXG4gKiAgIGZyb21Ecm9wRGF0YSA9PiBBZGQgYWxsIGRlZmF1bHRzIGhlcmVcbiAqICAgX2NyZWF0ZUxpbmsgPT4gQ3JlYXRlIEhUTUwgZnJvbSBkb2N1bWVudCBkYXRhXG4gKiAgIF9jcmVhdGVEb2N1bWVudExpbmsgPT4gQ3JlYXRlIEBsaW5rIGZyb20gZG9jdW1lbnQgZGF0YVxuICogICBfb25MaW5rQWN0b3JDbGljayA9PiBQcm9jZXNzIGxpbmtcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdMaW5rIHtcbiAgc3RhdGljIGdldCBDSEVDS19UWVBFICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgQ0hFQ0s6ICdjaGVjaycsXG4gICAgICBTQU5MT1NTOiAnc2FubG9zcycsXG4gICAgICBJVEVNOiAnaXRlbScsXG4gICAgICBFRkZFQ1Q6ICdlZmZlY3QnXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBMSU5LX1RZUEUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBDSEFSQUNURVJJU1RJQzogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgIEFUVFJJQlVURTogJ2F0dHJpYnV0ZScsXG4gICAgICBTS0lMTDogJ3NraWxsJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBpbml0ICgpIHtcbiAgICBDT05GSUcuQ29DN0xpbmsgPSB7XG4gICAgICBkb2N1bWVudENsYXNzOiBDb0M3TGlua1xuICAgIH1cbiAgICBjb25zdCBib2R5ID0gJCgnYm9keScpXG4gICAgYm9keS5vbignY2xpY2snLCAnYS5jb2M3LWxpbmsnLCBDb0M3TGluay5fb25MaW5rQ2xpY2spXG4gICAgYm9keS5vbignZHJhZ3N0YXJ0JywgJ2EuY29jNy1saW5rJywgZXZlbnQgPT4gQ29DN0xpbmsuX29uRHJhZ0NvQzdMaW5rKGV2ZW50KSlcblxuICAgIENPTkZJRy5UZXh0RWRpdG9yLmVucmljaGVycy5wdXNoKHtcbiAgICAgIHBhdHRlcm46IG5ldyBSZWdFeHAoJ0AoY29jNylcXFxcLicgKyAnKGNoZWNrfGVmZmVjdHxpdGVtfHNhbmxvc3MpJyArICdcXFxcWyhbXlxcXFxbXFxcXF1dKig/OlxcXFxbW15cXFxcW1xcXFxdXSooPzpcXFxcW1teXFxcXFtcXFxcXV0qXFxcXF0pKlteXFxcXFtcXFxcXV0qXFxcXF0pKlteXFxcXFtcXFxcXV0qKVxcXFxdJyArICcoPzp7KFtefV0rKX0pPycsICdnaScpLFxuICAgICAgZW5yaWNoZXI6IENvQzdMaW5rLl9jcmVhdGVMaW5rXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBfbGlua0Zyb21FdmVudCAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGkgPSBhLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxpbmstaWNvbl0nKVxuICAgIGNvbnN0IGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShhLmRhdGFzZXQpXG5cbiAgICBjb25zdCBvbGRUeXBlID0gZGF0YS50eXBlXG5cbiAgICBkYXRhLnR5cGUgPSAnQ29DN0xpbmsnXG4gICAgZGF0YS5pY29uID0gbnVsbFxuXG4gICAgaWYgKG9sZFR5cGUpIHtcbiAgICAgIGRhdGEubGlua1R5cGUgPSBvbGRUeXBlXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgZGF0YS5vYmplY3QgJiZcbiAgICAgICh0eXBlb2YgZGF0YS5vYmplY3QgPT09ICdzdHJpbmcnIHx8IGRhdGEub2JqZWN0IGluc3RhbmNlb2YgU3RyaW5nKVxuICAgICkge1xuICAgICAgZGF0YS5vYmplY3QgPSBKU09OLnBhcnNlKGRhdGEub2JqZWN0KVxuICAgICAgLy8gZGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5FRkZFQ1RcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBpLmRhdGFzZXQgJiZcbiAgICAgIGkuZGF0YXNldC5saW5rSWNvbiAmJlxuICAgICAgaS5kYXRhc2V0LmxpbmtJY29uICE9PSAnZmFzIGZhLWRpY2UnXG4gICAgKSB7XG4gICAgICBkYXRhLmljb24gPSBpLmRhdGFzZXQubGlua0ljb25cbiAgICB9XG4gICAgZGF0YS5kaXNwbGF5TmFtZSA9IGEuZGF0YXNldC5kaXNwbGF5TmFtZSA/IGEuaW5uZXJUZXh0IDogbnVsbFxuICAgIGlmIChkYXRhLmRpZmZpY3VsdHkpIHtcbiAgICAgIGRhdGEuZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkoZGF0YS5kaWZmaWN1bHR5KVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgc3RhdGljIF9vbkRyYWdDb0M3TGluayAoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhID0gQ29DN0xpbmsuX2xpbmtGcm9tRXZlbnQoZXZlbnQpXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgLyoqXG4gICAqIEEgaGVscGVyIGZ1bmN0aW9uIHRvIGhhbmRsZSBvYnRhaW5pbmcgdGhlIHJlbGV2YW50IERvY3VtZW50IGZyb20gZHJvcHBlZCBkYXRhIHByb3ZpZGVkIHZpYSBhIERhdGFUcmFuc2ZlciBldmVudC5cbiAgICogVGhlIGRyb3BwZWQgZGF0YSBjb3VsZCBoYXZlOlxuICAgKiAxLiBBIGRhdGEgb2JqZWN0IGV4cGxpY2l0bHkgcHJvdmlkZWRcbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgIFRoZSBkYXRhIG9iamVjdCBleHRyYWN0ZWQgZnJvbSBhIERhdGFUcmFuc2ZlciBldmVudFxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAgICAgICAgQWRkaXRpb25hbCBvcHRpb25zIHdoaWNoIGFmZmVjdCBkcm9wIGRhdGEgYmVoYXZpb3JcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSAgIFRoZSByZXNvbHZlZCBEb2N1bWVudFxuICAgKiBAdGhyb3dzIElmIGEgRG9jdW1lbnQgY291bGQgbm90IGJlIHJldHJpZXZlZCBmcm9tIHRoZSBwcm92aWRlZCBkYXRhLlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb21Ecm9wRGF0YSAoZGF0YSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY2xzID0gbmV3IENvQzdMaW5rKClcbiAgICBjbHMub2JqZWN0ID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh7XG4gICAgICB0eXBlOiAnQ29DN0xpbmsnLFxuICAgICAgY2hlY2s6IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0ssXG4gICAgICBsaW5rVHlwZTogQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMLFxuICAgICAgZGlmZmljdWx0eTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyLFxuICAgICAgbW9kaWZpZXI6IDAsXG4gICAgICBvYmplY3Q6IHtcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcbiAgICAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAgIGNoYW5nZXM6IFtdXG4gICAgICB9XG4gICAgfSwgZGF0YSlcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ25hbWUnLCAnZGlzcGxheU5hbWUnLCAnaWNvbicsICdpZCcsICdwYWNrJywgJ3Nhbk1pbicsICdzYW5NYXgnLCAnc2FuUmVhc29uJ10pIHtcbiAgICAgIGNscy5vYmplY3Rba2V5XSA9IGNscy5vYmplY3Rba2V5XSA/PyAnJ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNscy5vYmplY3Qub2JqZWN0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjbHMub2JqZWN0Lm9iamVjdC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoY2xzLm9iamVjdC5vYmplY3QuZXh0ZXJuYWwpKSB7XG4gICAgICBjbHMub2JqZWN0Lm9iamVjdC5pY29uID0gY2xzLm9iamVjdC5vYmplY3QuZXh0ZXJuYWwgKyAnOi8vJyArIGNscy5vYmplY3Qub2JqZWN0Lmljb25cbiAgICB9XG4gICAgY2xzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgcmV0dXJuIGNsc1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9jcmVhdGVMaW5rIChtYXRjaCkge1xuICAgIGNvbnN0IG5hbWUgPSBtYXRjaFs0XSA/PyB1bmRlZmluZWRcbiAgICBjb25zdCBvcHRpb25zID0gbWF0Y2hbM10gPz8gdW5kZWZpbmVkXG4gICAgY29uc3QgdHlwZSA9IG1hdGNoWzJdID8/IHVuZGVmaW5lZFxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGNsczogWydjb2M3LWxpbmsnXSxcbiAgICAgIGRhdGFzZXQ6IHsgY2hlY2s6IHR5cGUgfSxcbiAgICAgIGljb246IG51bGwsXG4gICAgICBibGluZDogZmFsc2UsXG4gICAgICBuYW1lXG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICBkYXRhLmVmZmVjdCA9IEpTT04ucGFyc2Uob3B0aW9ucylcbiAgICAgIGRhdGEuZGF0YXNldC5vYmplY3QgPSBvcHRpb25zXG4gICAgICBpZiAodHlwZW9mIGRhdGEuZWZmZWN0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmVmZmVjdC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoZGF0YS5lZmZlY3QuZXh0ZXJuYWwpKSB7XG4gICAgICAgIGRhdGEuZWZmZWN0Lmljb24gPSBkYXRhLmVmZmVjdC5leHRlcm5hbCArICc6Ly8nICsgZGF0YS5lZmZlY3QuaWNvblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9ucy5tYXRjaEFsbCgvW14sXSsvZ2kpXG4gICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIEFycmF5LmZyb20obWF0Y2hlcykpIHtcbiAgICAgICAgbGV0IFtrZXksIHZhbHVlXSA9IG1hdGNoWzBdLnNwbGl0KCc6JylcbiAgICAgICAgaWYgKGtleSA9PT0gJ2ljb24nKSB7XG4gICAgICAgICAgZGF0YS5pY29uID0gdmFsdWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmIChrZXkgPT09ICdibGluZCcpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdHJ1ZVxuICAgICAgICAgICAgZGF0YS5ibGluZCA9IHRydWUgJiYgW0NvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tdLmluY2x1ZGVzKHR5cGUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3B1c2hpbmcnKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRydWVcbiAgICAgICAgICAgIGRhdGEucHVzaGluZyA9IHRydWUgJiYgW0NvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tdLmluY2x1ZGVzKHR5cGUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2NvbWJhdCcpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdHJ1ZVxuICAgICAgICAgICAgZGF0YS5jb21iYXQgPSB0cnVlICYmIFtDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXS5pbmNsdWRlcyh0eXBlLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRhdGEuZGF0YXNldFtrZXldID0gdmFsdWVcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZGF0YS5kYXRhc2V0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmRhdGFzZXQuZXh0ZXJuYWwgIT09ICd1bmRlZmluZWQnICYmIFsnaHR0cCcsICdodHRwcyddLmluY2x1ZGVzKGRhdGEuZGF0YXNldC5leHRlcm5hbCkpIHtcbiAgICAgICAgZGF0YS5kYXRhc2V0Lmljb24gPSBkYXRhLmRhdGFzZXQuZXh0ZXJuYWwgKyAnOi8vJyArIGRhdGEuZGF0YXNldC5pY29uXG4gICAgICAgIGRhdGEuaWNvbiA9IGRhdGEuZGF0YXNldC5pY29uXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHRpdGxlXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKGRhdGEuZGF0YXNldC5kaWZmaWN1bHR5KVxuXG4gICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSzoge1xuICAgICAgICBsZXQgaHVtYW5OYW1lID0gZGF0YS5kYXRhc2V0Lm5hbWVcbiAgICAgICAgaWYgKFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXS5pbmNsdWRlcyhkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhc2V0Lm5hbWUgPT09ICdsY2snKSB7XG4gICAgICAgICAgICBodW1hbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkYXRhLmRhdGFzZXQubmFtZSA9PT0gJ3NhbicpIHtcbiAgICAgICAgICAgIGh1bWFuTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChbJ2NoYXJhYycsICdjaGFyJywgJ2NoYXJhY3RlcmlzdGljJywgJ2NoYXJhY3RlcmlzdGljcyddLmluY2x1ZGVzKGRhdGEuZGF0YXNldC50eXBlPy50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIGh1bWFuTmFtZSA9IENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhkYXRhLmRhdGFzZXQubmFtZSk/LmxhYmVsXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFuYW1lICYmIGRhdGEuZGF0YXNldC5uYW1lLm1hdGNoKC9eLlxcLlteXFxcXC5dKlxcLi4rJC8pKSB7XG4gICAgICAgICAgICBjb25zdCBjb2NJZE5hbWUgPSAoYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRChkYXRhLmRhdGFzZXQubmFtZSkpPy5bMF0/Lm5hbWVcbiAgICAgICAgICAgIGlmIChjb2NJZE5hbWUpIHtcbiAgICAgICAgICAgICAgaHVtYW5OYW1lID0gY29jSWROYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2skeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7IWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ30ke2RhdGEucHVzaGluZyA/ICdQdXNoaW5nJyA6ICcnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBodW1hbk5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1M6XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rU2FuTG9zcyR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHshZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBzYW5NaW46IGRhdGEuZGF0YXNldC5zYW5NaW4sXG4gICAgICAgICAgICBzYW5NYXg6IGRhdGEuZGF0YXNldC5zYW5NYXhcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLklURU06XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rSXRlbSR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHshZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBkYXRhLmRhdGFzZXQubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUOlxuICAgICAgICB0aXRsZSA9IGRhdGEuZWZmZWN0LmxhYmVsXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICBkYXRhLm5hbWUgPSB0aXRsZVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhLmRhdGFzZXQuZGlzcGxheU5hbWUgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGEudGl0bGUgPSBnYW1lLnVzZXIuaXNHTSA/IGRhdGEubmFtZSA6IHRpdGxlXG4gICAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YXNldCkpIHtcbiAgICAgIGEuZGF0YXNldFtrXSA9IHZcbiAgICB9XG4gICAgYS5kcmFnZ2FibGUgPSB0cnVlXG4gICAgZGF0YS5pY29uID0gZGF0YS5pY29uID8/IGRhdGEuZWZmZWN0Py5pY29uID8/ICdmYXMgZmEtZGljZSdcbiAgICAvLyBjaGVjayBpZiBpdCdzIGFuIGltYWdlIG9yIGFuIGljb25cbiAgICBpZiAoZGF0YS5pY29uLmluY2x1ZGVzKCdcXFxcJykgfHwgZGF0YS5pY29uLmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGRhdGEuaW1nID0gZGF0YS5pY29uXG4gICAgfVxuICAgIGlmIChkYXRhLmJsaW5kKSB7XG4gICAgICBhLmlubmVySFRNTCArPSAnPGkgY2xhc3M9XCJmYXMgZmEtZXllLXNsYXNoXCI+PC9pPidcbiAgICB9XG4gICAgaWYgKGRhdGEuaW1nKSB7XG4gICAgICBhLmlubmVySFRNTCArPSBgPGltZyBkYXRhLWxpbmstaWNvbj1cIiR7ZGF0YS5pY29ufVwiIHNyYz1cIiR7ZGF0YS5pbWd9XCI+YFxuICAgIH0gZWxzZSB7XG4gICAgICBhLmlubmVySFRNTCArPSBgPGkgZGF0YS1saW5rLWljb249XCIke2RhdGEuaWNvbn1cIiBjbGFzcz1cImxpbmstaWNvbiAke2RhdGEuaWNvbn1cIj48L2k+YFxuICAgIH1cbiAgICBhLmlubmVySFRNTCArPSBgPHNwYW4+JHtkYXRhLm5hbWV9PC9zcGFuPmBcblxuICAgIHJldHVybiBhXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgY29udGVudCBsaW5rIGZvciB0aGlzIGRvY3VtZW50LlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnREYXRhICAgICAgICAgICAgICAgICAgICAgVGhlIHBhcnNlZCBvYmplY3Qgb2YgZGF0YSBwcm92aWRlZCBieSB0aGUgZHJvcCB0cmFuc2ZlciBldmVudC5cbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAgICAgICAgICAgICAgICAgICAgIEFkZGl0aW9uYWwgb3B0aW9ucyB0byBjb25maWd1cmUgbGluayBnZW5lcmF0aW9uLlxuICAgKiBAcGFyYW0ge0NsaWVudERvY3VtZW50fSBbb3B0aW9ucy5yZWxhdGl2ZVRvXSAgQSBkb2N1bWVudCB0byBnZW5lcmF0ZSBhIGxpbmsgcmVsYXRpdmUgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYWJlbF0gICAgICAgICAgICAgICBBIGN1c3RvbSBsYWJlbCB0byB1c2UgaW5zdGVhZCBvZiB0aGUgZG9jdW1lbnQncyBuYW1lLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9jcmVhdGVEb2N1bWVudExpbmsgKGV2ZW50RGF0YSwgeyByZWxhdGl2ZVRvLCBsYWJlbCB9ID0ge30pIHtcbiAgICBpZiAoIWV2ZW50RGF0YS5jaGVjaykge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIHN3aXRjaCAoZXZlbnREYXRhLmNoZWNrLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSzoge1xuICAgICAgICAvLyBAY29jNy5jaGVja1t0eXBlOmNoYXJhYyxuYW1lOlNUUixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU1RSIGNoZWNrKC0xKX1cbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbYmxpbmQsdHlwZTpjaGFyYWN0ZXJpc3RpYyxuYW1lOnN0cixkaWZmaWN1bHR5OjEsbW9kaWZpZXI6MCxpY29uOmZhIGZhLWxpbmtde1N0cmVuZ3RofVxuICAgICAgICAvLyBAY29jNy5jaGVja1tibGluZCx0eXBlOmF0dHJpYnV0ZSxuYW1lOmxjayxkaWZmaWN1bHR5OjEsbW9kaWZpZXI6MCxpY29uOmZhIGZhLWxpbmtde0x1Y2t9XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW2JsaW5kLHR5cGU6c2tpbGwsbmFtZTpMYXcsZGlmZmljdWx0eToxLG1vZGlmaWVyOjAsaWNvbjpmYSBmYS1saW5rXXtMYXd9XG4gICAgICAgIGlmICghZXZlbnREYXRhLmxpbmtUeXBlIHx8ICghZXZlbnREYXRhLm5hbWUgJiYgIWV2ZW50RGF0YS5yb2xscykpIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9JHtldmVudERhdGEucHVzaGluZyA/ICdwdXNoaW5nLCcgOiAnJ310eXBlOiR7ZXZlbnREYXRhLmxpbmtUeXBlfWBcbiAgICAgICAgaWYgKGV2ZW50RGF0YS5uYW1lKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLG5hbWU6JHtldmVudERhdGEubmFtZX1gXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnREYXRhLnJvbGxzKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHJvbGxzOiR7ZXZlbnREYXRhLnJvbGxzfWBcbiAgICAgICAgICBpZiAoZXZlbnREYXRhLmNvbWJhdCkge1xuICAgICAgICAgICAgb3B0aW9ucyArPSAnLGNvbWJhdCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBldmVudERhdGEuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcgJiYgZXZlbnREYXRhLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZXZlbnREYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnREYXRhLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJyAmJiBldmVudERhdGEubW9kaWZpZXIgIT09IDApIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHtldmVudERhdGEubW9kaWZpZXJ9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWNvbikge1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gZXZlbnREYXRhLmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsZXh0ZXJuYWw6JHtwYXJ0c1sxXX0saWNvbjoke3BhcnRzWzJdfWBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGljb246JHtldmVudERhdGEuaWNvbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEucGFjaykge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxwYWNrOiR7ZXZlbnREYXRhLnBhY2t9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWQpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsaWQ6JHtldmVudERhdGEuaWR9YFxuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LmNoZWNrWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1M6IHtcbiAgICAgICAgLy8gQGNvYzcuc2FubG9zc1tzYW5NYXg6MUQ2LHNhbk1pbjoxLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cbiAgICAgICAgaWYgKCFldmVudERhdGEuc2FuTWF4IHx8ICFldmVudERhdGEuc2FuTWluKSB7XG4gICAgICAgICAgcmV0dXJuICcnXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHtldmVudERhdGEuYmxpbmQgPyAnYmxpbmQsJyA6ICcnfXNhbk1heDoke2V2ZW50RGF0YS5zYW5NYXh9LHNhbk1pbjoke2V2ZW50RGF0YS5zYW5NaW59YFxuICAgICAgICBpZiAoZXZlbnREYXRhLnNhblJlYXNvbikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxzYW5SZWFzb246JHtldmVudERhdGEuc2FuUmVhc29ufWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmRpZmZpY3VsdHkgJiYgZXZlbnREYXRhLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZXZlbnREYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEubW9kaWZpZXIgJiYgZXZlbnREYXRhLm1vZGlmaWVyICE9PSAwKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7ZXZlbnREYXRhLm1vZGlmaWVyfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmljb24pIHtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IGV2ZW50RGF0YS5pY29uLm1hdGNoKC9eKGh0dHBzPyk6XFwvXFwvKC4rKSQvKVxuICAgICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGV4dGVybmFsOiR7cGFydHNbMV19LGljb246JHtwYXJ0c1syXX1gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxpY29uOiR7ZXZlbnREYXRhLmljb259YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5zYW5sb3NzWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLklURU06IHtcbiAgICAgICAgLy8gQGNvYzcuaXRlbVt0eXBlOm9wdGlvbmFsLG5hbWU6U2hvdGd1bixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU2hpdGd1biBjaGVjaygtMSl9XG4gICAgICAgIGlmICghZXZlbnREYXRhLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9bmFtZToke2V2ZW50RGF0YS5uYW1lfWBcbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pY29uKSB7XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEuaWNvbi5tYXRjaCgvXihodHRwcz8pOlxcL1xcLyguKykkLylcbiAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxleHRlcm5hbDoke3BhcnRzWzFdfSxpY29uOiR7cGFydHNbMl19YFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsaWNvbjoke2V2ZW50RGF0YS5pY29ufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5wYWNrKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHBhY2s6JHtldmVudERhdGEucGFja31gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pZCkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxpZDoke2V2ZW50RGF0YS5pZH1gXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuaXRlbVske29wdGlvbnN9XWBcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBldmVudERhdGEuZGlzcGxheU5hbWUgPz8gKGxhYmVsID8/ICcnKVxuICAgICAgICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBsaW5rICs9IGB7JHtkaXNwbGF5TmFtZX19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1Q6IHtcbiAgICAgICAgLy8gQGNvYzcuZWZmZWN0W3tcImxhYmVsXCI6XCJLYXBvd1wiLFwiaWNvblwiOlwiaWNvbnMvc3ZnL2F1cmEuc3ZnXCIsXCJjaGFuZ2VzXCI6W3tcImtleVwiOlwic3lzdGVtLnVua25vd24udGVzdFwiLFwibW9kZVwiOjIsXCJ2YWx1ZVwiOlwiNVwifV0sXCJ0aW50XCI6XCIjZTkxNjE2XCIsXCJkdXJhdGlvblwiOntcInNlY29uZHNcIjpudWxsLFwicm91bmRzXCI6NixcInR1cm5zXCI6bnVsbH19XXtLYXBvd2luZ31cbiAgICAgICAgLy8gY29uc3QgZWZmZWN0RGF0YSA9IGZvdW5kcnkudXRpbHMuZGVlcENsb25lKGV2ZW50RGF0YSlcbiAgICAgICAgLy8gaWYgKCF0aGlzLmVmZmVjdElzVGVtcCkgZGVsZXRlIGVmZmVjdERhdGEuZHVyYXRpb25cbiAgICAgICAgLy8gaWYgKGVmZmVjdERhdGEuY2hhbmdlcz8ubGVuZ3RoID09PSAwKSBkZWxldGUgZWZmZWN0RGF0YS5jaGFuZ2VzXG4gICAgICAgIC8vIGlmICghZWZmZWN0RGF0YS5kaXNhYmxlZCkgZGVsZXRlIGVmZmVjdERhdGEuZGlzYWJsZWRcbiAgICAgICAgLy8gaWYgKCFlZmZlY3REYXRhLnRpbnQpIGRlbGV0ZSBlZmZlY3REYXRhLnRpbnRcbiAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEub2JqZWN0Lmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgIGV2ZW50RGF0YS5vYmplY3QuZXh0ZXJuYWwgPSBwYXJ0c1sxXVxuICAgICAgICAgIGV2ZW50RGF0YS5vYmplY3QuaWNvbiA9IHBhcnRzWzJdXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuZWZmZWN0WyR7SlNPTi5zdHJpbmdpZnkoZXZlbnREYXRhLm9iamVjdCl9XWBcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBldmVudERhdGEuZGlzcGxheU5hbWUgPz8gKGxhYmVsID8/ICcnKVxuICAgICAgICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBsaW5rICs9IGB7JHtkaXNwbGF5TmFtZX19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnPydcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25MaW5rQWN0b3JDbGljayAoYWN0b3IsIG9wdGlvbnMsIHsgc2hpZnRLZXkgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBzd2l0Y2ggKG9wdGlvbnMuY2hlY2spIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSzpcbiAgICAgICAgaWYgKFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5jaGFyYWN0ZXJpc3RpY0NoZWNrKFxuICAgICAgICAgICAgb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgc2hpZnRLZXksXG4gICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ3NraWxsJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5za2lsbENoZWNrKG9wdGlvbnMsIHNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ2F0dHJpYnV0ZXMnLCAnYXR0cmlidXRlJywgJ2F0dHJpYicsICdhdHRyaWJzJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5hdHRyaWJ1dGVDaGVjayhvcHRpb25zLm5hbWUsIHNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ2NvbWJpbmVkYWxsJywgJ2NvbWJpbmVkYW55JywgJ29wcG9zZWQnXS5pbmNsdWRlcyhvcHRpb25zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIENvQzdHcm91cE1lc3NhZ2UuY3JlYXRlR3JvdXBNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6IG9wdGlvbnMubGlua1R5cGUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIHJvbGxSZXF1aXNpdGVzOiBvcHRpb25zLnJvbGxzLnNwbGl0KCcmJicpLFxuICAgICAgICAgICAgaXNDb21iYXQ6IEJvb2xlYW4ob3B0aW9ucy5jb21iYXQgPz8gZmFsc2UpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TUzpcbiAgICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZShhY3Rvci5hY3RvcktleSwgb3B0aW9ucywge1xuICAgICAgICAgIGZhc3RGb3J3YXJkOiBzaGlmdEtleVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLklURU06XG4gICAgICAgIHJldHVybiBhY3Rvci53ZWFwb25DaGVjayhvcHRpb25zLCBzaGlmdEtleSlcblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVDpcbiAgICAgICAgYXdhaXQgYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFt7XG4gICAgICAgICAgbGFiZWw6IG9wdGlvbnMub2JqZWN0LmxhYmVsLFxuICAgICAgICAgIGljb246IG9wdGlvbnMub2JqZWN0Lmljb24sXG4gICAgICAgICAgY2hhbmdlczogb3B0aW9ucy5vYmplY3QuY2hhbmdlc1xuICAgICAgICB9XSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdG9DaGF0TWVzc2FnZSAob3B0aW9ucykge1xuICAgIGNvbnN0IG9wdGlvbiA9IHtcbiAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICB9XG4gICAgfVxuICAgIGxldCBtZXNzYWdlXG4gICAgY29uc3QgbGluayA9IChuZXcgQ29DN0xpbmsoKSkuX2NyZWF0ZURvY3VtZW50TGluayhvcHRpb25zKVxuICAgIGlmIChvcHRpb25zLmNoZWNrID09PSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCkge1xuICAgICAgbWVzc2FnZSA9IGA8ZGl2IGNsYXNzPVwiZWZmZWN0LW1lc3NhZ2VcIj4ke2xpbmt9PC9kaXY+YFxuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xuICAgICAgICBjaGVjazogbGlua1xuICAgICAgfSlcbiAgICB9XG4gICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKG51bGwsIG1lc3NhZ2UsIG9wdGlvbilcbiAgfVxuXG4gIHN0YXRpYyB0b1doaXNwZXJNZXNzYWdlIChvcHRpb25zLCBhY3RvcnMpIHtcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgY29uc3Qgb3B0aW9uID0ge1xuICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICAgIH0sXG4gICAgICAgIHdoaXNwZXI6IGFjdG9yLm93bmVycy5tYXAoYSA9PiBhLmlkKVxuICAgICAgfVxuICAgICAgbGV0IG1lc3NhZ2VcbiAgICAgIGNvbnN0IGxpbmsgPSAobmV3IENvQzdMaW5rKCkpLl9jcmVhdGVEb2N1bWVudExpbmsob3B0aW9ucylcbiAgICAgIGlmIChvcHRpb25zLmNoZWNrID09PSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCkge1xuICAgICAgICBtZXNzYWdlID0gYDxkaXYgY2xhc3M9XCJlZmZlY3QtbWVzc2FnZVwiPiR7bGlua308L2Rpdj5gXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlVGFyZ2V0Q2hlY2tSZXF1ZXN0ZWQnLCB7XG4gICAgICAgICAgbmFtZTogYWN0b3IubmFtZSxcbiAgICAgICAgICBjaGVjazogbGlua1xuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKG51bGwsIG1lc3NhZ2UsIG9wdGlvbilcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlciBhIGNoZWNrIHdoZW4gYSBsaW5rIGlzIGNsaWNrZWQuXG4gICAqIERlcGVuZGluZyB0aGUgb3JpZ2luXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRcbiAgICpcbiAgICovXG4gIHN0YXRpYyBhc3luYyBfb25MaW5rQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IENvQzdMaW5rLl9saW5rRnJvbUV2ZW50KGV2ZW50KVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSkge1xuICAgICAgICBDb0M3Q29udGVudExpbmtEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQpIHtcbiAgICAgICAgICBDb0M3TGluay5fb25MaW5rQWN0b3JDbGljayh0b2tlbi5hY3Rvciwgb3B0aW9ucywgeyBzaGlmdEtleTogZXZlbnQuc2hpZnRLZXkgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICAgIGNvbnN0IGFjdG9yID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHNwZWFrZXIpXG4gICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2soYWN0b3IsIG9wdGlvbnMsIHsgc2hpZnRLZXk6IGV2ZW50LnNoaWZ0S2V5IH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgQ29DN0xpbmsudG9DaGF0TWVzc2FnZShvcHRpb25zKVxuICAgICAgcmV0dXJuXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICAgIGxldCBhY3RvciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3RvcihzcGVha2VyKVxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9ycy5maWx0ZXIoYSA9PiAoYS5vd25lcnNoaXBbZ2FtZS51c2VyLmlkXSA/PyBhLm93bmVyc2hpcC5kZWZhdWx0KSA9PT0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUilcbiAgICAgICAgaWYgKGFjdG9ycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBhY3RvciA9IGFjdG9yc1swXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhID0+IChhLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IGEub3duZXJzaGlwLmRlZmF1bHQpID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9CU0VSVkVSKVxuICAgICAgICAgIGlmIChhY3RvcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBhY3RvciA9IGFjdG9yc1swXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKGFjdG9yLCBvcHRpb25zLCB7IHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9Db250cm9sbGVkQWN0b3InKSlcbiAgfVxuXG4gIHNldFZhbHVlIChrZXksIHZhbHVlKSB7XG4gICAgdGhpcy5vYmplY3Rba2V5XSA9IHZhbHVlXG4gIH1cblxuICBnZXQgbGluayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZURvY3VtZW50TGluayh0aGlzLm9iamVjdClcbiAgfVxuXG4gIGdldCBpZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmlkXG4gIH1cblxuICBnZXQgcGFjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnBhY2tcbiAgfVxuXG4gIGdldCBjaGVja1R5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVja1xuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5kaWZmaWN1bHR5XG4gIH1cblxuICBnZXQgaWNvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lmljb25cbiAgfVxuXG4gIGdldCBkaXNwbGF5TmFtZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmRpc3BsYXlOYW1lXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5tb2RpZmllclxuICB9XG5cbiAgZ2V0IGxpbmtUeXBlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QubGlua1R5cGVcbiAgfVxuXG4gIGdldCBzYW5NaW4gKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5NaW5cbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5NYXhcbiAgfVxuXG4gIGdldCBzYW5SZWFzb24gKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5SZWFzb25cbiAgfVxuXG4gIGdldCBlZmZlY3QgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5vYmplY3RcbiAgfVxuXG4gIGdldCBjaGVja05hbWUgKCkge1xuICAgIGlmICh0aGlzLmlzQ2hhcmFjdGVyaXN0aWNDaGVjaykge1xuICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClcbiAgICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3MuZmluZChjID0+IGMua2V5ID09PSB0aGlzLm9iamVjdC5uYW1lIHx8IGMuc2hvcnROYW1lID09PSB0aGlzLm9iamVjdC5uYW1lIHx8IGMubGFiZWwgPT09IHRoaXMub2JqZWN0Lm5hbWUpPy5rZXkgPz8gJydcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lm5hbWVcbiAgfVxuXG4gIGdldCBpc0NoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tcbiAgfVxuXG4gIGdldCBpc0NoYXJhY3RlcmlzdGljQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5DSEFSQUNURVJJU1RJQ1xuICB9XG5cbiAgZ2V0IGlzQXR0cmlidXRlQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5BVFRSSUJVVEVcbiAgfVxuXG4gIGdldCBpc1NraWxsQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTFxuICB9XG5cbiAgZ2V0IGlzSXRlbUNoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTVxuICB9XG5cbiAgZ2V0IGlzU2FuTG9zc0NoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TU1xuICB9XG5cbiAgZ2V0IGlzRWZmZWN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5ibGluZFxuICB9XG5cbiAgZ2V0IGlzUHVzaGluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5wdXNoaW5nXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENPTlNULCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29udGVudExpbmtEaWFsb2cgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgaWQ6ICdsaW5rLWNyZWF0aW9uJyxcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdhY3RpdmUtZWZmZWN0LXNoZWV0J10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyZWF0ZUxpbmsnKSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6IG51bGwsIGRyb3BTZWxlY3RvcjogJy5jb250YWluZXInIH1dLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvbGluay1jcmVhdGlvbi5odG1sJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgd2lkdGg6IDU2MCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcudGFicycsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLmVmZmVjdC1vcHRpb25zJyxcbiAgICAgICAgICBpbml0aWFsOiAnZGV0YWlscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIC8vIFByZXBhcmUgY2hlY2sgdHlwZVxuICAgIHNoZWV0RGF0YS5jaGVja1R5cGUgPSBbXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGVjaycpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TUyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHlDaGVjaycpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JdGVtV2VhcG9uJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0VGRkVDVC5UYWJFZmZlY3RzJylcbiAgICAgIH1cbiAgICBdXG5cbiAgICAvLyBQcmVwYXJlICdjaGVjaycgbGluayB0eXBlXG4gICAgc2hlZXREYXRhLmxpbmtUeXBlID0gW1xuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5DSEFSQUNURVJJU1RJQyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpYycpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5BVFRSSUJVVEUsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsJylcbiAgICAgIH1cbiAgICBdXG5cbiAgICAvLyBQcmVwYXJlICdjaGVjaycgJ2F0dHJpYnV0ZScgdHlwZXNcbiAgICBzaGVldERhdGEuYXR0cmlidXRlVHlwZSA9IFtcbiAgICAgIHtcbiAgICAgICAga2V5OiAnbGNrJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogJ3NhbicsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JylcbiAgICAgIH1cbiAgICBdXG5cbiAgICAvLyBQcmVwYXJlIGVmZmVjdCBtb2RlIHR5cGVzXG4gICAgc2hlZXREYXRhLmVmZmVjdE1vZGVzID0gT2JqZWN0LmVudHJpZXMoQ09OU1QuQUNUSVZFX0VGRkVDVF9NT0RFUykucmVkdWNlKFxuICAgICAgKG9iaiwgZSkgPT4ge1xuICAgICAgICBvYmpbZVsxXV0gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0VGRkVDVC5NT0RFXycgKyBlWzBdKVxuICAgICAgICByZXR1cm4gb2JqXG4gICAgICB9LFxuICAgICAge31cbiAgICApXG5cbiAgICAvLyBQcmVwYXJlICdjaGVjaycgJ2NoYXJhY3RlcmlzdGljJyB0eXBlc1xuICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY1R5cGUgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKVxuXG4gICAgc2hlZXREYXRhLmxpbmsgPSBzaGVldERhdGEub2JqZWN0LmxpbmtcblxuICAgIHNoZWV0RGF0YS5mcm9tR2FtZSA9IHNoZWV0RGF0YS5saW5rLmlzSXRlbUNoZWNrIHx8IHNoZWV0RGF0YS5saW5rLmlzU2tpbGxDaGVja1xuXG4gICAgc2hlZXREYXRhLmZyb21EaXJlY3RvcnkgPSAoc2hlZXREYXRhLm9iamVjdC5oYXNJRCA9PT0gJ2Zyb21EaXJlY3RvcnknKVxuICAgIHNoZWV0RGF0YS5mcm9tQ29tcGVuZGl1bSA9IChzaGVldERhdGEub2JqZWN0Lmhhc0lEID09PSAnZnJvbUNvbXBlbmRpdW0nKVxuXG4gICAgc2hlZXREYXRhLmlzU2V0RnJvbUdhbWUgPSAoc2hlZXREYXRhLmxpbmsuaWQgJiYgKHNoZWV0RGF0YS5mcm9tRGlyZWN0b3J5IHx8IHNoZWV0RGF0YS5mcm9tQ29tcGVuZGl1bSkpXG5cbiAgICBzaGVldERhdGEuZGlmZmljdWx0eUxldmVsID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbFxuXG4gICAgc2hlZXREYXRhLmFjdG9yTmFtZXMgPSBzaGVldERhdGEub2JqZWN0LmFjdG9ycy5tYXAoYSA9PiBhLm5hbWUpLmpvaW4oJywgJylcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdzZWxlY3RbbmFtZT10eXBlXSxzZWxlY3RbbmFtZT1jaGVja10sc2VsZWN0W25hbWU9YXR0cmlidXRlS2V5XSxzZWxlY3RbbmFtZT1jaGFyYWN0ZXJpc3RpY0tleV0saW5wdXRbdHlwZT1jaGVja2JveF0nKVxuICAgICAgLmNoYW5nZSh0aGlzLl9vbkNoYW5nZVN1Ym1pdC5iaW5kKHRoaXMpKVxuXG4gICAgLy8gSGFuZGxpbmcgZWZmZWN0c1xuICAgIGh0bWwuZmluZCgnLmVmZmVjdC1jb250cm9sJykuY2xpY2sodGhpcy5fb25FZmZlY3RDb250cm9sLmJpbmQodGhpcykpXG4gIH1cblxuICBfb25DaGFuZ2VTdWJtaXQgKGV2ZW50KSB7XG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUpIHtcbiAgICAgIGNhc2UgJ2Zyb21Db21wZW5kaXVtJzpcbiAgICAgIGNhc2UgJ2Zyb21EaXJlY3RvcnknOlxuICAgICAgICB0aGlzLm9iamVjdC5oYXNJRCA9IChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUgPT09IHRoaXMub2JqZWN0Lmhhc0lEID8gJycgOiBldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICB9XG5cbiAgX29uRWZmZWN0Q29udHJvbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIHN3aXRjaCAoYnV0dG9uLmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdhZGQnOlxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkRWZmZWN0Q2hhbmdlKClcbiAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgIGJ1dHRvbi5jbG9zZXN0KCcuZWZmZWN0LWNoYW5nZScpLnJlbW92ZSgpXG4gICAgICAgIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9hZGRFZmZlY3RDaGFuZ2UgKCkge1xuICAgIGNvbnN0IGlkeCA9IHRoaXMub2JqZWN0LmxpbmsuZWZmZWN0LmNoYW5nZXMubGVuZ3RoXG4gICAgcmV0dXJuIHRoaXMuc3VibWl0KHtcbiAgICAgIHByZXZlbnRDbG9zZTogdHJ1ZSxcbiAgICAgIHVwZGF0ZURhdGE6IHtcbiAgICAgICAgW2BlZmZlY3QuY2hhbmdlcy4ke2lkeH1gXToge1xuICAgICAgICAgIGtleTogJycsXG4gICAgICAgICAgbW9kZTogQ09OU1QuQUNUSVZFX0VGRkVDVF9NT0RFUy5BREQsXG4gICAgICAgICAgdmFsdWU6ICcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgbGV0IGhhc0VmZmVjdCA9IGZhbHNlXG4gICAgY29uc3QgZWZmZWN0ID0ge1xuICAgICAgZHVyYXRpb246IHt9LFxuICAgICAgY2hhbmdlczogW11cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZm9ybURhdGEpIHtcbiAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgIGNhc2UgJ2NoZWNrTmFtZSc6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsIGZvcm1EYXRhLmNoZWNrTmFtZSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdibGluZCc6XG4gICAgICAgIGNhc2UgJ3B1c2hpbmcnOlxuICAgICAgICBjYXNlICdkaWZmaWN1bHR5JzpcbiAgICAgICAgY2FzZSAnZGlzcGxheU5hbWUnOlxuICAgICAgICBjYXNlICdpY29uJzpcbiAgICAgICAgY2FzZSAnaWQnOlxuICAgICAgICBjYXNlICdtb2RpZmllcic6XG4gICAgICAgIGNhc2UgJ3BhY2snOlxuICAgICAgICBjYXNlICdzYW5NaW4nOlxuICAgICAgICBjYXNlICdzYW5NYXgnOlxuICAgICAgICBjYXNlICdzYW5SZWFzb24nOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoa2V5LCBmb3JtRGF0YVtrZXldKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2hhc01vZGlmaWVycyc6XG4gICAgICAgIGNhc2UgJ2hhc0xhYmVsJzpcbiAgICAgICAgY2FzZSAnaGFzSWNvbic6XG4gICAgICAgICAgdGhpcy5vYmplY3Rba2V5XSA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QubGFiZWwnOlxuICAgICAgICAgIGVmZmVjdC5sYWJlbCA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0Lmljb24nOlxuICAgICAgICAgIGVmZmVjdC5pY29uID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QudGludCc6XG4gICAgICAgICAgZWZmZWN0LnRpbnQgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kaXNhYmxlZCc6XG4gICAgICAgICAgZWZmZWN0LmRpc2FibGVkID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QuZHVyYXRpb24uc2Vjb25kcyc6XG4gICAgICAgICAgZWZmZWN0LmR1cmF0aW9uLnNlY29uZHMgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kdXJhdGlvbi5yb3VuZHMnOlxuICAgICAgICAgIGVmZmVjdC5kdXJhdGlvbi5yb3VuZHMgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kdXJhdGlvbi50dXJucyc6XG4gICAgICAgICAgZWZmZWN0LmR1cmF0aW9uLnR1cm5zID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgY29uc3QgbWF0Y2ggPSBrZXkubWF0Y2goL15lZmZlY3RcXC5jaGFuZ2VzXFwuKFxcZCspXFwua2V5JC8pXG4gICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBlZmZlY3QuY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5OiBmb3JtRGF0YVtrZXldLFxuICAgICAgICAgICAgICBtb2RlOiBmb3JtRGF0YVsnZWZmZWN0LmNoYW5nZXMuJyArIG1hdGNoWzFdICsgJy5tb2RlJ10sXG4gICAgICAgICAgICAgIHZhbHVlOiBmb3JtRGF0YVsnZWZmZWN0LmNoYW5nZXMuJyArIG1hdGNoWzFdICsgJy52YWx1ZSddXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGFzRWZmZWN0KSB7XG4gICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCdvYmplY3QnLCBlZmZlY3QpXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBzd2l0Y2ggKHRhcmdldC5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2NoZWNrJywgdGFyZ2V0LnZhbHVlKVxuICAgICAgICAgIGlmICh0YXJnZXQudmFsdWUgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0spIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2xpbmtUeXBlJywgQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMKVxuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsICcnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdjaGVjayc6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbGlua1R5cGUnLCB0YXJnZXQudmFsdWUpXG4gICAgICAgICAgaWYgKHRhcmdldC52YWx1ZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClbMF0ua2V5KVxuICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnZhbHVlID09PSBDb0M3TGluay5MSU5LX1RZUEUuQVRUUklCVVRFKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgJ2xjaycpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCAnJylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYXR0cmlidXRlS2V5JzpcbiAgICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWNLZXknOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCB0YXJnZXQudmFsdWUpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC50eXBlID09PSAnc3VibWl0Jykge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LnN1Ym1pdHRlci5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgICAgIGNhc2UgJ2NsaXBib2FyZCc6XG4gICAgICAgICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZCh0aGlzLm9iamVjdC5saW5rLmxpbmspXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2NoYXQnOlxuICAgICAgICAgICAgQ29DN0xpbmsudG9DaGF0TWVzc2FnZSh0aGlzLm9iamVjdC5saW5rLm9iamVjdClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnd2hpc3Blci1vd25lcic6XG4gICAgICAgICAgICBDb0M3TGluay50b1doaXNwZXJNZXNzYWdlKHRoaXMub2JqZWN0Lmxpbmsub2JqZWN0LCB0aGlzLm9iamVjdC5hY3RvcnMpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ3doaXNwZXItc2VsZWN0ZWQnOlxuICAgICAgICAgICAgaWYgKCFjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JOb1Rva2Vuc1NlbGVjdGVkJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UodGhpcy5vYmplY3QubGluay5vYmplY3QsIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5maWx0ZXIodCA9PiB0LmFjdG9yLm93bmVycy5sZW5ndGgpLm1hcCh0ID0+IHQuYWN0b3IpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdDb0M3TGluaycpIHtcbiAgICAgIHRoaXMuc2V0TGluayhhd2FpdCBDb0M3TGluay5mcm9tRHJvcERhdGEoZGF0YSkpXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoKGRhdGEudHlwZSA9PT0gJ0ZvbGRlcicgJiYgZGF0YS5kb2N1bWVudE5hbWUgPT09ICdBY3RvcicpIHx8IFsnSXRlbScsICdBY3RvciddLmluY2x1ZGVzKGRhdGEudHlwZSkpIHtcbiAgICAgICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCBkYXRhLmRvY3VtZW50TmFtZSA/PyBkYXRhLnR5cGUpXG4gICAgICAgIGlmIChkYXRhLmRvY3VtZW50TmFtZSA/PyBkYXRhLnR5cGUgPT09ICdBY3RvcicpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5hY3RvcnMgPSBkYXRhTGlzdC5maWx0ZXIoYSA9PiBhLm93bmVycy5sZW5ndGgpXG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhTGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBpZiAoWydza2lsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhkYXRhTGlzdFswXS50eXBlKSkge1xuICAgICAgICAgICAgaWYgKGRhdGFMaXN0WzBdLnBhY2spIHtcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbUNvbXBlbmRpdW0nXG4gICAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ3BhY2snLCBkYXRhTGlzdFswXS5wYWNrKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbURpcmVjdG9yeSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2lkJywgZGF0YUxpc3RbMF0uaWQpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgZGF0YUxpc3RbMF0ubmFtZSlcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0TGluayAobGluaykge1xuICAgIHRoaXMub2JqZWN0LmxpbmsgPSBsaW5rXG4gICAgaWYgKGxpbmsucGFjayAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gJ2Zyb21Db21wZW5kaXVtJ1xuICAgIH0gZWxzZSBpZiAobGluay5pZCAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gJ2Zyb21EaXJlY3RvcnknXG4gICAgfVxuICAgIGlmIChsaW5rLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciB8fCBwYXJzZUludChsaW5rLm1vZGlmaWVyLCAxMCkgIT09IDAgfHwgbGluay5pc1B1c2hpbmcpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc01vZGlmaWVycyA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vYmplY3QuaGFzTW9kaWZpZXJzID0gZmFsc2VcbiAgICB9XG4gICAgaWYgKGxpbmsuZGlzcGxheU5hbWUgIT09ICcnKSB7XG4gICAgICB0aGlzLm9iamVjdC5oYXNMYWJlbCA9IHRydWVcbiAgICB9XG4gICAgaWYgKGxpbmsuaWNvbiAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0ljb24gPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAobGlua0RhdGEgPSB7fSwgb3B0aW9uID0ge30pIHtcbiAgICBjb25zdCBvYmplY3QgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHtcbiAgICAgIGxpbms6IG51bGwsXG4gICAgICBoYXNJRDogJycsXG4gICAgICBoYXNNb2RpZmllcnM6IGZhbHNlLFxuICAgICAgaGFzTGFiZWw6IGZhbHNlLFxuICAgICAgaGFzSWNvbjogZmFsc2UsXG4gICAgICBhY3RvcnM6IFtdXG4gICAgfSwgb3B0aW9uKVxuICAgIGNvbnN0IGRpYWxvZyA9IG5ldyBDb0M3Q29udGVudExpbmtEaWFsb2cob2JqZWN0LCB7fSlcbiAgICBkaWFsb2cuc2V0TGluayhhd2FpdCBDb0M3TGluay5mcm9tRHJvcERhdGEobGlua0RhdGEpKVxuICAgIGRpYWxvZy5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4vY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIFJvbGxEaWFsb2cge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbCA9IHt9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLmhhcmQgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gaWYoIHVuZGVmaW5lZCA9PSBvcHRpb25zLmFza1ZhbHVlKSBvcHRpb25zLmFza1ZhbHVlID0gdHJ1ZTtcbiAgICBpZiAob3B0aW9ucy5uYW1lICYmICFvcHRpb25zLmRpc3BsYXlOYW1lKSBvcHRpb25zLmRpc3BsYXlOYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgY29uc3QgdW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0ID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGFsbG93RmxhdERpY2VNb2RpZmllcjpcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0RGljZU1vZGlmaWVyJykgJiZcbiAgICAgICAgIW9wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIsXG4gICAgICBhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcjpcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKSAmJlxuICAgICAgICAhb3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyLFxuICAgICAgZGlmZmljdWx0eTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCxcbiAgICAgIHVua25vd25EaWZmaWN1bHR5RGVmYXVsdCxcbiAgICAgIGhpZGVEaWZmaWN1bHR5OiBvcHRpb25zLmhpZGVEaWZmaWN1bHR5ID8/IGZhbHNlLFxuICAgICAgb3B0aW9uc1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICghb3B0aW9ucy5mb3JjZWRDYXJkVHlwZSA/PyB0cnVlKVxuICAgICkge1xuICAgICAgZGF0YS5jYXJkVHlwZXMgPSBDb0M3Q2hhdE1lc3NhZ2UuY2FyZFR5cGVzKG9wdGlvbnMpXG4gICAgfVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvYm9udXMuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Cb251c1NlbGVjdGlvbldpbmRvd05hbWVkJywge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNTZWxlY3Rpb25XaW5kb3cnKSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIHJvbGw6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpY2UnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjYm9udXMtcm9sbC1mb3JtJykpXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3JvbGwnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbi8vIGltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJztcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgUm9sbENhcmQge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5yb2xscyA9IFtdXG4gICAgdGhpcy5pbml0aWF0b3IgPSBudWxsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShjYXJkRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IGNhcmQgPSBPYmplY3QuYXNzaWduKG5ldyB0aGlzKCksIGRhdGEpXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNhcmQucm9sbHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAoY2FyZC5yb2xsc1tpbmRleF0/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgICBjYXJkLnJvbGxzW2luZGV4XSA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBjYXJkLnJvbGxzW2luZGV4XSlcbiAgICAgICAgaWYgKGNhcmQucm9sbHNbaW5kZXhdLnJvbGxlZCkge1xuICAgICAgICAgIGNhcmQucm9sbHNbaW5kZXhdLl9odG1sUm9sbCA9IGF3YWl0IGNhcmQucm9sbHNbaW5kZXhdLmdldEh0bWxSb2xsKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBzcGFuID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmIChzcGFuICYmIHNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBzcGFuLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlSWQobWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZClcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IGZsYWcgPSBzcGFuLmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gc3Bhbi5jbG9zZXN0KCcudG9nZ2xlJylcbiAgICBpZiAoIXRvZ2dsZSkge1xuICAgICAgY2FyZC50b2dnbGVGbGFnKGZsYWcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0b2dnbGUucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1zd2l0Y2gnKVxuICAgICAgZm9yIChjb25zdCBiIG9mIGJ1dHRvbnMpIHtcbiAgICAgICAgY2FyZC51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpXG4gICAgICB9XG4gICAgICBjYXJkLnNldEZsYWcoZmxhZylcbiAgICB9XG4gICAgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGlzcGF0Y2ggKGRhdGEpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGxldCBtZXNzYWdlcyA9IHVpLmNoYXQuY29sbGVjdGlvbi5maWx0ZXIobWVzc2FnZSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmRlZmF1bHRDb25maWcudHlwZSA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3R5cGUnKSAmJlxuICAgICAgICAgIG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdzdGF0ZScpICE9PSAncmVzb2x2ZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChbJ2NvbWJpbmVkQ2FyZCddLmluY2x1ZGVzKHRoaXMuZGVmYXVsdENvbmZpZy50eXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdpbml0aWF0b3InKSA9PT0gZGF0YS5yb2xsLmluaXRpYXRvclxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcblxuICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgICAvLyBPbGQgbWVzc2FnZXMgY2FuJ3QgYmUgdXNlZCBpZiBtZXNzYWdlIGlzIG1vcmUgdGhhbiBhIGRheSBvbGQgbWFyayBpdCBhcyByZXNvbHZlZFxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZShtZXNzYWdlc1swXS50aW1lc3RhbXApXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICAgICAgY29uc3QgdGltZURpZmZTZWMgPSAobm93IC0gdGltZXN0YW1wKSAvIDEwMDBcbiAgICAgICAgaWYgKDI0ICogNjAgKiA2MCA8IHRpbWVEaWZmU2VjKSB7XG4gICAgICAgICAgYXdhaXQgbWVzc2FnZXNbMF0uc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG4gICAgICAgICAgbWVzc2FnZXMgPSBbXVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBjYXJkXG4gICAgICBpZiAoIW1lc3NhZ2VzLmxlbmd0aCkgY2FyZCA9IG5ldyB0aGlzKClcbiAgICAgIGVsc2UgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZXNbMF0pXG4gICAgICBpZiAodHlwZW9mIGRhdGEuX3JvbGxNb2RlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjYXJkLl9yb2xsTW9kZSA9IGRhdGEuX3JvbGxNb2RlXG4gICAgICB9XG4gICAgICBhd2FpdCBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICB9IGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJlc29sdmVPbGQgKHVzZXJJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2VzID0gdWkuY2hhdC5jb2xsZWN0aW9uLmZpbHRlcihtZXNzYWdlID0+IHtcbiAgICAgIGlmICh0aGlzLmRlZmF1bHRDb25maWcudHlwZSA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3R5cGUnKSAmJiBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnc3RhdGUnKSAhPT0gJ3Jlc29sdmVkJykge1xuICAgICAgICBpZiAoWydjb21iaW5lZENhcmQnXS5pbmNsdWRlcyh0aGlzLmRlZmF1bHRDb25maWcudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm4gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2luaXRpYXRvcicpID09PSB1c2VySWRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcbiAgICBpZiAobWVzc2FnZXMubGVuZ3RoKSB7XG4gICAgICBhd2FpdCBtZXNzYWdlc1swXS5zZXRGbGFnKCdDb0M3JywgJ3N0YXRlJywgJ3Jlc29sdmVkJylcbiAgICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2VzWzBdKVxuICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy5jb25maWcudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJChodG1sKVxuICAgIGh0bWxDYXJkRWxlbWVudFswXS5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMuY29uZmlnLnRpdGxlKSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudFswXS5vdXRlckhUTUwsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5jb25maWcudHlwZSxcbiAgICAgICAgICBzdGF0ZTogJ2luaXRpYXRlZCcsXG4gICAgICAgICAgaW5pdGlhdG9yOiB0aGlzLmluaXRpYXRvclxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgYXdhaXQgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICBhd2FpdCB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9KVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUm9sbCAoZGF0YSkge1xuICAgIGlmICghZGF0YS5mcm9tR00pIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5yb2xsc1tkYXRhLnJhbmtdLCBkYXRhLnJvbGwpXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbERhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjaGVjayA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhLnJvbGwpXG4gICAgdGhpcy5yb2xscy5wdXNoKGNoZWNrKVxuICAgIGlmICh0aGlzLmNvbmZpZy50eXBlID09PSAnY29tYmluZWRDYXJkJykge1xuICAgICAgdGhpcy5pbml0aWF0b3IgPSBkYXRhLnJvbGwuaW5pdGlhdG9yXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbCAoZGF0YSkge1xuICAgIHRoaXMucm9sbHMucHVzaChkYXRhKVxuICB9XG5cbiAgcmVtb3ZlUm9sbCAocmFuaykge1xuICAgIHRoaXMucm9sbHMuc3BsaWNlKHJhbmssIDEpXG4gIH1cblxuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCBtZXNzYWdlICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2VcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5fbWVzc2FnZUlkKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZSA9IHhcbiAgfVxuXG4gIGdldCBtZXNzYWdlSWQgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiB0aGlzLl9tZXNzYWdlSWRcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2UuaWRcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZUlkICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZUlkID0geFxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGdldCB3aW5uZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLndpbm5lcilcbiAgfVxuXG4gIGdldCB3aW5uZXIgKCkge1xuICAgIGlmICh0aGlzLndpbm5lcnMubGVuZ3RoKSByZXR1cm4gdGhpcy53aW5uZXJzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGxvb3NlcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzLmZpbHRlcihyID0+ICFyLndpbm5lcilcbiAgfVxuXG4gIGdldCBsb29zZXIgKCkge1xuICAgIGlmICh0aGlzLmxvb3NlcnMubGVuZ3RoKSByZXR1cm4gdGhpcy5sb29zZXJzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGhhc1dpbm5lciAoKSB7XG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzS2VlcGVyICgpIHtcbiAgICByZXR1cm4gZ2FtZS51c2VyLmlzR01cbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMuY29uZmlnLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCh0aGlzLmNvbmZpZy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEF1ZGlvSGVscGVyLCBDT05GSUcsIGZvdW5kcnksIGdhbWUgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgUm9sbENhcmQgfSBmcm9tICcuL3JvbGwtY2FyZC5qcydcblxuZXhwb3J0IGNsYXNzIENvbWJpbmVkQ2hlY2tDYXJkIGV4dGVuZHMgUm9sbENhcmQge1xuICBzdGF0aWMgYXN5bmMgYmluZExpc3Rlcm5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIC50b2dnbGUtc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgLy8gaHRtbC5maW5kKCcucm9sbC1jYXJkIGEnKS5jbGljayhhc3luYyAoZXZlbnQpID0+IENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrKCBldmVudCkpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgYScsXG4gICAgICBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgYnV0dG9uJyxcbiAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRDb25maWcsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuaHRtbCcsXG4gICAgICB0eXBlOiAnY29tYmluZWRDYXJkJyxcbiAgICAgIHRpdGxlOiAnQ29DNy5Db21iaW5lZFJvbGxDYXJkJ1xuICAgIH0pXG4gIH1cblxuICBnZXQgY29uZmlnICgpIHtcbiAgICByZXR1cm4gQ29tYmluZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZ1xuICB9XG5cbiAgZ2V0IHN1Y2Nlc3NDb3VudCAoKSB7XG4gICAgaWYgKHRoaXMucm9sbGVkKSB7XG4gICAgICBsZXQgY291bnQgPSAwXG4gICAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgICBpZiAoci5wYXNzZWQpIGNvdW50ICs9IDFcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb3VudFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbWFpbkFjdG9yS2V5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb2xsc1swXT8uYWN0b3I/LmFjdG9yS2V5IHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHN1Y2Nlc3MgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5zdWNjZXNzQ291bnQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuYW55KSB7XG4gICAgICBpZiAodGhpcy5zdWNjZXNzQ291bnQgPiAwKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmICh0aGlzLmFsbCkge1xuICAgICAgaWYgKHRoaXMuc3VjY2Vzc0NvdW50ID09PSB0aGlzLnJvbGxzLmxlbmd0aCkgcmV0dXJuIHRydWVcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZmFpbHVyZSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnN1Y2Nlc3MgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuICF0aGlzLnN1Y2Nlc3NcbiAgfVxuXG4gIGdldCBjaGVja0dNSW5pdGlhdG9yICgpIHtcbiAgICByZXR1cm4gZ2FtZS51c2Vycy5nZXQodGhpcy5pbml0aWF0b3IpPy5pc0dNXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbCAoKSB7XG4gICAgaWYgKCF0aGlzLnJvbGxlZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oe1xuICAgICAgcm9sbDogdGhpcy5fcm9sbFtjaGVjay5kaWNlTW9kaWZpZXIgfHwgMF0sXG4gICAgICBzaWxlbnQ6IHRydWVcbiAgICB9KVxuICAgIHJldHVybiBhd2FpdCBjaGVjay5nZXRIdG1sUm9sbCh7IGhpZGVTdWNjZXNzOiB0cnVlIH0pXG4gIH1cblxuICBwcm9jZXNzIChkYXRhKSB7XG4gICAgc3dpdGNoIChkYXRhLmFjdGlvbikge1xuICAgICAgY2FzZSAnbmV3JzpcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyb2xsJzpcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd1cGRhdGVSb2xsJzoge1xuICAgICAgICB0aGlzLnVwZGF0ZVJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYXNzaWduUm9sbCc6IHtcbiAgICAgICAgdGhpcy5hc3NpZ25Sb2xsKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICBlbHNlIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgfVxuXG4gIGFzeW5jIGFzc2lnblJvbGwgKGRhdGEpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuX3JvbGwgPSBkYXRhLnJvbGxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpLmFjdG9yLXJvbGwnKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gYS5jbG9zZXN0KCdkaXYucm9sbC1jYXJkJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgQ29tYmluZWRDaGVja0NhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCByYW5rID0gTnVtYmVyKGxpPy5kYXRhc2V0Py5yYW5rKVxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3JlbW92ZS1yb2xsJzoge1xuICAgICAgICBjYXJkLnJlbW92ZVJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Nsb3NlLWNhcmQnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2FyZCc6IHtcbiAgICAgICAgY29uc3QgcG9vbCA9IHt9XG4gICAgICAgIGZvciAoY29uc3QgZGljZSBvZiBjYXJkLnJvbGxzKSB7XG4gICAgICAgICAgY29uc3QgZGljZU1vZGlmaWVyID0gcGFyc2VJbnQoZGljZS5kaWNlTW9kaWZpZXIsIDEwKVxuICAgICAgICAgIGlmICghaXNOYU4oZGljZU1vZGlmaWVyKSkge1xuICAgICAgICAgICAgcG9vbFtkaWNlTW9kaWZpZXJdID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0RpY2UuY29tYmluZWRSb2xsKHsgcG9vbCB9KVxuICAgICAgICByb2xsLmluaXRpYXRvciA9IGdhbWUudXNlci5pZFxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgYWN0aW9uOiAnYXNzaWduUm9sbCcsXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTSxcbiAgICAgICAgICByb2xsXG4gICAgICAgIH1cbiAgICAgICAgQXVkaW9IZWxwZXIucGxheSh7IHNyYzogQ09ORklHLnNvdW5kcy5kaWNlIH0sIHRydWUpXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgdXBkYXRlOiBmYWxzZSxcbiAgICAgICAgICBkYXRhOiBhLmRhdGFzZXQsXG4gICAgICAgICAgY2xhc3NlczogYS5jbGFzc0xpc3QsXG4gICAgICAgICAgdGFyZ2V0OiBhXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKGNhcmQucm9sbHNbcmFua10sIGFjdGlvbiwgb3B0aW9ucylcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcbiAgICAgICAgICByYW5rLFxuICAgICAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR00sXG4gICAgICAgICAgcm9sbDoge1xuICAgICAgICAgICAgaW5pdGlhdG9yOiBnYW1lLnVzZXIuaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgZGF0YS5yb2xsID0gY2FyZC5yb2xsc1tyYW5rXS5KU09OUm9sbERhdGFcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29tcHV0ZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsKSByZXR1cm5cblxuICAgIHRoaXMucm9sbHMgPSB0aGlzLnJvbGxzLmZpbHRlcihyb2xsID0+IHtcbiAgICAgIHJldHVybiB0eXBlb2Ygcm9sbC5hY3Rvci5zeXN0ZW0gIT09ICd1bmRlZmluZWQnIC8vIHJlbW92ZSBhbnkgYWN0b3JzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0XG4gICAgfSlcblxuICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICBpZiAoIXIucm9sbGVkKSB7XG4gICAgICAgIHIubW9kaWZpZXIgPSByLmRpY2VNb2RpZmllciB8fCAwXG4gICAgICAgIHIuZGlmZmljdWx0eSA9IHIuZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgci5mbGF0RGljZU1vZGlmaWVyID0gci5mbGF0RGljZU1vZGlmaWVyIHx8IDBcbiAgICAgICAgci5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSByLmZsYXRUaHJlc2hvbGRNb2RpZmllciB8fCAwXG4gICAgICAgIGF3YWl0IHIuX3BlcmZvcm0oeyByb2xsOiB0aGlzLl9yb2xsW3IubW9kaWZpZXJdLCBzaWxlbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5yb2xsc1tpXS5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5yb2xsc1tpXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW2ldLmdldEh0bWxSb2xsKHtcbiAgICAgICAgICBoaWRlRGljZVJlc3VsdDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5nZXRIdG1sUm9sbCgpXG4gIH1cblxuICBjbG9zZUNhcmQgKCkge1xuICAgIHRoaXMuY2xvc2VkID0gdHJ1ZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIEZvcm1EYXRhRXh0ZW5kZWQsIGZvdW5kcnksIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgSW50ZXJhY3RpdmVDaGF0Q2FyZCB7XG4gIGNvbnN0cnVjdG9yIChvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9uc1xuICB9XG5cbiAgZ2V0IG9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdE9wdGlvbnMsIHRoaXMuX29wdGlvbnMpXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudGVtcGxhdGVcbiAgfVxuXG4gIGdldCBjc3NDbGFzc2VzICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsYXNzZXNcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAob3B0aW9ubmFsQ2hhdERhdGEgPSB7fSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQoaHRtbClbMF1cbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgIGh0bWxDYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NlcylcblxuICAgIGNvbnN0IGNoYXREYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcbiAgICAgIHtcbiAgICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSh0aGlzLm9wdGlvbnMudGl0bGUpLFxuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9LFxuICAgICAgb3B0aW9ubmFsQ2hhdERhdGFcbiAgICApXG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAob3B0aW9ucy5jb21wdXRlKSB0aGlzLmNvbXB1dGUoKVxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIHRoaXMudG9NZXNzYWdlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG4gICAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgICAvLyBBdHRhY2ggdGhlIHNhbkNoZWNrQ2FyZCBvYmplY3QgdG8gdGhlIG1lc3NhZ2UuXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzZXMpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9KVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuaW50ZXJhY3RpdmUtY2FyZCAuaWMtcmFkaW8tc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgLmljLXN3aXRjaCcsIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgLnN1Ym1pdCcsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignZm9jdXNvdXQnLCAnaW5wdXQnLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5pbnRlcmFjdGl2ZS1jYXJkIGJ1dHRvbicsIHRoaXMuX29uQnV0dG9uLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbigna2V5ZG93bicsICdmb3JtJywgdGhpcy5fb25LZXkuYmluZCh0aGlzKSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVuZXJzIChodG1sKSB7XG4gICAgY29uc3QgaHRtbE1lc3NhZ2VFbGVtZW50ID0gaHRtbFswXVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9IGh0bWxNZXNzYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1jYXJkJylcbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudCkgcmV0dXJuXG4gICAgaWYgKCFodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3MpIHJldHVyblxuICAgIGlmIChcbiAgICAgICFPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhnYW1lLkNvQzcuY2FyZHMpLmluY2x1ZGVzKFxuICAgICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3NcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjYXJkID0gYXdhaXQgSW50ZXJhY3RpdmVDaGF0Q2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGh0bWxDYXJkRWxlbWVudClcbiAgICBjb25zdCB0eXBlZENhcmQgPSBPYmplY3QuYXNzaWduKFxuICAgICAgbmV3IGdhbWUuQ29DNy5jYXJkc1todG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3NdKCksXG4gICAgICBjYXJkXG4gICAgKVxuICAgIHR5cGVkQ2FyZC5hc3NpZ25PYmplY3QoKVxuICAgIHR5cGVkQ2FyZC5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHJlYXNzaWduIG9iamVjdCB0eXBlXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3NpZ25PYmplY3QgKCkge31cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCB3aWxsIGNoZWNrIGZvciBhbiBhY3Rpb24gKGRhdGEtYWN0aW9uKVxuICAgKiBpZiBhIG1ldGhvZCB3aXRoIHRoYXQgbmFtZSBleGlzdCBpdCB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICovXG4gIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgLy8gYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScgLy9Bdm9pZCBtdWx0aXBsZSBwdXNoXG4gICAgY29uc3QgYWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuYWN0aW9uXG4gICAgaWYgKHRoaXNbYWN0aW9uXSkgdGhpc1thY3Rpb25dKHsgZXZlbnQsIHVwZGF0ZTogdHJ1ZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRcbiAgICogQHJldHVybnMgZmFsc2UgaWYga2V5IGlzIGVudGVyIHRvIGF2b2lkIGdsb2JhbCBzdWJtaXNzaW9uXG4gICAqL1xuICBfb25LZXkgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gICAgcmV0dXJuIGV2ZW50LmtleSAhPT0gJ0VudGVyJ1xuICB9XG5cbiAgX29uU3VibWl0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbnRlcmFjdGl2ZS1jYXJkJylcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IHVwZGF0ZXMgPSB0aGlzLl91cGRhdGUoY2FyZClcbiAgICBpZiAodXBkYXRlcykgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBfdXBkYXRlIChjYXJkKSB7XG4gICAgY29uc3QgZm9ybXMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKVxuICAgIGxldCB1cGRhdGVzID0gZmFsc2VcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBmb3JtID0gZm9ybXNbaV1cbiAgICAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQoZm9ybSlcbiAgICAgIGxldCBkYXRhID0gZmQub2JqZWN0XG4gICAgICBkYXRhID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KHRoaXMsIGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGRhdGEpKVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWVcbiAgICAgICAgdXBkYXRlcyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZXNcbiAgfVxuXG4gIGdldCBtZXNzYWdlICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2VcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5fbWVzc2FnZUlkKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZSA9IHhcbiAgfVxuXG4gIGdldCBtZXNzYWdlSWQgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiB0aGlzLl9tZXNzYWdlSWRcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2UuaWRcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZUlkICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZUlkID0geFxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsYXNzZXM6IFsnaW50ZXJhY3RpdmUtY2FyZCddLFxuICAgICAgZXhjbHVkZTogWydfYWN0b3InLCAnX3NraWxsJywgJ19pdGVtJywgJ19tZXNzYWdlJywgJ19odG1sUm9sbCddLFxuICAgICAgZXhjbHVkZVN0YXJ0V2l0aDogJ19fJ1xuICAgIH1cbiAgfVxuXG4gIGdldCBkYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmRhdGFTdHJpbmcpXG4gIH1cblxuICBnZXQgZGF0YVN0cmluZyAoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZSlcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2UgKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGNhcmQpIHtcbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgaWYgKCFjYXJkRGF0YS5tZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICAgIGNhcmREYXRhLm1lc3NhZ2VJZCA9IG1lc3NhZ2U/LmRhdGFzZXQ/Lm1lc3NhZ2VJZFxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShjYXJkRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IGNhcmQgPSBPYmplY3QuYXNzaWduKG5ldyB0aGlzKCksIGRhdGEpXG4gICAgYXdhaXQgY2FyZC5hc3NpZ25PYmplY3QoKVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgc2V0RmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIWZsYWdOYW1lICYmICEoJC50eXBlKGZsYWdOYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICB0aGlzW2ZsYWdOYW1lXSA9IHRydWVcbiAgfVxuXG4gIHVuc2V0RmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIWZsYWdOYW1lICYmICEoJC50eXBlKGZsYWdOYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICB0aGlzW2ZsYWdOYW1lXSA9IGZhbHNlXG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnTmFtZSkge1xuICAgIHRoaXNbZmxhZ05hbWVdID0gIXRoaXNbZmxhZ05hbWVdXG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICgnYWN0aW9uJyBpbiB0YXJnZXQuZGF0YXNldCkgcmV0dXJuIHRoaXMuX29uQnV0dG9uKGV2ZW50KVxuICAgIGlmIChcbiAgICAgIHRhcmdldCAmJlxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZ20tc2VsZWN0LW9ubHknKSAmJlxuICAgICAgIWdhbWUudXNlci5pc0dNXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgZmxhZyA9IHRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBpZiAoIWZsYWcpIHJldHVyblxuICAgIGNvbnN0IHRvZ2dsZSA9IHRhcmdldC5jbG9zZXN0KCcuaWMtcmFkaW8nKVxuICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICB0aGlzLnRvZ2dsZUZsYWcoZmxhZylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYnV0dG9ucyA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yQWxsKCcuaWMtcmFkaW8tc3dpdGNoJylcbiAgICAgIGZvciAoY29uc3QgYiBvZiBidXR0b25zKSB7XG4gICAgICAgIHRoaXMudW5zZXRGbGFnKGIuZGF0YXNldC5mbGFnKVxuICAgICAgfVxuICAgICAgdGhpcy5zZXRGbGFnKGZsYWcpXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdCgnLmludGVyYWN0aXZlLWNhcmQnKVxuICAgIGlmIChjYXJkKSB0aGlzLl91cGRhdGUoY2FyZClcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKCF0aGlzLnJvbGxNb2RlKSByZXR1cm4gbnVsbFxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3JLZXkpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKCF0aGlzLml0ZW1JZCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgd2VhcG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtXG4gIH1cblxuICBnZXQgdGFyZ2V0ZWRUb2tlbnMgKCkge1xuICAgIHJldHVybiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRUb2tlbikgcmV0dXJuIHRoaXMudGFyZ2V0VG9rZW5cbiAgICByZXR1cm4gdGhpcy50YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IGlzVGFyZ2V0T3duZXIgKCkge1xuICAgIHJldHVybiB0aGlzLnRhcmdldC5pc093bmVyXG4gIH1cblxuICBnZXQgaXNLZWVwZXIgKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxuICB9XG5cbiAgLyoqXG4gICAqIElmIGEgdGFyZ2V0S2V5IHdhcyBwcm92aWRlZCB0cnkgdG8gZmluZCBhIHRva2VuIHdpdGggdGhhdCBrZXkgYW5kIHVzZSBpdC5cbiAgICogSWYgbm90IHRhcmdldEtleSBwcm92aWRlZCByZXR1cm4gdGhlIGZpcnN0IHRhcmdldC5cbiAgICovXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgaWYgKHRoaXMuX3RhcmdldEtleSkge1xuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuX3RhcmdldEtleSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gdGhpcy50YXJnZXRlZFRva2Vucy5wb3AoKVxuICAgICAgICBpZiAodGhpcy5fdGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgICB0aGlzLl90YXJnZXRLZXkgPSBgJHt0aGlzLl90YXJnZXRUb2tlbi5zY2VuZS5pZH0uJHt0aGlzLl90YXJnZXRUb2tlbi5pZH1gXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldFRva2VuXG4gIH1cblxuICBnZXQgdGFyZ2V0QWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0QWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSB7XG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID1cbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmFjdG9yIHx8XG4gICAgICAgICAgdGhpcy50YXJnZXRUb2tlbi5kYXRhLmFjdG9yIHx8XG4gICAgICAgICAgdGhpcy50YXJnZXRUb2tlbi5kYXRhLmRvY3VtZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl90YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuX3RhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IHRhcmdldEtleSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLl90YXJnZXRLZXlcbiAgfVxuXG4gIGdldCBoYXNUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHNldCB0YXJnZXRLZXkgKHgpIHtcbiAgICB0aGlzLl90YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgdGFyZ2V0SW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLnRhcmdldEtleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHRhcmdldE5hbWUgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXQpIHJldHVybiAnZHVtbXknXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm5hbWVcbiAgfVxuXG4gIGdldCBhY3RvckltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgRGlhbG9nLCBmb3VuZHJ5LCBnYW1lLCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4uL2ludGVyYWN0aXZlLWNoYXQtY2FyZC5qcydcbmltcG9ydCB7IGNyZWF0ZUlubGluZVJvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgRGFtYWdlQ2FyZCBleHRlbmRzIEludGVyYWN0aXZlQ2hhdENhcmQge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIDVlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgZXhjbHVkZTogW1xuICAgICAgICAnX3RhcmdldFRva2VuJyxcbiAgICAgICAgJ190YXJnZXRBY3RvcicsXG4gICAgICAgICdfaHRtbFJvbGwnLFxuICAgICAgICAnX2h0bWxJbmxpbmVSb2xsJ1xuICAgICAgXS5jb25jYXQoc3VwZXIuZGVmYXVsdE9wdGlvbnMuZXhjbHVkZSksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9kYW1hZ2UuaHRtbCdcbiAgICB9KVxuICB9XG5cbiAgLy8gYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgLy8gICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAvLyB9XG5cbiAgYXN5bmMgYXNzaWduT2JqZWN0ICgpIHtcbiAgICBpZiAodGhpcy5kYW1hZ2VSb2xsICYmIHRoaXMuZGFtYWdlUm9sbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgdGhpcy5kYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YSh0aGlzLmRhbWFnZVJvbGwpXG4gICAgfVxuICB9XG5cbiAgX29uQnV0dG9uIChldmVudCkge1xuICAgIHN1cGVyLl9vbkJ1dHRvbihldmVudClcbiAgfVxuXG4gIGdldCBjcml0aWNhbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jcml0aWNhbFxuICB9XG5cbiAgc2V0IGNyaXRpY2FsICh4KSB7XG4gICAgdGhpcy5fb3B0aW9ucy5jcml0aWNhbCA9IHhcbiAgfVxuXG4gIGdldCBpbXBhbGUgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5faW1wYWxlID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMud2VhcG9uLmltcGFsZVxuICAgIHJldHVybiB0aGlzLl9pbXBhbGVcbiAgfVxuXG4gIHNldCBpbXBhbGUgKHgpIHtcbiAgICB0aGlzLl9pbXBhbGUgPSB4XG4gIH1cblxuICBnZXQgaXNEYW1hZ2VGb3JtdWxhICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGFtYWdlRm9ybXVsYSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuZGFtYWdlRm9ybXVsYSkpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gUm9sbC52YWxpZGF0ZSh0aGlzLmRhbWFnZUZvcm11bGEpXG4gIH1cblxuICBnZXQgaXNEYW1hZ2VOdW1iZXIgKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGFtYWdlRm9ybXVsYSkpXG4gIH1cblxuICBnZXQgaXNBcm1vckZvcnVsYSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmFybW9yICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5hcm1vcikpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gUm9sbC52YWxpZGF0ZSh0aGlzLmFybW9yKVxuICB9XG5cbiAgZ2V0IHRvdGFsRGFtYWdlU3RyaW5nICgpIHtcbiAgICBsZXQgZGFtYWdlID0gTnVtYmVyKFxuICAgICAgdGhpcy5pc0RhbWFnZU51bWJlciA/IHRoaXMuZGFtYWdlRm9ybXVsYSA6IHRoaXMucm9sbC50b3RhbFxuICAgIClcbiAgICBpZiAoIXRoaXMuaWdub3JlQXJtb3IpIHtcbiAgICAgIGlmIChpc05hTihOdW1iZXIodGhpcy5hcm1vcikpIHx8IE51bWJlcih0aGlzLmFybW9yKSA+IDApIHtcbiAgICAgICAgZGFtYWdlID0gZGFtYWdlIC0gTnVtYmVyKHRoaXMuYXJtb3IpXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkpIHtcbiAgICAgICAgaWYgKGRhbWFnZSA8PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Bcm1vckFic29yYnNEYW1hZ2UnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYW1hZ2VcbiAgfVxuXG4gIGdldCBub0RhbWFnZSAoKSB7XG4gICAgaWYgKHRoaXMucm9sbGVkKSB7XG4gICAgICBjb25zdCBkYW1hZ2UgPSB0aGlzLmlzRGFtYWdlTnVtYmVyID8gdGhpcy5kYW1hZ2VGb3JtdWxhIDogdGhpcy5yb2xsLnRvdGFsXG4gICAgICBpZiAoIXRoaXMuaWdub3JlQXJtb3IpIHtcbiAgICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5hcm1vcikpKSB7XG4gICAgICAgICAgcmV0dXJuICEhKGRhbWFnZSAtIE51bWJlcih0aGlzLmFybW9yKSA8PSAwKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICEhKGRhbWFnZSA8PSAwKVxuICAgICAgfVxuICAgIH0gZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmZhc3RGb3J3YXJkICYmICF0aGlzLnJvbGwgJiYgIXRoaXMuaXNEYW1hZ2VOdW1iZXIpIHtcbiAgICAgIGF3YWl0IHRoaXMucm9sbERhbWFnZSh7IHVwZGF0ZTogZmFsc2UgfSlcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5pc0RhbWFnZU51bWJlciB8fFxuICAgICAgKHRoaXMucm9sbCAmJiB0aGlzLnJvbGwudG90YWwgIT0gbnVsbCkgfHxcbiAgICAgIHRoaXMuaGFyZHJvbGxlZFxuICAgICkge1xuICAgICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5mYXN0Rm9yd2FyZCAmJiAhdGhpcy5kYW1hZ2VJbmZsaWN0ZWQgJiYgIXRoaXMubm9EYW1hZ2UpIHtcbiAgICAgIGF3YWl0IHRoaXMuZGVhbERhbWFnZSh7IHVwZGF0ZTogZmFsc2UgfSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yb2xsZWQgJiYgdGhpcy5yb2xsKSB7XG4gICAgICBpZiAodGhpcy5yb2xsLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICAgIHRoaXMucm9sbCA9IFJvbGwuZnJvbURhdGEodGhpcy5yb2xsKVxuICAgICAgfVxuICAgICAgY29uc3QgYSA9IGNyZWF0ZUlubGluZVJvbGwodGhpcy5yb2xsKVxuICAgICAgdGhpcy5faHRtbElubGluZVJvbGwgPSBhLm91dGVySFRNTFxuICAgICAgdGhpcy5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGwucmVuZGVyKClcbiAgICB9XG4gICAgYXdhaXQgc3VwZXIudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgcm9sbERhbWFnZSAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICB0aGlzLnJvbGwgPSBhd2FpdCBuZXcgUm9sbCh0aGlzLmRhbWFnZUZvcm11bGEgfHwgJzAnKS5ldmFsdWF0ZSh7XG4gICAgICBhc3luYzogdHJ1ZVxuICAgIH0pXG4gICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5yb2xsKVxuICAgIHRoaXMuaGFyZHJvbGxlZCA9IHRydWVcbiAgICBvcHRpb25zLnVwZGF0ZSA9XG4gICAgICB0eXBlb2Ygb3B0aW9ucy51cGRhdGUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMudXBkYXRlXG4gICAgaWYgKG9wdGlvbnMudXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxBcm1vciAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBjb25zdCByb2xsID0gYXdhaXQgbmV3IFJvbGwodGhpcy5hcm1vcikuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgIHRoaXMuYXJtb3IgPSByb2xsLnRvdGFsXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlVG9TZWxlY3RlZFRhcmdldCAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBpZiAodGhpcy5pc0FybW9yRm9ydWxhKSBhd2FpdCB0aGlzLnJvbGxBcm1vcigpXG4gICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLnRvdGFsRGFtYWdlU3RyaW5nKSkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yRXZhbHVhdGluZ0RhbWFnZScpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldHMgPSBbXVxuICAgIGNvbnN0IHRhcmdldE5hbWUgPSBbXVxuICAgIGNvbnN0IHNlbGVjdGVkUGxheWVycyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodG9rZW4gPT4ge1xuICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgfSlcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2VsZWN0ZWRQbGF5ZXJzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMuYWN0b3IuaWQgPT09IHNlbGVjdGVkUGxheWVyc1tpbmRleF0uaWQpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIHRhcmdldE5hbWUucHVzaChzZWxlY3RlZFBsYXllcnNbaW5kZXhdLm5hbWUpXG4gICAgICB0YXJnZXRzLnB1c2goc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XSlcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHRpdGxlOiAnICcsXG4gICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRlYWxEYW1hZ2UnLCB7XG4gICAgICAgIGRhbWFnZTogdGhpcy50b3RhbERhbWFnZVN0cmluZyxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXROYW1lXG4gICAgICB9KSxcbiAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgb25lOiB7XG4gICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlybURhbWFnZSh0YXJnZXRzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdHdvOiB7XG4gICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge31cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRlZmF1bHQ6ICd0d28nXG4gICAgfVxuICAgIGlmICh0YXJnZXROYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29uZmlybURhbWFnZSAodGFyZ2V0cykge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0YXJnZXRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgYXdhaXQgdGFyZ2V0c1tpbmRleF0uZGVhbERhbWFnZShOdW1iZXIodGhpcy50b3RhbERhbWFnZVN0cmluZyksIHtcbiAgICAgICAgaWdub3JlQXJtb3I6IGZhbHNlXG4gICAgICB9KVxuICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EYW1hZ2VEZWFsVG8nLCB7XG4gICAgICAgICAgbmFtZTogdGFyZ2V0c1tpbmRleF0ubmFtZSxcbiAgICAgICAgICBkYW1hZ2U6IHRoaXMudG90YWxEYW1hZ2VTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZSAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBpZiAodGhpcy5pc0FybW9yRm9ydWxhKSBhd2FpdCB0aGlzLnJvbGxBcm1vcigpXG4gICAgbGV0IGRhbWFnZSA9IHRoaXMudG90YWxEYW1hZ2VTdHJpbmdcbiAgICBpZiAoaXNOYU4oTnVtYmVyKGRhbWFnZSkpKSB7XG4gICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybW9yQWJzb3Jic0RhbWFnZScpID09PSBkYW1hZ2UpIHtcbiAgICAgICAgZGFtYWdlID0gMFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRXJyb3IgZXZhbHVhdGluZyBkYW1hZ2UnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMudGFyZ2V0QWN0b3IpIHtcbiAgICAgIGF3YWl0IHRoaXMudGFyZ2V0QWN0b3IuZGVhbERhbWFnZShOdW1iZXIoZGFtYWdlKSwge1xuICAgICAgICBpZ25vcmVBcm1vcjogdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5kYW1hZ2VJbmZsaWN0ZWQgPSB0cnVlXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBnZXQgcmFuZ2UgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucmFuZ2UgfHwgJ25vcm1hbCdcbiAgfVxuXG4gIHNldCByYW5nZSAoeCkge1xuICAgIGNvbnN0IHJhbmdlcyA9IFsnbm9ybWFsJywgJ2xvbmcnLCAnZXh0cmVtZSddXG4gICAgaWYgKCFyYW5nZXMuaW5jbHVlcyh4LnRvTG93ZXJDYXNlKCkpKSByZXR1cm5cbiAgICB0aGlzLl9vcHRpb25zLnJhbmdlID0geFxuICB9XG5cbiAgZ2V0IGRhbWFnZUZvcm11bGEgKCkge1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5yYW5nZVxuICAgIGxldCBmb3JtdWxhID0gdGhpcy53ZWFwb24/LnN5c3RlbT8ucmFuZ2VbcmFuZ2VdPy5kYW1hZ2VcbiAgICBsZXQgZGIgPSB0aGlzLmFjdG9yLmRiXG4gICAgZGIgPSAoKGRiID8/ICcnKS50b1N0cmluZygpLnRyaW0oKSA9PT0gJycgPyAwIDogZGIpLnRvU3RyaW5nKCkudHJpbSgpXG5cbiAgICBpZiAoIWRiLnN0YXJ0c1dpdGgoJy0nKSkgZGIgPSAnKycgKyBkYlxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hZGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiXG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmFoZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgQ29DN1V0aWxpdGllcy5oYWxmREIodGhpcy5hY3Rvci5kYilcblxuICAgIGlmIChmb3JtdWxhKSB7XG4gICAgICBjb25zdCBtYXhEYW1hZ2UgPSBuZXcgUm9sbChmb3JtdWxhKVsoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/ICdldmFsdWF0ZScgOiAnZXZhbHVhdGVTeW5jJykvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqL10oeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgbGV0IHJvbGxTdHJpbmdcbiAgICAgIGlmICh0aGlzLmNyaXRpY2FsKSB7XG4gICAgICAgIGlmICh0aGlzLmltcGFsZSkge1xuICAgICAgICAgIHJvbGxTdHJpbmcgPSB0aGlzLndlYXBvbj8uc3lzdGVtPy5yYW5nZVtyYW5nZV0/LmRhbWFnZSArICcrJyArIG1heERhbWFnZVxuICAgICAgICAgIHJldHVybiByb2xsU3RyaW5nXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG1heERhbWFnZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZm9ybXVsYVxuICAgICAgfVxuICAgIH0gZWxzZSByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgYXJtb3IgKCkge1xuICAgIGlmICh1bmRlZmluZWQgIT09IHRoaXMuX2FybW9yICYmIHRoaXMuX2FybW9yICE9PSAnJykgcmV0dXJuIHRoaXMuX2FybW9yXG4gICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy50YXJnZXRBY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZVxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgc2V0IGFybW9yICh4KSB7XG4gICAgdGhpcy5fYXJtb3IgPSB4XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZm91bmRyeSwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9kYW1hZ2UuanMnXG5pbXBvcnQgeyBSb2xsQ2FyZCB9IGZyb20gJy4vcm9sbC1jYXJkLmpzJ1xuXG5leHBvcnQgY2xhc3MgT3Bwb3NlZENoZWNrQ2FyZCBleHRlbmRzIFJvbGxDYXJkIHtcbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZXJuZXJzIChodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIC50b2dnbGUtc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgLy8gc3VwZXIuYmluZExpc3Rlcm5lcnMoIGh0bWwpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQub3Bwb3NlZCBhJyxcbiAgICAgIE9wcG9zZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgYnV0dG9uJyxcbiAgICAgIE9wcG9zZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdENvbmZpZywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmh0bWwnLFxuICAgICAgdHlwZTogJ29wcG9zZWRDYXJkJ1xuICAgIH0pXG4gIH1cblxuICBnZXQgY29uZmlnICgpIHtcbiAgICByZXR1cm4gT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnXG4gIH1cblxuICBnZXQgYXR0YWNrZXJSb2xsICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgYXR0YWNrZXIgPSB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIuaW5kZXggPT09IDAgfHwgci5hdHRhY2tlcilcbiAgICAgICAgaWYgKGF0dGFja2VyLmxlbmd0aCkgcmV0dXJuIGF0dGFja2VyWzBdXG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBkZWZlbmRlclJvbGwgKCkge1xuICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgaWYgKHRoaXMucm9sbHM/Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBkZWZlbmRlciA9IHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gci5pbmRleCAhPT0gMCB8fCAhci5hdHRhY2tlcilcbiAgICAgICAgaWYgKGRlZmVuZGVyLmxlbmd0aCkgcmV0dXJuIGRlZmVuZGVyWzBdXG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBkZWZlbmRlcklzRG9kZ2luZyAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5kZWZlbmRlclJvbGw/LmFjdG9yPy5kb2RnZVNraWxsPy5uYW1lICYmXG4gICAgICB0aGlzLmRlZmVuZGVyUm9sbD8uc2tpbGw/Lm5hbWVcbiAgICApIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLmRvZGdlU2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICB0aGlzLmRlZmVuZGVyUm9sbC5za2lsbC5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgYWR2YW50YWdlQXR0YWNrZXIgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fYWEgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmRlZmVuZGVySXNEb2RnaW5nXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FhXG4gIH1cblxuICBnZXQgd2lubmVyUm9sbHNEYW1hZ2UgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29tYmF0ICYmXG4gICAgICB0aGlzLnJvbGxzLmxlbmd0aCA+PSAyICYmXG4gICAgICB0aGlzLmhhc1dpbm5lciAmJlxuICAgICAgdGhpcy53aW5uZXI/Lml0ZW0/LnR5cGUgPT09ICd3ZWFwb24nXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHNldCBhZHZhbnRhZ2VBdHRhY2tlciAoeCkge1xuICAgIHRoaXMuX2FhID0gdHJ1ZVxuICAgIHRoaXMuX2FkID0gZmFsc2VcbiAgfVxuXG4gIGdldCBhZHZhbnRhZ2VEZWZlbmRlciAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9hZCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLmRlZmVuZGVySXNEb2RnaW5nXG4gICAgcmV0dXJuIHRoaXMuX2FkXG4gIH1cblxuICBzZXQgYWR2YW50YWdlRGVmZW5kZXIgKHgpIHtcbiAgICB0aGlzLl9hZCA9IHRydWVcbiAgICB0aGlzLl9hYSA9IGZhbHNlXG4gIH1cblxuICBnZXQgaXNUaWUgKCkge1xuICAgIHJldHVybiB0aGlzLndpbm5lckNvdW50ID4gMVxuICB9XG5cbiAgZ2V0IG5lZWRzVGllQnJlYWtlciAoKSB7XG4gICAgaWYgKCF0aGlzLmNvbWJhdCkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKFxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwgJiZcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsICYmXG4gICAgICB0aGlzLmF0dGFja2VyUm9sbC5zdWNjZXNzTGV2ZWwgPT09IHRoaXMuZGVmZW5kZXJSb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgd2lubmVyQ291bnQgKCkge1xuICAgIGxldCBjb3VudCA9IDBcbiAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgaWYgKHIud2lubmVyKSBjb3VudCArPSAxXG4gICAgfVxuICAgIHJldHVybiBjb3VudFxuICB9XG5cbiAgZ2V0IGlzQXR0YWNrTWFuZXV2ZXIgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29tYmF0ICYmXG4gICAgICB0aGlzLmF0dGFja2VyUm9sbCAmJlxuICAgICAgKCF0aGlzLmF0dGFja2VyUm9sbD8uaXRlbSB8fFxuICAgICAgICB0aGlzLmF0dGFja2VyUm9sbD8uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ubW52cilcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHJlc3VsdFRleHQgKCkge1xuICAgIGlmICh0aGlzLmNvbWJhdCAmJiB0aGlzLmF0dGFja2VyUm9sbCAmJiB0aGlzLmRlZmVuZGVyUm9sbCkge1xuICAgICAgaWYgKCF0aGlzLmF0dGFja2VyUm9sbC53aW5uZXIgJiYgIXRoaXMuZGVmZW5kZXJSb2xsLndpbm5lcikge1xuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmF0dGFja2VyUm9sbC53aW5uZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0YWNrZXJSb2xsLm1hbmV1dmVyKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFuZXV2ZXJTdWNjZXNzJywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5hdHRhY2tlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQXR0YWNrU3VjY2VzcycsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmF0dGFja2VyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbC5tYW5ldXZlcikge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRlZmVuZGVySXNEb2RnaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRG9kZ2VTdWNjZXNzJywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQXR0YWNrU3VjY2VzcycsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGFzeW5jIHByb2Nlc3MgKGRhdGEpIHtcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XG4gICAgICBjYXNlICduZXcnOlxuICAgICAgICBpZiAoIXRoaXMucm9sbHM/Lmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuY29tYmF0ID0gZGF0YS5jb21iYXQgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICAgICAgICBkYXRhLnJvbGwuYXR0YWNrZXIgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRhdGEucm9sbC5pbmRleCA9IHRoaXMucm9sbHMubGVuZ3RoXG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncm9sbCc6XG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAndXBkYXRlUm9sbCc6XG4gICAgICAgIHRoaXMudXBkYXRlUm9sbChkYXRhKVxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgZWxzZSBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gIH1cblxuICBhc3luYyByb2xsIChyYW5rKSB7XG4gICAgYXdhaXQgdGhpcy5yb2xsc1tyYW5rXS5fcGVyZm9ybSgpXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHR5cGU6IHRoaXMuY29uZmlnLnR5cGUsXG4gICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcbiAgICAgIHJhbmssXG4gICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNXG4gICAgfVxuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIGRhdGEucm9sbCA9IHRoaXMucm9sbHNbcmFua10uSlNPTlJvbGxEYXRhXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb25cbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGkuYWN0b3Itcm9sbCcpXG4gICAgY29uc3QgbWVzc2FnZSA9IGEuY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBhLmNsb3Nlc3QoJ2Rpdi5yb2xsLWNhcmQnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBPcHBvc2VkQ2hlY2tDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgY29uc3QgcmFuayA9IE51bWJlcihsaT8uZGF0YXNldD8ucmFuaylcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICd0b2dnbGUtY29tYmF0Jzoge1xuICAgICAgICBjYXJkLmNvbWJhdCA9ICFjYXJkLmNvbWJhdFxuICAgICAgICAvLyBpZiggIWNhcmQuYWR2YW50YWdlQXR0YWNrZXIgJiYgIWNhcmQuYWR2YW50YWdlRGVmZW5kZXIpIGNhcmQuYWR2YW50YWdlQXR0YWNrZXIgPSB0cnVlO1xuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOiB7XG4gICAgICAgIGNhcmQucmVtb3ZlUm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnY2xvc2UtY2FyZCc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jaGVjayc6IHtcbiAgICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgICBpZiAoIWNhcmQucm9sbHNbcmFua10uYWN0b3JLZXkpIHtcbiAgICAgICAgICBjYXJkLnJvbGxzW3JhbmtdLmFjdG9yS2V5ID0gYCR7c3BlYWtlci5zY2VuZX0uJHtzcGVha2VyLnRva2VufWBcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjYXJkLnJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtZGFtYWdlJzoge1xuICAgICAgICBjYXJkLmNsb3NlQ2FyZCgpXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBjb25zdCBkYW1hZ2VDaGF0Q2FyZCA9IG5ldyBEYW1hZ2VDYXJkKHtcbiAgICAgICAgICBjcml0aWNhbDogY2FyZC53aW5uZXIuaXNFeHRyZW1lU3VjY2VzcyxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgfSlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuYWN0b3JLZXkgPSBjYXJkLndpbm5lci5hY3Rvci5hY3RvcktleVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC50YXJnZXRLZXkgPSBjYXJkLmxvb3Nlci5hY3Rvci5hY3RvcktleVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5pdGVtSWQgPSBjYXJkLndpbm5lci5pdGVtSWRcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIGRhbWFnZUNoYXRDYXJkLm1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgIHVwZGF0ZTogZmFsc2UsXG4gICAgICAgICAgZGF0YTogYS5kYXRhc2V0LFxuICAgICAgICAgIGNsYXNzZXM6IGEuY2xhc3NMaXN0LFxuICAgICAgICAgIHRhcmdldDogYVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IENvQzdDaGVjay5hbHRlcihjYXJkLnJvbGxzW3JhbmtdLCBhY3Rpb24sIG9wdGlvbnMpXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXG4gICAgICAgICAgcmFuayxcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgZGF0YS5yb2xsID0gY2FyZC5yb2xsc1tyYW5rXS5KU09OUm9sbERhdGFcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29tcHV0ZSAocmFuayA9IHVuZGVmaW5lZCkge1xuICAgIHRoaXMucm9sbHMgPSB0aGlzLnJvbGxzLmZpbHRlcihyb2xsID0+IHtcbiAgICAgIHJldHVybiB0eXBlb2Ygcm9sbC5hY3Rvci5hY3RvcktleSAhPT0gJ3VuZGVmaW5lZCcgLy8gcmVtb3ZlIGFueSBhY3RvcnMgdGhhdCBubyBsb25nZXIgZXhpc3RcbiAgICB9KVxuXG4gICAgaWYgKCFyYW5rKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGVsZXRlIHRoaXMucm9sbHNbaV0ubWFuZXV2ZXJcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuY29tYmF0ICYmXG4gICAgICAgICAgKCF0aGlzLnJvbGxzW2ldLml0ZW0gfHxcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ubW52cikgJiZcbiAgICAgICAgICAoKHRoaXMucm9sbHNbaV0/LmFjdG9yPy5kb2RnZVNraWxsPy5uYW1lICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldPy5za2lsbD8ubmFtZSAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5hY3Rvci5kb2RnZVNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSAhPT1cbiAgICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5za2lsbC5uYW1lLnRvTG93ZXJDYXNlKCkpIHx8XG4gICAgICAgICAgICAhdGhpcy5yb2xsc1tpXT8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUpXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMucm9sbHNbaV0ubWFuZXV2ZXIgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucm9sbHNbaV0ucm9sbGVkKSB7XG4gICAgICAgICAgdGhpcy5yb2xsc1tpXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW2ldLmdldEh0bWxSb2xsKHtcbiAgICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5yb2xsc1tyYW5rXS5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5yb2xsc1tyYW5rXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW3JhbmtdLmdldEh0bWxSb2xsKHtcbiAgICAgICAgICBoaWRlRGljZVJlc3VsdDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgLy8gU29ydCBjb21iYXQgcm9sbHMgYnkgaW5kZXguXG4gICAgICB0aGlzLnJvbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEuaW5kZXggPiBiLmluZGV4KSByZXR1cm4gMVxuICAgICAgICBpZiAoYS5pbmRleCA8IGIuaW5kZXgpIHJldHVybiAtMVxuICAgICAgICByZXR1cm4gMFxuICAgICAgfSlcblxuICAgICAgLy8gQ29tYmF0IHJvbGwgaW5jbHVkZXMgb25seSAyIHBlcnNvbnMsIHJlbW92ZSB0aGUgcmVzdC5cbiAgICAgIGlmICh0aGlzLnJvbGxzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhpcy5yb2xscyA9IFt0aGlzLnJvbGxzWzBdLCB0aGlzLnJvbGxzWzFdXVxuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgICAgIGRlbGV0ZSByLndpbm5lclxuICAgICAgICAgIGRlbGV0ZSByLnRpZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEZpcnN0IHBlcnNvbiBhZGRlZCBpcyB0aGUgYXR0YWNrZXIuXG4gICAgICBpZiAodGhpcy5yb2xsc1swXSkgdGhpcy5yb2xsc1swXS5hdHRhY2tlciA9IHRydWVcblxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0/LnJvbGxlZCAmJiB0aGlzLnJvbGxzWzFdPy5yb2xsZWQpIHtcbiAgICAgICAgaWYgKHRoaXMucm9sbHNbMF0ucGFzc2VkIHx8IHRoaXMucm9sbHNbMV0ucGFzc2VkKSB7XG4gICAgICAgICAgaWYgKHRoaXMucm9sbHNbMF0uc3VjY2Vzc0xldmVsID4gdGhpcy5yb2xsc1sxXS5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgIHRoaXMucm9sbHNbMF0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsc1sxXS5zdWNjZXNzTGV2ZWwgPiB0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5yb2xsc1sxXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFkdmFudGFnZUF0dGFja2VyKSB0aGlzLnJvbGxzWzBdLndpbm5lciA9IHRydWVcbiAgICAgICAgICAgIGVsc2UgdGhpcy5yb2xsc1sxXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYS5yb2xsZWQgJiYgIWIucm9sbGVkKSByZXR1cm4gLTFcbiAgICAgICAgaWYgKCFhLnJvbGxlZCAmJiBiLnJvbGxlZCkgcmV0dXJuIDFcbiAgICAgICAgaWYgKCFhLnJvbGxlZCAmJiAhYi5yb2xsZWQpIHJldHVybiAwXG4gICAgICAgIGlmIChhLnN1Y2Nlc3NMZXZlbCA+IGIuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgfVxuICAgICAgICBpZiAoYS5zdWNjZXNzTGV2ZWwgPCBiLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3Bwb3NlZFJvbGxUaWVCcmVha2VyJykpIHtcbiAgICAgICAgICBpZiAoYS5tb2RpZmllZFJlc3VsdCA+IGIubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGEubW9kaWZpZWRSZXN1bHQgPCBiLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGEucmF3VmFsdWUgPiBiLnJhd1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhLnJhd1ZhbHVlIDwgYi5yYXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9KVxuXG4gICAgICB0aGlzLndpbkNvdW50ID0gMFxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0gJiYgdGhpcy5yb2xsc1swXS5yb2xsZWQgJiYgIXRoaXMucm9sbHNbMF0uZmFpbGVkKSB7XG4gICAgICAgIHRoaXMud2luQ291bnQgPSAxXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0gJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0ucm9sbGVkICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCA9PT0gdGhpcy5yb2xsc1tpXS5zdWNjZXNzTGV2ZWwgJiZcbiAgICAgICAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvcHBvc2VkUm9sbFRpZUJyZWFrZXInKVxuICAgICAgICAgICAgICA/IHRoaXMucm9sbHNbMF0ubW9kaWZpZWRSZXN1bHQgPT09IHRoaXMucm9sbHNbaV0ubW9kaWZpZWRSZXN1bHRcbiAgICAgICAgICAgICAgOiB0aGlzLnJvbGxzWzBdLnJhd1ZhbHVlID09PSB0aGlzLnJvbGxzW2ldLnJhd1ZhbHVlKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy53aW5Db3VudCA9IHRoaXMud2luQ291bnQgKyAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnJvbGxzW2ldLndpbm5lciA9IGkgPCB0aGlzLndpbkNvdW50XG4gICAgICAgIHRoaXMucm9sbHNbaV0udGllID0gdGhpcy5yb2xsc1tpXS53aW5uZXIgJiYgdGhpcy53aW5Db3VudCA+IDFcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjbG9zZUNhcmQgKCkge1xuICAgIHRoaXMuY2xvc2VkID0gdHJ1ZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFNhbkRhdGFEaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCc6Y2hlY2tib3gnKS5jbGljaygoKSA9PiB0aGlzLl90b2dnbGVJbnB1dChodG1sKSlcbiAgfVxuXG4gIF90b2dnbGVJbnB1dCAoaHRtbCkge1xuICAgIGh0bWwuZmluZCgnKltuYW1lPVwiY3VzdG9tbmFtZVwiXScpLnRvZ2dsZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NhbmRhdGEuaHRtbCcsXG4gICAgICBvcHRpb25zXG4gICAgKVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IFNhbkRhdGFEaWFsb2coe1xuICAgICAgICB0aXRsZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TYW5EYXRhU2VsZWN0aW9uV2luZG93TmFtZWQnLCB7XG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5EYXRhU2VsZWN0aW9uV2luZG93JyksIC8vIFRPRE86IFJlbW92ZSBTYW5EYXRhU2VsZWN0aW9uV2luZG93TmFtZWRcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIFZhbGlkYXRlOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3Nhbi1kYXRhLWZvcm0nKSlcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAnVmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4vY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzJ1xuaW1wb3J0IHsgaXNDdHJsS2V5IH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvbWJpbmVkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgT3Bwb3NlZENoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBTYW5EYXRhRGlhbG9nIH0gZnJvbSAnLi9zYW5kYXRhLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9jb2M3LWxpbmsuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXRNZXNzYWdlIHtcbiAgc3RhdGljIGdldCBST0xMX1RZUEVfQVRUUklCVVRFICgpIHtcbiAgICByZXR1cm4gJ1IvQVQnXG4gIH1cblxuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyAoKSB7XG4gICAgcmV0dXJuICdSL0NIJ1xuICB9XG5cbiAgc3RhdGljIGdldCBST0xMX1RZUEVfQ09NQkFUICgpIHtcbiAgICByZXR1cm4gJ1IvQ08nXG4gIH1cblxuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9TS0lMTCAoKSB7XG4gICAgcmV0dXJuICdSL1NLJ1xuICB9XG5cbiAgc3RhdGljIGdldCBST0xMX1RZUEVfRU5DT1VOVEVSICgpIHtcbiAgICByZXR1cm4gJ1IvRUMnXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9DT01CSU5FRCAoKSB7XG4gICAgcmV0dXJuICdDL0NPJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfR1JPVVAgKCkge1xuICAgIHJldHVybiAnQy9HUidcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX05PUk1BTCAoKSB7XG4gICAgcmV0dXJuICdDL05PJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfT1BQT1NFRCAoKSB7XG4gICAgcmV0dXJuICdDL09QJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfU0FOX0NIRUNLICgpIHtcbiAgICByZXR1cm4gJ0MvU0MnXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9OT05FICgpIHtcbiAgICByZXR1cm4gJ0MvTk8nXG4gIH1cblxuICAvLyBzdGF0aWMgZ2V0IFJPTExfVE9fQ0hBVCAoKSB7XG4gIC8vICAgcmV0dXJuICdSL0NIJ1xuICAvLyB9XG5cbiAgLy8gc3RhdGljIGdldCBST0xMX1RPX0NMSVBCT0FSRCAoKSB7XG4gIC8vICAgcmV0dXJuICdSL0NMJ1xuICAvLyB9XG5cbiAgc3RhdGljIGNhcmRUeXBlcyAoY29uZmlnKSB7XG4gICAgaWYgKGNvbmZpZy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVQpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdCA9IHtcbiAgICAgIFtDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTF06ICdDb0M3LlJlZ3VsYXJSb2xsQ2FyZCcsXG4gICAgICBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9DT01CSU5FRF06ICdDb0M3LkNvbWJpbmVkUm9sbENhcmQnLFxuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRF06ICdDb0M3Lk9wcG9zZWRSb2xsQ2FyZCdcbiAgICAgIC8vIFtDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0dST1VQXTogJ0NvQzcuR3JvdXBSb2xsQ2FyZCcgLSBOWUlcbiAgICB9XG4gICAgaWYgKFxuICAgICAgY29uZmlnLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURSAmJlxuICAgICAgY29uZmlnLmF0dHJpYnV0ZSA9PT0gJ3NhbidcbiAgICApIHtcbiAgICAgIHNlbGVjdFtDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS10gPSAnQ29DNy5TYW5pdHlMb3NzRW5jb3VudGVyJ1xuICAgIH1cbiAgICByZXR1cm4gc2VsZWN0XG4gIH1cblxuICBzdGF0aWMgbm9ybWFsaXplUmVxdWVzdCAob3B0aW9ucykge1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBvcHRpb25zLmV2ZW50ID09PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIG9wdGlvbnMuY2FyZFR5cGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5hY3RvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICh0eXBlb2Ygb3B0aW9ucy5za2lsbElkICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZSAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuY2hhcmFjdGVyaXN0aWMgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSKVxuICAgICkge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNraWxsSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmFjdG9yLml0ZW1zLmdldChvcHRpb25zLnNraWxsSWQpKSB7XG4gICAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTExcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IHNraWxsSWRzID0gb3B0aW9ucy5hY3Rvci5nZXRTa2lsbHNCeU5hbWUob3B0aW9ucy5za2lsbE5hbWUpXG4gICAgICAgIGlmIChza2lsbElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgb3B0aW9ucy5za2lsbElkID0gc2tpbGxJZHNbMF0uaWRcbiAgICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTFxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIFsnbGNrJywgJ3NhbiddLmluY2x1ZGVzKG9wdGlvbnMuYXR0cmlidXRlKVxuICAgICAgKSB7XG4gICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuY2hhcmFjdGVyaXN0aWMgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbXG4gICAgICAgICAgb3B0aW9ucy5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICBdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgKSB7XG4gICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHR5cGVvZiBvcHRpb25zLmV2ZW50ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgdHlwZW9mIG9wdGlvbnMuY2FyZFR5cGUgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2Ygb3B0aW9ucy5yb2xsVHlwZSA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZCcsIHtcbiAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGwnKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChcbiAgICAgICFbXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORUQsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfR1JPVVAsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRUQsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLXG4gICAgICBdLmluY2x1ZGVzKG9wdGlvbnMuY2FyZFR5cGUpXG4gICAgKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckludmFsaWRDYXJkVHlwZScpXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIVtcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSXG4gICAgICBdLmluY2x1ZGVzKG9wdGlvbnMucm9sbFR5cGUpXG4gICAgKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckludmFsaWRSb2xsVHlwZScpXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgb3B0aW9uczoge1xuICAgICAgICBjYXJkVHlwZTogb3B0aW9ucy5jYXJkVHlwZSxcbiAgICAgICAgc2hpZnRLZXk6IG9wdGlvbnMuZmFzdEZvcndhcmQgPz8gb3B0aW9ucy5ldmVudD8uc2hpZnRLZXkgPz8gb3B0aW9ucy5mYXN0Rm9yd2FyZCA/PyBmYWxzZSxcbiAgICAgICAgYWx0S2V5OiBvcHRpb25zLmV2ZW50Py5hbHRLZXkgPz8gZmFsc2UsXG4gICAgICAgIGlzQ3RybEtleTogaXNDdHJsS2V5KG9wdGlvbnMuZXZlbnQgPz8gZmFsc2UpLFxuICAgICAgICBjcmVhdGVFbmNvdW50ZXI6IG9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID8/IGZhbHNlLFxuICAgICAgICBvcGVuTGlua1Rvb2w6IG9wdGlvbnMub3BlbkxpbmtUb29sID8/IGZhbHNlLFxuICAgICAgICBzZW5kVG9DaGF0OiBvcHRpb25zLnNlbmRUb0NoYXQgPz8gZmFsc2UsXG4gICAgICAgIHNlbmRUb0NsaXBib2FyZDogb3B0aW9ucy5zZW5kVG9DbGlwYm9hcmQgPz8gZmFsc2UsXG4gICAgICAgIGlzQ29tYmF0OlxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0Py5jb250YWlucygnY29tYmF0JykgPz8gZmFsc2UsXG4gICAgICAgIHByZXZlbnRTdGFuZGJ5OiBvcHRpb25zLnByZXZlbnRTdGFuZGJ5ID8/IGZhbHNlLFxuICAgICAgICBib251c0RpY2U6IDBcbiAgICAgIH0sXG4gICAgICBkaWFsb2dPcHRpb25zOiB7XG4gICAgICAgIHJvbGxUeXBlOiBvcHRpb25zLnJvbGxUeXBlLFxuICAgICAgICBjYXJkVHlwZTogb3B0aW9ucy5jYXJkVHlwZSxcbiAgICAgICAgYXR0cmlidXRlOiAnJyxcbiAgICAgICAgY2hhdE1lc3NhZ2U6IG9wdGlvbnMuY2hhdE1lc3NhZ2UgPz8gdHJ1ZSxcbiAgICAgICAgZm9yY2VkQ2FyZFR5cGU6IG9wdGlvbnMuZm9yY2VkQ2FyZFR5cGUgPz8gZmFsc2UsXG4gICAgICAgIGhpZGVEaWZmaWN1bHR5OiBvcHRpb25zLmhpZGVEaWZmaWN1bHR5ID8/IGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHN3aXRjaCAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUpIHtcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQzpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEU6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSOlxuICAgICAgICBjb25maWcub3B0aW9ucy5za2lsbElkID1cbiAgICAgICAgICBvcHRpb25zLnNraWxsSWQgPz9cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICBjb25maWcub3B0aW9ucy5pdGVtSWQgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5pdGVtSWRcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWMgPVxuICAgICAgICAgIG9wdGlvbnMuY2hhcmFjdGVyaXN0aWMgPz9cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgPVxuICAgICAgICAgIG9wdGlvbnMuYXR0cmlidXRlID8/XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliXG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmF0dHJpYnV0ZSA9IGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZVxuICAgICAgICBjb25maWcub3B0aW9ucy5hY3RvcklkID1cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWQgPz9cbiAgICAgICAgICBvcHRpb25zLmFjdG9yLmlkXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLnRva2VuS2V5ID1cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWQgPz9cbiAgICAgICAgICBvcHRpb25zLmFjdG9yLnRva2VuS2V5XG4gICAgICAgIGNvbmZpZy5vcHRpb25zLndlYXBvbkFsdFNraWxsID1cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYWx0ZXJuYXRpdi1za2lsbCcpXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9yID0gb3B0aW9ucy5hY3RvclxuICAgICAgICBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwgJiZcbiAgICAgICAgICBjb25maWcub3B0aW9ucy5pc0NvbWJhdFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gY29uZmlnLm9wdGlvbnMuYWN0b3IuaXRlbXMuZ2V0KGNvbmZpZy5vcHRpb25zLml0ZW1JZClcbiAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMud2VhcG9uTmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGNvbmZpZy5vcHRpb25zLmFjdG9ySWQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgKHR5cGVvZiBjb25maWcub3B0aW9ucy50b2tlbktleSA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBjb25maWcub3B0aW9ucy5hY3RvciA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JBY3RvcicpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwgJiZcbiAgICAgICAgICB0eXBlb2YgY29uZmlnLm9wdGlvbnMuc2tpbGxJZCA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Ta2lsbCcpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT1cbiAgICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpYycpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgIWdhbWUudXNlci5pc0dNICYmXG4gICAgICAgICAgICAhY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1tcbiAgICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICAgIF0/LnZhbHVlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJylcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAhZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgICAgICAgICFjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0uYXR0cmlic1tjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVdXG4gICAgICAgICAgICAgID8udmFsdWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVRcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5pdGVtSWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5XZWFwb24nKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcub3B0aW9ucy5hbHRLZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25maWcub3B0aW9ucy5oYXNQbGF5ZXJPd25lciA9XG4gICAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3IuaGFzUGxheWVyT3duZXIgPz8gZmFsc2VcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PVxuICAgICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciA9XG4gICAgICAgICAgICBjb25maWcub3B0aW9ucy5pc0N0cmxLZXlcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaXNhYmxlRmxhdERpY2VNb2RpZmllciA9XG4gICAgICAgICAgICBjb25maWcub3B0aW9ucy5pc0N0cmxLZXlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmFsc2VcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaXNhYmxlRmxhdERpY2VNb2RpZmllciA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSAwXG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHkgPVxuICAgICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eSA/P1xuICAgICAgICAgIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWxbXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JylcbiAgICAgICAgICBdXG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXREaWNlTW9kaWZpZXIgPSAwXG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDBcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgcmV0dXJuIGNvbmZpZ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRyaWdnZXIgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGNvbmZpZyA9IENvQzdDaGF0TWVzc2FnZS5ub3JtYWxpemVSZXF1ZXN0KG9wdGlvbnMpXG4gICAgaWYgKGNvbmZpZyA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoXG4gICAgICAoY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5KSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgIFtcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLXG4gICAgICBdLmluY2x1ZGVzKGNvbmZpZy5kaWFsb2dPcHRpb25zLmNhcmRUeXBlKVxuICAgICkge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLmNyZWF0ZUxpbmsoY29uZmlnKVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICAoY29uZmlnLm9wdGlvbnMuc2VuZFRvQ2hhdCB8fCBjb25maWcub3B0aW9ucy5zZW5kVG9DbGlwYm9hcmQgfHwgY29uZmlnLm9wdGlvbnMub3BlbkxpbmtUb29sIHx8IGNvbmZpZy5vcHRpb25zLmNyZWF0ZUVuY291bnRlcikgJiZcbiAgICAgIGdhbWUudXNlci5pc0dNICYmXG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkUgPT09IGNvbmZpZy5kaWFsb2dPcHRpb25zLmNhcmRUeXBlXG4gICAgKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UuY3JlYXRlTGluayhjb25maWcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuYWN0b3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGJvbnVzRGljZSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbT8uYXR0cmlicz8uW2NvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZV0/LmJvbnVzRGljZVxuICAgICAgICAgIGlmIChib251c0RpY2UpIHtcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gYm9udXNEaWNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBib251c0RpY2UgPSBjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0/LmNoYXJhY3RlcmlzdGljcz8uW2NvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXT8uYm9udXNEaWNlXG4gICAgICAgICAgaWYgKGJvbnVzRGljZSkge1xuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBib251c0RpY2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLml0ZW1JZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBpdGVtTW9kaWZpZXJzID0gT2JqZWN0LnZhbHVlcyhjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0uc2tpbGxzKS5maW5kKGsgPT4gay5mb3VuZHJ5SUQgPT09IGNvbmZpZy5vcHRpb25zLml0ZW1JZClcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW1Nb2RpZmllcnM/LmJvbnVzRGljZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gaXRlbU1vZGlmaWVycy5ib251c0RpY2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBNYXRoLm1pbihNYXRoLm1heChjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciwgLTIpLCAyKVxuICAgICAgfVxuICAgICAgaWYgKCFjb25maWcub3B0aW9ucy5zaGlmdEtleSkge1xuICAgICAgICBhd2FpdCBDb0M3Q2hhdE1lc3NhZ2UuY3JlYXRlUm9sbChjb25maWcpXG4gICAgICB9XG4gICAgICByZXR1cm4gQ29DN0NoYXRNZXNzYWdlLnJ1blJvbGwoY29uZmlnKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVMaW5rIChjb25maWcpIHtcbiAgICBzd2l0Y2ggKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVI6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdDb0M3TGluaydcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tcbiAgICAgICAgICAgIGxpbmtEYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMXG4gICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMuYWN0b3IuaXRlbXMuZ2V0KGNvbmZpZy5vcHRpb25zLnNraWxsSWQpPy5zaG9ydE5hbWVcbiAgICAgICAgICAgIGlmICghbGlua0RhdGEubmFtZSkgcmV0dXJuXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQykge1xuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXG4gICAgICAgICAgICBsaW5rRGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEFSQUNURVJJU1RJQ1xuICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUpIHtcbiAgICAgICAgICAgIGlmICgoY29uZmlnLm9wdGlvbnMuYWx0S2V5IHx8IGNvbmZpZy5vcHRpb25zLmNyZWF0ZUVuY291bnRlcikgJiYgY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlID09PSAnc2FuJykge1xuICAgICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TU1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXG4gICAgICAgICAgICAgIGxpbmtEYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkFUVFJJQlVURVxuICAgICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVQpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNXG4gICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMud2VhcG9uTmFtZVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TU1xuICAgICAgICAgICAgbGlua0RhdGEuc2FuTWluID0gY29uZmlnLm9wdGlvbnMuYWN0b3I/LnN5c3RlbT8uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tQYXNzZWRcbiAgICAgICAgICAgIGxpbmtEYXRhLnNhbk1heCA9IGNvbmZpZy5vcHRpb25zLmFjdG9yPy5zeXN0ZW0/LnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrRmFpbGxlZFxuICAgICAgICAgICAgbGlua0RhdGEuc2FuUmVhc29uID0gY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlXG4gICAgICAgICAgICAgIDogY29uZmlnLm9wdGlvbnMuYWN0b3IubmFtZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5ibGluZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbmZpZy5vcHRpb25zLnNlbmRUb0NoYXQpIHtcbiAgICAgICAgICAgIENvQzdMaW5rLnRvQ2hhdE1lc3NhZ2UobGlua0RhdGEpXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcub3B0aW9ucy5zZW5kVG9DbGlwYm9hcmQpIHtcbiAgICAgICAgICAgIENvQzdMaW5rLmZyb21Ecm9wRGF0YShsaW5rRGF0YSkudGhlbihsaW5rID0+IHtcbiAgICAgICAgICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQobGluay5saW5rKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShsaW5rRGF0YSwgeyBhY3RvcnM6IFtjb25maWcub3B0aW9ucy5hY3Rvcl0uZmlsdGVyKGEgPT4gYS5vd25lcnMubGVuZ3RoKSwgaGFzTW9kaWZpZXJzOiBjb25maWcub3B0aW9ucy5zaGlmdEtleSB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVSb2xsIChjb25maWcpIHtcbiAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKGNvbmZpZy5kaWFsb2dPcHRpb25zKVxuICAgIGlmICh1c2FnZSkge1xuICAgICAgY29uc3QgY2FyZFR5cGUgPSB1c2FnZS5nZXQoJ2NhcmRUeXBlJylcbiAgICAgIGlmIChjYXJkVHlwZSkge1xuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSA9IGNhcmRUeXBlXG4gICAgICB9XG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgIHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpXG4gICAgICApXG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcnVuUm9sbCAoY29uZmlnKSB7XG4gICAgc3dpdGNoIChjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDSzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHNhbkRhdGEgPSBhd2FpdCBTYW5EYXRhRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICBwcm9tcHRMYWJlbDogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgaWYgKHNhbkRhdGEpIHtcbiAgICAgICAgICAgIGxldCBzYW5NaW4gPSBzYW5EYXRhLmdldCgnc2FuTWluJykgfHwgMFxuICAgICAgICAgICAgbGV0IHNhbk1heCA9IHNhbkRhdGEuZ2V0KCdzYW5NYXgnKSB8fCAwXG4gICAgICAgICAgICBjb25zdCBzYW5SZWFzb24gPSBzYW5EYXRhLmdldCgnc2FuUmVhc29uJylcblxuICAgICAgICAgICAgaWYgKCFpc05hTihOdW1iZXIoc2FuTWluKSkpIHNhbk1pbiA9IE51bWJlcihzYW5NaW4pXG4gICAgICAgICAgICBpZiAoIWlzTmFOKE51bWJlcihzYW5NYXgpKSkgc2FuTWF4ID0gTnVtYmVyKHNhbk1heClcblxuICAgICAgICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZShcbiAgICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3IuYWN0b3JLZXksXG4gICAgICAgICAgICAgIHsgc2FuTWluLCBzYW5NYXgsIHNhblJlYXNvbiB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2FuTW9kaWZpZXI6IGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyLFxuICAgICAgICAgICAgICAgIHNhbkRpZmZpY3VsdHk6IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHksXG4gICAgICAgICAgICAgICAgZmFzdEZvcndhcmQ6IGNvbmZpZy5vcHRpb25zLnNoaWZ0S2V5XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUw6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXJcbiAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgICAgY2hlY2suYWN0b3IgPSAhY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9ySWRcbiAgICAgICAgICA6IGNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyXG4gICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgICBjaGVjay5zdGFuZGJ5ID1cbiAgICAgICAgICAhY29uZmlnLm9wdGlvbnMucHJldmVudFN0YW5kYnkgJiZcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmhhc1BsYXllck93bmVyXG4gICAgICAgIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCkge1xuICAgICAgICAgIGNoZWNrLnNraWxsID0gY29uZmlnLm9wdGlvbnMuc2tpbGxJZFxuICAgICAgICAgIGNoZWNrLmNhbkJlUHVzaGVkID0gKGNoZWNrLl9nZXRJdGVtRnJvbUlkKGNoZWNrLnNraWxsKT8uc3lzdGVtPy5wcm9wZXJ0aWVzPy5wdXNoID8/IGZhbHNlKVxuICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICApIHtcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLmNoYXRNZXNzYWdlKSB7XG4gICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlc3VsdDogY2hlY2subW9kaWZpZWRSZXN1bHQsXG4gICAgICAgICAgc3VjY2Vzc0xldmVsOiBjaGVjay5yb2xsZWRTdWNjZXNzTGV2ZWwsXG4gICAgICAgICAgaXNGdW1ibGU6IGNoZWNrLmlzRnVtYmxlLFxuICAgICAgICAgIGlzQ3JpdGljYWw6IGNoZWNrLmlzQ3JpdGljYWwsXG4gICAgICAgICAgc3VjY2Vzc0xldmVsczoge1xuICAgICAgICAgICAgMTogY2hlY2sucmVndWxhclRocmVzaG9sZCxcbiAgICAgICAgICAgIDI6IGNoZWNrLmhhcmRUaHJlc2hvbGQsXG4gICAgICAgICAgICAzOiBjaGVjay5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXNzZWQ6IGNoZWNrLnBhc3NlZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9DT01CSU5FRDpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgICAgY2hlY2suYWN0b3IgPSAhY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICAgID8gY29uZmlnLm9wdGlvbnMuYWN0b3JJZFxuICAgICAgICAgICAgOiBjb25maWcub3B0aW9ucy50b2tlbktleVxuICAgICAgICAgIGNoZWNrLmNoYXJhY3RlcmlzdGljID0gY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICBjaGVjay5hdHRyaWJ1dGUgPSBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVcbiAgICAgICAgICBjaGVjay5za2lsbElkID0gY29uZmlnLm9wdGlvbnMuc2tpbGxJZFxuICAgICAgICAgIGNoZWNrLnJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgICAgICAgIGNoZWNrLmluaXRpYXRvciA9IGdhbWUudXNlci5pZFxuICAgICAgICAgIGxldCBkYXRhID0ge31cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICB0eXBlOiBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICAgICAgY29tYmF0OiBjb25maWcub3B0aW9ucy5pc0NvbWJhdCxcbiAgICAgICAgICAgICAgYWN0aW9uOiAnbmV3J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suaXRlbSA9IGNvbmZpZy5vcHRpb25zLml0ZW1JZFxuICAgICAgICAgICAgY2hlY2sud2VhcG9uQWx0U2tpbGwgPSBjb25maWcub3B0aW9ucy53ZWFwb25BbHRTa2lsbFxuICAgICAgICAgICAgY2hlY2suZGVueVB1c2ggPSB0cnVlIC8vIE9wcG9zZWQgcm9sbGVkIGNhbid0IGJlIHB1c2hlZC5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgdHlwZTogQ29tYmluZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgICAgICBhY3Rpb246ICduZXcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eVxuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhLnJvbGwgPSBjaGVjay5KU09OUm9sbERhdGFcbiAgICAgICAgICBkYXRhLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDb25DaGVjayB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcklkID0gbnVsbCwgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgIHRoaXMuY2hlY2sgPSBuZXcgQ29DN0NoZWNrKGFjdG9ySWQpXG4gICAgdGhpcy5jaGVjay5jaGFyYWN0ZXJpc3RpYyA9ICdjb24nXG4gICAgdGhpcy5jaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuY2hlY2suZGVueVB1c2ggPSB0cnVlXG4gICAgdGhpcy5hY3RvcklkID0gYWN0b3JJZFxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICh0aGlzLmFjdG9ySWQpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9ySWQpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzZXQgYWN0b3JJZCAoeCkge1xuICAgIHRoaXMuX2FjdG9ySWQgPSB4XG4gICAgdGhpcy5jaGVjay5hY3RvciA9IHhcbiAgfVxuXG4gIGdldCBhY3RvcklkICgpIHtcbiAgICBpZiAodGhpcy5fYWN0b3JJZCkgcmV0dXJuIHRoaXMuX2FjdG9ySWRcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHRva2VuS2V5ICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSByZXR1cm4gdGhpcy5hY3Rvci50b2tlbktleVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaXNTdWNjZXNzICgpIHtcbiAgICBpZiAodGhpcy5jaGVjaykgcmV0dXJuIHRoaXMuY2hlY2suaXNTdWNjZXNzXG4gICAgZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBpc1JvbGxlZCAoKSB7XG4gICAgaWYgKHRoaXMuY2hlY2sgJiYgdGhpcy5jaGVjay5kaWNlcyAmJiB0aGlzLmNoZWNrLmRpY2VzLnRvdGFsKSByZXR1cm4gdHJ1ZVxuICAgIGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoY29uQ2hlY2ssIGNhcmQpXG4gICAgY29uc3QgaHRtbENoZWNrID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgIENvQzdSb2xsLmdldEZyb21FbGVtZW50KGh0bWxDaGVjaywgY29uQ2hlY2suY2hlY2spXG4gICAgY29uQ2hlY2subWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgcmV0dXJuIGNvbkNoZWNrXG4gIH1cblxuICBhc3luYyBnZXRDaGVja0VsZW1lbnQgKCkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcy5jaGVjaylcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG4gICAgaWYgKGh0bWxFbGVtZW50KSB7XG4gICAgICBodG1sRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjaGF0LWNhcmQnLCAnaXRlbS1jYXJkJywgJ3JvbGwtY2FyZCcpXG4gICAgICByZXR1cm4gaHRtbEVsZW1lbnRcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb24tY2hlY2suaHRtbCdcblxuICAgIGlmIChmYXN0Rm9yd2FyZCkge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsQ29uKClcbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgaWYgKGZhc3RGb3J3YXJkKSB7XG4gICAgICBjb25zdCBjaGVjayA9IGh0bWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgICBjaGVjay5yZXBsYWNlV2l0aChhd2FpdCB0aGlzLmdldENoZWNrRWxlbWVudCgpKVxuICAgIH1cblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBsZXQgc3BlYWtlclxuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuXG4gICAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgZmxhdm9yOiB0aGlzLmZsYXZvcixcbiAgICAgIGNvbnRlbnQ6IGh0bWxFbGVtZW50Lm91dGVySFRNTFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG4gICAgKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJykgLy8gQ2hhbmdlIGZvciB1c2VyXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcm9sbENvbiAoKSB7XG4gICAgdGhpcy5jaGVjay5oaWRlRGljZVJlc3VsdCA9IHRydWVcbiAgICBhd2FpdCB0aGlzLmNoZWNrLl9wZXJmb3JtKClcbiAgICBpZiAoIXRoaXMuaXNCbGluZCAmJiAhdGhpcy5pc1JvbGxlZCAmJiAhdGhpcy5pc1N1Y2Nlc3MpIHtcbiAgICAgIGlmICh0aGlzLnN0YXlBbGl2ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYXBwbGllZCA9IHRydWVcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29uLWNoZWNrLmh0bWwnXG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgY29uc3QgY2hlY2sgPSBodG1sRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgIGNoZWNrLnJlcGxhY2VXaXRoKGF3YWl0IHRoaXMuZ2V0Q2hlY2tFbGVtZW50KCkpXG5cbiAgICBpZiAoIXRoaXMuaXNCbGluZCAmJiB0aGlzLmlzUm9sbGVkICYmICF0aGlzLmlzU3VjY2Vzcykge1xuICAgICAgaWYgKHRoaXMuc3RheUFsaXZlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmRlYWQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSByZXR1cm5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbEVsZW1lbnQub3V0ZXJIVE1MIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSAqL1xuZXhwb3J0IGNsYXNzIFNraWxsU2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5zZWxlY3Qtc2tpbGwnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0U2tpbGxDbGlja2VkKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdFNraWxsQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCB0aGlzLmRhdGEuZGF0YS5hY3RvcklkKTtcbiAgICAvLyBhd2FpdCBhY3Rvci5hZGRTa2lsbCggdGhpcy5kYXRhLmRhdGEuc2tpbGxzW051bWJlcihsaS5kYXRhc2V0LmluZGV4KV0sIHRoaXMuZGF0YS5kYXRhLnR5cGUpO1xuICAgIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLnNlbGVjdGVkID0gdHJ1ZVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYWRkZWQpIHRoaXMuZGF0YS5kYXRhLmFkZGVkID0gMFxuICAgIHRoaXMuZGF0YS5kYXRhLmFkZGVkKytcbiAgICBjb25zdCBmb3JtID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuc2tpbGwtc2VsZWN0b3InKVxuICAgIGNvbnN0IGRpdkNvdW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuY291bnQnKVxuICAgIGRpdkNvdW50LmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmFkZGVkXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmFkZGVkID49IHRoaXMuZGF0YS5kYXRhLm9wdGlvbnNDb3VudCkge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtc2VsZWN0Lmh0bWwnLFxuICAgICAgZGF0YVxuICAgICkgLy8gUmVuZGVyIHRlbXBsYXRlIGJ1ZyBhdmVjIGNlcnRhaW5lcyBkYXRhXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IFNraWxsU2VsZWN0RGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWRhdGEuYWRkZWQgPj0gZGF0YS5vcHRpb25zQ291bnQpIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBkYXRhLnNraWxscy5maWx0ZXIoc2tpbGwgPT4gc2tpbGwuc2VsZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShzZWxlY3RlZClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdza2lsbC1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFBvaW50U2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLW5hbWUnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25CdXR0b25DbGlja2VkKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUxpc3QgPSBsaS5jbG9zZXN0KCcuaXRlbS1saXN0JylcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbUxpc3QucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdGFibGUnKSkge1xuICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbaXRlbS5kYXRhc2V0LmtleV0uc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLm9wdGlvbmFsID0gZmFsc2VcbiAgICB9XG4gICAgJChsaSkudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJylcbiAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLnNlbGVjdGVkID0gdHJ1ZVxuICAgIGNvbnN0IHRvdGFsUG9pbnRzID0gbGlcbiAgICAgIC5jbG9zZXN0KCcjc2tpbGwtc2VsZWN0aW9uLWZvcm0nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5wb2ludHMnKVxuICAgIHRvdGFsUG9pbnRzLmlubmVyVGV4dCA9XG4gICAgICB0aGlzLmRhdGEuZGF0YS50b3RhbCArXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLm11bHRpcGxpZXIgKlxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLnZhbHVlXG4gICAgY29uc3QgYnV0dG9uID0gbGlcbiAgICAgIC5jbG9zZXN0KCcjc2tpbGwtc2VsZWN0aW9uLWZvcm0nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi52YWxpZGF0ZScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcbiAgICB0aGlzLmRhdGEuZGF0YS5yZXNvbHZlZCA9IHRydWVcbiAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggdGhpcy5kYXRhLmRhdGEuYWN0b3JJZCk7XG4gICAgLy8gYXdhaXQgYWN0b3IuYWRkU2tpbGwoIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLCB0aGlzLmRhdGEuZGF0YS50eXBlKTtcbiAgICAvLyBldmVudC5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgLy8gaWYoICF0aGlzLmRhdGEuZGF0YS5hZGRlZCkgdGhpcy5kYXRhLmRhdGEuYWRkZWQgPSAwO1xuICAgIC8vIHRoaXMuZGF0YS5kYXRhLmFkZGVkKys7XG4gICAgLy8gY29uc3QgZm9ybSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvaW50LXNlbGVjdG9yJyk7XG4gICAgLy8gY29uc3QgZGl2Q291bnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5jb3VudCcpO1xuICAgIC8vIGRpdkNvdW50LmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmFkZGVkO1xuICAgIC8vIGlmKCB0aGlzLmRhdGEuZGF0YS5hZGRlZCA+PSB0aGlzLmRhdGEuZGF0YS5vcHRpb25zKSB0aGlzLmNsb3NlKCk7XG4gICAgLy8gcmV0dXJuIGV2ZW50O1xuICB9XG5cbiAgYXN5bmMgX29uQnV0dG9uQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cbiAgICBzdXBlci5jbG9zZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9wb2ludC1zZWxlY3QuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBQb2ludFNlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEucmVzb2x2ZWQpIHJldHVybiByZXNvbHZlKGRhdGEpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgQ2hhcmFjU2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLW5hbWUnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICB0aGlzLmRhdGEuZGF0YS5zZWxlY3RlZCA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jaGFyLXNlbGVjdC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENoYXJhY1NlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEuc2VsZWN0ZWQpIHJldHVybiByZXNvbHZlKGRhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsICovXG5leHBvcnQgY2xhc3MgQ2hhcmFjUm9sbERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBvcHRpb25zKSB7XG4gICAgc3VwZXIoZGF0YSwgb3B0aW9ucylcblxuICAgIHRoaXMucm9sbGVkID0gZGF0YS5yb2xsZWQgfHwge31cbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLm9uKCdjaGFuZ2UnLCAnaW5wdXQnLCB0aGlzLl9vbkNoYW5nZUlucHV0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignc3VibWl0JywgJ2Zvcm0nLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uUm9sbENoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmluY3JlYXNlLWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5kZWNyZWFzZS1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucmVzZXQtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25SZXNldENoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnYnV0dG9uJywgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLmluY3JlYXNlQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMuZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25SZXNldENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5yZXNldENoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBhY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgaWYgKGFjdGlvbiA9PT0gJ3JvbGwnKSB7XG4gICAgICBmb3IgKGNvbnN0IGNoYXIgb2YgW1xuICAgICAgICAnc3RyJyxcbiAgICAgICAgJ2NvbicsXG4gICAgICAgICdzaXonLFxuICAgICAgICAnZGV4JyxcbiAgICAgICAgJ2FwcCcsXG4gICAgICAgICdpbnQnLFxuICAgICAgICAncG93JyxcbiAgICAgICAgJ2VkdScsXG4gICAgICAgICdsdWNrJ1xuICAgICAgXSkge1xuICAgICAgICBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICAgIGlmIChhY3Rpb24gPT09ICd2YWxpZGF0ZScgJiYgdGhpcy5kYXRhLmRhdGEudmFsaWRhdGUpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGNvbnN0IGZvcm11bGEgPSB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHNba2V5XVxuICAgIGlmIChpbnB1dCAmJiBmb3JtdWxhKSB7XG4gICAgICBpZiAoaXNOYU4oTnVtYmVyKGZvcm11bGEpKSkge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZm9ybXVsYSlcbiAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIHJvbGwudG9NZXNzYWdlKHtcbiAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZVJvbGxpbmdDaGFyYWN0ZXJpc3RpYycsIHtcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdFtrZXldLmxhYmVsLFxuICAgICAgICAgICAgZm9ybXVsYVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIGlucHV0LnZhbHVlID0gcm9sbC50b3RhbFxuICAgICAgfSBlbHNlIGlucHV0LnZhbHVlID0gTnVtYmVyKGZvcm11bGEpXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgICBpZiAoIXRoaXMucm9sbGVkKSB0aGlzLnJvbGxlZCA9IHt9XG4gICAgICB0aGlzLnJvbGxlZFtrZXldID0gdHJ1ZVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgaW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpICsgMVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCAmJiBOdW1iZXIoaW5wdXQudmFsdWUpID4gMCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpIC0gMVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgcmVzZXRDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBudWxsXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSAwXG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VJbnB1dCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaW5wdXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNbaW5wdXQubmFtZV0gPSB2YWx1ZVxuICAgIH1cblxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBjaGVja1RvdGFsICgpIHtcbiAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsID0gMFxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1xuICAgICkpIHtcbiAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsICs9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLnBvaW50cycpXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCkge1xuICAgICAgaWYgKFxuICAgICAgICBOdW1iZXIodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCkgIT09XG4gICAgICAgIE51bWJlcih0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIHZhbGlkYXRpb24uY2xhc3NMaXN0LmFkZCgnd2FybmluZycpXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlID0gZmFsc2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbGlkYXRpb24uY2xhc3NMaXN0LnJlbW92ZSgnd2FybmluZycpXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlID0gdHJ1ZVxuICAgICAgfVxuICAgICAgY29uc3QgdmFsdWUgPSB2YWxpZGF0aW9uLnF1ZXJ5U2VsZWN0b3IoJy52YWx1ZScpXG4gICAgICB2YWx1ZS5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlXG4gICAgfVxuXG4gICAgY29uc3QgdG90YWwgPSB2YWxpZGF0aW9uLnF1ZXJ5U2VsZWN0b3IoJy50b3RhbCcpXG4gICAgdG90YWwuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbFxuXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9IE9iamVjdC52YWx1ZXModGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcykuZmlsdGVyKHZhbCA9PiBpc05hTihwYXJzZUludCh2YWwpKSkubGVuZ3RoID09PSAwXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uU3VibWl0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBjb25zdCByb2xsZWQgPSB7fVxuICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCA9IDBcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMpKSB7XG4gICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsICs9IHZhbHVlIHx8IDBcbiAgICAgIH1cbiAgICAgIGlmICghaXNOYU4odmFsdWUpICYmIHZhbHVlID4gMCkge1xuICAgICAgICByb2xsZWRba2V5XSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgTnVtYmVyKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCkgIT09XG4gICAgICAgIE51bWJlcihkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudmFsdWUpXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5wb2ludHNXYXJuaW5nID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY2hhci1yb2xsLmh0bWwnLFxuICAgICAgZGF0YVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgQ2hhcmFjUm9sbERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICByb2xsZWQsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnZhbGlkYXRlKSByZXR1cm4gcmVzb2x2ZSh0cnVlKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cbmV4cG9ydCBjbGFzcyBTa2lsbFNwZWNTZWxlY3REaWFsb2cge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChcbiAgICBza2lsbHMsXG4gICAgc3BlY2lhbGl6YXRpb25OYW1lLFxuICAgIGJhc2VWYWx1ZSA9IG51bGwsXG4gICAgbmFtZSA9IG51bGxcbiAgKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC1zcGVjLXNlbGVjdC5odG1sJyxcbiAgICAgIHtcbiAgICAgICAgaGFzU2tpbGxzOiBza2lsbHMubGVuZ3RoID4gMCxcbiAgICAgICAgc2tpbGxzLFxuICAgICAgICBiYXNlOiBiYXNlVmFsdWUsXG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBuYW1lXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNraWxsU2VsZWN0QmFzZScsIHsgbmFtZSB9KVxuICAgICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNwZWNTZWxlY3RUaXRsZScsIHtcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOiBzcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgICB9KSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NraWxsLXNlbGVjdC1mb3JtJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmb3JtRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICd2YWxpZGF0ZScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSAqL1xuXG5leHBvcnQgY2xhc3MgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2tpbGwtbmFtZS1kaWFsb2cnXSxcbiAgICAgIHRpdGxlOiAnJyxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNwZWNpYWxpemF0aW9uLXNlbGVjdC5oYnMnLFxuICAgICAgd2lkdGg6IDQwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHRpdGxlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNwZWNTZWxlY3RUaXRsZScsIHtcbiAgICAgIHNwZWNpYWxpemF0aW9uOiB0aGlzLm9iamVjdC5zcGVjaWFsaXphdGlvbk5hbWVcbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcuc3VibWl0LWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQ2xpY2tTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ1tuYW1lPWV4aXN0aW5nLXNraWxsXScpLmNoYW5nZSh0aGlzLl9vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0Q2hhbmdlIChldmVudCkge1xuICAgIHRoaXMub2JqZWN0LnNlbGVjdGVkID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25DbGlja1N1Ym1pdCAoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5vYmplY3Quc2VsZWN0ZWQgPT09ICcnKSB7XG4gICAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJ2Zvcm0nKVxuICAgICAgdGhpcy5vYmplY3QubmFtZSA9IChvYmouZmluZCgnaW5wdXRbbmFtZT1uZXctc2tpbGwtbmFtZV0nKS52YWwoKSA/PyAnJylcbiAgICAgIHRoaXMub2JqZWN0LmJhc2VWYWx1ZSA9IChvYmouZmluZCgnaW5wdXRbbmFtZT1iYXNlLXZhbHVlXScpLnZhbCgpID8/ICcnKVxuICAgIH1cbiAgICBpZiAodGhpcy5vYmplY3Quc2VsZWN0ZWQgPT09ICcnICYmIHRoaXMub2JqZWN0Lm5hbWUgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgdGhpcy5vYmplY3QucmVzb2x2ZSh7XG4gICAgICBzZWxlY3RlZDogdGhpcy5vYmplY3Quc2VsZWN0ZWQsXG4gICAgICBuYW1lOiB0aGlzLm9iamVjdC5uYW1lLFxuICAgICAgYmFzZVZhbHVlOiB0aGlzLm9iamVjdC5iYXNlVmFsdWVcbiAgICB9KVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICh7IHNraWxscyA9IFtdLCBhbGxvd0N1c3RvbSA9IGZhbHNlLCBmaXhlZEJhc2VWYWx1ZSA9IGZhbHNlLCBzcGVjaWFsaXphdGlvbk5hbWUgPSAnJywgbGFiZWwgPSAnJywgYmFzZVZhbHVlID0gbnVsbCB9ID0ge30pIHtcbiAgICBjb25zdCBzZWxlY3QgPSBbXVxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygc2tpbGxzKSB7XG4gICAgICBzZWxlY3QucHVzaCh7XG4gICAgICAgIGlkOiBza2lsbC5pZCxcbiAgICAgICAgbmFtZTogc2tpbGwubmFtZSxcbiAgICAgICAgYmFzZTogc2tpbGwuc3lzdGVtLmJhc2VcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIG5ldyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nKHtcbiAgICAgICAgc3BlY2lhbGl6YXRpb25OYW1lLFxuICAgICAgICBhbGxvd0N1c3RvbSxcbiAgICAgICAgZml4ZWRCYXNlVmFsdWUsXG4gICAgICAgIGFsbG93U2VsZWN0OiBza2lsbHMubGVuZ3RoID4gMCxcbiAgICAgICAgc2tpbGxzOiBzZWxlY3QsXG4gICAgICAgIHNlbGVjdGVkOiAnJyxcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIGxhYmVsLFxuICAgICAgICBiYXNlVmFsdWUsXG4gICAgICAgIHJlc29sdmVcbiAgICAgIH0sIHt9KS5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cbmV4cG9ydCBjbGFzcyBTa2lsbFZhbHVlRGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAobmFtZSA9IG51bGwsIGJhc2VWYWx1ZSA9IG51bGwpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXZhbHVlLmh0bWwnLFxuICAgICAgeyBiYXNlOiBiYXNlVmFsdWUsIG5hbWUgfVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxWYWx1ZScsIHsgbmFtZSB9KSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NraWxsLXNlbGVjdC1mb3JtJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmb3JtRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICd2YWxpZGF0ZScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4vbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi9tZWxlZS10YXJnZXQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVSZXNvbHRpb24ge1xuICBjb25zdHJ1Y3RvciAoXG4gICAgaW5pdGlhdG9yTWVzc2FnZSA9IG51bGwsXG4gICAgdGFyZ2V0TWVzc2FnZSA9IG51bGwsXG4gICAgbWVzc2FnZUlkID0gbnVsbFxuICApIHtcbiAgICB0aGlzLmluaXRpYXRvck1lc3NhZ2UgPSBpbml0aWF0b3JNZXNzYWdlXG4gICAgdGhpcy50YXJnZXRNZXNzYWdlID0gdGFyZ2V0TWVzc2FnZVxuICAgIHRoaXMubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gIH1cblxuICBhc3luYyBwcmVDcmVhdGVNZXNzYWdlICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIC8vIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHthY3RvcjogdGhpcy5hY3Rvcn0pO1xuICAgIC8vIGlmKCB0aGlzLmFjdG9yLmlzVG9rZW4pIHNwZWFrZXIuYWxpYXMgPSB0aGlzLmFjdG9yLnRva2VuLm5hbWU7XG5cbiAgICAvLyBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyO1xuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgLy8gQWRkIGltYWdlIHRvIGNhcmQuXG4gICAgLy8gZGF0YS5mbGFncyA9IHtcbiAgICAvLyAgIGltZzogdGhpcy5hY3Rvci5pc1Rva2VuID8gdGhpcy5hY3Rvci50b2tlbi5kYXRhLmltZzogdGhpcy5hY3Rvci5pbWdcbiAgICAvLyB9O1xuXG4gICAgY29uc3Qgcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggcm9sbE1vZGUgPT09ICdibGluZHJvbGwnICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICAgIHRoaXMubWVzc2FnZUlkID0gY2hhdE1lc3NhZ2UuaWRcbiAgICByZXR1cm4gY2hhdE1lc3NhZ2VcbiAgfVxuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0IHRhcmdldCAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0TWVzc2FnZSkge1xuICAgICAgcmV0dXJuIENvQzdNZWxlZVRhcmdldC5nZXRGcm9tTWVzc2FnZUlkKHRoaXMudGFyZ2V0TWVzc2FnZSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0KSByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy50YXJnZXQuYWN0b3JLZXkpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBpbml0aWF0b3IgKCkge1xuICAgIGlmICh0aGlzLmluaXRpYXRvck1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZCh0aGlzLmluaXRpYXRvck1lc3NhZ2UpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaW5pdGlhdG9yVG9rZW4gKCkge1xuICAgIGlmICh0aGlzLmluaXRpYXRvcikge1xuICAgICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuaW5pdGlhdG9yLmFjdG9yS2V5KVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgcmVzb2x2ZSAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICBzd2l0Y2ggKHRoaXMudGFyZ2V0LmFjdGlvbikge1xuICAgICAgICBjYXNlICdub1Jlc3BvbnNlJzpcbiAgICAgICAgICBpZiAodGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ3JvbGwtbWVsZWUtZGFtYWdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhdG9yTWlzc2VkJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2RvZGdlJzpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwICYmXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IG51bGxcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ3JvbGwtbWVsZWUtZGFtYWdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRvZGdlU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQuc2tpbGwuaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQuc2tpbGwubmFtZVxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSAnZG9kZ2UnXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwICYmXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IG51bGxcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID49IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHZlcmlmaWVyIGxhIGNvbmRpdGlvbiA8PSB2cyA8XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdtYW5ldXZlcic6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQuc2tpbGwuZGF0YS5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLnRhcmdldC5za2lsbC5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiAwKSB7XG4gICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgfSlcbiAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYXRvck1pc3NlZCcsIHtcbiAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgfSlcbiAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMud2lubmVyKSB7XG4gICAgICBpZiAodGhpcy53aW5uZXIucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lICYmIHRoaXMud2lubmVyLnJvbGwuc2lkZSA9PT0gJ2luaXRpYXRvcicpIHtcbiAgICAgICAgdGhpcy53aW5uZXIucm9sbC5jcml0aWNhbERhbWFnZSA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMud2lubmVyLnJvbGwuY3JpdGljYWxEYW1hZ2UgPSBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG4gICAgaWYgKHRoaXMubWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgICBpZiAodGhpcy53aW5uZXIpIHtcbiAgICAgICAgaWYgKHRoaXMud2lubmVyLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMud2lubmVyLnRva2VuLmRvY3VtbWVudFxuICAgICAgICBpZiAodGhpcy53aW5uZXIuYWN0b3IpIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy53aW5uZXIuYWN0b3JcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB0aGlzLndpbm5lciA/IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpIDogbnVsbFxuICAgICAgY29uc3QgdXNlciA9XG4gICAgICAgIHRoaXMud2lubmVyICYmIHRoaXMud2lubmVyLmFjdG9yLnVzZXJcbiAgICAgICAgICA/IHRoaXMud2lubmVyLmFjdG9yLnVzZXJcbiAgICAgICAgICA6IGdhbWUudXNlclxuXG4gICAgICBsZXQgbXNnXG4gICAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgICAgLy8gVE9ETzogSWYgY2FyZCBpc24ndCBmb3VuZCAoY2FyZCB3YXMgZGVsZXRlZCBiZWZvcmUgY29tcGxldGlvbikgP1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ1Jlc29saXRpb24gY2FyZCBtaXNzaW5nLCB3YXMgZGVsZXRlZCA/JylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoc3BlYWtlcikge1xuICAgICAgICBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7XG4gICAgICAgICAgLy8gVE9ETzogSWYgY2FyZCBpc24ndCBmb3VuZCAoY2FyZCB3YXMgZGVsZXRlZCBiZWZvcmUgY29tcGxldGlvbikgP1xuICAgICAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICAgICAgc3BlYWtlcixcbiAgICAgICAgICBjb250ZW50OiBodG1sXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7XG4gICAgICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgICAgICBjb250ZW50OiBodG1sXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICAgIHJldHVybiBtc2dcbiAgICB9XG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmh0bWwnXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgQ09OU1QsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vLi4vY2hhdC5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi9tZWxlZS1pbml0aWF0b3IuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVUYXJnZXQgZXh0ZW5kcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5LCBwYXJlbnRNZXNzYWdlSWQgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgc3VwZXIoYWN0b3JLZXksIGZhc3RGb3J3YXJkKVxuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuaW5pdGlhdG9yS2V5ID0gbnVsbFxuICAgIHRoaXMucGFyZW50TWVzc2FnZUlkID0gcGFyZW50TWVzc2FnZUlkXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG5cbiAgICB0aGlzLm91dG51bWJlcmVkID0gZmFsc2VcbiAgICB0aGlzLnN1cnByaXNlZCA9IGZhbHNlXG4gICAgdGhpcy5hdXRvU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5kaWNlTW9kaWZpZXIgPSAwXG5cbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnNraWxsSWQgPSBudWxsXG4gICAgdGhpcy5pdGVtSWQgPSBudWxsXG4gICAgdGhpcy5kb2RnaW5nID0gZmFsc2VcbiAgICB0aGlzLm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgIHRoaXMuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICB0aGlzLm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgfVxuXG4gIGdldCBhY3Rpb25TZWxlY3RlZCAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZG9kZ2luZyB8fFxuICAgICAgdGhpcy5ub3RSZXNwb25kaW5nIHx8XG4gICAgICB0aGlzLmZpZ2h0aW5nQmFjayB8fFxuICAgICAgdGhpcy5tYW5ldXZlcmluZ1xuICAgIClcbiAgfVxuXG4gIGdldCBhY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmRvZGdpbmcpIHJldHVybiAnZG9kZ2UnXG4gICAgaWYgKHRoaXMubm90UmVzcG9uZGluZykgcmV0dXJuICdub1Jlc3BvbnNlJ1xuICAgIGlmICh0aGlzLmZpZ2h0aW5nQmFjaykgcmV0dXJuICdmaWdodEJhY2snXG4gICAgaWYgKHRoaXMubWFuZXV2ZXJpbmcpIHJldHVybiAnbWFuZXV2ZXInXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcbiAgfVxuXG4gIHNldCBpbml0aWF0b3JLZXkgKHgpIHtcbiAgICB0aGlzLl9pbml0aWF0b3JLZXkgPSB4XG4gICAgdGhpcy50YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgaW5pdGlhdG9yS2V5ICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYXRvcktleSkge1xuICAgICAgaWYgKCF0aGlzLl9pbml0aWF0b3IgJiYgdGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2luaXRpYXRvcikgdGhpcy5faW5pdGlhdG9yS2V5ID0gdGhpcy5faW5pdGlhdG9yLmFjdG9yS2V5XG4gICAgfVxuICAgIGlmICghdGhpcy5faW5pdGlhdG9yS2V5KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgTm8gaW5pdGlhdG9yIGZvdW5kIGZvciB0YXJnZXQgOiAke3RoaXMuYWN0b3IubmFtZX1gXG4gICAgICApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faW5pdGlhdG9yS2V5XG4gIH1cblxuICBnZXQgaW5pdGlhdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhdG9yS2V5KSB7XG4gICAgICBpZiAodGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmluaXRpYXRvcktleSA9IHRoaXMuX2luaXRpYXRvci5hY3RvcktleVxuICAgICAgfSBlbHNlIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmluaXRpYXRvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbWVsZWVJbml0aWF0b3IgKCkge1xuICAgIGlmICghdGhpcy5faW5pdGlhdG9yKSB7XG4gICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2luaXRpYXRvclxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0Lmh0bWwnXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQsIG1lc3NhZ2VJZClcbiAgICB0YXJnZXQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG5cbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLm1lbGVlLnRhcmdldCcpXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxuXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xuICAgICAgY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSAhPT0gJ3RydWUnXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXG4gICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgIHRhcmdldC50b2dnbGVGbGFnKGZsYWcpXG4gICAgICB0YXJnZXQudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZyA9IGZsYWdOYW1lLmluY2x1ZGVzKCctJylcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcbiAgICAgIDogZmxhZ05hbWVcbiAgICB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgICBzd2l0Y2ggKGZsYWcpIHtcbiAgICAgIGNhc2UgJ291dG51bWJlcmVkJzpcbiAgICAgIGNhc2UgJ3N1cnByaXNlZCc6XG4gICAgICAgIHRoaXMuZGljZU1vZGlmaWVyID0gTWF0aC5tYXgoLTIsIE1hdGgubWluKDIsIHBhcnNlSW50KHRoaXMuZGljZU1vZGlmaWVyLCAxMCkgKyAodGhpc1tmbGFnXSA/IDEgOiAtMSkpKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBjb25zdCB0b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKHRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRva2VuLmRvY3VtZW50XG4gICAgZWxzZSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcblxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4pIHNwZWFrZXIuYWxpYXMgPSB0aGlzLmFjdG9yLnRva2VuLm5hbWVcblxuICAgIGxldCB1c2VyID0gZ2FtZS51c2VyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmFjdG9yLnVzZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsZXQgb3duZXJzID0gW11cbiAgICAgIGNvbnN0IGdtcyA9IGdhbWUudXNlcnMuZmlsdGVyKGEgPT4gYS5pc0dNKS5tYXAoYSA9PiBhLmlkKVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5hY3Rvci5vd25lcnNoaXApKSB7XG4gICAgICAgIGlmICh2ID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKSB7XG4gICAgICAgICAgaWYgKGsgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgb3duZXJzID0gZ2FtZS51c2Vycy5tYXAoYSA9PiBhLmlkKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFnbXMuaW5jbHVkZXMoaykpIHtcbiAgICAgICAgICAgIG93bmVycy5wdXNoKGspXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgY29udGVudCA9ICcnXG4gICAgICBzd2l0Y2ggKG93bmVycy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIC8vIEdNXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmICh0eXBlb2YgZ2FtZS51c2Vycy5nZXQob3duZXJzWzBdKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVzZXIgPSBnYW1lLnVzZXJzLmdldChvd25lcnNbMF0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0U2luZ2xlVXNlckZvclRhcmdldCcpXG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICAgICAgICBmb3IgKGNvbnN0IGsgb2Ygb3duZXJzKSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gZ2FtZS51c2Vycy5nZXQoaylcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNvbnRlbnQgK1xuICAgICAgICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiJyArXG4gICAgICAgICAgICAgICAgayArXG4gICAgICAgICAgICAgICAgJ1wiPicgK1xuICAgICAgICAgICAgICAgIHVzZXIubmFtZSArXG4gICAgICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLnByb21wdCh7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RTaW5nbGVVc2VyRm9yVGFyZ2V0J1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHVzZXIgPSBnYW1lLnVzZXJzLmdldCh2YWx1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuYWN0b3IudXNlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVzZXIgPSB0aGlzLmFjdG9yLnVzZXJcbiAgICB9XG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggdGhpcy5pc0JsaW5kICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG5cbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuaWRcbiAgICByZXR1cm4gbWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNICYmIG1lc3NhZ2UudXNlci5pZCAhPT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0ludGVyYWN0V2l0aENoYXRDYXJkJylcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIGFzeW5jIGdldFVwZGF0ZWRDaGF0Q2FyZCAoKSB7XG4gICAgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcykudGhlbihodG1sID0+IHtcbiAgICAgIHJldHVybiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVTZWxlY3RlZCAoY2FyZCwgZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnZG9kZ2UnOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0Lm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdub1Jlc3BvbnNlJzpcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gbnVsbFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IHRydWVcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbklkXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ21hbmV1dmVyJzpcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSB0cnVlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgdGFyZ2V0Lml0ZW1JZCA9IG51bGxcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICB0YXJnZXQudXBkYXRlQ2hhdENhcmQoKVxuXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXG4gICAgY2hlY2suYWN0aW9uID0gdGhpcy5hY3Rpb25cbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSB0aGlzLmRpY2VNb2RpZmllclxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBpZiAocHVibGlzaCkgY2hlY2sudG9NZXNzYWdlKClcblxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaE5vUmVwb25zZVJlc3VsdCAoKSB7XG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICB0aGlzLm5vdFJlc3BvbmRpbmcgPSB0cnVlXG4gICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgIClcblxuICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG5cbiAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hDaGVja1Jlc3VsdCAoY2hlY2sgPSBudWxsKSB7XG4gICAgaWYgKCFjaGVjayAmJiAhdGhpcy5jaGVjaykgcmV0dXJuIG51bGxcblxuICAgIGlmIChjaGVjaykgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNoZWNrKHRoaXMuY2hlY2spXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICB0aGlzLnJvbGwucm9sbEljb25zID0gW11cbiAgICBpZiAodGhpcy5yb2xsLmNyaXRpY2FsKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnbWVkYWwnKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLmZ1bWJsZSkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdkYXJrcmVkJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzcGlkZXInKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLnN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzdGFyJylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdibGFjaydcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NrdWxsJylcbiAgICB9XG5cbiAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgIHRoaXMubWVzc2FnZUlkXG4gICAgKVxuICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG5cbiAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IGFjdG9yS2V5ID0gY2FyZC5kYXRhc2V0LmFjdG9yS2V5XG4gICAgY29uc3QgcGFyZW50TWVzc2FnZUlkID0gY2FyZC5kYXRhc2V0LnBhcmVudE1lc3NhZ2VJZFxuICAgIGNvbnN0IGZhc3RGb3J3YXJkID0gY2FyZC5kYXRhc2V0LmZhc3RGb3J3YXJkID09PSAndHJ1ZSdcbiAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN01lbGVlVGFyZ2V0KGFjdG9yS2V5LCBwYXJlbnRNZXNzYWdlSWQsIGZhc3RGb3J3YXJkKVxuXG4gICAgdGFyZ2V0LnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQodGFyZ2V0LCBjYXJkKVxuXG4gICAgaWYgKGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKSkge1xuICAgICAgdGFyZ2V0Lm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIH0gZWxzZSB0YXJnZXQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkaWRuJ3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5yb2xsLnZhbHVlID0gbnVsbFxuICAgIHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICB0aGlzLnJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIG9sZENhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSBmYWxzZVxuXG4gICAgY29uc3QgZGljZVJvbGxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yb2xsJylcbiAgICBkaWNlUm9sbHMuZGF0YXNldC52YWx1ZSA9IG51bGxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5sdWNrU3BlbnQgPSB0cnVlXG5cbiAgICBjb25zdCByZXN1bERldGFpbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG4gICAgY29uc3QgZGljZVRvdGFsID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGRpY2VUb3RhbC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChvbGRDYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGZvdW5kcnksIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCwgQ29DN0RhbWFnZSB9IGZyb20gJy4vaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdSYW5nZUluaXRpYXRvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIGl0ZW1JZCA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLml0ZW1JZCA9IGl0ZW1JZFxuICAgIHRoaXMuZmFzdEZvcndhcmQgPSBmYXN0Rm9yd2FyZFxuICAgIHRoaXMucmVzb2x2ZWQgPSBmYWxzZVxuICAgIHRoaXMuY292ZXIgPSBmYWxzZVxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcbiAgICB0aGlzLmF1dG9TdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnRhcmdldENhcmQgPSBudWxsXG4gICAgdGhpcy5yb2xsZWQgPSBmYWxzZVxuICAgIHRoaXMuc2luZ2xlU2hvdCA9IGZhbHNlXG4gICAgdGhpcy5tdWx0aXBsZVNob3RzID0gZmFsc2VcbiAgICB0aGlzLmJ1cnN0ID0gZmFsc2VcbiAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcbiAgICB0aGlzLnRva2VuS2V5ID0gbnVsbFxuICAgIHRoaXMuYWltZWQgPSBmYWxzZVxuICAgIHRoaXMuYm9udXNEaWVBID0gZmFsc2VcbiAgICB0aGlzLmJvbnVzRGllQiA9IGZhbHNlXG4gICAgdGhpcy5wZW5hbHR5RGllQSA9IGZhbHNlXG4gICAgdGhpcy5wZW5hbHR5RGllQiA9IGZhbHNlXG4gICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9IDBcbiAgICB0aGlzLl90YXJnZXRzID0gW11cbiAgICBmb3IgKGNvbnN0IHQgb2YgWy4uLmdhbWUudXNlci50YXJnZXRzXSkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdSYW5nZVRhcmdldChgJHt0LnNjZW5lLmlkfS4ke3QuaWR9YCkgLy9cbiAgICAgIHRhcmdldC50b2tlbiA9IHRcbiAgICAgIHRoaXMuX3RhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuICAgIGlmICh0aGlzLl90YXJnZXRzLmxlbmd0aCkge1xuICAgICAgdGhpcy5fdGFyZ2V0cyA9IFt0aGlzLl90YXJnZXRzWzBdXVxuICAgICAgLy8gdGVtcG9yYXJpbHkgb25seSBhbGxvdyBvbmUgdGFyZ2V0XG4gICAgICB0aGlzLl90YXJnZXRzWzBdLmFjdGl2ZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdSYW5nZVRhcmdldCgpXG4gICAgICB0YXJnZXQuYWN0aXZlID0gdHJ1ZVxuICAgICAgdGhpcy5fdGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG4gICAgaWYgKGFjdG9yS2V5KSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHRoaXMudG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAodGhpcy50b2tlbikgdGhpcy50b2tlbktleSA9IGFjdG9yLnRva2VuS2V5XG4gICAgICBpZiAoaXRlbUlkKSB7XG4gICAgICAgIGNvbnN0IHdlYXBvbiA9IGFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICBpZiAodGhpcy53ZWFwb24uc2luZ2xlU2hvdCkge1xuICAgICAgICAgICAgdGhpcy5zaW5nbGVTaG90ID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYXV0bykge1xuICAgICAgICAgICAgdGhpcy5mdWxsQXV0byA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMudG9rZW5LZXkpIHtcbiAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLl90YXJnZXRzKSB7XG4gICAgICAgIGlmICh0LnRva2VuICYmIHRoaXMudG9rZW4pIHtcbiAgICAgICAgICB0LmRpc3RhbmNlID0gY2hhdEhlbHBlci5nZXREaXN0YW5jZSh0LnRva2VuLCB0aGlzLnRva2VuKVxuICAgICAgICAgIHQucm91bmRlZERpc3RhbmNlID0gTWF0aC5yb3VuZCh0LmRpc3RhbmNlLnZhbHVlICogMTAwKSAvIDEwMFxuICAgICAgICAgIHQuZGlzdGFuY2VVbml0ID0gdC5kaXN0YW5jZS51bml0XG4gICAgICAgICAgY29uc3QgZGlzdEluWWQgPVxuICAgICAgICAgICAgTWF0aC5yb3VuZChjaGF0SGVscGVyLnRvWWFyZHModC5kaXN0YW5jZSkgKiAxMDApIC8gMTAwXG4gICAgICAgICAgLy8gaWYoIGRpc3RJbllkKXtcbiAgICAgICAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgICAgICAgdC5wb2ludEJsYW5rUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgY29uc3QgcGJSYW5nZUluWWQgPVxuICAgICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlIC8gMTVcbiAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA8PSBwYlJhbmdlSW5ZZCkgdC50b2dnbGVGbGFnKCdwb2ludEJsYW5rUmFuZ2UnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodC5wb2ludEJsYW5rUmFuZ2UgIT09IHRydWUgJiYgdGhpcy53ZWFwb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHtcbiAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgdC5vdXRPZlJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmxvbmdSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgdC5sb25nUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5leHRyZW1lUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0Lm91dE9mUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiA0XG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogNCkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhKHQuYmFzZVJhbmdlIHx8IHQubG9uZ1JhbmdlIHx8IHQuZXh0cmVtZVJhbmdlIHx8IHQub3V0T2ZSYW5nZSlcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9IGVsc2UgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgYWN0b3JJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRzICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldHMpIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRzXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRzICYmIHRoaXMudGFyZ2V0cy5sZW5ndGgpIHJldHVybiB0aGlzLnRhcmdldHMucG9wKClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IG1haW5XZWFwb25Ta2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMud2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICB9XG5cbiAgZ2V0IGF1dG9XZWFwb25Ta2lsbCAoKSB7XG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy53ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICB9XG5cbiAgZ2V0IGF1dG9GaXJlICgpIHtcbiAgICByZXR1cm4gdGhpcy5idXJzdCB8fCB0aGlzLmZ1bGxBdXRvXG4gIH1cblxuICBnZXQgbXVsdGlUYXJnZXQgKCkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxBdXRvIHx8IHRoaXMubXVsdGlwbGVTaG90c1xuICB9XG5cbiAgZ2V0IGFpbWluZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYWltaW5nKSB7XG4gICAgICB0aGlzLl9haW1pbmcgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnYWltaW5nJylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FpbWluZ1xuICB9XG5cbiAgZ2V0IGFjdGl2ZVRhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRzLmxlbmd0aCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0cy5maW5kKHQgPT4gdC5hY3RpdmUpXG4gIH1cblxuICBnZXQgc2hvdHMgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3Nob3RzKSB0aGlzLl9zaG90cyA9IFtdXG4gICAgcmV0dXJuIHRoaXMuX3Nob3RzXG4gIH1cblxuICBnZXQgY3VycmVudFNob3RSYW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5zaG90cy5sZW5ndGggKyAxXG4gIH1cblxuICBnZXQgYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLnNob3REaWZmaWN1bHR5KClcbiAgfVxuXG4gIHNldCBhaW1pbmcgKGIpIHtcbiAgICB0aGlzLl9haW1pbmcgPSBiXG4gIH1cblxuICBnZXQgZGlkQW55U2hvdEhpdCAoKSB7XG4gICAgbGV0IGFueUhpdCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGFueUhpdCA9IGFueUhpdCB8fCByLmlzU3VjY2Vzc1xuICAgIH1cbiAgICByZXR1cm4gYW55SGl0XG4gIH1cblxuICBnZXQgc3VjY2Vzc2Z1bEhpdHMgKCkge1xuICAgIGNvbnN0IGhpdHMgPSBbXVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMucm9sbHNbaW5kZXhdLmlzU3VjY2Vzcykge1xuICAgICAgICBjb25zdCBoaXQgPSB7XG4gICAgICAgICAgcm9sbDogdGhpcy5yb2xsc1tpbmRleF0sXG4gICAgICAgICAgc2hvdDogdGhpcy5zaG90c1tpbmRleF1cbiAgICAgICAgfVxuICAgICAgICBoaXRzLnB1c2goaGl0KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGl0cy5sZW5ndGggIT09IDApIHJldHVybiBoaXRzXG4gICAgZWxzZSByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNob3RGaXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdHMgPyB0aGlzLnNob3RzLmxlbmd0aCA6IDBcbiAgfVxuXG4gIGdldCB0b3RhbEFtbW8gKCkge1xuICAgIHJldHVybiB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KClcbiAgfVxuXG4gIGdldCBtYXhTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuZnVsbEF1dG8pIHJldHVybiAn4oieJ1xuICAgIC8vIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heDtcblxuICAgIHJldHVybiB0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLm1heFxuICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLm1heClcbiAgICAgIDogMVxuICB9XG5cbiAgZ2V0IGlnbm9yZUFtbW8gKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRBbW1vJylcbiAgfVxuXG4gIGdldCBpZ25vcmVVc2VzUGVyUm91bmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRVc2VQZXJSb3VuZCcpXG4gIH1cblxuICBnZXQgb3V0T2ZBbW1vICgpIHtcbiAgICBpZiAodGhpcy5pZ25vcmVBbW1vKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy50b3RhbEJ1bGxldHNGaXJlZCA+PSB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KCkpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgb3V0T2ZTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuaWdub3JlVXNlc1BlclJvdW5kKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy5zaG90cykgcmV0dXJuIHRoaXMuc2hvdHMubGVuZ3RoID49IHRoaXMubWF4U2hvdHNcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCB2b2xsZXlTaXplICgpIHtcbiAgICBpZiAoIXRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8pIHJldHVybiAxXG4gICAgaWYgKHRoaXMuX3ZvbGxleVNpemUpIHJldHVybiB0aGlzLl92b2xsZXlTaXplXG4gICAgY29uc3Qgc2l6ZSA9IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICByZXR1cm4gc2l6ZSA8IDMgPyAzIDogc2l6ZVxuICB9XG5cbiAgc2V0IHZvbGxleVNpemUgKHgpIHtcbiAgICBpZiAoeCA+PSBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxuICAgIH0gZWxzZSBpZiAoeCA8PSAzKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gM1xuICAgIH1cbiAgICB0aGlzLl92b2xsZXlTaXplID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBpc1ZvbGxleU1pblNpemUgKCkge1xuICAgIGlmICh0aGlzLnZvbGxleVNpemUgPT09IDMpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNWb2xsZXlNYXhTaXplICgpIHtcbiAgICBjb25zdCBtYXhTaXplID1cbiAgICAgIE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMCkgPCAzXG4gICAgICAgID8gM1xuICAgICAgICA6IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICBpZiAobWF4U2l6ZSA9PT0gdGhpcy52b2xsZXlTaXplKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0VGFyZ2V0RnJvbUtleSAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldHMuZmluZCh0ID0+IGtleSA9PT0gdC5hY3RvcktleSlcbiAgfVxuXG4gIGNhbGNUYXJnZXRzRGlmZmljdWx0eSAoKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIHRoaXMudGFyZ2V0cykge1xuICAgICAgdC5zaG90RGlmZmljdWx0eSA9IHRoaXMuc2hvdERpZmZpY3VsdHkodClcbiAgICB9XG4gIH1cblxuICBnZXQgY2FsY3VsYXRlZEJvbnVzRGljZSAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9jYWxjdWxhdGVkTW9kaWZpZXIgPiAyID8gdGhpcy5fY2FsY3VsYXRlZE1vZGlmaWVyIDogMClcbiAgfVxuXG4gIGdldCBjYWxjdWxhdGVkUGVuYWx0eURpY2UgKCkge1xuICAgIHJldHVybiAodGhpcy5fY2FsY3VsYXRlZE1vZGlmaWVyIDwgLTIgPyAtdGhpcy5fY2FsY3VsYXRlZE1vZGlmaWVyIDogMClcbiAgfVxuXG4gIHNob3REaWZmaWN1bHR5ICh0ID0gbnVsbCkge1xuICAgIGNvbnN0IHRhcmdldCA9IHQgfHwgdGhpcy5hY3RpdmVUYXJnZXRcbiAgICBsZXQgZGFtYWdlID0gdGhpcy53ZWFwb24uc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2VcbiAgICBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bikge1xuICAgICAgaWYgKHQubG9uZ1JhbmdlKSBkYW1hZ2UgPSB0aGlzLndlYXBvbi5zeXN0ZW0ucmFuZ2UubG9uZy5kYW1hZ2VcbiAgICAgIGlmICh0LmV4dHJlbWVSYW5nZSkgZGFtYWdlID0gdGhpcy53ZWFwb24uc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlXG4gICAgfVxuICAgIGxldCBtb2RpZmllciA9IHBhcnNlSW50KHRhcmdldC5tb2RpZmllciwgMTApXG4gICAgbGV0IGRpZmZpY3VsdHlcbiAgICB0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuXG4gICAgICA/IChkaWZmaWN1bHR5ID0gMSlcbiAgICAgIDogKGRpZmZpY3VsdHkgPSB0YXJnZXQuZGlmZmljdWx0eSlcbiAgICBsZXQgZGlmZmljdWx0eU5hbWUgPSAnJ1xuICAgIGlmICh0aGlzLmFpbWluZyAmJiB0aGlzLmN1cnJlbnRTaG90UmFuayA9PT0gMSkgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLnJlbG9hZCkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLm11bHRpcGxlU2hvdHMgJiYgIXRoaXMuZnVsbEF1dG8pIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5mdWxsQXV0bykgbW9kaWZpZXIgLT0gdGhpcy5jdXJyZW50U2hvdFJhbmsgLSAxXG4gICAgaWYgKHRoaXMuYm9udXNEaWVBKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuYm9udXNEaWVCKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMucGVuYWx0eURpZUEpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5wZW5hbHR5RGllQikgbW9kaWZpZXItLVxuICAgIHRoaXMuX2NhbGN1bGF0ZWRNb2RpZmllciA9IG1vZGlmaWVyXG4gICAgaWYgKG1vZGlmaWVyIDwgLTIpIHtcbiAgICAgIGNvbnN0IGV4Y2VzcyA9IE1hdGguYWJzKG1vZGlmaWVyICsgMilcbiAgICAgIGRpZmZpY3VsdHkgKz0gZXhjZXNzXG4gICAgICBpZiAoZGlmZmljdWx0eSA+IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwpIHtcbiAgICAgICAgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgICAgfVxuICAgICAgbW9kaWZpZXIgPSAtMlxuICAgIH0gZWxzZSBpZiAobW9kaWZpZXIgPiAyKSB7XG4gICAgICBtb2RpZmllciA9IDJcbiAgICB9XG5cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID09PSBkaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5TmFtZSA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsRGlmZmljdWx0eVJlZ3VsYXInKX1gXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxEaWZmaWN1bHR5SGFyZCcpfWBcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpZmZpY3VsdHlFeHRyZW1lJyl9YFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpZmZpY3VsdHlDcml0aWNhbCcpfWBcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZSA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpZmZpY3VsdHlJbXBvc3NpYmxlJyl9YFxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBsZXZlbDogZGlmZmljdWx0eSxcbiAgICAgIG5hbWU6IGRpZmZpY3VsdHlOYW1lLFxuICAgICAgbW9kaWZpZXIsXG4gICAgICBkYW1hZ2UsXG4gICAgICBpbXBvc3NpYmxlOiBkaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvb3QgYXQgdGhlIGFjdGl2ZSB0YXJnZXQuIEFkZCBpdCB0byB0aGUgbGlzdCBvZiBzaG90cy5cbiAgICogVE9ETyA6IHJlY2FsY3VsZXIgbGEgZGlmZmljdWx0w6kgZGUgdG91cyBsZXMgc2hvdHMgIS5cbiAgICovXG4gIGFkZFNob3RBdEN1cnJlbnRUYXJnZXQgKCkge1xuICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICBjb25zdCBzaG90ID0ge1xuICAgICAgdGFyZ2V0OiB0aGlzLmFjdGl2ZVRhcmdldCxcbiAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0aXZlVGFyZ2V0LmFjdG9yS2V5LFxuICAgICAgYWN0b3JOYW1lOiB0aGlzLmFjdGl2ZVRhcmdldC5uYW1lLFxuICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXG4gICAgICBtb2RpZmllcjogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubW9kaWZpZXIsXG4gICAgICBkYW1hZ2U6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmRhbWFnZSxcbiAgICAgIGJ1bGxldHNTaG90OiAxLFxuICAgICAgdHJhbnNpdEJ1bGxldHM6IDAsXG4gICAgICBidWxsZXRzU2hvdFRyYW5zaXQ6IDEsXG4gICAgICB0cmFuc2l0OiBmYWxzZVxuICAgIH1cblxuICAgIGxldCBidWxsZXRMZWZ0ID0gdGhpcy50b3RhbEFtbW8gLSB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkXG5cbiAgICBpZiAodGhpcy5mdWxsQXV0bykge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFNob3RSYW5rID4gMSkge1xuICAgICAgICBjb25zdCBwcmV2aW91c1Nob3QgPSB0aGlzLnNob3RzW3RoaXMuY3VycmVudFNob3RSYW5rIC0gMl1cbiAgICAgICAgaWYgKHByZXZpb3VzU2hvdC5hY3RvcktleSAhPT0gdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXkpIHtcbiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGNoYXRIZWxwZXIuZ2V0RGlzdGFuY2UoXG4gICAgICAgICAgICBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShwcmV2aW91c1Nob3QuYWN0b3JLZXkpLFxuICAgICAgICAgICAgY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXkpXG4gICAgICAgICAgKVxuICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBNYXRoLmZsb29yKGNoYXRIZWxwZXIudG9ZYXJkcyhkaXN0YW5jZSkpXG4gICAgICAgICAgaWYgKHNob3QudHJhbnNpdEJ1bGxldHMgPj0gYnVsbGV0TGVmdCAmJiAhdGhpcy5pZ25vcmVBbW1vKSB7XG4gICAgICAgICAgICBzaG90LnRyYW5zaXRCdWxsZXRzID0gYnVsbGV0TGVmdFxuICAgICAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9XG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIHNob3QudHJhbnNpdEJ1bGxldHNcbiAgICAgICAgICBzaG90LnRyYW5zaXQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSB0aGlzLnZvbGxleVNpemVcbiAgICAgIGlmIChzaG90LmJ1bGxldHNTaG90IDw9IDMpIHNob3QuYnVsbGV0c1Nob3QgPSAzXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcbiAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgIH1cbiAgICAgIC8vIGJ1bGxldHNTaG90VHJhbnNpdCBpcyBmb3IgbG9jYWxpemluZyBDb0M3LlNob3RCdWxsZXRzIHVzaW5nIHBhcmFtZXRlcnMsIGxvY2FsaXplIGRvZXMgbm90IGFjY2VwdCBhZGRpbmcgYSBwYXJhbWV0ZXIgYXMgYSBzdW0gb2Ygc2hvdC5idWxsZXRzU2hvdCArIHNob3QudHJhbnNpdEJ1bGxldHMsIHNvIEkgY3JlYXRlIGEgbmV3IHZhbHVlIGluIGFkdmFuY2UgdG8gdXNlIGluc3RlYWRcbiAgICAgIHNob3QuYnVsbGV0c1Nob3RUcmFuc2l0ID0gc2hvdC5idWxsZXRzU2hvdCArIHNob3QudHJhbnNpdEJ1bGxldHNcbiAgICB9XG4gICAgaWYgKHRoaXMuYnVyc3QpIHtcbiAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgIDogMVxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPj0gYnVsbGV0TGVmdCAmJiAhdGhpcy5pZ25vcmVBbW1vKSB7XG4gICAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSBidWxsZXRMZWZ0XG4gICAgICAgIGJ1bGxldExlZnQgPSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9IHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgc2hvdC5idWxsZXRzU2hvdFxuXG4gICAgaWYgKHRoaXMuYWltaW5nKSB7XG4gICAgICB0aGlzLmFpbWluZyA9IGZhbHNlXG4gICAgICB0aGlzLmFpbWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvcmFuZ2UtaW5pdGlhdG9yLmh0bWwnXG4gIH1cblxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgLy8gY29uc3QgZWxlbWVudCA9ICQoaHRtbClbMF07XG4gICAgLy8gY29uc3QgdGFyZ2V0RWxlbWVudCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRhcmdldFRlc3QnKTtcbiAgICAvLyB0aGlzLnRhcmdldC5hdHRhY2hUb0VsZW1lbnQodGFyZ2V0RWxlbWVudCk7XG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAodG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdG9rZW4uZG9jdW1lbnRcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgLy8gaWYoIHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlci5hbGlhcyA9IHRoaXMuYWN0b3IudG9rZW4ubmFtZTtcblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGNvbnN0IHJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhyb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHJvbGxNb2RlID09PSAnYmxpbmRyb2xsJyApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZyA9IGZsYWdOYW1lLmluY2x1ZGVzKCctJylcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcbiAgICAgIDogZmxhZ05hbWVcbiAgICBpZiAoXG4gICAgICBmbGFnID09PSAnc2luZ2xlU2hvdCcgfHxcbiAgICAgIGZsYWcgPT09ICdtdWx0aXBsZVNob3RzJyB8fFxuICAgICAgZmxhZyA9PT0gJ2Z1bGxBdXRvJ1xuICAgICkge1xuICAgICAgdGhpcy5zaW5nbGVTaG90ID0gZmFsc2VcbiAgICAgIHRoaXMubXVsdGlwbGVTaG90cyA9IGZhbHNlXG4gICAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcbiAgICAgIGlmIChmbGFnID09PSAnZnVsbEF1dG8nKSB0aGlzLmJ1cnN0ID0gZmFsc2VcbiAgICAgIHRoaXNbZmxhZ10gPSB0cnVlXG4gICAgfSBlbHNlIGlmIChmbGFnID09PSAnYnVyc3QnKSB7XG4gICAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcbiAgICAgIGlmICghdGhpcy5zaW5nbGVTaG90ICYmICF0aGlzLm11bHRpcGxlU2hvdHMpIHRoaXMuc2luZ2xlU2hvdCA9IHRydWVcbiAgICAgIHRoaXMuYnVyc3QgPSAhdGhpcy5idXJzdFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgICAgIGNvbnNvbGUubG9nKGZsYWcsIHRoaXNbZmxhZ10pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVzb2x2ZUNhcmQgKCkge1xuICAgIHRoaXMucm9sbHMgPSBbXVxuICAgIGlmICh0aGlzLm11bHRpVGFyZ2V0KSB7XG4gICAgICBsZXQgd2VhcG9uTWFsZnVuY3Rpb24gPSBmYWxzZVxuICAgICAgbGV0IGluZGV4ID0gMFxuICAgICAgd2hpbGUgKCF3ZWFwb25NYWxmdW5jdGlvbiAmJiB0aGlzLnNob3RzLmxlbmd0aCA+IGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCB0aGlzLnNob290QXRUYXJnZXQodGhpcy5zaG90c1tpbmRleF0pXG4gICAgICAgIGlmIChyb2xsLmRpY2U/LnJvbGwpIHtcbiAgICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsLmRpY2Uucm9sbClcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLndlYXBvbi5zaG9vdEJ1bGxldHMoXG4gICAgICAgICAgcGFyc2VJbnQodGhpcy5zaG90c1tpbmRleF0uYnVsbGV0c1Nob3QpICtcbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2hvdHNbaW5kZXhdLnRyYW5zaXRCdWxsZXRzKVxuICAgICAgICApXG4gICAgICAgIGlmIChyb2xsLmhhc01hbGZ1bmN0aW9uKSB7XG4gICAgICAgICAgcm9sbC5pc1N1Y2Nlc3MgPSBmYWxzZVxuICAgICAgICAgIHdlYXBvbk1hbGZ1bmN0aW9uID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGluZGV4KytcbiAgICAgICAgdGhpcy5yb2xscy5wdXNoKHJvbGwpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCB0aGlzLnNob290QXRUYXJnZXQoKVxuICAgICAgaWYgKHJvbGwuZGljZT8ucm9sbCkge1xuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsLmRpY2Uucm9sbClcbiAgICAgIH1cbiAgICAgIGxldCBidWxsZXRGaXJlZCA9IHRoaXMuYnVyc3RcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KVxuICAgICAgICA6IDFcbiAgICAgIGlmIChidWxsZXRGaXJlZCA+PSB0aGlzLnRvdGFsQW1tbykgYnVsbGV0RmlyZWQgPSB0aGlzLnRvdGFsQW1tb1xuICAgICAgY29uc3Qgc2hvdCA9IHtcbiAgICAgICAgdGFyZ2V0OiB0aGlzLmFjdGl2ZVRhcmdldCxcbiAgICAgICAgZXh0cmVtZVJhbmdlOiB0aGlzLmFjdGl2ZVRhcmdldC5leHRyZW1lUmFuZ2UsXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSxcbiAgICAgICAgYWN0b3JOYW1lOiB0aGlzLmFjdGl2ZVRhcmdldC5uYW1lLFxuICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbCxcbiAgICAgICAgbW9kaWZpZXI6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyLFxuICAgICAgICBkYW1hZ2U6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmRhbWFnZSxcbiAgICAgICAgYnVsbGV0c1Nob3Q6IGJ1bGxldEZpcmVkLFxuICAgICAgICB0cmFuc2l0QnVsbGV0czogMCxcbiAgICAgICAgdHJhbnNpdDogZmFsc2VcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMud2VhcG9uLnNob290QnVsbGV0cyhidWxsZXRGaXJlZClcblxuICAgICAgaWYgKHJvbGwuaGFzTWFsZnVuY3Rpb24pIHtcbiAgICAgICAgcm9sbC5pc1N1Y2Nlc3MgPSBmYWxzZVxuICAgICAgfVxuICAgICAgdGhpcy5zaG90cy5wdXNoKHNob3QpXG4gICAgICB0aGlzLnJvbGxzLnB1c2gocm9sbClcbiAgICB9XG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcblxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgc2hvb3RBdFRhcmdldCAoc2hvdCA9IG51bGwpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBzaG90XG4gICAgICA/IHRoaXMuZ2V0VGFyZ2V0RnJvbUtleShzaG90LmFjdG9yS2V5KVxuICAgICAgOiB0aGlzLmFjdGl2ZVRhcmdldFxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgY2hlY2suYWN0b3JLZXkgPSB0aGlzLmFjdG9yS2V5XG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgY2hlY2suaXRlbSA9IHRoaXMuaXRlbUlkXG4gICAgLy8gQ29tYmF0IHJvbGwgY2Fubm90IGJlIGJsaW5kIG9yIHVua25vd25cbiAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBjaGVjay5pc1Vua29ud24gPSBmYWxzZVxuICAgIGlmICh0aGlzLmF1dG9GaXJlKSBjaGVjay5za2lsbCA9IHRoaXMuYXV0b1dlYXBvblNraWxsXG4gICAgZWxzZSBjaGVjay5za2lsbCA9IHRoaXMubWFpbldlYXBvblNraWxsXG4gICAgaWYgKHRoaXMubXVsdGlUYXJnZXQpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBzaG90LmRpZmZpY3VsdHlcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHNob3QubW9kaWZpZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9IHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgMVxuICAgICAgaWYgKHRoaXMuYWltaW5nKSB7XG4gICAgICAgIHRoaXMuYWltaW5nID0gZmFsc2VcbiAgICAgICAgdGhpcy5haW1lZCA9IHRydWVcbiAgICAgIH1cbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbFxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubW9kaWZpZXJcbiAgICB9XG5cbiAgICBjaGVjay5kZXRhaWxzID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRhcmdldCcpfTogJHt0YXJnZXQubmFtZX1gXG4gICAgY2hlY2sudGFyZ2V0S2V5ID0gdGFyZ2V0LmFjdG9yS2V5XG5cbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIGNoYW5nZVZvbGxleVNpemUgKHgpIHtcbiAgICB0aGlzLnZvbGxleVNpemUgPSB0aGlzLnZvbGxleVNpemUgKyB4XG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnJhbmdlLmluaXRpYXRvcicpXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxuXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xuICAgICAgY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSAhPT0gJ3RydWUnXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXG4gICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0LWZsYWcnKSkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXQnKVxuICAgICAgICBjb25zdCBrZXkgPSBwYXJzZUludCh0YXJnZXQuZGF0YXNldC50YXJnZXRLZXkpXG4gICAgICAgIGluaXRpYXRvci50YXJnZXRzW2tleV0udG9nZ2xlRmxhZyhjYW1lbEZsYWcpXG4gICAgICB9IGVsc2UgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoY2FtZWxGbGFnKVxuICAgICAgaW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBwYXNzUm9sbCAocm9sbEluZGV4KSB7XG4gICAgY29uc3Qgcm9sbCA9IHRoaXMucm9sbHNbcm9sbEluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChyb2xsLmx1Y2tOZWVkZWQpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gcm9sbC5kaWZmaWN1bHR5XG4gICAgcm9sbC5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgcm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICB1cGdyYWRlUm9sbCAocm9sbEluZGV4LCB1cGdyYWRlaW5kZXgpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGNvbnN0IHJvbGwgPSB0aGlzLnJvbGxzW3JvbGxJbmRleF1cbiAgICBjb25zdCBpbmNyZWFzZWRTdWNjZXNzID0gcm9sbC5pbmNyZWFzZVN1Y2Nlc3NbdXBncmFkZWluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tBbW91bnQpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubmV3U3VjY2Vzc0xldmVsKVxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgaWYgKHJvbGwuZGlmZmljdWx0eSA8PSBuZXdTdWNjZXNzTGV2ZWwpIHJvbGwuaXNTdWNjZXNzID0gdHJ1ZVxuICAgIHJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkLCBtZXNzYWdlSWQgPSBudWxsKSB7XG4gICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKClcbiAgICByYW5nZUluaXRpYXRvci5fdGFyZ2V0cyA9IFtdXG4gICAgaWYgKG1lc3NhZ2VJZCkgcmFuZ2VJbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgZWxzZSBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICByYW5nZUluaXRpYXRvci5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9XG5cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHJhbmdlSW5pdGlhdG9yLCBjYXJkKVxuICAgIGNvbnN0IGNhcmRUYXJnZXRzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JylcbiAgICBmb3IgKGNvbnN0IHQgb2YgY2FyZFRhcmdldHMpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdSYW5nZVRhcmdldC5nZXRGcm9tRWxlbWVudCh0KVxuICAgICAgcmFuZ2VJbml0aWF0b3IudGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG5cbiAgICBjb25zdCBjYXJkU2hvdHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaG90JylcbiAgICBpZiAoY2FyZFNob3RzKSB7XG4gICAgICBmb3IgKGNvbnN0IHMgb2YgY2FyZFNob3RzKSB7XG4gICAgICAgIGNvbnN0IHNob3QgPSB7fVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHNob3QsIHMpXG4gICAgICAgIHJhbmdlSW5pdGlhdG9yLnNob3RzLnB1c2goc2hvdClcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZWxzZSB7XG4gICAgLy8gIGNvbnN0IHNob3QgPSB7XG4gICAgLy8gICAgICBzaG90T3JkZXI6IDAsXG4gICAgLy8gICAgICBhY3RvcktleTogbnVsbCxcbiAgICAvLyAgICAgIGFjdG9yTmFtZTogJ2R1bW15J1xuICAgIC8vICB9XG4gICAgLy8gfVxuXG4gICAgcmFuZ2VJbml0aWF0b3Iucm9sbHMgPSBbXVxuICAgIGNvbnN0IHJvbGxzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcucm9sbC1yZXN1bHQnKVxuICAgIGZvciAoY29uc3QgciBvZiByb2xscykge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21FbGVtZW50KHIpXG4gICAgICByYW5nZUluaXRpYXRvci5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuXG4gICAgcmFuZ2VJbml0aWF0b3IuZGFtYWdlID0gW11cbiAgICBjb25zdCBkYW1hZ2VSb2xscyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLmRhbWFnZS1yZXN1bHRzJylcbiAgICBmb3IgKGNvbnN0IGRyIG9mIGRhbWFnZVJvbGxzKSB7XG4gICAgICBjb25zdCBkYW1hZ2VSb2xsID0gQ29DN0RhbWFnZS5nZXRGcm9tRWxlbWVudChkcilcbiAgICAgIHJhbmdlSW5pdGlhdG9yLmRhbWFnZS5wdXNoKGRhbWFnZVJvbGwpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmdlSW5pdGlhdG9yXG4gIH1cblxuICBhc3luYyByb2xsRGFtYWdlICgpIHtcbiAgICB0aGlzLmRhbWFnZSA9IFtdXG4gICAgY29uc3QgaGl0cyA9IHRoaXMuc3VjY2Vzc2Z1bEhpdHNcblxuICAgIC8vIGxldCB2b2xsZXlTaXplID0gMTtcbiAgICAvLyBpZiggdGhpcy5mdWxsQXV0bykge1xuICAgIC8vICB2b2xsZXlTaXplID0gdGhpcy52b2xsZXlTaXplO1xuICAgIC8vICBpZih2b2xsZXlTaXplIDwgMykgdm9sbGV5U2l6ZSA9IDM7XG4gICAgLy8gfVxuICAgIC8vIGlmKCB0aGlzLmJ1cnN0KSB2b2xsZXlTaXplID0gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBoID0gaGl0c1tpXVxuICAgICAgY29uc3Qgdm9sbGV5U2l6ZSA9IHBhcnNlSW50KGguc2hvdC5idWxsZXRzU2hvdClcbiAgICAgIGNvbnN0IGRhbWFnZVJvbGxzID0gW11cblxuICAgICAgaWYgKHZvbGxleVNpemUgPiAwKSB7XG4gICAgICAgIGxldCBkYW1hZ2VGb3JtdWxhID0gU3RyaW5nKGguc2hvdC5kYW1hZ2UpXG4gICAgICAgIGlmICghZGFtYWdlRm9ybXVsYSB8fCBkYW1hZ2VGb3JtdWxhID09PSAnJykgZGFtYWdlRm9ybXVsYSA9ICcwJ1xuICAgICAgICBjb25zdCBkYW1hZ2VXaXRob3V0REIgPSBkYW1hZ2VGb3JtdWxhXG4gICAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuYWRkYikge1xuICAgICAgICAgIGRhbWFnZUZvcm11bGEgPSBkYW1hZ2VGb3JtdWxhICsgJysnICsgdGhpcy5hY3Rvci5kYlxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuYWhkYikge1xuICAgICAgICAgIGRhbWFnZUZvcm11bGEgPSBkYW1hZ2VGb3JtdWxhICsgQ29DN1V0aWxpdGllcy5oYWxmREIodGhpcy5hY3Rvci5kYilcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYW1hZ2VEaWUgPSBDb0M3RGFtYWdlLmdldE1haW5EaWUoZGFtYWdlRm9ybXVsYSlcbiAgICAgICAgY29uc3QgbWF4RGFtYWdlID0gbmV3IFJvbGwoZGFtYWdlRm9ybXVsYSlbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgY29uc3QgY3JpdGljYWxEYW1hZ2VGb3JtdWxhID0gdGhpcy53ZWFwb24uaW1wYWxlXG4gICAgICAgICAgPyBgJHtkYW1hZ2VXaXRob3V0REJ9ICsgJHttYXhEYW1hZ2V9YFxuICAgICAgICAgIDogYCR7bWF4RGFtYWdlfWBcbiAgICAgICAgY29uc3QgY3JpdGljYWxEYW1hZ2VEaWUgPSBDb0M3RGFtYWdlLmdldE1haW5EaWUoY3JpdGljYWxEYW1hZ2VGb3JtdWxhKVxuXG4gICAgICAgIGxldCBpbXBhbGluZ1Nob3RzID0gMFxuICAgICAgICBsZXQgc3VjY2Vzc2Z1bFNob3RzID0gMFxuICAgICAgICBsZXQgY3JpdGljYWwgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5mdWxsQXV0byB8fCB0aGlzLmJ1cnN0KSB7XG4gICAgICAgICAgc3VjY2Vzc2Z1bFNob3RzID0gTWF0aC5mbG9vcih2b2xsZXlTaXplIC8gMilcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VjY2Vzc2Z1bFNob3RzID09PSAwKSBzdWNjZXNzZnVsU2hvdHMgPSAxXG4gICAgICAgIGlmIChoLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICAgIGltcGFsaW5nU2hvdHMgPSBzdWNjZXNzZnVsU2hvdHNcbiAgICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSB2b2xsZXlTaXplIC0gaW1wYWxpbmdTaG90c1xuICAgICAgICAgIGNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgIT09IGgucm9sbC5zdWNjZXNzTGV2ZWwgJiZcbiAgICAgICAgICAgIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPD0gaC5yb2xsLmRpZmZpY3VsdHkgfHxcbiAgICAgICAgICAgICAgaC5zaG90LmV4dHJlbWVSYW5nZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IHZvbGxleVNpemVcbiAgICAgICAgICAgIGltcGFsaW5nU2hvdHMgPSAwXG4gICAgICAgICAgICBjcml0aWNhbCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRvdGFsID0gMFxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc3VjY2Vzc2Z1bFNob3RzOyBpbmRleCsrKSB7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGRhbWFnZUZvcm11bGEpXG4gICAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXG4gICAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xuICAgICAgICAgIGNvbnN0IGRpY2UgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgZGllIG9mIHJvbGwuZGljZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgZGllLnJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgZGljZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBmYWNlczogZGllLmZhY2VzLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0LnJlc3VsdFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBkYW1hZ2VSb2xscy5wdXNoKHtcbiAgICAgICAgICAgIGZvcm11bGE6IGRhbWFnZUZvcm11bGEsXG4gICAgICAgICAgICB0b3RhbDogcm9sbC50b3RhbCxcbiAgICAgICAgICAgIGRpZTogZGFtYWdlRGllLFxuICAgICAgICAgICAgZGljZSxcbiAgICAgICAgICAgIGNyaXRpY2FsOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdG90YWwgKz0gcm9sbC50b3RhbFxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBpbXBhbGluZ1Nob3RzOyBpbmRleCsrKSB7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGNyaXRpY2FsRGFtYWdlRm9ybXVsYSlcbiAgICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKClcbiAgICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsKVxuICAgICAgICAgIGNvbnN0IGRpY2UgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgZGllIG9mIHJvbGwuZGljZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgZGllLnJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgZGljZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBmYWNlczogZGllLmZhY2VzLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0LnJlc3VsdFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBkYW1hZ2VSb2xscy5wdXNoKHtcbiAgICAgICAgICAgIGZvcm11bGE6IGNyaXRpY2FsRGFtYWdlRm9ybXVsYSxcbiAgICAgICAgICAgIHRvdGFsOiByb2xsLnRvdGFsLFxuICAgICAgICAgICAgZGllOiBjcml0aWNhbERhbWFnZURpZSxcbiAgICAgICAgICAgIGRpY2UsXG4gICAgICAgICAgICBjcml0aWNhbDogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdG90YWwgKz0gcm9sbC50b3RhbFxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRhcmdldE5hbWUgPSAnZHVtbXknXG4gICAgICAgIGxldCB0YXJnZXQgPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShoLnJvbGwudGFyZ2V0S2V5KVxuICAgICAgICBpZiAoIXRhcmdldCkgdGFyZ2V0ID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoaC5yb2xsLnRhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgIGlmICh0YXJnZXQpIHRhcmdldE5hbWUgPSB0YXJnZXQubmFtZVxuXG4gICAgICAgIHRoaXMuZGFtYWdlLnB1c2goe1xuICAgICAgICAgIHRhcmdldEtleTogaC5yb2xsLnRhcmdldEtleSxcbiAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgIHJvbGxzOiBkYW1hZ2VSb2xscyxcbiAgICAgICAgICB0b3RhbCxcbiAgICAgICAgICBjcml0aWNhbCxcbiAgICAgICAgICBkZWFsdDogZmFsc2UsXG4gICAgICAgICAgcmVzdWx0U3RyaW5nOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LnJhbmdlQ29tYmF0RGFtYWdlJywge1xuICAgICAgICAgICAgbmFtZTogdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHRvdGFsXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmRhbWFnZVJvbGxlZCA9IHRoaXMuZGFtYWdlLmxlbmd0aCAhPT0gMFxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZSAoKSB7XG4gICAgZm9yIChsZXQgZEluZGV4ID0gMDsgZEluZGV4IDwgdGhpcy5kYW1hZ2UubGVuZ3RoOyBkSW5kZXgrKykge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhbWFnZVtkSW5kZXhdLnRhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoYWN0b3IgPT09IG51bGwpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9UYXJnZXRUb0RhbWFnZScpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuID0gMFxuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWQgPSAwXG4gICAgICAgIGZvciAoXG4gICAgICAgICAgbGV0IHJJbmRleCA9IDA7XG4gICAgICAgICAgckluZGV4IDwgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xscy5sZW5ndGg7XG4gICAgICAgICAgckluZGV4KytcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgZGVhbHRBbW91bnQgPSBhd2FpdCBhY3Rvci5kZWFsRGFtYWdlKFxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsXG4gICAgICAgICAgKVxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxUYWtlbiArPSBkZWFsdEFtb3VudFxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50YWtlbiA9IGRlYWx0QW1vdW50XG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLmFic29yYmVkID1cbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbCAtIGRlYWx0QW1vdW50XG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbEFic29yYmVkICs9XG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWwgLSBkZWFsdEFtb3VudFxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0uZGVhbHQgPSB0cnVlXG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5yYW5nZUNvbWJhdERhbWFnZUFybW9yJyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRhcmdldE5hbWUsXG4gICAgICAgICAgICB0b3RhbDogdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuLFxuICAgICAgICAgICAgYXJtb3I6IHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmRhbWFnZURlYWx0ID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3UmFuZ2VUYXJnZXQge1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsKSB7XG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5jb3ZlciA9IGZhbHNlXG4gICAgdGhpcy5wb2ludEJsYW5rUmFuZ2UgPSBmYWxzZVxuICAgIHRoaXMuYmFzZVJhbmdlID0gdHJ1ZVxuICAgIHRoaXMubG9uZ1JhbmdlID0gZmFsc2VcbiAgICB0aGlzLmV4dHJlbWVSYW5nZSA9IGZhbHNlXG4gICAgdGhpcy5pbk1lbGVlID0gZmFsc2VcbiAgfVxuXG4gIGdldCBiaWcgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2JpZykge1xuICAgICAgaWYgKHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5idWlsZCkgdGhpcy5fYmlnID0gdGhpcy5hY3Rvci5idWlsZCA+PSA0XG4gICAgICBlbHNlIHRoaXMuX2JpZyA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9iaWdcbiAgfVxuXG4gIHNldCBiaWcgKGIpIHtcbiAgICB0aGlzLl9iaWcgPSBiXG4gIH1cblxuICBnZXQgc21hbGwgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3NtYWxsKSB7XG4gICAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLmJ1aWxkKSB0aGlzLl9zbWFsbCA9IHRoaXMuYWN0b3IuYnVpbGQgPD0gLTJcbiAgICAgIGVsc2UgdGhpcy5fc21hbGwgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc21hbGxcbiAgfVxuXG4gIHNldCBzbWFsbCAoYikge1xuICAgIHRoaXMuX3NtYWxsID0gYlxuICB9XG5cbiAgZ2V0IG5vcm1hbCAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmJpZyAmJiAhdGhpcy5zbWFsbFxuICB9XG5cbiAgc2V0IG5vcm1hbCAoYikge1xuICAgIHRoaXMuX2JpZyA9IGZhbHNlXG4gICAgdGhpcy5fc21hbGwgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzRmFzdCAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5tb3YpIHJldHVybiB0aGlzLmFjdG9yLm1vdiA+PSA4XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgZmFzdCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fZmFzdCkge1xuICAgICAgLy8gaWYoIHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5tb3YpIHRoaXMuX2Zhc3QgPSB0aGlzLmFjdG9yLm1vdiA+PSA4O1xuICAgICAgLy8gZWxzZSB0aGlzLl9mYXN0ID0gZmFsc2U7XG4gICAgICB0aGlzLl9mYXN0ID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2Zhc3RcbiAgfVxuXG4gIHNldCBmYXN0IChiKSB7XG4gICAgdGhpcy5fZmFzdCA9IGJcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JLZXkgJiYgIXRoaXMuX2FjdG9yKSB7XG4gICAgICB0aGlzLl9hY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy50b2tlbikgcmV0dXJuIHRoaXMudG9rZW4ubmFtZVxuICAgIGlmICh0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gICAgcmV0dXJuICdEdW1teSdcbiAgfVxuXG4gIGdldCBpbWcgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSB7XG4gICAgICBpZiAodGhpcy50b2tlbi5kb2N1bWVudD8udGV4dHVyZS5zcmMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW4uZG9jdW1lbnQ/LnRleHR1cmUuc3JjXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5kYXRhLmltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCB0b2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLl90b2tlbiAmJiB0aGlzLmFjdG9yS2V5KSB7XG4gICAgICB0aGlzLl90b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90b2tlblxuICB9XG5cbiAgZ2V0IHNpemVUZXh0ICgpIHtcbiAgICBpZiAodGhpcy5iaWcpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLkJpZ1RhcmdldFRpdGxlJylcbiAgICB9XG4gICAgaWYgKHRoaXMuc21hbGwpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLlNtYWxsVGFyZ2V0VGl0bGUnKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5Ob3JtYWxUYXJnZXRUaXRsZScpXG4gIH1cblxuICBnZXQgc2l6ZUxhYmVsICgpIHtcbiAgICBpZiAodGhpcy5iaWcpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLkJpZ1RhcmdldCcpXG4gICAgaWYgKHRoaXMuc21hbGwpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuY29tYmF0Q2FyZC5TbWFsbFRhcmdldCcpXG4gICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuTm9ybWFsVGFyZ2V0JylcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5ICgpIHtcbiAgICBpZiAodGhpcy5iYXNlUmFuZ2UgfHwgdGhpcy5wb2ludEJsYW5rUmFuZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gICAgaWYgKHRoaXMubG9uZ1JhbmdlKSByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgaWYgKHRoaXMuZXh0cmVtZVJhbmdlKSByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICB9XG5cbiAgZ2V0IG1vZGlmaWVyICgpIHtcbiAgICBsZXQgbW9kaWZpZXIgPSAwXG4gICAgaWYgKHRoaXMuY292ZXIpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5wb2ludEJsYW5rUmFuZ2UpIG1vZGlmaWVyKytcbiAgICBpZiAodGhpcy5mYXN0KSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMuc21hbGwpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5iaWcpIG1vZGlmaWVyKytcbiAgICBpZiAodGhpcy5pbk1lbGVlKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMuc3VycHJpc2VkKSBtb2RpZmllcisrXG4gICAgcmV0dXJuIG1vZGlmaWVyXG4gIH1cblxuICBzZXQgdG9rZW4gKHQpIHtcbiAgICB0aGlzLl90b2tlbiA9IHRcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQodGFyZ2V0LCBlbGVtZW50KVxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHN0YXRpYyBjaGFuZ2VEaXNwbGF5ZWRUYXJnZXQgKGV2ZW50KSB7XG4gICAgaWYgKCFldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0LXNlbGVjdG9yJykpIHJldHVybiBudWxsXG4gICAgY29uc3QgdGFyZ2V0U2VsZWN0b3IgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdGFyZ2V0cyA9IHRhcmdldFNlbGVjdG9yLmNsb3Nlc3QoJy50YXJnZXRzJylcbiAgICBjb25zdCB0YXJnZXRMaXN0ID0gdGFyZ2V0cy5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JylcbiAgICByZXR1cm4gdGFyZ2V0TGlzdFxuICB9XG5cbiAgYXR0YWNoVG9FbGVtZW50IChlbGVtZW50KSB7XG4gICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQodGhpcywgZWxlbWVudClcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWcpIHtcbiAgICBpZiAoXG4gICAgICBmbGFnID09PSAnYmFzZVJhbmdlJyB8fFxuICAgICAgZmxhZyA9PT0gJ2xvbmdSYW5nZScgfHxcbiAgICAgIGZsYWcgPT09ICdleHRyZW1lUmFuZ2UnIHx8XG4gICAgICBmbGFnID09PSAncG9pbnRCbGFua1JhbmdlJ1xuICAgICkge1xuICAgICAgdGhpcy5wb2ludEJsYW5rUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5iYXNlUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5sb25nUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5leHRyZW1lUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5vdXRPZlJhbmdlID0gZmFsc2VcbiAgICAgIHRoaXNbZmxhZ10gPSB0cnVlXG4gICAgfSBlbHNlIGlmIChmbGFnID09PSAnc2l6ZScpIHtcbiAgICAgIGlmICh0aGlzLnNtYWxsKSB7XG4gICAgICAgIHRoaXMuc21hbGwgPSBmYWxzZVxuICAgICAgICB0aGlzLmJpZyA9IHRydWVcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5iaWcpIHtcbiAgICAgICAgdGhpcy5zbWFsbCA9IGZhbHNlXG4gICAgICAgIHRoaXMuYmlnID0gZmFsc2VcbiAgICAgIH0gZWxzZSB0aGlzLnNtYWxsID0gdHJ1ZVxuICAgIH0gZWxzZSB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgICBpZiAodGhpcy5hY3RvciAmJiBmbGFnID09PSAnZmFzdCcgJiYgdGhpcy5mYXN0ICYmICF0aGlzLmlzRmFzdCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldhcm5GYXN0VGFyZ2V0V2l0aFdyb25nTU9WJywge1xuICAgICAgICAgIG1vdjogdGhpcy5hY3Rvci5tb3ZcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgQ09OU1QsIGdhbWUsIFRva2VuLCB0b2tlbkRhdGEsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVUYXJnZXQgfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcydcbmltcG9ydCB7IENvQzdNZWxlZVJlc29sdGlvbiB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtcmVzb2x1dGlvbi5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4vY2hhdC9yYW5nZWNvbWJhdC5qcydcbmltcG9ydCB7IENvQzdSb2xsLCBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuLy8gaW1wb3J0IHsgQ29DN0RhbWFnZVJvbGwgfSBmcm9tICcuL2NoYXQvZGFtYWdlY2FyZHMuanMnO1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IEludGVyYWN0aXZlQ2hhdENhcmQgfSBmcm9tICcuL2NoYXQvaW50ZXJhY3RpdmUtY2hhdC1jYXJkLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9kYW1hZ2UuanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4vZGljZS5qcydcblxuY29uc3QgQ0hBVF9DT0M3X01FU1NBR0UgPSB7XG4gIEZBS0VST0xMOlxuICAgICc8ZGl2IGNsYXNzPVwiZGljZS1yb2xsXCI+PGRpdiBjbGFzcz1cImRpY2UtcmVzdWx0XCI+PGRpdiBjbGFzcz1cImRpY2UtZm9ybXVsYVwiPj8/PzwvZGl2PjxoNCBjbGFzcz1cImRpY2UtdG90YWxcIj4/PC9oND48L2Rpdj48L2Rpdj4nXG59XG5leHBvcnQgY2xhc3MgQ29DN0NoYXQge1xuICBzdGF0aWMgcmVuZGVyQ2hhdE1lc3NhZ2VIb29rIChjaGF0TWVzc2FnZSwgaHRtbCkge1xuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ0dNU2VsZlJvbGwnKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWwuZmluZCgnLndoaXNwZXItdG8nKS5yZW1vdmUoKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcbiAgICAgICAgLnJlcGxhY2VXaXRoKFxuICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImZsYXZvci10ZXh0XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5Sb2xsU2VjcmV0RGljZSdcbiAgICAgICAgICApfTwvc3Bhbj5gXG4gICAgICAgIClcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKVxuICAgICAgICAucmVwbGFjZVdpdGgoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJtZXNzYWdlLWNvbnRlbnRcIj4ke0NIQVRfQ09DN19NRVNTQUdFLkZBS0VST0xMfTwvZGl2PmBcbiAgICAgICAgKVxuICAgIH1cblxuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3JlbW92ZVdpc3BlclRhcmdldHMnKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWwuZmluZCgnLndoaXNwZXItdG8nKS5yZW1vdmUoKVxuICAgIH1cblxuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2Zha2VSb2xsJykgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5mbGF2b3ItdGV4dCcpXG4gICAgICAgIC5yZXBsYWNlV2l0aChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuS2VlcGVyU2VudERlY295JykpXG4gICAgICBodG1sLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKS5yZW1vdmUoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBmYWtlUm9sbE1lc3NhZ2UgKCkge1xuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbFNlY3JldERpY2UnKSxcbiAgICAgIHdoaXNwZXI6IGdhbWUudXNlcnMucGxheWVycyxcbiAgICAgIHR5cGU6IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSLFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgIEdNU2VsZlJvbGw6IGZhbHNlLFxuICAgICAgICAgIHJlbW92ZVdpc3BlclRhcmdldHM6IHRydWUsXG4gICAgICAgICAgZmFrZVJvbGw6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbnRlbnQ6IENIQVRfQ09DN19NRVNTQUdFLkZBS0VST0xMXG4gICAgfVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICB9XG5cbiAgLy8gVE9ETyByZW1wbGFjZXIgbGVzIGdldEVsZW1lbnRzQnl4eHh4IHBhciBxdWVyeVNlbGVjdG9yXG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICAgKiAgSW5pdCBzb2NrZXRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyByZWFkeSAoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0LnJlYWR5Jyk7XG4gICAgZ2FtZS5Db0M3ID0gJ2luaXQnXG4gIH1cblxuICAvLyBzdGF0aWMgb25NZXNzYWdlKCBkYXRhKSB7XG4gIC8vICBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQub25NZXNzYWdlJyk7XG4gIC8vICBjb25zb2xlLmxvZyhgbWVzc2FnZSByZWNlaXZlZCBzZW5kJmVyIDoke2RhdGEudXNlcn0gbWVzc2FnZSB0eXBlIDogJHtkYXRhLmFjdGlvbn0gZm9yIG1lc3NhZ2UgOiR7ZGF0YS5tZXNzYWdlSWR9YCk7XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gICAqICBDaGF0IE1lc3NhZ2UgSGVscGVycyAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBzdGF0aWMgYXN5bmMgY2hhdExpc3RlbmVycyAoYXBwLCBodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmNhcmQtYnV0dG9ucyBidXR0b24nLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRBY3Rpb24uYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NoYW5nZScsXG4gICAgICAnaW5wdXRbdHlwZT1yYW5nZV0uc2xpZGVyJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkUmFuZ2UuYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBodG1sLm9uKCdjbGljaycsICcuY2FyZC1idXR0b25zIGJ1dHRvbicsIENvQzdDaGF0Ll9vbkNoYXRDYXJkVGVzdC5iaW5kKHRoaXMpKTtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuY2FyZC10aXRsZScsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRvZ2dsZUNvbnRlbnQuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucmFkaW8tc3dpdGNoJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkUmFkaW9Td2l0Y2guYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucGFuZWwtc3dpdGNoJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoLmJpbmQodGhpcylcbiAgICApXG5cbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuc2ltcGxlLWZsYWcnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2guYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcudm9sbGV5LXNpemUnLCBDb0M3Q2hhdC5fb25DaGF0Q2FyZFZvbGxleVNpemUuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5kcm9wZG93bi1lbGVtZW50JyxcbiAgICAgIENvQzdDaGF0Ll9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnNpbXBsZS10b2dnbGUnLCBDb0M3Q2hhdC5fb25Ub2dnbGVTZWxlY3RlZC5iaW5kKHRoaXMpKVxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJy5pcy1vdXRudW1iZXJlZCcsIENvQzdDaGF0Ll9vbk91dG51bWJlcmVkU2VsZWN0ZWQuYmluZCh0aGlzKSk7XG5cbiAgICBodG1sLm9uKCdjbGljaycsICcudGFyZ2V0LXNlbGVjdG9yJywgQ29DN0NoYXQuX29uVGFyZ2V0U2VsZWN0LmJpbmQodGhpcykpXG5cbiAgICBodG1sLm9uKCdkYmxjbGljaycsICcub3Blbi1hY3RvcicsIENvQzdDaGF0Ll9vbk9wZW5BY3Rvci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5vbignY2xpY2snLCAnY29jNy1pbmxpbmUtcmVzdWx0JywgQ29DN0NoYXQuX29uSW5saW5lLmJpbmQodGhpcykpXG5cbiAgICAvLyBSb2xsQ2FyZC5iaW5kTGlzdGVybmVycyggaHRtbCk7XG4gICAgT3Bwb3NlZENoZWNrQ2FyZC5iaW5kTGlzdGVybmVycyhodG1sKVxuICAgIENvbWJpbmVkQ2hlY2tDYXJkLmJpbmRMaXN0ZXJuZXJzKGh0bWwpXG4gIH1cblxuICBzdGF0aWMgX29uT3BlbkFjdG9yIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhY3RvcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3RvcktleVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoYWN0b3IuaXNPd25lcikgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG9uVXBkYXRlQ2hhdE1lc3NhZ2UgKGNoYXRNZXNzYWdlKSB7XG4gICAgdWkuY2hhdC5zY3JvbGxCb3R0b20oKVxuXG4gICAgLy8gaWYoIGNoYXRNZXNzYWdlLmdldEZsYWcoICdDb0M3JywgJ3JldmVsZWQnKSl7XG4gICAgLy8gfVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSAmJiAoY2hhdE1lc3NhZ2UudHlwZSA9PT0gMCAvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqLyB8fCBjaGF0TWVzc2FnZS5zdHlsZSA9PT0gMCAvKiAvLyBGb3VuZHJ5VlRUIHYxMiAqLykpIHtcbiAgICAgIGNvbnN0IGNhcmQgPSAkKGNoYXRNZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbGVlJykpIHtcbiAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5yZXNvbHZlZCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICAgICAgaWYgKGNhcmQuZGF0YXNldC50YXJnZXRDYXJkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgICAgICAgaW5pdGlhdG9yLnRhcmdldENhcmRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAodGFyZ2V0LnJlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgICB0YXJnZXQubWVzc2FnZUlkLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0LnJlc29sdXRpb25DYXJkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIGlmICghaW5pdGlhdG9yLmNoZWNrUmV2ZWFsZWQpIGF3YWl0IGluaXRpYXRvci5yZXZlYWxDaGVjaygpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaWYgKGluaXRpYXRvci5yZXNvbHV0aW9uQ2FyZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgIGluaXRpYXRvci5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByZXNvbHV0aW9uQ2FyZC5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICBpZiAoIWluaXRpYXRvci5jaGVja1JldmVhbGVkKSBhd2FpdCBpbml0aWF0b3IucmV2ZWFsQ2hlY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tTWVzc2FnZUlkKGNoYXRNZXNzYWdlLmlkKVxuICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICAgICAgICB0YXJnZXQucGFyZW50TWVzc2FnZUlkLFxuICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgdGFyZ2V0LnJlc29sdXRpb25DYXJkXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBhd2FpdCByZXNvbHV0aW9uQ2FyZC5yZXNvbHZlKClcbiAgICAgICAgICAgIGlmICghdGFyZ2V0Lm1lbGVlSW5pdGlhdG9yLmNoZWNrUmV2ZWFsZWQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGFyZ2V0Lm1lbGVlSW5pdGlhdG9yLnJldmVhbENoZWNrKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcmVuZGVyTWVzc2FnZUhvb2sgKG1lc3NhZ2UsIGh0bWwpIHtcbiAgICB1aS5jaGF0LnNjcm9sbEJvdHRvbSgpXG5cbiAgICBJbnRlcmFjdGl2ZUNoYXRDYXJkLmJpbmRMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmIChtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnY2hlY2tSZXZlYWxlZCcpKSB7XG4gICAgICBodG1sLmZpbmQoJy5kaWNlLXJvbGwnKS5yZW1vdmVDbGFzcygnZ20tdmlzaWJsZS1vbmx5JylcbiAgICAgIGh0bWxbMF0uZGF0YXNldC5jaGVja1JldmVhbGVkID0gdHJ1ZVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBzaG93aW5nIGRyb3Bkb3duIHNlbGVjdGlvblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGJ0bicpXG4gICAgICAuY2xpY2soZXZlbnQgPT5cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAgIC5jbG9zZXN0KCcuZHJvcGRvd24nKVxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxuICAgICAgKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGRvd24nKVxuICAgICAgLm1vdXNlbGVhdmUoZXZlbnQgPT5cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgICAgKVxuXG4gICAgLy8gY29uc29sZS5sb2coJyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi0tPkNvQzdDaGF0Lm1lc3NhZ2VMaXN0ZW5lcnMgbWVzc2FnZSA6JyArIG1lc3NhZ2UuaWQpO1xuICAgIC8vIG1lc3NhZ2UuZGF0YS5jb250ZW50ID0gXCJcIjtcbiAgICAvLyBkYXRhLm1lc3NhZ2UuY29udGVudCA9IFwiXCI7XG5cbiAgICAvLyBXaGVuIGEgbmV3IGNhcmQgaXMgcHVibGlzaGVkLCBjaGVjayB3ZXRoZXIgaXQncyBhIHJvbGwgdGhhdCBtb2RpZmllcyBhbiBvdGhlciBjYXJkLlxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3QgY2FyZCA9IGh0bWxbMF0ucXVlcnlTZWxlY3RvcignLmNvYzcuY2hhdC1jYXJkJylcbiAgICAgIGlmIChjYXJkKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1jYXJkJykgJiZcbiAgICAgICAgICAhKGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPT09ICd0cnVlJykgJiZcbiAgICAgICAgICBjYXJkLmRhdGFzZXQucmVmTWVzc2FnZUlkXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChjYXJkKVxuXG4gICAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5zaWRlID09PSAndGFyZ2V0Jykge1xuICAgICAgICAgICAgcm9sbC5kZWZlbmRhbnRJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgID8gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnNpZGUgPT09ICdpbml0aWF0b3InKSB7XG4gICAgICAgICAgICByb2xsLmluaXRpYXRvcklkID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgICAgICAgfVxuICAgICAgICAgIGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSAndHJ1ZSdcblxuICAgICAgICAgIENvQzdDaGF0LnVwZGF0ZUNvbWJhdENhcmRUYXJnZXQocm9sbClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXJPbmx5ID0gaHRtbC5maW5kKCcudGFyZ2V0LW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB1c2VyT25seSkge1xuICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgY29uc3QgYWN0b3JJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWFjdG9yLWlkJylcbiAgICAgICAgaWYgKGFjdG9ySWQpIHtcbiAgICAgICAgICBpZiAoZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpLmlzT3duZXIpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnbU9ubHkgPSBodG1sLmZpbmQoJy5nbS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IHpvbmUgb2YgZ21Pbmx5KSB7XG4gICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIHpvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXJWaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLnVzZXItdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IGVsZW0gb2YgdXNlclZpc2libGVPbmx5KSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cblxuICAgIGNvbnN0IGdtVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy5nbS12aXNpYmxlLW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbSBvZiBnbVZpc2libGVPbmx5KSB7XG4gICAgICBpZiAoIShnYW1lLnVzZXIuaXNHTSB8fCAoZ2FtZS51c2VyLmlzVHJ1c3RlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0cnVzdGVkQ2FuU2VlQ2hhdENhcmQnKSkpKSBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG5cbiAgICBjb25zdCBvd25lclZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcub3duZXItdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IHpvbmUgb2Ygb3duZXJWaXNpYmxlT25seSkge1xuICAgICAgLy8gVHJ5IHJldHJpZXZpbmcgYWN0b3JcbiAgICAgIGxldCBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5kYXRhc2V0Py5hY3RvcktleSkgLy8gVHJ5IHdpdGggc2VsZi5cbiAgICAgIGlmICghYWN0b3IpIGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3Ioem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpIC8vIFRyeSB3aXRoIGNsb3Nlc3QgY2hhdCBjYXJkLlxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHBhcmVudCBlbGVtZW50LlxuICAgICAgfVxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS1hY3Rvci1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtYWN0b3Ita2V5XG4gICAgICB9XG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLXRva2VuLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS10b2tlbi1rZXlcbiAgICAgIH1cblxuICAgICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIGFjdG9ySWQpO1xuICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB9IC8vIGlmIGN1cnJlbnQgdXNlciBkb2Vzbid0IG93biB0aGlzIGhlIGNhbid0IGludGVycmFjdFxuICAgICAgLy8gaWYoICFDb0M3Q2hhdC5pc0NhcmRPd25lciggem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpKSB7em9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO31cbiAgICB9XG5cbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAvLyBHTSBjYW4gc2VlIGV2ZXJ5dGhpbmdcbiAgICAgIGNvbnN0IG93bmVyT25seSA9IGh0bWwuZmluZCgnLm93bmVyLW9ubHknKVxuICAgICAgZm9yIChjb25zdCB6b25lIG9mIG93bmVyT25seSkge1xuICAgICAgICAvLyBUcnkgcmV0cmlldmluZyBhY3RvclxuICAgICAgICBsZXQgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgIHpvbmUuZGF0YXNldD8uYWN0b3JLZXkgfHwgem9uZS5kYXRhc2V0Py5hY3RvcklkXG4gICAgICAgICkgLy8gVHJ5IHdpdGggc2VsZi5cbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3Ioem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpIC8vIFRyeSB3aXRoIGNsb3Nlc3QgY2hhdCBjYXJkLlxuICAgICAgICB9XG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHBhcmVudCBlbGVtZW50LlxuICAgICAgICB9XG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLWFjdG9yLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLWFjdG9yLWtleVxuICAgICAgICB9XG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLXRva2VuLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLXRva2VuLWtleVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIGFjdG9ySWQpO1xuICAgICAgICBpZiAoKGFjdG9yICYmICFhY3Rvci5pc093bmVyKSB8fCAoIWFjdG9yICYmICFnYW1lLnVzZXIuaXNHTSkpIHtcbiAgICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgfSAvLyBpZiBjdXJyZW50IHVzZXIgZG9lc24ndCBvd24gdGhpcyBoZSBjYW4ndCBpbnRlcnJhY3RcbiAgICAgICAgLy8gaWYoICFDb0M3Q2hhdC5pc0NhcmRPd25lciggem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpKSB7em9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO31cbiAgICAgIH1cblxuICAgICAgY29uc3QgZ21TZWxlY3RPbmx5ID0gaHRtbC5maW5kKCcuZ20tc2VsZWN0LW9ubHknKVxuICAgICAgaWYgKCEoZ2FtZS51c2VyLmlzVHJ1c3RlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZCcpKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdCBvZiBnbVNlbGVjdE9ubHkpIHtcbiAgICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LmFkZCgnaW5hY3RpdmUnKVxuICAgICAgICAgIHNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdzaW1wbGUtZmxhZycpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgZ21SYW5nZU9ubHkgPSBodG1sLmZpbmQoJy5nbS1yYW5nZS1vbmx5JylcbiAgICAgIGlmICghKGdhbWUudXNlci5pc1RydXN0ZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmQnKSkpIHtcbiAgICAgICAgZm9yIChjb25zdCByYW5nZSBvZiBnbVJhbmdlT25seSkge1xuICAgICAgICAgIHJhbmdlLmRpc2FibGVkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBhY3Rpb25UeXBlU3RyaW5nICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmlnaHRCYWNrOiAnQ29DNy5maWdodEJhY2snLFxuICAgICAgbWFuZXV2ZXI6ICdDb0M3Lm1hbmV1dmVyJyxcbiAgICAgIGRvZGdpbmc6ICdDb0M3LmRvZGdlJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfb25UYXJnZXRTZWxlY3QgKGV2ZW50KSB7XG4gICAgY29uc3QgaW5kZXggPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQua2V5KVxuICAgIGNvbnN0IHRhcmdldHNTZWxlY3RvciA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMtc2VsZWN0b3InKVxuICAgIGZvciAoY29uc3QgaSBvZiB0YXJnZXRzU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCgnaW1nJykpIHtcbiAgICAgIGkuc3R5bGUuYm9yZGVyID0gJ25vbmUnXG4gICAgfVxuICAgIHRhcmdldHNTZWxlY3RvclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWtleT1cIiR7aW5kZXh9XCJdYClcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICMwMDAnXG4gICAgY29uc3QgdGFyZ2V0cyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMnKVxuICAgIGZvciAoY29uc3QgdCBvZiB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXQnKSkge1xuICAgICAgdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB0LmRhdGFzZXQuYWN0aXZlID0gJ2ZhbHNlJ1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXRUb0Rpc3BsYXkgPSB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgW2RhdGEtdGFyZ2V0LWtleT1cIiR7aW5kZXh9XCJdYFxuICAgIClcbiAgICB0YXJnZXRUb0Rpc3BsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICB0YXJnZXRUb0Rpc3BsYXkuZGF0YXNldC5hY3RpdmUgPSAndHJ1ZSdcbiAgICAvLyBjb25zdCBjaGF0Q2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZC5yYW5nZScpO1xuICAgIC8vIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKCBjaGF0Q2FyZCk7XG4gIH1cblxuICBzdGF0aWMgX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZVNlbGVjdGVkKGNhcmQsIGV2ZW50KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gY2xlYXIgYWxsIGRyb3AgZG93biBhbmQgaGlnaGxpZ2h0IHRoaXMgcGFydGljdWxhciBvbmVcbiAgICBjb25zdCBkcm9wRG93bkJveGVzID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5yZXNwb25zZS1zZWxlY3Rpb24nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICBmb3IgKGNvbnN0IGRwZG5Cb3ggb2YgZHJvcERvd25Cb3hlcykge1xuICAgICAgZHBkbkJveC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXG4gICAgfVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpXG5cbiAgICAvLyBjbG9zZSBkcm9wZG93blxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcblxuICAgIC8vIERpc3BsYXkgdGhlIHJvbGwgYnV0dG9uXG4gICAgY29uc3Qgc2VsZWN0ZWRCb3ggPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1hY3Rpb24nKVxuICAgIHNlbGVjdGVkQm94LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgY29uc3QgYnV0dG9uID0gc2VsZWN0ZWRCb3gucXVlcnlTZWxlY3RvcignYnV0dG9uJylcblxuICAgIC8vIFBhc3MgdGhlIGluaXRpYXRvciBJZCAtIEJ1aWxkIGNhbiBiZSByZXRyaWV2ZWQgZnJvbSB0aGF0XG5cbiAgICAvLyBQYXNzIHRoZSBpbml0aWF0b3IgaXRlbVxuXG4gICAgLy8gUGFzcyB0aGUgZGVmZW5kYW50IElkXG5cbiAgICAvLyBQYXNzIHRoZSBkZWZlbmRhbnQgYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uID0gJ2RlZmVuZGluZydcbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb25UeXBlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LmRlZmVuZGVyQ2hvaWNlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsVmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWVcbiAgICBidXR0b24uZGF0YXNldC5pdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uSWRcbiAgICBidXR0b24uZGF0YXNldC5pdGVtTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25OYW1lXG5cbiAgICAvLyBQdXQgc29tZSB0ZXh0IGluIHRoZSBidXR0b25cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ21hbmV1dmVyJzpcbiAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lfSAoJHtcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgICAgICB9JSlgXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuY29tYmF0Q2FyZHNbZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbl1cbiAgICAgICAgKX0gOiAke2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25OYW1lfSAoJHtcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgICAgICB9JSlgXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIC8vIFNhdmUgYWN0aW9uIGZvciB0aGUgcm9sbFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbklubGluZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnaW5saW5lLXJlc3VsdCcpKSB7XG4gICAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fY29sbGFwc2VJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2V4cGFuZElubGluZVJlc3VsdChhKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfb25Ub2dnbGVTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICBDb0M3TWVsZWVUYXJnZXQudXBkYXRlU2VsZWN0ZWQoY2FyZCwgZXZlbnQpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWQgPT09ICcnKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck5vRG9kZ2VTa2lsbCcpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gY2xlYXIgYWxsIGRyb3AgZG93biBhbmQgaGlnaGxpZ2h0IHRoaXMgcGFydGljdWxhciBvbmVcbiAgICBjb25zdCBkcm9wRG93bkJveGVzID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5yZXNwb25zZS1zZWxlY3Rpb24nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICBmb3IgKGNvbnN0IGRwZG5Cb3ggb2YgZHJvcERvd25Cb3hlcykge1xuICAgICAgZHBkbkJveC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXG4gICAgfVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZWQtb24nKSAvLyBOZWVkIHRvIHRlc3QgaWYgaXQncyByZWFsbHkgYSBkb2RnZSAhISFcblxuICAgIC8vIFNhdmUgYWN0aW9uIGZvciB0aGUgcm9sbFxuICAgIGNvbnN0IHNlbGVjdGVkQm94ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtYWN0aW9uJylcbiAgICBzZWxlY3RlZEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNlbGVjdGVkQm94LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG5cbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb24gPSAnZGVmZW5kaW5nJ1xuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvblR5cGUgPSAnZG9kZ2luZydcbiAgICBidXR0b24uZGF0YXNldC5kZWZlbmRlckNob2ljZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBidXR0b24uZGF0YXNldC5za2lsbFZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICBidXR0b24uZGF0YXNldC5za2lsbE5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lXG5cbiAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxuICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lfSAoJHtcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgfSUpYFxuICB9XG5cbiAgc3RhdGljIF9vbkNoYXRDYXJkUmFkaW9Td2l0Y2ggKGV2ZW50KSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0Ll9vbkNoYXRDYXJkUmFkaW9Td2l0Y2gnKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgb3B0aW9uTGlzdCA9XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmFkaW8tc3dpdGNoJylcbiAgICBsZXQgaW5kZXhcbiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBvcHRpb25MaXN0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IG9wdGlvbkxpc3RbaW5kZXhdXG4gICAgICBpZiAoZWxlbWVudC5kYXRhc2V0LnByb3BlcnR5ID09PSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHkpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIH1cbiAgICB9XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuc2VsZWN0ZWQgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRWb2xsZXlTaXplIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIGNvbnN0IHJhbmdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luY3JlYXNlJykpIHtcbiAgICAgICAgICByYW5nZUNhcmQuY2hhbmdlVm9sbGV5U2l6ZSgxKVxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWNyZWFzZScpKSB7XG4gICAgICAgICAgcmFuZ2VDYXJkLmNoYW5nZVZvbGxleVNpemUoLTEpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2ggKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIENvQzdNZWxlZUluaXRpYXRvci51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICBDb0M3UmFuZ2VJbml0aWF0b3IudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhbWFnZScpKSB7XG4gICAgICAvLyBDb0M3SXRlbS51cGRhdGVDYXJkU3dpdGNoKCBldmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSkge1xuICAgICAgQ29DN0NoZWNrLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgQWN0b3Igd2hpY2ggaXMgdGhlIGF1dGhvciBvZiBhIGNoYXQgY2FyZFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICAgIFRoZSBjaGF0IGNhcmQgYmVpbmcgdXNlZFxuICAgKiBAcmV0dXJuIHtBY3RvcnxudWxsfSAgICAgICAgIFRoZSBBY3RvciBlbnRpdHkgb3IgbnVsbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9nZXRDaGF0Q2FyZEFjdG9yIChjYXJkKSB7XG4gICAgLy8gaWYgZGF0YXNldC5vYmplY3QgaXMgdGhlcmUgPT4gbmVlZCB0byB1bmVzY2FwZSB0aGluZ3MgISFcbiAgICAvLyBpZiBub3QgdXNlIHRoZSBkYXRhc2V0IGRpcmVjdGx5LlxuICAgIGNvbnN0IGNhcmREYXRhID0gY2FyZC5kYXRhc2V0Lm9iamVjdFxuICAgICAgPyBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuICAgICAgOiBjYXJkLmRhdGFzZXRcblxuICAgIGlmIChjYXJkRGF0YS5hY3RvcktleSkgcmV0dXJuIENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoY2FyZERhdGEuYWN0b3JLZXkpXG5cbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmREYXRhLnRva2VuSWRcbiAgICBpZiAodG9rZW5LZXkpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHRva2VuS2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkRGF0YS5hY3RvcklkXG4gICAgaWYgKGFjdG9ySWQpIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZClcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICBpZiAobWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICAgIGlmIChjaGF0TWVzc2FnZS51c2VyKSByZXR1cm4gY2hhdE1lc3NhZ2UudXNlci5jaGFyYWN0ZXJcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGlzQ2FyZE93bmVyIChjYXJkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxuICAgIGlmIChtZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgICAgcmV0dXJuIGNoYXRNZXNzYWdlLm93bm5lciB8fCBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIF9nZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvciB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKS5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbVRva2VuICh0b2tlbktleSkge1xuICAgIGNvbnN0IHRva2VuID0gQ29DN0NoYXQuZ2V0VG9rZW4odG9rZW5LZXkpXG4gICAgcmV0dXJuIHRva2VuID8gdG9rZW4uYWN0b3IgOiBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW4gKHRva2VuS2V5KSB7XG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gdG9rZW4gfHwgbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiB1cGRhdGUgYSBjaGF0IG1lc3NhZ2Ugd2l0aCBhIG5ldyBIVE1MIGNvbnRlbnQgYW5kIHBvcHVsYXRlIGl0LlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKGNhcmQsIG1lc3NJZCA9IG51bGwpIHtcbiAgICBjb25zdCBtZXNzYWdlSWQgPVxuICAgICAgbWVzc0lkID09IG51bGwgPyBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWQgOiBtZXNzSWRcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBjYXJkLm91dGVySFRNTCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZFJhbmdlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBjYXJkID0gYnV0dG9uLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG5cbiAgICBpZiAoIUNvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpKSByZXR1cm5cblxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuXG4gICAgbGV0IG1lc3NhZ2VDYXJkXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICBtZXNzYWdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgIH0gZWxzZSBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICBtZXNzYWdlQ2FyZCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgIH0gZWxzZSBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICBtZXNzYWdlQ2FyZCA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgIH1cbiAgICBtZXNzYWdlQ2FyZC5kaWNlTW9kaWZpZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgYXdhaXQgbWVzc2FnZUNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1lc3NhZ2UtaWQ9XCInICsgbWVzc2FnZUlkICsgJ1wiXScpLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9cmFuZ2VdW25hbWU9XCInICsgYnV0dG9uLm5hbWUgKyAnXCJdJykuZm9jdXMoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNoYXRDYXJkQWN0aW9uIChldmVudCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5fb25DaGF0Q2FyZEFjdGlvbicpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBjYXJkID0gYnV0dG9uLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3Qgb3JpZ2luTWVzc2FnZSA9IGJ1dHRvbi5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgLy8gY29uc3QgbWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZDtcbiAgICBjb25zdCBhY3Rpb24gPSBidXR0b24uZGF0YXNldC5hY3Rpb25cblxuICAgIGlmICghQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZCkpIHJldHVyblxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3VzZUx1Y2snOiB7XG4gICAgICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChidXR0b24uZGF0YXNldC5sdWNrQW1vdW50KVxuICAgICAgICBjb25zdCBuZXdTdWNjZXNzTGV2ZWwgPSBwYXJzZUludChcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQubmV3U3VjY2Vzc0xldmVsXG4gICAgICAgIClcblxuICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbGVlJykpIHtcbiAgICAgICAgICBsZXQgbWVsZWVDYXJkXG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgICAgICAgbWVsZWVDYXJkID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgICAgIG1lbGVlQ2FyZCA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBtZWxlZUNhcmQudXBncmFkZVJvbGwobHVja0Ftb3VudCwgbmV3U3VjY2Vzc0xldmVsLCBjYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgICAgICB9IGVsc2UgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICAgICAgY29uc3QgcmFuZ2VDYXJkID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgY29uc3Qgcm9sbFJlc3VsdCA9IGJ1dHRvbi5jbG9zZXN0KCcucm9sbC1yZXN1bHQnKVxuICAgICAgICAgIGNvbnN0IHJvbGxJbmRleCA9IHJvbGxSZXN1bHRcbiAgICAgICAgICAgID8gcGFyc2VJbnQocm9sbFJlc3VsdC5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhc3MtY2hlY2snKSkge1xuICAgICAgICAgICAgcmFuZ2VDYXJkLnBhc3NSb2xsKHJvbGxJbmRleClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdXBncmFkZUluZGV4ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgICByYW5nZUNhcmQudXBncmFkZVJvbGwocm9sbEluZGV4LCB1cGdyYWRlSW5kZXgpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSB8fFxuICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JykgIT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChidXR0b24uZGF0YXNldC5sdWNrQW1vdW50KVxuICAgICAgICAgICAgY2hlY2suZm9yY2VQYXNzKGx1Y2tBbW91bnQpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZ3JhZGVJbmRleCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgICAgYXdhaXQgY2hlY2sudXBncmFkZUNoZWNrKHVwZ3JhZGVJbmRleClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKVxuICAgICAgICAgIGNvbnN0IGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIgPVxuICAgICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LWRldGFpbHMnKVxuXG4gICAgICAgICAgaWYgKGFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgICAgICAgICBjYXJkLmRhdGFzZXQuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgICAgICAgICBjYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gJ2ZhbHNlJyAvLyB0cmlnZ2VyIDMgdXBkYXRlcyBkZSBjYXJkXG4gICAgICAgICAgICBzd2l0Y2ggKG5ld1N1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZXBsYWNlKCdmYWlsdXJlJywgJ3N1Y2Nlc3MnKVxuICAgICAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2Z1bWJsZScpXG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b29sdGlwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoY2FyZClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEVub3VnaEx1Y2snLCB7XG4gICAgICAgICAgICAgICAgYWN0b3I6IGFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3B1c2gnOiB7XG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSBjYXJkLmNsb25lTm9kZSh0cnVlKSAvLyBUT0RPIG5vdCBuZWNlc3NhcnlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgICAgIHJlc3VsdC5pbm5lclRleHQgPVxuICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHVzaGluZ1NraWxsJylcbiAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2ZhaWx1cmUnKVxuICAgICAgICBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgICAgICBuZXdDYXJkLmRhdGFzZXQucHVzaGVkUm9sbCA9IHRydWVcbiAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQobmV3Q2FyZCwgb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZClcbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLnB1c2goY2FyZClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2RlZmVuZGluZyc6IHtcbiAgICAgICAgbGV0IGRlZmVuZGVyS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAgICAgLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICBsZXQgZGVmZW5kZXJcbiAgICAgICAgaWYgKCFkZWZlbmRlcktleSkge1xuICAgICAgICAgIGRlZmVuZGVyS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAgICAgICAuZGF0YXNldC5hY3RvcklkXG4gICAgICAgICAgZGVmZW5kZXIgPSBnYW1lLmFjdG9ycy5nZXQoZGVmZW5kZXJLZXkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmZW5kZXIgPSB0aGlzLmdldEFjdG9yRnJvbVRva2VuKGRlZmVuZGVyS2V5KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VUeXBlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblR5cGVcbiAgICAgICAgY29uc3Qgb3V0bnVtYmVyZWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQub3V0bnVtYmVyZWQgPT09ICd0cnVlJ1xuICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgICAgIGNoZWNrLnNpZGUgPSAndGFyZ2V0J1xuICAgICAgICBjaGVjay5hY3Rpb24gPSByZXNwb25zZVR5cGVcbiAgICAgICAgc3dpdGNoIChyZXNwb25zZVR5cGUpIHtcbiAgICAgICAgICBjYXNlICdkb2RnaW5nJzpcbiAgICAgICAgICAgIGNoZWNrLmFjdG9yID0gZGVmZW5kZXJcbiAgICAgICAgICAgIGNoZWNrLnNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgICAgIGlmIChvdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyID0gLTFcblxuICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgY2hlY2suaXRlbSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICAgIGlmIChvdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyID0gLTFcblxuICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdtYW5ldXZlcic6IHtcbiAgICAgICAgICAgIGNvbnN0IGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZClcbiAgICAgICAgICAgIGlmIChkZWZlbmRlci5idWlsZCA8PSBhY3Rvci5idWlsZCAtIDMpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNYW5ldXZlck5vdFBvc3NpYmxlJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrLmFjdG9yID0gZGVmZW5kZXJcbiAgICAgICAgICAgIGNoZWNrLnNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgICAgIGlmIChvdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyID0gLTFcbiAgICAgICAgICAgIGlmIChkZWZlbmRlci5idWlsZCA8IGFjdG9yLmJ1aWxkKSB7XG4gICAgICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9XG4gICAgICAgICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyIC0gKGFjdG9yLmJ1aWxkIC0gZGVmZW5kZXIuYnVpbGQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjaGVjay5kaWNlTW9kaWZpZXIgPCAtMikge1xuICAgICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ICsgTWF0aC5hYnMoY2hlY2suZGljZU1vZGlmaWVyKSAtIDJcbiAgICAgICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gLTJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVsZWUtaW5pdGlhdG9yLXJvbGwnOiB7XG4gICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IGluaXRpYXRvci5wZXJmb3JtU2tpbGxDaGVjayhcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxcbiAgICAgICAgKVxuICAgICAgICAkKGJ1dHRvbikucHJvcCgnZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChjaGVjay5kaWNlLnJvbGwpXG4gICAgICAgIGF3YWl0IGluaXRpYXRvci5wdWJsaXNoQ2hlY2tSZXN1bHQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZWxlZS10YXJnZXQtbm8tcmVzcG9uc2UnOiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCB0YXJnZXQucHVibGlzaE5vUmVwb25zZVJlc3VsdCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lbGVlLXRhcmdldC1yb2xsJzoge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCB0YXJnZXQucGVyZm9ybVNraWxsQ2hlY2soXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsXG4gICAgICAgIClcbiAgICAgICAgJChidXR0b24pLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QoY2hlY2suZGljZS5yb2xsKVxuICAgICAgICBhd2FpdCB0YXJnZXQucHVibGlzaENoZWNrUmVzdWx0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JvbGwtbWVsZWUtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCBkYW1hZ2VDaGF0Q2FyZCA9IG5ldyBEYW1hZ2VDYXJkKHtcbiAgICAgICAgICBjcml0aWNhbDogYnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPT09ICd0cnVlJyxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgfSlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuYWN0b3JLZXkgPSBidXR0b24uZGF0YXNldC5kZWFsZXJcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudGFyZ2V0S2V5ID0gYnV0dG9uLmRhdGFzZXQudGFyZ2V0XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGJ1dHRvbi5kYXRhc2V0LndlYXBvblxuICAgICAgICBpZiAob3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkge1xuICAgICAgICAgIGRhbWFnZUNoYXRDYXJkLm1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICAgICAgfVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC51cGRhdGVDaGF0Q2FyZCgpXG5cbiAgICAgICAgLy8gY29uc3QgZGFtYWdlQ2FyZCA9IG5ldyBDb0M3RGFtYWdlUm9sbChcbiAgICAgICAgLy8gIGJ1dHRvbi5kYXRhc2V0LndlYXBvbixcbiAgICAgICAgLy8gIGJ1dHRvbi5kYXRhc2V0LmRlYWxlcixcbiAgICAgICAgLy8gIHtcbiAgICAgICAgLy8gICAgdGFyZ2V0S2V5OiBidXR0b24uZGF0YXNldC50YXJnZXQsXG4gICAgICAgIC8vICAgIGNyaXRpY2FsOiAndHJ1ZScgPT0gYnV0dG9uLmRhdGFzZXQuY3JpdGljYWwsXG4gICAgICAgIC8vICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICAvLyAgfSk7XG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSBkYW1hZ2VDYXJkLm1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XG4gICAgICAgIC8vIGRhbWFnZUNhcmQucm9sbERhbWFnZSgpO1xuICAgICAgICAvLyBpZiggb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkge1xuICAgICAgICAvLyAgZm9yIChjb25zdCBiIG9mIGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQtYnV0dG9ucycpKSB7IGIucmVtb3ZlKCkgfVxuICAgICAgICAvLyAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoIGNhcmQpO1xuICAgICAgICAvLyB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyYW5nZS1pbml0aWF0b3Itc2hvb3QnOiB7XG4gICAgICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIHJhbmdlSW5pdGlhdG9yLmFkZFNob3RBdEN1cnJlbnRUYXJnZXQoKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyYW5nZS1pbml0aWF0b3Itcm9sbCc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IucmVzb2x2ZUNhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncm9sbC1yYW5nZS1kYW1hZ2UnOiB7XG4gICAgICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnJvbGxEYW1hZ2UoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZGVhbC1tZWxlZS1kYW1hZ2UnOiB7XG4gICAgICAgIGNvbnN0IHRhcmdldEtleSA9IGNhcmQuZGF0YXNldC50YXJnZXRLZXlcbiAgICAgICAgY29uc3QgYW1vdW50ID0gY2FyZC5kYXRhc2V0LnJlc3VsdFxuICAgICAgICBjb25zdCB0YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgIGF3YWl0IHRhcmdldEFjdG9yLmRlYWxEYW1hZ2UoYW1vdW50KVxuICAgICAgICBjb25zdCBidXR0b25zID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJylcbiAgICAgICAgY29uc3QgZGljZVRvdGFsID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgICAgICQoZGljZVRvdGFsKS5hcHBlbmQoJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicpXG4gICAgICAgIGlmIChidXR0b25zKSBidXR0b25zLnJlbW92ZSgpXG4gICAgICAgIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKGNhcmQpXG5cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVhbC1yYW5nZS1kYW1hZ2UnOiB7XG4gICAgICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLmRlYWxEYW1hZ2UoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0ZXN0Y2hlY2snOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcygpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLXBhc3MnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcygpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLWZhaWwnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmZvcmNlRmFpbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luY3JlYXNlLXN1Y2Nlc3MtbGV2ZWwnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmluY3JlYXNlU3VjY2Vzc0xldmVsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVjcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZGVjcmVhc2VTdWNjZXNzTGV2ZWwoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXZlYWwtY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgICAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNDdHJsS2V5KGV2ZW50KVxuICAgICAgICApIHtcbiAgICAgICAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCh7IG1ha2VQdWJsaWM6IHRydWUgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCh7IG1ha2VQdWJsaWM6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWNoZWNrLWNhcmQnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLnN0YW5kYnkgPSBmYWxzZVxuICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgZm9yY2VSb2xsOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZsYWctZm9yLWRldmVsb3BtZW50Jzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBjaGVjay5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXNldC1jcmVhdHVyZS1zYW4tZGF0YSc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2suY2xlYXJTYW5Mb3NzUmVhc29uKClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLXNhbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbFNhbigpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYWR2YW5jZS1zdGF0ZSc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2suYWR2YW5jZVN0YXRlKFxuICAgICAgICAgIGJ1dHRvbi5kYXRhc2V0LnN0YXRlIC8qLCBidXR0b24uZGF0YXNldC5wYXJhbSAqL1xuICAgICAgICApXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1zYW4tbG9zcyc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtaW50LWNoZWNrJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsSW50KClcbiAgICAgICAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICAvLyBjYXNlICdhcHBseS1zYW4tbG9zcyc6e1xuICAgICAgLy8gIGNvbnN0IHNhbkNoZWNrID0gQ29DN1NhbkNoZWNrLmdldEZyb21DYXJkKCBjYXJkKTtcbiAgICAgIC8vICBhd2FpdCBzYW5DaGVjay5hcHBseVNhbkxvc3MoKTtcbiAgICAgIC8vICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpO1xuICAgICAgLy8gIGJyZWFrO1xuICAgICAgLy8gfVxuXG4gICAgICAvLyBjYXNlICdyZXZlYWwtc2FuLWNoZWNrJzp7XG4gICAgICAvLyAgY29uc3Qgc2FuQ2hlY2sgPSBDb0M3U2FuQ2hlY2suZ2V0RnJvbUNhcmQoIGNhcmQpO1xuICAgICAgLy8gIHNhbkNoZWNrLmlzQmxpbmQgPSBmYWxzZTtcbiAgICAgIC8vICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpO1xuICAgICAgLy8gIGJyZWFrO1xuICAgICAgLy8gfVxuXG4gICAgICBjYXNlICdyb2xsLWNvbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBDb0M3Q29uQ2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgY29uQ2hlY2sucm9sbENvbigpXG4gICAgICAgIGNvbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmV2ZWFsLWNvbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBDb0M3Q29uQ2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY29uQ2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNvbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRvZ2dsaW5nIHRoZSB2aXNpYmlsaXR5IG9mIGNoYXQgY2FyZCBjb250ZW50IHdoZW4gdGhlIG5hbWUgaXMgY2xpY2tlZFxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAgIFRoZSBvcmlnaW5hdGluZyBjbGljayBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaGVhZGVyID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSBoZWFkZXIuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgY29uc3QgY29udGVudCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCcpXG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGlmICghY29udGVudC5zdHlsZS5kaXNwbGF5KSB7XG4gICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9XG4gICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnYmxvY2snIDogJ25vbmUnXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vLi4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdNZWxlZVJlc29sdGlvbiB9IGZyb20gJy4vbWVsZWUtcmVzb2x1dGlvbi5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuXG4vLyBUT0RPIDogcsOpY3Vww6lyZXIgbGUgamV0IGVuIHRhbnQgcXUnb2JqZXQgISEhXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlSW5pdGlhdG9yIGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIGl0ZW1JZCA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBzdXBlcihhY3RvcktleSwgZmFzdEZvcndhcmQpXG4gICAgdGhpcy5pdGVtSWQgPSBpdGVtSWRcbiAgICB0aGlzLnJlc29sdmVkID0gZmFsc2VcbiAgICB0aGlzLm91dG51bWJlcmVkID0gZmFsc2VcbiAgICB0aGlzLnN1cnByaXNlZCA9IGZhbHNlXG4gICAgdGhpcy5hdXRvU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5kaWNlTW9kaWZpZXIgPSAwXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5odG1sJ1xuICB9XG5cbiAgYXN5bmMgcmV2ZWFsQ2hlY2sgKCkge1xuICAgIC8vIFRPRE8gOiBvbiB1dGlsaXNlIGwndXBkYXRlIGR1IG1lc3NhZ2UgYXUgbGlldSBkZSByZWNvbnN0cnVpcmUgbCdvYmpldC4gQ2hhbmdlciBjZSBjb21wb3J0ZW1lbnQuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnY2hlY2tSZXZlYWxlZCcsIHRydWUpXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKGNoYXRNZXNzYWdlLCBmYWxzZSlcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXNcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpc1xuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9XG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHRoaXMuaXNCbGluZCApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIHN3aXRjaCAoZmxhZykge1xuICAgICAgY2FzZSAnb3V0bnVtYmVyZWQnOlxuICAgICAgY2FzZSAnc3VycHJpc2VkJzpcbiAgICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPSBNYXRoLm1heCgtMiwgTWF0aC5taW4oMiwgcGFyc2VJbnQodGhpcy5kaWNlTW9kaWZpZXIsIDEwKSArICh0aGlzW2ZsYWddID8gMSA6IC0xKSkpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICdpbml0aWF0b3InXG4gICAgY2hlY2suYWN0aW9uID0gJ2F0dGFjaydcbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmNoZWNrUmV2ZWFsZWQgPSBmYWxzZVxuICAgIGVsc2UgdGhpcy5jaGVja1JldmVhbGVkID0gdHJ1ZVxuXG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSB0aGlzLmRpY2VNb2RpZmllclxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBpZiAocHVibGlzaCkgY2hlY2sudG9NZXNzYWdlKClcblxuICAgIHRoaXMuY3JpdGljYWxEYW1hZ2UgPVxuICAgICAgY2hlY2suc3VjY2Vzc0xldmVsID09PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgfHxcbiAgICAgIGNoZWNrLnN1Y2Nlc3NMZXZlbCA9PT0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgIGlmICh0aGlzLmhhc1RhcmdldCAmJiAhdGhpcy5hdXRvU3VjY2Vzcykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IGdhbWUuQ29DN3NvY2tldC5leGVjdXRlQXNHTSgnZ21jcmVhdGVtZXNzYWdlYXMnLCB7XG4gICAgICAgIHRhcmdldEtleTogdGhpcy50YXJnZXRLZXksXG4gICAgICAgIG1lc3NhZ2VJZDogdGhpcy5tZXNzYWdlSWQsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0aGlzLmZhc3RGb3J3YXJkLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3RvcktleVxuICAgICAgfSlcbiAgICAgIHRoaXMudGFyZ2V0Q2FyZCA9IG1lc3NhZ2UuaWQgfHwgbWVzc2FnZS5faWRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hdXRvU3VjY2VzcyAmJiAhdGhpcy5jaGVjay5pc0Z1bWJsZSkge1xuICAgICAgdGhpcy5jaGVjay5mb3JjZVBhc3MoKVxuICAgIH1cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hDaGVja1Jlc3VsdCAoY2hlY2sgPSBudWxsKSB7XG4gICAgaWYgKCFjaGVjayAmJiAhdGhpcy5jaGVjaykgcmV0dXJuIG51bGxcblxuICAgIGlmIChjaGVjaykgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNoZWNrKHRoaXMuY2hlY2spXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICB0aGlzLnJvbGwucm9sbEljb25zID0gW11cbiAgICBpZiAodGhpcy5yb2xsLmNyaXRpY2FsKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnbWVkYWwnKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLmZ1bWJsZSkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdkYXJrcmVkJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzcGlkZXInKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLnN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzdGFyJylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdibGFjaydcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NrdWxsJylcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudGFyZ2V0Q2FyZCAmJiAhdGhpcy5hdXRvU3VjY2VzcyAmJiB0aGlzLmhhc1RhcmdldCkge1xuICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICAgIClcbiAgICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG4gICAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICB9XG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQsIG1lc3NhZ2VJZCA9IG51bGwpIHtcbiAgICBjb25zdCBpbml0aWF0b3IgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGluaXRpYXRvciwgY2FyZClcbiAgICBpbml0aWF0b3Iucm9sbCA9IENvQzdSb2xsLmdldEZyb21DYXJkKGNhcmQpXG5cbiAgICBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICBpbml0aWF0b3IubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfSBlbHNlIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gaW5pdGlhdG9yXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQsIG1lc3NhZ2VJZClcbiAgICBpbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG5cbiAgICByZXR1cm4gaW5pdGlhdG9yXG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLm1lbGVlLmluaXRpYXRvcicpXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxuXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xuICAgICAgY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSAhPT0gJ3RydWUnXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXG4gICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgIGluaXRpYXRvci50b2dnbGVGbGFnKGZsYWcpXG4gICAgICBpbml0aWF0b3IudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIHVwZ3JhZGVSb2xsIChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIG9sZENhcmQpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTHVja05vdEVub3VnaCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5yb2xsLnZhbHVlID0gbnVsbFxuICAgIHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICB0aGlzLnJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIG9sZENhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSBmYWxzZVxuXG4gICAgY29uc3QgZGljZVJvbGxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yb2xsJylcbiAgICBkaWNlUm9sbHMuZGF0YXNldC52YWx1ZSA9IG51bGxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5sdWNrU3BlbnQgPSB0cnVlXG5cbiAgICBjb25zdCByZXN1bERldGFpbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG4gICAgY29uc3QgZGljZVRvdGFsID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgY29uc3Qgcm9sbERhbWFnZUJ1dHRvbiA9IG9sZENhcmQucXVlcnlTZWxlY3RvcihcbiAgICAgICdidXR0b25bZGF0YS1hY3Rpb249XCJyb2xsLW1lbGVlLWRhbWFnZVwiXSdcbiAgICApXG4gICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW52aXNpYmxlJylcblxuICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIGlmIChyb2xsRGFtYWdlQnV0dG9uKSByb2xsRGFtYWdlQnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPSB0cnVlXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBkaWNlVG90YWwuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQob2xkQ2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBBcHBsaWNhdGlvbiwgQ09ORklHLCBDT05TVCwgRGlhbG9nLCBEaWUsIGZvdW5kcnksIGZyb21VdWlkLCBmcm9tVXVpZFN5bmMsIGdhbWUsIEhvb2tzLCBSb2xsLCBUZXh0RWRpdG9yLCBUb2tlbiwgdWkgKi9cbmltcG9ydCB7IEF2ZXJhZ2VSb2xsIH0gZnJvbSAnLi4vYXBwcy9hdmVyYWdlLXJvbGwuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb25DaGVjayB9IGZyb20gJy4uL2NoYXQvY29uY2hlY2suanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IFNraWxsU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgUG9pbnRTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL3BvaW50LXNlbGVjdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBDaGFyYWNTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL2NoYXItc2VsZWN0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IENoYXJhY1JvbGxEaWFsb2cgfSBmcm9tICcuLi9hcHBzL2NoYXItcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXNwZWMtc2VsZWN0LWRpYWxvZy5qcydcbmltcG9ydCB7IFNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXNwZWNpYWxpemF0aW9uLXNlbGVjdC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFZhbHVlRGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC12YWx1ZS1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuLi9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuanMnXG5pbXBvcnQgeyBDb0M3UmFuZ2VJbml0aWF0b3IgfSBmcm9tICcuLi9jaGF0L3JhbmdlY29tYmF0LmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2UgQWN0b3IgY2xhc3MgdG8gaW1wbGVtZW50IGFkZGl0aW9uYWwgbG9naWMgc3BlY2lhbGl6ZWQgZm9yIENvQyA3dGguXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0NBY3RvciBleHRlbmRzIEFjdG9yIHtcbiAgLyoqIENyZWF0ZSBkZXJpdmVkIGRvY3VtZW50IGNsYXNzZXMgZm9yIHNwZWNpZmljIEl0ZW0gdHlwZXMgKi9cbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICAvKiogQHNlZSBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzIGluIG1vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMgKi9cbiAgICBpZiAoZGF0YS50eXBlIGluIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXMgJiYgIWNvbnRleHQ/LmV4dGVuZGVkKSB7XG4gICAgICAvKipcbiAgICAgICAqIFdoZW4gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgbmV3IGNsYXNzIHdpbGwgY2FsbCBpdCdzIHN1cGVyKCksXG4gICAgICAgKiB0aGUgZXh0ZW5kZWQgZmxhZyB3aWxsIGJlIHRydWUsIHRodXMgYnlwYXNzaW5nIHRoaXMgd2hvbGUgcHJvY2Vzc1xuICAgICAgICogYW5kIHJlc3VtZSBkZWZhdWx0IGJlaGF2aW9yXG4gICAgICAgKi9cbiAgICAgIHJldHVybiBuZXcgQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3Nlc1tkYXRhLnR5cGVdKGRhdGEsIHtcbiAgICAgICAgLi4ueyBleHRlbmRlZDogdHJ1ZSB9LFxuICAgICAgICAuLi5jb250ZXh0XG4gICAgICB9KVxuICAgIH1cbiAgICAvLyBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgIC8vICAgaWYgKGRhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgIC8vICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NraWxscy5zdmcnXG4gICAgLy8gICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N0YXR1cycpIHtcbiAgICAvLyAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL2F1cmEuc3ZnJ1xuICAgIC8vICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgLy8gICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9zd29yZC5zdmcnXG4gICAgLy8gICB9XG4gICAgLy8gfVxuICAgIC8qKiBEZWZhdWx0IGJlaGF2aW9yLCBqdXN0IGNhbGwgc3VwZXIoKSBhbmQgZG8gYWxsIHRoZSBkZWZhdWx0IEl0ZW0gaW5pdHMgKi9cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgYXN5bmMgaW5pdGlhbGl6ZSAoKSB7XG4gICAgc3VwZXIuaW5pdGlhbGl6ZSgpXG4gICAgYXdhaXQgdGhpcy5jcmVhdHVyZUluaXQoKSAvLyBUT0RPIDogbW92ZSB0aGlzIGluIENvQ0FjdG9yLmNyZWF0ZShkYXRhLCBvcHRpb25zKVxuICB9XG5cbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKiBUZXN0aW5nXG4gIC8vIGFzeW5jIHVwZGF0ZShkYXRhLCBvcHRpb25zPXt9KSB7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdyZXR1cm4gc3VwZXIudXBkYXRlKGRhdGEsIG9wdGlvbnMpOycpO1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgaW50IDogJHt0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnR9YCk7XG4gIC8vICAgdGhpcy5jaGFyYWN0ZXJpc3RpY3MuaW50ID0gMTU7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGBtb2RpZmllZCBpbnQgOiAke3RoaXMuY2hhcmFjdGVyaXN0aWNzLmludH1gKTtcbiAgLy8gICByZXR1cm4gc3VwZXIudXBkYXRlKGRhdGEsIG9wdGlvbnMpO1xuICAvLyB9XG5cbiAgLy8gZ2V0IGNoYXJhY3RlcmlzdGljcygpe1xuICAvLyAgIGNvbnN0IGFjdG9yID0gdGhpcztcbiAgLy8gICAgIHJldHVybiB7XG4gIC8vICAgICAgIGdldCBpbnQoKXtcbiAgLy8gICAgICAgICByZXR1cm4gYWN0b3IuZ2V0UHJvcCgnX2ludCcpO1xuICAvLyAgICAgICB9LFxuXG4gIC8vICAgICAgIHNldCBpbnQoeCl7XG4gIC8vICAgICAgICAgYWN0b3Iuc2V0UHJvcCgnX2ludCcsIHgpO1xuICAvLyAgICAgICB9XG4gIC8vICAgIH07XG4gIC8vIH1cblxuICAvLyBzZXRQcm9wKGtleSwgeCl7XG4gIC8vICAgdGhpc1trZXldID0geDtcbiAgLy8gfVxuXG4gIC8vIGdldFByb3Aoa2V5KXtcbiAgLy8gICByZXR1cm4gdGhpc1trZXldfHwwO1xuICAvLyB9XG4gIC8vXG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKiBQcmVwYXJlIGRhdGEgcmVsYXRlZCB0byB0aGlzIERvY3VtZW50IGl0c2VsZiwgYmVmb3JlIGFueSBlbWJlZGRlZCBEb2N1bWVudHMgb3IgZGVyaXZlZCBkYXRhIGlzIGNvbXB1dGVkLlxuICAgKiBAbWVtYmVyb2YgQ2xpZW50RG9jdW1lbnRNaXhpbiNcbiAgICovXG4gIHByZXBhcmVCYXNlRGF0YSAoKSB7XG4gICAgaWYgKFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKHRoaXMudHlwZSkpIHtcbiAgICAgIHRoaXMuc3lzdGVtLnNraWxscyA9IHt9XG4gICAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcy5pdGVtcykge1xuICAgICAgICBpZiAoaS50eXBlICE9PSAnc2tpbGwnKSBjb250aW51ZVxuICAgICAgICB0aGlzLnN5c3RlbS5za2lsbHNbYCR7aS5pdGVtSWRlbnRpZmllcn1gXSA9IHsgZm91bmRyeUlEOiBpLmlkLCBjb2NpZDogaS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCwgdmFsdWU6IGkucmF3VmFsdWUsIGJvbnVzRGljZTogaS5zeXN0ZW0uYm9udXNEaWNlIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICogUmVtb3ZhbCBvZiAxLzUgc2FuaXR5XG4gICAgICogdGhpcyBpcyB0byByZW1vdmUgdGhlXG4gICAgICogYWN0b3IuZGF0YS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSB0byBiZSByZW1vdmVkIGZyb20gdGVtcGxhdGVcbiAgICAgKiBhbmQgaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgdG8gYmUgcmVtb3ZlZCBmcm9tIHRlbXBsYXRlXG4gICAgICovXG4gICAgICBpZiAodHlwZW9mIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSkge1xuICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eS5zcGxpdCgnLycpXG4gICAgICAgICAgaWYgKHNbMV0gJiYgIWlzTmFOKE51bWJlcihzWzFdKSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPSBOdW1iZXIoc1sxXSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCA9IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCA9IDBcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyByZXR1cm4gY29tcHV0ZWQgdmFsdWVzIG9yIGZpeGVkIHZhbHVlcyBpZiBub3QgYXV0by5cbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LnZhbHVlID0gdGhpcy5yYXdNb3ZcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUgPSB0aGlzLnJhd0RiXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlID0gdGhpcy5yYXdCdWlsZFxuXG4gICAgICAvLyBGb3IgdmVoaWNsZSBvbmx5IDpcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA9IHRoaXMuaHBcblxuICAgICAgLy8gaWYgKFxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA+IGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heCB8fFxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggPT0gbnVsbFxuICAgICAgLy8gKSB7XG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4XG4gICAgICAvLyB9XG4gICAgICAvLyBpZiAoXG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID4gZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4IHx8XG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCA9PSBudWxsXG4gICAgICAvLyApIHtcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXhcbiAgICAgIC8vIH1cblxuICAgIC8vIGlmIChcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID09IG51bGwgJiZcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCAhPSBudWxsXG4gICAgLy8gKSB7XG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heFxuICAgIC8vIH1cbiAgICAvLyBpZiAoXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9PSBudWxsICYmXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggIT0gbnVsbFxuICAgIC8vICkge1xuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXhcbiAgICAvLyB9XG4gICAgfVxuICAgIHN1cGVyLnByZXBhcmVCYXNlRGF0YSgpXG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIFByZXBhcmUgYWxsIGVtYmVkZGVkIERvY3VtZW50IGluc3RhbmNlcyB3aGljaCBleGlzdCB3aXRoaW4gdGhpcyBwcmltYXJ5IERvY3VtZW50LlxuICAgKiBAbWVtYmVyb2YgQ2xpZW50RG9jdW1lbnRNaXhpbiNcbiAgICogYWN0aXZlIGVmZmVjdHMgYXJlIGFwcGxpZWRcbiAgICovXG4gIHByZXBhcmVFbWJlZGRlZERvY3VtZW50cyAoKSB7XG4gICAgc3VwZXIucHJlcGFyZUVtYmVkZGVkRG9jdW1lbnRzKClcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQXBwbHkgdHJhbnNmb3JtYXRpb25zIG9yIGRlcml2YXRpb25zIHRvIHRoZSB2YWx1ZXMgb2YgdGhlIHNvdXJjZSBkYXRhIG9iamVjdC5cbiAgICogQ29tcHV0ZSBkYXRhIGZpZWxkcyB3aG9zZSB2YWx1ZXMgYXJlIG5vdCBzdG9yZWQgdG8gdGhlIGRhdGFiYXNlLlxuICAgKiBAbWVtYmVyb2YgQ2xpZW50RG9jdW1lbnRNaXhpbiNcbiAgICovXG4gIHByZXBhcmVEZXJpdmVkRGF0YSAoKSB7XG4gICAgaWYgKFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKHRoaXMudHlwZSkpIHtcbiAgICAgIHN1cGVyLnByZXBhcmVEZXJpdmVkRGF0YSgpXG4gICAgICAvLyBTZXQgaHBNYXgsIG1wTWF4LCBzYW5NYXgsIG1vdiwgZGIsIGJ1aWxkLiBUaGlzIGlzIHRvIGFsbG93IGNhbGN1bGF0aW9uIG9mIGRlcml2ZWQgdmFsdWUgd2l0aCBtb2RpZmVkIGNoYXJhY3RlcmlzdGljcy5cbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LnZhbHVlID0gdGhpcy5yYXdNb3ZcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUgPSB0aGlzLnJhd0RiXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlID0gdGhpcy5yYXdCdWlsZFxuXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCA9IHRoaXMucmF3SHBNYXhcbiAgICAgIGlmICh0aGlzLmhwID09PSBudWxsKSB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlID0gdGhpcy5yYXdIcE1heFxuXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heCA9IHRoaXMucmF3TXBNYXhcbiAgICAgIGlmICh0aGlzLm1wID09PSBudWxsKSB0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID0gdGhpcy5yYXdNcE1heFxuXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXggPSB0aGlzLnJhd1Nhbk1heFxuICAgICAgaWYgKHRoaXMuc2FuID09PSBudWxsKSB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA9IHRoaXMucmF3U2FuTWF4XG5cbiAgICAgIC8vIEFwcGx5IGVmZmVjdHMgdG8gYXV0b21hdGljYWx5IGNhbGN1bGF0ZWQgdmFsdWVzLlxuICAgICAgY29uc3QgZmlsdGVyTWF0cml4ID0gW11cblxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLmhwLm1heCcpXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMubXAubWF4JylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMuc2FuLm1heCcpXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZScpXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlJylcblxuICAgICAgY29uc3QgY2hhbmdlcyA9IHRoaXMuZWZmZWN0cy5yZWR1Y2UoKGNoYW5nZXMsIGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGlzYWJsZWQgfHwgZS5pc1N1cHByZXNzZWQpIHJldHVybiBjaGFuZ2VzXG4gICAgICAgIHJldHVybiBjaGFuZ2VzLmNvbmNhdChcbiAgICAgICAgICBlLmNoYW5nZXMubWFwKGMgPT4ge1xuICAgICAgICAgICAgYyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGMpXG4gICAgICAgICAgICBjLmVmZmVjdCA9IGVcbiAgICAgICAgICAgIGMucHJpb3JpdHkgPSBjLnByaW9yaXR5ID8/IGMubW9kZSAqIDEwXG4gICAgICAgICAgICByZXR1cm4gY1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH0sIFtdKVxuICAgICAgY2hhbmdlcy5zb3J0KChhLCBiKSA9PiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eSlcblxuICAgICAgY29uc3Qgc2VsZWN0Q2hhbmdlcyA9IGNoYW5nZXMuZmlsdGVyKGUgPT4gZmlsdGVyTWF0cml4LmluY2x1ZGVzKGUua2V5KSlcblxuICAgICAgLy8gQXBwbHkgYWxsIGNoYW5nZXNcbiAgICAgIGZvciAoY29uc3QgY2hhbmdlIG9mIHNlbGVjdENoYW5nZXMpIHtcbiAgICAgICAgY2hhbmdlLmVmZmVjdC5hcHBseSh0aGlzLCBjaGFuZ2UpXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmhwTWF4ICYmIHRoaXMuaHBNYXggPCB0aGlzLmhwKSB7IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUgPSB0aGlzLmhwTWF4IH1cbiAgICAgIGlmICh0aGlzLm1wTWF4ICYmIHRoaXMubXBNYXggPCB0aGlzLm1wKSB7IHRoaXMuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPSB0aGlzLm1wTWF4IH1cbiAgICAgIGlmICh0aGlzLnNhbk1heCAmJiB0aGlzLnNhbk1heCA8IHRoaXMuc2FuKSB7IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlID0gdGhpcy5zYW5NYXggfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBkZWZhdWx0SW1nICh0eXBlKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdjb250YWluZXInOlxuICAgICAgICByZXR1cm4gJ2ljb25zL3N2Zy9jaGVzdC5zdmcnXG4gICAgICBjYXNlICdjcmVhdHVyZSc6XG4gICAgICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9mbG9hdGluZy10ZW50YWNsZXMuc3ZnJ1xuICAgICAgY2FzZSAnbnBjJzpcbiAgICAgICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2N1bHRpc3Quc3ZnJ1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIGRhdGEucHJvdG90eXBlVG9rZW4gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGRhdGEucHJvdG90eXBlVG9rZW4gfHwge30sIHtcbiAgICAgICAgYWN0b3JMaW5rOiB0cnVlLFxuICAgICAgICBkaXNwb3NpdGlvbjogMSxcbiAgICAgICAgc2lnaHQ6IHtcbiAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICducGMnKSB7XG4gICAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJyB8fCBkYXRhLmltZyA9PT0gJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gQ29DQWN0b3IuZGVmYXVsdEltZyhkYXRhLnR5cGUpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdjcmVhdHVyZScpIHtcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnIHx8IGRhdGEuaW1nID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSBDb0NBY3Rvci5kZWZhdWx0SW1nKGRhdGEudHlwZSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnIHx8IGRhdGEuaW1nID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSBDb0NBY3Rvci5kZWZhdWx0SW1nKGRhdGEudHlwZSlcbiAgICAgIH1cbiAgICAgIGRhdGEucHJvdG90eXBlVG9rZW4gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGRhdGEucHJvdG90eXBlVG9rZW4gfHwge30sIHtcbiAgICAgICAgYWN0b3JMaW5rOiB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogRWFybHkgdmVyc2lvbiBvbiB0ZW1wbGF0ZXMgZGlkIG5vdCBpbmNsdWRlIHBvc3NpYmlsaXR5IG9mIGF1dG8gY2FsY1xuICAgKiBKdXN0IGNoZWNrIGlmIGF1dG8gaXMgdW5kZWZpbmVkLCBpbiB3aGljaCBjYXNlIGl0IHdpbGwgYmUgc2V0IHRvIHRydWVcbiAgICovXG4gIGNoZWNrVW5kZWZpbmVkQXV0byAoKSB7XG4gICAgY29uc3QgcmV0dXJuRGF0YSA9IHtcbiAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgaHA6IHt9LFxuICAgICAgICBtcDoge30sXG4gICAgICAgIHNhbjoge30sXG4gICAgICAgIG1vdjoge30sXG4gICAgICAgIGRiOiB7fSxcbiAgICAgICAgYnVpbGQ6IHt9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5ocD8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuaHAuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1wPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5tcC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uc2FuPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5zYW4uYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1vdj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMubW92LmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5kYj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LmJ1aWxkPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5idWlsZC5hdXRvID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiByZXR1cm5EYXRhXG4gIH1cblxuICBnZXQgY2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7XG4gICAgICBzdHI6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5TVFInLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCcsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBjb246IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5DT04nLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgc2l6OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuU0laJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBkZXg6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5ERVgnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgYXBwOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBpbnQ6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5JTlQnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgcG93OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuUE9XJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgZWR1OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGNoYXJhY3RlcmlzdGljc1trZXldID0ge1xuICAgICAgICAgIGtleSxcbiAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbCksXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlLFxuICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyAyKSB8fCBudWxsLFxuICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyA1KSB8fCBudWxsLFxuICAgICAgICAgIGZvcm11bGE6IHZhbHVlLmZvcm11bGFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gdG9rZW4gY3JlYXRpb24gZnJvbSBwcmVDcmVhdGVBY3RvciBob29rXG4gICAqIEBwYXJhbSB7Kn0gY3JlYXRlRGF0YVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGluaXRUb2tlbiAoY3JlYXRlRGF0YSkge1xuICAgIC8vIGNhbGxlZCB1cG9uIHRva2VuIGNyZWF0aW9uLmFjdGl2ZVxuICAgIGlmIChjcmVhdGVEYXRhKSB7XG4gICAgICAvL1xuICAgIH1cbiAgfVxuXG4gIGdldCBoYXNUZW1wb0luc2FuZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lKVxuICB9XG5cbiAgZ2V0IGdldFRlbXBvSW5zYW5lRHVyYXRpb25UZXh0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25WYWx1ZShDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSwgJ2R1cmF0aW9uVGV4dCcpXG4gIH1cblxuICBnZXQgaGFzSW5kZWZJbnNhbmUgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgfVxuXG4gIGdldCBwb3J0cmFpdCAoKSB7XG4gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSByZXR1cm4gdGhpcy5pbWdcbiAgICByZXR1cm4gdGhpcy50b2tlbj8udGV4dHVyZT8uc3JjIHx8IHRoaXMucHJvdG90eXBlVG9rZW4/LnRleHR1cmU/LnNyYyB8fCB0aGlzLmltZ1xuICB9XG5cbiAgYXN5bmMgZW50ZXJCb3V0T2ZNYWRuZXNzIChyZWFsVGltZSA9IHRydWUsIGR1cmF0aW9uID0gMSkge1xuICAgIC8vIGNvbnN0IGR1cmF0aW9uID0ge3JvdW5kczogMSxcbiAgICAvLyAgIHNlY29uZHM6IDE3LFxuICAgIC8vICAgc3RhcnRSb3VuZDogMyxcbiAgICAvLyAgIHN0YXJ0VGltZTogNTgsXG4gICAgLy8gICBzdGFydFR1cm46IDQsXG4gICAgLy8gICB0dXJuczogMn07XG4gICAgLy8gYXdhaXQgdGhpcy5ib3V0T2ZNYWRuZXNzPy5zZXRGbGFnKCAnQ29DNycsICdtYWRuZXNzJywgdHJ1ZSk7XG5cbiAgICBsZXQgcmVzdWx0ID0gbnVsbFxuICAgIGNvbnN0IGJvdXRPZk1hZG5lc3NUYWJsZUlkID0gcmVhbFRpbWVcbiAgICAgID8gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICBpZiAoYm91dE9mTWFkbmVzc1RhYmxlSWQgIT09ICdub25lJykge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBwaG9iaWE6IGZhbHNlLFxuICAgICAgICBtYW5pYTogZmFsc2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsXG4gICAgICB9XG4gICAgICBjb25zdCBib3V0T2ZNYWRuZXNzVGFibGUgPSBnYW1lLnRhYmxlcy5nZXQoYm91dE9mTWFkbmVzc1RhYmxlSWQpXG4gICAgICByZXN1bHQudGFibGVSb2xsID0gYXdhaXQgYm91dE9mTWFkbmVzc1RhYmxlLnJvbGwoKVxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBDT05TVC5UQUJMRV9SRVNVTFRfVFlQRVMuRE9DVU1FTlQgPT09XG4gICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kb2N1bWVudElkKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbT8udHlwZT8ucGhvYmlhKSByZXN1bHQucGhvYmlhID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtPy50eXBlPy5tYW5pYSkgcmVzdWx0Lm1hbmlhID0gdHJ1ZVxuICAgICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gYCR7aXRlbS5uYW1lfTpgICsgYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgeyBhc3luYzogdHJ1ZSB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXN1bHQubmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtLnRvT2JqZWN0KClcbiAgICAgICAgICAgIGRlbGV0ZSBpdGVtRGF0YS5faWRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbURhdGFdKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZUJvdXRPZk1hZG5lc3NJdGVtTm90Rm91bmQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQgPT09XG4gICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnRleHQsXG4gICAgICAgICAgICB7IGFzeW5jOiB0cnVlIH1cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VCb3V0T2ZNYWRuZXNzVGFibGVOb3RGb3VuZCcpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBpdCdzIG5vdCBhIHJlYWwgdGltZSBubyBuZWVkIHRvIGFjdGl2YXRlIHRoZSBib3V0XG4gICAgaWYgKCFyZWFsVGltZSkgcmV0dXJuIHJlc3VsdFxuXG4gICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUsIHtcbiAgICAgIHJlYWxUaW1lLFxuICAgICAgZHVyYXRpb25cbiAgICB9KVxuXG4gICAgLy8gY29uc3QgZWZmZWN0ID0gdGhpcy5lZmZlY3RzLmdldCggZWZmZWN0RGF0YS5faWQpO1xuICAgIC8vIGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSk7XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gbmV3IGFjdG9yIGNyZWF0aW9uLlxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zXG4gICAqL1xuICAvLyBzdGF0aWMgYXN5bmMgY3JlYXRlKGRhdGEsIG9wdGlvbnMpIHtcbiAgLy8gIC8vIElmIHRoZSBjcmVhdGVkIGFjdG9yIGhhcyBpdGVtcyAob25seSBhcHBsaWNhYmxlIHRvIGR1cGxpY2F0ZWQgYWN0b3JzKSBieXBhc3MgdGhlIG5ldyBhY3RvciBjcmVhdGlvbiBsb2dpY1xuICAvLyAgaWYgKGRhdGEuaXRlbXMpIHtcbiAgLy8gICAgcmV0dXJuIHN1cGVyLmNyZWF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gIH1cbiAgLy8gIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vIH1cblxuICBzdGF0aWMgZW1wdHlTa2lsbCAoXG4gICAgc2tpbGxOYW1lLFxuICAgIHZhbHVlLFxuICAgIHtcbiAgICAgIHJhcml0eSA9IGZhbHNlLFxuICAgICAgcHVzaCA9IHRydWUsXG4gICAgICBjb21iYXQgPSBmYWxzZSxcbiAgICAgIGltZyA9IGZhbHNlLFxuICAgICAgc3BlY2lhbGl6YXRpb24gPSBmYWxzZVxuICAgIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogc2tpbGxOYW1lLFxuICAgICAgdHlwZTogJ3NraWxsJyxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICB2YWx1ZSxcbiAgICAgICAgc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogJycsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiBmYWxzZSxcbiAgICAgICAgICByYXJpdHksXG4gICAgICAgICAgcHVzaCxcbiAgICAgICAgICBjb21iYXRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW1nICE9PSBmYWxzZSkge1xuICAgICAgZGF0YS5pbWcgPSBpbWdcbiAgICB9XG4gICAgaWYgKHNwZWNpYWxpemF0aW9uICE9PSBmYWxzZSkge1xuICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24pXG4gICAgICBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICBkYXRhLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgIGRhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiBsaXN0IG9mIHNraWxscyBieSByZW1vdmluZyBzcGVjaWFsaXphdGlvbiBmcm9tIG5hbWVcbiAgICovXG4gIC8vIGFzeW5jIGNsZWFuU2tpbGxzICgpIHtcbiAgLy8gICBEaWFsb2cuY29uZmlybSh7XG4gIC8vICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNsZWFuU2tpbGxMaXN0Jyl9YCxcbiAgLy8gICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DbGVhblNraWxsTGlzdEhpbnQnKX08L3A+YCxcbiAgLy8gICAgIHllczogKCkgPT4gY2xlYW4odGhpcylcbiAgLy8gICB9KVxuICAvLyAgIGFzeW5jIGZ1bmN0aW9uIGNsZWFuIChhY3Rvcikge1xuICAvLyAgICAgY29uc3QgdXBkYXRlID0gW11cbiAgLy8gICAgIGFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4ge1xuICAvLyAgICAgICBpZiAocy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gIC8vICAgICAgICAgY29uc3QgY2xlYW4gPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMocyk/LnRyaW0oKVxuICAvLyAgICAgICAgIGlmIChjbGVhbi50b0xvd2VyQ2FzZSgpICE9IHMubmFtZS50b0xvd2VyQ2FzZSgpIHx8IGNsZWFuLnRvTG93ZXJDYXNlKCkgIT0gcy5kYXRhLm5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAvLyAgICAgICAgICAgdXBkYXRlLnB1c2goe1xuICAvLyAgICAgICAgICAgICBfaWQ6IHMuaWQsXG4gIC8vICAgICAgICAgICAgIG5hbWU6IGNsZWFuXG4gIC8vICAgICAgICAgICB9KVxuICAvLyAgICAgICAgIH1cbiAgLy8gICAgICAgfVxuICAvLyAgICAgfSlcbiAgLy8gICAgIGlmICh1cGRhdGUubGVuZ3RoICE9IDApe1xuICAvLyAgICAgICBhd2FpdCBhY3Rvci51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHVwZGF0ZSlcbiAgLy8gICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgU2tpbGxzIDogJHtBcnJheS5mcm9tKCB1cGRhdGUsIGUgPT4gZS5uYW1lKS5qb2luKCcsICcpfSB1cGRhdGVkLmApXG4gIC8vICAgICB9IGVsc2Uge1xuICAvLyAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oICdTa2lsbCBsaXN0IHdhcyBjbGVhbiBhbHJlYWR5ICEnKVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgY3JlYXRlU2tpbGwgKHNraWxsTmFtZSwgdmFsdWUsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IENvQ0FjdG9yLmVtcHR5U2tpbGwoc2tpbGxOYW1lLCB2YWx1ZSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVdlYXBvblNraWxsIChuYW1lLCBmaXJlYXJtcyA9IGZhbHNlLCBiYXNlID0gbnVsbCkge1xuICAgIC8vIFRPRE8gOiBBc2sgZm9yIGJhc2UgdmFsdWUgaWYgbnVsbFxuXG4gICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjU2VsZWN0RGlhbG9nLmNyZWF0ZShcbiAgICAgIFtdLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKSxcbiAgICAgIDAsXG4gICAgICBuYW1lXG4gICAgKVxuICAgIGlmIChza2lsbERhdGEgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoc2tpbGxEYXRhLmdldCgnYmFzZS12YWx1ZScpKVxuICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgIG5hbWUsXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgIGZpcmVhcm1zXG4gICAgICAgICAgPyAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgIDogJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICApXG4gICAgKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxuICAgICAgdHlwZTogJ3NraWxsJyxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBiYXNlOiBpc05hTih2YWx1ZSkgPyAwIDogdmFsdWUsXG4gICAgICAgIGFkanVzdG1lbnRzOiB7XG4gICAgICAgICAgcGVyc29uYWw6IG51bGwsXG4gICAgICAgICAgb2NjdXBhdGlvbjogbnVsbCxcbiAgICAgICAgICBhcmNoZXR5cGU6IG51bGwsXG4gICAgICAgICAgZXhwZXJpZW5jZTogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBza2lsbE5hbWU6IHBhcnRzLnNraWxsTmFtZSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb246IHBhcnRzLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc3BlY2lhbDogdHJ1ZSxcbiAgICAgICAgICBmaWdodGluZzogIWZpcmVhcm1zLFxuICAgICAgICAgIGZpcmVhcm06IGZpcmVhcm1zLFxuICAgICAgICAgIGNvbWJhdDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiAhYmFzZVxuICAgIH0pXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShuYW1lKVxuICAgIHJldHVybiBza2lsbFswXVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYSBjcmVhdHVyZSB3aXRoIG1pbmltdW1zIHNraWxsc1xuICAgKi9cbiAgYXN5bmMgY3JlYXR1cmVJbml0ICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnY3JlYXR1cmUnKSByZXR1cm5cbiAgICBpZiAodGhpcy5nZXRBY3RvckZsYWcoJ2luaXRpYWxpemVkJykpIHJldHVybiAvLyBDaGFuZ2UgdG8gcmV0dXJuIHNraWxsID9cblxuICAgIC8vIENoZWNrIGlmIGZpZ2h0aW5nIHNraWxscyBleGlzdHMsIGlmIG5vdCBjcmVhdGUgaXQgYW5kIHRoZSBhc3NvY2lhdGVkIGF0dGFjay5cbiAgICBjb25zdCBza2lsbHMgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbClcbiAgICApXG4gICAgaWYgKHNraWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIENyZWF0aW5nIG5hdHVyYWwgYXR0YWNrIHNraWxsXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsKSxcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSlcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICAgICAgbmFtZTogcGFydHMubmFtZSxcbiAgICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgIGJhc2U6IDAsXG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNraWxsTmFtZTogcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246IHBhcnRzLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgICAgICAgIGZpZ2h0aW5nOiB0cnVlLFxuICAgICAgICAgICAgICBzcGVjaWFsOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmxhZ3M6IHt9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGF0dGFjayA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXG4gICAgICAgICAgJ0l0ZW0nLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZTogJ0lubmF0ZSBhdHRhY2snLFxuICAgICAgICAgICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgICAgICAgICAgc3lzdGVtOiB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkNyZWF0dXJlJ3MgbmF0dXJhbCBhdHRhY2tcIixcbiAgICAgICAgICAgICAgICAgIGNoYXQ6IFwiQ3JlYXR1cmUncyBuYXR1cmFsIGF0dGFja1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3cG5UeXBlOiAnaW5uYXRlJyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICBhZGRiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2xudDogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgeyByZW5kZXJTaGVldDogZmFsc2UgfVxuICAgICAgICApXG4gICAgICAgIGlmIChza2lsbC5sZW5ndGggPiAwICYmIGF0dGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgY3JlYXRlZEF0dGFjayA9IHRoaXMuaXRlbXMuZ2V0KGF0dGFja1swXS5pZClcbiAgICAgICAgICBhd2FpdCBjcmVhdGVkQXR0YWNrLnVwZGF0ZSh7XG4gICAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4uaWQnOiBza2lsbFswXS5pZCxcbiAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5uYW1lJzogc2tpbGxbMF0ubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdDcmVhdHVyZSBpbml0OiAnICsgZXJyLm1lc3NhZ2UpXG4gICAgICB9XG4gICAgICAvLyBjb25zb2xlLmxvZyggJ1NraWxsIGNyZWF0ZWQnKTtcbiAgICAgIGF3YWl0IHRoaXMuc2V0QWN0b3JGbGFnKCdpbml0aWFsaXplZCcpXG4gICAgICAvLyBDcmVhdGluZyBjb3JyZXNwb25kaW5nIHdlYXBvbi5cbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVJdGVtIChpdGVtTmFtZSwgcXVhbnRpdHkgPSAxLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBpdGVtTmFtZSxcbiAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBxdWFudGl0eVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5Qm9vayAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVCb29rKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSwgc2hvd1NoZWV0KVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoaXRlbU5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUJvb2soaXRlbU5hbWUsIHNob3dTaGVldClcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUJvb2sgKGl0ZW1OYW1lLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBpdGVtTmFtZSxcbiAgICAgIHR5cGU6ICdib29rJyxcbiAgICAgIHN5c3RlbToge31cbiAgICB9XG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eVNwZWxsIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVTcGVsbChnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpLCBzaG93U2hlZXQpXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoaXRlbU5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVTcGVsbChpdGVtTmFtZSwgc2hvd1NoZWV0KVxuICB9XG5cbiAgc3RhdGljIGVtcHR5U3BlbGwgKGl0ZW1OYW1lKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxuICAgICAgdHlwZTogJ3NwZWxsJyxcbiAgICAgIHN5c3RlbToge31cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVNwZWxsIChpdGVtTmFtZSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0gQ29DQWN0b3IuZW1wdHlTcGVsbChpdGVtTmFtZSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5U2tpbGwgKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVNraWxsKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpLFxuICAgICAgICAodGhpcy50eXBlICE9PSAnY2hhcmFjdGVyJyA/IDEgOiBudWxsKSxcbiAgICAgICAgc2hvd1NoZWV0XG4gICAgICApXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgc2tpbGxOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIHNraWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVNraWxsKHNraWxsTmFtZSwgbnVsbCwgc2hvd1NoZWV0KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlJdGVtIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUl0ZW0oZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpLCAxLCBzaG93U2hlZXQpXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlSXRlbShpdGVtTmFtZSwgMSwgc2hvd1NoZWV0KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlXZWFwb24gKGV2ZW50ID0gbnVsbCwgcHJvcGVydGllcyA9IHt9KSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgbGV0IHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKVxuICAgIGlmICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSkpIHtcbiAgICAgIGxldCBpbmRleCA9IDBcbiAgICAgIHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSArICcgJyArIGluZGV4XG4gICAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUod2VhcG9uTmFtZSkpIHtcbiAgICAgICAgaW5kZXgrK1xuICAgICAgICB3ZWFwb25OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3V2VhcG9uTmFtZSkgKyAnICcgKyBpbmRleFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiB3ZWFwb25OYW1lLFxuICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICBzeXN0ZW06IHtcbiAgICAgICAgcHJvcGVydGllczoge31cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9XG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpID8/IGZhbHNlXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gIH1cblxuICBhc3luYyBjcmVhdGVCaW9TZWN0aW9uICh0aXRsZSA9IG51bGwpIHtcbiAgICBjb25zdCBiaW8gPSB0aGlzLnN5c3RlbS5iaW9ncmFwaHlcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgICAgOiBbXVxuICAgIGJpby5wdXNoKHtcbiAgICAgIHRpdGxlLFxuICAgICAgdmFsdWU6IG51bGxcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSwgeyByZW5kZXJTaGVldDogZmFsc2UgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUJpb1ZhbHVlIChpbmRleCwgY29udGVudCkge1xuICAgIGNvbnN0IGJpbyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICBiaW9baW5kZXhdLnZhbHVlID0gY29udGVudFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSwgeyByZW5kZXI6IGZhbHNlIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVCaW9UaXRsZSAoaW5kZXgsIHRpdGxlKSB7XG4gICAgY29uc3QgYmlvID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGJpb1tpbmRleF0udGl0bGUgPSB0aXRsZVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUJpb1NlY3Rpb24gKGluZGV4KSB7XG4gICAgY29uc3QgYmlvID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGJpby5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgbW92ZUJpb1NlY3Rpb25VcCAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPT09IDApIHJldHVyblxuICAgIGNvbnN0IGJpbyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICBpZiAoaW5kZXggPj0gYmlvLmxlbmd0aCkgcmV0dXJuXG4gICAgY29uc3QgZWxlbSA9IGJpby5zcGxpY2UoaW5kZXgsIDEpWzBdXG4gICAgYmlvLnNwbGljZShpbmRleCAtIDEsIDAsIGVsZW0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgbW92ZUJpb1NlY3Rpb25Eb3duIChpbmRleCkge1xuICAgIGNvbnN0IGJpbyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICBpZiAoaW5kZXggPj0gYmlvLmxlbmd0aCAtIDEpIHJldHVyblxuICAgIGNvbnN0IGVsZW0gPSBiaW8uc3BsaWNlKGluZGV4LCAxKVswXVxuICAgIGJpby5zcGxpY2UoaW5kZXggKyAxLCAwLCBlbGVtKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVRleHRBcmVhICh0ZXh0QXJlYSkge1xuICAgIGNvbnN0IG5hbWUgPSAnc3lzdGVtLicgKyB0ZXh0QXJlYS5kYXRhc2V0LmFyZWFOYW1lXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IHRleHRBcmVhLnZhbHVlIH0pXG4gIH1cblxuICAvLyBhc3luYyBfdXBkYXRlRW1iZWRkZWREb2N1bWVudHMgKGRvY3VtZW50Q2xhc3MsIHBhcmVudCwgeyB1cGRhdGVzLCBvcHRpb25zLCBwYWNrIH0sIHVzZXIpIHtcbiAgLy8gICBjb25zdCBwb3VldCA9ICd0b3RvJ1xuICAvLyB9XG5cbiAgLy8gYXN5bmMgcHJlVXBkYXRlQWN0aXZlRWZmZWN0IChhLGIsYyxkKSB7XG4gIC8vICAgY29uc3QgcG91ZXQgPSAndG90bydcbiAgLy8gfVxuXG4gIC8vIGFzeW5jIHVwZGF0ZUFjdGl2ZUVmZmVjdCAoYSxiLGMsZCkge1xuICAvLyAgIGNvbnN0IHBvdWV0ID0gJ3RvdG8nXG4gIC8vIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGl0ZW0gZm9yIHRoYXQgYWN0b3IuXG4gICAqIElmIGl0J3MgYSBza2lsbCBmaXJzdCBjaGVjayBpZiB0aGUgc2tpbGwgaXMgYWxyZWFkeSBvd25lZC4gSWYgaXQgaXMgZG9uJ3QgY3JlYXRlIGEgc2Vjb25kIHRpbWUuXG4gICAqIEZpbGwgdGhlIHZhbHVlIG9mIHRoZSBza2lsbCB3aXRoIGJhc2Ugb3IgdHJ5IHRvIGV2YWx1YXRlIHRoZSBmb3JtdWxhLlxuICAgKiBAcGFyYW0geyp9IGVtYmVkZGVkTmFtZVxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zXG4gICAqL1xuICBhc3luYyBjcmVhdGVFbWJlZGRlZERvY3VtZW50cyAoZW1iZWRkZWROYW1lLCBkYXRhQXJyYXksIG9wdGlvbnMpIHtcbiAgICBjb25zdCBwcm9jZXNzZWREYXRhQXJyYXkgPSBbXVxuICAgIGxldCBiYXNlVmFsdWUgPSAwXG4gICAgbGV0IGJhc2VDYWxjdWxhdGVkID0gMFxuICAgIGxldCBhcmNoZXR5cGUgPSBmYWxzZVxuICAgIGxldCBvY2N1cGF0aW9uID0gZmFsc2VcbiAgICBmb3IgKGxldCBkYXRhIG9mIGRhdGFBcnJheSkge1xuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnc2tpbGwnOiB7XG4gICAgICAgICAgYmFzZVZhbHVlID0gZGF0YS5zeXN0ZW0uYmFzZVxuICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gYXdhaXQgQ29DN0l0ZW0uY2FsY3VsYXRlQmFzZSh0aGlzLCBkYXRhKVxuICAgICAgICAgIGlmICh0aGlzLnR5cGUgIT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICAvLyBJZiBub3QgYSBQQyBzZXQgc2tpbGwgdmFsdWUgdG8gYmFzZVxuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGRhdGEubmFtZSkpIHJldHVybiAvLyBJZiBza2lsbCB3aXRoIHRoaXMgbmFtZSBleGlzdCByZXR1cm5cblxuICAgICAgICAgICAgaWYgKGJhc2VWYWx1ZSkge1xuICAgICAgICAgICAgICBpZiAoU3RyaW5nKGJhc2VWYWx1ZSkgIT09IFN0cmluZyhkYXRhLnN5c3RlbS52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS52YWx1ZSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihkYXRhLnN5c3RlbS52YWx1ZSkpKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZVxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gKFxuICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlQ2hhcmFjdGVyaXN0aWNzKClcbiAgICAgICAgICAgICAgICAgICkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICkudG90YWxcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSBkYXRhLnN5c3RlbS52YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlID0gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBhZGRUaGlzID0gdHJ1ZVxuXG4gICAgICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyhkYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgaXNBbnlCdXROb3RGbGFnZ2VkID0gKCEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lKSA/PyBmYWxzZSkgJiYgIShkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5waWNrbmFtZW9ubHkgPz8gZmFsc2UpXG4gICAgICAgICAgICBsZXQgc2tpbGxMaXN0ID0gW11cbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmd1ZXNzR3JvdXBGcm9tRG9jdW1lbnQoZGF0YSlcbiAgICAgICAgICAgIGlmIChncm91cCkge1xuICAgICAgICAgICAgICBza2lsbExpc3QgPSAoYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoZ3JvdXApICsgJy4rJCcpLCB0eXBlOiAnaScgfSkpLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgPz8gZmFsc2UpICYmICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lID8/IGZhbHNlKSAmJiAhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSA/PyBmYWxzZSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbT8uZmxhZ3M/Lm9jY3VwYXRpb24gfHwgZGF0YS5zeXN0ZW0/LmZsYWdzPy5hcmNoZXR5cGUpIHtcbiAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTa2lsbHMgPSB0aGlzLnNraWxscy5maWx0ZXIoZWwgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZWwuc3lzdGVtLnNwZWNpYWxpemF0aW9uKSByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbT8uZmxhZ3M/Lm9jY3VwYXRpb24gJiZcbiAgICAgICAgICAgICAgICAgIGVsLnN5c3RlbS5mbGFncz8ub2NjdXBhdGlvblxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtPy5mbGFncz8uYXJjaGV0eXBlICYmXG4gICAgICAgICAgICAgICAgICBlbC5zeXN0ZW0uZmxhZ3M/LmFyY2hldHlwZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvbi50b0xvY2FsZUxvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgZWwuc3lzdGVtLnNwZWNpYWxpemF0aW9uLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChleGlzdGluZ1NraWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNraWxsTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gZXhpc3RpbmdTa2lsbHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm91bmQgPSBza2lsbExpc3QuZmluZEluZGV4KGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IGV4aXN0aW5nU2tpbGxzW2ldLm5hbWUgfHwgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCA9PT0gZXhpc3RpbmdTa2lsbHNbaV0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBza2lsbExpc3Quc3BsaWNlKGZvdW5kLCAxKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBza2lsbExpc3QgPSBza2lsbExpc3QuY29uY2F0KGV4aXN0aW5nU2tpbGxzKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBza2lsbExpc3QgPSBleGlzdGluZ1NraWxsc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNraWxsTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNraWxsRGF0YSA9IGF3YWl0IFNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICAgICAgc2tpbGxzOiBza2lsbExpc3QsXG4gICAgICAgICAgICAgIGFsbG93Q3VzdG9tOiAoaXNBbnlCdXROb3RGbGFnZ2VkIHx8IChkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgPz8gZmFsc2UpKSxcbiAgICAgICAgICAgICAgZml4ZWRCYXNlVmFsdWU6IChkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5rZWVwYmFzZXZhbHVlID8/IGZhbHNlKSxcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb25OYW1lOiBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvbixcbiAgICAgICAgICAgICAgbGFiZWw6IGRhdGEubmFtZSxcbiAgICAgICAgICAgICAgYmFzZVZhbHVlOiBkYXRhLnN5c3RlbS5iYXNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChza2lsbERhdGEsICdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgIGlmIChza2lsbERhdGEuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0l0ZW0gPSB0aGlzLml0ZW1zLmdldChcbiAgICAgICAgICAgICAgICAgIHNraWxsRGF0YS5zZWxlY3RlZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdJdGVtKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VzID0ge31cbiAgICAgICAgICAgICAgICAgIGlmICghKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LmtlZXBiYXNldmFsdWUgPz8gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lsbERhdGEuYmFzZVZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXNbJ3N5c3RlbS52YWx1ZSddID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5zeXN0ZW0uZmxhZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXNbYHN5c3RlbS5mbGFncy4ke2tleX1gXSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNoYW5nZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy5faWQgPSBleGlzdGluZ0l0ZW0uaWRcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtjaGFuZ2VzXSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRhdGEubmFtZSA9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhleGlzdGluZ0l0ZW0pXG4gICAgICAgICAgICAgICAgICBhZGRUaGlzID0gZmFsc2VcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBza2lsbExpc3QuZmluZChpID0+IGkuaWQgPT09IHNraWxsRGF0YS5zZWxlY3RlZClcbiAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmbGFncyA9IGRhdGEuc3lzdGVtPy5mbGFnc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZWVwQmFzZSA9IChkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5rZWVwYmFzZXZhbHVlID8/IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZXhpc3RpbmcpXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZsYWdzKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uZmxhZ3Nba2V5XSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGtlZXBCYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5iYXNlVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5iYXNlID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBiYXNlVmFsdWUgPSBza2lsbERhdGEuYmFzZVZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBhd2FpdCBDb0M3SXRlbS5jYWxjdWxhdGVCYXNlKHRoaXMsIGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgICAgICAgc2tpbGxEYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiAoIShkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5rZWVwYmFzZXZhbHVlID8/IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5iYXNlVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmJhc2UgPSBza2lsbERhdGEuYmFzZVZhbHVlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBiYXNlVmFsdWUgPSBza2lsbERhdGEuYmFzZVZhbHVlXG4gICAgICAgICAgICAgICAgICBiYXNlQ2FsY3VsYXRlZCA9IGF3YWl0IENvQzdJdGVtLmNhbGN1bGF0ZUJhc2UodGhpcywgZGF0YSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICAgICAgZGF0YS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGFkZFRoaXMpIHtcbiAgICAgICAgICAgIGlmIChTdHJpbmcoYmFzZVZhbHVlKSAhPT0gU3RyaW5nKGJhc2VDYWxjdWxhdGVkKSkge1xuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5iYXNlID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBjYXNlICd3ZWFwb24nOiB7XG4gICAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgICAgICAgIGNvbnN0IG1haW5Ta2lsbCA9IGRhdGEuc3lzdGVtPy5za2lsbD8ubWFpbj8ubmFtZVxuICAgICAgICAgICAgaWYgKG1haW5Ta2lsbCkge1xuICAgICAgICAgICAgICBsZXQgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShtYWluU2tpbGwpWzBdXG4gICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgICAgICAgICAgICAgID8gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgICAgICAgICAgICAgIDogbWFpblNraWxsXG4gICAgICAgICAgICAgICAgaWYgKG5hbWUubWF0Y2goL2lcXC5za2lsbFxcLi8pKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBhdmFpbGFibGVTa2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEQmVzdCh7IGNvY2lkOiBuYW1lLCBzaG93TG9hZGluZzogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgaWYgKGF2YWlsYWJsZVNraWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhbYXZhaWxhYmxlU2tpbGxzWzBdXSlcbiAgICAgICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmdldFNraWxsc0J5TmFtZShtYWluU2tpbGwpWzBdXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgICAgICAgICAgICBpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgICAgICAgICAgIChpdGVtLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpIHx8IGl0ZW0uc3lzdGVtLnNraWxsTmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhbZXhpc3RpbmddKVxuICAgICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG1haW5Ta2lsbClbMF1cbiAgICAgICAgICAgICAgICAgICAgLy8gc2tpbGwgPSBleGlzdGluZy50b09iamVjdCgpXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlV2VhcG9uU2tpbGwoXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAhIWRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnJuZ2RcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc2tpbGwpIGRhdGEuc3lzdGVtLnNraWxsLm1haW4uaWQgPSBza2lsbC5pZFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzZWNvbmRTa2lsbCA9IGRhdGEuc3lzdGVtPy5za2lsbD8uYWx0ZXJuYXRpdj8ubmFtZVxuICAgICAgICAgICAgaWYgKHNlY29uZFNraWxsKSB7XG4gICAgICAgICAgICAgIGxldCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKHNlY29uZFNraWxsKVswXVxuICAgICAgICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNlY29uZFNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgICAgICAgICAgICAgID8gc2Vjb25kU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgICAgICAgICAgICAgOiBzZWNvbmRTa2lsbFxuICAgICAgICAgICAgICAgIGlmIChuYW1lLm1hdGNoKC9pXFwuc2tpbGxcXC4vKSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlU2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJREJlc3QoeyBjb2NpZDogbmFtZSwgc2hvd0xvYWRpbmc6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgIGlmIChhdmFpbGFibGVTa2lsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkSXRlbXMoW2F2YWlsYWJsZVNraWxsc1swXV0pXG4gICAgICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5nZXRTa2lsbHNCeU5hbWUoc2Vjb25kU2tpbGwpWzBdXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgICAgICAgICAgICBpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgICAgICAgICAgIChpdGVtLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpIHx8IGl0ZW0uc3lzdGVtLnNraWxsTmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhbZXhpc3RpbmddKVxuICAgICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKHNlY29uZFNraWxsKVswXVxuICAgICAgICAgICAgICAgICAgICAvLyBza2lsbCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVXZWFwb25Ta2lsbChcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICEhZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucm5nZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCA9IHNraWxsLmlkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3NldHVwJzoge1xuICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5lbmFibGVDaGFyYWN0ZXJpc2l0aWNzKSB7XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdCA9IHt9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdzdHInKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuY29uID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnY29uJylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnNpeiA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3NpeicpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXggPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdkZXgnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuYXBwID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnYXBwJylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmludCA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2ludCcpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdwb3cnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuZWR1ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnZWR1JylcblxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjayA9IHt9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlID0gaXNOYU4odGhpcy5sdWNrKVxuICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgOiB0aGlzLmx1Y2tcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2subGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnNob3J0TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICAgICAgIClcblxuICAgICAgICAgICAgaWYgKCFkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMgPSB7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zdHIgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuY29uLnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnNpeiA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnNpei52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5kZXggPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXgudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuYXBwLnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmludCA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmludC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuZWR1LnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmx1Y2sgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlXG4gICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNwZW5kUG9pbnRzJylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxDaGFyYWMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0ucG9pbnRzV2FybmluZyA9ICEoXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc3RyICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc2l6ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZGV4ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuaW50ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ICE9PSBudWxsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjb25zdCByb2xsZWQgPSBhd2FpdCBDaGFyYWNSb2xsRGlhbG9nLmNyZWF0ZShkYXRhLnN5c3RlbSlcbiAgICAgICAgICAgIGlmIChyb2xsZWQpIHtcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFtcbiAgICAgICAgICAgICAgICAnc3RyJyxcbiAgICAgICAgICAgICAgICAnY29uJyxcbiAgICAgICAgICAgICAgICAnc2l6JyxcbiAgICAgICAgICAgICAgICAnZGV4JyxcbiAgICAgICAgICAgICAgICAnYXBwJyxcbiAgICAgICAgICAgICAgICAnaW50JyxcbiAgICAgICAgICAgICAgICAncG93JyxcbiAgICAgICAgICAgICAgICAnZWR1J1xuICAgICAgICAgICAgICBdKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XVxuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0uZm9ybXVsYWBdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVjaykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVja1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQnXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyAvIDVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubXAubWF4J10gPSBNYXRoLmZsb29yKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgLyA1XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEsIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOiB0aGlzLnJhd0hwTWF4LFxuICAgICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC5tYXgnOiB0aGlzLnJhd0hwTWF4XG4gICAgICAgICAgICAgIH0sIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXJhID0gT2JqZWN0LmVudHJpZXMoZGF0YS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiBlWzBdKVxuICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5pdGVtcywgZXJhOiAodHlwZW9mIGVyYVswXSAhPT0gJ3VuZGVmaW5lZCcgPyBlcmFbMF0gOiB0cnVlKSB9KVxuICAgICAgICAgIGNvbnN0IHNraWxscyA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAgIGNvbnN0IG90aGVyc0l0ZW1zID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgIT09ICdza2lsbCcpXG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhza2lsbHMpXG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhvdGhlcnNJdGVtcylcbiAgICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJhY2tzdG9yeSc6IGRhdGEuc3lzdGVtLmJhY2tzdG9yeSB9LCB7IHJlbmRlclNoZWV0OiBmYWxzZSB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb25OYW1lIG9mIGRhdGEuc3lzdGVtLmJpb1NlY3Rpb25zKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdGhpcy5zeXN0ZW0uYmlvZ3JhcGh5Py5maW5kKFxuICAgICAgICAgICAgICAgICAgZWwgPT4gc2VjdGlvbk5hbWUgPT09IGVsLnRpdGxlXG4gICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgIHNlY3Rpb25OYW1lXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQmlvU2VjdGlvbihzZWN0aW9uTmFtZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyByZWZhY3RvciB0aGlzXG4gICAgICAgICAgY29uc3QgbW9uZXRhcnkgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMuc3lzdGVtLm1vbmV0YXJ5LCBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhLnN5c3RlbS5tb25ldGFyeSkpXG4gICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0XG4gICAgICAgICAgbGV0IHN0YXRlID0gZmFsc2VcbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICBzdGF0ZSA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHJlc29sdmUoc2hlZXQuX3N0YXRlKVxuICAgICAgICAgICAgfSwgMTAwKSlcbiAgICAgICAgICB9IHdoaWxlIChzdGF0ZSA9PT0gQXBwbGljYXRpb24uUkVOREVSX1NUQVRFUy5SRU5ERVJJTkcpXG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5tb25ldGFyeSc6IG1vbmV0YXJ5XG4gICAgICAgICAgfSlcbiAgICAgICAgICBIb29rcy5jYWxsKCdzZXR1cEZpbmlzaGVkQ29DNycpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdhcmNoZXR5cGUnOlxuICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICAvLyBBcmNoZXR5cHJlIG9ubHkgZm9yIFBDc1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJjaGV0eXBlKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldEFyY2hldHlwZSA9IGZhbHNlXG4gICAgICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlc2V0QXJjaGV0eXBlJyksXG4gICAgICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZXNldEFyY2hldHlwZUhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0QXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFllczogZmFsc2VcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKHJlc2V0QXJjaGV0eXBlKSBhd2FpdCB0aGlzLnJlc2V0QXJjaGV0eXBlKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29yZUNoYXJhYyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3Nba2V5XSA9IGZhbHNlXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgICAgICAgICAgICBjaGFyLmtleSA9IGtleVxuICAgICAgICAgICAgICAgIGNvcmVDaGFyYWMucHVzaChjaGFyKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjaGFyYWNcblxuICAgICAgICAgICAgaWYgKGNvcmVDaGFyYWMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICBjb25zdCBjaGFyRGlhbG9nRGF0YSA9IHt9XG4gICAgICAgICAgICAgIGNoYXJEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljcyA9IGNvcmVDaGFyYWNcbiAgICAgICAgICAgICAgY2hhckRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2VsZWN0Q29yZUNoYXJhYycpXG4gICAgICAgICAgICAgIGNoYXJhYyA9IGF3YWl0IENoYXJhY1NlbGVjdERpYWxvZy5jcmVhdGUoY2hhckRpYWxvZ0RhdGEpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvcmVDaGFyYWMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgIGNoYXJhYyA9IGNvcmVDaGFyYWNbMF0ua2V5XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghY2hhcmFjKSByZXR1cm5cbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NbY2hhcmFjXSA9IHRydWVcbiAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IE51bWJlcihkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZSlcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJhYylcbiAgICAgICAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIHJvbGwudG9NZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgJ0NvQzcuTWVzc2FnZVJvbGxpbmdDaGFyYWN0ZXJpc3RpYycsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogY2hhci5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICBmb3JtdWxhOiBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGNoYXIudmFsdWUgPCByb2xsLnRvdGFsID8gcm9sbC50b3RhbCA6IGNoYXIudmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7Y2hhcmFjfS52YWx1ZWBdOiB2YWx1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNraWxsc1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5za2lsbHMgfSlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoZGF0YS5zeXN0ZW0uc2tpbGxzLCAnYXJjaGV0eXBlJylcblxuICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgICBhcmNoZXR5cGUgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnb2NjdXBhdGlvbic6XG4gICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIE9jY3VwYXRpb24gb25seSBmb3IgUENzXG4gICAgICAgICAgICBpZiAodGhpcy5vY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldE9jY3VwYXRpb24gPSBmYWxzZVxuICAgICAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZXNldE9jY3VwYXRpb24nKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlc2V0T2NjdXBhdGlvbkhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0T2NjdXBhdGlvbiA9IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRZZXM6IGZhbHNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChyZXNldE9jY3VwYXRpb24pIGF3YWl0IHRoaXMucmVzZXRPY2N1cGF0aW9uKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29udmVydCBDb0NJRHMgdG8gaXRlbXNcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG5cbiAgICAgICAgICAgIGlmIChOdW1iZXIoZGF0YS5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1heCkgPiAwKSB7XG4gICAgICAgICAgICAgIC8vIE9jY3VwYXRpb25zIHdpdGggYSBjcmVkaXQgcmF0aW5nIHJlcXVpcmUgYSBjcmVkaXQgcmF0aW5nIHNraWxsXG4gICAgICAgICAgICAgIGNvbnN0IGFjdG9yQ3JlZGl0UmF0aW5nID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgZGF0YS5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICAgICAgICBpZiAoYWN0b3JDcmVkaXRSYXRpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5maW5kQ29jSWRJbkxpc3QoJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycsIHRoaXMuaXRlbXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzLnB1c2goJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycpXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IGRhdGEuc3lzdGVtLnNraWxscyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgdGhpcy5pdGVtcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMucHVzaChhY3RvckNyZWRpdFJhdGluZ1swXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2VsZWN0IGNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBwb2ludHNEaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzID0gZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgICAgICAgICBsZXQgdG90YWwgPSAwXG4gICAgICAgICAgICBsZXQgb3B0aW9uYWxDaGFyID0gZmFsc2VcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50c1xuICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgICAgICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhrZXkpXG4gICAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS52YWx1ZSA9IGNoYXIudmFsdWVcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS50b3RhbCA9XG4gICAgICAgICAgICAgICAgICBjaGFyLnZhbHVlICpcbiAgICAgICAgICAgICAgICAgIE51bWJlcihwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLm11bHRpcGxpZXIpXG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZS5vcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgdG90YWwgKz0gcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS50b3RhbFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25hbENoYXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLnRvdGFsID0gdG90YWxcbiAgICAgICAgICAgIGlmIChvcHRpb25hbENoYXIpIHtcbiAgICAgICAgICAgICAgLy8gSXMgdGhlcmUgYW55IG9wdGlvbmFsIGNoYXIgdG8gY2hvb3NlIGZvciBwb2ludHMgY2FsYyA/XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBvaW50U2VsZWN0RGlhbG9nLmNyZWF0ZShwb2ludHNEaWFsb2dEYXRhKVxuICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkgcmV0dXJuIC8vIFBvaW50IG5vdCBzZWxlY3RlZCA9PiBleGl0LlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgb3B0aW9uYWwgc2tpbGxzXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZGF0YS5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAvLyBDb252ZXJ0IENvQ0lkcyB0byBpdGVtc1xuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMgfSlcblxuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLm9wdGlvbnMpXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxTZWxlY3Rpb25XaW5kb3cnKVxuXG4gICAgICAgICAgICAgIC8vIFNlbGVjdCBvbmx5IHNraWxscyB0aGF0IGFyZSBub3QgcHJlc2VudCBvciBhcmUgbm90IGZsYWdnZWQgYXMgb2NjdXBhdGlvbi5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscykge1xuICAgICAgICAgICAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWModmFsdWUpKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBnZW5lcmljIHNwZWMgd2UgYWx3YXlzIGFkZCBpdFxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWUgJiYgaXRlbS50eXBlID09PSAnc2tpbGwnXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgaWYgKCFza2lsbCB8fCAhc2tpbGwuc3lzdGVtLmZsYWdzPy5vY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHNraWxsIHdhcyBhZGRlZCB0byBza2lsbCBsaXN0IHByZXZpb3VzbHksIHJlbW92ZSBpdFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbHJlYWR5U2VsZWN0ZWRTa2lsbCA9IGRhdGEuc3lzdGVtLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5U2VsZWN0ZWRTa2lsbCkgZGlhbG9nRGF0YS5za2lsbHMucHVzaCh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vbmUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGlzIGxlc3Mgc2tpbGwgdGhhbiBvcHRpb25zLCBhZGQgdGhlbSBhbGwuXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ291bnQ6IGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHNcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBza2lsbCBzZWxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGF3YWl0IFNraWxsU2VsZWN0RGlhbG9nLmNyZWF0ZShkaWFsb2dEYXRhKVxuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgZXh0cmEgc2tpbGxzXG4gICAgICAgICAgICBpZiAoTnVtYmVyKGRhdGEuc3lzdGVtLnBlcnNvbmFsKSkge1xuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLnN5c3RlbS5wZXJzb25hbClcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2VsZWN0UGVyc29uYWxTa2lsbHMnLCB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiBOdW1iZXIoZGF0YS5zeXN0ZW0ucGVyc29uYWwpXG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgLy8gU2VsZWN0IG9ubHkgc2tpbGxzIHRoYXQgYXJlIG5vdCBwcmVzZW50IG9yIGFyZSBub3QgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLlxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QgYWxsIHNraWxscyB0aGF0IGFyZSBub3QgYWxyZWFkeSBmbGFnZ2VkIGFzIG9jY3VwYXRpb24sIGNhbiBoYXZlIGFkanVzdG1lbnRzIGFuZCBYUC5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0uZmxhZ3Mub2NjdXBhdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgIXMuc3lzdGVtLnByb3BlcnRpZXMubm9hZGp1c3RtZW50cyAmJlxuICAgICAgICAgICAgICAgICAgIXMuc3lzdGVtLnByb3BlcnRpZXMubm94cGdhaW5cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIC8vIGlmIHNraWxsIGFscmVhZHkgc2VsZWN0ZWQgZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgICAgICAgICBjb25zdCBhbHJlYWR5U2VsZWN0ZWRTa2lsbCA9IGRhdGEuc3lzdGVtLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5uYW1lID09PSBzLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlTZWxlY3RlZFNraWxsKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gaWYgdGhlcmUncyBub25lLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCA8PSBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBpcyBsZXNzIHNraWxsIHRoYW4gb3B0aW9ucywgYWRkIHRoZW0gYWxsLlxuICAgICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9MZXNzU2tpbGxUaGFuT3B0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgICBza2lsbENvdW50OiBkaWFsb2dEYXRhLnNraWxscy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0NvdW50OiBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyggZGlhbG9nRGF0YS5za2lsbHMsICdvY2N1cGF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3Igc2tpbGwgc2VsZWN0aW9uLlxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBhd2FpdCBTa2lsbFNlbGVjdERpYWxvZy5jcmVhdGUoZGlhbG9nRGF0YSkgLy8gRGlhbG9nIGRhdGEgYnVnID8/P1xuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNraWxsc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLnN5c3RlbS5za2lsbHMsICdvY2N1cGF0aW9uJylcbiAgICAgICAgICAgIC8vIENyZWRpdCByYXRpbmcgaXMgYWx3YXlzIHBhcnQgb2Ygb2NjdXBhdGlvblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVkaXRSYXRpbmdTa2lsbD8uc2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgICAgICAgLy8gc2V0dGluZyBpdCB0byBtaW4gY3JlZGl0IHJhdGluZ1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVkaXRSYXRpbmdTa2lsbD8udXBkYXRlKHtcbiAgICAgICAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uJzogTnVtYmVyKGRhdGEuc3lzdGVtLmNyZWRpdFJhdGluZy5taW4pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICAgIG9jY3VwYXRpb24gPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhKSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb2Nlc3NlZERhdGFBcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCBwcm9jZXNzZWQgPSBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgIGVtYmVkZGVkTmFtZSxcbiAgICAgIHByb2Nlc3NlZERhdGFBcnJheSxcbiAgICAgIG9wdGlvbnNcbiAgICApXG5cbiAgICBpZiAoYXJjaGV0eXBlKSB7XG4gICAgICAvLyBzZXR0aW5nIHBvaW50c1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMuYXJjaGV0eXBlUG9pbnRzXG4gICAgICB9KVxuICAgICAgSG9va3MuY2FsbCgnYXJjaGV0eXBlRmluaXNoZWRDb0M3JylcbiAgICB9XG4gICAgaWYgKG9jY3VwYXRpb24pIHtcbiAgICAgIC8vIHNldHRpbmcgcG9pbnRzXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IHRoaXMub2NjdXBhdGlvblBvaW50cyxcbiAgICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5wZXJzb25hbCc6IHRoaXMucGVyc29uYWxQb2ludHNcbiAgICAgIH0pXG4gICAgICBIb29rcy5jYWxsKCdvY2N1cGF0aW9uRmluaXNoZWRDb0M3JylcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvY2Vzc2VkXG4gIH1cblxuICAvLyBnZXRTa2lsbElkQnlOYW1lKCBza2lsbE5hbWUpe1xuICAvLyAgIGxldCBpZCA9IG51bGw7XG4gIC8vICAgIGZvciAoY29uc3QgW21hcCwga2V5LCB2YWx1ZV0gb2YgdGhpcy5pdGVtcykge1xuICAvLyAgICAgaWYoIHZhbHVlLm5hbWUgPT0gc2tpbGxOYW1lKSBpZCA9IHZhbHVlLmlkO1xuICAvLyAgIH07XG5cbiAgLy8gICByZXR1cm4gaWQ7XG4gIC8vIH1cblxuICBnZXRJdGVtSWRCeU5hbWUgKGl0ZW1OYW1lKSB7XG4gICAgbGV0IGlkID0gbnVsbFxuICAgIGNvbnN0IG5hbWUgPSBpdGVtTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICA/IGl0ZW1OYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgIDogaXRlbU5hbWVcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKHZhbHVlKS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICkge1xuICAgICAgICBpZCA9IHZhbHVlLmlkXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICBnZXRJdGVtc0J5TmFtZSAoaXRlbU5hbWUpIHtcbiAgICBjb25zdCBpdGVtTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUubmFtZSA9PT0gaXRlbU5hbWUpIGl0ZW1MaXN0LnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZW1MaXN0XG4gIH1cblxuICAvKipcbiAgICpcbiAgICpcbiAgICovXG4gIGdldFNraWxsc0J5TmFtZSAoc2tpbGxOYW1lKSB7XG4gICAgLy8gVE9ETyA6IG1vcmUgYWdncmVzc2l2ZSBmaW5kaW5nIGluY2x1ZGluZyBzcGVjc1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgY29uc3QgbmFtZSA9IHNraWxsTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICA/IHNraWxsTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICA6IHNraWxsTmFtZVxuXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoXG4gICAgICAgIChcbiAgICAgICAgICBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWModmFsdWUpLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIHZhbHVlLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkID09PSBza2lsbE5hbWVcbiAgICAgICAgKSAmJlxuICAgICAgICB2YWx1ZS50eXBlID09PSAnc2tpbGwnXG4gICAgICApIHtcbiAgICAgICAgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldEZpcnN0SXRlbUJ5Q29DSUQgKGNvY2lkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMuZmluZChpID0+IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IGNvY2lkKVxuICB9XG5cbiAgLy8gcGFyc2VGb3JtdWxhIChmb3JtdWxhKSB7XG4gIC8vICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXG4gIC8vICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yKSkge1xuICAvLyAgICAgcGFyc2VkRm9ybXVsYSA9IHBhcnNlZEZvcm11bGEucmVwbGFjZShrZXksIHZhbHVlKVxuICAvLyAgIH1cbiAgLy8gICByZXR1cm4gcGFyc2VkRm9ybXVsYVxuICAvLyB9XG5cbiAgcGFyc2VDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yKSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdAJykgJiYgdmFsdWUuc3RhcnRzV2l0aCgndGhpcy4nKSkge1xuICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBmb3VuZHJ5LnV0aWxzLmdldFByb3BlcnR5KHRoaXMsIHZhbHVlLnN1YnN0cmluZyg1KSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZFxuICB9XG5cbiAgc3RhdGljIGdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbiAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICAvLyBGb3VuZHJ5VlRUIHYxMVxuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljTGlzdCA9ICghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpID8gZ2FtZS5zeXN0ZW0udGVtcGxhdGUuQWN0b3IudGVtcGxhdGVzLmNoYXJhY3RlcmlzdGljcy5jaGFyYWN0ZXJpc3RpY3MgOiBnYW1lLnN5c3RlbS50ZW1wbGF0ZS5BY3Rvci5jaGFyYWN0ZXIuY2hhcmFjdGVyaXN0aWNzKVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNoYXJhY3RlcmlzdGljTGlzdCkpIHtcbiAgICAgIGNoYXJhY3RlcmlzdGljcy5wdXNoKHtcbiAgICAgICAga2V5LFxuICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXG4gIH1cblxuICBnZXRDaGFyYWN0ZXJpc3RpYyAoY2hhck5hbWUpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgY2hhck5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGtleSA9PT0gY2hhck5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgc2hvcnROYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbCksXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldEF0dHJpYnV0ZSAoYXR0cmliTmFtZSkge1xuICAgIGlmIChcbiAgICAgIFsnbGNrJywgJ2x1Y2snLCBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLnRvTG93ZXJDYXNlKCldLmluY2x1ZGVzKFxuICAgICAgICBhdHRyaWJOYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleTogJ2xjaycsXG4gICAgICAgIHNob3J0TmFtZTogJ2x1Y2snLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChcbiAgICAgIFtcbiAgICAgICAgJ3NhbicsXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JykudG9Mb3dlckNhc2UoKVxuICAgICAgXS5pbmNsdWRlcyhhdHRyaWJOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZXk6ICdzYW4nLFxuICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBydW5Sb2xsIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuY2FyZFR5cGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnByZXZlbnRTdGFuZGJ5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgb3B0aW9ucy5wcmV2ZW50U3RhbmRieSA9IHRydWVcbiAgICB9XG4gICAgb3B0aW9ucy5hY3RvciA9IHRoaXNcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIob3B0aW9ucylcbiAgICByZXR1cm4gcmVzdWx0c1xuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb24gKCkge1xuICAgIGNvbnN0IG9jY3VwYXRpb24gPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKVxuICAgIHJldHVybiBvY2N1cGF0aW9uWzBdXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlICgpIHtcbiAgICBjb25zdCBhcmNoZXR5cGUgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpXG4gICAgcmV0dXJuIGFyY2hldHlwZVswXVxuICB9XG5cbiAgYXN5bmMgcmVzZXRPY2N1cGF0aW9uIChlcmFzZU9sZCA9IHRydWUpIHtcbiAgICBpZiAoZXJhc2VPbGQpIHtcbiAgICAgIGNvbnN0IG9jY3VwYXRpb25Ta2lsbCA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT5cbiAgICAgICAgaXRlbS5nZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb2NjdXBhdGlvblNraWxsLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBhd2FpdCBvY2N1cGF0aW9uU2tpbGxbaW5kZXhdLnVuc2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5vY2N1cGF0aW9uKSBhd2FpdCB0aGlzLm9jY3VwYXRpb24uZGVsZXRlKClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IG51bGwgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0QXJjaGV0eXBlIChlcmFzZU9sZCA9IHRydWUpIHtcbiAgICBpZiAoZXJhc2VPbGQpIHtcbiAgICAgIGNvbnN0IGFyY2hldHlwZVNraWxsID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PlxuICAgICAgICBpdGVtLmdldEl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgICAgKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGFyY2hldHlwZVNraWxsLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBhd2FpdCBhcmNoZXR5cGVTa2lsbFtpbmRleF0udW5zZXRJdGVtRmxhZygnYXJjaGV0eXBlJylcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuYXJjaGV0eXBlKSBhd2FpdCB0aGlzLmFyY2hldHlwZS5kZWxldGUoKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiBudWxsIH0pXG4gIH1cblxuICBnZXQgbHVjayAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnM/Lmxjaz8udmFsdWUpXG4gIH1cblxuICBhc3luYyBzZXRMdWNrICh2YWx1ZSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgc3BlbmRMdWNrIChhbW91bnQpIHtcbiAgICBhbW91bnQgPSBwYXJzZUludChhbW91bnQpXG4gICAgaWYgKCEodGhpcy5sdWNrID49IGFtb3VudCkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnNldEx1Y2sodGhpcy5sdWNrIC0gYW1vdW50KVxuICB9XG5cbiAgZ2V0IGhwICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSlcbiAgfVxuXG4gIGdldCByYXdIcE1heCAoKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAuYXV0bykge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICE9IG51bGwgJiZcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZSAhPSBudWxsXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIENvQ0FjdG9yLmhwRnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MsIHRoaXMudHlwZSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXgpXG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXgpXG4gIH1cblxuICBnZXQgaHBNYXggKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgfVxuXG4gIGFzeW5jIF9zZXRIcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgdmFsdWUgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZFVuaXF1ZUl0ZW1zIChza2lsbExpc3QsIGZsYWcgPSBudWxsKSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkID0gW11cbiAgICBmb3IgKGxldCBza2lsbCBvZiBza2lsbExpc3QpIHtcbiAgICAgIHNraWxsID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc2tpbGwpXG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChza2lsbC5zeXN0ZW0sICdmbGFncycpKSB7XG4gICAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzID0ge31cbiAgICAgICAgfVxuICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3NbZmxhZ10gPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKHNraWxsKSkge1xuICAgICAgICBwcm9jZXNzZWQucHVzaChza2lsbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGl0ZW1JZCA9IHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsLm5hbWUpXG4gICAgICAgIGlmICghaXRlbUlkKSB7XG4gICAgICAgICAgcHJvY2Vzc2VkLnB1c2goc2tpbGwpXG4gICAgICAgIH0gZWxzZSBpZiAoZmxhZykge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgICAgICAgYXdhaXQgaXRlbS5zZXRJdGVtRmxhZyhmbGFnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHByb2Nlc3NlZCwge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZEl0ZW1zIChpdGVtTGlzdCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtTGlzdCkge1xuICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgaWYgKCFpdGVtLnN5c3RlbS5mbGFncykgaXRlbS5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgICBpdGVtLnN5c3RlbS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgIH1cbiAgICAgIHByb2Nlc3NlZC5wdXNoKGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGl0ZW0pKVxuICAgIH1cbiAgICBpZiAocHJvY2Vzc2VkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgcHJvY2Vzc2VkLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYWRkVW5pcXVlSXRlbSAoc2tpbGwsIGZsYWcgPSBudWxsKSB7XG4gICAgY29uc3QgaXRlbUlkID0gdGhpcy5nZXRJdGVtSWRCeU5hbWUoc2tpbGwubmFtZSlcbiAgICBpZiAoIWl0ZW1JZCkge1xuICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgaWYgKCFza2lsbC5zeXN0ZW0uZmxhZ3MpIHNraWxsLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICAgIHNraWxsLnN5c3RlbS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbc2tpbGxdLCB7XG4gICAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGZsYWcpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgICBhd2FpdCBpdGVtLnNldEl0ZW1GbGFnKGZsYWcpXG4gICAgfVxuICB9XG5cbiAgZ2V0IHJhd01wTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBDb0NBY3Rvci5tcEZyb21DaGFyYWN0ZXJpc3RpY3ModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKVxuICAgICAgfSBlbHNlIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heClcbiAgfVxuXG4gIGdldFJlYXNvblNhbkxvc3MgKHNhblJlYXNvbikge1xuICAgIGlmICh0eXBlb2Ygc2FuUmVhc29uID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cy5maWx0ZXIoXG4gICAgICAgICAgciA9PiByLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2FuUmVhc29uLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgICAgKVswXSA/PyB7IHR5cGU6ICcnLCB0b3RhbExvc3M6IDAsIGltbXVuaXR5OiBmYWxzZSB9XG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiB7IHR5cGU6ICcnLCB0b3RhbExvc3M6IDAsIGltbXVuaXR5OiBmYWxzZSB9XG4gIH1cblxuICBzYW5Mb3N0VG9SZWFzb24gKHNhblJlYXNvbikge1xuICAgIGlmIChzYW5SZWFzb24pIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXG4gICAgICByZXR1cm4gc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zc1xuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkIChzYW5SZWFzb24pIHtcbiAgICBpZiAoc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxuICAgICAgcmV0dXJuIHNhbml0eUxvc3NFdmVudC50eXBlICE9PSAnJ1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHNldFJlYXNvblNhbkxvc3MgKHNhblJlYXNvbiwgc2FuTG9zcykge1xuICAgIGlmICh0eXBlb2Ygc2FuUmVhc29uID09PSAnc3RyaW5nJyAmJiBzYW5SZWFzb24gIT09ICcnKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cylcbiAgICAgIGNvbnN0IGluZGV4ID0gc2FuaXR5TG9zc0V2ZW50cy5maW5kSW5kZXgoXG4gICAgICAgIHIgPT4gci50eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNhblJlYXNvbi50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgICBpZiAoc2FuTG9zcyA+IDApIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBzYW5SZWFzb24sXG4gICAgICAgICAgICB0b3RhbExvc3M6IHNhbkxvc3MsXG4gICAgICAgICAgICBpbW11bml0eTogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNhbml0eUxvc3NFdmVudHNbaW5kZXhdLnRvdGFsTG9zcyArPSBzYW5Mb3NzXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5zb3J0KGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgICAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50c1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBtYXhMb3NzVG9TYW5SZWFzb24gKHNhblJlYXNvbiwgc2FuTWF4Rm9ybXVsYSkge1xuICAgIGNvbnN0IHNhbk1heCA9IG5ldyBSb2xsKHNhbk1heEZvcm11bGEudG9TdHJpbmcoKSlbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxuICAgIGlmIChzYW5pdHlMb3NzRXZlbnQuaW1tdW5pdHkpIHtcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiBNYXRoLm1heCgwLCBzYW5NYXggLSBzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzKVxuICB9XG5cbiAgYXN5bmMgbG9vc2VTYW4gKHNhblJlYXNvbiwgc2FuTG9zcykge1xuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXG4gICAgaWYgKCFzYW5pdHlMb3NzRXZlbnQuaW1tdW5pdHkpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2V0U2FuKHRoaXMuc2FuIC0gc2FuTG9zcylcbiAgICAgIGlmIChzYW5Mb3NzID4gMCkgdGhpcy5zZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbiwgc2FuTG9zcylcbiAgICAgIHJldHVybiBzYW5Mb3NzXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzYW5Mb3NzIChjaGVja1Bhc3NlZCkge1xuICAgIGlmIChjaGVja1Bhc3NlZCkgcmV0dXJuIHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkXG4gICAgcmV0dXJuIHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NDaGVja1Bhc3NlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrUGFzc2VkXG4gIH1cblxuICBnZXQgc2FuTG9zc0NoZWNrRmFpbGxlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrRmFpbGxlZFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NNYXggKCkge1xuICAgIGlmICh0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkpKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZClbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBzYW5Mb3NzTWluICgpIHtcbiAgICBpZiAodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKSkpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZClcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUm9sbCh0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZClbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBkYWlseVNhbkxvc3MgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbj8uZGFpbHlMb3NzIHx8IDBcbiAgfVxuXG4gIGdldCBkYWlseVNhbkxpbWl0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4/LmRhaWx5TGltaXQgfHwgMFxuICB9XG5cbiAgZ2V0IHJhd1Nhbk1heCAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LnNhbj8uYXV0bykge1xuICAgICAgaWYgKHRoaXMuY3RodWxodU15dGhvcykgcmV0dXJuIE1hdGgubWF4KDk5IC0gdGhpcy5jdGh1bGh1TXl0aG9zLCAwKVxuICAgICAgcmV0dXJuIDk5XG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXgpXG4gIH1cblxuICBnZXQgc2FuTWF4ICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4KVxuICB9XG5cbiAgZ2V0IG1wICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSlcbiAgfVxuXG4gIGdldCBtcE1heCAoKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubXAuYXV0bykge1xuICAgICAgLy8gVE9ETyBpZiBhbnkgaXMgbnVsbCBzZXQgbWF4IGJhY2sgdG8gbnVsbC5cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAvIDUpXG4gICAgICB9XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5tYXgpXG4gIH1cblxuICBhc3luYyBzZXRNcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heCkpIHsgdmFsdWUgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heCkgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBnZXQgc2FuICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUpXG4gIH1cblxuICBnZXQgaW50ICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnaW50JylcbiAgfVxuXG4gIGdldCBvY2N1cGF0aW9uUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBvY2N1cGF0aW9uUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24pIHtcbiAgICAgICAgb2NjdXBhdGlvblBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMub2NjdXBhdGlvblxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2NjdXBhdGlvblBvaW50c1xuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb25Qb2ludHMgKCkge1xuICAgIGlmICghdGhpcy5vY2N1cGF0aW9uKSByZXR1cm4gMFxuICAgIGxldCBwb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHRoaXMub2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgKSkge1xuICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gZW50cnlcbiAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgIGlmICh2YWx1ZS5zZWxlY3RlZCkge1xuICAgICAgICBwb2ludHMgKz0gY2hhci52YWx1ZSAqIE51bWJlcih2YWx1ZS5tdWx0aXBsaWVyKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9pbnRzXG4gIH1cblxuICBhc3luYyByZXNldE9jY3VwYXRpb25Qb2ludHMgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IHRoaXMub2NjdXBhdGlvblBvaW50c1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNldEFyY2hldHlwZVBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiB0aGlzLm9jY3VwYXRpb25Qb2ludHNcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRQZXJzb25hbFBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5wZXJzb25hbCc6IHRoaXMucGVyc29uYWxQb2ludHNcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGFyY2hldHlwZVBvaW50c1NwZW50ICgpIHtcbiAgICBsZXQgYXJjaGV0eXBlUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHM/LmFyY2hldHlwZSkge1xuICAgICAgICBhcmNoZXR5cGVQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLmFyY2hldHlwZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJjaGV0eXBlUG9pbnRzXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlUG9pbnRzICgpIHtcbiAgICBpZiAoIXRoaXMuYXJjaGV0eXBlKSByZXR1cm4gMFxuICAgIHJldHVybiB0aGlzLmFyY2hldHlwZS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgfVxuXG4gIGdldCBleHBlcmllbmNlUG9pbnRzICgpIHtcbiAgICBsZXQgZXhwZXJpZW5jZVBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlKSB7XG4gICAgICAgIGV4cGVyaWVuY2VQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2VcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV4cGVyaWVuY2VQb2ludHNcbiAgfVxuXG4gIGdldCBwZXJzb25hbFBvaW50c1NwZW50ICgpIHtcbiAgICBsZXQgcGVyc29uYWxQb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWwpIHtcbiAgICAgICAgcGVyc29uYWxQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLnBlcnNvbmFsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwZXJzb25hbFBvaW50c1xuICB9XG5cbiAgZ2V0IHBlcnNvbmFsUG9pbnRzICgpIHtcbiAgICByZXR1cm4gMiAqIE51bWJlcih0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlKVxuICB9XG5cbiAgZ2V0IGhhc0RldmVsb3BtZW50UGhhc2UgKCkge1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uZmxhZ3M/LmRldmVsb3BlbWVudCkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMub25seVJ1bk9uY2VQZXJTZXNzaW9uKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgZm9yIChjb25zdCBzYW5pdHlMb3NzRXZlbnQgb2YgdGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cykge1xuICAgICAgaWYgKCFzYW5pdHlMb3NzRXZlbnQuaW1tdW5pdHkpIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgc2V0U2FuICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heCkgeyB2YWx1ZSA9IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heCB9XG4gICAgY29uc3QgbG9zcyA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlKSAtIHZhbHVlXG5cbiAgICBpZiAobG9zcyA+IDApIHtcbiAgICAgIGxldCB0b3RhbExvc3MgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzKVxuICAgICAgICA6IDBcbiAgICAgIHRvdGFsTG9zcyA9IHRvdGFsTG9zcyArIGxvc3NcbiAgICAgIGlmIChsb3NzID49IDUpIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lKVxuICAgICAgaWYgKHRvdGFsTG9zcyA+PSB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmluZGVmSW5zYW5lKVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJzogdmFsdWUsXG4gICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJzogdG90YWxMb3NzXG4gICAgICB9KVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnOiB2YWx1ZSB9KVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgYXN5bmMgc2V0QXR0cmliQXV0byAodmFsdWUsIGF0dHJpYikge1xuICAgIGNvbnN0IHVwZGF0ZWRLZXkgPSBgc3lzdGVtLmF0dHJpYnMuJHthdHRyaWJ9LmF1dG9gXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgW3VwZGF0ZWRLZXldOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlQXR0cmliQXV0byAoYXR0cmliKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJBdXRvKCF0aGlzLnN5c3RlbS5hdHRyaWJzW2F0dHJpYl0uYXV0bywgYXR0cmliKVxuICB9XG5cbiAgc3RhdGljIGRiRnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgY29uc3Qgc3VtID0gKGNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPz8gMCkgKyAoY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSA/PyAwKVxuICAgIGlmIChzdW0gPCA2NSkgcmV0dXJuIC0yXG4gICAgaWYgKHN1bSA8IDg1KSByZXR1cm4gLTFcbiAgICBpZiAoc3VtIDwgMTI1KSByZXR1cm4gMFxuICAgIGlmIChzdW0gPCAxNjUpIHJldHVybiAnMUQ0J1xuICAgIHJldHVybiBgJHtNYXRoLmZsb29yKChzdW0gLSA0NSkgLyA4MCl9RDZgXG4gIH1cblxuICBzdGF0aWMgYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICBjb25zdCBzdW0gPSAoY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA/PyAwKSArIChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDApXG4gICAgaWYgKHN1bSA8IDY1KSByZXR1cm4gLTJcbiAgICBpZiAoc3VtIDwgODUpIHJldHVybiAtMVxuICAgIGlmIChzdW0gPCAxMjUpIHJldHVybiAwXG4gICAgaWYgKHN1bSA8IDE2NSkgcmV0dXJuIDFcbiAgICByZXR1cm4gTWF0aC5mbG9vcigoc3VtIC0gNDUpIC8gODApICsgMVxuICB9XG5cbiAgc3RhdGljIGhwRnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzLCB0eXBlKSB7XG4gICAgY29uc3Qgc3VtID0gcGFyc2VJbnQoY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSA/PyAwLCAxMCkgKyBwYXJzZUludChjaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlID8/IDAsIDEwKVxuICAgIGNvbnN0IGRpdmlzb3IgPSAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVEb3VibGVNYXhIZWFsdGgnKSAmJiB0eXBlID09PSAnY2hhcmFjdGVyJyA/IDUgOiAxMClcbiAgICByZXR1cm4gTWF0aC5mbG9vcihzdW0gLyBkaXZpc29yKVxuICB9XG5cbiAgc3RhdGljIG1wRnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAvIDUpXG4gIH1cblxuICBzdGF0aWMgbW92RnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzLCB0eXBlLCBhZ2UpIHtcbiAgICBsZXQgTU9WXG4gICAgaWYgKGNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgPiBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICYmIGNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPiBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlKSB7XG4gICAgICBNT1YgPSA5IC8vIEJ1ZyBjb3JyZWN0aW9uIGJ5IEFkbWlyYWxOeWFyLlxuICAgIH0gZWxzZSBpZiAoY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSA+PSBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlIHx8IGNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPj0gY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSkge1xuICAgICAgTU9WID0gOFxuICAgIH0gZWxzZSB7XG4gICAgICBNT1YgPSA3XG4gICAgfVxuICAgIGlmICh0eXBlICE9PSAnY3JlYXR1cmUnICYmICFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpKSB7XG4gICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KGFnZSkpKSB7XG4gICAgICAgIE1PViA9IHBhcnNlSW50KGFnZSkgPj0gNDAgPyBNT1YgLSBNYXRoLmZsb29yKHBhcnNlSW50KGFnZSkgLyAxMCkgKyAzIDogTU9WXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBNYXRoLm1heCgwLCBNT1YpXG4gIH1cblxuICBnZXQgcmF3QnVpbGQgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvKSB7XG4gICAgICByZXR1cm4gQ29DQWN0b3IuYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcylcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZVxuICB9XG5cbiAgZ2V0IGJ1aWxkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZVxuICB9XG5cbiAgZ2V0IHJhd0RiICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzLmRiKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID09PSAnYXV0bycpIHtcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0bykge1xuICAgICAgcmV0dXJuIENvQ0FjdG9yLmRiRnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlXG4gIH1cblxuICBnZXQgZGIgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlXG4gIH1cblxuICBnZXQgcmF3TW92ICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdikgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8pIHtcbiAgICAgIGNvbnN0IE1PViA9IENvQ0FjdG9yLm1vdkZyb21DaGFyYWN0ZXJpc3RpY3ModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLCB0aGlzLnN5c3RlbS50eXBlLCB0aGlzLnN5c3RlbS5pbmZvcy5hZ2UpXG4gICAgICBpZiAoTU9WID4gMCkgcmV0dXJuIE1PVlxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWVcbiAgfVxuXG4gIGdldCBtb3YgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZVxuICB9XG5cbiAgZ2V0IHRva2VuSWQgKCkge1xuICAgIC8vIFRPRE8gY2xhcmlmaWVyIGNhIGV0IHRva2Vua2V5XG4gICAgcmV0dXJuIHRoaXMudG9rZW4gPyBgJHt0aGlzLnRva2VuLnNjZW5lLl9pZH0uJHt0aGlzLnRva2VuLmlkfWAgOiBudWxsIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGxvY2tlZCAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gdHJ1ZSAvLyBMb2NrZWQgYnkgZGVmYXVsdFxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgfVxuXG4gIGdldEl0ZW1zRnJvbU5hbWUgKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoaSA9PiBpLm5hbWUgPT09IG5hbWUpXG4gIH1cblxuICBzZXQgbG9ja2VkICh2YWx1ZSkge1xuICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlQWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGZsYWdWYWx1ZSA9ICF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cbiAgICBjb25zdCBuYW1lID0gYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBhdHRyaWJ1dGVOYW1lIGtleSBvZiBhdHRyaWJ1dGUgdG8gY2hlY2sgaW4gWydsY2snXVxuICAgKiBAcGFyYW0geyp9IGZhc3RGb3J3YXJkXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcbiAgICovXG4gIGFzeW5jIGF0dHJpYnV0ZUNoZWNrIChhdHRyaWJ1dGVOYW1lLCBmYXN0Rm9yd2FyZCA9IGZhbHNlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBhdHRyaWIgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgaWYgKCFhdHRyaWIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZCcsIHtcbiAgICAgICAgICBtaXNzaW5nOiBhdHRyaWJ1dGVOYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAob3B0aW9ucy5tb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGF0dHJpYi5rZXkpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGNoYXJhY3RlcmlzdGljTmFtZSBrZXkgb2YgY2hhcmFjdGVyaXN0aWMgdG8gY2hlY2sgaW4gWydzdHInLCdjb24nLCdzaXonLCdkZXgnLCdhcHAnLCdpbnQnLCdwb3cnLCdlZHUnXVxuICAgKiBAcGFyYW0geyp9IGZhc3RGb3J3YXJkXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcbiAgICovXG4gIGFzeW5jIGNoYXJhY3RlcmlzdGljQ2hlY2sgKFxuICAgIGNoYXJhY3RlcmlzdGljTmFtZSxcbiAgICBmYXN0Rm9yd2FyZCA9IGZhbHNlLFxuICAgIG9wdGlvbnMgPSB7fVxuICApIHtcbiAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWN0ZXJpc3RpY05hbWUpXG5cbiAgICBpZiAoIWNoYXIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZEZvckFjdG9yJywge1xuICAgICAgICAgIG1pc3Npbmc6IGNoYXJhY3RlcmlzdGljTmFtZSxcbiAgICAgICAgICBhY3RvcjogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKG9wdGlvbnMubW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBpZiAodW5kZWZpbmVkID09PSBvcHRpb25zLmRpZmZpY3VsdHkgfHwgdW5kZWZpbmVkID09PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICAgIG9wdGlvbnMuZGlzcGxheU5hbWUgPSBjaGFyLmxhYmVsXG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9IHRoaXMudG9rZW5LZXlcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVjay5pc0JsaW5kID0gISFvcHRpb25zLmJsaW5kXG4gICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKGNoYXIua2V5KVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBzdGF0aWMgdG9vbFRpcFNraWxsVGV4dCAoKSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gbnVsbFxuICAgICkge1xuICAgICAgY29uc3QgaXNDb21iYXQgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xhc3NMaXN0Py5jb250YWlucyhcbiAgICAgICAgJ2NvbWJhdCdcbiAgICAgIClcbiAgICAgIGNvbnN0IHNraWxsSWQgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkXG4gICAgICBjb25zdCBhY3RvckFwcElkID0gZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyLmNsb3Nlc3QoJy53aW5kb3ctYXBwJyk/LmRhdGFzZXQ/LmFwcGlkXG4gICAgICBpZiAodHlwZW9mIHNraWxsSWQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBhY3RvckFwcElkICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdWkud2luZG93c1thY3RvckFwcElkXT8uYWN0b3I/LmlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBhY3RvcklkID0gdWkud2luZG93c1thY3RvckFwcElkXS5hY3Rvci5pZFxuICAgICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChhY3RvcklkKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICBjb25zdCBza2lsbCA9IGFjdG9yLml0ZW1zLmdldChza2lsbElkKVxuICAgICAgICAgIGlmIChza2lsbCkge1xuICAgICAgICAgICAgbGV0IHRvb2xUaXAgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICBpc0NvbWJhdCA/ICdDb0M3LlRvb2xUaXBDb21iYXQnIDogJ0NvQzcuVG9vbFRpcFNraWxsJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNraWxsOiBza2lsbC5uYW1lLFxuICAgICAgICAgICAgICAgIHJlZ3VsYXI6IHNraWxsLnZhbHVlLFxuICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3Ioc2tpbGwudmFsdWUgLyAyKSxcbiAgICAgICAgICAgICAgICBleHRyZW1lOiBNYXRoLmZsb29yKHNraWxsLnZhbHVlIC8gNSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICBhY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdG9vbFRpcFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIGdldEl0ZW1PckFkZCAoaXRlbUlkZW50aWZpZXIsIHR5cGUgPSAnc2tpbGwnKSB7XG4gICAgY29uc3QgdHlwZUNvQ0lEID0gaXRlbUlkZW50aWZpZXIubWF0Y2goL15pXFwuKFteXFxcXC5dKylcXC4uLylcbiAgICBpZiAodHlwZUNvQ0lEKSB7XG4gICAgICAvLyBBdHRlbXB0IHRvIGxvYWQgZnJvbSBhY3RvciBieSBDb0MgSURcbiAgICAgIGxldCBpdGVtID0gdGhpcy5nZXRGaXJzdEl0ZW1CeUNvQ0lEKGl0ZW1JZGVudGlmaWVyKVxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIGNvbnN0IG5ld0l0ZW1zID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJREJlc3QoeyBjb2NpZDogaXRlbUlkZW50aWZpZXIsIHNob3dMb2FkaW5nOiB0cnVlIH0pXG4gICAgICAgIGlmIChuZXdJdGVtcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgbmV3SXRlbXMpXG4gICAgICAgICAgaXRlbSA9IHRoaXMuZ2V0Rmlyc3RJdGVtQnlDb0NJRChpdGVtSWRlbnRpZmllcilcbiAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvU2tpbGxBZGRlZEF0QmFzZScsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgcGVyY2VudDogaXRlbS52YWx1ZVxuICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgICAgICAgICBhd2FpdCBpdGVtLnJlbG9hZCgpXG4gICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7fVxuICAgICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9PT0gJycgJiYgaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gYXdhaXQgdGhpcy5nZXRJdGVtT3JBZGQoaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lLCAnc2tpbGwnKVxuICAgICAgICAgICAgICAgIGlmIChza2lsbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZXNbJ3N5c3RlbS5za2lsbC5tYWluLmlkJ10gPSBza2lsbFswXS5pZFxuICAgICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLm1haW4ubmFtZSddID0gc2tpbGxbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCA9PT0gJycgJiYgaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gYXdhaXQgdGhpcy5nZXRJdGVtT3JBZGQoaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lLCAnc2tpbGwnKVxuICAgICAgICAgICAgICAgIGlmIChza2lsbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZXNbJ3N5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkJ10gPSBza2lsbFswXS5pZFxuICAgICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSddID0gc2tpbGxbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUodXBkYXRlcylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIFtpdGVtXVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBBdHRlbXB0IHRvIGxvYWQgZm9yIGFjdG9yIGJ5IG5hbWVcbiAgICBsZXQgbXlJdGVtcyA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKGl0ZW1JZGVudGlmaWVyKVxuICAgIGlmICghbXlJdGVtcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICAgIC8vIEF0dGVtcHQgdG8gbG9hZCBpdGVtIGZyb20gd29ybGRcbiAgICAgIGNvbnN0IG5ld0l0ZW0gPSBnYW1lLml0ZW1zLmZpbmQoKGQpID0+IHtcbiAgICAgICAgaWYgKGQudHlwZSA9PT0gdHlwZSAmJiBkLm5hbWUgPT09IGl0ZW1JZGVudGlmaWVyKSB7XG4gICAgICAgICAgY29uc3QgZXJhcyA9IG5ld0l0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhc1xuICAgICAgICAgIGlmIChlcmFzICYmIE9iamVjdC5rZXlzKGVyYXMpLmxlbmd0aCA+IDAgJiYgIShlcmFzW2VyYV0gPz8gZmFsc2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9KVxuICAgICAgaWYgKG5ld0l0ZW0pIHtcbiAgICAgICAgbXlJdGVtcy5wdXNoKG5ld0l0ZW0pXG4gICAgICB9XG4gICAgICBpZiAobXlJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBsb2FkIGl0ZW0gZnJvbSBjb21wZW5kaXVtc1xuICAgICAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgICAgIGlmIChwYWNrLm1ldGFkYXRhPy50eXBlID09PSAnSXRlbScpIHtcbiAgICAgICAgICAgIGF3YWl0IHBhY2suZ2V0RG9jdW1lbnRzKClcbiAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSBnYW1lLml0ZW1zLmZpbmQoKGQpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGQudHlwZSA9PT0gdHlwZSAmJiBkLm5hbWUgPT09IGl0ZW1JZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJhcyA9IG5ld0l0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhc1xuICAgICAgICAgICAgICAgIGlmIChlcmFzICYmIE9iamVjdC5rZXlzKGVyYXMpLmxlbmd0aCA+IDAgJiYgIShlcmFzW2VyYV0gPz8gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKG5ld0l0ZW0pIHtcbiAgICAgICAgICAgICAgbXlJdGVtcy5wdXNoKG5ld0l0ZW0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobXlJdGVtcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIG15SXRlbXMpXG4gICAgICAgIG15SXRlbXMgPSB0aGlzLmdldFNraWxsc0J5TmFtZShpdGVtSWRlbnRpZmllcilcbiAgICAgICAgaWYgKG15SXRlbXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgaWYgKG15SXRlbXNbMF0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb1NraWxsQWRkZWRBdEJhc2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IG15SXRlbXNbMF0ubmFtZSxcbiAgICAgICAgICAgICAgcGVyY2VudDogbXlJdGVtc1swXS52YWx1ZVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgfSBlbHNlIGlmIChteUl0ZW1zWzBdLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBteUl0ZW1zWzBdLnJlbG9hZCgpXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0ge31cbiAgICAgICAgICAgIGlmIChteUl0ZW1zWzBdLnN5c3RlbS5za2lsbC5tYWluLmlkID09PSAnJyAmJiBteUl0ZW1zWzBdLnN5c3RlbS5za2lsbC5tYWluLm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gYXdhaXQgdGhpcy5nZXRJdGVtT3JBZGQobXlJdGVtc1swXS5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lLCAnc2tpbGwnKVxuICAgICAgICAgICAgICBpZiAoc2tpbGwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLm1haW4uaWQnXSA9IHNraWxsWzBdLmlkXG4gICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLm1haW4ubmFtZSddID0gc2tpbGxbMF0ubmFtZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobXlJdGVtc1swXS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCA9PT0gJycgJiYgbXlJdGVtc1swXS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lICE9PSAnJykge1xuICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IGF3YWl0IHRoaXMuZ2V0SXRlbU9yQWRkKG15SXRlbXNbMF0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSwgJ3NraWxsJylcbiAgICAgICAgICAgICAgaWYgKHNraWxsLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXNbJ3N5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkJ10gPSBza2lsbFswXS5pZFxuICAgICAgICAgICAgICAgIHVwZGF0ZXNbJ3N5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUnXSA9IHNraWxsWzBdLm5hbWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZXMpLmxlbmd0aCkge1xuICAgICAgICAgICAgICBhd2FpdCBteUl0ZW1zWzBdLnVwZGF0ZSh1cGRhdGVzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbXlJdGVtc1xuICB9XG5cbiAgYXN5bmMgc2tpbGxDaGVjayAoc2tpbGxEYXRhLCBmYXN0Rm9yd2FyZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgc2tpbGxJZGVudGlmaWVyID0gc2tpbGxEYXRhLm5hbWUgPyBza2lsbERhdGEubmFtZSA6IHNraWxsRGF0YVxuICAgIGxldCBza2lsbCA9IGF3YWl0IHRoaXMuZ2V0SXRlbU9yQWRkKHNraWxsSWRlbnRpZmllciwgJ3NraWxsJylcbiAgICBpZiAoc2tpbGwubGVuZ3RoKSB7XG4gICAgICBvcHRpb25zLm5hbWUgPSBza2lsbFswXS5uYW1lXG4gICAgfVxuICAgIGlmICghc2tpbGwubGVuZ3RoKSB7XG4gICAgICBsZXQgaXRlbSA9IG51bGxcbiAgICAgIGlmIChza2lsbERhdGEucGFjaykge1xuICAgICAgICBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoc2tpbGxEYXRhLnBhY2spXG4gICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cbiAgICAgICAgaXRlbSA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnQoc2tpbGxEYXRhLmlkKVxuICAgICAgfSBlbHNlIGlmIChza2lsbERhdGEuaWQpIHtcbiAgICAgICAgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHNraWxsRGF0YS5pZClcbiAgICAgIH1cblxuICAgICAgLy8gTm8gc2tpbGwgZm91bmQsIHRyeSB0byBnZXQgZ2V0IGl0IGZyb20gY29tcGVuZGl1bSAhXG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHJldHJpZXZhbCBvZiBza2lsbCBmcm9tIGNvbXBlbmRpdW0gISFcbiAgICAgICAgLy8gZ2FtZS5zZXR0aW5ncy5nZXQoICdDb0M3JywgJ0RlZmF1bHRDb21wZW5kaXVtJyk7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgIGNoZWNrLl9yYXdWYWx1ZSA9ICc/J1xuICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgIH1cbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTm9Ta2lsbCcpICsgJyAnICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZEZvckFjdG9yJywge1xuICAgICAgICAgICAgICBtaXNzaW5nOiBza2lsbElkZW50aWZpZXIsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWRkV2VhcG9uJyl9YCxcbiAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICB3ZWFwb246IHNraWxsRGF0YS5uYW1lLFxuICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgfSl9PC9wPmAsXG4gICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgaWYgKGNyZWF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2ZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGl0ZW0pXSlcbiAgICAgIH0gZWxzZSByZXR1cm5cblxuICAgICAgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShpdGVtLm5hbWUpXG5cbiAgICAgIGlmICghc2tpbGwubGVuZ3RoKSByZXR1cm5cblxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGNvbnN0IHNraWxsVmFsdWUgPSBhd2FpdCBTa2lsbFZhbHVlRGlhbG9nLmNyZWF0ZShcbiAgICAgICAgICBza2lsbFswXS5uYW1lLFxuICAgICAgICAgIHNraWxsWzBdLmJhc2VcbiAgICAgICAgKVxuICAgICAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihza2lsbFZhbHVlLmdldCgnYmFzZS12YWx1ZScpKVxuICAgICAgICBhd2FpdCBza2lsbFswXS51cGRhdGVWYWx1ZSh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kaWZmaWN1bHR5ID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygb3B0aW9ucy5tb2RpZmllciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxbMF0uaWRcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVjay5pc0JsaW5kID0gISFvcHRpb25zLmJsaW5kXG4gICAgaWYgKG9wdGlvbnMucHVzaGluZyA9PT0gJ2ZhbHNlJykgY2hlY2sucHVzaGluZyA9IGZhbHNlXG4gICAgZWxzZSBjaGVjay5wdXNoaW5nID0gISFvcHRpb25zLnB1c2hpbmdcbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICBjaGVjay50b01lc3NhZ2UoY2hlY2sucHVzaGluZylcbiAgfVxuXG4gIGFzeW5jIHdlYXBvbkNoZWNrICh3ZWFwb25EYXRhLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgbGV0IHdlYXBvblxuICAgIGlmICh0eXBlb2Ygd2VhcG9uRGF0YS51dWlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgd2VhcG9uID0gYXdhaXQgZnJvbVV1aWQod2VhcG9uRGF0YS51dWlkKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHdlYXBvbkRhdGEuaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3ZWFwb24gPSB0aGlzLml0ZW1zLmdldCh3ZWFwb25EYXRhLmlkKVxuICAgIH1cbiAgICBpZiAoIXdlYXBvbikge1xuICAgICAgbGV0IHdlYXBvbnMgPSB0aGlzLmdldEl0ZW1zRnJvbU5hbWUod2VhcG9uRGF0YS5uYW1lKVxuICAgICAgaWYgKHdlYXBvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIGxldCBpdGVtID0gbnVsbFxuICAgICAgICAgIGNvbnN0IHBhY2sgPSB3ZWFwb25EYXRhLnBhY2sgPyBnYW1lLnBhY2tzLmdldCh3ZWFwb25EYXRhLnBhY2spIDogbnVsbFxuICAgICAgICAgIGlmIChwYWNrKSB7XG4gICAgICAgICAgICBpZiAocGFjay5tZXRhZGF0YS5lbnRpdHkgIT09ICdJdGVtJykgcmV0dXJuXG4gICAgICAgICAgICBpdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudCh3ZWFwb25EYXRhLmlkKVxuICAgICAgICAgIH0gZWxzZSBpZiAod2VhcG9uRGF0YS5pZCkge1xuICAgICAgICAgICAgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHdlYXBvbkRhdGEuaWQpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvTm9JdGVtRm91bmQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBjcmVhdGUgPSBmYWxzZVxuICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWRkV2VhcG9uJyl9YCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQWRkV2VhcG9udEhpbnQnLCB7XG4gICAgICAgICAgICAgIHdlYXBvbjogd2VhcG9uRGF0YS5uYW1lLFxuICAgICAgICAgICAgICBhY3RvcjogdGhpcy5uYW1lXG4gICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgICAgICBjcmVhdGUgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBjb25zdCBhY3RvciA9XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5wYXJlbnQ/LmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IHRoaXMucGFyZW50LmFjdG9yIDogdGhpc1xuXG4gICAgICAgICAgaWYgKGNyZWF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgYXdhaXQgYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS50b0pTT04oKV0pXG4gICAgICAgICAgfSBlbHNlIHJldHVyblxuICAgICAgICAgIHdlYXBvbnMgPSBhY3Rvci5nZXRJdGVtc0Zyb21OYW1lKGl0ZW0ubmFtZSlcbiAgICAgICAgICBpZiAoIXdlYXBvbnMubGVuZ3RoKSByZXR1cm5cbiAgICAgICAgICBhd2FpdCB3ZWFwb25zWzBdLnJlbG9hZCgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckFjdG9ySGFzTm9XZWFwb25OYW1lZCcsIHtcbiAgICAgICAgICAgICAgYWN0b3JOYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgIHdlYXBvbk5hbWU6IHdlYXBvbkRhdGEubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAod2VhcG9ucy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yQWN0b3JIYXNUb29NYW55V2VhcG9uc05hbWVkJywge1xuICAgICAgICAgICAgYWN0b3JOYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICB3ZWFwb25OYW1lOiB3ZWFwb25EYXRhLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgICB3ZWFwb24gPSB3ZWFwb25zWzBdXG4gICAgfVxuXG4gICAgaWYgKCF3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPiAxKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2FyblRvb01hbnlUYXJnZXQnKSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IodGhpcy50b2tlbktleSwgKHdlYXBvbkRhdGEudXVpZCB8fCB3ZWFwb24uaWQpLCBmYXN0Rm9yd2FyZClcbiAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgICBpZiAod2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKHRoaXMudG9rZW5LZXksICh3ZWFwb25EYXRhLnV1aWQgfHwgd2VhcG9uLmlkKSwgZmFzdEZvcndhcmQpXG4gICAgICBjYXJkLmNyZWF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBhc3luYyByb2xsSW5pdGlhdGl2ZSAoaGFzR3VuID0gZmFsc2UpIHtcbiAgICBzd2l0Y2ggKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2luaXRpYXRpdmVSdWxlJykpIHtcbiAgICAgIGNhc2UgJ29wdGlvbmFsJzoge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjayh0aGlzLmFjdG9yS2V5KVxuICAgICAgICByb2xsLmRlbnlQdXNoID0gdHJ1ZVxuICAgICAgICByb2xsLmRlbnlMdWNrID0gdHJ1ZVxuICAgICAgICByb2xsLmRlbnlCbGluZFRhbXBlcmluZyA9IHRydWVcbiAgICAgICAgcm9sbC5oaWRlRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlJbml0RGljZXMnKSA9PT0gZmFsc2VcbiAgICAgICAgcm9sbC5mbGF2b3IgPSAnSW5pdGlhdGl2ZSByb2xsJ1xuICAgICAgICBhd2FpdCByb2xsLnJvbGxDaGFyYWN0ZXJpc3RpYygnZGV4JywgaGFzR3VuID8gMSA6IDApXG4gICAgICAgIHJvbGwudG9NZXNzYWdlKClcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICByb2xsLnN1Y2Nlc3NMZXZlbCArIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgLyAxMDBcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gaGFzR3VuXG4gICAgICAgICAgPyB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlICsgNTBcbiAgICAgICAgICA6IHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWVcbiAgICB9XG4gIH1cblxuICBnZXRBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gdHJ1ZVxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdXG4gIH1cblxuICBhc3luYyBzZXRBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBdOiB0cnVlIH0pXG4gIH1cblxuICBhc3luYyB1bnNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YF06IGZhbHNlIH0pXG4gIH1cblxuICBnZXRXZWFwb25Ta2lsbHMgKGl0ZW1JZCkge1xuICAgIGxldCB3ZWFwb24gPSBmcm9tVXVpZFN5bmMoaXRlbUlkKVxuICAgIGlmICghd2VhcG9uKSB7XG4gICAgICB3ZWFwb24gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2VhcG9uLnN5c3RlbSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdlYXBvbiA9IGdhbWUucGFja3MuZ2V0KHdlYXBvbi5wYWNrKS5nZXQod2VhcG9uLl9pZClcbiAgICB9XG4gICAgaWYgKHdlYXBvbi50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBza2lsbHMgPSBbXVxuICAgIGlmICh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQpIHtcbiAgICAgIHNraWxscy5wdXNoKHRoaXMuaXRlbXMuZ2V0KHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZCkpXG4gICAgfVxuXG4gICAgaWYgKHdlYXBvbi51c2VzQWx0ZXJuYXRpdmVTa2lsbCAmJiB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpIHtcbiAgICAgIHNraWxscy5wdXNoKHRoaXMuaXRlbXMuZ2V0KHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkpXG4gICAgfVxuICAgIHJldHVybiBza2lsbHNcbiAgfVxuXG4gIC8qKiBUcnkgdG8gZmluZCBhIGNoYXJhY3RlcmlzdGljLCBhdHRyaWJ1dGUgb3Igc2tpbGwgdGhhdCBtYXRjaGVzIHRoZSBuYW1lICovXG4gIGZpbmQgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUpIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyBUcnkgSURcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5nZXQobmFtZSlcbiAgICBpZiAoaXRlbSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgICB2YWx1ZTogaXRlbVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJlZ0V4cCA9IC9cXCgoW14pXSspXFwpL1xuICAgIGNvbnN0IG1hdGNoZXMgPSByZWdFeHAuZXhlYyhuYW1lKVxuICAgIGxldCBzaG9ydE5hbWUgPSBudWxsXG4gICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGgpIHNob3J0TmFtZSA9IG1hdGNoZXNbMV1cbiAgICAvLyBUcnkgdG8gZmluZCBhIHNraWxsIHdpdGggZXhhY3QgbmFtZS5cbiAgICBjb25zdCBza2lsbCA9IHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICEhcy5uYW1lICYmXG4gICAgICAgIChzLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgIG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpIHx8XG4gICAgICAgICAgcy5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSA9PT1cbiAgICAgICAgICAgIG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpIHx8XG4gICAgICAgICAgcy5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSA9PT1cbiAgICAgICAgICAgIHNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpKVxuICAgICAgKVxuICAgIH0pXG4gICAgaWYgKHNraWxsLmxlbmd0aCkgcmV0dXJuIHsgdHlwZTogJ2l0ZW0nLCB2YWx1ZTogc2tpbGxbMF0gfVxuXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBjaGFyYWN0ZXJpc3RpYy5cbiAgICBjb25zdCBjaGFyS2V5ID0gWydzdHInLCAnY29uJywgJ3NpeicsICdkZXgnLCAnYXBwJywgJ2ludCcsICdwb3cnLCAnZWR1J11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJLZXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJLZXlbaV0pXG4gICAgICBpZiAoY2hhcikge1xuICAgICAgICBjaGFyLm5hbWUgPSBjaGFyLmxhYmVsXG4gICAgICAgIGlmIChcbiAgICAgICAgICBjaGFyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgY2hhci5rZXk/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLCB2YWx1ZTogY2hhciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNoYXIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBjaGFyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY2hhci5sYWJlbD8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgY2hhci5sYWJlbD8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyeSB0byBmaW5kIGEgYXR0cmlidXRlLlxuICAgIGNvbnN0IGF0dHJpYktleSA9IFsnbGNrJywgJ3NhbiddXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJLZXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGF0dHIgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJLZXlbaV0pXG4gICAgICBpZiAoYXR0cikge1xuICAgICAgICBhdHRyLm5hbWUgPSBhdHRyLmxhYmVsXG4gICAgICAgIGlmIChcbiAgICAgICAgICBhdHRyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgYXR0ci5rZXk/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBhdHRyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgYXR0ci5zaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBhdHRyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBhdHRyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F0dHJpYnV0ZScsIHZhbHVlOiBhdHRyIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyeSB3aXRoIHBhcnRpYWwgPz9cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgcGlsb3RTa2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLnNraWxscy5maWx0ZXIocyA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBzLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmXG4gICAgICAgIHMuc3lzdGVtLnNwZWNpYWxpemF0aW9uPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PVxuICAgICAgICAgIGdhbWUuaTE4blxuICAgICAgICAgICAgLmxvY2FsaXplKCdDb0M3LlBpbG90U3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgICAgICAgID8udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICBnZXQgZHJpdmVTa2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLnNraWxscy5maWx0ZXIocyA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBzLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmXG4gICAgICAgIHMuc3lzdGVtLnNwZWNpYWxpemF0aW9uPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PVxuICAgICAgICAgIGdhbWUuaTE4blxuICAgICAgICAgICAgLmxvY2FsaXplKCdDb0M3LkRyaXZlU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgICAgICAgID8udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICBnZXQgdG9rZW5VdWlkICgpIHtcbiAgICBpZiAodGhpcy5zaGVldC50b2tlbikge1xuICAgICAgcmV0dXJuIHRoaXMuc2hlZXQudG9rZW4udXVpZFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHRva2VuS2V5ICgpIHtcbiAgICAvLyBDbGFyaWZpZXIgY2EgZXQgdG9rZW5pZFxuICAgIC8qKiAqIE1PRElGIDAuOC54ICovXG4gICAgLy8gaWYgdGhpcy5zaGVldC50b2tlbiA9PiB3YXMgb3BlbmVkIGZyb20gdG9rZW5cbiAgICAvLyBpZiB0aGlzLnRva2VuID0+IHN5bnRoZXRpYyBhY3RvciA9PSB0aGlzLmlzVG9rZW5cbiAgICBpZiAodGhpcy5zaGVldC50b2tlbikge1xuICAgICAgcmV0dXJuIGAke3RoaXMuc2hlZXQudG9rZW4ucGFyZW50LmlkfS4ke3RoaXMuc2hlZXQudG9rZW4uaWR9YFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLmlkXG4gICAgfVxuICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICAvLyAvL0Nhc2UgMTogdGhlIGFjdG9yIGlzIGEgc3ludGhldGljIGFjdG9yIGFuZCBoYXMgYSB0b2tlbiwgcmV0dXJuIHRva2VuIGtleS5cbiAgICAvLyBpZiggdGhpcy5pc1Rva2VuKSByZXR1cm4gYCR7dGhpcy50b2tlbi5zY2VuZT8uX2lkP3RoaXMudG9rZW4uc2NlbmUuX2lkOidUT0tFTid9LiR7dGhpcy50b2tlbi5pZH1gOyAgLy9SRUZBQ1RPUklORyAoMilcblxuICAgIC8vIC8vQ2FzZSAyOiB0aGUgYWN0b3IgaXMgbm90IGEgdG9rZW4gKGxpbmtlZCBhY3RvcikuIElmIHRoZSBzaGVldCBoYXZlIGFuIGFzc29jaWF0ZWQgdG9rZW4gcmV0dXJuIHRoZSB0b2tlbiBrZXkuXG4gICAgLy8gaWYoIHRoaXMuc2hlZXQudG9rZW4pIHJldHVybiBgJHt0aGlzLnNoZWV0LnRva2VuLnNjZW5lPy5pZD90aGlzLnNoZWV0LnRva2VuLnNjZW5lLmlkOidUT0tFTid9LiR7dGhpcy5zaGVldC50b2tlbi5pZH1gO1xuXG4gICAgLy8gLy9DYXNlIDM6IEFjdG9yIGhhcyBubyB0b2tlbiByZXR1cm4gaGlzIElEO1xuICAgIC8vIHJldHVybiB0aGlzLmlkO1xuICB9XG5cbiAgZ2V0IGFjdG9yS2V5ICgpIHtcbiAgICBpZiAodGhpcy5wcm90b3R5cGVUb2tlbi5hY3RvckxpbmspIHJldHVybiB0aGlzLmlkIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiB0aGlzLnRva2VuS2V5XG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tS2V5IChrZXkpIHtcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0ga2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgZ2V0IGhhc1JvbGxhYmxlQ2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBmb3IgKGNvbnN0IFssIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAoaXNOYU4oTnVtYmVyKHZhbHVlLmZvcm11bGEpKSkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaG9zUm9sbGFibGVTa2lsbHMgKCkge1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChpc05hTihza2lsbC5zeXN0ZW0/LnZhbHVlKSkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKipcbiAgICogVXNlIHRoZSBmb3JtdWxhIGlmIGF2YWlsYWJsZSB0byByb2xsIHNvbWUgY2hhcmFjdGVyaXRpY3MuXG4gICAqL1xuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgIXZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbCh2YWx1ZS5mb3JtdWxhKVxuICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICBpZiAoci50b3RhbCkge1xuICAgICAgICAgIGNoYXJhY3RlcmlzdGljc1tgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICByLnRvdGFsXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxuICAgIGF3YWl0IHRoaXMucmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUoKVxuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZXJlIGlzIGEgZm9ybXVsYSwgd2lsbCBzZXQgdGhlIGNoYXJhY3RlcmlzdGljIHRvIHRoZSBhdmVyYWdlIHZhbHVlICxpZiBkaXZpc2libGUgYnkgNSwgb3IgdGhlIGNsb3Nlc3QgMTAuXG4gICAqL1xuICBhc3luYyBhdmVyYWdlQ2hhcmFjdGVyaXN0aWNzVmFsdWUgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgIXZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGNvbnN0IGF2ZXJhZ2UgPSBuZXcgQXZlcmFnZVJvbGwoJygnICsgdmFsdWUuZm9ybXVsYSArICcpJylbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWluaW1pemU6IHRydWUsIG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIGNoYXJhY3RlcmlzdGljc1tgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9IGF2ZXJhZ2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXG4gIH1cblxuICAvKipcbiAgICogVGVzdCBpZiBhIGNoYXJhY3RlcmlzaXRjIGZvcm11bGEgaXMgYSByZWZlcmVuY2UgdG8gYW4gb3RoZXIgY2hhcmFjdGVyaXN0aWMgYW5kIHNldCBpdCBhY2NvcmRpbmdseS5cbiAgICovXG4gIGFzeW5jIHJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmICh2YWx1ZS5mb3JtdWxhICYmIHZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGxldCBjaGFyVmFsdWVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjaGFyVmFsdWUgPSBuZXcgUm9sbChcbiAgICAgICAgICAgIHZhbHVlLmZvcm11bGEsXG4gICAgICAgICAgICB0aGlzLnBhcnNlQ2hhcmFjdGVyaXN0aWNzKClcbiAgICAgICAgICApWyghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpID8gJ2V2YWx1YXRlJyA6ICdldmFsdWF0ZVN5bmMnKS8qIC8vIEZvdW5kcnlWVFQgdjExICovXSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNoYXJWYWx1ZSA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhclZhbHVlKSB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gY2hhclZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gIH1cblxuICBhc3luYyBzZXRDaGFyYWN0ZXJpc3RpYyAobmFtZSwgdmFsdWUpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IHt9XG4gICAgY29uc3QgY2hhclZhbHVlID0gaXNOYU4ocGFyc2VJbnQodmFsdWUpKSA/IG51bGwgOiBwYXJzZUludCh2YWx1ZSlcbiAgICBjaGFyYWN0ZXJpc3RpY1tuYW1lXSA9IGNoYXJWYWx1ZVxuICAgIGlmICghY2hhclZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGNvbnN0IGZvcm11bGEgPSBuYW1lLnJlcGxhY2UoJy52YWx1ZScsICcuZm9ybXVsYScpXG4gICAgICAgIGNoYXJhY3RlcmlzdGljW2Zvcm11bGFdID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpYylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BlbWVudFBoYXNlIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZmFpbHVyZSA9IFtdXG4gICAgY29uc3Qgc3VjY2VzcyA9IFtdXG4gICAgY29uc3Qgc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGQgPSA5MFxuICAgIGNvbnN0IGFsd2F5c1N1Y2Nlc3NUaHJlc2hvbGQgPSA5NVxuXG4gICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbEFsbDREZXYnKVxuICAgIGxldCBza2lsbHNSb2xsZWQgPSAwXG4gICAgbGV0IG1lc3NhZ2UgPSAnPHAgY2xhc3M9XCJjaGF0LWNhcmRcIj4nXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgaWYgKGl0ZW0uZGV2ZWxvcGVtZW50RmxhZykge1xuICAgICAgICAgIHNraWxsc1JvbGxlZCsrXG4gICAgICAgICAgY29uc3QgZGllID0gYXdhaXQgbmV3IERpZSh7IGZhY2VzOiAxMDAgfSkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGNvbnN0IHNraWxsVmFsdWUgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgbGV0IGF1Z21lbnQgPSBudWxsXG4gICAgICAgICAgbGV0IHNraWxsTWFzdGVyaW5nTWVzc2FnZSA9IG51bGxcbiAgICAgICAgICBpZiAoZGllLnRvdGFsID4gc2tpbGxWYWx1ZSB8fCBkaWUudG90YWwgPj0gYWx3YXlzU3VjY2Vzc1RocmVzaG9sZCkge1xuICAgICAgICAgICAgY29uc3QgYXVnbWVudERpZSA9IGF3YWl0IG5ldyBEaWUoeyBmYWNlczogMTAgfSkuZXZhbHVhdGUoe1xuICAgICAgICAgICAgICBhc3luYzogdHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHN1Y2Nlc3MucHVzaChpdGVtLmlkKVxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIFNBTiBhdWdtZW50IHdoZW4gdGhlIHNraWxsIGdvZXMgYmV5b25kIHRoZSBza2lsbCBtYXN0ZXJpbmcgdGhyZXNob2xkLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBza2lsbFZhbHVlIDwgc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGQgJiZcbiAgICAgICAgICAgICAgc2tpbGxWYWx1ZSArIGF1Z21lbnREaWUudG90YWwgPj0gc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBhdWdtZW50U0FORGllID0gYXdhaXQgbmV3IERpZSh7XG4gICAgICAgICAgICAgICAgZmFjZXM6IDYsXG4gICAgICAgICAgICAgICAgbnVtYmVyOiAyXG4gICAgICAgICAgICAgIH0pLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgY29uc3Qgc2FuR2FpbmVkID0gYXVnbWVudFNBTkRpZS50b3RhbFxuICAgICAgICAgICAgICBjb25zdCBzYW5HYWluZWRNZXNzYWdlID0gYEdhaW5lZCAyZDYgKCR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMF19ICsgJHthdWdtZW50U0FORGllLnZhbHVlc1sxXX0gPSAke3NhbkdhaW5lZH0pIFNBTmBcbiAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhzYW5HYWluZWRNZXNzYWdlKVxuICAgICAgICAgICAgICBza2lsbE1hc3RlcmluZ01lc3NhZ2UgPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuU2FuR2FpbmVkJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICByZXN1bHRzOiBgJHthdWdtZW50U0FORGllLnZhbHVlc1swXX0gKyAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzFdfWAsXG4gICAgICAgICAgICAgICAgICBzYW5HYWluZWQsXG4gICAgICAgICAgICAgICAgICBza2lsbDogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgc2tpbGxWYWx1ZTogc2tpbGxWYWx1ZSArIGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICAgIC8vIFNldCBzYW4gY29udHJvbHMgdGhhdCBpdCBkb2Vzbid0IGF1Z21lbnQgYmV5b25kIHNhbk1heFxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldFNhbih0aGlzLnNhbiArIHNhbkdhaW5lZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF1Z21lbnQgKz0gYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3LkRldlN1Y2Nlc3MnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBpdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgIGF1Z21lbnQ6IGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcbiAgICAgICAgICAgIGlmIChza2lsbE1hc3RlcmluZ01lc3NhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbWVzc2FnZSArPSBza2lsbE1hc3RlcmluZ01lc3NhZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGl0ZW0uaW5jcmVhc2VFeHBlcmllbmNlKGF1Z21lbnQpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1mYWlsZWRcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3LkRldkZhaWx1cmUnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBpdGVtLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICBmYWlsdXJlLnB1c2goaXRlbS5pZClcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgaXRlbS51bmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBbXVxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKSB7XG4gICAgICBpZiAoc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaChzYW5pdHlMb3NzRXZlbnQpXG4gICAgICB9IGVsc2UgaWYgKHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MgPiAxKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MtLVxuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goc2FuaXR5TG9zc0V2ZW50KVxuICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIGlmIChza2lsbHNSb2xsZWQpIHtcbiAgICAgICAgbWVzc2FnZSArPSAnPGJyPidcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWR1Y2VTYW5pdHlMaW1pdHMnKX08L3NwYW4+YFxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBtZXNzYWdlICs9ICc8L3A+J1xuICAgICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMgfVxuICAgICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHNraWxsc1JvbGxlZCA/IHRpdGxlIDogJycsIG1lc3NhZ2UsIHtcbiAgICAgICAgc3BlYWtlclxuICAgICAgfSlcbiAgICAgIHRoaXMub25seVJ1bk9uY2VQZXJTZXNzaW9uID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4geyBmYWlsdXJlLCBzdWNjZXNzIH1cbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BMdWNrIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgY3VycmVudEx1Y2sgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZVxuICAgIGlmICghY3VycmVudEx1Y2spIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6IDAgfSlcbiAgICBjb25zdCBwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2sgPSBnYW1lLnNldHRpbmdzLmdldChcbiAgICAgICdDb0M3JyxcbiAgICAgICdwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2snXG4gICAgKVxuICAgIGNvbnN0IHVwZ3JhZGVSb2xsID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICBjb25zdCBoaWdoZXJUaGFuQ3VycmVudEx1Y2sgPSB1cGdyYWRlUm9sbCA+IGN1cnJlbnRMdWNrXG4gICAgbGV0IGF1Z21lbnRSb2xsXG4gICAgaWYgKHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaykge1xuICAgICAgaGlnaGVyVGhhbkN1cnJlbnRMdWNrXG4gICAgICAgID8gKGF1Z21lbnRSb2xsID0gJzJEMTArMTAnKVxuICAgICAgICA6IChhdWdtZW50Um9sbCA9ICcxRDEwKzUnKVxuICAgIH0gZWxzZSBpZiAoaGlnaGVyVGhhbkN1cnJlbnRMdWNrKSB7XG4gICAgICBhdWdtZW50Um9sbCA9ICcxRDEwJ1xuICAgIH1cbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsTHVjazREZXYnKVxuICAgIGxldCBtZXNzYWdlID0gJzxwIGNsYXNzPVwiY2hhdC1jYXJkXCI+J1xuICAgIGlmIChwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2sgfHwgaGlnaGVyVGhhbkN1cnJlbnRMdWNrKSB7XG4gICAgICBjb25zdCBhdWdtZW50VmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXVnbWVudFJvbGwpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSlcbiAgICAgICAgLnRvdGFsXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOlxuICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlICsgYXVnbWVudFZhbHVlXG4gICAgICB9KVxuICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICdDb0M3Lkx1Y2tJbmNyZWFzZWQnLFxuICAgICAgICB7XG4gICAgICAgICAgZGllOiB1cGdyYWRlUm9sbCxcbiAgICAgICAgICBzY29yZTogY3VycmVudEx1Y2ssXG4gICAgICAgICAgYXVnbWVudDogYXVnbWVudFZhbHVlXG4gICAgICAgIH1cbiAgICAgICl9PC9zcGFuPmBcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLWZhaWxlZFwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgJ0NvQzcuTHVja05vdEluY3JlYXNlZCcsXG4gICAgICAgIHsgZGllOiB1cGdyYWRlUm9sbCwgc2NvcmU6IGN1cnJlbnRMdWNrIH1cbiAgICAgICl9PC9zcGFuPmBcbiAgICB9XG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgbWVzc2FnZSArPSAnPC9wPidcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzIH1cbiAgICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZSh0aXRsZSwgbWVzc2FnZSwgeyBzcGVha2VyIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGV2ZWxvcFNraWxsIChza2lsbElkLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmdldChza2lsbElkKVxuICAgIGlmICghc2tpbGwpIHJldHVyblxuICAgIGxldCB0aXRsZSA9ICcnXG4gICAgbGV0IG1lc3NhZ2UgPSAnJ1xuICAgIGNvbnN0IHVwZ3JhZGVSb2xsID0gbmV3IFJvbGwoJzFEMTAwJylcbiAgICBhd2FpdCB1cGdyYWRlUm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICBpZiAoIWZhc3RGb3J3YXJkKSBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh1cGdyYWRlUm9sbClcbiAgICBpZiAodXBncmFkZVJvbGwudG90YWwgPiBza2lsbC52YWx1ZSB8fCB1cGdyYWRlUm9sbC50b3RhbCA+PSA5NSkge1xuICAgICAgY29uc3QgYXVnbWVudFJvbGwgPSBuZXcgUm9sbCgnMUQxMCcpXG4gICAgICBhd2FpdCBhdWdtZW50Um9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgIGlmICghZmFzdEZvcndhcmQpIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGF1Z21lbnRSb2xsKVxuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2U3VjY2Vzc0RldGFpbHMnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXG4gICAgICAgIGF1Z21lbnQ6IGF1Z21lbnRSb2xsLnRvdGFsXG4gICAgICB9KVxuICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlJvbGxUaXRsZScsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcbiAgICAgICAgZGllOiB1cGdyYWRlUm9sbC50b3RhbCxcbiAgICAgICAgc2NvcmU6IHNraWxsLnZhbHVlXG4gICAgICB9KVxuICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGF1Z21lbnRSb2xsLnRvdGFsKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2Um9sbFRpdGxlJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxuICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLnRvdGFsLFxuICAgICAgICBzY29yZTogc2tpbGwudmFsdWVcbiAgICAgIH0pXG4gICAgICBtZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZGYWlsdXJlRGV0YWlscycsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZVxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMuX2lkIH1cbiAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UodGl0bGUsIG1lc3NhZ2UsIHsgc3BlYWtlciB9KVxuICAgIGF3YWl0IHNraWxsLnVuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gIH1cblxuICBoYXNDb25kaXRpb25TdGF0dXMgKGNvbmRpdGlvbk5hbWUpIHtcbiAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuc3lzdGVtLmNvbmRpdGlvbnM/Lltjb25kaXRpb25OYW1lXT8udmFsdWVcbiAgICBpZiAodHlwZW9mIGNvbmRpdGlvblZhbHVlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiBmYWxzZSAvLyBOZWNlc3NhcnksIGluY29ycmVjdCB0ZW1wbGF0ZSBpbml0aWFsaXphdGlvblxuICAgIH1cbiAgICByZXR1cm4gY29uZGl0aW9uVmFsdWVcbiAgfVxuXG4gIGhhc0NvbmRpdGlvblZhbHVlIChjb25kaXRpb25OYW1lLCBmaWVsZCkge1xuICAgIGlmICghdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoY29uZGl0aW9uTmFtZSkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgaWYgKGNvbmRpdGlvbk5hbWUgPT09IENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lICYmIGZpZWxkID09PSAnZHVyYXRpb25UZXh0Jykge1xuICAgICAgY29uc3QgcmVhbFRpbWUgPSB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKGNvbmRpdGlvbk5hbWUsICdyZWFsVGltZScpXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuaGFzQ29uZGl0aW9uVmFsdWUoY29uZGl0aW9uTmFtZSwgJ2R1cmF0aW9uJylcbiAgICAgIGlmICh0eXBlb2YgZHVyYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBkdXJhdGlvbiArICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yb3VuZHMnKVxuICAgICAgICB9IGVsc2UgaWYgKHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBkdXJhdGlvbiArICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uY29uZGl0aW9ucz8uW2NvbmRpdGlvbk5hbWVdPy5bZmllbGRdXG4gIH1cblxuICBhc3luYyB0b2dnbGVDb25kaXRpb24gKGNvbmRpdGlvbk5hbWUpIHtcbiAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKGNvbmRpdGlvbk5hbWUpXG4gICAgaWYgKCFjb25kaXRpb25WYWx1ZSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oY29uZGl0aW9uTmFtZSlcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihjb25kaXRpb25OYW1lKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldENvbmRpdGlvbiAoXG4gICAgY29uZGl0aW9uTmFtZSxcbiAgICB7XG4gICAgICBmb3JjZVZhbHVlID0gZmFsc2UsXG4gICAgICBqdXN0VGhpcyA9IGZhbHNlLFxuICAgICAgcmVhbFRpbWUgPSBudWxsLFxuICAgICAgZHVyYXRpb24gPSBudWxsXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGlmICghZm9yY2VWYWx1ZSAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5lZmZlY3RzXG4gICAgICAgIC5maWx0ZXIoZWZmZWN0ID0+IENvQzdBY3RpdmVFZmZlY3QuZmlsdGVyQWN0aXZlRWZmZWN0cyhlZmZlY3QsIGNvbmRpdGlvbk5hbWUpKVxuICAgICAgICAubWFwKGVmZmVjdCA9PiBlZmZlY3QuaWQpXG4gICAgICBjb25zdCBjdXN0b20gPSB7fVxuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XG4gICAgICAgICAgICBjb3JlOiB7XG4gICAgICAgICAgICAgIG92ZXJsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZTpcbiAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XG4gICAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICAgIHJlYWxUaW1lOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY3VzdG9tLmR1cmF0aW9uID0ge1xuICAgICAgICAgICAgcm91bmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzZWNvbmRzOiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlIHx8IHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY3VzdG9tLmZsYWdzLkNvQzcucmVhbFRpbWUgPSByZWFsVGltZVxuICAgICAgICAgICAgY3VzdG9tLmZsYWdzID0ge1xuICAgICAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICAgICAgcmVhbFRpbWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGR1cmF0aW9uICE9PSBudWxsICYmIHR5cGVvZiBkdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgaWYgKHJlYWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tLmR1cmF0aW9uLnJvdW5kcyA9IGR1cmF0aW9uXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tLmR1cmF0aW9uLnNlY29uZHMgPSBkdXJhdGlvbiAqIDM2MDBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgaWYgKGVmZmVjdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbHRlcihcbiAgICAgICAgICBlZmZlY3QgPT4gZWZmZWN0LmlkID09PSBjb25kaXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgICAgaWYgKGVmZmVjdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgICAgICBpY29uOiBlZmZlY3RbMF0uaWNvbixcbiAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTEnKSkge1xuICAgICAgICAgICAgLy8gRm91bmRyeVZUVCB2MTBcbiAgICAgICAgICAgIHNvdXJjZS5sYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShlZmZlY3RbMF0ubGFiZWwpXG4gICAgICAgICAgICBzb3VyY2UuZmxhZ3MgPSB7XG4gICAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgICBzdGF0dXNJZDogZWZmZWN0WzBdLmlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc291cmNlLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoZWZmZWN0WzBdLm5hbWUpXG4gICAgICAgICAgICBzb3VyY2Uuc3RhdHVzZXMgPSBbZWZmZWN0WzBdLmlkXVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBlZmZlY3REYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzb3VyY2UsIGN1c3RvbSlcbiAgICAgICAgICBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW2VmZmVjdERhdGFdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRoaXMgZG9lc24ndCBleGlzdCBpbiBGb3VuZHJ5VlRUIEFjdGl2ZUVmZmVjdHM/XG4gICAgICAgICAgZm9yY2VWYWx1ZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VzdG9tLl9pZCA9IGVmZmVjdHNbMF1cbiAgICAgICAgYXdhaXQgc3VwZXIudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtjdXN0b21dKVxuICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VWYWx1ZSB8fCAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0udmFsdWVgXTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZTpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZHMgPSB7fVxuICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF0gPSB0cnVlXG4gICAgICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUgfHwgcmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5yZWFsVGltZWBdID0gcmVhbFRpbWVcbiAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uICE9PSBudWxsICYmIHR5cGVvZiBkdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uZHVyYXRpb25gXSA9IGR1cmF0aW9uXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0ucmVhbFRpbWVgXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT1yZWFsVGltZWBdID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgICAgICBgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5kdXJhdGlvbmBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS4tPWR1cmF0aW9uYF0gPSBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZShmaWVsZHMpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoIWp1c3RUaGlzKSB7XG4gICAgICAgIC8vIERvZXMgc2V0dGluZyB0aGUgY29uZGl0aW9uIGFsc28gdHJpZ2dlciBvdGhlciBhY3Rpb25zP1xuICAgICAgICAvLyAtIElmIEFjdGl2ZUVmZmVjdHMgYXJlIGFkZGVkIGhhc0NvbmRpdGlvblN0YXR1cyBmb3IgcmVjZW50bHkgYWRkZWQgY29uZGl0aW9ucyBtYXkgcmV0dXJuIGluY29ycmVjdGx5XG4gICAgICAgIHN3aXRjaCAoY29uZGl0aW9uTmFtZSkge1xuICAgICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5wcm9uZSlcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIXRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKSAmJlxuICAgICAgICAgICAgICAhdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuZGVhZClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Rva2VuID8gdGhpcy50b2tlbktleSA6IHRoaXMuaWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBjb25DaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxuICAgICAgICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdW5zZXRDb25kaXRpb24gKGNvbmRpdGlvbk5hbWUsIHsgZm9yY2VWYWx1ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmICghZm9yY2VWYWx1ZSAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5lZmZlY3RzXG4gICAgICAgIC5maWx0ZXIoZWZmZWN0ID0+IENvQzdBY3RpdmVFZmZlY3QuZmlsdGVyQWN0aXZlRWZmZWN0cyhlZmZlY3QsIGNvbmRpdGlvbk5hbWUpKVxuICAgICAgICAubWFwKGVmZmVjdCA9PiBlZmZlY3QuaWQpXG4gICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBlZmZlY3RzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yY2VWYWx1ZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZvcmNlVmFsdWUgfHwgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJykpIHtcbiAgICAgIHN3aXRjaCAoY29uZGl0aW9uTmFtZSkge1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmluZGVmSW5zYW5lOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnVuY29uc2Npb3VzOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmR5aW5nOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnByb25lOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9Li09dmFsdWVgXTogbnVsbFxuICAgICAgICAgIH0pXG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF06IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRPRE8gOiBjaGVjayBpZiBldmVyIHVzZWRcbiAgYXN5bmMgcmVzZXRDb3VudGVyIChjb3VudGVyKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbY291bnRlcl06IDAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0RGFpbHlTYW5pdHkgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCc6IE1hdGguZmxvb3IoXG4gICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIC8gNVxuICAgICAgKSxcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJzogMFxuICAgIH0pXG4gIH1cblxuICBnZXQgZmlnaHRpbmdTa2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXQgY2xvc2VDb21iYXRXZWFwb25zICgpIHtcbiAgICBjb25zdCB3ZWFwb25MaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnd2VhcG9uJyAmJiAhdmFsdWUuc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZ2V0KHZhbHVlLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICAgICAgICB2YWx1ZS5zeXN0ZW0uc2tpbGwubWFpbi52YWx1ZSA9IHNraWxsID8gc2tpbGwudmFsdWUgOiAwXG4gICAgICAgIHdlYXBvbkxpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3ZWFwb25MaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgcmV0dXJuIHdlYXBvbkxpc3RcbiAgfVxuXG4gIGdldCBmaXJlYXJtU2tpbGxzICgpIHtcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICdza2lsbCcgJiYgKHZhbHVlLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gfHwgdmFsdWUuc3lzdGVtLnByb3BlcnRpZXMucmFuZ2VkIHx8IHZhbHVlLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09ICdpLnNraWxsLmZpZ2h0aW5nLXRocm93JykpIHtcbiAgICAgICAgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0IHVzZXIgKCkge1xuICAgIC8vIGlzIHRoYXQgYWN0b3IgaW1wZXJzb25hbnRlZCBieSBhIHVzZXIgP1xuICAgIHJldHVybiBnYW1lLnVzZXJzLmZpbmQodXNlciA9PiB7XG4gICAgICBpZiAodXNlci5jaGFyYWN0ZXIpIHtcbiAgICAgICAgaWYgKHVzZXIuY2hhcmFjdGVyLmlkID09PSB0aGlzLmlkKSByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGdldCBkb2RnZVNraWxsICgpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0Rmlyc3RJdGVtQnlDb0NJRCgnaS5za2lsbC5kb2RnZScpXG4gICAgaWYgKHNraWxsKSB7XG4gICAgICByZXR1cm4gc2tpbGxcbiAgICB9XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5kb2RnZScpXG4gICAgKVxuICAgIGlmIChza2lsbExpc3QubGVuZ3RoICE9PSAwKSByZXR1cm4gc2tpbGxMaXN0WzBdXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBjcmVkaXRSYXRpbmdTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldEZpcnN0SXRlbUJ5Q29DSUQoJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycpXG4gICAgaWYgKHNraWxsKSB7XG4gICAgICByZXR1cm4gc2tpbGxcbiAgICB9XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jcmVkaXQtcmF0aW5nJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGN0aHVsaHVNeXRob3NTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldEZpcnN0SXRlbUJ5Q29DSUQoJ2kuc2tpbGwuY3RodWxodS1teXRob3MnKVxuICAgIGlmIChza2lsbCkge1xuICAgICAgcmV0dXJuIHNraWxsXG4gICAgfVxuICAgIGNvbnN0IHNraWxsTGlzdCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3RodWxodS1teXRob3MnKVxuICAgIClcbiAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCAhPT0gMCkgcmV0dXJuIHNraWxsTGlzdFswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgY3RodWxodU15dGhvcyAoKSB7XG4gICAgY29uc3QgQ00gPSB0aGlzLmN0aHVsaHVNeXRob3NTa2lsbFxuICAgIGlmIChDTSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBDTS52YWx1ZVxuICAgICAgaWYgKHZhbHVlKSByZXR1cm4gdmFsdWVcbiAgICAgIHJldHVybiBwYXJzZUludChDTS5zeXN0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgbXl0aG9zSGFyZGVuZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnKSB8fCBmYWxzZVxuICB9XG5cbiAgZ2V0IHVzZU15dGhvc0hhcmRlbmVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5teXRob3NIYXJkZW5lZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd015dGhvc0hhcmRlbmVkJylcbiAgfVxuXG4gIGFzeW5jIHNldE15dGhvc0hhcmRlbmVkICgpIHtcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnLCB0cnVlKVxuICB9XG5cbiAgZ2V0IG15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcpIHx8IGZhbHNlXG4gIH1cblxuICBhc3luYyBleHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSAoKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnLCB0cnVlKVxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZyAoKSB7XG4gICAgY29uc3QgQ1IgPSB0aGlzLmNyZWRpdFJhdGluZ1NraWxsXG4gICAgaWYgKENSKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IENSLnZhbHVlXG4gICAgICBpZiAodmFsdWUpIHJldHVybiB2YWx1ZVxuICAgICAgcmV0dXJuIHBhcnNlSW50KENSLnN5c3RlbS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHN0YXRpYyBtb25ldGFyeUZvcm1hdCAoZm9ybWF0LCBzeW1ib2wsIHZhbHVlKSB7XG4gICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMubHNkOlxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih2YWx1ZSAvIDI0MCkgKyAnLycgKyAoTWF0aC5mbG9vcih2YWx1ZSAvIDEyKSAlIDIwKSArICcvJyArICh2YWx1ZSAlIDEyKVxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5yb21hbjpcbiAgICAgICAgcmV0dXJuIChNYXRoLmZsb29yKHZhbHVlIC8gNDAwKSkgKyAnLycgKyAoTWF0aC5mbG9vcih2YWx1ZSAvIDE2KSAlIDI1KSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gOCkgJSAyKSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gNCkgJSAyKSArICcvJyArICh2YWx1ZSAlIDQpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmRlY2ltYWxMZWZ0OlxuICAgICAgICByZXR1cm4gc3ltYm9sICsgTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pLnJlcGxhY2UoL1xcLjAwJC8sICcnKVxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5kZWNpbWFsUmlnaHQ6XG4gICAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCwgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSkucmVwbGFjZSgvXFwuMDAkLywgJycpICsgJyAnICsgc3ltYm9sXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmludGVnZXJMZWZ0OlxuICAgICAgICByZXR1cm4gc3ltYm9sICsgTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZygpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmludGVnZXJSaWdodDpcbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkudG9Mb2NhbGVTdHJpbmcoKSArICcgJyArIHN5bWJvbFxuICAgIH1cbiAgICByZXR1cm4gJzAnXG4gIH1cblxuICBzdGF0aWMgbW9uZXRhcnlWYWx1ZSAoZm9ybWF0LCB2YWx1ZXMsIENSLCB0eXBlLCB2YWx1ZSkge1xuICAgIENSID0gQ1IgfHwgMFxuICAgIGNvbnN0IHJvdyA9IHZhbHVlcy5maW5kKHIgPT4gKHR5cGVvZiByLm1pbiA9PT0gJ29iamVjdCcgfHwgci5taW4gPD0gQ1IpICYmICh0eXBlb2Ygci5tYXggPT09ICdvYmplY3QnIHx8IHIubWF4ID49IENSKSlcbiAgICBpZiAodHlwZW9mIHJvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHJvd1t0eXBlXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHJvd1t2YWx1ZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmxzZDpcbiAgICAgICAgICBzd2l0Y2ggKHJvd1t0eXBlXSkge1xuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMubXVsdGlwbGllcjpcbiAgICAgICAgICAgICAgcmV0dXJuIDI0MCAqIENSICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMudmFsdWU6XG4gICAgICAgICAgICAgIHJldHVybiAyNDAgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5zOlxuICAgICAgICAgICAgICByZXR1cm4gMTIgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5kOlxuICAgICAgICAgICAgICByZXR1cm4gMSAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5yb21hbjpcbiAgICAgICAgICBzd2l0Y2ggKHJvd1t0eXBlXSkge1xuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMubXVsdGlwbGllcjpcbiAgICAgICAgICAgICAgcmV0dXJuIDQwMCAqIENSICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMudmFsdWU6XG4gICAgICAgICAgICAgIHJldHVybiA0MDAgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5kZW5hcmlpOlxuICAgICAgICAgICAgICByZXR1cm4gMTYgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5xdWluYXJpaTpcbiAgICAgICAgICAgICAgcmV0dXJuIDggKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5zZXN0ZXJ0aWk6XG4gICAgICAgICAgICAgIHJldHVybiA0ICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMuYXNzZXM6XG4gICAgICAgICAgICAgIHJldHVybiAxICogcm93W3ZhbHVlXVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHN3aXRjaCAocm93W3R5cGVdKSB7XG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5tdWx0aXBsaWVyOlxuICAgICAgICAgICAgICByZXR1cm4gQ1IgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy52YWx1ZTpcbiAgICAgICAgICAgICAgcmV0dXJuIDEgKiByb3dbdmFsdWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgc3BlbmRpbmdMZXZlbCAoKSB7XG4gICAgcmV0dXJuIENvQ0FjdG9yLm1vbmV0YXJ5VmFsdWUodGhpcy5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCB0aGlzLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMsIHRoaXMuY3JlZGl0UmF0aW5nLCAnc3BlbmRpbmdUeXBlJywgJ3NwZW5kaW5nVmFsdWUnKVxuICB9XG5cbiAgZ2V0IGNhc2ggKCkge1xuICAgIHJldHVybiBDb0NBY3Rvci5tb25ldGFyeVZhbHVlKHRoaXMuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgdGhpcy5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzLCB0aGlzLmNyZWRpdFJhdGluZywgJ2Nhc2hUeXBlJywgJ2Nhc2hWYWx1ZScpXG4gIH1cblxuICBnZXQgYXNzZXRzICgpIHtcbiAgICByZXR1cm4gQ29DQWN0b3IubW9uZXRhcnlWYWx1ZSh0aGlzLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHRoaXMuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcywgdGhpcy5jcmVkaXRSYXRpbmcsICdhc3NldHNUeXBlJywgJ2Fzc2V0c1ZhbHVlJylcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJykgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0IG93bmVycyAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlcnMuZmlsdGVyKFxuICAgICAgdSA9PiB0aGlzLnRlc3RVc2VyUGVybWlzc2lvbih1LCAnT1dORVInKSAmJiAhdS5pc0dNXG4gICAgKVxuICB9XG5cbiAgZ2V0IHBsYXllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJzLmZpbHRlcih1ID0+IHUuY2hhcmFjdGVyPy5pZCA9PT0gdGhpcy5pZClcbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJVc2VyICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZ2FtZS51c2Vycy5jb250ZW50cy5maWx0ZXIodSA9PiB1LmNoYXJhY3Rlcj8uaWQgPT09IHRoaXMuaWQpWzBdIHx8IG51bGxcbiAgICApXG4gIH1cblxuICBhc3luYyBzZXRIcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgdmFsdWUgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heFxuICAgIH1cbiAgICBjb25zdCBoZWFsdGhCZWZvcmUgPSB0aGlzLmhwXG4gICAgbGV0IGRhbWFnZVRha2VuXG4gICAgLy8gaXMgaGVhbGluZ1xuICAgIGlmIChpc05hTihoZWFsdGhCZWZvcmUpIHx8IHZhbHVlID49IGhlYWx0aEJlZm9yZSkge1xuICAgICAgYXdhaXQgdGhpcy5fc2V0SHAodmFsdWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhbWFnZVRha2VuID0gaGVhbHRoQmVmb3JlIC0gdmFsdWVcbiAgICAgIGF3YWl0IHRoaXMuZGVhbERhbWFnZShkYW1hZ2VUYWtlbiwgeyBpZ25vcmVBcm1vcjogdHJ1ZSB9KVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKGFtb3VudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgLy8gVE9ETzogQ2hhbmdlIG9wdGlvbnMgdG8gbGlzdCBvZiB2YWx1ZXNcbiAgICBjb25zdCBhcm1vckRhdGEgPSBvcHRpb25zLmFybW9yXG4gICAgICA/IG9wdGlvbnMuYXJtb3JcbiAgICAgIDogdGhpcy5zeXN0ZW0uYXR0cmlicy5hcm1vciAvLyBpZiB0aGVyZSBhcm1vciB2YWx1ZSBwYXNzZWQgd2UgdXNlIGl0XG4gICAgY29uc3QgZ3Jvc3NEYW1hZ2UgPSBwYXJzZUludChhbW91bnQpXG4gICAgbGV0IGFybW9yVmFsdWUgPSAwXG4gICAgaWYgKCFvcHRpb25zLmlnbm9yZUFybW9yKSB7XG4gICAgICBpZiAoYXJtb3JEYXRhID09PSBudWxsKSB7XG4gICAgICAgIC8vIG5vcFxuICAgICAgfSBlbHNlIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShhcm1vckRhdGEpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXJtb3JEYXRhKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhKSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IE51bWJlcihhcm1vckRhdGEpXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhPy52YWx1ZSkpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSBOdW1iZXIoYXJtb3JEYXRhLnZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlQXJtb3JGb3JtdWxhJywge1xuICAgICAgICAgICAgdmFsdWU6IGFybW9yRGF0YVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV0RGFtYWdlID0gZ3Jvc3NEYW1hZ2UgLSBhcm1vclZhbHVlXG4gICAgaWYgKG5ldERhbWFnZSA8PSAwKSByZXR1cm4gMFxuICAgIGF3YWl0IHRoaXMuX3NldEhwKHRoaXMuaHAgLSBuZXREYW1hZ2UpXG4gICAgaWYgKG5ldERhbWFnZSA+PSB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMnKSkge1xuICAgICAgICBpZiAodGhpcy5ocCA9PT0gMCkge1xuICAgICAgICAgIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4IC8gMikpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmR5aW5nKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobmV0RGFtYWdlID49IE1hdGguY2VpbCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCAvIDIpKSB7XG4gICAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgICAgICAgdGhpcy5pc1Rva2VuID8gdGhpcy50b2tlbktleSA6IHRoaXMuaWRcbiAgICAgICAgICApXG4gICAgICAgICAgY29uQ2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGhhc01ham9yV291bmQgPSBmYWxzZVxuICAgICAgICBpZiAobmV0RGFtYWdlID49IE1hdGguY2VpbCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCAvIDIpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgICAgaGFzTWFqb3JXb3VuZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoYXNNYWpvcldvdW5kID0gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaHAgPT09IDApIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICBpZiAoaGFzTWFqb3JXb3VuZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXREYW1hZ2VcbiAgfVxuXG4gIGdldCBtYWpvcldvdW5kICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gIH1cblxuICBnZXQgZHlpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGdldCB1bmNvbnNjaW91cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICB9XG5cbiAgZ2V0IGRlYWQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5kZWFkKVxuICB9XG5cbiAgZ2V0IHByb25lICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMucHJvbmUpXG4gIH1cblxuICAvLyBzdGF0aWMgdXBkYXRlQWN0b3IoIGFjdG9yLCBkYXRhVXBkYXRlKXtcbiAgLy8gICBpZiggZ2FtZS51c2VyLmlzR00pe1xuICAvLyAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgdXBkYXRpbmcgYWN0b3IgJHthY3Rvci5uYW1lfWApO1xuICAvLyAgICAgY29uc3QgcHJvbmUgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5wcm9uZV07XG4gIC8vICAgICBjb25zdCB1bmNvbnNjaW91cyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLnVuY29uc2Npb3VzXTtcbiAgLy8gICAgIGNvbnN0IGNyaXRpY2FsV291bmRzID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHNdO1xuICAvLyAgICAgY29uc3QgZHlpbmcgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5keWluZ107XG4gIC8vICAgICBpZiggcHJvbmUpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JQcm9uZScsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCB1bmNvbnNjaW91cykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIGNyaXRpY2FsV291bmRzKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yTWFqb3JXb3VuZCcsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCBkeWluZykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckR5aW5nJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgIH1cbiAgLy8gICByZXR1cm47XG4gIC8vIH1cblxuICAvLyBcIkNvQzcuSW5mb0FjdG9yUHJvbmVcIjogXCJ7YWN0b3J9IGZhbGwgcHJvbmVcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzXCI6IFwie2FjdG9yfSBmYWxsIHVuY29uc2Npb3VzXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JNYWpvcldvdW5kXCI6IFwie2FjdG9yfSBnZXQgYSBtYWpvciB3b3VuZFwiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9yRHlpbmdcIjogXCJ7YWNvcn0gaXMgZHlpbmdcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvckluanVyaWVkXCI6IFwie2FjdG9yfSBpcyBpbmp1cmllZFwiLFxuXG4gIC8vIHN0YXRpYyB1cGRhdGVUb2tlbiggc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKXtcbiAgLy8gICBjb25zdCBpbmp1cmllZCA9IGRhdGFVcGRhdGU/LmFjdG9yRGF0YT8uZmxhZ3M/LkNvQzc/LmluanVyaWVkO1xuICAvLyAgIGlmKCBpbmp1cmllZCkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckluanVyaWVkJywge2FjdG9yOiB0b2tlbi5uYW1lfSkpO1xuICAvLyAgIHJldHVybjtcbiAgLy8gfVxuXG4gIC8vIGFzeW5jIHVwZGF0ZSAoZGF0YSA9IHt9LCBjb250ZXh0ID0ge30pIHtcbiAgLy8gICBjb25zb2xlLmxvZygnPj4+PicsIGRhdGEsIGNvbnRleHQpXG4gIC8vICAgc3VwZXIudXBkYXRlKGRhdGEsIGNvbnRleHQpXG4gIC8vIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvciwgQXVkaW9IZWxwZXIsIENoYXRNZXNzYWdlLCBDT05GSUcsIENPTlNULCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgZ2V0Q29tcHV0ZWRTdHlsZSwgSXRlbSwgcmVuZGVyVGVtcGxhdGUsIFRva2VuLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuL2RpY2UuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hlY2sge1xuICBjb25zdHJ1Y3RvciAoXG4gICAgYWN0b3IgPSBudWxsLFxuICAgIHNraWxsID0gbnVsbCxcbiAgICBpdGVtID0gbnVsbCxcbiAgICBkaWNlTW9kID0gMCxcbiAgICBkaWZmaWN1bHR5ID0gbnVsbCxcbiAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSAwLFxuICAgIGZsYXREaWNlTW9kaWZpZXIgPSAwXG4gICkge1xuICAgIHRoaXMuYWN0b3IgPSBhY3RvclxuICAgIHRoaXMuc2tpbGwgPSBza2lsbFxuICAgIHRoaXMuaXRlbSA9IGl0ZW1cbiAgICB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgdGhpcy5yYXdWYWx1ZSA9IDAgLy8gdmFsdWUgbmVlZGVkIGJlZm9yZSBkaWZmaWN1bHR5XG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBudWxsXG4gICAgdGhpcy5yZWZlcmVuY2VNZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy5wdXNoaW5nID0gZmFsc2VcbiAgICB0aGlzLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcblxuICAgIGlmIChkaWZmaWN1bHR5ID09PSBudWxsKSB7XG4gICAgICBjb25zdCBpc1Vua25vd24gPVxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JykgPT09ICd1bmtub3duJ1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gaXNVbmtub3duXG4gICAgICAgID8gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duXG4gICAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBjYXJkVHlwZSAoKSB7XG4gICAgcmV0dXJuICdyb2xsQ2FyZCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGlmZmljdWx0eUxldmVsICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdW5rbm93bjogLTEsXG4gICAgICByZWd1bGFyOiAxLFxuICAgICAgaGFyZDogMixcbiAgICAgIGV4dHJlbWU6IDMsXG4gICAgICBjcml0aWNhbDogNCxcbiAgICAgIGltcG9zc2libGU6IDlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZ1bWJsZTogLTk5LFxuICAgICAgZmFpbHVyZTogMCxcbiAgICAgIHJlZ3VsYXI6IDEsXG4gICAgICBoYXJkOiAyLFxuICAgICAgZXh0cmVtZTogMyxcbiAgICAgIGNyaXRpY2FsOiA0XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCB0eXBlICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhcmFjdGVyaXN0aWM6ICdjaGFyYWN0ZXJpc3RpYycsXG4gICAgICBhdHRyaWJ1dGU6ICdhdHRyaWJ1dGUnLFxuICAgICAgc2tpbGw6ICdpdGVtJyxcbiAgICAgIGl0ZW06ICdpdGVtJyxcbiAgICAgIHZhbHVlOiAndmFsdWUnXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGRpZmZpY3VsdHlTdHJpbmcgKGRpZmZpY3VsdHlMZXZlbCkge1xuICAgIHN3aXRjaCAoXG4gICAgICAhaXNOYU4oTnVtYmVyKGRpZmZpY3VsdHlMZXZlbCkpXG4gICAgICAgID8gTnVtYmVyKGRpZmZpY3VsdHlMZXZlbClcbiAgICAgICAgOiBkaWZmaWN1bHR5TGV2ZWxcbiAgICApIHtcbiAgICAgIGNhc2UgJz8nOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVua25vd25EaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysrJzpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICBjYXNlICcrKysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd246XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGdldCByYXdWYWx1ZSAoKSB7XG4gICAgLy8gaWYgKCF0aGlzLmFjdG9yIHx8ICF0aGlzLmFjdG9yLmlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLl9yYXdWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9XG4gICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLnZhbHVlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5za2lsbCkgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuc2tpbGwudmFsdWVcbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuX3Jhd1ZhbHVlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyICYmXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICkge1xuICAgICAgICBpZiAodGhpcy5fcmF3VmFsdWUgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciA8IDEpIHJldHVybiAxXG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWVcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IHJhd1ZhbHVlICh4KSB7XG4gICAgdGhpcy5fcmF3VmFsdWUgPSB4XG4gIH1cblxuICBzZXQgdXVpZCAoeCkge1xuICAgIHRoaXMuX3V1aWQgPSB4XG4gIH1cblxuICBnZXQgdXVpZCAoKSB7XG4gICAgaWYgKCF0aGlzLl91dWlkKSB0aGlzLl91dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICByZXR1cm4gdGhpcy5fdXVpZFxuICB9XG5cbiAgZ2V0IGhhc0NhcmQgKCkge1xuICAgIGNvbnN0IGNoYXRDYXJkID0gdWkuY2hhdC5jb2xsZWN0aW9uLmZpbHRlcihtZXNzYWdlID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMudXVpZCA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3V1aWQnKSAmJlxuICAgICAgICBDb0M3Q2hlY2suY2FyZFR5cGUgPT09IG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICd0eXBlJylcbiAgICAgIClcbiAgICB9KVxuICAgIGlmIChjaGF0Q2FyZC5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHJhd1ZhbHVlU3RyaW5nICgpIHtcbiAgICBpZiAodGhpcy5fcmF3VmFsdWUgPT09IDApIHtcbiAgICAgIHJldHVybiAnMCdcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9yYXdWYWx1ZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChcbiAgICAgIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyICYmXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPCAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZS50b1N0cmluZygpICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIudG9TdHJpbmcoKVxuICAgICAgfVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKSArICcrJyArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICAgIClcbiAgICB9IGVsc2UgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKClcbiAgfVxuXG4gIGdldCBjcml0aWNhbFRocmVzaG9sZCAoKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIGdldCByZWd1bGFyVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMucmF3VmFsdWUgPj0gMTAwKSByZXR1cm4gOTlcbiAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnJhd1ZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGhhcmRUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnJhd1ZhbHVlIC8gMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGV4dHJlbWVUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnJhd1ZhbHVlIC8gNSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGZ1bWJsZVRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlmZmljdWx0eSA+PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyZW1lVGhyZXNob2xkIDwgNTAgPyA5NiA6IDEwMFxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGlmZmljdWx0eSA+PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYXJkVGhyZXNob2xkIDwgNTAgPyA5NiA6IDEwMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5yYXdWYWx1ZSA8IDUwID8gOTYgOiAxMDBcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzdWNjZXNUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3dpdGNoICh0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgIHJldHVybiB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICAgIHJldHVybiB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxuICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB0aGlzLnJhd1ZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eVN0cmluZyAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd246XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGdldCBtb2RpZmllZFJlc3VsdCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0eXBlb2YgdGhpcy5fbW9kaWZpZWRSZXN1bHQgIT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy5fbW9kaWZpZWRSZXN1bHRcbiAgICBpZiAodGhpcy5mbGF0RGljZU1vZGlmaWVyKSB7XG4gICAgICBjb25zdCBtb2RpZmllZCA9IHRoaXMuZGljZXMudG90YWwgKyB0aGlzLmZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGlmIChtb2RpZmllZCA8IDEpIHJldHVybiAxXG4gICAgICBpZiAobW9kaWZpZWQgPiAxMDApIHJldHVybiAxMDBcbiAgICAgIHJldHVybiBtb2RpZmllZFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kaWNlcy50b3RhbFxuICB9XG5cbiAgc2V0IG1vZGlmaWVkUmVzdWx0ICh4KSB7XG4gICAgdGhpcy5fbW9kaWZpZWRSZXN1bHQgPSB4XG4gIH1cblxuICBnZXQgZmxhdERpY2VNb2RpZmllclN0cmluZyAoKSB7XG4gICAgaWYgKCF0aGlzLmZsYXREaWNlTW9kaWZpZXIpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuZmxhdERpY2VNb2RpZmllciA+IDApIHJldHVybiBgKyR7dGhpcy5mbGF0RGljZU1vZGlmaWVyfWBcbiAgICByZXR1cm4gdGhpcy5mbGF0RGljZU1vZGlmaWVyLnRvU3RyaW5nKClcbiAgfVxuXG4gIGdldCBpc0Z1bWJsZSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLm1vZGlmaWVkUmVzdWx0ID49IHRoaXMuZnVtYmxlVGhyZXNob2xkXG4gIH1cblxuICBnZXQgaXNDcml0aWNhbCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxXG4gIH1cblxuICBnZXQgaXNFeHRyZW1lU3VjY2VzcyAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWVcbiAgfVxuXG4gIGdldCBwYXNzZWQgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5sdWNrU3BlbnQpIHJldHVybiB0aGlzLmRpZmZpY3VsdHkgPD0gdGhpcy5zdWNjZXNzTGV2ZWxcbiAgICByZXR1cm4gdGhpcy5zdWNjZXNUaHJlc2hvbGQgPj0gdGhpcy5tb2RpZmllZFJlc3VsdCB8fCB0aGlzLmlzQ3JpdGljYWxcbiAgfVxuXG4gIGdldCBmYWlsZWQgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gIXRoaXMucGFzc2VkXG4gIH1cblxuICBnZXQgaXNTaW1wbGVSb2xsICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMucmF3VmFsdWUgPT09ICd1bmRlZmluZWQnXG4gIH1cblxuICBnZXQgaGFzQm9udXMgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzUGVuYWx0eSAoKSB7XG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyIDwgMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNNb2RpZmllciAoKSB7XG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyICE9PSAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGRpY2VNb2RpZmllciAoKSB7XG4gICAgaWYgKHRoaXMuX2RpY2VNb2RpZmllcikgcmV0dXJuIHRoaXMuX2RpY2VNb2RpZmllclxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzZXQgZGljZU1vZGlmaWVyICh4KSB7XG4gICAgdGhpcy5fZGljZU1vZGlmaWVyID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLnNob3J0TmFtZVxuICAgICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5uYW1lXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHRoaXMuY2hhcmFjdGVyaXN0aWMpPy5sYWJlbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ2xjaycpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JylcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzaG9ydE5hbWUgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy5za2lsbCkgcmV0dXJuIHRoaXMuc2tpbGwuc2hvcnROYW1lXG4gICAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLm5hbWVcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXModGhpcy5jaGFyYWN0ZXJpc3RpYyk/LnNob3J0XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnbGNrJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnc2FuJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGZ1bGxOYW1lICgpIHtcbiAgICBjb25zdCBkaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMuX2RpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICA/IGZhbHNlXG4gICAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcodGhpcy5fZGlmZmljdWx0eSlcbiAgICBjb25zdCBtb2RpZmllciA9XG4gICAgICB0aGlzLl9kaWNlTW9kaWZpZXIgPiAwXG4gICAgICAgID8gYCske3RoaXMuX2RpY2VNb2RpZmllcn1gXG4gICAgICAgIDogdGhpcy5fZGljZU1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgIGBDb0M3LkxpbmtDaGVjayR7IWRpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30ke1xuICAgICAgICAhdGhpcy5fZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICB9YCxcbiAgICAgIHsgZGlmZmljdWx0eSwgbW9kaWZpZXIsIG5hbWU6IHRoaXMubmFtZSB9XG4gICAgKVxuICB9XG5cbiAgZ2V0IHJvbGxlZCAoKSB7XG4gICAgaWYgKHRoaXMuZGljZSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBjaGVjayBmcm9tIGFuIEhUTUxFbGVtZW50IG9yIGEgY2hhdCBjYXJkLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICBUaGUgSFRNTEVsZW1lbnQgdGhhdCBpcyBhIHJvbGwtcmVzdWx0IG9yIGEgY2hhdCBjYXJkIGNvbnRhaW5pbmcgYSBzaW5nbGUgcm9sbC1yZXN1bHQuXG4gICAqIEByZXR1cm4ge0NvQzdDaGVja30gICAgICBBIENvQzdDaGVjay5cbiAgICovXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHJvbGxSZXN1bHQgPSBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1yZXN1bHQnKVxuICAgICAgPyBjYXJkXG4gICAgICA6IGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIENvQzdSb2xsLmdldEZyb21FbGVtZW50KHJvbGxSZXN1bHQsIGNoZWNrKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjaGVjay5tZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwdXNoIChjYXJkLCBwdWJsaXNoID0gdHJ1ZSkge1xuICAgIGNvbnN0IG9sZENoZWNrID0gQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpIC8vIFRPRE86IFJlZmFjdG9yaW5nXG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICA/IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3Qgc2tpbGxJZCA9IGNhcmQuZGF0YXNldC5za2lsbElkXG4gICAgY29uc3QgY2hhcmFjID0gY2FyZC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgY29uc3QgaXRlbUlkID0gY2FyZC5kYXRhc2V0Lml0ZW1JZFxuICAgIGNvbnN0IGRpY2VNb2QgPSBjYXJkLmRhdGFzZXQuZGljZU1vZFxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBjYXJkLmRhdGFzZXQuZGlmZmljdWx0eVxuXG4gICAgbGV0IHB1c2hlZFJvbGxcbiAgICBpZiAoc2tpbGxJZCkge1xuICAgICAgcHVzaGVkUm9sbCA9IG5ldyBDb0M3Q2hlY2soYWN0b3JJZCwgc2tpbGxJZCwgaXRlbUlkLCBkaWNlTW9kLCBkaWZmaWN1bHR5KVxuICAgIH0gZWxzZSBpZiAoY2hhcmFjKSB7XG4gICAgICBwdXNoZWRSb2xsID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBwdXNoZWRSb2xsLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICAgIHB1c2hlZFJvbGwuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgIHB1c2hlZFJvbGwuYWN0b3IgPSBhY3RvcklkXG4gICAgICBwdXNoZWRSb2xsLmNoYXJhY3RlcmlzdGljID0gY2hhcmFjXG4gICAgfSBlbHNlIHJldHVyblxuICAgIGlmIChvbGRDaGVjay51dWlkKSB7XG4gICAgICBwdXNoZWRSb2xsLmNvbnRleHQgPSBvbGRDaGVjay5jb250ZXh0XG4gICAgICBwdXNoZWRSb2xsLnV1aWQgPSBvbGRDaGVjay51dWlkXG4gICAgfVxuICAgIGlmIChvbGRDaGVjay5wYXJlbnQpIHB1c2hlZFJvbGwucGFyZW50ID0gb2xkQ2hlY2sucGFyZW50XG4gICAgcHVzaGVkUm9sbC5wdXNoaW5nID0gdHJ1ZVxuICAgIGF3YWl0IHB1c2hlZFJvbGwucm9sbCgpXG4gICAgaWYgKG9sZENoZWNrLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbyA9IGF3YWl0IGdhbWUubWVzc2FnZXMuZ2V0KG9sZENoZWNrLm1lc3NhZ2VJZClcbiAgICAgIGlmICh0eXBlb2Ygby5yb2xscz8uWzBdPy5vcHRpb25zPy5jb2M3UmVzdWx0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBvLnJvbGxzWzBdLm9wdGlvbnMuY29jN1Jlc3VsdC5wdXNoaW5nID0gdHJ1ZVxuICAgICAgICBhd2FpdCBvLnVwZGF0ZSh7XG4gICAgICAgICAgcm9sbHM6IG8ucm9sbHNcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHB1Ymxpc2gpIHB1c2hlZFJvbGwudG9NZXNzYWdlKHRydWUsIGNhcmQpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIHNldCBhY3RvciAoeCkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSB4XG4gICAgaWYgKHggPT0gbnVsbCkge1xuICAgICAgdGhpcy5fYWN0b3IgPSB4XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoeCBpbnN0YW5jZW9mIEFjdG9yKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHRoaXMuX2FjdG9yID0geFxuICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0aGlzLmFjdG9yLm5hbWVcbiAgICAgIGlmICh4LnRva2VuICYmIHgudG9rZW4uc2NlbmUgJiYgeC50b2tlbi5zY2VuZS5pZCkge1xuICAgICAgICB0aGlzLmFjdG9yS2V5ID0gYCR7eC50b2tlbi5zY2VuZS5pZH0uJHt4LnRva2VuLmlkfWBcbiAgICAgIH0gZWxzZSB0aGlzLmFjdG9yS2V5ID0geC5pZCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh4LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHguc3BsaXQoJy4nKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHRoaXMuX2FjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICB0aGlzLl9hY3Rvci5hbGlhcyA9IHRoaXMuX2FjdG9yLm5hbWUgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm5cbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgdGhpcy5fYWN0b3IgPSB0b2tlbi5hY3RvclxuICAgICAgICB0aGlzLl9hY3Rvci5hbGlhcyA9IHRva2VuLm5hbWVcbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuX2FjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHgpXG4gICAgdGhpcy5hY3Rvci5hbGlhcyA9IHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHN1Y2Nlc3NMZXZlbEljb25zICgpIHtcbiAgICBpZiAodGhpcy51bmtub3duRGlmZmljdWx0eSkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwgJiYgdGhpcy5fcmF3VmFsdWUgIT09IDApIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3VjY2Vzc0xldmVsID49IHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgY29uc3QgaWNvbnMgPSBbXVxuICAgICAgZm9yIChcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgaW5kZXggPCB0aGlzLnN1Y2Nlc3NMZXZlbCAtIHRoaXMuZGlmZmljdWx0eSArIDE7XG4gICAgICAgIGluZGV4KytcbiAgICAgICkge1xuICAgICAgICBpY29ucy5wdXNoKHRoaXMuaXNDcml0aWNhbCA/ICdtZWRhbCcgOiAnc3RhcicpXG4gICAgICB9XG4gICAgICBjb25zdCBzdWNjZXNzSGludCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3VjY2VzTGV2ZWxIaW50Jywge1xuICAgICAgICB2YWx1ZTogdGhpcy5zdWNjZXNzTGV2ZWwgLSB0aGlzLmRpZmZpY3VsdHkgKyAxXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgY3NzQ2xhc3M6IHRoaXMuaXNDcml0aWNhbCA/ICdjcml0aWNhbCcgOiAnc3VjY2VzcycsXG4gICAgICAgIGhpbnQ6IHN1Y2Nlc3NIaW50LFxuICAgICAgICBpY29uc1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpY29ucyA9IFtdXG4gICAgICBjb25zdCBzdWNjZXNzTGV2ZWwgPSB0aGlzLmlzRnVtYmxlID8gLTEgOiB0aGlzLnN1Y2Nlc3NMZXZlbFxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuZGlmZmljdWx0eSAtIHN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICBpY29ucy5wdXNoKHRoaXMuaXNGdW1ibGUgPyAnc2t1bGwnIDogJ3NwaWRlcicpXG4gICAgICB9XG4gICAgICBjb25zdCBmYWlsdXJlSGludCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZUxldmVsSGludCcsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZGlmZmljdWx0eSAtIHN1Y2Nlc3NMZXZlbFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBjc3NDbGFzczogdGhpcy5pc0Z1bWJsZSA/ICdmdW1ibGUnIDogJ2ZhaWx1cmUnLFxuICAgICAgICBoaW50OiBmYWlsdXJlSGludCxcbiAgICAgICAgaWNvbnNcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgdW5rbm93bkRpZmZpY3VsdHkgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5Q3JpdGljYWwgfHxcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5RXh0cmVtZSB8fFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlIYXJkIHx8XG4gICAgICB0aGlzLmdtRGlmZmljdWx0eVJlZ3VsYXJcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSB0aGlzLmRpZmZpY3VsdHlcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgc2V0IHNraWxsICh4KSB7XG4gICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9nZXRJdGVtRnJvbUlkKHgpXG4gICAgdGhpcy5za2lsbElkID0geFxuICB9XG5cbiAgc2V0IGl0ZW0gKHgpIHtcbiAgICB0aGlzLl9pdGVtID0gdGhpcy5fZ2V0SXRlbUZyb21JZCh4KVxuICAgIGlmICh0aGlzLl9pdGVtPy50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgdGhpcy5pdGVtSWQgPSB4XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2l0ZW0gPSB1bmRlZmluZWRcbiAgICAgIHRoaXMuaXRlbUlkID0gdW5kZWZpbmVkXG4gICAgfVxuICB9XG5cbiAgX2dldEl0ZW1Gcm9tSWQgKHgpIHtcbiAgICBpZiAoeCA9PSBudWxsKSByZXR1cm4gbnVsbFxuICAgIGlmICh4IGluc3RhbmNlb2YgSXRlbSkgcmV0dXJuIHhcbiAgICBpZiAodGhpcy5fYWN0b3IpIHJldHVybiB0aGlzLl9hY3Rvci5pdGVtcy5nZXQoeClcbiAgICByZXR1cm4gZ2FtZS5pdGVtcy5nZXQoeClcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl9hY3RvciB8fCAhdGhpcy5fYWN0b3I/LmlkKSB7XG4gICAgICBpZiAodGhpcy5hY3RvcktleSkgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICh0aGlzLmFjdG9ySWQpIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcklkKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICghdGhpcy5fYWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpc0R1bW15OiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRoaXMuYWN0b3JOYW1lID8gdGhpcy5hY3Rvck5hbWUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpbWc6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZycsXG4gICAgICAgICAgcG9ydHJhaXQ6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5fYWN0b3IuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gbmV3IENvQ0FjdG9yKHRoaXMuX2FjdG9yKVxuICAgICAgdGhpcy5fYWN0b3IgPSBhY3RvclxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgaWYgKCF0aGlzLl9za2lsbCAmJiB0aGlzLnNraWxsSWQpIHtcbiAgICAgIHRoaXMuX3NraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9za2lsbCAmJiB0aGlzLml0ZW0pIHtcbiAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnNraWxsKSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnNraWxsLm1haW4uaWQgJiYgIXRoaXMud2VhcG9uQWx0U2tpbGwpIHtcbiAgICAgICAgICB0aGlzLl9za2lsbCA9IHRoaXMuX2FjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW0uc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgdGhpcy5pdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkICYmXG4gICAgICAgICAgdGhpcy53ZWFwb25BbHRTa2lsbFxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLl9za2lsbCA9IHRoaXMuX2FjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc2tpbGxcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuX2l0ZW0gJiYgdGhpcy5pdGVtSWQgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgdGhpcy5faXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXRlbVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlSZXN1bHRUeXBlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheVJlc3VsdFR5cGUnKVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcpXG4gIH1cblxuICBnZXQgZGlzcGxheUJvdGhTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiB0aGlzLmRpc3BsYXlSZXN1bHRUeXBlICYmIHRoaXMuZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsXG4gIH1cblxuICBnZXQgZG9udERpc3BsYXlTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiAhdGhpcy5kaXNwbGF5UmVzdWx0VHlwZSAmJiAhdGhpcy5kaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWxcbiAgfVxuXG4gIGdldCBpbWFnZSAoKSB7XG4gICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLmltZ1xuICAgIGlmICh0aGlzLml0ZW0pIHJldHVybiB0aGlzLml0ZW0uaW1nXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGxpbmsgKCkge1xuICAgIHJldHVybiB0aGlzLmdldExpbmtFbGVtZW50KCkub3V0ZXJIVE1MXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldExpbmtFbGVtZW50IChjbGFzc2VzID0gbnVsbCkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBjbHM6IFsnY29jNy1saW5rJywgJ2NvYzctcm9sbCddLmNvbmNhdChjbGFzc2VzKSxcbiAgICAgIGRhdGFzZXQ6IHsgY2hlY2s6ICdjaGVjaycgfSxcbiAgICAgIGljb246IHRoaXMuaW1hZ2VcbiAgICAgICAgPyBgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgke3RoaXMuaW1hZ2V9KVwiPjwvZGl2PmBcbiAgICAgICAgOiAnPGkgY2xhc3M9XCJmYXMgZmEtZGljZVwiPjwvaT4nLFxuICAgICAgYmxpbmQ6IHRoaXMuaXNCbGluZFxuICAgIH1cblxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyh0aGlzLl9kaWZmaWN1bHR5KVxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgIGBDb0M3LkxpbmtDaGVjayR7IXRoaXMuX2RpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30ke1xuICAgICAgICAhdGhpcy5fZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICB9YCxcbiAgICAgIHtcbiAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgbW9kaWZpZXI6IHRoaXMuX2RpY2VNb2RpZmllcixcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgICB9XG4gICAgKVxuXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGEudGl0bGUgPSB0aXRsZVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgICBhLmlubmVySFRNTCA9IGAke2RhdGEuYmxpbmQgPyAnPGkgY2xhc3M9XCJmYXMgZmEtZXllLXNsYXNoXCI+PC9pPicgOiAnJ30ke1xuICAgICAgZGF0YS5pY29uXG4gICAgfSR7dGhpcy5uYW1lfWBcblxuICAgIHJldHVybiBhXG4gIH1cblxuICBhc3luYyByb2xsIChkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKG9wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgY2hlY2sgd2l0aCB0aGUgcHJvdmlkZWQgZGF0YVxuICAgKiBQcm9jZXNzIHJvbGwgZGF0YSB0byBhIGZvcm1hdCB0aGF0IGNhbiBiZSBmZWQgdG8gY3JlYXRlKClcbiAgICogQHBhcmFtIHsqfSByb2xsRGF0YSBBIHJvbGwgZGF0YSBzdHJ1Y3R1cmUgYXMgcmV0dXJuZWQgYnkgYWN0b3IuZmluZFxuICAgKiBAcmV0dXJucyBBIGNoZWNrIHdpdGggdGhlIHJvbGwgZGF0YSBwcm92aWRlZFxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUZyb21BY3RvclJvbGxEYXRhIChyb2xsRGF0YSkge1xuICAgIGNvbnN0IHJvbGwgPSB7fVxuICAgIC8vIGNoZWNrIE1vZGlmaWVyXG4gICAgaWYgKHJvbGxEYXRhLmRpZmZpY3VsdHkpIHJvbGwuZGlmZmljdWx0eSA9IHJvbGxEYXRhLmRpZmZpY3VsdHlcbiAgICBpZiAocm9sbERhdGEuZGljZU1vZGlmaWVyKSByb2xsLmRpY2VNb2RpZmllciA9IHJvbGxEYXRhLmRpY2VNb2RpZmllclxuICAgIGlmIChyb2xsRGF0YS5kZW55UHVzaCA9PT0gdHJ1ZSkgcm9sbC5kZW55UHVzaCA9IHRydWVcbiAgICBpZiAocm9sbERhdGEuZmxhdERpY2VNb2RpZmllcikge1xuICAgICAgcm9sbC5mbGF0RGljZU1vZGlmaWVyID0gcm9sbERhdGEuZmxhdERpY2VNb2RpZmllclxuICAgIH1cbiAgICBpZiAocm9sbERhdGEuZmxhdFRocmVzaG9sZE1vZGlmaWVyKSB7XG4gICAgICByb2xsLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IHJvbGxEYXRhLmZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIH1cbiAgICAvLyBBY3RvclxuICAgIGlmIChyb2xsRGF0YS5hY3Rvcj8uYWN0b3JLZXkpIHJvbGwuYWN0b3JLZXkgPSByb2xsRGF0YS5hY3Rvci5hY3RvcktleVxuICAgIGVsc2UgaWYgKHJvbGxEYXRhLmFjdG9yPy5uYW1lKSByb2xsLmFjdG9yTmFtZSA9IHJvbGxEYXRhLmFjdG9yLm5hbWVcbiAgICAvLyBDaGVjayB0eXBlXG4gICAgc3dpdGNoIChyb2xsRGF0YS50eXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay50eXBlLmNoYXJhY3RlcmlzdGljOlxuICAgICAgICByb2xsLmNoYXJhY3RlcmlzdGljID0gcm9sbERhdGEudmFsdWU/LmtleVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5hdHRyaWJ1dGU6XG4gICAgICAgIHJvbGwuYXR0cmlidXRlID0gcm9sbERhdGEudmFsdWU/LmtleVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5pdGVtOlxuICAgICAgICByb2xsLmFjdG9yS2V5ID0gcm9sbERhdGEudmFsdWUuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgaWYgKHJvbGxEYXRhLnZhbHVlPy50eXBlID09PSAnc2tpbGwnKSByb2xsLnNraWxsID0gcm9sbERhdGEudmFsdWUuaWRcbiAgICAgICAgZWxzZSByb2xsLml0ZW0gPSByb2xsRGF0YS52YWx1ZS5pZFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5za2lsbDpcbiAgICAgICAgcm9sbC5hY3RvcktleSA9IHJvbGxEYXRhLnZhbHVlLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIHJvbGwuc2tpbGwgPSByb2xsRGF0YS52YWx1ZS5pZFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS52YWx1ZTpcbiAgICAgICAgcm9sbC5kaXNwbGF5TmFtZSA9IHJvbGxEYXRhLnZhbHVlLm5hbWVcbiAgICAgICAgcm9sbC5yYXdWYWx1ZSA9IHJvbGxEYXRhLnZhbHVlLnRocmVzaG9sZFxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5jcmVhdGUocm9sbClcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGUgKHtcbiAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyLFxuICAgIGRpY2VNb2RpZmllciA9IG51bGwsXG4gICAgYWN0b3JLZXkgPSBudWxsLFxuICAgIGNoYXJhY3RlcmlzdGljID0gbnVsbCxcbiAgICBhdHRyaWJ1dGUgPSBudWxsLFxuICAgIHJhd1ZhbHVlID0gMCxcbiAgICBpdGVtID0gbnVsbCxcbiAgICBza2lsbCA9IG51bGwsXG4gICAgZmxhdERpY2VNb2RpZmllciA9IDAsXG4gICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gMCxcbiAgICBkaXNwbGF5TmFtZSA9IG51bGwsXG4gICAgYWN0b3JOYW1lID0gbnVsbCxcbiAgICBkZW55UHVzaCA9IHVuZGVmaW5lZFxuICB9ID0ge30pIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgaWYgKGRlbnlQdXNoID09PSB0cnVlKSBjaGVjay5kZW55UHVzaCA9IHRydWVcbiAgICBpZiAoZGljZU1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXJcbiAgICBpZiAoZmxhdERpY2VNb2RpZmllcikgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICBpZiAoZmxhdFRocmVzaG9sZE1vZGlmaWVyKSB7XG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICB9XG4gICAgaWYgKGRpc3BsYXlOYW1lKSBjaGVjay5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lXG4gICAgaWYgKGFjdG9yS2V5KSBjaGVjay5hY3RvciA9IGFjdG9yS2V5XG4gICAgaWYgKGFjdG9yTmFtZSkgY2hlY2suYWN0b3JOYW1lID0gYWN0b3JOYW1lXG4gICAgaWYgKCFpc05hTihOdW1iZXIocmF3VmFsdWUpKSkgY2hlY2sucmF3VmFsdWUgPSBOdW1iZXIocmF3VmFsdWUpXG4gICAgaWYgKGNoZWNrLmFjdG9yICYmICFjaGVjay5hY3Rvci5pc0R1bW15KSB7XG4gICAgICAvLyBUT0RPIDogQWRkIGNoZWNrIGZvciB2YWxpZGl0eSBvZiBjaGFyYWN0ZXJpc3RpYywgYXR0cmlidXRlLCBza2lsbElkXG4gICAgICBpZiAoc2tpbGwpIGNoZWNrLnNraWxsID0gc2tpbGxcbiAgICAgIC8vIFRPRE8gOiB0cnkgcmV0cmlldmUgc2tpbGwgYnkgbmFtZVxuICAgICAgZWxzZSBpZiAoY2hhcmFjdGVyaXN0aWMpIGNoZWNrLmNoYXJhY3RlcmlzdGljID0gY2hhcmFjdGVyaXN0aWNcbiAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZSkgY2hlY2suYXR0cmlidXRlID0gYXR0cmlidXRlXG4gICAgICBlbHNlIGlmIChpdGVtKSBjaGVjay5pdGVtID0gaXRlbVxuICAgIH1cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpYyAoY2hhciwgZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XG4gICAgaWYgKGRpY2VNb2QpIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBhc3luYyByb2xsQXR0cmlidXRlIChhdHRyaWIsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuYXR0cmlidXRlID0gYXR0cmliXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgYXN5bmMgcm9sbFZhbHVlICh2YWwsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMucmF3VmFsdWUgPSB2YWxcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBnZXQgcm9sbGVkU3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdWNjZXNzTGV2ZWxcbiAgfVxuXG4gIGFzeW5jIF9wZXJmb3JtIChvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRpY2UgPVxuICAgICAgb3B0aW9ucy5yb2xsIHx8XG4gICAgICAoYXdhaXQgQ29DN0RpY2Uucm9sbCh0aGlzLmRpY2VNb2RpZmllciwgdGhpcy5yb2xsTW9kZSwgdGhpcy5pc0JsaW5kKSlcbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50ICYmICFnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBBdWRpb0hlbHBlci5wbGF5KHsgc3JjOiBDT05GSUcuc291bmRzLmRpY2UgfSwgdHJ1ZSlcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5mb3JjZURTTikge1xuICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5kaWNlLnJvbGwpXG4gICAgfVxuXG4gICAgdGhpcy5kaWNlcyA9IHtcbiAgICAgIHRlbnM6IFtdLFxuICAgICAgdW5pdDoge1xuICAgICAgICB2YWx1ZTogdGhpcy5kaWNlLnVuaXQudG90YWxcbiAgICAgIH0sXG4gICAgICB0b3RhbDogdGhpcy5kaWNlLnRvdGFsLFxuICAgICAgdGVuUmVzdWx0OiB0aGlzLmRpY2UudG90YWwgLSB0aGlzLmRpY2UudW5pdC50b3RhbCxcbiAgICAgIGhhc0JvbnVzOiAhIXRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgYm9udXM6IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKSxcbiAgICAgIGJvbnVzVHlwZTpcbiAgICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPCAwXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllclBlbmFsdHknKVxuICAgICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJCb251cycpLFxuICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5XG4gICAgfVxuXG4gICAgY29uc3QgbWF4ID0gdGhpcy5kaWNlLnVuaXQudG90YWwgPT09IDAgPyAxMDAgOiA5MFxuICAgIGNvbnN0IG1pbiA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAgOiAwXG4gICAgbGV0IHNlbGVjdGVkID0gdGhpcy5kaWNlLnRvdGFsIC0gdGhpcy5kaWNlLnVuaXQudG90YWxcbiAgICBsZXQgZmlyc3RWYWx1ZSA9IChzZWxlY3RlZCA9PT0gMCA/IDEwIDogTWF0aC5mbG9vcihzZWxlY3RlZCAvIDEwKSlcbiAgICBmb3IgKGNvbnN0IGQgb2YgdGhpcy5kaWNlLnJvbGwuZGljZSkge1xuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XG4gICAgICAgIGlmIChkLnJlc3VsdHNbMF0ucmVzdWx0ID09PSBmaXJzdFZhbHVlKSB7XG4gICAgICAgICAgZmlyc3RWYWx1ZSA9IC0xXG4gICAgICAgICAgZC5yZXN1bHRzWzBdLmFjdGl2ZSA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkLnJlc3VsdHNbMF0uYWN0aXZlID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmRpY2Uucm9sbC5fdG90YWwgPSB0aGlzLmRpY2UudG90YWxcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGljZS50ZW5zLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpZSA9IHt9XG4gICAgICBkaWUudmFsdWUgPSB0aGlzLmRpY2UudGVucy5yZXN1bHRzW2ldXG4gICAgICBpZiAoZGllLnZhbHVlID09PSBzZWxlY3RlZCkge1xuICAgICAgICBzZWxlY3RlZCA9IDEwMVxuICAgICAgICBkaWUuc2VsZWN0ZWQgPSB0cnVlXG4gICAgICAgIGlmICh0aGlzLmRpY2VzLmhhc0JvbnVzKSB7XG4gICAgICAgICAgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1heCkgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1pbikgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICB9XG4gICAgICAvLyBpZiggZGllLnZhbHVlID09IDEwMCkgZGllLnZhbHVlID0gXCIwMFwiO1xuICAgICAgdGhpcy5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgIH1cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gIH1cblxuICBhc3luYyBpbmNyZWFzZUx1Y2tTcGVuZCAobHVja0Ftb3VudCkge1xuICAgIGNvbnN0IHNwZW5kaW5nQW1vdW50ID0gcGFyc2VJbnQobHVja0Ftb3VudCwgMTApXG4gICAgdGhpcy50b3RhbEx1Y2tTcGVudCA9IHBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQgPz8gMCwgMTApICsgc3BlbmRpbmdBbW91bnRcbiAgICBjb25zdCBtb2RpZmllZFJlc3VsdCA9IE1hdGgubWF4KDEsIHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgIGlmIChtb2RpZmllZFJlc3VsdCA9PT0gMSkge1xuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgfSBlbHNlIGlmIChtb2RpZmllZFJlc3VsdCA8PSB0aGlzLmV4dHJlbWVUaHJlc2hvbGQpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gICAgfSBlbHNlIGlmIChtb2RpZmllZFJlc3VsdCA8PSB0aGlzLmhhcmRUaHJlc2hvbGQpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkXG4gICAgfSBlbHNlIGlmIChtb2RpZmllZFJlc3VsdCA8PSB0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhclxuICAgIH0gZWxzZSBpZiAodGhpcy5mdW1ibGVUaHJlc2hvbGQgPD0gbW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGVcbiAgICB9IGVsc2UgaWYgKG1vZGlmaWVkUmVzdWx0ID4gdGhpcy5yYXdWYWx1ZSkge1xuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGlmZmljdWx0eSA8PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IGZhbHNlXG4gICAgfVxuICAgIHRoaXMubHVja1NwZW50ID0gdHJ1ZVxuICAgIGxldCByZW1vdmUgPSAwXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBtYXhJbmRleCA9IHRoaXMuaW5jcmVhc2VTdWNjZXNzLmxlbmd0aDsgaW5kZXggPCBtYXhJbmRleDsgaW5kZXgrKykge1xuICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3NbaW5kZXhdLmx1Y2tUb1NwZW5kID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3NbaW5kZXhdLmx1Y2tUb1NwZW5kIC0gc3BlbmRpbmdBbW91bnRcbiAgICAgIGlmICh0aGlzLmluY3JlYXNlU3VjY2Vzc1tpbmRleF0ubHVja1RvU3BlbmQgPCAxKSB7XG4gICAgICAgIHJlbW92ZSsrXG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByZW1vdmU7IGluZGV4KyspIHtcbiAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnNoaWZ0KClcbiAgICB9XG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICB9XG5cbiAgYXN5bmMgY29tcHV0ZUNoZWNrICgpIHtcbiAgICB0aGlzLmlzVW5rbm93biA9IHRoaXMudW5rbm93bkRpZmZpY3VsdHlcblxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eVJlZ3VsYXIpIHtcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlIYXJkKSB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlFeHRyZW1lKSB7XG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5Q3JpdGljYWwpIHtcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWxcbiAgICB9XG5cbiAgICB0aGlzLnRlbk9ubHlPbmVEaWUgPSB0aGlzLmRpY2VzLnRlbnMubGVuZ3RoID09PSAxXG5cbiAgICB0aGlzLmlzVmFsdWUgPSBmYWxzZVxuICAgIHRoaXMuaXNDaGFyYWN0aXJpc3RpYyA9IGZhbHNlXG4gICAgdGhpcy5pc1NraWxsID0gZmFsc2VcbiAgICB0aGlzLmlzSXRlbSA9IGZhbHNlXG4gICAgdGhpcy5pc0F0dHJpYnV0ZSA9IGZhbHNlXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSB7XG4gICAgICB0aGlzLmRlbnlQdXNoID0gdHJ1ZVxuICAgICAgdGhpcy5kZW55THVjayA9IHRydWVcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWN0b3IgPT0gbnVsbCkge1xuICAgICAgdGhpcy5pc1ZhbHVlID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICB0aGlzLmlzQ2hhcmFjdGlyaXN0aWMgPSB0cnVlXG4gICAgICAgIHRoaXMucmF3VmFsdWUgPVxuICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS52YWx1ZVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5za2lsbCkge1xuICAgICAgICB0aGlzLmlzU2tpbGwgPSB0cnVlXG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLnNraWxsLnZhbHVlXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICB0aGlzLmlzQXR0cmlidXRlID0gdHJ1ZVxuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubHVja1NwZW50ICYmICF0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5yYXdWYWx1ZSkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhclxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5oYXJkVGhyZXNob2xkKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA8PSB0aGlzLmV4dHJlbWVUaHJlc2hvbGQpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5yYXdWYWx1ZSkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDEpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5mdW1ibGVUaHJlc2hvbGQgPD0gdGhpcy5tb2RpZmllZFJlc3VsdCkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlXG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZ1bWJsZScpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZTpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAodGhpcy51bmtub3duRGlmZmljdWx0eSkge1xuICAgICAgdGhpcy5zdWNjZXNzUmVxdWlyZWQgPSAnJ1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNTaW1wbGVSb2xsKSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3VjY2Vzc1JlcXVpcmVkJywge1xuICAgICAgICBzdWNjZXNzUmVxdWlyZWQ6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA9PT0gMSkge1xuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgfVxuICAgIGlmICghdGhpcy5sdWNrU3BlbnQgJiYgIXRoaXMuaXNVbmtub3duICYmICF0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgdGhpcy5pc0ZhaWx1cmUgPSB0aGlzLmZhaWxlZFxuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0aGlzLnBhc3NlZFxuICAgIH1cblxuICAgIHRoaXMuaGFzTWFsZnVuY3Rpb24gPSBmYWxzZVxuICAgIGlmICh0aGlzLmlzRnVtYmxlKSB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlXG5cbiAgICBpZiAodGhpcy5pdGVtKSB7XG4gICAgICB0aGlzLmlzSXRlbSA9IHRydWVcbiAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLm1hbGZ1bmN0aW9uKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBOdW1iZXIodGhpcy5tb2RpZmllZFJlc3VsdCkgPj0gTnVtYmVyKHRoaXMuaXRlbS5zeXN0ZW0ubWFsZnVuY3Rpb24pXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMuaGFzTWFsZnVuY3Rpb24gPSB0cnVlXG4gICAgICAgICAgdGhpcy5tYWxmdW5jdGlvblR4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFsZnVuY3Rpb24nLCB7XG4gICAgICAgICAgICBpdGVtTmFtZTogdGhpcy5pdGVtLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVJdGVtRmxhZyhDb0M3SXRlbS5mbGFncy5tYWxmdW5jdGlvbilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5jYW5CZVB1c2hlZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuY2FuQmVQdXNoZWQgPSB0aGlzLnNraWxsID8gdGhpcy5za2lsbC5jYW5CZVB1c2hlZCgpIDogZmFsc2VcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljICE9IG51bGwpIHRoaXMuY2FuQmVQdXNoZWQgPSB0cnVlXG4gICAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gICAgICBpZiAodGhpcy5kZW55UHVzaCkgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmRlbnlMdWNrICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIXRoaXMubHVja1NwZW50ICYmXG4gICAgICAgICF0aGlzLnBhc3NlZCAmJlxuICAgICAgICAhdGhpcy5pc0Z1bWJsZSAmJlxuICAgICAgICB0aGlzLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgJiZcbiAgICAgICAgIXRoaXMudW5rbm93bkRpZmZpY3VsdHlcbiAgICAgICkge1xuICAgICAgICBpZiAodGhpcy5za2lsbCB8fCB0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgY29uc3QgbHVja05lZWRlZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnN1Y2Nlc1RocmVzaG9sZFxuICAgICAgICAgIGlmICh0aGlzLmFjdG9yLmx1Y2sgPiBsdWNrTmVlZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0Vub3VnaEx1Y2sgPSB0cnVlXG4gICAgICAgICAgICB0aGlzLmx1Y2tOZWVkZWQgPSBsdWNrTmVlZGVkXG4gICAgICAgICAgICB0aGlzLmx1Y2tOZWVkZWRUeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZW5kTHVjaycsIHtcbiAgICAgICAgICAgICAgbHVja05lZWRlZFZhbHVlOiBsdWNrTmVlZGVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMubHVja1NwZW50KSB7XG4gICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzID0gW11cblxuICAgICAgICAvLyBDYW4ndCBzcGVuZCBsdWNrIG9uIHB1c2hlZCByb2xscy5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICF0aGlzLnB1c2hpbmcgJiZcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ2xjaycgJiZcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ3NhbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy51bmtub3duRGlmZmljdWx0eSAmJlxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0ge31cbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2tcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA8PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgJiZcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5oYXJkVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5leHRMZXZlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPD0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkICYmXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHlOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5FeHRyZW1lRGlmZmljdWx0eSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5leHRyZW1lVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgaWYgKG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2spIHtcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3MubGVuZ3RoID4gMFxuICAgICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gZmFsc2VcbiAgICB9XG4gICAgaWYgKHRoaXMuZGljZSkge1xuICAgICAgdGhpcy5kaWNlLnJvbGwub3B0aW9ucy5jb2M3UmVzdWx0ID0ge1xuICAgICAgICBzdWNjZXNzTGV2ZWw6IE9iamVjdC5rZXlzKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwpLmZpbmQoa2V5ID0+IENvQzdDaGVjay5zdWNjZXNzTGV2ZWxba2V5XSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpID8/ICd1bmtub3duJyxcbiAgICAgICAgZGlmZmljdWx0eVNldDogIXRoaXMuaXNVbmtub3duLFxuICAgICAgICBwYXNzZWQ6IHRoaXMucGFzc2VkLFxuICAgICAgICBwdXNoaW5nOiBmYWxzZSxcbiAgICAgICAgcHVzaGVkOiB0aGlzLnB1c2hpbmcsXG4gICAgICAgIGx1Y2tTcGVudDogdGhpcy50b3RhbEx1Y2tTcGVudCA/PyAwXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5tZXNzYWdlSWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBvID0gYXdhaXQgZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodHlwZW9mIG8ucm9sbHM/LlswXT8ub3B0aW9ucz8uY29jN1Jlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgby5yb2xsc1swXS5vcHRpb25zLmNvYzdSZXN1bHQubHVja1NwZW50ID0gdGhpcy50b3RhbEx1Y2tTcGVudCA/PyAwXG4gICAgICAgIGF3YWl0IG8udXBkYXRlKHtcbiAgICAgICAgICByb2xsczogby5yb2xsc1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY2FuQXdhcmRFeHBlcmllbmNlID1cbiAgICAgIHRoaXMuc2tpbGwgJiYgIXRoaXMuc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMubm94cGdhaW5cblxuICAgIGlmIChcbiAgICAgIHRoaXMucGFzc2VkICYmXG4gICAgICB0aGlzLmRpY2VNb2RpZmllciA8PSAwICYmXG4gICAgICB0aGlzLnNraWxsICYmXG4gICAgICAhdGhpcy5za2lsbC5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpbiAmJlxuICAgICAgIXRoaXMubHVja1NwZW50ICYmXG4gICAgICAhdGhpcy5mb3JjZWQgJiZcbiAgICAgICF0aGlzLmlzQmxpbmQgJiZcbiAgICAgICF0aGlzLmlzVW5rbm93blxuICAgICkge1xuICAgICAgdGhpcy5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IGF3YWl0IGZyb21VdWlkKHRoaXMucGFyZW50KVxuICAgICAgaWYgKHBhcmVudCAmJiAndXBkYXRlUm9sbCcgaW4gcGFyZW50KSB7XG4gICAgICAgIGF3YWl0IHBhcmVudC51cGRhdGVSb2xsKHRoaXMuSlNPTlJvbGxTdHJpbmcpXG4gICAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYFJvbGwgJHt0aGlzLnV1aWR9IGRlcGVuZHMgb2YgJHt0aGlzLnBhcmVudH1gKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNob3dEaWNlUm9sbCAoKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IGRpY2VSZXN1bHRzID0gW11cbiAgICAgIGZvciAoY29uc3QgZGllUmVzdWx0IG9mIHRoaXMuZGljZXMudGVucykge1xuICAgICAgICBkaWNlUmVzdWx0cy5wdXNoKGRpZVJlc3VsdC52YWx1ZSA9PT0gMTAwID8gMCA6IGRpZVJlc3VsdC52YWx1ZSAvIDEwKVxuICAgICAgfVxuICAgICAgZGljZVJlc3VsdHMucHVzaCh0aGlzLmRpY2VzLnVuaXQudmFsdWUpXG5cbiAgICAgIGNvbnN0IGRpY2VEYXRhID0ge1xuICAgICAgICBmb3JtdWxhOiBgJHt0aGlzLmRpY2VzLnRlbnMubGVuZ3RofWQxMDArMWQxMGAsXG4gICAgICAgIHJlc3VsdHM6IGRpY2VSZXN1bHRzLFxuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIGdhbWUuZGljZTNkLnNob3coZGljZURhdGEpXG4gICAgfVxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzICgpIHtcbiAgICBsZXQgY3NzQ2xhc3MgPSAnJ1xuICAgIGlmICh0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MgPSAnc3VjY2VzcydcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzID0gJ2ZhaWx1cmUnXG4gICAgaWYgKHRoaXMuaXNDcml0aWNhbCAmJiAhdGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzID0gJ3N1Y2Nlc3MgY3JpdGljYWwnXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUgJiYgIXRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcyA9ICdmYWlsdXJlIGZ1bWJsZSdcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MgKz0gJyByZWd1bGFyLXN1Y2Nlc3MnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcyArPSAnIGhhcmQtc3VjY2VzcydcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzICs9ICcgZXh0cmVtZS1zdWNjZXNzJ1xuICAgIH1cblxuICAgIHJldHVybiBjc3NDbGFzc1xuICB9XG5cbiAgZ2V0IGNzc0NsYXNzTGlzdCAoKSB7XG4gICAgY29uc3QgY3NzQ2xhc3MgPSBbXVxuICAgIGlmICh0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MucHVzaCgnc3VjY2VzcycpXG4gICAgaWYgKHRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcy5wdXNoKCdmYWlsdXJlJylcbiAgICBpZiAodGhpcy5pc0NyaXRpY2FsICYmICF0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MucHVzaCgnc3VjY2VzcycsICdjcml0aWNhbCcpXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUgJiYgIXRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcy5wdXNoKCdmYWlsdXJlJywgJ2Z1bWJsZScpXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2goJ3JlZ3VsYXItc3VjY2VzcycpXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKCdoYXJkLXN1Y2Nlc3MnKVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MucHVzaCgnZXh0cmVtZS1zdWNjZXNzJylcbiAgICB9XG5cbiAgICByZXR1cm4gY3NzQ2xhc3NcbiAgfVxuXG4gIGdldCBwbGF5ZXJDc3NDbGFzcyAoKSB7XG4gICAgaWYgKHRoaXMuaXNTdWNjZXNzIHx8IHRoaXMuZm9yY2VkU3VjY2VzcykgcmV0dXJuICdzdWNjZXNzJ1xuICAgIGlmICh0aGlzLmlzRmFpbHVyZSB8fCB0aGlzLmZvcmNlZEZhaWx1cmUpIHJldHVybiAnZmFpbHVyZSdcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgdXBncmFkZUNoZWNrICh1cGdyYWRlaW5kZXgsIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBpbmNyZWFzZWRTdWNjZXNzID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3NbdXBncmFkZWluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPVxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5sdWNrQW1vdW50KSB8fFxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5sdWNrVG9TcGVuZCkgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEVub3VnaEx1Y2snLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMudG90YWxMdWNrU3BlbnQgPSAhcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgID8gMFxuICAgICAgOiBwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgIHRoaXMudG90YWxMdWNrU3BlbnQgKz0gcGFyc2VJbnQobHVja0Ftb3VudClcbiAgICBjb25zdCBuZXdTdWNjZXNzTGV2ZWwgPVxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5uZXdTdWNjZXNzTGV2ZWwpIHx8XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmRpZmZpY3VsdHkpIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgaWYgKHRoaXMuZGlmZmljdWx0eSA8PSBuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdHJ1ZVxuICAgICAgdGhpcy5pc0ZhaWx1cmUgPSBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdXBncmFkZWluZGV4ICsgMTsgaW5kZXgrKykge1xuICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3Muc2hpZnQoKVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MpIHtcbiAgICAgIHMubHVja1RvU3BlbmQgPSBzLmx1Y2tUb1NwZW5kIC0gbHVja0Ftb3VudFxuICAgIH1cbiAgICB0aGlzLmx1Y2tTcGVudCA9IHRydWVcbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gICAgaWYgKHVwZGF0ZSkgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgcmVtb3ZlVXBncmFkZXMgKCkge1xuICAgIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmluY3JlYXNlU3VjY2VzcyA9IFtdXG4gICAgdGhpcy5sdWNrTmVlZGVkID0gMFxuICAgIHRoaXMubHVja05lZWRlZFR4dCA9IG51bGxcbiAgICB0aGlzLmNhbkJlUHVzaGVkID0gZmFsc2VcbiAgfVxuXG4gIGZvcmNlUGFzcyAobHVja0Ftb3VudCA9IG51bGwsIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBpZiAobHVja0Ftb3VudCkge1xuICAgICAgdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudClcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gdGhpcy5kaWZmaWN1bHR5XG4gICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MpIHtcbiAgICAgICAgcy5sdWNrVG9TcGVuZCA9IHMubHVja1RvU3BlbmQgLSBsdWNrQW1vdW50XG4gICAgICB9XG4gICAgICB0aGlzLmx1Y2tTcGVudCA9IHRydWVcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdHJ1ZVxuICAgICAgdGhpcy5pc0ZhaWx1cmUgPSBmYWxzZVxuICAgICAgdGhpcy50b3RhbEx1Y2tTcGVudCA9ICFwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgICAgICA/IDBcbiAgICAgICAgOiBwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgICAgdGhpcy50b3RhbEx1Y2tTcGVudCArPSBwYXJzZUludChsdWNrQW1vdW50KVxuICAgICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICAgICAgaWYgKHVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZm9yY2VkID0gdHJ1ZVxuICAgICAgdGhpcy5mb3JjZWRTdWNjZXNzID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuaXNVbmtub3duKSB7XG4gICAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyLCB1cGRhdGUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKHRoaXMuZGlmZmljdWx0eSwgdXBkYXRlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvcmNlRmFpbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIHRoaXMuZm9yY2VkID0gdHJ1ZVxuICAgIHRoaXMuZm9yY2VkRmFpbHVyZSA9IHRydWVcbiAgICBpZiAodGhpcy5pc1Vua25vd24pIHtcbiAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlLCB1cGRhdGUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwodGhpcy5kaWZmaWN1bHR5IC0gMSwgdXBkYXRlKVxuICAgIH1cbiAgfVxuXG4gIF9mb3JjZUNoZWNrIChoaWdoLCBsb3csIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgdG90YWwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaGlnaCAtIGxvdykpICsgbG93ICsgMVxuICAgIGNvbnN0IHVuaXRUb3RhbCA9IHRvdGFsICUgMTBcbiAgICBsZXQgdGVuVG90YWwgPSBNYXRoLmZsb29yKHRvdGFsIC8gMTApXG4gICAgY29uc3QgdGVucyA9IFtdXG5cbiAgICBsZXQgaGFzRW5vdWdoID0gTWF0aC5hYnModGhpcy5kaWNlTW9kaWZpZXIpID09PSB0ZW5zLmxlbmd0aFxuICAgIHdoaWxlICghaGFzRW5vdWdoKSB7XG4gICAgICBsZXQgdGVuID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG4gICAgICBsZXQgcm9sbCA9IHRlbiAqIDEwICsgdW5pdFRvdGFsXG4gICAgICBpZiAocm9sbCA9PT0gMCkge1xuICAgICAgICByb2xsID0gMTAwXG4gICAgICAgIHRlbiA9IDEwMFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzUGVuYWx0eSAmJiByb2xsIDw9IGhpZ2gpIHtcbiAgICAgICAgdGVucy5wdXNoKHRlbilcbiAgICAgICAgaWYgKHJvbGwgPiB0b3RhbCkgdG90YWwgPSByb2xsXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNCb251cyAmJiByb2xsID4gbG93KSB7XG4gICAgICAgIHRlbnMucHVzaCh0ZW4pXG4gICAgICAgIGlmIChyb2xsIDwgdG90YWwpIHRvdGFsID0gcm9sbFxuICAgICAgfVxuICAgICAgaGFzRW5vdWdoID0gdGVucy5sZW5ndGggPT09IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKVxuICAgIH1cblxuICAgIC8vIEluc2VydCByZXN1bHQgYXQgcmFuZG9tIHBvc2l0aW9uLlxuICAgIGlmICh0ZW5Ub3RhbCA9PT0gMTAgJiYgdW5pdFRvdGFsID09PSAwKSB7XG4gICAgICB0ZW5Ub3RhbCA9IDEwMFxuICAgIH1cbiAgICB0ZW5zLnNwbGljZShcbiAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRlbnMubGVuZ3RoICsgMSksXG4gICAgICAwLFxuICAgICAgdGVuVG90YWwgPT09IDEwID8gMCA6IHRlblRvdGFsXG4gICAgKVxuXG4gICAgdGhpcy5kaWNlcy50ZW5zID0gW11cbiAgICB0aGlzLmRpY2VzLnVuaXQudmFsdWUgPSB1bml0VG90YWxcbiAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID0gdG90YWxcbiAgICB0aGlzLmRpY2VzLnRvdGFsID0gdG90YWxcbiAgICB0aGlzLmRpY2VzLnRlblJlc3VsdCA9IHRvdGFsIC0gdW5pdFRvdGFsXG5cbiAgICBjb25zdCBtYXggPSB1bml0VG90YWwgPT09IDAgPyAxMDAgOiA5MFxuICAgIGNvbnN0IG1pbiA9IHVuaXRUb3RhbCA9PT0gMCA/IDEwIDogMFxuICAgIGxldCBzZWxlY3RlZCA9IHRvdGFsIC0gdW5pdFRvdGFsXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpZSA9IHt9XG4gICAgICBkaWUudmFsdWUgPSB0ZW5zW2ldXG4gICAgICBpZiAoZGllLnZhbHVlID09PSBzZWxlY3RlZCkge1xuICAgICAgICBzZWxlY3RlZCA9IDEwMVxuICAgICAgICBkaWUuc2VsZWN0ZWQgPSB0cnVlXG4gICAgICAgIGlmICh0aGlzLmhhc0JvbnVzKSB7XG4gICAgICAgICAgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1heCkgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1pbikgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICB9XG4gICAgICAvLyBpZiggZGllLnZhbHVlID09IDEwMCkgZGllLnZhbHVlID0gXCIwMFwiO1xuICAgICAgdGhpcy5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgIH1cblxuICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgICBpZiAodXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGZvcmNlU3VjY2Vzc0xldmVsIChzdWNjZXNzTGV2ZWwsIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgaGlnaCwgbG93XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSAxMDBcbiAgICAgIGxvdyA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGlmICh0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgPT09IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMSkge1xuICAgICAgICBoaWdoID0gMTAwXG4gICAgICB9IGVsc2UgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgICAgbG93ID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgbG93ID0gMVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbCA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gMVxuICAgICAgbG93ID0gMFxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gbG93KSBsb3ctLVxuICAgIGlmIChoaWdoID09PSAwKSBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcbiAgfVxuXG4gIGluY3JlYXNlU3VjY2Vzc0xldmVsICh1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IGhpZ2gsIGxvd1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICAgIGlmICh0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgPT09IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMSkge1xuICAgICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvdyA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuY3JpdGljYWxUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXG4gICAgICBsb3cgPSAwXG4gICAgfVxuICAgIGlmIChoaWdoID09PSBsb3cpIGxvdy0tXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcbiAgfVxuXG4gIGRlY3JlYXNlU3VjY2Vzc0xldmVsICh1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IGhpZ2gsIGxvd1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gMTAwXG4gICAgICBsb3cgPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICAgIGxvdyA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWwgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICBsb3cgPSAxXG4gICAgfVxuICAgIGlmIChoaWdoID09PSAwKSBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcbiAgfVxuXG4gIGFzeW5jIGZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIHRoaXMuZmxhZ2dlZEZvckRldmVsb3BtZW50ID0gdHJ1ZVxuICAgIGlmICh0aGlzLnNraWxsKSBhd2FpdCB0aGlzLnNraWxsLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICB9XG5cbiAgc2V0IGRpZmZpY3VsdHkgKHgpIHtcbiAgICB0aGlzLl9kaWZmaWN1bHR5ID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGlmZmljdWx0eVxuICB9XG5cbiAgc2V0IGZsYXZvciAoeCkge1xuICAgIHRoaXMuX2ZsYXZvciA9IHhcbiAgfVxuXG4gIHNldCBjb250ZXh0ICh4KSB7XG4gICAgdGhpcy5fY29udGV4dCA9IHhcbiAgfVxuXG4gIGdldCBjb250ZXh0ICgpIHtcbiAgICBpZiAoIXRoaXMuX2NvbnRleHQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dFxuICB9XG5cbiAgc2V0IHBhcmVudCAoeCkge1xuICAgIGlmICghdGhpcy51dWlkKSB0aGlzLnV1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgIHRoaXMucGFyZW50VXVpZCA9IHhcbiAgfVxuXG4gIGdldCBwYXJlbnQgKCkge1xuICAgIGlmICghdGhpcy5wYXJlbnRVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMucGFyZW50VXVpZFxuICB9XG5cbiAgZ2V0IGZsYXZvciAoKSB7XG4gICAgaWYgKHRoaXMuX2ZsYXZvcikgcmV0dXJuIHRoaXMuX2ZsYXZvclxuICAgIGxldCBmbGF2b3IgPSAnJ1xuICAgIGlmICh0aGlzLmFjdG9yPy5zeXN0ZW0pIHtcbiAgICAgIGlmICh0aGlzLnNraWxsKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5za2lsbC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLml0ZW0pIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JdGVtQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgaXRlbTogdGhpcy5pdGVtLm5hbWUsXG4gICAgICAgICAgc2tpbGw6IHRoaXMuc2tpbGwubmFtZSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10ubGFiZWxcbiAgICAgICAgICApLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICBgQ29DNy4ke3RoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLmxhYmVsfWBcbiAgICAgICAgICApLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWZsYXZvcikge1xuICAgICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmF3VmFsdWUnLCB7XG4gICAgICAgICAgICByYXd2YWx1ZTogdGhpcy5yYXdWYWx1ZSxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5wdXNoaW5nKSB7XG4gICAgICBmbGF2b3IgPSBgJHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlB1c2hpbmcnKX0gJHtmbGF2b3J9YFxuICAgIH1cblxuICAgIHJldHVybiBmbGF2b3JcbiAgfVxuXG4gIGdldCB0b29sdGlwSGVhZGVyICgpIHtcbiAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICBgQ29DNy4ke3RoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLmxhYmVsfWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlfSUpYFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLmxhYmVsXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICApICtcbiAgICAgICAgYCAoJHt0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLnNraWxsKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5za2lsbC5uYW1lXG4gICAgICAgICAgfVxuICAgICAgICApICsgYCAoJHt0aGlzLnNraWxsLnZhbHVlfSUpYFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGlzcGxheU5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMucmF3VmFsdWVTdHJpbmd9JSlgXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbEVsZW1lbnQgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9pbi1jYXJkLXJvbGwuaHRtbCdcbiAgICBpZiAodGhpcy5vcHRpb25zKSB0aGlzLm9wdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICBlbHNlIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgaWYgKGh0bWwpIHJldHVybiAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbCAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL2luLWNhcmQtcm9sbC5odG1sJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMub3B0aW9ucyA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIGVsc2UgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICByZXR1cm4gaHRtbCB8fCB1bmRlZmluZWRcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAocHVzaGluZyA9IGZhbHNlKSB7XG4gICAgLy8gSWYgY2FyZCBpcyBwcm92aWRlZCBhdHR0YWNoZWQgdGhlIHJvbGwgdG8gdGhlIGNhcmQuIElmIFVSSUQgcHJvdmlkZWQgYXR0YWNoIGF0IHRoaXMgcG9zaXRpb24uP1xuICAgIHRoaXMucHVzaGluZyA9IHB1c2hpbmdcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbC1yZXN1bHQuaHRtbCdcblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBsZXQgc3BlYWtlclxuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSB7XG4gICAgICAgIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy50b2tlbi5kb2N1bWVudFxuICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdG9yLmlzRHVtbXkpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0b3IubmFtZSkgc3BlYWtlciA9IHsgYWxpYXM6IHRoaXMuYWN0b3IubmFtZSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIH1cbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3I/LnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBmbGF2b3I6IHRoaXMuZmxhdm9yLFxuICAgICAgY29udGVudDogaHRtbCxcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIENvQzc6IHtcbiAgICAgICAgICB0eXBlOiBDb0M3Q2hlY2suY2FyZFR5cGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnV1aWQpIGNoYXREYXRhLmZsYWdzLkNvQzcudXVpZCA9IHRoaXMudXVpZFxuICAgIGlmICh0aGlzLmNvbnRleHQpIGNoYXREYXRhLmZsYWdzLkNvQzcuY29udGV4dCA9IHRoaXMuY29udGV4dFxuXG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdzZWxmcm9sbCcpIHtcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBjaGF0RGF0YS51c2VyID0gZ2FtZS51c2VyLmlkXG4gICAgICAgIGNoYXREYXRhLmZsYXZvciA9IGBbJHt0aGlzLmFjdG9yLm5hbWV9XSAke2NoYXREYXRhLmZsYXZvcn1gXG4gICAgICAgIGNoYXREYXRhLmZsYWdzID0ge1xuICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgIEdNU2VsZlJvbGw6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjaGF0RGF0YS5zcGVha2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNoYXREYXRhLmZsYWdzLkNvQzcub3JpZ2luYWxTcGVha2VyID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoY2hhdERhdGEuc3BlYWtlcilcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICBzd2l0Y2ggKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NlbGZSb2xsV2hpc3BlclRhcmdldCcpKSB7XG4gICAgICAgICAgICBjYXNlICdvd25lcnMnOlxuICAgICAgICAgICAgICBkZWxldGUgY2hhdERhdGEuc3BlYWtlclxuICAgICAgICAgICAgICBjaGF0RGF0YS53aGlzcGVyID0gdGhpcy5hY3Rvci5vd25lcnNcbiAgICAgICAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGNhc2UgJ2V2ZXJ5b25lJzpcbiAgICAgICAgICAgICAgZGVsZXRlIGNoYXREYXRhLnNwZWFrZXJcbiAgICAgICAgICAgICAgY2hhdERhdGEud2hpc3BlciA9IGdhbWUudXNlcnMucGxheWVyc1xuICAgICAgICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgdGhpcy5yb2xsTW9kZSlcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKVxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICAvLyBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKCBjaGF0RGF0YSwgdGhpcy5yb2xsTW9kZSk7XG4gICAgaWYgKHRoaXMuZGljZT8ucm9sbCAmJiAhdGhpcy5kaWNlPy5oaWRlRGljZSkge1xuICAgICAgLy8gRm91bmRyeVZUVCB2MTFcbiAgICAgIGlmIChmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzExJykpIHtcbiAgICAgICAgY2hhdERhdGEucm9sbHMgPSBbdGhpcy5kaWNlLnJvbGxdXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGF0RGF0YS5yb2xsID0gdGhpcy5kaWNlLnJvbGxcbiAgICAgIH1cbiAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgY2hhdERhdGEucm9sbE1vZGUgPSB0aGlzLmlzQmxpbmQgPyAnYmxpbmRyb2xsJyA6IHRoaXMucm9sbE1vZGVcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbWFrZVB1YmxpYyAgV2lsbCBjaGFuZ2UgdGhlIHJvbGwgbW9kZSB0byBwdWJsaWNcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICh7IG1ha2VQdWJsaWMgPSBmYWxzZSwgZm9yY2VSb2xsID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKG1ha2VQdWJsaWMpIHRoaXMucm9sbE1vZGUgPSBmYWxzZSAvLyByZXNldCByb2xsIG1vZGVcblxuICAgIGNvbnN0IGNoYXREYXRhID0geyBmbGF2b3I6IHRoaXMuZmxhdm9yIH1cblxuICAgIGlmIChtYWtlUHVibGljKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gW11cbiAgICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcbiAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEpXG4gICAgfSAvLyBlbHNlIHtcbiAgICAvLyBjaGF0RGF0YS53aGlzcGVyID0gW11cbiAgICAvLyBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG4gICAgLy8gQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICAvLyB9XG5cbiAgICBpZiAoY2hhdERhdGEuYmxpbmQpIHtcbiAgICAgIHRoaXMuaXNCbGluZCA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbC1yZXN1bHQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgbGV0IG5ld0NvbnRlbnQgPSBodG1sXG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSByZXR1cm4gJC5wYXJzZUhUTUwoaHRtbClbMF0gLy8gSWYgbm8gbWVzc2FnZUlkIHJldHVybiB0aGUgSFRNTEVsZW1lbnQgY29udGFpbmluZyB0aGUgcm9sbC5cbiAgICAvLyBJZiBubyBtZXNzYWdlSWRcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICBjb25zdCBodG1sTWVzc2FnZSA9ICQucGFyc2VIVE1MKG1lc3NhZ2UuY29udGVudClbMF1cbiAgICBpZiAoIWh0bWxNZXNzYWdlLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1yZXN1bHQnKSkge1xuICAgICAgY29uc3QgaHRtbENoZWNrID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cbiAgICAgIGNvbnN0IHJvbGxSZXN1bHRFbGVtZW50ID0gaHRtbE1lc3NhZ2UucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICAgIGlmIChyb2xsUmVzdWx0RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICByb2xsUmVzdWx0RWxlbWVudC5yZXBsYWNlV2l0aChodG1sQ2hlY2spXG4gICAgICB9XG4gICAgICBuZXdDb250ZW50ID0gaHRtbE1lc3NhZ2Uub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgY2hhdERhdGEuY29udGVudCA9IG5ld0NvbnRlbnRcblxuICAgIGlmIChDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTCA9PT0gbWVzc2FnZS50eXBlKSB7XG4gICAgICBpZiAobWVzc2FnZS53aGlzcGVyPy5sZW5ndGgpIHtcbiAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICB9IGVsc2UgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5PVEhFUlxuICAgIH1cblxuICAgIGlmIChmb3JjZVJvbGwgJiYgdGhpcy5kaWNlPy5yb2xsICYmIChnYW1lLnVzZXIuaXNHTSB8fCAhdGhpcy5pc0JsaW5kKSkge1xuICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5kaWNlLnJvbGwpXG4gICAgfVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoY2hhdERhdGEpXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICBjaGVjay5nbURpZmZpY3VsdHlSZWd1bGFyID0gZmFsc2VcbiAgICBjaGVjay5nbURpZmZpY3VsdHlIYXJkID0gZmFsc2VcbiAgICBjaGVjay5nbURpZmZpY3VsdHlFeHRyZW1lID0gZmFsc2VcbiAgICBjaGVjay5nbURpZmZpY3VsdHlDcml0aWNhbCA9IGZhbHNlXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5UmVndWxhcicpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eVJlZ3VsYXIgPSB0cnVlXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUhhcmQnKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlIYXJkID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlFeHRyZW1lJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5RXh0cmVtZSA9IHRydWVcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5Q3JpdGljYWwnKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlDcml0aWNhbCA9IHRydWVcbiAgICB9XG4gICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBnZXQgdG9vbHRpcCAoKSB7XG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXG4gICAgICB0aGlzXG4gICAgKVxuICB9XG5cbiAgZ2V0IGlubGluZUNoZWNrICgpIHtcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWlubGluZS1jaGVjaycpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWNoZWNrLXJlc3VsdCcpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWlubGluZScpXG4gICAgYS5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NMaXN0KVxuICAgIGEudGl0bGUgPSB0aGlzLnRvb2x0aXBIZWFkZXJcbiAgICBhLmRhdGFzZXQucm9sbCA9IGVzY2FwZSh0aGlzLkpTT05Sb2xsU3RyaW5nKSAvLyBUT0RPIUlNUE9SVEFOVCEhIVxuICAgIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1kMTBcIj48L2k+ICR7XG4gICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0IHx8ICc/PydcbiAgICB9YFxuICAgIHJldHVybiBhXG4gIH1cblxuICBnZXQgcm9sbFRvb2xUaXAgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBwYXJ0cyA9IFtdXG4gICAgY29uc3QgdGVucyA9IHRoaXMuZGljZXMudGVucy5tYXAociA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN1bHQ6IHIudmFsdWUsXG4gICAgICAgIHNlbGVjdGVkOiByLnNlbGVjdGVkLFxuICAgICAgICBjbGFzc2VzOiBbXG4gICAgICAgICAgJ2RpZScsXG4gICAgICAgICAgJ2QxMCcsXG4gICAgICAgICAgIXIuc2VsZWN0ZWQgPyAnZGlzY2FyZGVkJyA6IG51bGwsXG4gICAgICAgICAgci5pc01pbiA/ICdtaW4nIDogbnVsbCxcbiAgICAgICAgICByLmlzTWF4ID8gJ21heCcgOiBudWxsXG4gICAgICAgIF1cbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYylcbiAgICAgICAgICAuam9pbignICcpXG4gICAgICB9XG4gICAgfSlcbiAgICBjb25zdCB1bml0ID0gW1xuICAgICAge1xuICAgICAgICByZXN1bHQ6IHRoaXMuZGljZXMudW5pdC52YWx1ZSxcbiAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgIGNsYXNzZXM6ICdkaWUgZDEwJ1xuICAgICAgfVxuICAgIF1cblxuICAgIHBhcnRzLnB1c2goe1xuICAgICAgZm9ybXVsYTogdGhpcy50b29sdGlwSGVhZGVyLFxuICAgICAgdG90YWw6IHRoaXMubW9kaWZpZWRSZXN1bHQsXG4gICAgICBpY29uczogdGhpcy5zdWNjZXNzTGV2ZWxJY29ucyxcbiAgICAgIGNsYXNzOiB0aGlzLmNzc0NsYXNzLFxuICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCxcbiAgICAgIHJlc3VsdFR5cGU6IHRoaXMucmVzdWx0VHlwZSxcbiAgICAgIGZhY2U6IDEwLFxuICAgICAgcm9sbHM6IFsuLi50ZW5zLCAuLi51bml0XVxuICAgIH0pXG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXG4gICAgICB7IHBhcnRzIH1cbiAgICApXG4gIH1cblxuICBnZXQgSlNPTlJvbGxEYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLkpTT05Sb2xsU3RyaW5nKVxuICB9XG5cbiAgZ2V0IEpTT05Sb2xsU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgY29uc3QgZXhjbHVkZSA9IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbSddXG4gICAgICBpZiAoZXhjbHVkZS5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGZyb21EYXRhIChkYXRhKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhKVxuICB9XG5cbiAgc3RhdGljIGZyb21Sb2xsU3RyaW5nIChkYXRhU3RyaW5nKSB7XG4gICAgbGV0IGRhdGFcbiAgICB0cnkge1xuICAgICAgZGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoZGF0YVN0cmluZykpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5mcm9tRGF0YShkYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFsdGVyIChjaGVjaywgY29tbWFuZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3dpdGNoIChjb21tYW5kKSB7XG4gICAgICBjYXNlICd1c2VMdWNrJzoge1xuICAgICAgICBpZiAob3B0aW9ucy50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQob3B0aW9ucy50YXJnZXQuZGF0YXNldC5sdWNrQW1vdW50KVxuICAgICAgICAgIGNoZWNrLmZvcmNlUGFzcyhsdWNrQW1vdW50LCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChvcHRpb25zLnRhcmdldC5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgIGF3YWl0IGNoZWNrLnVwZ3JhZGVDaGVjayh1cGdyYWRlSW5kZXgsIG9wdGlvbnMudXBkYXRlKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLXBhc3MnOiB7XG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcyhudWxsLCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcbiAgICAgICAgY2hlY2suZm9yY2VGYWlsKG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbmNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NMZXZlbChvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVjcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY2hlY2suZGVjcmVhc2VTdWNjZXNzTGV2ZWwob3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcbiAgICAgICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNoZWNrLnJvbGxNb2RlID0gZmFsc2VcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZsYWctZm9yLWRldmVsb3BtZW50Jzoge1xuICAgICAgICBhd2FpdCBjaGVjay5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3B1c2gnOiB7XG4gICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgY2hlY2sucHVzaGluZyA9IHRydWVcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrSW5saW5lUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1jaGVjay1yZXN1bHQnKSkge1xuICAgICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2NvbGxhcHNlSW5saW5lUmVzdWx0KGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9leHBhbmRJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX2NvbGxhcHNlSW5saW5lUmVzdWx0IChhKSB7XG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1pbmxpbmUtY2hlY2snKSkgcmV0dXJuXG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkgcmV0dXJuXG4gICAgY29uc3QgdG9vbHRpcCA9IGEucXVlcnlTZWxlY3RvcignLmNvYzctY2hlY2stdG9vbHRpcCcpXG4gICAgaWYgKHRvb2x0aXApIHRvb2x0aXAucmVtb3ZlKClcbiAgICByZXR1cm4gYS5jbGFzc0xpc3QucmVtb3ZlKCdleHBhbmRlZCcpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX2V4cGFuZElubGluZVJlc3VsdCAoYSkge1xuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctaW5saW5lLWNoZWNrJykpIHJldHVyblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkgcmV0dXJuXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgdG9vbHRpcFxuICAgIGNvbnN0IGNoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIG5ldyBDb0M3Q2hlY2soKSxcbiAgICAgIEpTT04ucGFyc2UodW5lc2NhcGUoYS5kYXRhc2V0LnJvbGwpKVxuICAgICkgLy8gVE9ETyA6IGZpbmQgc3RyaW5naWZ5IHVuZXNjYXBlICEhIDIwMjEwMjA1XG4gICAgaWYgKGNoZWNrLnN0YW5kYnkpIHJldHVyblxuXG4gICAgY29uc3QgdGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aXAuaW5uZXJIVE1MID0gYXdhaXQgY2hlY2sucm9sbFRvb2xUaXBcblxuICAgIC8vIEFkZCB0aGUgdG9vbHRpcFxuICAgIGNvbnN0IHRvb2x0aXAgPSB0aXAuY2hpbGRyZW5bMF1cbiAgICBhLmFwcGVuZENoaWxkKHRvb2x0aXApXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpXG5cbiAgICAvLyBTZXQgdGhlIHBvc2l0aW9uXG4gICAgY29uc3QgcGEgPSBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgY29uc3QgcHQgPSB0b29sdGlwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgdG9vbHRpcC5zdHlsZS5sZWZ0ID0gYCR7TWF0aC5taW4oXG4gICAgICBwYS54LFxuICAgICAgd2luZG93LmlubmVyV2lkdGggLSAocHQud2lkdGggKyAzKVxuICAgICl9cHhgXG4gICAgdG9vbHRpcC5zdHlsZS50b3AgPSBgJHtNYXRoLm1pbihcbiAgICAgIHBhLnkgKyBwYS5oZWlnaHQgKyAzLFxuICAgICAgd2luZG93LmlubmVySGVpZ2h0IC0gKHB0LmhlaWdodCArIDMpXG4gICAgKX1weGBcbiAgICBjb25zdCB6aSA9IGdldENvbXB1dGVkU3R5bGUoYSkuekluZGV4XG4gICAgdG9vbHRpcC5zdHlsZS56SW5kZXggPSBOdW1iZXIuaXNOdW1lcmljKHppKSA/IHppICsgMSA6IDEwMFxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgQ09ORklHLCBDT05TVCwgRGlhbG9nLCBEaWUsIEZvbGRlciwgZm91bmRyeSwgZnJvbVV1aWQsIGZyb21VdWlkU3luYywgZ2FtZSwgZ2V0RG9jdW1lbnRDbGFzcywgSG9va3MsIE1hY3JvLCBOdW1lcmljVGVybSwgUm9sbCwgVG9rZW4sIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3VXRpbGl0aWVzIHtcbiAgLy8gc3RhdGljIHRlc3QoZXZlbnQpe1xuICAvLyAgIGlmKCBldmVudC5zaGlmdEtleSkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdIZWxsbyBmcm9tIFNISUZUIHV0aWxpdGllcycpO1xuICAvLyAgIGVsc2UgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdIZWxsbyBmcm9tIHV0aWxpdGllcycpO1xuICAvLyAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCk7XG4gIC8vICAgbGV0IGFjdG9yO1xuICAvLyAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXTtcbiAgLy8gICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKTtcblxuICAvLyAgYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKTtcbiAgLy8gfVxuXG4gIHN0YXRpYyBpc0Zvcm11bGEgKHgpIHtcbiAgICBpZiAodHlwZW9mIHggIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih4KSkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHgpXG4gIH1cblxuICBzdGF0aWMgUGFyc2VDaGF0RW50cnkgKGh0bWwsIGNvbnRlbnQpIHtcbiAgICBjb25zdCByZWdYID0gLyhcXFMrKS9nXG4gICAgY29uc3QgdGVybXMgPSBjb250ZW50Lm1hdGNoKHJlZ1gpXG4gICAgaWYgKFxuICAgICAgdGVybXNbMF0/LnRvTG93ZXJDYXNlKCkubWF0Y2goL15cXC9yKG9sbCk/JC8pICYmXG4gICAgICB0ZXJtc1sxXT8udG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCcxZCUnKVxuICAgICkge1xuICAgICAgLy8gRGVsYXkgY2FsbGluZyBmdW5jdGlvbiB0byBwcmV2ZW50IGNoYXRtZXNzYWdlIGtleSBkb3duIHRyaWdnZXJpbmcgZGVmYXVsdFxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIENvQzdVdGlsaXRpZXMuX0V4ZWNDb21tYW5kKGNvbnRlbnQpXG4gICAgICB9LCAyMDApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX0V4ZWNDb21tYW5kIChjb250ZW50KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvbnRlbnRcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAuc3BsaXQoJyAnKVxuICAgICAgPy5qb2luKCcnKVxuICAgICAgPy5yZXBsYWNlKC9cXC9yKG9sbCk/MWQlLywgJycpXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgIGxldCBlc2NhcGVkID0gb3B0aW9uc1xuICAgICAgbGV0IHRocmVzaG9sZFxuICAgICAgbGV0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGxldCBkaWNlTW9kaWZpZXIgPSAwXG4gICAgICBsZXQgYXNrID0gZmFsc2VcbiAgICAgIGxldCBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBsZXQgZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBjb25zdCB0aHJlc2hvbGRTdHIgPSBlc2NhcGVkLm1hdGNoKC9bXihdKyg/PVxcKSkvKVxuICAgICAgaWYgKHRocmVzaG9sZFN0ciAmJiB0aHJlc2hvbGRTdHIubGVuZ3RoKSB7XG4gICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih0aHJlc2hvbGRTdHJbMF0pXG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgdGhyZXNob2xkU3RyKSB7XG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgKCR7bWF0Y2h9KWAsICcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBkaWZmaWN1bHR5U3RyID0gZXNjYXBlZC5tYXRjaCgvW15bXSsoPz1cXF0pLylcbiAgICAgIGlmIChkaWZmaWN1bHR5U3RyICYmIGRpZmZpY3VsdHlTdHIubGVuZ3RoKSB7XG4gICAgICAgIGRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KGRpZmZpY3VsdHlTdHJbMF0pXG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgZGlmZmljdWx0eVN0cikge1xuICAgICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoYFske21hdGNofV1gLCAnJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGVzY2FwZWQuaW5jbHVkZXMoJz8nKSkge1xuICAgICAgICBhc2sgPSB0cnVlXG4gICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoJz8nLCAnJylcbiAgICAgIH1cbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKGVzY2FwZWQpKSkgZGljZU1vZGlmaWVyID0gTnVtYmVyKGVzY2FwZWQpXG5cbiAgICAgIGlmIChhc2spIHtcbiAgICAgICAgY29uc3QgZGlhbG9nT3B0aW9ucyA9IHtcbiAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgbW9kaWZpZXI6IGRpY2VNb2RpZmllcixcbiAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgIGFza1ZhbHVlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShkaWFsb2dPcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKSB8fCB0aHJlc2hvbGRcbiAgICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBpZiAodGhyZXNob2xkKSBjaGVjay5yYXdWYWx1ZSA9ICFpc05hTih0aHJlc2hvbGQpID8gdGhyZXNob2xkIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBpZiAoc3BlYWtlci50b2tlbiAmJiBzcGVha2VyLnNjZW5lKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICBgJHtzcGVha2VyLnNjZW5lfS4ke3NwZWFrZXIudG9rZW59YFxuICAgICAgKSAvLyBSRUZBQ1RPUklORyAoMikgKysrIHdoeSBzcGVha2VyLnNjZW5lLlxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfSBlbHNlIGlmIChzcGVha2VyLmFjdG9yKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfVxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdGVzdCAoKSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvcygnRG8gc29tZSBzdHVmZicpXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tU3RyaW5nIChhY3RvclN0cmluZykge1xuICAgIGxldCBhY3RvclxuXG4gICAgLy8gVG9rZW4gaXMgYmV0dGVyIHRoYW4gYWN0b3IuXG4gICAgLy8gQ2FzZSAxIDogdHJ5aW5nIHdpdGggSUQuXG4gICAgLy8gQ2FzZSAxLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBpZiAoZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXSkgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1thY3RvclN0cmluZ11cbiAgICAvLyBDYXNlIDEuMiA6IGFjdG9yIGZvdW5kLlxuICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9yU3RyaW5nKVxuICAgIGlmIChhY3RvcikgcmV0dXJuIGFjdG9yXG5cbiAgICAvLyBDYXNlIDIgOiB0cnlpbmcgd2l0aCBuYW1lXG4gICAgLy8gQ2FzZSAyLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBhY3RvciA9IE9iamVjdC52YWx1ZXMoZ2FtZS5hY3RvcnMudG9rZW5zKS5maW5kKHQgPT4ge1xuICAgICAgaWYgKHQubmFtZS50b0xvd2VyQ2FzZSgpID09PSBhY3RvclN0cmluZy50b0xvd2VyQ2FzZSgpKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcbiAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAvLyBDYXNlIDIuMiA6IGFjdG9yIGZvdW5kLlxuICAgICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5maW5kKGEgPT4ge1xuICAgICAgICBpZiAoYS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcblxuICAgIC8vIC8vIENhc2UgMyBzdHJpbmcgbWF5YmUgYW4gYWN0b3JLZXlcbiAgICAvLyBpZiAoY3JlYXR1cmUuaW5jbHVkZXMoJy4nKSkge1xuICAgIC8vICAgY29uc3QgWywgYWN0b3JJZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgIC8vICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tU3RyaW5nKGFjdG9ySWQpXG4gICAgLy8gfVxuXG4gICAgLy8gTm8gam95XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRDaGFyYWN0ZXJpc3RpY05hbWVzIChjaGFyKSB7XG4gICAgY29uc3QgY2hhcktleSA9IGNoYXIudG9Mb3dlckNhc2UoKVxuXG4gICAgc3dpdGNoIChjaGFyS2V5KSB7XG4gICAgICBjYXNlICdzdHInOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TVFInKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU3RyZW5ndGgnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdjb24nOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5DT04nKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQ29uc3RpdHV0aW9uJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnc2l6JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU0laJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNpemUnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdkZXgnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5ERVgnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRGV4dGVyaXR5JylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnYXBwJzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQVBQJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkFwcGVhcmFuY2UnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdpbnQnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5JTlQnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuSW50ZWxsaWdlbmNlJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAncG93JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUE9XJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlBvd2VyJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnZWR1JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRURVJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2x1Y2snOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWNMaXN0ID0gKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyBnYW1lLnN5c3RlbS50ZW1wbGF0ZS5BY3Rvci50ZW1wbGF0ZXMuY2hhcmFjdGVyaXN0aWNzLmNoYXJhY3RlcmlzdGljcyA6IGdhbWUuc3lzdGVtLnRlbXBsYXRlLkFjdG9yLmNoYXJhY3Rlci5jaGFyYWN0ZXJpc3RpY3MpXG4gICAgICAgIGZvciAoY29uc3QgWywgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNoYXJhY3RlcmlzdGljTGlzdCkpIHtcbiAgICAgICAgICBpZiAoY2hhcktleSA9PT0gZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY29udmVydERpZmZpY3VsdHkgKGRpZmZpY3VsdHkpIHtcbiAgICBpZiAoU3RyaW5nKGRpZmZpY3VsdHkpID09PSAnMCcpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICBpZiAodHlwZW9mIGRpZmZpY3VsdHkgIT09ICdzdHJpbmcnKSByZXR1cm4gZGlmZmljdWx0eVxuICAgIGlmICghaXNOYU4oTnVtYmVyKGRpZmZpY3VsdHkpKSkgcmV0dXJuIE51bWJlcihkaWZmaWN1bHR5KVxuXG4gICAgc3dpdGNoIChkaWZmaWN1bHR5KSB7XG4gICAgICBjYXNlICc/JzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93blxuICAgICAgY2FzZSAnKyc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICAgIGNhc2UgJysrJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgICAgY2FzZSAnKysrJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWxcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgc2tpbGxDaGVja01hY3JvIChza2lsbCwgZXZlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgbGV0IGFjdG9yXG4gICAgaWYgKHNwZWFrZXIudG9rZW4pIGFjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3NwZWFrZXIudG9rZW5dXG4gICAgaWYgKCFhY3RvcikgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3RvcikgLy8gTm8gbmVlZCB0byBmaWxsIGFjdG9yIHRva2VuXG5cbiAgICBpZiAoIWFjdG9yKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0FjdG9yQXZhaWxhYmxlJykpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBhY3Rvci5za2lsbENoZWNrKHNraWxsLCBldmVudC5zaGlmdEtleSwgb3B0aW9ucylcbiAgfVxuXG4gIHN0YXRpYyB3ZWFwb25DaGVja01hY3JvICh3ZWFwb24sIGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl1cbiAgICBpZiAoIWFjdG9yKSB7XG4gICAgICBpZiAoc3BlYWtlci5zY2VuZSAmJiBzcGVha2VyLnRva2VuKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIHN5bnRoZXRpYyBhY3RvciBsaW5rZWQgd2l0aCB0aGUgYWN0aXZlIHRva2VuLlxuICAgICAgICBjb25zdCBiYXNlQWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3RvcilcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc3BlYWtlci5zY2VuZSlcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS50b2tlbnMuZ2V0KHNwZWFrZXIudG9rZW4pXG5cbiAgICAgICAgY29uc3QgQWN0b3JDbGFzcyA9IGdldERvY3VtZW50Q2xhc3MoJ0FjdG9yJylcbiAgICAgICAgY29uc3QgdG9rZW5BY3RvciA9IG5ldyBBY3RvckNsYXNzKGJhc2VBY3Rvci50b0pTT04oKSwge1xuICAgICAgICAgIHBhcmVudDogdG9rZW5cbiAgICAgICAgfSlcbiAgICAgICAgYWN0b3IgPSB0b2tlbkFjdG9yXG4gICAgICB9IGVsc2UgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3RvcilcbiAgICB9XG5cbiAgICBpZiAoIWFjdG9yKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0FjdG9yQXZhaWxhYmxlJykpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBhY3Rvci53ZWFwb25DaGVjayh3ZWFwb24sIGV2ZW50LnNoaWZ0S2V5KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNoZWNrTWFjcm8gKHRocmVzaG9sZCA9IHVuZGVmaW5lZCwgZXZlbnQgPSBudWxsKSB7XG4gICAgYXdhaXQgQ29DN1V0aWxpdGllcy5yb2xsRGljZShldmVudCwgeyB0aHJlc2hvbGQgfSlcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVNYWNybyAoYmFyLCBkYXRhLCBzbG90KSB7XG4gICAgaWYgKGRhdGEudHlwZSAhPT0gJ0l0ZW0nKSByZXR1cm5cblxuICAgIGNvbnN0IGl0ZW0gPSBmcm9tVXVpZFN5bmMoZGF0YS51dWlkLCBiYXIpXG5cbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9Ob0l0ZW1Gb3VuZCcpXG4gICAgICApXG4gICAgfVxuICAgIGlmICghKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpICYmICEoaXRlbS50eXBlID09PSAnc2tpbGwnKSkge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5NYWNyb0luY29ycmVjdFR5cGUnKVxuICAgICAgKVxuICAgIH1cblxuICAgIGxldCBjb21tYW5kID0gJydcblxuICAgIGlmIChpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICBjb21tYW5kID0gYGdhbWUuQ29DNy5tYWNyb3Mud2VhcG9uQ2hlY2soe25hbWU6JyR7aXRlbS5uYW1lfScsIHV1aWQ6JyR7ZGF0YS51dWlkfSd9LCBldmVudCk7YFxuICAgIH1cblxuICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vR2xvYmFsU3BlYycpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGNvbW1hbmQgPSBgZ2FtZS5Db0M3Lm1hY3Jvcy5za2lsbENoZWNrKHtuYW1lOicke2l0ZW0ubmFtZX0nLCB1dWlkOicke2RhdGEudXVpZH0nfSwgZXZlbnQpO2BcbiAgICB9XG5cbiAgICBpZiAoY29tbWFuZCAhPT0gJycpIHtcbiAgICAgIC8vIENyZWF0ZSB0aGUgbWFjcm8gY29tbWFuZFxuICAgICAgY29uc3QgbWFjcm8gPSBnYW1lLm1hY3Jvcy5jb250ZW50cy5maW5kKFxuICAgICAgICBtID0+IG0ubmFtZSA9PT0gaXRlbS5uYW1lICYmIG0uY29tbWFuZCA9PT0gY29tbWFuZFxuICAgICAgKVxuICAgICAgaWYgKCFtYWNybykge1xuICAgICAgICBNYWNyby5jcmVhdGUoZm91bmRyeS51dGlscy5kdXBsaWNhdGUoe1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICB0eXBlOiAnc2NyaXB0JyxcbiAgICAgICAgICBpbWc6IGl0ZW0uaW1nLFxuICAgICAgICAgIGNvbW1hbmRcbiAgICAgICAgfSkpLnRoZW4obWFjcm8gPT4ge1xuICAgICAgICAgIGdhbWUudXNlci5hc3NpZ25Ib3RiYXJNYWNybyhtYWNybywgc2xvdClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLnVzZXIuYXNzaWduSG90YmFyTWFjcm8obWFjcm8sIHNsb3QpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVEZXZQaGFzZSAodG9nZ2xlKSB7XG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZUVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZURpc2FibGVkJylcbiAgICApXG4gICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICB0eXBlOiAndXBkYXRlQ2hhcidcbiAgICB9KVxuICAgIENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlQ2hhckNyZWF0aW9uICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhckNyZWF0aW9uRGlzYWJsZWQnKVxuICAgIClcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgIHR5cGU6ICd1cGRhdGVDaGFyJ1xuICAgIH0pXG4gICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgICBIb29rcy5jYWxsKCd0b2dnbGVDaGFyQ3JlYXRpb24nLCB0b2dnbGUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0VGFyZ2V0ICgpIHtcbiAgICBjb25zdCB1c2VycyA9IGdhbWUudXNlcnMuZmlsdGVyKHVzZXIgPT4gdXNlci5hY3RpdmUpXG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnNcbiAgICBsZXQgY2hlY2tPcHRpb25zID0gYDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiQ09DQ2hlY2tBbGxQQ1wiIGlkPVwiQ09DQ2hlY2tBbGxQQ1wiPlxcblxuICAgIDxsYWJlbCBmb3I9XCJDT0NDaGVja0FsbFBDXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuYWxsQWN0b3JzJyl9PC9sYWJlbD5gXG4gICAgY29uc3QgcGxheWVyVG9rZW5JZHMgPSB1c2Vyc1xuICAgICAgLm1hcCh1ID0+IHUuY2hhcmFjdGVyPy5pZClcbiAgICAgIC5maWx0ZXIoaWQgPT4gaWQgIT09IHVuZGVmaW5lZClcbiAgICBjb25zdCBzZWxlY3RlZFBsYXllcklkcyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodG9rZW4gPT4ge1xuICAgICAgcmV0dXJuIHRva2VuLmFjdG9yLmlkXG4gICAgfSlcblxuICAgIC8vIEJ1aWxkIGNoZWNrYm94IGxpc3QgZm9yIGFsbCBhY3RpdmUgcGxheWVyc1xuICAgIGFjdG9ycy5mb3JFYWNoKGFjdG9yID0+IHtcbiAgICAgIGNvbnN0IGNoZWNrZWQgPVxuICAgICAgICAoc2VsZWN0ZWRQbGF5ZXJJZHMuaW5jbHVkZXMoYWN0b3IuaWQpIHx8XG4gICAgICAgICAgcGxheWVyVG9rZW5JZHMuaW5jbHVkZXMoYWN0b3IuaWQpKSAmJlxuICAgICAgICAnY2hlY2tlZCdcbiAgICAgIGNoZWNrT3B0aW9ucyArPSBgXG4gICAgIDxicj5cbiAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCIke2FjdG9yLmlkfVwiIGlkPVwiJHthY3Rvci5pZH1cIiB2YWx1ZT1cIiR7YWN0b3IubmFtZX1cIiAke2NoZWNrZWR9PlxcblxuICAgICA8bGFiZWwgZm9yPVwiJHthY3Rvci5pZH1cIj4ke2FjdG9yLm5hbWV9PC9sYWJlbD5cbiAgICAgICBgXG4gICAgfSlcblxuICAgIG5ldyBEaWFsb2coe1xuICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5kcmVhbWluZycpfWAsXG4gICAgICBjb250ZW50OiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3LnJlc3RUYXJnZXRzJ1xuICAgICAgKX06ICR7Y2hlY2tPcHRpb25zfSA8YnI+YCxcbiAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgd2hpc3Blcjoge1xuICAgICAgICAgIGxhYmVsOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuc3RhcnRSZXN0Jyl9YCxcbiAgICAgICAgICBjYWxsYmFjazogYXN5bmMgaHRtbCA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRzID0gW11cbiAgICAgICAgICAgIGxldCBhbGwgPSBmYWxzZVxuICAgICAgICAgICAgY29uc3QgdXNlcnMgPSBodG1sLmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKVxuICAgICAgICAgICAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XG4gICAgICAgICAgICAgIGlmICh1c2VyLm5hbWUgPT09ICdDT0NDaGVja0FsbFBDJyAmJiB1c2VyLmNoZWNrZWQpIGFsbCA9IHRydWVcbiAgICAgICAgICAgICAgaWYgKHVzZXIuY2hlY2tlZCB8fCBhbGwpIHRhcmdldHMucHVzaCh1c2VyLmlkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5zdGFydFJlc3QodGFyZ2V0cylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzdGFydFJlc3QgKHRhcmdldHMpIHtcbiAgICBpZiAoIXRhcmdldHMubGVuZ3RoKSByZXR1cm5cbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9ycy5maWx0ZXIoYWN0b3IgPT4gdGFyZ2V0cy5pbmNsdWRlcyhhY3Rvci5pZCkpXG4gICAgbGV0IGNoYXRDb250ZW50ID0gYDxpPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmRyZWFtaW5nJyl9Li4uPC9pPjxicj5gXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcbiAgICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgICBsZXQgcXVpY2tIZWFsZXIgPSBmYWxzZVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWN0b3IuaXRlbXMpIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAndGFsZW50Jykge1xuICAgICAgICAgICAgaWYgKGl0ZW0ubmFtZSA9PT0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnF1aWNrSGVhbGVyJyl9YCkge1xuICAgICAgICAgICAgICBxdWlja0hlYWxlciA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNDcml0aWNhbFdvdW5kcyA9XG4gICAgICAgICAgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMnKSAmJlxuICAgICAgICAgIGFjdG9yLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICAgICAgY29uc3QgZGFpbHlTYW5pdHlMb3NzID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zc1xuICAgICAgICBjb25zdCBocFZhbHVlID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMuaHAudmFsdWVcbiAgICAgICAgY29uc3QgaHBNYXggPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5ocC5tYXhcbiAgICAgICAgY29uc3QgbXBWYWx1ZSA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlXG4gICAgICAgIGNvbnN0IG1wTWF4ID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4XG4gICAgICAgIGNvbnN0IHBvdyA9IGFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlXG4gICAgICAgIGNoYXRDb250ZW50ID0gY2hhdENvbnRlbnQgKyBgPGJyPjxiPiR7YWN0b3IubmFtZX0uIDwvYj5gXG4gICAgICAgIGlmIChocFZhbHVlIDwgaHBNYXgpIHtcbiAgICAgICAgICBpZiAoaXNDcml0aWNhbFdvdW5kcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtyZWRcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5oYXNDcml0aWNhbFdvdW5kcydcbiAgICAgICAgICAgICAgKX0uIDwvYj5gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBoZWFsQW1vdW50ID0gMVxuICAgICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlRmFzdGVyUmVjb3ZlcnknKSkge1xuICAgICAgICAgICAgICBoZWFsQW1vdW50ID0gMlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHF1aWNrSGVhbGVyID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGhlYWxBbW91bnQrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVhbEFtb3VudCA9IE1hdGgubWluKGhlYWxBbW91bnQsIGhwTWF4IC0gaHBWYWx1ZSlcbiAgICAgICAgICAgIGlmIChoZWFsQW1vdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICdDb0M3LmhlYWx0aFJlY292ZXJlZCdcbiAgICAgICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5wdWxwSGVhbHRoUmVjb3ZlcmVkJyxcbiAgICAgICAgICAgICAgICAgIHsgbnVtYmVyOiBoZWFsQW1vdW50IH1cbiAgICAgICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6XG4gICAgICAgICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUgKyBoZWFsQW1vdW50XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGFpbHlTYW5pdHlMb3NzID4gMCkge1xuICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LmRhaWx5U2FuTG9zc1Jlc3RhcnRlZCdcbiAgICAgICAgICAgICl9LjwvYj5gXG4gICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJzogMCxcbiAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCc6IE1hdGguZmxvb3IoYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIC8gNSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhvdXJzID0gN1xuICAgICAgICBpZiAoaG91cnMgPiAwICYmIG1wVmFsdWUgPCBtcE1heCkge1xuICAgICAgICAgIGxldCBtYWdpY0Ftb3VudCA9IGhvdXJzICogTWF0aC5jZWlsKHBvdyAvIDEwMClcbiAgICAgICAgICBtYWdpY0Ftb3VudCA9IE1hdGgubWluKG1hZ2ljQW1vdW50LCBtcE1heCAtIG1wVmFsdWUpXG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3Lm1hZ2ljUG9pbnRzUmVjb3ZlcmVkJ1xuICAgICAgICAgICAgKX06ICR7bWFnaWNBbW91bnR9LjwvYj5gXG4gICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSc6XG4gICAgICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlICsgbWFnaWNBbW91bnRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgY29udGVudDogY2hhdENvbnRlbnQsXG4gICAgICB0eXBlOiBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuT1RIRVJcbiAgICB9XG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRvZ2dsZVhQR2FpbiAodG9nZ2xlKSB7XG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAneHBFbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5YUEdhaW5FbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWFBHYWluRGlzYWJsZWQnKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByb2xsRGljZSAoZXZlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMuYXNrVmFsdWUgPSAhb3B0aW9ucy50aHJlc2hvbGRcbiAgICBsZXQgZGljZU1vZGlmaWVyLCBkaWZmaWN1bHR5LCBmbGF0RGljZU1vZGlmaWVyLCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICBsZXQgdGhyZXNob2xkID0gb3B0aW9ucy50aHJlc2hvbGRcblxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMubW9kaWZpZXIpIGRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZXZlbnQ/LnNoaWZ0S2V5ICYmICFvcHRpb25zLmZhc3RGb3J3YXJkKSB7XG4gICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKVxuICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhY3RvcnMgPSBbXVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNICYmIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgY2FudmFzLnRva2Vucy5jb250cm9sbGVkKSB7XG4gICAgICAgIGFjdG9ycy5wdXNoKHRva2VuLmFjdG9yLnRva2VuS2V5KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZ2FtZS51c2VyLmNoYXJhY3Rlcikge1xuICAgICAgYWN0b3JzLnB1c2goZ2FtZS51c2VyLmNoYXJhY3Rlci50b2tlbktleSlcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHRrIG9mIGFjdG9ycykge1xuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBjaGVjay5hY3RvciA9IHRrXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuXG4gICAgaWYgKCFhY3RvcnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgY2hlY2sucmF3VmFsdWUgPSB0aHJlc2hvbGRcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2hhclNoZWV0cyAoKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKGE/LnR5cGUgPT09ICdjaGFyYWN0ZXInICYmIGE/LnNoZWV0ICYmIGE/LnNoZWV0Py5yZW5kZXJlZCkge1xuICAgICAgICAgIGEudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiB0cnVlIH0pXG4gICAgICAgICAgYS5yZW5kZXIoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBhIG9mIGdhbWUuYWN0b3JzLmNvbnRlbnRzKSB7XG4gICAgICAgIGlmIChhLmlzT3duZXIpIHtcbiAgICAgICAgICBhLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MubG9ja2VkJzogdHJ1ZSB9KVxuICAgICAgICAgIGEucmVuZGVyKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBmcm9tIF9vbkRyb3AgdG8gZ2V0IHRoZSBkcm9wcGVkIGVudGl0eVR5cGUgb3IgZW50aXR5VHlwZSBmcm9tIGEgZm9sZGVyXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIFtpdGVtc10gYXJyYXkgb2YgaXRlbXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXREYXRhRnJvbURyb3BFdmVudCAoZXZlbnQsIGVudGl0eVR5cGUgPSAnSXRlbScpIHtcbiAgICBpZiAoZXZlbnQub3JpZ2luYWxFdmVudCkgcmV0dXJuIFtdXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGFMaXN0ID0gSlNPTi5wYXJzZShldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpKVxuICAgICAgaWYgKGRhdGFMaXN0LnR5cGUgPT09ICdGb2xkZXInICYmIGRhdGFMaXN0LmRvY3VtZW50TmFtZSA9PT0gZW50aXR5VHlwZSkge1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBhd2FpdCBmcm9tVXVpZChkYXRhTGlzdC51dWlkKVxuICAgICAgICBpZiAoIWZvbGRlcikgcmV0dXJuIFtdXG4gICAgICAgIHJldHVybiBmb2xkZXIuY29udGVudHNcbiAgICAgIH0gZWxzZSBpZiAoZGF0YUxpc3QudHlwZSA9PT0gZW50aXR5VHlwZSkge1xuICAgICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZGF0YUxpc3QudXVpZClcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm4gW11cbiAgICAgICAgcmV0dXJuIFtpdGVtXVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY29weVRvQ2xpcGJvYXJkICh0ZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIHdpbmRvdy5pc1NlY3VyZUNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJylcbiAgICAgICAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0XG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJ1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5sZWZ0ID0gJy05OTlweCdcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUudG9wID0gJy05OTlweCdcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0QXJlYSlcbiAgICAgICAgdGV4dEFyZWEuZm9jdXMoKVxuICAgICAgICB0ZXh0QXJlYS5zZWxlY3QoKVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5JylcbiAgICAgICAgICAgID8gcmVzb2x2ZSgpXG4gICAgICAgICAgICA6IHJlamVjdChcbiAgICAgICAgICAgICAgbmV3IEVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0NvcHlUb0NsaXBib2FyZCcpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIHRleHRBcmVhLnJlbW92ZSgpXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVycikpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0NvcHlUb0NsaXBib2FyZCcpKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBxdW90ZVJlZ0V4cCAoc3RyaW5nKSB7XG4gICAgLy8gaHR0cHM6Ly9iaXRidWNrZXQub3JnL2NnZ2FlcnRuZXIvanMtaGFja3MvcmF3L21hc3Rlci9xdW90ZS5qc1xuICAgIGNvbnN0IGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgICBsZXQgcVN0cmluZyA9ICcnXG5cbiAgICBmb3IgKGxldCBjdXJyZW50LCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBjdXJyZW50ID0gc3RyaW5nLmNoYXJBdChpKVxuXG4gICAgICBpZiAoY3VycmVudCA+PSAnICcgJiYgY3VycmVudCA8PSAnficpIHtcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09ICdcXFxcJyB8fCBjdXJyZW50ID09PSBcIidcIikge1xuICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFwnXG4gICAgICAgIH1cblxuICAgICAgICBxU3RyaW5nICs9IGN1cnJlbnQucmVwbGFjZSgvWy1bXFxdL3t9KCkqKz8uXFxcXF4kfF0vZywgJ1xcXFwkJicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2l0Y2ggKGN1cnJlbnQpIHtcbiAgICAgICAgICBjYXNlICdcXGInOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXGInXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFxmJzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxmJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcbic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcbidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXHInOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHInXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFx0JzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFx0J1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcdic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHUnXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDQ7IC0taiA+PSBjdXJyZW50Lmxlbmd0aDsgcVN0cmluZyArPSAnMCcpO1xuICAgICAgICAgICAgcVN0cmluZyArPSBjdXJyZW50XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcVN0cmluZ1xuICB9XG5cbiAgc3RhdGljIHNldEJ5UGF0aCAob2JqLCBwYXRoLCB2YWx1ZSkge1xuICAgIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gICAgbGV0IG8gPSBvYmpcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKCFvW3BhcnRzW2ldXSkgb1twYXJ0c1tpXV0gPSB7fVxuICAgICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXSA9IHZhbHVlXG4gIH1cblxuICBzdGF0aWMgZ2V0QnlQYXRoIChvYmosIHBhdGgpIHtcbiAgICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKVxuICAgIGxldCBvID0gb2JqXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIGlmICghb1twYXJ0c1tpXV0pIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgbyA9IG9bcGFydHNbaV1dXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9bcGFydHNbcGFydHMubGVuZ3RoIC0gMV1dXG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgYSBEb2N1bWVudCBieSBpdHMgVW5pdmVyc2FsbHkgVW5pcXVlIElkZW50aWZpZXIgKHV1aWQpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXVpZCAgIFRoZSB1dWlkIG9mIHRoZSBEb2N1bWVudCB0byByZXRyaWV2ZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPERvY3VtZW50fG51bGw+fVxuICAgKi9cbiAgc3RhdGljIFNmcm9tVXVpZCAodXVpZCkge1xuICAgIGxldCBwYXJ0cyA9IHV1aWQuc3BsaXQoJy4nKVxuICAgIGxldCBkb2NcblxuICAgIC8vIENvbXBlbmRpdW0gRG9jdW1lbnRzXG4gICAgaWYgKHBhcnRzWzBdID09PSAnQ29tcGVuZGl1bScpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgICAvLyByZXR1cm4gZnJvbVV1aWQodXVpZCkgLy8gUmV0dXJuIFByb21pc2VcbiAgICAgIC8vIHBhcnRzLnNoaWZ0KCk7XG4gICAgICAvLyBjb25zdCBbc2NvcGUsIHBhY2tOYW1lLCBpZF0gPSBwYXJ0cy5zbGljZSgwLCAzKTtcbiAgICAgIC8vIHBhcnRzID0gcGFydHMuc2xpY2UoMyk7XG4gICAgICAvLyBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoYCR7c2NvcGV9LiR7cGFja05hbWV9YCk7XG4gICAgICAvLyByZXR1cm4gYXdhaXQgcGFjaz8uZ2V0RG9jdW1lbnQoaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXb3JsZCBEb2N1bWVudHNcbiAgICAgIGNvbnN0IFtkb2NOYW1lLCBkb2NJZF0gPSBwYXJ0cy5zbGljZSgwLCAyKVxuICAgICAgcGFydHMgPSBwYXJ0cy5zbGljZSgyKVxuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IENPTkZJR1tkb2NOYW1lXS5jb2xsZWN0aW9uLmluc3RhbmNlXG4gICAgICBkb2MgPSBjb2xsZWN0aW9uLmdldChkb2NJZClcbiAgICB9XG5cbiAgICAvLyBFbWJlZGRlZCBEb2N1bWVudHNcbiAgICB3aGlsZSAoZG9jICYmIHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IFtlbWJlZGRlZE5hbWUsIGVtYmVkZGVkSWRdID0gcGFydHMuc2xpY2UoMCwgMilcbiAgICAgIGRvYyA9IGRvYy5nZXRFbWJlZGRlZERvY3VtZW50KGVtYmVkZGVkTmFtZSwgZW1iZWRkZWRJZClcbiAgICAgIHBhcnRzID0gcGFydHMuc2xpY2UoMilcbiAgICB9XG4gICAgcmV0dXJuIGRvYyB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgaXNEb2N1bWVudFV1aWRQYWNrICh1dWlkKSB7XG4gICAgaWYgKHV1aWQuaW5jbHVkZXMoJ0NvbXBlbmRpdW0nKSkgcmV0dXJuIHRydWVcbiAgICBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGlzRG9jdW1lbnRVdWlkICh1dWlkKSB7XG4gICAgY29uc3QgaWRlbnRpZmllcnMgPSBbJ0FjdG9yJywgJ1NjZW5lJywgJ1Rva2VuJywgJ0l0ZW0nLCAnQ29tcGVuZGl1bSddXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHV1aWQuaW5jbHVkZXMoaWRlbnRpZmllcnNbaV0pKSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhIChkcm9wRGF0YSkge1xuICAgIGxldCBkb2NVdWlkLCBhY3RvclxuICAgIGlmIChkcm9wRGF0YS50b2tlblV1aWQpIHtcbiAgICAgIGRvY1V1aWQgPSBkcm9wRGF0YS50b2tlblV1aWRcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkcm9wRGF0YS51dWlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZG9jVXVpZCA9IGRyb3BEYXRhLnV1aWRcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jVXVpZCA9XG4gICAgICAgIGRyb3BEYXRhLnNjZW5lSWQgJiYgZHJvcERhdGEudG9rZW5JZFxuICAgICAgICAgID8gYFNjZW5lLiR7ZHJvcERhdGEuc2NlbmVJZH0uVG9rZW4uJHtkcm9wRGF0YS50b2tlbklkfWBcbiAgICAgICAgICA6IGRyb3BEYXRhLmFjdG9ySWQgfHwgZHJvcERhdGEuYWN0b3JLZXkgfHwgZHJvcERhdGEuaWRcbiAgICB9XG4gICAgaWYgKGRyb3BEYXRhLnR5cGUgPT09ICdUb2tlbicpIHtcbiAgICAgIGRvY1V1aWQgPSBkcm9wRGF0YS51dWlkXG4gICAgfSBlbHNlIGlmIChkb2NVdWlkKSB7XG4gICAgICBhY3RvciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KGRvY1V1aWQpXG4gICAgICBpZiAoIWFjdG9yICYmIGRyb3BEYXRhLnR5cGUgPT09ICdJdGVtJykgZG9jVXVpZCA9IG51bGxcbiAgICB9XG5cbiAgICBpZiAoYWN0b3IgJiYgZG9jVXVpZCAhPT0gYWN0b3IudXVpZCkge1xuICAgICAgZG9jVXVpZCA9IGFjdG9yLnV1aWRcbiAgICB9XG4gICAgcmV0dXJuIGRvY1V1aWRcbiAgfVxuXG4gIHN0YXRpYyBnZXREb2N1bWVudEZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gbnVsbFxuICAgIC8vIENhc2UgMCAtIGEgZG9jdW1lbnQgVXVpZFxuICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkKGtleSkpIHtcbiAgICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkUGFjayhrZXkpKSByZXR1cm4gZnJvbVV1aWQoa2V5KSAvLyBUT0RPIENoZWNrIHdlIGNhbiBkbyB0aGF0XG4gICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQoa2V5KVxuICAgIH1cblxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICBpZiAoIXRva2VuLnNjZW5lKSB0b2tlbi5zY2VuZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHNjZW5lKVxuICAgICAgcmV0dXJuIHRva2VuXG4gICAgfVxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgY29uc3QgZG9jID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoa2V5KVxuICAgIGlmICghZG9jKSByZXR1cm4gbnVsbFxuICAgIGlmIChkb2MuYWN0b3IpIHJldHVybiBkb2MuYWN0b3JcbiAgICBpZiAoZG9jLmNvbnN0cnVjdG9yPy5uYW1lID09PSAnQ29DQWN0b3InKSByZXR1cm4gZG9jXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZm9sZGVyIG9uIHRoZSBhY3RvcnMgdGFiIGNhbGxlZCBcIkltcG9ydGVkIENoYXJhY3RlcnNcIiBpZiB0aGUgZm9sZGVyIGRvZXNuJ3QgZXhpc3QuXG4gICAqIEByZXR1cm5zIHtGb2xkZXJ9IHRoZSBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXJcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMgKCkge1xuICAgIGxldCBmb2xkZXJOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlcicpXG4gICAgaWYgKGZvbGRlck5hbWUgPT09ICdDb0M3LkltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlcicpIHtcbiAgICAgIGZvbGRlck5hbWUgPSAnSW1wb3J0ZWQgY2hhcmFjdGVycydcbiAgICB9XG4gICAgbGV0IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9IGdhbWUuZm9sZGVycy5maW5kKFxuICAgICAgZW50cnkgPT4gZW50cnkubmFtZSA9PT0gZm9sZGVyTmFtZSAmJiBlbnRyeS50eXBlID09PSAnQWN0b3InXG4gICAgKVxuICAgIGlmIChcbiAgICAgIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9PT0gbnVsbCB8fFxuICAgICAgdHlwZW9mIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIC8vIENyZWF0ZSB0aGUgZm9sZGVyXG4gICAgICBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPSBhd2FpdCBGb2xkZXIuY3JlYXRlKHtcbiAgICAgICAgbmFtZTogZm9sZGVyTmFtZSxcbiAgICAgICAgdHlwZTogJ0FjdG9yJyxcbiAgICAgICAgcGFyZW50OiBudWxsXG4gICAgICB9KVxuICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlZEltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlcicpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXJcbiAgfVxuXG4gIC8qKlxuICAgKiBndWVzc0l0ZW0sIHRyeSBhbmQgZmluZCB0aGUgaXRlbSBpbiB0aGUgbG9jYXRpb25zIGRlZmluZWQgaW4gJHtzb3VyY2V9IGkgPSBJdGVtIERpcmVjdG9yeSwgdyA9IFdvcmxkIENvbXBlbmRpdW1zLCBtID0gTW9kdWxlIENvbXBlbmRpdW1zLCBzID0gU3lzdGVtIENvbXBlbmRpdW1zXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIEl0ZW0gdHlwZSB0byBmaW5kXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgaXRlbSB0byBmaW5kXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb21iYXQgbnVsbCAoZGVmYXVsdCkuIElmIGJvb2xlYW4gY29tYmF0IHByb3BlcnR5IG9mIHNraWxsIG11c3QgbWF0Y2hcbiAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSAnJyAoZGVmYXVsdCkuIENoZWNrIG9yZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmYWxsYmFja0FueSBmYWxzZSAoZGVmYXVsdCkuIFNob3VsZCBhbnkgc3BlY2lhbGl6YXRpb24gdGhhdCBpc24ndCBmb3VuZCB0cnkgdXNpbmcgKEFueSkgaXRlbXNcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGEgSXRlbSBvciBudWxsXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ3Vlc3NJdGVtIChcbiAgICB0eXBlLFxuICAgIG5hbWUsXG4gICAgeyBjb21iYXQgPSBudWxsLCBzb3VyY2UgPSAnJywgZmFsbGJhY2tBbnkgPSBmYWxzZSB9ID0ge31cbiAgKSB7XG4gICAgbGV0IGV4aXN0aW5nID0gbnVsbFxuICAgIG5hbWUgPSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICBmb3IgKGxldCBvID0gMCwgb00gPSBzb3VyY2UubGVuZ3RoOyBvIDwgb007IG8rKykge1xuICAgICAgc3dpdGNoIChzb3VyY2Uuc3Vic3RyaW5nKG8sIG8gKyAxKSkge1xuICAgICAgICBjYXNlICdpJzpcbiAgICAgICAgICBleGlzdGluZyA9IGdhbWUuaXRlbXMuZmluZChcbiAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS50eXBlID09PSB0eXBlICYmXG4gICAgICAgICAgICAgIGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lICYmXG4gICAgICAgICAgICAgIChjb21iYXQgPT09IG51bGwgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPT09IGNvbWJhdClcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAndyc6XG4gICAgICAgIGNhc2UgJ20nOlxuICAgICAgICBjYXNlICdzJzpcbiAgICAgICAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBwYWNrLm1ldGFkYXRhLnR5cGUgPT09ICdJdGVtJyAmJlxuICAgICAgICAgICAgICAoKHNvdXJjZVtvXSA9PT0gJ3cnICYmIHBhY2subWV0YWRhdGEucGFja2FnZSA9PT0gJ3dvcmxkJykgfHxcbiAgICAgICAgICAgICAgICAoc291cmNlW29dID09PSAnUycgJiYgcGFjay5tZXRhZGF0YS5wYWNrYWdlID09PSAnQ29DNycpIHx8XG4gICAgICAgICAgICAgICAgKHNvdXJjZVtvXSA9PT0gJ3MnICYmXG4gICAgICAgICAgICAgICAgICAhWyd3b3JsZCcsICdDb0M3J10uaW5jbHVkZXMocGFjay5tZXRhZGF0YS5wYWNrYWdlKSkpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgcGFjay5nZXREb2N1bWVudHMoKVxuICAgICAgICAgICAgICBleGlzdGluZyA9IGRvY3VtZW50cy5maW5kKFxuICAgICAgICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gdHlwZSAmJlxuICAgICAgICAgICAgICAgICAgaXRlbS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgJiZcbiAgICAgICAgICAgICAgICAgIChjb21iYXQgPT09IG51bGwgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPT09IGNvbWJhdClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmFsbGJhY2tBbnkgJiYgdHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgY29uc3QgbWF0Y2ggPSBuYW1lLm1hdGNoKC9eKC4rIFxcKCkoPyFhbnkpLisoXFwpKSQvKVxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbShcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIG1hdGNoWzFdICsgJ2FueScgKyBtYXRjaFsyXSxcbiAgICAgICAgICB7IGNvbWJhdCwgc291cmNlIH1cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0b0tlYmFiQ2FzZSAocykge1xuICAgIGlmICghcykge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIGNvbnN0IG1hdGNoID0gcy5tYXRjaCgvW0EtWl17Mix9KD89W0EtWl1bYS16XStbMC05XSp8XFxiKXxbQS1aXT9bYS16XStbMC05XSp8W0EtWl18WzAtOV0rL2cpXG5cbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG5cbiAgICByZXR1cm4gbWF0Y2guam9pbignLScpLnRvTG93ZXJDYXNlKClcbiAgfVxuXG4gIHN0YXRpYyBzb3J0QnlOYW1lS2V5IChhLCBiKSB7XG4gICAgcmV0dXJuIGEubmFtZVxuICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgIC50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAubG9jYWxlQ29tcGFyZShcbiAgICAgICAgYi5uYW1lXG4gICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIClcbiAgfVxuXG4gIHN0YXRpYyBnZXRBbklkRm9yR20gKCkge1xuICAgIGNvbnN0IGtlZXBlcnMgPSBnYW1lLnVzZXJzLmZpbHRlcih1ID0+IHUuYWN0aXZlICYmIHUuaXNHTSAmJiB1LmlkICE9PSBnYW1lLnVzZXIuaWQpXG4gICAgc3dpdGNoIChrZWVwZXJzLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdDb0M3LkVycm9yTWlzc2luZ0tlZXBlclVzZXInLCB7IGxvY2FsaXplOiB0cnVlIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4ga2VlcGVyc1swXS5pZFxuICAgIH1cbiAgICByZXR1cm4ga2VlcGVyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBrZWVwZXJzLmxlbmd0aCldLmlkXG4gIH1cblxuICBzdGF0aWMgaGFsZkRCIChkYikge1xuICAgIGRiID0gKChkYiA/PyAnJykudG9TdHJpbmcoKS50cmltKCkgPT09ICcnID8gMCA6IGRiKS50b1N0cmluZygpLnRyaW0oKVxuICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChkYilcbiAgICBmb3IgKGNvbnN0IHRlcm0gb2Ygcm9sbC50ZXJtcykge1xuICAgICAgaWYgKGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSAmJiB0ZXJtIGluc3RhbmNlb2YgZm91bmRyeS5kaWNlLnRlcm1zLkRpZSkge1xuICAgICAgICB0ZXJtLl9mYWNlcyA9IE1hdGguZmxvb3IodGVybS5fZmFjZXMgLyAyKVxuICAgICAgfSBlbHNlIGlmICh0ZXJtIGluc3RhbmNlb2YgRGllKSB7XG4gICAgICAgIC8vIEZvdW5kcnlWVFQgVjExXG4gICAgICAgIHRlcm0uZmFjZXMgPSBNYXRoLmZsb29yKHRlcm0uZmFjZXMgLyAyKVxuICAgICAgfSBlbHNlIGlmICh0ZXJtIGluc3RhbmNlb2YgTnVtZXJpY1Rlcm0pIHtcbiAgICAgICAgdGVybS5udW1iZXIgPSAodGVybS5udW1iZXIgPCAwID8gTWF0aC5jZWlsKHRlcm0ubnVtYmVyIC8gMikgOiBNYXRoLmZsb29yKHRlcm0ubnVtYmVyIC8gMikpXG4gICAgICB9XG4gICAgfVxuICAgIGxldCBmb3JtdWxhID0gcm9sbC5mb3JtdWxhLnRvU3RyaW5nKCkudHJpbSgpXG4gICAgaWYgKCFmb3JtdWxhLnN0YXJ0c1dpdGgoJy0nKSkge1xuICAgICAgZm9ybXVsYSA9ICcrJyArIGZvcm11bGFcbiAgICB9XG4gICAgcmV0dXJuIGZvcm11bGFcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBnYW1lLCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQ0lERWRpdG9yIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY29jLWlkLWVkaXRvciddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY29jLWlkLWVkaXRvci5oYnMnLFxuICAgICAgd2lkdGg6IDkwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgdGl0bGU6ICdDb0M3LkNvQ0lERmxhZy50aXRsZScsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2xvc2U6IHRydWUsXG4gICAgICBzdWJtaXRPbkNoYW5nZTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5zdXBwb3J0ZWRMYW5ndWFnZXMgPSBDT05GSUcuc3VwcG9ydGVkTGFuZ3VhZ2VzXG5cbiAgICB0aGlzLm9wdGlvbnMuZWRpdGFibGUgPSB0aGlzLm9iamVjdC5zaGVldC5pc0VkaXRhYmxlXG5cbiAgICBzaGVldERhdGEuZ3Vlc3NDb2RlID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmd1ZXNzSWQodGhpcy5vYmplY3QpXG4gICAgc2hlZXREYXRhLmlkUHJlZml4ID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmdldFByZWZpeCh0aGlzLm9iamVjdClcblxuICAgIHNoZWV0RGF0YS5jb2NpZEZsYWcgPSB0aGlzLm9iamVjdC5mbGFncz8uQ29DNz8uY29jaWRGbGFnXG5cbiAgICBzaGVldERhdGEuaWQgPSBzaGVldERhdGEuY29jaWRGbGFnPy5pZCB8fCAnJ1xuICAgIHNoZWV0RGF0YS5sYW5nID0gc2hlZXREYXRhLmNvY2lkRmxhZz8ubGFuZyB8fCBnYW1lLmkxOG4ubGFuZ1xuICAgIHNoZWV0RGF0YS5wcmlvcml0eSA9IHNoZWV0RGF0YS5jb2NpZEZsYWc/LnByaW9yaXR5IHx8IDBcblxuICAgIHNoZWV0RGF0YS5lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuZXJhcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSxcbiAgICAgICAgaXNFbmFibGVkOiAoc2hlZXREYXRhLmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLmVyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBjb25zdCBDb0NJREtleXMgPSBPYmplY3QuYXNzaWduKGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdChnYW1lLmkxOG4uX2ZhbGxiYWNrLkNvQzc/LkNvQ0lERmxhZz8ua2V5cyA/PyB7fSksIGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdChnYW1lLmkxOG4udHJhbnNsYXRpb25zLkNvQzc/LkNvQ0lERmxhZz8ua2V5cyA/PyB7fSkpXG4gICAgY29uc3QgcHJlZml4ID0gbmV3IFJlZ0V4cCgnXicgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKHNoZWV0RGF0YS5pZFByZWZpeCkpXG4gICAgc2hlZXREYXRhLmV4aXN0aW5nS2V5cyA9IE9iamVjdC5rZXlzKENvQ0lES2V5cykucmVkdWNlKChvYmosIGspID0+IHtcbiAgICAgIGlmIChrLm1hdGNoKHByZWZpeCkpIHtcbiAgICAgICAgb2JqLnB1c2goeyBrLCBuYW1lOiBDb0NJREtleXNba10gfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmpcbiAgICB9LCBbXSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuaXNTeXN0ZW1JRCA9ICh0eXBlb2YgQ29DSURLZXlzW3NoZWV0RGF0YS5pZF0gIT09ICd1bmRlZmluZWQnKVxuICAgIGNvbnN0IG1hdGNoID0gc2hlZXREYXRhLmlkLm1hdGNoKC9eKFteXFxcXC5dKylcXC4oW15cXFxcLl0qKVxcLiguKykvKVxuICAgIHNoZWV0RGF0YS5fZXhpc3RpbmcgPSAobWF0Y2ggJiYgdHlwZW9mIG1hdGNoWzNdICE9PSAndW5kZWZpbmVkJyA/IG1hdGNoWzNdIDogJycpXG5cbiAgICBpZiAoc2hlZXREYXRhLmlkICYmIHNoZWV0RGF0YS5sYW5nKSB7XG4gICAgICAvLyBGaW5kIG91dCBpZiB0aGVyZSBleGlzdHMgYSBkdXBsaWNhdGUgQ29DSURcbiAgICAgIGNvbnN0IHdvcmxkRG9jdW1lbnRzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJREFsbCh7XG4gICAgICAgIGNvY2lkOiBzaGVldERhdGEuaWQsXG4gICAgICAgIGxhbmc6IHNoZWV0RGF0YS5sYW5nLFxuICAgICAgICBzY29wZTogJ3dvcmxkJ1xuICAgICAgfSlcbiAgICAgIGNvbnN0IHVzZWRFcmFzID0ge31cbiAgICAgIGNvbnN0IHVuaXF1ZVdvcmxkUHJpb3JpdHkgPSB7fVxuICAgICAgc2hlZXREYXRhLndvcmxkRG9jdW1lbnRJbmZvID0gYXdhaXQgUHJvbWlzZS5hbGwod29ybGREb2N1bWVudHMubWFwKGFzeW5jIChkKSA9PiB7XG4gICAgICAgIGlmIChkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHVuaXF1ZVdvcmxkUHJpb3JpdHksIGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdKSkge1xuICAgICAgICAgICAgICB1bmlxdWVXb3JsZFByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdXSA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVuaXF1ZVdvcmxkUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF1dKytcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdW5pcXVlV29ybGRQcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8qJ10gPSAxXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXJhcyA9IChkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMgPyBPYmplY3QuZW50cmllcyhkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pLnNvcnQoKSA6IFtdKVxuICAgICAgICBmb3IgKGNvbnN0IGVyYSBvZiBlcmFzKSB7XG4gICAgICAgICAgdXNlZEVyYXNbZXJhXSA9IENPQzcuZXJhc1tlcmFdID8/ICc/J1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvbGRlcnMgPSBbXVxuICAgICAgICBsZXQgZSA9IGQ/LmZvbGRlclxuICAgICAgICB3aGlsZSAoZT8ubmFtZSkge1xuICAgICAgICAgIGZvbGRlcnMudW5zaGlmdChlPy5uYW1lKVxuICAgICAgICAgIGUgPSBlLmZvbGRlclxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZXJhczogZXJhcy5yZWR1Y2UoZnVuY3Rpb24gKGFsbCwgY3VycmVudCkge1xuICAgICAgICAgICAgYWxsW2N1cnJlbnRdID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIGFsbFxuICAgICAgICAgIH0sIHt9KSxcbiAgICAgICAgICBwcmlvcml0eTogZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSxcbiAgICAgICAgICBsYW5nOiBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmxhbmcgPz8gJ2VuJyxcbiAgICAgICAgICBsaW5rOiBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoZC5saW5rLCB7IGFzeW5jOiB0cnVlIH0pLFxuICAgICAgICAgIGZvbGRlcjogZm9sZGVycy5tYXAobiA9PiBuLmluZGV4T2YoJyAnKSA+IC0xID8gJ1wiJyArIG4gKyAnXCInIDogbikuam9pbignICZndDsgJylcbiAgICAgICAgfVxuICAgICAgfSkpXG4gICAgICBpZiAoT2JqZWN0LmVudHJpZXModW5pcXVlV29ybGRQcmlvcml0eSkuZmlsdGVyKGMgPT4gY1sxXSA+IDEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2hlZXREYXRhLndhcm5EdXBsaWNhdGVXb3JsZFByaW9yaXR5ID0gdHJ1ZVxuICAgICAgfVxuICAgICAgc2hlZXREYXRhLndvcmxkRHVwbGljYXRlcyA9IHdvcmxkRG9jdW1lbnRzLmxlbmd0aCA/PyAwXG5cbiAgICAgIGNvbnN0IGNvbXBlbmRpdW1Eb2N1bWVudHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEQWxsKHtcbiAgICAgICAgY29jaWQ6IHNoZWV0RGF0YS5pZCxcbiAgICAgICAgbGFuZzogc2hlZXREYXRhLmxhbmcsXG4gICAgICAgIHNjb3BlOiAnY29tcGVuZGl1bXMnXG4gICAgICB9KVxuICAgICAgY29uc3QgdW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5ID0ge31cbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRG9jdW1lbnRJbmZvID0gYXdhaXQgUHJvbWlzZS5hbGwoY29tcGVuZGl1bURvY3VtZW50cy5tYXAoYXN5bmMgKGQpID0+IHtcbiAgICAgICAgaWYgKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5LCBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXSkpIHtcbiAgICAgICAgICAgICAgdW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdXSA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXV0rK1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvKiddID0gMVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVyYXMgPSAoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzID8gT2JqZWN0LmVudHJpZXMoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiBlWzBdKS5zb3J0KCkgOiBbXSlcbiAgICAgICAgZm9yIChjb25zdCBlcmEgb2YgZXJhcykge1xuICAgICAgICAgIHVzZWRFcmFzW2VyYV0gPSBDT0M3LmVyYXNbZXJhXSA/PyAnPydcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb2xkZXJzID0gW11cbiAgICAgICAgbGV0IGUgPSBkPy5mb2xkZXJcbiAgICAgICAgd2hpbGUgKGU/Lm5hbWUpIHtcbiAgICAgICAgICBmb2xkZXJzLnVuc2hpZnQoZT8ubmFtZSlcbiAgICAgICAgICBlID0gZS5mb2xkZXJcbiAgICAgICAgfVxuICAgICAgICBmb2xkZXJzLnVuc2hpZnQoZC5jb21wZW5kaXVtLm1ldGFkYXRhLmxhYmVsKVxuICAgICAgICBlID0gZD8uY29tcGVuZGl1bS5mb2xkZXJcbiAgICAgICAgd2hpbGUgKGU/Lm5hbWUpIHtcbiAgICAgICAgICBmb2xkZXJzLnVuc2hpZnQoZT8ubmFtZSlcbiAgICAgICAgICBlID0gZS5mb2xkZXJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVyYXM6IGVyYXMucmVkdWNlKGZ1bmN0aW9uIChhbGwsIGN1cnJlbnQpIHtcbiAgICAgICAgICAgIGFsbFtjdXJyZW50XSA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiBhbGxcbiAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgcHJpb3JpdHk6IGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHksXG4gICAgICAgICAgbGFuZzogZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nID8/ICdlbicsXG4gICAgICAgICAgbGluazogYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKGQubGluaywgeyBhc3luYzogdHJ1ZSB9KSxcbiAgICAgICAgICBmb2xkZXI6IGZvbGRlcnMubWFwKG4gPT4gbi5pbmRleE9mKCcgJykgPiAtMSA/ICdcIicgKyBuICsgJ1wiJyA6IG4pLmpvaW4oJyAmZ3Q7ICcpXG4gICAgICAgIH1cbiAgICAgIH0pKVxuICAgICAgaWYgKE9iamVjdC5lbnRyaWVzKHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eSkuZmlsdGVyKGMgPT4gY1sxXSA+IDEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2hlZXREYXRhLndhcm5EdXBsaWNhdGVDb21wZW5kaXVtUHJpb3JpdHkgPSB0cnVlXG4gICAgICB9XG4gICAgICBzaGVldERhdGEuY29tcGVuZGl1bUR1cGxpY2F0ZXMgPSBjb21wZW5kaXVtRG9jdW1lbnRzLmxlbmd0aCA/PyAwXG4gICAgICBzaGVldERhdGEudXNlZEVyYXMgPSBbXVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModXNlZEVyYXMpKSB7XG4gICAgICAgIHNoZWV0RGF0YS51c2VkRXJhcy5wdXNoKHtcbiAgICAgICAgICBpZDoga2V5LFxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHNoZWV0RGF0YS51c2VkRXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICB9IGVsc2Uge1xuICAgICAgc2hlZXREYXRhLmNvbXBlbmRpdW1Eb2N1bWVudEluZm8gPSBbXVxuICAgICAgc2hlZXREYXRhLndvcmxkRG9jdW1lbnRJbmZvID0gW11cbiAgICAgIHNoZWV0RGF0YS53b3JsZER1cGxpY2F0ZXMgPSAwXG4gICAgICBzaGVldERhdGEuY29tcGVuZGl1bUR1cGxpY2F0ZXMgPSAwXG4gICAgICBzaGVldERhdGEud2FybkR1cGxpY2F0ZVdvcmxkUHJpb3JpdHkgPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLndhcm5EdXBsaWNhdGVDb21wZW5kaXVtUHJpb3JpdHkgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLmZpbmQoJ2EuY29weS10by1jbGlwYm9hcmQnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQoJCh0aGlzKS5zaWJsaW5ncygnaW5wdXQnKS52YWwoKSlcbiAgICB9KVxuXG4gICAgaWYgKCF0aGlzLm9iamVjdC5zaGVldC5pc0VkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJ2lucHV0W25hbWU9X2V4aXN0aW5nJykuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XG4gICAgICBjb25zdCBvYmogPSAkKHRoaXMpXG4gICAgICBjb25zdCBwcmVmaXggPSBvYmouZGF0YSgncHJlZml4JylcbiAgICAgIGxldCB2YWx1ZSA9IG9iai52YWwoKVxuICAgICAgaWYgKHZhbHVlICE9PSAnJykge1xuICAgICAgICB2YWx1ZSA9IHByZWZpeCArIENvQzdVdGlsaXRpZXMudG9LZWJhYkNhc2UodmFsdWUpXG4gICAgICB9XG4gICAgICBodG1sLmZpbmQoJ2lucHV0W25hbWU9aWRdJykudmFsKHZhbHVlKS50cmlnZ2VyKCdjaGFuZ2UnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJ3NlbGVjdFtuYW1lPWtub3duXScpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc3Qgb2JqID0gJCh0aGlzKVxuICAgICAgaHRtbC5maW5kKCdpbnB1dFtuYW1lPWlkXScpLnZhbChvYmoudmFsKCkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnYVtkYXRhLWd1ZXNzXScpLmNsaWNrKGFzeW5jIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIGNvbnN0IG9iaiA9ICQodGhpcylcbiAgICAgIGNvbnN0IGd1ZXNzID0gb2JqLmRhdGEoJ2d1ZXNzJylcbiAgICAgIGh0bWwuZmluZCgnaW5wdXRbbmFtZT1pZF0nKS52YWwoZ3Vlc3MpLnRyaWdnZXIoJ2NoYW5nZScpXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBlcmFUb2dnbGUgKGRvY3VtZW50LCBwcm9wZXJ0eUlkKSB7XG4gICAgaWYgKGRvY3VtZW50LnR5cGUgPT09ICdzZXR1cCcpIHtcbiAgICAgIC8vIFNldHVwcyBjYW4gb25seSBoYXZlIG9uZSBlcmEgdG8gbWFrZSBzdXJlIHRoZSBjb3JyZWN0IHNraWxscyBhcmUgcG9wdWxhdGVkIHZpYSBDb0MgSURcbiAgICAgIGNvbnN0IHVwZGF0ZSA9IHtcbiAgICAgICAgW3Byb3BlcnR5SWRdOiB0cnVlXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGRvY3VtZW50LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2tleV0gb2YgT2JqZWN0LmVudHJpZXMoZG9jdW1lbnQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykpIHtcbiAgICAgICAgICBpZiAoa2V5ICE9PSBwcm9wZXJ0eUlkKSB7XG4gICAgICAgICAgICB1cGRhdGVbJy09JyArIGtleV0gPSBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhd2FpdCBkb2N1bWVudC51cGRhdGUoe1xuICAgICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyc6IHVwZGF0ZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzPy5bcHJvcGVydHlJZF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodHlwZW9mIGRvY3VtZW50LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGF3YWl0IGRvY3VtZW50LnVwZGF0ZSh7XG4gICAgICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnOiB7XG4gICAgICAgICAgICBbcHJvcGVydHlJZF06IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBkb2N1bWVudC51cGRhdGUoe1xuICAgICAgICAgIFtgZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcy4ke3Byb3BlcnR5SWR9YF06IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgZG9jdW1lbnQudXBkYXRlKHtcbiAgICAgICAgW2BmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzLi09JHtwcm9wZXJ0eUlkfWBdOiBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgQ29DSURFZGl0b3IuZXJhVG9nZ2xlKHRoaXMub2JqZWN0LCBwcm9wZXJ0eUlkKVxuICAgIGNvbnN0IG9wdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLm9wdGlvbnMpXG4gICAgYXdhaXQgdGhpcy5jbG9zZSgpXG4gICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSwgb3B0aW9ucylcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IGlkID0gZm9ybURhdGEuaWQgfHwgJydcbiAgICBhd2FpdCB0aGlzLm9iamVjdC51cGRhdGUoe1xuICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmlkJzogaWQsXG4gICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcubGFuZyc6IGZvcm1EYXRhLmxhbmcgfHwgZ2FtZS5pMThuLmxhbmcsXG4gICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHknOiBmb3JtRGF0YS5wcmlvcml0eSB8fCAwLFxuICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnOiAodGhpcy5vYmplY3QuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlcbiAgICB9KVxuICAgIGNvbnN0IGh0bWwgPSAkKHRoaXMub2JqZWN0LnNoZWV0LmVsZW1lbnQpLmZpbmQoJ2hlYWRlci53aW5kb3ctaGVhZGVyIGEuaGVhZGVyLWJ1dHRvbi5lZGl0LWNvYy1pZC13YXJuaW5nLGhlYWRlci53aW5kb3ctaGVhZGVyIGEuaGVhZGVyLWJ1dHRvbi5lZGl0LWNvYy1pZC1leGlzaXRpbmcnKVxuICAgIGlmIChodG1sLmxlbmd0aCkge1xuICAgICAgaHRtbC5jc3Moe1xuICAgICAgICBjb2xvcjogKGlkID8gJ3ZhcigtLWNvbG9yLXRleHQtbGlnaHQtaGlnaGxpZ2h0KScgOiAncmVkJylcbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmltcG9ydCB7IENvQ0lERWRpdG9yIH0gZnJvbSAnLi4vYXBwcy9jb2MtaWQtZWRpdG9yLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiAoaGVhZGVyQnV0dG9ucywgc2hlZXQpIHtcbiAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgY29uc3Qgc2hlZXRDb0NJRCA9IHNoZWV0Lm9iamVjdC5mbGFncz8uQ29DNz8uY29jaWRGbGFnXG4gICAgY29uc3Qgbm9JZCA9ICh0eXBlb2Ygc2hlZXRDb0NJRCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHNoZWV0Q29DSUQuaWQgPT09ICd1bmRlZmluZWQnIHx8IHNoZWV0Q29DSUQuaWQgPT09ICcnKVxuICAgIGNvbnN0IENvQ0lERWRpdG9yQnV0dG9uID0ge1xuICAgICAgY2xhc3M6IChub0lkID8gJ2VkaXQtY29jLWlkLXdhcm5pbmcnIDogJ2VkaXQtY29jLWlkLWV4aXNpdGluZycpLFxuICAgICAgbGFiZWw6ICdDb0M3LkNvQ0lERmxhZy5pZCcsXG4gICAgICBpY29uOiAnZmFzIGZhLWZpbmdlcnByaW50JyxcbiAgICAgIG9uY2xpY2s6ICgpID0+IHtcbiAgICAgICAgbmV3IENvQ0lERWRpdG9yKHNoZWV0Lm9iamVjdCwge30pLnJlbmRlcih0cnVlLCB7IGZvY3VzOiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG51bWJlck9mQnV0dG9ucyA9IGhlYWRlckJ1dHRvbnMubGVuZ3RoXG4gICAgaGVhZGVyQnV0dG9ucy5zcGxpY2UobnVtYmVyT2ZCdXR0b25zIC0gMSwgMCwgQ29DSURFZGl0b3JCdXR0b24pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBDb0M3Q29udGV4dE1lbnUge1xuICBiaW5kIChtZW51LCBodG1sLCBjYWxsYmFjaykge1xuICAgIHRoaXMuX2NhbGxiYWNrID0gY2FsbGJhY2tcbiAgICB0aGlzLl9odG1sID0gaHRtbFxuICAgIHRoaXMuX21lbnUgPSBtZW51XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lbnVUcmlnZ2VyID0gaHRtbC5maW5kKGBbZGF0YS1jb250ZXh0LW1lbnU9JHttZW51LmlkfV1gKSAvLyBGaW5kIGFsbCBtZW51IHRyaWdnZXJzLlxuICAgICAgaWYgKG1lbnVUcmlnZ2VyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC8vIElmIHRoZXJlIGlzIG5vIHRyaWdnZXIsIGRvIG5vdCBjb250aW51ZS5cbiAgICAgIG1lbnVUcmlnZ2VyLmNvbnRleHRtZW51KHRoaXMuX29uQ29udGV4dE1lbnUuYmluZCh0aGlzKSkgLy8gQXR0YWNoIHRoZSBoYW5kbGVyLlxuICAgICAgY29uc3QgbWVudUVsZW1lbnQgPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlTWVudShtZW51KSAvLyBCdWlsZCB0aGUgbWVudVxuICAgICAgbWVudUVsZW1lbnQub24oJ2NsaWNrJyxcbiAgICAgICAgJy5tZW51LWFjdGlvbicsXG4gICAgICAgIHRoaXMuX29uTWVudUFjdGlvbi5iaW5kKHRoaXMpKVxuICAgICAgLy8gY29uc3QgZG9jdW1lbnRNZW51ID0gdGhpcy5tZW51Q29udGFpbmVyLmZpbmQoYC5jb250ZXh0LW1lbnUtd3JhcHBlci4ke21lbnUuaWR9YClcbiAgICAgIGlmICh0aGlzLm1lbnUubGVuZ3RoICE9PSAwKSB0aGlzLm1lbnUucmVwbGFjZVdpdGgobWVudUVsZW1lbnQpXG4gICAgICBlbHNlIHRoaXMubWVudUNvbnRhaW5lci5hcHBlbmQobWVudUVsZW1lbnQpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgZ2V0IG1lbnVDb250YWluZXIgKCkge1xuICAgIGxldCBtZW51Q29udGFpbmVyID0gdGhpcy5faHRtbC5maW5kKCcubWVudS1jb250YWluZXInKVxuICAgIGlmIChtZW51Q29udGFpbmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5faHRtbC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtZW51LWNvbnRhaW5lclwiPjwvZGl2PicpXG4gICAgICBtZW51Q29udGFpbmVyID0gdGhpcy5faHRtbC5maW5kKCcubWVudS1jb250YWluZXInKVxuICAgIH1cbiAgICByZXR1cm4gbWVudUNvbnRhaW5lclxuICB9XG5cbiAgZ2V0IG1lbnUgKCkge1xuICAgIC8vIGNvbnN0IG1lbnVDb250YWluZXIgPSB0aGlzLm1lbnVDb250YWluZXJcbiAgICAvLyBpZiAoIW1lbnVDb250YWluZXIgfHwgbWVudUNvbnRhaW5lci5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMubWVudUNvbnRhaW5lci5maW5kKGAuY29udGV4dC1tZW51LXdyYXBwZXIuJHt0aGlzLl9tZW51LmlkfWApXG4gIH1cblxuICBfb25NZW51QWN0aW9uIChldmVudCkge1xuICAgIC8vIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYnJhbmNoJykpIHJldHVyblxuICAgIHJldHVybiB0aGlzLl9jYWxsYmFjayhldmVudCwgdGhpcy50YXJnZXQpXG4gIH1cblxuICBzdGF0aWMgY2xvc2VBbGwgKCkge1xuICAgIGNvbnN0IG1lbnVDb250YWluZXJzID0gJCgnYm9keScpLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgY29uc3QgbWVudXMgPSBtZW51Q29udGFpbmVycy5maW5kKCcuY29udGV4dC1tZW51LXdyYXBwZXInKVxuICAgIG1lbnVzLmVhY2goZnVuY3Rpb24gKGksIG0pIHsgbS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbicgfSlcbiAgICAvLyBib2R5LmZpbmQoJy5tZW51LXdyYXBwZXInKS5oaWRlKClcbiAgfVxuXG4gIF9vbkNvbnRleHRNZW51IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KHRydWUpXG4gICAgQ29DN0NvbnRleHRNZW51LmNsb3NlQWxsKCkgLy8gT25seSAxIG1lbnUgY2FuIGJlIG9wZW4uXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXRcbiAgICB0aGlzLnRhcmdldCA9IHRhcmdldFxuICAgIGlmICghdGFyZ2V0KSByZXR1cm5cbiAgICBjb25zdCBtZW51TmFtZSA9IHRhcmdldC5kYXRhc2V0Py5jb250ZXh0TWVudVxuICAgIGlmIChtZW51TmFtZSA9PT0gdGhpcy5fbWVudS5pZCkge1xuICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMubWVudVxuICAgICAgaWYgKHdyYXBwZXIubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBzdWJNZW51ID0gd3JhcHBlci5maW5kKCcuc3ViLW1lbnUnKVxuICAgICAgICBsZXQgbGVmdCA9IGV2ZW50LmNsaWVudFhcbiAgICAgICAgbGV0IHRvcCA9IGV2ZW50LmNsaWVudFlcbiAgICAgICAgY29uc3QgbWVudUhlaWdodCA9IHdyYXBwZXIub3V0ZXJIZWlnaHQoKVxuICAgICAgICBjb25zdCBtZW51V2lkdGggPSB3cmFwcGVyLm91dGVyV2lkdGgoKVxuICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IDwgbWVudUhlaWdodCArIHRvcCkge1xuICAgICAgICAgIHRvcCA9IHRvcCAtIG1lbnVIZWlnaHRcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCBtZW51V2lkdGggKyBsZWZ0KSB7XG4gICAgICAgICAgbGVmdCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gbWVudVdpZHRoXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Yk1lbnUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IG1lbnVXaWR0aCArIGxlZnQgKyBzdWJNZW51Lm91dGVyV2lkdGgoKSkge1xuICAgICAgICAgICAgc3ViTWVudS5jc3Moe1xuICAgICAgICAgICAgICByaWdodDogYCR7bWVudVdpZHRoIC0gNX1weGAsXG4gICAgICAgICAgICAgIGxlZnQ6ICcnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdWJNZW51LmNzcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IGAke21lbnVXaWR0aCAtIDV9cHhgLFxuICAgICAgICAgICAgICByaWdodDogJydcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdyYXBwZXIuY3NzKHtcbiAgICAgICAgICBsZWZ0OiBgJHtsZWZ0fXB4YCxcbiAgICAgICAgICB0b3A6IGAke3RvcH1weGAsXG4gICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNhblNlZSAodmlzaWJpbGl0eSkge1xuICAgIHN3aXRjaCAodmlzaWJpbGl0eS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdnbSc6XG4gICAgICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxuICAgICAgY2FzZSAndHJ1c3RlZCc6XG4gICAgICAgIHJldHVybiBnYW1lLnVzZXIuaXNUcnVzdGVkXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBDcmVhdGVNZW51IChtZW51KSB7XG4gICAgY29uc3QgY2xhc3NlcyA9IHR5cGVvZiBtZW51LmNsYXNzZXMgPT09ICdzdHJpbmcnID8gW21lbnUuY2xhc3Nlc10gOiBtZW51LmNsYXNzZXNcbiAgICBjbGFzc2VzLnB1c2goJ2NvbnRleHQtbWVudS13cmFwcGVyJylcbiAgICBjb25zdCB3cmFwcGVyID0gJCgnPGRpdj48L2Rpdj4nKVxuICAgIHdyYXBwZXIuYWRkQ2xhc3MobWVudS5pZClcbiAgICBjbGFzc2VzLmZvckVhY2goYyA9PiB3cmFwcGVyLmFkZENsYXNzKGMpKVxuICAgIGlmIChtZW51LnNlY3Rpb24pIHtcbiAgICAgIG1lbnUuc2VjdGlvbi5mb3JFYWNoKHMgPT4ge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gQ29DN0NvbnRleHRNZW51LkNyZWF0ZVNlY3Rpb24ocywgeyBtdWx0aTogdHJ1ZSB9KVxuICAgICAgICBpZiAoc2VjdGlvbikgd3JhcHBlci5hcHBlbmQoc2VjdGlvbilcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNlY3Rpb24gPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihtZW51KVxuICAgICAgaWYgKHNlY3Rpb24pIHdyYXBwZXIuYXBwZW5kKHNlY3Rpb24pXG4gICAgfVxuICAgIHJldHVybiB3cmFwcGVyXG4gIH1cblxuICBzdGF0aWMgQ3JlYXRlU2VjdGlvbiAocywgeyBtdWx0aSA9IGZhbHNlLCBzdWJNZW51ID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFzLml0ZW1zKSByZXR1cm4gbnVsbFxuICAgIGlmIChzLnZpc2liaWxpdHkgJiYgIUNvQzdDb250ZXh0TWVudS5jYW5TZWUocy52aXNpYmlsaXR5KSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjbGFzc2VzID0gcy5jbGFzc2VzID8gdHlwZW9mIHMuY2xhc3NlcyA9PT0gJ3N0cmluZycgPyBbcy5jbGFzc2VzXSA6IHMuY2xhc3NlcyA6IFtdXG4gICAgaWYgKG11bHRpKSBjbGFzc2VzLnB1c2goJ21lbnUtc2VjdGlvbicpXG4gICAgaWYgKHN1Yk1lbnUpIGNsYXNzZXMucHVzaCgnc3ViLW1lbnUnKVxuICAgIGNvbnN0IHNlY3Rpb24gPSAkKCc8dWw+PC91bD4nKVxuICAgIGNsYXNzZXMuZm9yRWFjaChjID0+IHNlY3Rpb24uYWRkQ2xhc3MoYykpXG4gICAgcy5pdGVtcy5mb3JFYWNoKGkgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKCc8bGk+PC9saT4nKVxuICAgICAgbGkuYWRkQ2xhc3MoJ21lbnUtaXRlbScpXG4gICAgICBpZiAoaS5hY3Rpb24pIHtcbiAgICAgICAgbGkuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uJylcbiAgICAgICAgbGkuYXR0cignZGF0YS1hY3Rpb24nLCBpLmFjdGlvbilcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgaS5sYWJlbCA9PT0gJ3N0cmluZycpIGxpLmFwcGVuZChgPHNwYW4+JHtpLmxhYmVsfTwvc3Bhbj5gKVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmIChpLmxhYmVsLmljb24pIGxpLmFwcGVuZChgPGkgY2xhc3M9XCIke2kubGFiZWwuaWNvbn1cIj48L2k+YClcbiAgICAgICAgaWYgKGkubGFiZWwudGV4dCkgbGkuYXBwZW5kKGA8c3Bhbj4ke2kubGFiZWwudGV4dH08L3NwYW4+YClcbiAgICAgIH1cbiAgICAgIGlmIChpLnN1Yk1lbnUpIHtcbiAgICAgICAgbGkuYWRkQ2xhc3MoJ3N1Yi1tZW51LWJ1dHRvbicpXG4gICAgICAgIGxpLmFwcGVuZCgnPGkgY2xhc3M9XCJmYXMgZmEtY2FyZXQtcmlnaHRcIj48L2k+JylcbiAgICAgICAgY29uc3Qgc3ViID0gQ29DN0NvbnRleHRNZW51LkNyZWF0ZVNlY3Rpb24oaS5zdWJNZW51LCB7IHN1Yk1lbnU6IHRydWUgfSlcbiAgICAgICAgaWYgKHN1YikgbGkuYXBwZW5kKHN1YilcbiAgICAgIH1cbiAgICAgIHNlY3Rpb24uYXBwZW5kKGxpKVxuICAgIH0pXG4gICAgcmV0dXJuIHNlY3Rpb25cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEFjdG9yU2hlZXQsIENoYXRNZXNzYWdlLCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZm91bmRyeSwgZ2FtZSwgSG9va3MsIFJvbGwsIFRleHRFZGl0b3IsIHVpICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdE1lc3NhZ2UgfSBmcm9tICcuLi8uLi9hcHBzL2NvYzctY2hhdC1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q29udGVudExpbmtEaWFsb2cgfSBmcm9tICcuLi8uLi9hcHBzL2NvYzctY29udGVudC1saW5rLWRpYWxvZy5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uLy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi8uLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JTaGVldCBleHRlbmRzIEFjdG9yU2hlZXQge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLnNob3dIaWRkZW5EZXZNZW51ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG5cbiAgICBzaGVldERhdGEuY2FuRHJhZ1Rva2VuID0gISF0aGlzLnRva2VuICYmIGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmxpbmtlZEFjdG9yID0gdGhpcy5hY3Rvci5wcm90b3R5cGVUb2tlbj8uYWN0b3JMaW5rID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmlzVG9rZW4gPSB0aGlzLmFjdG9yLmlzVG9rZW5cbiAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUgPSB7fVxuICAgIHNoZWV0RGF0YS5za2lsbHMgPSB7fVxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbHMgPSB7fVxuICAgIHNoZWV0RGF0YS53ZWFwb25zID0ge31cbiAgICBzaGVldERhdGEucmFuZ2VXcG4gPSBbXVxuICAgIHNoZWV0RGF0YS5tZWxlZVdwbiA9IFtdXG4gICAgc2hlZXREYXRhLmFjdG9yRmxhZ3MgPSB7fVxuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPVxuICAgICAgdGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJ1xuICAgICAgICA/IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxuICAgICAgICA6IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZU5QQ0FjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxuXG4gICAgc2hlZXREYXRhLnBlcm1pc3Npb25MaW1pdGVkID0gIWdhbWUudXNlci5pc0dNICYmICh0aGlzLmFjdG9yLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IHRoaXMuYWN0b3Iub3duZXJzaGlwLmRlZmF1bHQpID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLkxJTUlURURcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmFsbG93VW5sb2NrID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxuICAgICAgZ2FtZS51c2VyLmlzR00gfHxcbiAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2NyZWF0aW9uJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJykpXG4gICAgaWYgKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdjcmVhdGlvbicgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgICkge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSAhPT0gJ3ZlaGljbGUnKSB7XG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcyA9IHtcbiAgICAgICAgICBzdHI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuU1RSJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlN0cmVuZ3RoJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5DT04nLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQ29uc3RpdHV0aW9uJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpejoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5TSVonLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXg6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuREVYJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkRleHRlcml0eScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkFwcGVhcmFuY2UnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW50OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLklOVCcsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcG93OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlBPVycsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Qb3dlcicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkVkdWNhdGlvbicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMgPSB7XG4gICAgICAgICAgaHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdIUCcsXG4gICAgICAgICAgICBsYWJlbDogJ0hpdCBwb2ludHMnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbXA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdIUCcsXG4gICAgICAgICAgICBsYWJlbDogJ01hZ2ljIHBvaW50cycsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsY2s6IHsgdmFsdWU6IG51bGwsIHNob3J0OiAnTENLJywgbGFiZWw6ICdMdWNrJyB9LFxuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IDk5LFxuICAgICAgICAgICAgc2hvcnQ6ICdTQU4nLFxuICAgICAgICAgICAgbGFiZWw6ICdTYW5pdHknLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbW92OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnTU9WJyxcbiAgICAgICAgICAgIGxhYmVsOiAnTW92ZW1lbnQgcmF0ZScsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0RCJyxcbiAgICAgICAgICAgIGxhYmVsOiAnRGFtYWdlIGJvbnVzJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJ1aWxkOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQkxEJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQnVpbGQnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJtb3I6IHsgdmFsdWU6IG51bGwsIGF1dG86IGZhbHNlIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSA9IHtcbiAgICAgICAgICBwZXJzb25hbERlc2NyaXB0aW9uOiB7IHR5cGU6ICdzdHJpbmcnLCB2YWx1ZTogJycgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcyA9IHtcbiAgICAgICAgICBvY2N1cGF0aW9uOiAnJyxcbiAgICAgICAgICBhZ2U6ICcnLFxuICAgICAgICAgIHNleDogJycsXG4gICAgICAgICAgcmVzaWRlbmNlOiAnJyxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiAnJyxcbiAgICAgICAgICBhcmNoZXR5cGU6ICcnLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbjogJycsXG4gICAgICAgICAgcGxheWVybmFtZTogJydcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncykge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MgPSB7IGxvY2tlZDogdHJ1ZSwgbWFudWFsQ3JlZGl0OiBmYWxzZSB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNyZWRpdCkge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY3JlZGl0ID0ge1xuICAgICAgICAgIG1vbmV0YXJ5U3ltYm9sOiBudWxsLFxuICAgICAgICAgIG11bHRpcGxpZXI6IG51bGwsXG4gICAgICAgICAgc3BlbnQ6IG51bGwsXG4gICAgICAgICAgYXNzZXRzRGV0YWlsczogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRldmVsb3BtZW50KSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXZlbG9wbWVudCA9IHtcbiAgICAgICAgICBwZXJzb25hbDogbnVsbCxcbiAgICAgICAgICBvY2N1cGF0aW9uOiBudWxsLFxuICAgICAgICAgIGFyY2hldHlwZTogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSA9IFtdXG5cbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZUFyY2hldHlwZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJylcbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZU9yZ2FuaXphdGlvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAnQ29DNycsXG4gICAgICAgICdwdWxwUnVsZU9yZ2FuaXphdGlvbidcbiAgICAgIClcbiAgICB9XG5cbiAgICBzaGVldERhdGEuaXNEZWFkID0gdGhpcy5hY3Rvci5kZWFkXG4gICAgc2hlZXREYXRhLmlzRHlpbmcgPSB0aGlzLmFjdG9yLmR5aW5nXG5cbiAgICBpZiAoc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICAgIC8vIHNpIGMnZXN0IHVuZSBmb3JtdWxlIGV0IHF1J29uIHBldXQgbCdldmFsdWVyXG4gICAgICAgIC8vIGNlIGJsb2MgZGV2cmFpdCBldHJlIGTDqXBsYWPDqSBkYW5zIGxlIGJsb2MgX3VwZGF0ZUZvcm1EYXRhXG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5yYW5nZWQpIHtcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuUmFuZ2VkU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IudHlwZSAhPT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoaXRlbS5zeXN0ZW0udmFsdWUpKSkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICAgICAgICAgIENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0XG4gICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBmb3VuZHJ5LnV0aWxzLmdldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zdWJzdHJpbmcoNSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IChcbiAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKGl0ZW0uc3lzdGVtLnZhbHVlLCBwYXJzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS50b3RhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yVW5hYmxlVG9QYXJzZVNraWxsRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uc3lzdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbFxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1Ub1VwZGF0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgICAgICAgICAgIGBbQ09DN10gKEFjdG9yOiR7dGhpcy5uYW1lfSkgRXZhbHVhdGluZyBza2lsbCAke2l0ZW0ubmFtZX06JHtpdGVtLnN5c3RlbS52YWx1ZX0gdG8gJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW1Ub1VwZGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS52YWx1ZSc6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgY29uc3QgeyBiYXNlLCByYXdWYWx1ZSwgdmFsdWUgfSA9IHNraWxsLnN5c3RlbVxuXG4gICAgICAgICAgICAvLyBBc3N1bWUgZmFsbGJhY2sgdmFsdWVzLCB1c2VmdWwgZm9yIGluaXRpYWwgc2V0dXAgb2Ygc2tpbGxzXG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5yYXdWYWx1ZSA9IHJhd1ZhbHVlIHx8IHZhbHVlIHx8IGJhc2VcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gdmFsdWUgfHwgYmFzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYmFzZSA9IGF3YWl0IHNraWxsLmFzeW5jQmFzZSgpXG5cbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS52YWx1ZSkge1xuICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBwYXJ0IG9mIG1pZ3JhdGlvbiBvciBkb25lIGF0IGluaXQgIVxuICAgICAgICAgICAgICAvLyBXYXMgZG9uZSB3aGVuIHNraWxsIHZhbHVlIHdhcyBjaGFuZ2VkIHRvIGJhc2UgKyBhZGp1c3RlbWVudFxuICAgICAgICAgICAgICBjb25zdCBleHAgPSBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgbGV0IHVwZGF0ZWRFeHAgPSBleHAgKyBwYXJzZUludChpdGVtLnN5c3RlbS52YWx1ZSkgLSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgICBpZiAodXBkYXRlZEV4cCA8PSAwKSB1cGRhdGVkRXhwID0gbnVsbFxuICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgICAgICAgICAgYFtDT0M3XSBVcGRhdGluZyBza2lsbCAke3NraWxsLm5hbWV9IGV4cGVyaWVuY2UuIEV4cGVyaWVuY2UgbWlzc2luZzogJHt1cGRhdGVkRXhwfWBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIF9pZDogaXRlbS5faWQsXG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiB1cGRhdGVkRXhwLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS52YWx1ZSc6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgIGlmICghaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMpIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzID0ge31cbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSA9IHVwZGF0ZWRFeHBcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0ucmF3VmFsdWUgPSBza2lsbC5yYXdWYWx1ZVxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS52YWx1ZSA9IHNraWxsLnZhbHVlIC8vIEFDVElWRV9FRkZFQ1QgbmVjZXNzYXJ5IHRvIGFwcGx5IGVmZmVjdHNcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gc2tpbGwudmFsdWUgLy8gQUNUSVZFX0VGRkVDVCBuZWNlc3NhcnkgdG8gYXBwbHkgZWZmZWN0c1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5yYXdWYWx1ZSA9IHNraWxsLnJhd1ZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxpc3QgPSBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXVxuICAgICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgICBsaXN0ID0gW11cbiAgICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXSA9IGxpc3RcbiAgICAgICAgfVxuICAgICAgICBsaXN0LnB1c2goaXRlbSlcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBpdGVtVHlwZSBpbiBzaGVldERhdGEuaXRlbXNCeVR5cGUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW1UeXBlXS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgIH1cblxuICAgICAgLy8gcmVkb25kYW50IGF2ZWMgbWF0cmljZSBpdGVtYnl0eXBlXG4gICAgICBzaGVldERhdGEuc2tpbGxzID0gc2hlZXREYXRhLml0ZW1zXG4gICAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdza2lsbCcpXG4gICAgICAgIC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgICAgc2hlZXREYXRhLm1lbGVlU2tpbGxzID0gc2hlZXREYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+XG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSB0cnVlICYmXG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPT09IHRydWVcbiAgICAgIClcbiAgICAgIHNoZWV0RGF0YS5yYW5nZVNraWxscyA9IHNoZWV0RGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgIChza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID09PSB0cnVlIHx8IHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLnJhbmdlZCA9PT0gdHJ1ZSlcbiAgICAgIClcblxuICAgICAgY29uc3QgY2J0U2tpbGxzID0gc2hlZXREYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+IHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZVxuICAgICAgKVxuICAgICAgaWYgKGNidFNraWxscykge1xuICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGNidFNraWxscykge1xuICAgICAgICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbHNbc2tpbGwuX2lkXSA9IHNraWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgd2VhcG9ucyA9IHNoZWV0RGF0YS5pdGVtc0J5VHlwZS53ZWFwb25cblxuICAgICAgaWYgKHdlYXBvbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCB3ZWFwb24gb2Ygd2VhcG9ucykge1xuICAgICAgICAgIHdlYXBvbi51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5icnN0ID09PSB0cnVlXG4gICAgICAgICAgaWYgKCF3ZWFwb24uc3lzdGVtLmFtbW8pIHdlYXBvbi5zeXN0ZW0uYW1tbyA9IDBcblxuICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IHRydWVcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9ICcnO1xuICAgICAgICAgIC8vIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi52YWx1ZSA9IDA7XG4gICAgICAgICAgLy8gd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgPSAnJztcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYudmFsdWUgPSAwO1xuICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQgPT09ICcnKSB7XG4gICAgICAgICAgICAvLyBUT0RPIDogc2kgbCdJRCBuJ2VzdHMgcGFzIGTDqWZpbmllIG1haXMgcXUndW4gbm9tIGEgw6l0w6kgZG9ubsOpLCB1dGlsaXNlciBjZSBub20gZXQgdGFudGVyIGRlIHJldHJvdXZlciBsZSBza2lsbFxuICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVE9ETyA6IGF2YW50IGQnYXNzaWdlciBsZSBza2lsbCB2w6lyaWZpZXIgcXUnaWwgZXhpc3RlIHRvdWpvdXJzLlxuICAgICAgICAgICAgLy8gc2kgaWwgbidleGlzdGUgcGx1cyBpbCBmYXV0IGxlIHJldHJvdXZlciBvdSBwYXNzZXIgc2tpbGxzZXQgYSBmYWxzZS5cbiAgICAgICAgICAgIGlmIChzaGVldERhdGEuY29tYmF0U2tpbGxzW3dlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZF0pIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldCh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lID0gc2tpbGwuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4udmFsdWUgPSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5jb21iYXRTa2lsbHNbd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgPSBza2lsbC5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LnZhbHVlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uX3Byb3BlcnRpZXMgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0ge31cbiAgICAgICAgICAgIHByb3BlcnR5LmlkID0ga2V5XG4gICAgICAgICAgICBwcm9wZXJ0eS5uYW1lID0gdmFsdWVcbiAgICAgICAgICAgIHByb3BlcnR5LnZhbHVlID0gd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uX3Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzaGVldERhdGEud2VhcG9uc1t3ZWFwb24uX2lkXSA9IHdlYXBvblxuICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkgc2hlZXREYXRhLnJhbmdlV3BuLnB1c2god2VhcG9uKVxuICAgICAgICAgIGVsc2Ugc2hlZXREYXRhLm1lbGVlV3BuLnB1c2god2VhcG9uKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gdGhpcy50b2tlblxuICAgICAgc2hlZXREYXRhLnRva2VuSWQgPSB0b2tlblxuICAgICAgICA/IGAke3Rva2VuLnBhcmVudD8uaWQgPyB0b2tlbi5wYXJlbnQuaWQgOiAnVE9LRU4nfS4ke3Rva2VuLmlkfWBcbiAgICAgICAgOiBudWxsIC8vIFJFRkFDVE9SSU5HICgyKVxuXG4gICAgICBzaGVldERhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID0gZmFsc2VcbiAgICAgIGlmIChzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hhcmFjdGVyaXN0aWMgb2YgT2JqZWN0LnZhbHVlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUpIGNoYXJhY3RlcmlzdGljLmVkaXRhYmxlID0gdHJ1ZVxuICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmhhcmQgPSBNYXRoLmZsb29yKGNoYXJhY3RlcmlzdGljLnZhbHVlIC8gMilcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5leHRyZW1lID0gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpYy52YWx1ZSAvIDUpXG5cbiAgICAgICAgICAvLyBJZiBubyB2YWx1ZSAmJiBubyBmb3JtdWxhIGRvbid0IGRpc3BsYXkgY2hhcmFjLlxuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUgJiYgIWNoYXJhY3RlcmlzdGljLmZvcm11bGEpIHtcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmRpc3BsYXkgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5kaXNwbGF5ID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlmIGFueSBjaGFyYWN0ZXJpc3RpYyBoYXMgbm8gdmFsdWUgYnV0IGhhcyBhIGZvcm11bGEuXG4gICAgICAgICAgaWYgKCFjaGFyYWN0ZXJpc3RpYy52YWx1ZSAmJiBjaGFyYWN0ZXJpc3RpYy5mb3JtdWxhKSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2hlZXREYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSA9XG4gICAgICAgICAgICBzaGVldERhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhIHx8XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvciBjb21wYXQgd2l0aCBwcmV2aW91cyBjaGFyYWN0ZXJzIHRlc3QgaWYgYXV0byBpcyBkZWZpbmllZCwgaWYgbm90IHdlIGRlZmluZSBpdFxuICAgIGlmICghWyd2ZWhpY2xlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKHRoaXMuYWN0b3IudHlwZSkpIHtcbiAgICAgIGNvbnN0IGF1dG8gPSB0aGlzLmFjdG9yLmNoZWNrVW5kZWZpbmVkQXV0bygpXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHNoZWV0RGF0YS5kYXRhLnN5c3RlbSwgYXV0bylcbiAgICB9IGVsc2Uge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuaHAuYXV0byA9IGZhbHNlXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1vdi5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLmRiLmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuYnVpbGQuYXV0byA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlIDwgMCkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPSBudWxsXG4gICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA8IDApIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA9IG51bGxcblxuICAgIGlmICghWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5hY3Rvci50eXBlKSkge1xuICAgICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkgaW5zdGFuY2VvZiBBcnJheSAmJiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5Lmxlbmd0aCkge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5WzBdLmlzRmlyc3QgPSB0cnVlXG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHlbc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeS5sZW5ndGggLSAxXS5pc0xhc3QgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID0gZmFsc2VcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9ucyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlBcm1vciA9IGZhbHNlXG5cbiAgICBzaGVldERhdGEuaGFzQ29uZGl0aW9ucyA9XG4gICAgICB0aGlzLmFjdG9yLmVmZmVjdHMuc2l6ZSA+IDAgfHxcbiAgICAgICh0eXBlb2YgdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucykuZmlsdGVyKFxuICAgICAgICAgIGNvbmRpdGlvbiA9PiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zW2NvbmRpdGlvbl0udmFsdWVcbiAgICAgICAgKS5sZW5ndGggPiAwKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLy8gc3RhdGljIHBhcnNlRm9ybXVsYSAoZm9ybXVsYSkge1xuICAvLyAgIGxldCBwYXJzZWRGb3JtdWxhID0gZm9ybXVsYVxuICAvLyAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAvLyAgICAgcGFyc2VkRm9ybXVsYSA9IHBhcnNlZEZvcm11bGEucmVwbGFjZShrZXksIHZhbHVlKVxuICAvLyAgIH1cbiAgLy8gICByZXR1cm4gcGFyc2VkRm9ybXVsYVxuICAvLyB9XG5cbiAgZ2V0IHRva2VuS2V5ICgpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdERVBSRUNBVEVEIFNIT1VMRCBOT1QgSEFQUEVOIScpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdiYXNlLmpzIGdldCB0b2tlbktleSgpOiBERVBSRUNBVEVEIFNIT1VMRCBOT1QgSEFQUEVOIScpXG4gICAgLy8gaWYoIHRoaXMudG9rZW4pIHJldHVybiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmRhdGEuX2lkfWA7ICAvL1JFRkFDVE9SSU5HICgyKVxuICAgIC8vIHJldHVybiB0aGlzLmFjdG9yLmlkO1xuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHtcbiAgICAvLyB0aGlzLmFjdG9yLmxvY2tlZCA9IHRydWU7XG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcuc2VjdGlvbi1oZWFkZXInKS5jbGljayh0aGlzLl9vblNlY3Rpb25IZWFkZXIuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtcy1oZWFkZXInKS5jbGljayh0aGlzLl9vbkl0ZW1IZWFkZXIuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pbnZlbnRvcnktaGVhZGVyJykuY2xpY2sodGhpcy5fb25JbnZlbnRvcnlIZWFkZXIuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yZWFkLW9ubHknKS5kYmxjbGljayh0aGlzLl90b2dnbGVSZWFkT25seS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmFkZC1hbW1vJykuY2xpY2sodGhpcy5fb25BZGRBbW8uYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yZWxvYWQtd2VhcG9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZWxvYWRXZWFwb24oZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLnJlbG9hZC13ZWFwb24nKS5vbignY29udGV4dG1lbnUnLCBldmVudCA9PiB0aGlzLl9vblJlbG9hZFdlYXBvbihldmVudCkpXG5cbiAgICAvLyBPd25lciBPbmx5IExpc3RlbmVyc1xuICAgIGlmICh0aGlzLmFjdG9yLmlzT3duZXIgJiYgISh0aGlzLmFjdG9yLmNvbXBlbmRpdW0/LmxvY2tlZCA/PyBmYWxzZSkpIHtcbiAgICAgIGh0bWwuZmluZCgnLmxvY2snKS5jbGljayh0aGlzLl9vbkxvY2tDbGlja2VkLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5mbGFnJykuY2xpY2sodGhpcy5fb25GbGFnQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuZm9ybXVsYScpLmNsaWNrKHRoaXMuX29uRm9ybXVsYUNsaWNrZWQuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmF1dG8tdG9nZ2xlJykuY2xpY2sodGhpcy5fb25BdXRvVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgLy8gT3duZXIgT25seSwgbm90IGF2YWlsYWJsZSBmcm9tIGNvbXBlbmRpdW1cbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyICYmIHR5cGVvZiB0aGlzLmFjdG9yLmNvbXBlbmRpdW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1lbnVzKSB0aGlzLm1lbnVzID0gW11cblxuICAgICAgICBjb25zdCByb2xsTWVudSA9IHtcbiAgICAgICAgICBpZDogJ3NraWxsLXJvbGwnLFxuICAgICAgICAgIGNsYXNzZXM6ICdyb2xsLW1lbnUnLFxuICAgICAgICAgIHNlY3Rpb246IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NlczogJ21haW4nLFxuICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAncm9sbCcsIGxhYmVsOiAnUm9sbCcgfSxcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ29wcG9zZWQtcm9sbCcsIGxhYmVsOiAnT3Bwb3NlZCByb2xsJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29tYmluZWQtcm9sbCcsIGxhYmVsOiAnQ29tYmluZWQgcm9sbCcgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGFzc2VzOiAna2VlcGVyJyxcbiAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ2dtJyxcbiAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBsYWJlbDogeyBpY29uOiAnZmFzIGZhLWxpbmsnLCB0ZXh0OiAnTGluaycgfSxcbiAgICAgICAgICAgICAgICAgIHN1Yk1lbnU6IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2xpbmstdG9vbCcsIGxhYmVsOiAnT3BlbiBpbiBsaW5rIHRvb2wnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvcHktdG8tY2xpcGJvYXJkJywgbGFiZWw6ICdDb3B5IHRvIGNsaXAtYm9hcmQnIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdyZXF1ZXN0LXJvbGwnLCBsYWJlbDogJ1JlcXVlc3Qgcm9sbCcgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2FuTWVudSA9IHtcbiAgICAgICAgICBpZDogJ3Nhbi1yb2xsJyxcbiAgICAgICAgICBjbGFzc2VzOiAncm9sbC1tZW51JyxcbiAgICAgICAgICBzZWN0aW9uOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsYXNzZXM6ICdtYWluJyxcbiAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2VuY291bnRlcicsIGxhYmVsOiAnRW5jb3VudGVyJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAncm9sbCcsIGxhYmVsOiAnUm9sbCcgfSxcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ29wcG9zZWQtcm9sbCcsIGxhYmVsOiAnT3Bwb3NlZCByb2xsJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29tYmluZWQtcm9sbCcsIGxhYmVsOiAnQ29tYmluZWQgcm9sbCcgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGFzc2VzOiAna2VlcGVyJyxcbiAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3RydXN0ZWQnLFxuICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAncmVxdWVzdC1yb2xsJywgbGFiZWw6ICdSZXF1ZXN0IHJvbGwnIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6IHsgaWNvbjogJ2ZhcyBmYS1saW5rJywgdGV4dDogJ0xpbmsnIH0sXG4gICAgICAgICAgICAgICAgICBzdWJNZW51OiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdsaW5rLXRvb2wnLCBsYWJlbDogJ09wZW4gaW4gbGluayB0b29sJyB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnc2VuZC1jaGF0JywgbGFiZWw6ICdTZW5kIHRvIGNoYXQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb3B5LXRvLWNsaXBib2FyZCcsIGxhYmVsOiAnQ29weSB0byBjbGlwLWJvYXJkJyB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay1lbmNvdW50ZXInLCBsYWJlbDogJ0VuY291bnRlcicgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgcm9sbENvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICAgIHJvbGxDb250ZXh0TWVudS5iaW5kKHJvbGxNZW51LCBodG1sLCB0aGlzLl9vbkNvbnRleHRNZW51Q2xpY2suYmluZCh0aGlzKSlcbiAgICAgICAgdGhpcy5tZW51cy5wdXNoKHJvbGxDb250ZXh0TWVudSlcblxuICAgICAgICBjb25zdCBzYW5Db250ZXh0TWVudSA9IG5ldyBDb0M3Q29udGV4dE1lbnUoKVxuICAgICAgICBzYW5Db250ZXh0TWVudS5iaW5kKHNhbk1lbnUsIGh0bWwsIHRoaXMuX29uQ29udGV4dE1lbnVDbGljay5iaW5kKHRoaXMpKVxuICAgICAgICB0aGlzLm1lbnVzLnB1c2goc2FuQ29udGV4dE1lbnUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXG4gICAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2tpbGwtbmFtZS5yb2xsYWJsZScpXG4gICAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsLnJvbGxhYmxlJylcbiAgICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgfVxuXG4gICAgICAvLyBjb250ZXh0IG1lbnUgYmluZFxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJykuY2xpY2sodGhpcy5fb25Sb2xsU2tpbGxUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5za2lsbC1pbWFnZScpLmNsaWNrKHRoaXMuX29uUm9sbFNraWxsVGVzdC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbC5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayh0aGlzLl9vblJvbGxBdHRyaWJUZXN0LmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy50b2tlbi1kcmFnLWhhbmRsZScpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgdGhpcy5fb25EcmFnVG9rZW5TdGFydC5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0NoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwnKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0F0dHJpYnV0ZShldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuc2FuLWNoZWNrJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdTYW5DaGVjayhldmVudCkpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tbmFtZS5yb2xsYWJsZScpXG4gICAgICAgIC5jb250ZXh0bWVudSh0aGlzLl9vbk9wcG9zZWRSb2xsLmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yb2xsLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdmVyYWdlLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuXG4gICAgICAvLyBTdGF0dXMgbW9uaXRvclxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNIHx8IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YXR1c1BsYXllckVkaXRhYmxlJykpIHtcbiAgICAgICAgaHRtbC5maW5kKCcucmVzZXQtY291bnRlcicpLmNsaWNrKHRoaXMuX29uUmVzZXRDb3VudGVyLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLmNvbmRpdGlvbi1tb25pdG9yJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25Db25kaXRpb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbC5maW5kKCcuaXMtZHlpbmcnKS5jbGljayh0aGlzLmhlYWwuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbC5maW5kKCcuaXMtZGVhZCcpLmNsaWNrKHRoaXMucmV2aXZlLmJpbmQodGhpcykpXG4gICAgICB9XG5cbiAgICAgIGh0bWwuZmluZCgnLmR5aW5nLWNoZWNrJykuY2xpY2sodGhpcy5jaGVja0ZvckRlYXRoLmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWwuZmluZCgnLml0ZW0gLml0ZW0taW1hZ2UnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1Sb2xsKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tbmFtZS5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbldlYXBvblJvbGwoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLml0ZW0tbmFtZS5lZmZlY3QtbmFtZScpXG4gICAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkVmZmVjdChldmVudCkpXG4gICAgICAvLyBodG1sXG4gICAgICAvLyAgIC5maW5kKCcuaXRlbS1uYW1lLmVmZmVjdC1uYW1lJylcbiAgICAgIC8vICAgLmtleWRvd24oKGV2ZW50KSA9PiB7XG4gICAgICAvLyAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcbiAgICAgIC8vICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgncG9pbnRlcicpXG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICB9KVxuICAgICAgLy8gaHRtbFxuICAgICAgLy8gICAuZmluZCgnLml0ZW0tbmFtZS5lZmZlY3QtbmFtZScpXG4gICAgICAvLyAgIC5rZXlkb3duKChldmVudCkgPT4ge1xuICAgICAgLy8gICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XG4gICAgICAvLyAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3BvaW50ZXInKVxuICAgICAgLy8gICAgIH1cbiAgICAgIC8vICAgfSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tc2tpbGwucm9sbGFibGUnKVxuICAgICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25XZWFwb25Ta2lsbFJvbGwoZXZlbnQpKVxuICAgICAgaHRtbC5vbignY2xpY2snLCAnLndlYXBvbi1kYW1hZ2UnLCB0aGlzLl9vbldlYXBvbkRhbWFnZS5iaW5kKHRoaXMpKVxuXG4gICAgICBjb25zdCB3aGVlbElucHV0cyA9IGh0bWwuZmluZCgnLmF0dHJpYnV0ZS12YWx1ZScpXG4gICAgICBmb3IgKGNvbnN0IHdoZWVsSW5wdXQgb2Ygd2hlZWxJbnB1dHMpIHtcbiAgICAgICAgd2hlZWxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGV2ZW50ID0+IHRoaXMuX29uV2hlZWwoZXZlbnQpLCB7XG4gICAgICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tcG9wdXAnKS5jbGljayh0aGlzLl9vbkl0ZW1Qb3B1cC5iaW5kKHRoaXMpKVxuXG4gICAgLy8gVXBkYXRlIEludmVudG9yeSBJdGVtXG4gICAgaHRtbC5maW5kKCcuc2hvdy1kZXRhaWwnKS5kYmxjbGljayhldmVudCA9PiB0aGlzLl9vblJlbmRlckl0ZW1TaGVldChldmVudCkpXG4gICAgaHRtbC5maW5kKCcuaXRlbS1lZGl0JykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZW5kZXJJdGVtU2hlZXQoZXZlbnQpKVxuXG4gICAgLy8gRGVsZXRlIEludmVudG9yeSBJdGVtXG4gICAgaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayhhc3luYyBldiA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgICAgY29uc3QgaXRlbVRvRGVsZXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJyksIHtcbiAgICAgICAgc3RyaWN0OiB0cnVlXG4gICAgICB9KVxuICAgICAgYXdhaXQgaXRlbVRvRGVsZXRlLmRlbGV0ZSgpXG4gICAgICBsaS5zbGlkZVVwKDIwMCwgKCkgPT4gdGhpcy5yZW5kZXIoZmFsc2UpKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtaXRlbScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBzd2l0Y2ggKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Jvb2snOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlCb29rKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlJdGVtKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U2tpbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc3BlbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTcGVsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7fVxuICAgICAgICAgICAgaWYgKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5tZWxlZSkge1xuICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1lbGVlID0gdHJ1ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucm5nZCkge1xuICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnJuZ2QgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5V2VhcG9uKGV2LCBwcm9wZXJ0aWVzKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBodG1sLmZpbmQoJy5jbGVhbi1za2lsbC1saXN0JykuY2xpY2soKCkgPT4ge1xuICAgIC8vICAgdGhpcy5hY3Rvci5jbGVhblNraWxscygpXG4gICAgLy8gfSlcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tdHJhZGUnKS5jbGljayh0aGlzLl9vblRyYWRlSXRlbS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLW5ldy1zZWN0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5hY3Rvci5jcmVhdGVCaW9TZWN0aW9uKClcbiAgICAgIHRoaXMucmVuZGVyKClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXNlY3Rpb24nKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IuZGVsZXRlQmlvU2VjdGlvbihpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubW92ZS1zZWN0aW9uLXVwJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLm1vdmVCaW9TZWN0aW9uVXAoaW5kZXgpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLm1vdmUtc2VjdGlvbi1kb3duJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLm1vdmVCaW9TZWN0aW9uRG93bihpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuZGV2ZWxvcG1lbnQtZmxhZycpLmRibGNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICApXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdkZXZlbG9wZW1lbnQnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5vY2N1cGF0aW9uLXNraWxsLWZsYWcuY2xpY2thYmxlJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIClcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5hcmNoZXR5cGUtc2tpbGwtZmxhZy5jbGlja2FibGUnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgKVxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnYXJjaGV0eXBlJylcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuc2tpbGwtZGV2ZWxvcGVtZW50JykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgdGhpcy5hY3Rvci5kZXZlbG9wZW1lbnRQaGFzZShldmVudC5zaGlmdEtleSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubHVjay1kZXZlbG9wbWVudCcpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGlmICghZXZlbnQuZGV0YWlsIHx8IGV2ZW50LmRldGFpbCA9PT0gMSkge1xuICAgICAgICB0aGlzLmFjdG9yLmRldmVsb3BMdWNrKGV2ZW50LnNoaWZ0S2V5KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5jbGVhcl9jb25kaXRpb25zJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBkaXNhYmxlID0ge31cbiAgICAgICAgZm9yIChjb25zdCBjb25kaXRpb24gaW4gdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zW2NvbmRpdGlvbl0udmFsdWUgIT09XG4gICAgICAgICAgICAgICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zW2NvbmRpdGlvbl0udmFsdWUgPT09IHRydWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGRpc2FibGVbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9ufS52YWx1ZWBdID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRpc2FibGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZShkaXNhYmxlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5hY3Rvci5lZmZlY3RzLm1hcChlZmZlY3QgPT4gZWZmZWN0LmlkKVxuICAgICAgaWYgKGVmZmVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmFjdG9yLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBlZmZlY3RzKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHVzZWQgZm9yIGRldiBwdXJwb3NlcyBvbmx5ICFcbiAgICAgKi9cbiAgICBodG1sLmZpbmQoJy50ZXN0LXRyaWdnZXInKS5jbGljayhhc3luYyBldmVudCA9PiB7XG4gICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKSkgcmV0dXJuIG51bGxcbiAgICAgIC8vIGF3YWl0IEl0ZW0uY3JlYXRlKHtcbiAgICAgIC8vICAgbmFtZTogJ19fQ29DN0ludGVybmFsSXRlbV9fJyxcbiAgICAgIC8vICAgdHlwZTogJ2l0ZW0nXG4gICAgICAvLyB9KVxuICAgICAgLy8gY29uc3QgZWZmZWN0cyA9IGF3YWl0IGl0ZW0uY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgIC8vICAge1xuICAgICAgLy8gICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRWZmZWN0TmV3JyksXG4gICAgICAvLyAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAvLyAgICAgb3JpZ2luOiBudWxsLFxuICAgICAgLy8gICAgICdkdXJhdGlvbi5yb3VuZHMnOiB1bmRlZmluZWQsXG4gICAgICAvLyAgICAgZGlzYWJsZWQ6IHRydWVcbiAgICAgIC8vICAgfVxuICAgICAgLy8gXSlcbiAgICAgIC8vIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbMF1cbiAgICAgIC8vIGF3YWl0IGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ2VmZmVjdCBjcmVhdGVkICEnKVxuICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdlZmZlY3QgY3JlYXRlZCAhJylcbiAgICB9KVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlOm5vdCgud2l0aG91dHRvb2x0aXApJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcFNraWxsRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXR0cmlidXRlRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuYXV0by10b2dnbGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXV0b0VudGVyLmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tY29udHJvbC5kZXZlbG9wbWVudC1mbGFnJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudC5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG5cbiAgICAvLyBBY3RpdmUgRWZmZWN0c1xuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuYWN0b3IpKVxuICB9XG5cbiAgdG9vbFRpcFNraWxsRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuYWN0b3JzLmRvY3VtZW50Q2xhc3MudG9vbFRpcFNraWxsVGV4dCgpXG4gICAgICAgIGlmICh0b29sVGlwICE9PSBmYWxzZSkge1xuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBDaGFyYWN0ZXJpc3RpY0VudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNoYXIgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLmNoYXItYm94JylcbiAgICAgICAgICBpZiAodHlwZW9mIGNoYXIgIT09ICd1bmRlZmluZWQnICYmICEhY2hhcikge1xuICAgICAgICAgICAgY29uc3QgY2hhcklkID0gY2hhci5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IHNoZWV0LmFjdG9yLmNoYXJhY3RlcmlzdGljc1tjaGFySWRdXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xuICAgICAgICAgICAgICBza2lsbDogY2hhcmFjdGVyaXN0aWMubGFiZWwsXG4gICAgICAgICAgICAgIHJlZ3VsYXI6IGNoYXJhY3RlcmlzdGljLnZhbHVlID8/IDAsXG4gICAgICAgICAgICAgIGhhcmQ6IGNoYXJhY3RlcmlzdGljLmhhcmQgPz8gMCxcbiAgICAgICAgICAgICAgZXh0cmVtZTogY2hhcmFjdGVyaXN0aWMuZXh0cmVtZSA/PyAwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEF0dHJpYnV0ZUVudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGF0dHJpYiA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuYXR0cmlidXRlJylcbiAgICAgICAgICBpZiAodHlwZW9mIGF0dHJpYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUlkID0gYXR0cmliLmRhdGFzZXQuYXR0cmliXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9ICcnXG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gc2hlZXQuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbYXR0cmlidXRlSWRdXG4gICAgICAgICAgICBzd2l0Y2ggKGF0dHJpYnV0ZUlkKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ2xjayc6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xuICAgICAgICAgICAgICAgICAgc2tpbGw6IGF0dHJpYnV0ZXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICByZWd1bGFyOiBhdHRyaWJ1dGVzLnZhbHVlID8/IDAsXG4gICAgICAgICAgICAgICAgICBoYXJkOiBNYXRoLmZsb29yKChhdHRyaWJ1dGVzLnZhbHVlID8/IDApIC8gMiksXG4gICAgICAgICAgICAgICAgICBleHRyZW1lOiBNYXRoLmZsb29yKChhdHRyaWJ1dGVzLnZhbHVlID8/IDApIC8gNSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXQuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnZGInOlxuICAgICAgICAgICAgICAgIHRvb2xUaXAgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcERCJylcbiAgICAgICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ3Nhbic6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNhbml0eScsIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsOiAnU2FuaXR5JyxcbiAgICAgICAgICAgICAgICAgIHJlZ3VsYXI6IGF0dHJpYnV0ZXMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyAyKSxcbiAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyA1KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb2xUaXBLZWVwZXJTYW5pdHknKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJycpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBBdXRvRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHRvb2xUaXAgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcEF1dG9Ub2dnbGUnKVxuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBGbGFnRm9yRGV2ZWxvcG1lbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuaXRlbScpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGl0ZW0uZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHNoZWV0LmFjdG9yLml0ZW1zLmdldChza2lsbElkKVxuICAgICAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsRmxhZ1RvZ2dsZScsIHtcbiAgICAgICAgICAgICAgc3RhdHVzOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudFxuICAgICAgICAgICAgICAgICAgPyAnQ29DNy5Ub29sVGlwU2tpbGxGbGFnZ2VkJ1xuICAgICAgICAgICAgICAgICAgOiAnQ29DNy5Ub29sVGlwU2tpbGxVbmZsYWdnZWQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgX29uQ29udGV4dE1lbnVDbGljayAoZXZlbnQsIHRhcmdldCkge1xuICAgIGNvbnN0IHRhcmdldFR5cGUgPSB0YXJnZXQuZGF0YXNldD8udGFyZ2V0VHlwZVxuICAgIGNvbnN0IHJvbGxPcHRpb25zID0ge1xuICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cbiAgICBzd2l0Y2ggKHRhcmdldFR5cGUpIHtcbiAgICAgIGNhc2UgKCdza2lsbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTExcbiAgICAgICAgcm9sbE9wdGlvbnMuc2tpbGxJZCA9IHRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcblxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NoYXJhY3RlcmlzdGljJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICByb2xsT3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9IHRhcmdldC5jbG9zZXN0KCcuY2hhci1ib3gnKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgKCdhdHRyaWJ1dGUnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICByb2xsT3B0aW9ucy5hdHRyaWJ1dGUgPSB0YXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAoJ3JvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ29wcG9zZWQtcm9sbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NvbWJpbmVkLXJvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgncmVxdWVzdC1yb2xsJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxcbiAgICAgICAgcm9sbE9wdGlvbnMucHJldmVudFN0YW5kYnkgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2xpbmstdG9vbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NoYXQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnY29weS10by1jbGlwYm9hcmQnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2xpbmstZW5jb3VudGVyJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdlbmNvdW50ZXInKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICAgIHJvbGxPcHRpb25zLmZhc3RGb3J3YXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxuICB9XG5cbiAgX29uUmVuZGVySXRlbVNoZWV0IChldmVudCkge1xuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25UcmFkZUl0ZW0gKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgbGV0IGNvbnRlbnQgPSAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0VXNlclRvR2l2ZVRvJylcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgYWN0b3JGcm9tOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgc2NlbmU6IG51bGwsXG4gICAgICBhY3RvclRvOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgaXRlbTogaXRlbS5pZFxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbj8uYWN0b3IpIHtcbiAgICAgIG1lc3NhZ2UuYWN0b3JGcm9tID0gdGhpcy50b2tlbi5pZFxuICAgICAgbWVzc2FnZS5zY2VuZSA9IHRoaXMudG9rZW4ucGFyZW50LmlkXG4gICAgfVxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihlID0+IHtcbiAgICAgIGlmICghWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKGUudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hY3Rvci5pZCA9PT0gZS5pZCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGxldCB2aXNpYmxlID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUub3duZXJzaGlwKSkge1xuICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnIHx8IGsgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICAgIHZpc2libGUgPSB2aXNpYmxlIHx8IHYgIT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmlzaWJsZVxuICAgIH0pXG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgY29udGVudCA9XG4gICAgICAgIGNvbnRlbnQgKyAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhY3Rvci5pZCArICdcIj4nICsgYWN0b3IubmFtZSArICc8L29wdGlvbj4nXG4gICAgfVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvc2VsZWN0PjwvZm9ybT48L3A+J1xuICAgIG1lc3NhZ2UuYWN0b3JUbyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVRpdGxlU2VsZWN0VXNlclRvR2l2ZVRvJyksXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICBjb25maXJtOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ2NvbmZpcm0nLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgICBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtdHJhZGVpdGVtdG8nLCBtZXNzYWdlKVxuICB9XG5cbiAgX29uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIHN1cGVyLl9vbkRyYWdTdGFydChldmVudClcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgY29uc3QgZHJhZ0RhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBkcmFnRGF0YS50b2tlblV1aWQgPSB0aGlzLnRva2VuLnV1aWRcbiAgICAgIGRyYWdEYXRhLnRva2VuSWQgPSB0aGlzLnRva2VuLmlkXG4gICAgICBkcmFnRGF0YS5zY2VuZUlkID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICB0eXBlOiAnQ29DN0xpbmsnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIG5hbWU6IGJveC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxuICAgICAgaWNvbjogbnVsbCxcbiAgICAgIGRvY3VtZW50OiB7XG4gICAgICAgIHR5cGU6IHRoaXMuZG9jdW1lbnQudHlwZSxcbiAgICAgICAgdXVpZDogdGhpcy5kb2N1bWVudC51dWlkXG4gICAgICB9XG4gICAgfVxuXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgX29uRHJhZ0F0dHJpYnV0ZSAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnYXR0cmlidXRlJyxcbiAgICAgIGNoZWNrOiAnY2hlY2snLFxuICAgICAgdHlwZTogJ0NvQzdMaW5rJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBuYW1lOiBib3guZGF0YXNldC5hdHRyaWIsXG4gICAgICBpY29uOiBudWxsLFxuICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgdHlwZTogdGhpcy5kb2N1bWVudC50eXBlLFxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBfb25EcmFnU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgc2FuTWluID0gZXZlbnQuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCcuc2FuLXZhbHVlLnBhc3MnKVxuICAgIGNvbnN0IHNhbk1heCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnNhbi12YWx1ZS5mYWlsZWQnKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxuICAgICAgY2hlY2s6ICdzYW5sb3NzJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBzYW5NaW46IHNhbk1pbi5pbm5lclRleHQsXG4gICAgICBzYW5NYXg6IHNhbk1heC5pbm5lclRleHQsXG4gICAgICBpY29uOiBudWxsLFxuICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgdHlwZTogdGhpcy5kb2N1bWVudC50eXBlLFxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCkge1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgaWYgKGRhdGFTdHJpbmcgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICBpZiAoZGF0YS50eXBlID09PSAnQ29DN0xpbmsnKSB7XG4gICAgICBpZiAoZGF0YS5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QpIHtcbiAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2sodGhpcy5hY3RvciwgZGF0YSlcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgc3VwZXIuX29uRHJvcChldmVudClcbiAgfVxuXG4gIGFzeW5jIF9vbkNvbmRpdGlvblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IudG9nZ2xlQ29uZGl0aW9uKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmV2aXZlICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuYWN0b3IudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgfVxuXG4gIGFzeW5jIGhlYWwgKCkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGFzeW5jIGNoZWNrRm9yRGVhdGggKGV2ZW50KSB7XG4gICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgdGhpcy5hY3Rvci5pc1Rva2VuID8gdGhpcy5hY3Rvci50b2tlbktleSA6IHRoaXMuYWN0b3IuaWRcbiAgICApXG4gICAgY29uQ2hlY2suc3RheUFsaXZlID0gdHJ1ZVxuICAgIGNvbkNoZWNrLnRvTWVzc2FnZShldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyYWdUb2tlblN0YXJ0IChldmVudCkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0eXBlOiAnVG9rZW4nLFxuICAgICAgdXVpZDogdGhpcy50b2tlbi51dWlkXG4gICAgfVxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Q291bnRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yZXNldERhaWx5U2FuaXR5KClcbiAgfVxuXG4gIGFzeW5jIF9vbkF1dG9Ub2dnbGUgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpKSB7XG4gICAgICBjb25zdCBhdHRyaWIgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKS5kYXRhc2V0LmF0dHJpYlxuICAgICAgdGhpcy5hY3Rvci50b2dnbGVBdHRyaWJBdXRvKGF0dHJpYilcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICApXG4gICAgaWYgKHdlYXBvbikge1xuICAgICAgd2VhcG9uLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHksXG4gICAgICAgIGlzQ3RybEtleShldmVudClcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAvLyByb2xsIHRoZSBhY3RvciBjaGFyYWN0ZXJpc3RpYyBmcm9tIGZvcm11bGEgd2hlbiBwb3NzaWJsZS5cbiAgYXN5bmMgX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIF9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlICgpIHtcbiAgICB0aGlzLmFjdG9yLmF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gIH1cblxuICBhc3luYyBfb25Mb2NrQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXNMb2NrZWQgPSB0aGlzLmFjdG9yLmxvY2tlZFxuICAgIHRoaXMuYWN0b3IubG9ja2VkID0gIWlzTG9ja2VkXG4gICAgSG9va3MuY2FsbCgnYWN0b3JMb2NrQ2xpY2tlZENvQzcnLCBbIWlzTG9ja2VkXSlcbiAgfVxuXG4gIGFzeW5jIF9vbkZsYWdDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBmbGFnTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgdGhpcy5hY3Rvci50b2dnbGVBY3RvckZsYWcoZmxhZ05hbWUpXG4gIH1cblxuICBhc3luYyBfb25Gb3JtdWxhQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5hY3Rvci50b2dnbGVBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgfVxuXG4gIGFzeW5jIF9vbldoZWVsIChldmVudCkge1xuICAgIGxldCB2YWx1ZSA9IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpIHx8IG51bGxcbiAgICBpZiAoZXZlbnQuZGVsdGFZID4gMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSA9PT0gMCA/IDAgOiB2YWx1ZSAtIDFcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuZGVsdGFZIDwgMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSArIDFcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSkge1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEhwKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldE1wKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRTYW4odmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEx1Y2sodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50JzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRIcCh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBfdG9nZ2xlUmVhZE9ubHkgKGV2ZW50KSB7XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5yZWFkT25seSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LnJlYWRPbmx5XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdyZWFkLW9ubHknKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbVN1bW1hcnkgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGF3YWl0IGl0ZW0uZ2V0Q2hhdERhdGEoeyBzZWNyZXRzOiB0aGlzLmFjdG9yLmlzT3duZXIgfSlcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4ge1xuICAgICAgICBzdW1tYXJ5LnJlbW92ZSgpXG4gICAgICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+PC9kaXY+JylcblxuICAgICAgY29uc3QgbGFiZWxzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5sYWJlbHMpIHtcbiAgICAgICAgbGFiZWxzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxcIj48c3BhbiBjbGFzcz1cImxhYmVsLW5hbWVcIj4ke3AubmFtZX0gOjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsLXZhbHVlXCI+JHtwLnZhbHVlfTwvc3Bhbj48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQobGFiZWxzKVxuXG4gICAgICBkaXYuYXBwZW5kKFxuICAgICAgICAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1kZXNjcmlwdGlvblwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24udmFsdWV9PC9kaXY+YClcbiAgICAgIClcblxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwY2wpIHtcbiAgICAgICAgY29uc3Qgc3BlY2lhbERpdiA9ICQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLXNwZWNpYWxcIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWx9PC9kaXY+YFxuICAgICAgICApXG4gICAgICAgIGRpdi5hcHBlbmQoc3BlY2lhbERpdilcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhZyBpdGVtLXByb3BlcnR5XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUocCl9PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwLCAoKSA9PiBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9XG4gICAgLy8gJChldmVudC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuXG4gIGFzeW5jIF9vblNlY3Rpb25IZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIGxldCBzZWN0aW9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCdzZWN0aW9uJyksXG4gICAgLy8gIHBhbm5lbENsYXNzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKCdwYW5uZWwnKSxcbiAgICAvLyAgcGFubmVsID0gc2VjdGlvbi5maW5kKCBgLiR7cGFubmVsQ2xhc3N9YCk7XG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGNvbnN0IHNlY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ3NlY3Rpb24nKVxuICAgIGNvbnN0IHBhbm5lbENsYXNzID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnBhbm5lbFxuICAgIGlmICh0eXBlb2YgcGFubmVsQ2xhc3MgPT09ICd1bmRlZmluZWQnKSByZXR1cm5cbiAgICBjb25zdCBwYW5uZWwgPSAkKHNlY3Rpb24pLmZpbmQoYC5wYW5uZWwuJHtwYW5uZWxDbGFzc31gKVxuXG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGlmIChwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIC8vIENvdWxkIHJlbW92ZSBleHBhbmRlZCBjbGFzcyBhbmQgdXNlIChwYW5uZWwuaXMoJzp2aXNpYmxlJykpXG4gICAgICBwYW5uZWwuc2xpZGVVcCgyMDAsICgpID0+IHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcGFubmVsLnNsaWRlRG93bigyMDAsICgpID0+IHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9XG5cbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGBkYXRhLnBhbm5lbC4ke3Bhbm5lbENsYXNzfS5leHBhbmRlZGApXG5cbiAgICB0aGlzLmFjdG9yLnVwZGF0ZShcbiAgICAgIHsgW2NhbWVsRmxhZ106ICFwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykgfSxcbiAgICAgIHsgcmVuZGVyOiBmYWxzZSB9KVxuICB9XG5cbiAgX29uSW52ZW50b3J5SGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuc2libGluZ3MoJ2xpJylcbiAgICBpZiAobGkuaXMoJzp2aXNpYmxlJykpIGxpLnNsaWRlVXAoMjAwKVxuICAgIGVsc2UgbGkuc2xpZGVEb3duKDIwMClcbiAgfVxuXG4gIF9vbkl0ZW1IZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9sID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5uZXh0KCdvbCcpXG4gICAgaWYgKG9sLmlzKCc6dmlzaWJsZScpKSBvbC5zbGlkZVVwKDIwMClcbiAgICBlbHNlIG9sLnNsaWRlRG93bigyMDApXG4gIH1cblxuICBhc3luYyBfb25JdGVtUG9wdXAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcblxuICAgIENvQzdBY3RvclNoZWV0LnBvcHVwU2tpbGwoaXRlbSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwb3B1cFNraWxsIChza2lsbCkge1xuICAgIHNraWxsLnN5c3RlbS5kZXNjcmlwdGlvbi5lbnJpY2hlZFZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2tpbGwuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgeyBhc3luYzogdHJ1ZSB9XG4gICAgKVxuICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxEZXRhaWxzV2luZG93JyksXG4gICAgICAgIGNvbnRlbnQ6IHNraWxsLFxuICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc2tpbGwnXSxcbiAgICAgICAgd2lkdGg6IDUyMCxcbiAgICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICAgIHNjcm9sbFk6IFsnLml0ZW0tZGVzY3JpcHRpb24nXSxcbiAgICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtZGV0YWlscy5odG1sJ1xuICAgICAgfVxuICAgIClcbiAgICBkbGcucmVuZGVyKHRydWUpXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgb2YgYW4gaXRlbSBmcm9tIHRoZSBBY3RvciBzaGVldCwgb2J0YWluaW5nIHRoZSBJdGVtIGluc3RhbmNlIGFuZCBkaXNwYXRjaGluZyB0byBpdCdzIHJvbGwgbWV0aG9kXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfb25JdGVtUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkO1xuICAgIC8vIGNvbnN0IGFjdG9ySWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWQ7XG4gICAgLy8gY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWQ7XG4gICAgLy8gbGV0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpO1xuXG4gICAgLy8gY2hlY2suYWN0b3IgPSAhdG9rZW5LZXkgPyBhY3RvcklkIDogdG9rZW5LZXk7XG4gICAgLy8gY2hlY2suaXRlbSA9IGl0ZW1JZDtcbiAgICAvLyBjaGVjay5yb2xsKCk7XG4gICAgLy8gY2hlY2sudG9NZXNzYWdlKCk7XG4gIH1cblxuICBhc3luYyBfb25FZmZlY3QgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGVmZmVjdElkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuZWZmZWN0SWRcbiAgICBjb25zdCBlZmZlY3QgPSB0aGlzLmFjdG9yLmVmZmVjdHMuZ2V0KGVmZmVjdElkKVxuICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBDb0M3Q29udGVudExpbmtEaWFsb2cuY3JlYXRlKHsgdHlwZTogJ0NvQzdMaW5rJywgY2hlY2s6IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNULCBvYmplY3Q6IGVmZmVjdCB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbldlYXBvblJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0Lml0ZW1JZFxuICAgIGNvbnN0IGZhc3RGb3J3YXJkID0gZXZlbnQuc2hpZnRLZXlcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgLy8gY29uc3QgYWN0b3JLZXkgPSAhdGhpcy50b2tlbj8gdGhpcy5hY3Rvci5hY3RvcktleSA6IGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uZGF0YS5faWR9YDsgLy9SRUZBQ1RPUklORyAoMilcbiAgICAvKiogKiBNT0RJRiAwLjgueCAqKiovXG4gICAgbGV0IGFjdG9yS2V5XG4gICAgaWYgKCF0aGlzLnRva2VuKSBhY3RvcktleSA9IHRoaXMuYWN0b3IuaWRcbiAgICAvLyBTaGVldCB3YXMgb3BlbmVkIGZyb20gYWN0b3IgZGlyZWN0b3J5XG4gICAgZWxzZSB7XG4gICAgICAvLyBPcGVuZWQgZnJvbSB0b2tlblxuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbiAmJiBnYW1lLmFjdG9ycy50b2tlbnNbdGhpcy50b2tlbi5pZF0pIHtcbiAgICAgICAgYWN0b3JLZXkgPSBgVE9LRU4uJHt0aGlzLnRva2VuLmlkfWBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdG9yS2V5ID0gYCR7dGhpcy50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy50b2tlbi5pZH1gXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybEtleShldmVudCkgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNLFxuICAgICAgICBuYW1lOiB3ZWFwb24ubmFtZVxuICAgICAgfVxuICAgICAgQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShsaW5rRGF0YSwgeyBhY3RvcnM6IFt0aGlzLmFjdG9yXSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcHJvY2VlZFdpdGhvdXRUYXJnZXQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmROb1RhcmdldHMnKVxuICAgICAgaWYgKCFwcm9jZWVkV2l0aG91dFRhcmdldCAmJiBnYW1lLnVzZXIudGFyZ2V0cy5zaXplIDw9IDApIHtcbiAgICAgICAgcHJvY2VlZFdpdGhvdXRUYXJnZXQgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgdGl0bGU6ICcgJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTm9UYXJnZXRTZWxlY3RlZCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb24ubmFtZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICAgIGNhbmNlbDoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FuY2VsJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcHJvY2VlZDoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHJvY2VlZCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdjYW5jZWwnLFxuICAgICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZyddXG4gICAgICAgICAgfVxuICAgICAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDAgfHwgcHJvY2VlZFdpdGhvdXRUYXJnZXQpIHtcbiAgICAgICAgaWYgKCF3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMSkge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuVG9vTWFueVRhcmdldCcpKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKGFjdG9yS2V5LCBpdGVtSWQsIGZhc3RGb3J3YXJkKVxuICAgICAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgICAgICB9XG4gICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKGFjdG9yS2V5LCBpdGVtSWQsIGZhc3RGb3J3YXJkKVxuICAgICAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUmVsb2FkV2VhcG9uIChldmVudCkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuICAgIGlmICghaXRlbUlkKSByZXR1cm5cbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSBhd2FpdCB3ZWFwb24ucmVsb2FkKClcbiAgICAgIGVsc2UgYXdhaXQgd2VhcG9uLmFkZEJ1bGxldCgpXG4gICAgfSBlbHNlIGlmIChldmVudC5idXR0b24gPT09IDIpIHtcbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkgYXdhaXQgd2VhcG9uLnNldEJ1bGxldHMoMClcbiAgICAgIGVsc2UgYXdhaXQgd2VhcG9uLnNob290QnVsbGV0cygxKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkFkZEFtbyAoZXZlbnQpIHtcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICA6IG51bGxcbiAgICBpZiAoIWl0ZW1JZCkgcmV0dXJuXG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIGF3YWl0IHdlYXBvbi5hZGRCdWxsZXQoKVxuICB9XG5cbiAgYXN5bmMgX29uV2VhcG9uU2tpbGxSb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBza2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWRcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJylcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICA6IG51bGxcblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKClcbiAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSB1c2FnZS5nZXQoJ2JvbnVzRGljZScpXG4gICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSB1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKVxuICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9ICF0b2tlbktleSA/IGFjdG9ySWQgOiB0b2tlbktleVxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLml0ZW0gPSBpdGVtSWRcbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgLy8gSEFDSzoganVzdCB0byBwb3AgdGhlIGFkdmFuY2VkIHJvbGwgd2luZG93XG4gICAgLy8gY2hlY2suaXRlbS5yb2xsKCk7XG4gIH1cblxuICBhc3luYyBfb25XZWFwb25EYW1hZ2UgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbicpLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgcmFuZ2UgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy53ZWFwb24tZGFtYWdlJykuZGF0YXNldC5yYW5nZVxuICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgcmFuZ2VcbiAgICB9KVxuICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gdGhpcy5hY3Rvci50b2tlbktleVxuICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGl0ZW1JZFxuICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAvLyBjb25zb2xlLmxvZyggJ1dlYXBvbiBkYW1hZ2UgQ2xpY2tlZCcpO1xuICB9XG5cbiAgYXN5bmMgX29uT3Bwb3NlZFJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYiA9PT0gJ2RiJykgcmV0dXJuXG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VELFxuICAgICAgZXZlbnQsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLWxhYmVsJykpIHtcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgfSBlbHNlIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXR0cmlidXRlLWxhYmVsJykpIHtcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgIH1cblxuICAgIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgIGRhdGEuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXG4gICAgfVxuXG4gICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoZGF0YSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcm9sbGluZyBhIFNraWxsIGNoZWNrXG4gICAqIEAgIHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpdGljVGVzdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmbGFnZ2VkNGRldicpKSByZXR1cm5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxuICAgICAgICBjaGFyYWN0ZXJpc3RpYzogZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhci1ib3gnKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEF0dHJpYlRlc3QgKGV2ZW50KSB7XG4gICAgLy8gRkxBVE1PRElGSUVSXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGF0dHJpYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYlxuICAgIGlmIChhdHRyaWIgPT09ICdkYicpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIS9eLXswLDF9XFxkKyQvLnRlc3QoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucm9sbEZvcm11bGFcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5yb2xsRm9ybXVsYVxuICAgICAgICApXG4gICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGlmICghaXNOYU4oci50b3RhbCkgJiYgIShyLnRvdGFsID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgci50b01lc3NhZ2Uoe1xuICAgICAgICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNEYW1hZ2VSb2xsJylcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxuICAgICAgICBhdHRyaWJ1dGU6IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUsXG4gICAgICAgIGNhcmRUeXBlOlxuICAgICAgICBldmVudC5hbHRLZXkgJiYgYXR0cmliID09PSAnc2FuJ1xuICAgICAgICAgID8gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgICAgICA6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIGEgU2tpbGwgY2hlY2tcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vblJvbGxTa2lsbFRlc3QgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmxhZ2dlZDRkZXYnKSkgcmV0dXJuXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZUNvbnRleHRNZW51cycpKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIHByZXZlbnRTdGFuZGJ5OiB0cnVlLFxuICAgICAgICBmYXN0Rm9yd2FyZDogdHJ1ZSxcbiAgICAgICAgc2tpbGxJZDogZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICAvLyBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSB7XG5cbiAgLy8gIC8vIENyZWF0ZSB0aGUgZXhwYW5kZWQgdXBkYXRlIGRhdGEgb2JqZWN0XG4gIC8vICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwge2VkaXRvcnM6IHRoaXMuZWRpdG9yc30pO1xuICAvLyAgbGV0IGRhdGEgPSBmZC50b09iamVjdCgpO1xuICAvLyAgaWYgKCB1cGRhdGVEYXRhICkgZGF0YSA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSk7XG4gIC8vICBlbHNlIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChkYXRhKTtcblxuICAvLyAgLy8gSGFuZGxlIERhbWFnZSBhcnJheVxuICAvLyAgY29uc3QgZGFtYWdlID0gZGF0YS5kYXRhPy5kYW1hZ2U7XG4gIC8vICBpZiAoIGRhbWFnZSApIGRhbWFnZS5wYXJ0cyA9IE9iamVjdC52YWx1ZXMoZGFtYWdlPy5wYXJ0cyB8fCB7fSkubWFwKGQgPT4gW2RbMF0gfHwgJycsIGRbMV0gfHwgJyddKTtcblxuICAvLyAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXG4gIC8vICByZXR1cm4gZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGRhdGEpO1xuICAvLyB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogSW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZCBhcyByZXF1aXJlZCBieSB0aGUgcGFyZW50IGNsYXNzIHNwZWNcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdfdXBkYXRlT2JqZWN0Jyk7XG4gICAgLy8gVE9ETzogUmVwbGFjZSB3aXRoICAgX2dldFN1Ym1pdERhdGEodXBkYXRlRGF0YT17fSkgQ2YuIHNoZWV0LmpzKDI0MylcbiAgICBjb25zdCBvdmVycmlkZXMgPSBmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QodGhpcy5hY3Rvci5vdmVycmlkZXMpXG4gICAgY29uc3QgbmFtZSA9IGV2ZW50Py5jdXJyZW50VGFyZ2V0Py5uYW1lXG4gICAgaWYgKG5hbWUgJiYgb3ZlcnJpZGVzICYmIG92ZXJyaWRlc1tuYW1lXSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVmZmVjdEFwcGxpZWRDYW50T3ZlcnJpZGUnLCB7IG5hbWUgfSlcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vYmplY3QuaW1nICE9PSBmb3JtRGF0YS5pbWcgJiYgKHRoaXMub2JqZWN0LnRva2VuID8/IHRoaXMub2JqZWN0LnByb3RvdHlwZVRva2VuKS50ZXh0dXJlLnNyYyA9PT0gQ29DQWN0b3IuZGVmYXVsdEltZyh0aGlzLm9iamVjdC50eXBlKSkge1xuICAgICAgLy8gSW1hZ2Ugd2FzIGNoYW5nZWQgYW5kIGl0IHdhcyB0aGUgZGVmYXVsdCwgc28gYWxzbyB1cGRhdGUgdGhlIHRva2VuIGltYWdlXG4gICAgICBpZiAodGhpcy5vYmplY3QudG9rZW4pIHtcbiAgICAgICAgdGhpcy5vYmplY3QudG9rZW4udXBkYXRlKHtcbiAgICAgICAgICAndGV4dHVyZS5zcmMnOiBmb3JtRGF0YS5pbWdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnByb3RvdHlwZVRva2VuLnVwZGF0ZSh7XG4gICAgICAgICAgJ3RleHR1cmUuc3JjJzogZm9ybURhdGEuaW1nXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYmlvZ3JhcGh5S2V5UmVnZXggPSAvXnN5c3RlbS5iaW9ncmFwaHlcXC4oXFxkKylcXC4oLispJC9cbiAgICBjb25zdCBiaW9ncmFwaHlLZXlzID0gT2JqZWN0LmtleXMoZm9ybURhdGEpLm1hcChrID0+IGsubWF0Y2goYmlvZ3JhcGh5S2V5UmVnZXgpKS5maWx0ZXIobSA9PiBtKVxuICAgIGlmIChiaW9ncmFwaHlLZXlzLmxlbmd0aCkge1xuICAgICAgY29uc3QgYmlvZ3JhcGh5ID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5hY3Rvci5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgICAgZm9yIChjb25zdCBiaW9ncmFwaHlLZXkgb2YgYmlvZ3JhcGh5S2V5cykge1xuICAgICAgICBiaW9ncmFwaHlbYmlvZ3JhcGh5S2V5WzFdXVtiaW9ncmFwaHlLZXlbMl1dID0gZm9ybURhdGFbJ3N5c3RlbS5iaW9ncmFwaHkuJyArIGJpb2dyYXBoeUtleVsxXSArICcuJyArIGJpb2dyYXBoeUtleVsyXV1cbiAgICAgICAgZGVsZXRlIGZvcm1EYXRhW2Jpb2dyYXBoeUtleVswXV1cbiAgICAgIH1cbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uYmlvZ3JhcGh5J10gPSBiaW9ncmFwaHlcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2tpbGwtYWRqdXN0bWVudCcpKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgPyBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICA6IG51bGxcblxuICAgICAgICAgICAgaWYgKCFldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogbnVsbFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3JlZGl0LXJhdGluZycpID09PSBpdGVtLm5hbWUgJiYgdHlwZW9mIHRoaXMuYWN0b3Iub2NjdXBhdGlvbj8uc3lzdGVtPy5jcmVkaXRSYXRpbmc/Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3JlZGl0VmFsdWUgPVxuICAgICAgICAgICAgICAgIChpdGVtLnZhbHVlIHx8IDApIC1cbiAgICAgICAgICAgICAgICAoaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UgfHwgMClcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGNyZWRpdFZhbHVlID5cbiAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5tYXgpIHx8XG4gICAgICAgICAgICAgICAgY3JlZGl0VmFsdWUgPFxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pbilcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DcmVkaXRPdXRPZlJhbmdlJywge1xuICAgICAgICAgICAgICAgICAgICBtaW46IE51bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5taW5cbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBOdW1iZXIoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIFRPRE8gOiBjaGVjayB3aHkgU0FOIG9ubHkgP1xuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUgPT09ICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldFNhbihcbiAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRIcChcbiAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RleHQtYXJlYScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci51cGRhdGVUZXh0QXJlYShldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi12YWx1ZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUJpb1ZhbHVlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi10aXRsZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZUJpb1RpdGxlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCducGMtc2tpbGwtc2NvcmUnKSkge1xuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChza2lsbCkge1xuICAgICAgICAgICAgYXdhaXQgc2tpbGwudXBkYXRlVmFsdWUoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NraWxsLW5hbWUnKSB8fFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpdGVtLW5hbWUnKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge31cbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICAgIGRhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgIGRhdGEubmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKGRhdGEpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1mb3JtdWxhJykpIHtcbiAgICAgICAgICAvLyB0ZXN0ZXIgc2kgYydlc3QgdmlkZVxuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgLy8gT24gdGVzdGUgc2kgYydlc3QgdW5lIGZvcm11bGUgdmFsaWRlICFcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgIGlmIChpc05hTihyLnRvdGFsKSB8fCB0eXBlb2Ygci50b3RhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9ybURhdGFbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuRXJyb3JJbnZhbGlkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIHRlc3RlciBzaSBsZSBkYiByZXRvdXJuw6kgZXN0IHZhbGlkZS5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWIgPT09ICdkYidcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE9uIHRlc3RlIHNpIGMnZXN0IHVuZSBmb3JtdWxlIHZhbGlkZSAhXG4gICAgICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgci50b3RhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvcm1EYXRhW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV0gPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LkVycm9ySW52YWxpZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxlIHNraWxsIGFzc29jacOpIGEgbCdhcm1lIGEgY2hhbmfDqVxuICAgICAgICAvLyBUT0RPIDogRmFjdG9yaXNhdGlvbiBkdSBzd2l0Y2hcbiAgICAgICAgLy8gVE9ETyA6IHJlbXBsYWNlciBsZXMgc3RyaW5ncyBwYXIgZGUgY29uc3RhbnRlcyAoaXRlbS5za2lsbC5tYWluIC4uLilcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3ZWFwb24tc2tpbGwnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0Lm9wdGlvbnNbZXZlbnQuY3VycmVudFRhcmdldC5zZWxlY3RlZEluZGV4XS52YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAod2VhcG9uICYmIHNraWxsKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbCkge1xuICAgICAgICAgICAgICBjYXNlICdtYWluJzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdhbHRlcm5hdGl2JzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExlIG5vbSBkZSBsJ2FybWUgYSBjaGFuZ8OpXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2VhcG9uLW5hbWUnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoeyBuYW1lOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGVzIGRlZ2F0cyBkZSBsJ2FybWUgb24gY2hhbmfDqXMuXG4gICAgICAgIC8vIFRPRE8gOiBGYWN0b3Jpc2F0aW9uIGR1IHN3aXRjaFxuICAgICAgICAvLyBUT0RPIDogcmVtcGxhY2VyIGxlcyBzdHJpbmdzIHBhciBkZSBjb25zdGFudGVzIChpdGVtLnJhbmdlLm5vcm1hbCAuLi4pXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGFtYWdlLWZvcm11bGEnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIC8vIHRlc3RlIGxhIHZhbGlkaXTDqSBkZSBsYSBmb3JtdWxlLlxuICAgICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgdHlwZW9mIHIudG90YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UnOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICBjYXNlICdsb25nJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xvbmcnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdleHRyZW1lJzpcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnVwZGF0ZShmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3TlBDU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgQWN0b3Igc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLy8gVE9ETyA6IGRvIHdlIG5lZWQgdGhhdCA/XG4gICAgc2hlZXREYXRhLmFsbG93Rm9ybXVsYSA9IHRydWVcbiAgICBzaGVldERhdGEuZGlzcGxheUZvcm11bGEgPSAodGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJykgfHwgZmFsc2UpXG5cbiAgICBzaGVldERhdGEuaGFzU2FuID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlICE9PSBudWxsXG4gICAgc2hlZXREYXRhLmhhc01wID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgIT09IG51bGxcbiAgICBzaGVldERhdGEuaGFzTHVjayA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSAhPT0gbnVsbFxuXG4gICAgc2hlZXREYXRhLmlzQ3JlYXR1cmUgPSBmYWxzZVxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3RhdHVzJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG5cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUFybW9yID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdhcm1vcicpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID0gZmFsc2VcbiAgICBzaGVldERhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9ucyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlBcm1vclxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkucGVyc29uYWxEZXNjcmlwdGlvbj8udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIGlmICghdGhpcy5tZW51cykgdGhpcy5tZW51cyA9IFtdXG5cbiAgICAgIGNvbnN0IHNhbmxvc3NNZW51ID0ge1xuICAgICAgICBpZDogJ3Nhbi1sb3NzLXJvbGwnLFxuICAgICAgICBjbGFzc2VzOiAncm9sbC1tZW51JyxcbiAgICAgICAgc2VjdGlvbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzZXM6ICdtYWluJyxcbiAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb3B5LXRvLWNsaXBib2FyZCcsIGxhYmVsOiAnQ29weSB0byBjbGlwLWJvYXJkJyB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuXG4gICAgICAgIF1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2FubG9zc0NvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICBzYW5sb3NzQ29udGV4dE1lbnUuYmluZChzYW5sb3NzTWVudSwgaHRtbCwgdGhpcy5fb25TYW5Mb3NzQ29udGV4dE1lbnVDbGljay5iaW5kKHRoaXMpKVxuICAgICAgdGhpcy5tZW51cy5wdXNoKHNhbmxvc3NDb250ZXh0TWVudSlcbiAgICB9XG5cbiAgICBodG1sLmZpbmQoJy5yb2xsLXNhbicpLmNsaWNrKHRoaXMuX29uU2FuQ2hlY2suYmluZCh0aGlzKSlcbiAgICAvLyBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgLy8gICBodG1sXG4gICAgLy8gICAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXG4gICAgLy8gICAgIC5jaGFuZ2UoZXZlbnQgPT4gdGhpcy5hY3Rvci5zZXRIZWFsdGhTdGF0dXNNYW51YWxseShldmVudCkpXG4gICAgLy8gfVxuICB9XG5cbiAgYXN5bmMgX29uU2FuTG9zc0NvbnRleHRNZW51Q2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgcm9sbE9wdGlvbnMgPSB7XG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVIsXG4gICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcbiAgICAgIGV2ZW50LFxuICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLLFxuICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgKCdsaW5rLXRvb2wnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2hhdCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdjb3B5LXRvLWNsaXBib2FyZCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPSB0cnVlXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NsaXBib2FyZCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgX29uU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tQYXNzZWQgJiZcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkXG4gICAgKSB7XG4gICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ05vIHNhbml0eSBsb3NzIHZhbHVlJyk7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgaXNDdHJsS2V5KGV2ZW50KSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIGxldCBkaWZmaWN1bHR5LCBtb2RpZmllclxuICAgICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBtb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICBjaGVjazogJ3Nhbmxvc3MnLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc3lzdGVtLnNwZWNpYWwuc2FuTG9zcy5jaGVja1Bhc3NlZCxcbiAgICAgICAgc2FuTWF4OiB0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBtb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLm1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKGxpbmtEYXRhKVxuICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xuICAgICAgICAgICAgY2hlY2s6IGxpbmtcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNhbkRhdGEgPSB7XG4gICAgICAgIHNhbk1heDogdGhpcy5hY3Rvci5zYW5Mb3NzQ2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc2FuTG9zc0NoZWNrUGFzc2VkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgU2FuQ2hlY2tDYXJkLmNoZWNrVGFyZ2V0cyhzYW5EYXRhLCBldmVudC5zaGlmdEtleSlcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHRoaXMuYWN0b3IudW5zZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnbnBjJ10sXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL25wYy1zaGVldC5odG1sJyxcbiAgICAgIHdpZHRoOiA1ODAsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgbWluaW1pemFibGU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QpIHtcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1zY29yZScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci5zZXRDaGFyYWN0ZXJpc3RpYyhcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSxcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIGZvcmNlQXV0byAoYXBwLCBodG1sKSB7XG4gICAgaHRtbC5oZWlnaHQoJ2F1dG8nKVxuICB9XG5cbiAgc2V0UG9zaXRpb24gKGEpIHtcbiAgICBzdXBlci5zZXRQb3NpdGlvbihhKVxuICAgIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYSwgdGhpcy5fZWxlbWVudClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnkgKi9cbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vbnBjLXNoZWV0LmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgQWN0b3JTaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0NyZWF0dXJlU2hlZXQgZXh0ZW5kcyBDb0M3TlBDU2hlZXQge1xuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaXNDcmVhdHVyZSA9IHRydWVcbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ25wYycsICdjcmVhdHVyZSddXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3J10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUxvc3NUeXBlRGlhbG9nVGl0bGUnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3Nhbml0eS1sb3NzLXR5cGUuaGJzJyxcbiAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBkYXRhLmlzSW1tdW5pdHkgPSBkYXRhLm9iamVjdC50eXBlID09PSAnaW1tdW5pdHknXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgaHRtbC5maW5kKCcuZmllbGRfdHlwZScpLmNoYW5nZSh0aGlzLl9vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRpYWxvZy1idXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbkNsaWNrLmJpbmQodGhpcykpXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIF9vbkJ1dHRvbkNsaWNrIChldmVudCkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYnV0dG9uID09PSAnYWRkJykge1xuICAgICAgY29uc3QgaHRtbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLndpbmRvdy1jb250ZW50JylcbiAgICAgIGNvbnN0IHR5cGUgPSBodG1sLmZpbmQoJy5maWVsZF90eXBlJykudmFsKClcbiAgICAgIGNvbnN0IG5hbWUgPSBodG1sLmZpbmQoJy5maWVsZF9uYW1lJykudmFsKClcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoaHRtbC5maW5kKCcuZmllbGRfdmFsdWUnKS52YWwoKSlcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPVxuICAgICAgICB0aGlzLm9iamVjdC5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyA/PyBbXVxuICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHtcbiAgICAgICAgdHlwZTogbmFtZSxcbiAgICAgICAgdG90YWxMb3NzOiB2YWx1ZSxcbiAgICAgICAgaW1tdW5pdHk6IHR5cGUgPT09ICdpbW11bml0eSdcbiAgICAgIH0pXG4gICAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgICAgfSlcbiAgICAgIHRoaXMub2JqZWN0LmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcbiAgICB9XG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICBfb25TZWxlY3RDaGFuZ2UgKGV2ZW50KSB7XG4gICAgY29uc3QgaHRtbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLndpbmRvdy1jb250ZW50JylcbiAgICB0aGlzLm9iamVjdC5uYW1lID0gaHRtbC5maW5kKCcuZmllbGRfbmFtZScpLnZhbCgpXG4gICAgdGhpcy5vYmplY3QudHlwZSA9IGh0bWwuZmluZCgnLmZpZWxkX3R5cGUnKS52YWwoKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHt9XG59XG4iLCIvKiBnbG9iYWwgJCwgRm9udEZhY2UsIGZvdW5kcnksIGdhbWUsIFRleHRFZGl0b3IsIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlciB9IGZyb20gJy4uLy4uL2FwcHMvY3JlYXRlLW15dGhvcy1lbmNvdW50ZXJzLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXJhY3RlclNoZWV0IGV4dGVuZHMgQ29DN0FjdG9yU2hlZXQge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IubmFtZSA9PT0gJ0NvQzdDaGFyYWN0ZXJTaGVldCcpIHtcbiAgICAgIGlmICghdGhpcy5zdW1tYXJpemVkKSB0aGlzLnN1bW1hcml6ZWQgPSBmYWxzZVxuICAgICAgbGV0IGJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgICBidXR0b25zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6IHRoaXMuc3VtbWFyaXplZFxuICAgICAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWF4aW1pemUnKVxuICAgICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3VtbWFyaXplJyksXG4gICAgICAgICAgY2xhc3M6ICd0ZXN0LWV4dHJhLWljb24nLFxuICAgICAgICAgIGljb246IHRoaXMuc3VtbWFyaXplZFxuICAgICAgICAgICAgPyAnZmFzIGZhLXdpbmRvdy1tYXhpbWl6ZSdcbiAgICAgICAgICAgIDogJ2ZhcyBmYS13aW5kb3ctbWluaW1pemUnLFxuICAgICAgICAgIG9uY2xpY2s6IGV2ZW50ID0+IHRoaXMudG9nZ2xlU2hlZXRNb2RlKGV2ZW50KVxuICAgICAgICB9LyogLFxuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICAgIGNsYXNzOiAnZHJhZy10ZXN0LXRoaW5neScsXG4gICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tZDEwJyxcbiAgICAgICAgICBvbmRyYWdzdGFydDogKCkgPT4gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdkcmFnIHN0YXJ0ZWQnKVxuICAgICAgICB9ICovXG4gICAgICBdLmNvbmNhdChidXR0b25zKVxuICAgICAgcmV0dXJuIGJ1dHRvbnNcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVNoZWV0TW9kZSAoZXZlbnQpIHtcbiAgICB0aGlzLnN1bW1hcml6ZWQgPSAhdGhpcy5zdW1tYXJpemVkXG4gICAgbGV0IG9wdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShDb0M3Q2hhcmFjdGVyU2hlZXQuZGVmYXVsdE9wdGlvbnMpXG4gICAgaWYgKHRoaXMuc3VtbWFyaXplZCkge1xuICAgICAgb3B0aW9ucyA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qob3B0aW9ucywge1xuICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnYWN0b3InLCAnY2hhcmFjdGVyJywgJ3N1bW1hcml6ZWQnXSxcbiAgICAgICAgaGVpZ2h0OiAyMDAsXG4gICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICAgIHdpZHRoOiA3MDBcbiAgICAgIH0pXG4gICAgfVxuICAgIG9wdGlvbnMudG9rZW4gPSB0aGlzLm9wdGlvbnMudG9rZW5cbiAgICBhd2FpdCB0aGlzLmNsb3NlKClcbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlLCBvcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG4gICAgaWYgKFxuICAgICAgdGhpcy5pc0VkaXRhYmxlICYmXG4gICAgICB0eXBlb2YgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKSA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJywgZmFsc2UpXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNFZGl0YWJsZSAmJlxuICAgICAgdHlwZW9mIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJywgdHJ1ZSlcbiAgICB9XG4gICAgc2hlZXREYXRhLnNraWxsTGlzdE1vZGVWYWx1ZSA9XG4gICAgICB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScpID8/IGZhbHNlXG4gICAgc2hlZXREYXRhLnNraWxsU2hvd1VuY29tbW9uID1cbiAgICAgIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID8/IHRydWVcbiAgICBzaGVldERhdGEuc2hvd0ljb25zT25seSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dJY29uc09ubHknKVxuXG4gICAgaWYgKHRoaXMuYWN0b3Iub2NjdXBhdGlvbikge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLm9jY3VwYXRpb24gPSB0aGlzLmFjdG9yLm9jY3VwYXRpb24ubmFtZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLm9jY3VwYXRpb25TZXQgPSB0cnVlXG4gICAgfSBlbHNlIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5vY2N1cGF0aW9uU2V0ID0gZmFsc2VcblxuICAgIGlmICh0aGlzLmFjdG9yLmFyY2hldHlwZSkge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLmFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlLm5hbWVcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5hcmNoZXR5cGVTZXQgPSB0cnVlXG4gICAgfSBlbHNlIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5hcmNoZXR5cGVTZXQgPSBmYWxzZVxuXG4gICAgc2hlZXREYXRhLnRvdGFsRXhwZXJpZW5jZSA9IHRoaXMuYWN0b3IuZXhwZXJpZW5jZVBvaW50c1xuICAgIHNoZWV0RGF0YS50b3RhbE9jY3VwYXRpb24gPSB0aGlzLmFjdG9yLm9jY3VwYXRpb25Qb2ludHNTcGVudFxuICAgIHNoZWV0RGF0YS5pbnZhbGlkT2NjdXBhdGlvblBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iuc3lzdGVtLmRldmVsb3BtZW50Py5vY2N1cGF0aW9uKVxuICAgIHNoZWV0RGF0YS50b3RhbEFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlUG9pbnRzU3BlbnRcbiAgICBzaGVldERhdGEuaW52YWxpZEFyY2hldHlwZVBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5hcmNoZXR5cGVQb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5zeXN0ZW0uZGV2ZWxvcG1lbnQ/LmFyY2hldHlwZSlcbiAgICBzaGVldERhdGEudG90YWxQZXJzb25hbCA9IHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudFxuICAgIHNoZWV0RGF0YS5pbnZhbGlkUGVyc29uYWxQb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5zeXN0ZW0uZGV2ZWxvcG1lbnQ/LnBlcnNvbmFsKVxuICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNYXggPSBOdW1iZXIoXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XG4gICAgKVxuICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNaW4gPSBOdW1iZXIoXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbS5jcmVkaXRSYXRpbmcubWluXG4gICAgKVxuICAgIHNoZWV0RGF0YS5pbnZhbGlkQ3JlZGl0UmF0aW5nID1cbiAgICAgIHRoaXMuYWN0b3IuY3JlZGl0UmF0aW5nU2tpbGw/LnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbiA+XG4gICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWF4IHx8XG4gICAgICB0aGlzLmFjdG9yLmNyZWRpdFJhdGluZ1NraWxsPy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24gPFxuICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ01pblxuICAgIHNoZWV0RGF0YS5wdWxwVGFsZW50Q291bnQgPSBzaGVldERhdGEuaXRlbXNCeVR5cGUudGFsZW50Py5sZW5ndGhcbiAgICAgID8gc2hlZXREYXRhLml0ZW1zQnlUeXBlLnRhbGVudD8ubGVuZ3RoXG4gICAgICA6IDBcbiAgICBzaGVldERhdGEubWluUHVscFRhbGVudHMgPSB0aGlzLmFjdG9yLmFyY2hldHlwZT8uc3lzdGVtLnRhbGVudHNcbiAgICAgID8gdGhpcy5hY3Rvci5hcmNoZXR5cGU/LnN5c3RlbS50YWxlbnRzXG4gICAgICA6IDBcbiAgICBzaGVldERhdGEuaW52YWxpZFB1bHBUYWxlbnRzID0gc2hlZXREYXRhLnB1bHBUYWxlbnRDb3VudCA8IHNoZWV0RGF0YS5taW5QdWxwVGFsZW50c1xuXG4gICAgc2hlZXREYXRhLmhhc0RldmVsb3BtZW50UGhhc2UgPSB0aGlzLmFjdG9yLmhhc0RldmVsb3BtZW50UGhhc2VcblxuICAgIHNoZWV0RGF0YS5hbGxvd0RldmVsb3BtZW50ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJylcbiAgICBzaGVldERhdGEuYWxsb3dDaGFyQ3JlYXRpb24gPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICBzaGVldERhdGEuZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ2RldmVsb3BtZW50Um9sbEZvckx1Y2snXG4gICAgKVxuICAgIHNoZWV0RGF0YS5zaG93RGV2UGFubmVsID0gc2hlZXREYXRhLmFsbG93RGV2ZWxvcG1lbnQgfHwgc2hlZXREYXRhLmFsbG93Q2hhckNyZWF0aW9uXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cyA9IFtdXG4gICAgZm9yIChjb25zdCBrZXkgaW4gQ09DNy5tb25ldGFyeUZvcm1hdHMpIHtcbiAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlGb3JtYXRzLnB1c2goeyBrZXksIHZhbDogZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubW9uZXRhcnlGb3JtYXRzW2tleV0pIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLnNob3dDdXJyZW5jeVN5bWJvbCA9IFsnZGVjaW1hbExlZnQnLCAnZGVjaW1hbFJpZ2h0JywgJ2ludGVnZXJMZWZ0JywgJ2ludGVnZXJSaWdodCddLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlUeXBlcykge1xuICAgICAgaWYgKENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5sZW5ndGggPT09IDAgfHwgQ09DNy5tb25ldGFyeVR5cGVzW2tleV0uZmlsdGVyLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpKSB7XG4gICAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlUeXBlcy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5uYW1lKSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5tYW51YWxDcmVkaXQgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnbWFudWFsQ3JlZGl0JylcbiAgICBpZiAoIXNoZWV0RGF0YS5tYW51YWxDcmVkaXQpIHtcbiAgICAgIHNoZWV0RGF0YS5tb25ldGFyeSA9IHtcbiAgICAgICAgc3BlbmRpbmdMZXZlbDogQ29DQWN0b3IubW9uZXRhcnlGb3JtYXQoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCwgdGhpcy5hY3Rvci5zcGVuZGluZ0xldmVsKSxcbiAgICAgICAgYXNzZXRzOiBDb0NBY3Rvci5tb25ldGFyeUZvcm1hdChzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCBzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuc3ltYm9sLCB0aGlzLmFjdG9yLmFzc2V0cyksXG4gICAgICAgIGNhc2g6IENvQ0FjdG9yLm1vbmV0YXJ5Rm9ybWF0KHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5zeW1ib2wsIHRoaXMuYWN0b3IuY2FzaClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICBzaGVldERhdGEuc3VtbWFyaXplZCA9IHRoaXMuc3VtbWFyaXplZCAmJiAhc2hlZXREYXRhLnBlcm1pc3Npb25MaW1pdGVkXG4gICAgc2hlZXREYXRhLmlzU3VtbWFyaXplZCA9IHRoaXMuc3VtbWFyaXplZFxuICAgIHNoZWV0RGF0YS5za2lsbExpc3QgPSBbXVxuICAgIGxldCBwcmV2aW91c1NwZWMgPSAnJ1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygc2hlZXREYXRhLnNraWxscykge1xuICAgICAgaWYgKHNoZWV0RGF0YS5za2lsbFNob3dVbmNvbW1vbiB8fCAhc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMucmFyaXR5KSB7XG4gICAgICAgIGlmIChza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgICAgaWYgKHByZXZpb3VzU3BlYyAhPT0gc2tpbGwuc3lzdGVtLnNwZWNpYWxpemF0aW9uKSB7XG4gICAgICAgICAgICBwcmV2aW91c1NwZWMgPSBza2lsbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbExpc3QucHVzaCh7XG4gICAgICAgICAgICAgIGlzU3BlY2lhbGl6YXRpb246IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHNraWxsLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnNraWxsTGlzdC5wdXNoKHNraWxsKVxuICAgICAgfVxuICAgIH1cbiAgICBzaGVldERhdGEuc2tpbGxzQnlWYWx1ZSA9IFsuLi5zaGVldERhdGEuc2tpbGxzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYi5zeXN0ZW0udmFsdWUgLSBhLnN5c3RlbS52YWx1ZVxuICAgIH0pXG4gICAgc2hlZXREYXRhLnRvcFNraWxscyA9IFsuLi5zaGVldERhdGEuc2tpbGxzQnlWYWx1ZV0uc2xpY2UoMCwgMTQpXG4gICAgc2hlZXREYXRhLnNraWxsc0J5VmFsdWUgPSBzaGVldERhdGEuc2tpbGxzQnlWYWx1ZS5maWx0ZXIoXG4gICAgICBza2lsbCA9PiBzaGVldERhdGEuc2tpbGxTaG93VW5jb21tb24gfHwgIXNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLnJhcml0eVxuICAgIClcbiAgICBzaGVldERhdGEudG9wV2VhcG9ucyA9IFsuLi5zaGVldERhdGEubWVsZWVXcG4sIC4uLnNoZWV0RGF0YS5yYW5nZVdwbl1cbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBhLnN5c3RlbS5za2lsbC5tYWluPy52YWx1ZSAtIGIuc3lzdGVtLnNraWxsLm1haW4/LnZhbHVlXG4gICAgICB9KVxuICAgICAgLnJldmVyc2UoKVxuICAgICAgLnNsaWNlKDAsIDMpXG4gICAgc2hlZXREYXRhLmRpc3BsYXlQbGF5ZXJOYW1lID0gZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAnQ29DNycsXG4gICAgICAnZGlzcGxheVBsYXllck5hbWVPblNoZWV0J1xuICAgIClcbiAgICBpZiAoc2hlZXREYXRhLmRpc3BsYXlQbGF5ZXJOYW1lICYmICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MucGxheWVybmFtZSkge1xuICAgICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IuY2hhcmFjdGVyVXNlclxuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLnBsYXllcm5hbWUgPSB1c2VyLm5hbWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3RhdHVzJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlBcm1vciA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnYXJtb3InKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcblxuICAgIHNoZWV0RGF0YS5oYXNJbnZlbnRvcnkgPVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9ucyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlBcm1vclxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmFja3N0b3J5ID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJhY2tzdG9yeSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIF9zYXZlU2Nyb2xsUG9zaXRpb25zIChodG1sKSB7XG4gICAgc3VwZXIuX3NhdmVTY3JvbGxQb3NpdGlvbnMoaHRtbClcbiAgICBjb25zdCBzZWxlY3RvcnMgPSBbJy5yaWdodC1wYW5lbCAudGFiLmRldmVsb3BtZW50IG9sJ11cbiAgICB0aGlzLl9zY3JvbGxQb3NpdGlvbnNYID0gc2VsZWN0b3JzLnJlZHVjZSgocG9zLCBzZWwpID0+IHtcbiAgICAgIGNvbnN0IGVsID0gaHRtbC5maW5kKHNlbClcbiAgICAgIHBvc1tzZWxdID0gQXJyYXkuZnJvbShlbCkubWFwKGVsID0+IGVsLnNjcm9sbExlZnQpXG4gICAgICByZXR1cm4gcG9zXG4gICAgfSwge30pXG4gIH1cblxuICBfcmVzdG9yZVNjcm9sbFBvc2l0aW9ucyAoaHRtbCkge1xuICAgIHN1cGVyLl9yZXN0b3JlU2Nyb2xsUG9zaXRpb25zKGh0bWwpXG4gICAgY29uc3Qgc2VsZWN0b3JzID0gWycucmlnaHQtcGFuZWwgLnRhYi5kZXZlbG9wbWVudCBvbCddXG4gICAgY29uc3QgcG9zaXRpb25zID0gdGhpcy5fc2Nyb2xsUG9zaXRpb25zWCB8fCB7fVxuICAgIGZvciAoY29uc3Qgc2VsIG9mIHNlbGVjdG9ycykge1xuICAgICAgY29uc3QgZWwgPSBodG1sLmZpbmQoc2VsKVxuICAgICAgZWwuZWFjaCgoaSwgZWwpID0+IHsgZWwuc2Nyb2xsTGVmdCA9IHBvc2l0aW9uc1tzZWxdPy5baV0gfHwgMCB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdhY3RvcicsICdjaGFyYWN0ZXInXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyL2luZGV4Lmh0bWwnLFxuICAgICAgd2lkdGg6IDY4NyxcbiAgICAgIGhlaWdodDogNjIzLFxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgc2Nyb2xsWTogWycucmlnaHQtcGFuZWwgLnRhYiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3NraWxscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgICAvLyBNT0RJRjogMC44Lnggb3duZXIgZGVwcmVjYXRlZCAgPT4gaXNPd25lclxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUuZmxhZ2dlZDRkZXYnKVxuICAgICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25Ta2lsbERldihldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucmVzZXQtb2NjdXBhdGlvbicpXG4gICAgICAgIC5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0T2NjdXBhdGlvbigpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJlc2V0LWFyY2hldHlwZScpXG4gICAgICAgIC5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0QXJjaGV0eXBlKCkpXG4gICAgICBodG1sLmZpbmQoJy5vcGVuLWl0ZW0nKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZXRhaWxzKGV2ZW50KSlcbiAgICAgIC8vIGh0bWxcbiAgICAgIC8vICAgLmZpbmQoJ1tuYW1lPVwiZGF0YS5hdHRyaWJzLmhwLnZhbHVlXCJdJylcbiAgICAgIC8vICAgLmNoYW5nZShhc3luYyBldmVudCA9PntcbiAgICAgIC8vICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAvLyAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIC8vICAgICBsZXQgdmFsdWUgPSBOdW1iZXIoIGV2ZW50LmN1cnJlbnRUYXJnZXQ/LnZhbHVlKVxuICAgICAgLy8gICAgIGlmKCAhaXNOYU4odmFsdWUpKSBhd2FpdCB0aGlzLmFjdG9yLnNldEhwKGV2ZW50KVxuICAgICAgLy8gICAgIGVsc2UgdWkubm90aWZpY2F0aW9ucy53YXJuKCdFcnJvciBwYXJzaW5nIEhQIHZhbHVlJylcbiAgICAgIC8vICAgfSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1saXN0LW1vZGUnKS5jbGljayhldmVudCA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlU2tpbGxMaXN0TW9kZShldmVudClcbiAgICAgIH0pXG4gICAgICBodG1sLmZpbmQoJy50b2dnbGUtdW5jb21tb24tbW9kZScpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTa2lsbFVuY29tbW9uTW9kZShldmVudClcbiAgICAgIH0pXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2FuaXR5LWxvc3MtdHlwZS1hZGQnKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkFkZFNhbml0eUxvc3NSZWFzb24uYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2FuaXR5LWxvc3MtdHlwZS1kZWxldGUnKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24uYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcubXl0aG9zRW5jb3VudGVyc1RvdGFsTG9zcycpXG4gICAgICAgICAgLmJsdXIodGhpcy5fb25FZGl0U2FuaXR5TG9zc1JlYXNvbi5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy50b2dnbGUta2VlcGVyLWZsYWdzJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25Ub2dnbGVLZWVwZXJGbGFncy5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5hZGQtbW9uZXRhcnknKS5jbGljayh0aGlzLl9vbkFkZE1vbmV0YXJ5LmJpbmQodGhpcykpXG4gICAgICAgIGh0bWwuZmluZCgnLnJlbW92ZS1tb25ldGFyeScpLmNsaWNrKHRoaXMuX29uUmVtb3ZlTW9uZXRhcnkuYmluZCh0aGlzKSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfb25BZGRNb25ldGFyeSAoKSB7XG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5hY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5hY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKSA6IFtdXG4gICAgdmFsdWVzLnB1c2goe1xuICAgICAgbmFtZTogJycsXG4gICAgICBtaW46IG51bGwsXG4gICAgICBtYXg6IG51bGwsXG4gICAgICBjYXNoVHlwZTogMCxcbiAgICAgIGNhc2hWYWx1ZTogJycsXG4gICAgICBhc3NldHNUeXBlOiAwLFxuICAgICAgYXNzZXRzVmFsdWU6ICcnLFxuICAgICAgc3BlbmRpbmdUeXBlOiAwLFxuICAgICAgc3BlbmRpbmdWYWx1ZTogJydcbiAgICB9KVxuICAgIHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnOiB2YWx1ZXMgfSlcbiAgfVxuXG4gIF9vblJlbW92ZU1vbmV0YXJ5IChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZGl2ID0gYS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgdmFsdWVzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5hY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKVxuICAgIHZhbHVlcy5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBfb25Ub2dnbGVLZWVwZXJGbGFncyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZykge1xuICAgICAgY2FzZSAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0RmxhZyhcbiAgICAgICAgICAnQ29DNycsXG4gICAgICAgICAgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnLFxuICAgICAgICAgICF0aGlzLmFjdG9yLm15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWRcbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbXl0aG9zSGFyZGVuZWQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnLCAhdGhpcy5hY3Rvci5teXRob3NIYXJkZW5lZClcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25BZGRTYW5pdHlMb3NzUmVhc29uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBuZXcgQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlcihcbiAgICAgIHtcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IsXG4gICAgICAgIHR5cGU6IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlXG4gICAgICB9LFxuICAgICAge31cbiAgICApLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRWRpdFNhbml0eUxvc3NSZWFzb24gKGV2ZW50KSB7XG4gICAgY29uc3QgaW5wdXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3Qgb2Zmc2V0ID0gaW5wdXQuY2xvc2VzdCgnLmZsZXhyb3cnKS5kYXRhKCdvZmZzZXQnKVxuICAgIGlmICh0eXBlb2YgdGhpcy5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cz8uW29mZnNldF0/LnRvdGFsTG9zcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLmFjdG9yLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKVxuICAgICAgc2FuaXR5TG9zc0V2ZW50c1tvZmZzZXRdLnRvdGFsTG9zcyA9IHBhcnNlSW50KGlucHV0LnZhbCgpLCAxMClcbiAgICAgIHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50cyB9KVxuICAgIH1cbiAgfVxuXG4gIF9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9mZnNldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgIC5jbG9zZXN0KCcuZmxleHJvdycpXG4gICAgICAuZGF0YSgnb2Zmc2V0JylcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gdGhpcy5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyA/PyBbXVxuICAgIHNhbml0eUxvc3NFdmVudHMuc3BsaWNlKG9mZnNldCwgMSlcbiAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICByZXR1cm4gbGVmdC50eXBlLmxvY2FsZUNvbXBhcmUocmlnaHQudHlwZSlcbiAgICB9KVxuICAgIHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50cyB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlU2tpbGxMaXN0TW9kZSAoZXZlbnQpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoXG4gICAgICAnQ29DNycsXG4gICAgICAnc2tpbGxMaXN0TW9kZScsXG4gICAgICAhdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKVxuICAgIClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVNraWxsVW5jb21tb25Nb2RlIChldmVudCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZyhcbiAgICAgICdDb0M3JyxcbiAgICAgICdza2lsbFNob3dVbmNvbW1vbicsXG4gICAgICAhdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJylcbiAgICApXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Ta2lsbERldiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgIGF3YWl0IHRoaXMuYWN0b3IuZGV2ZWxvcFNraWxsKHNraWxsSWQsIGV2ZW50LnNoaWZ0S2V5KVxuICB9XG5cbiAgX29uSXRlbURldGFpbHMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHR5cGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yW3R5cGVdXG4gICAgaWYgKGl0ZW0pIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBzeXN0ZW0gPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChmb3JtRGF0YSk/LnN5c3RlbVxuICAgIGlmIChzeXN0ZW0ubW9uZXRhcnk/LnZhbHVlcykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IE9iamVjdC52YWx1ZXMoc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyB8fCBbXSlcbiAgICB9XG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cblxuICBzdGF0aWMgcmVuZGVyU2hlZXQgKHNoZWV0LCBodG1sKSB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJykpIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtYmcnLFxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtYmcnLFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgICAgKVxuICAgICAgICAgIC8vIGNvbnN0IGJvcmRlckltYWdlID0gc2hlZXQuZWxlbWVudC5maW5kKCdmb3JtJykuY3NzKCdib3JkZXItaW1hZ2UnKTtcbiAgICAgICAgICAvLyBzaGVldC5lbGVtZW50LmZpbmQoJ2Zvcm0nKS5jc3MoJ2JvcmRlci1pbWFnZScsICcnKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScpICE9PSAnc2xpY2UnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBsZXQgc3R5bGVTaGVldCwgY3NzUnVsZUluZGV4XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChkb2N1bWVudC5zdHlsZVNoZWV0c1tpXS5ocmVmPy5lbmRzV2l0aCgnY29jN2cuY3NzJykpIHtcbiAgICAgICAgICAgICAgICBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVTaGVldC5ydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIHN0eWxlU2hlZXQucnVsZXNbaV0uc2VsZWN0b3JUZXh0ID09PSAnLnNoZWV0VjIuY2hhcmFjdGVyIGZvcm0nXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBjc3NSdWxlSW5kZXggPSBpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNzc1J1bGVJbmRleCkge1xuICAgICAgICAgICAgICBjb25zdCBDU1NTdHlsZSA9IHN0eWxlU2hlZXQucnVsZXNbY3NzUnVsZUluZGV4XS5zdHlsZVxuICAgICAgICAgICAgICBDU1NTdHlsZS5yZW1vdmVQcm9wZXJ0eSgnYm9yZGVyLWltYWdlJylcbiAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnLFxuICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdhdXRvJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnY29udGFpbic6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvbnRhaW4nKVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdjb3Zlcic6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvdmVyJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnYXV0bycpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5nc1xuICAgICAgICAgICAgLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW90aGVyLXNoZWV0LWJnJyxcbiAgICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1vdGhlci1zaGVldC1iZycsXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWZyb250LWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRnJvbnRDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1iYWNrLWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1pbnRlcmFjdGl2ZS1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtGaXhlZFNraWxsTGVuZ3RoJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoJy0tc2tpbGwtbGVuZ3RoJywgJ2F1dG8nKVxuICAgICAgICBzaGVldC5lbGVtZW50LmNzcygnLS1za2lsbC1zcGVjaWFsaXphdGlvbi1sZW5ndGgnLCAnYXV0bycpXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnKSkge1xuICAgICAgICBjb25zdCBjdXN0b21TaGVldEZvbnQgPSBuZXcgRm9udEZhY2UoXG4gICAgICAgICAgJ2N1c3RvbVNoZWV0Rm9udCcsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250JylcbiAgICAgICAgKVxuICAgICAgICBjdXN0b21TaGVldEZvbnRcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZhY2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpKSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnQgPSBuZXcgRm9udEZhY2UoXG4gICAgICAgICAgJ2N1c3RvbVNoZWV0Rm9udCcsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpLFxuICAgICAgICAgIHsgd2VpZ2h0OiAnYm9sZCcgfVxuICAgICAgICApXG4gICAgICAgIGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnRcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZhY2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScpKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSBgJHtnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJyl9cHhgXG4gICAgICAgIGlmIChzaXplICE9PSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJykpIHtcbiAgICAgICAgICAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJywgc2l6ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc2hlZXQuYWN0b3I/LnN5c3RlbS5wYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGVldC5hY3Rvci5zeXN0ZW0ucGFubmVsKSkge1xuICAgICAgICBjb25zdCBwYW5uZWxDbGFzcyA9IGNoYXRIZWxwZXIuY2FtZWxDYXNlVG9IeXBoZW4oa2V5KVxuICAgICAgICBjb25zdCBwYW5uZWwgPSBodG1sLmZpbmQoYC5wYW5uZWwuJHtwYW5uZWxDbGFzc31gKVxuICAgICAgICBpZiAodmFsdWUuZXhwYW5kZWQpIHBhbm5lbC5hZGRDbGFzcygnZXhwYW5kZWQnKVxuICAgICAgICBlbHNlIHBhbm5lbC5yZW1vdmVDbGFzcygnZXhwYW5kZWQnKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29tYmF0IHtcbiAgc3RhdGljIHJlbmRlckNvbWJhdFRyYWNrZXIgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIGNvbnN0IGN1cnJlbnRDb21iYXQgPSBkYXRhLmNvbWJhdHNbZGF0YS5jdXJyZW50SW5kZXggLSAxXVxuICAgIGlmICghY3VycmVudENvbWJhdCkgcmV0dXJuXG5cbiAgICAvLyBUT0RPIDogU2kgbGUgY29tYmF0IGVzdCBkZWphIGRlYnV0w6kgYXZhbnQgY2hhcmdlbWVudCBsYSBmb25jdGlvbiBkJ2luaXRpYXRpdmUgcG9pbnRlIHZlcnMgbCdhbmNpZW5uZS5cbiAgICAvLyBsYSBmb25jdGlvbiBhdHRyaWJ1w6llIGVzdCBkYXRhLmNvbWJhdC5yb2xsSW5pdGlhdGl2ZVxuICAgIGh0bWwuZmluZCgnLmNvbWJhdGFudCcpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAvLyBpZiggZ2FtZS5jb21iYXQuc3RhcnRlZCl7XG5cbiAgICAgIGNvbnN0IGNvbWJJZCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb21iYXRhbnQtaWQnKVxuICAgICAgY29uc3QgY29tYmF0YW50Q29udHJvbHNEaXYgPSBlbC5xdWVyeVNlbGVjdG9yKCcuY29tYmF0YW50LWNvbnRyb2xzJylcbiAgICAgIC8vIGNvbnN0IGNvbWJhdGFudCA9IGdhbWUuY29tYmF0LmdldENvbWJhdGFudChjb21iSWQpO1xuICAgICAgY29uc3QgY29tYmF0YW50ID0gY3VycmVudENvbWJhdC5jb21iYXRhbnRzLmdldChjb21iSWQpXG5cbiAgICAgIGlmIChjb21iYXRhbnQuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgICAkKGNvbWJhdGFudENvbnRyb2xzRGl2KS5wcmVwZW5kKFxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFjdGl2ZSBhZGQtaW5pdFwiIHRpdGxlPVwiJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5QdXRHdW5Bd2F5J1xuICAgICAgICAgICl9XCIgZGF0YS1jb250cm9sPVwiZHJhd0d1blwiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1yZXZvbHZlclwiPjwvaT48L2E+YFxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGNvbWJhdGFudENvbnRyb2xzRGl2KS5wcmVwZW5kKFxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFkZC1pbml0XCIgdGl0bGU9XCIke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkRyYXdHdW4nXG4gICAgICAgICAgKX1cIiBkYXRhLWNvbnRyb2w9XCJkcmF3R3VuXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLXJldm9sdmVyXCI+PC9pPjwvYT5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSA9PT0gJ29wdGlvbmFsJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5SW5pdEFzVGV4dCcpXG4gICAgICApIHtcbiAgICAgICAgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlKSB7XG4gICAgICAgICAgY29uc3QgdG9rZW5Jbml0aWF0aXZlID0gZWwucXVlcnlTZWxlY3RvcignLnRva2VuLWluaXRpYXRpdmUnKVxuICAgICAgICAgIGNvbnN0IGluaXRpYXRpdmVUZXN0ID0gdG9rZW5Jbml0aWF0aXZlLnF1ZXJ5U2VsZWN0b3IoJy5pbml0aWF0aXZlJylcbiAgICAgICAgICBjb25zdCByb2xsID1cbiAgICAgICAgICAgIDEwMCAqIGNvbWJhdGFudC5pbml0aWF0aXZlIC0gMTAwICogTWF0aC5mbG9vcihjb21iYXRhbnQuaW5pdGlhdGl2ZSlcbiAgICAgICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoY29tYmF0YW50LmluaXRpYXRpdmUpKSB7XG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZnVtYmxlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdmYWlsdXJlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgncmVndWxhci1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5UmVndWxhcidcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnaGFyZC1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5SGFyZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZXh0cmVtZS1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5RXh0cmVtZSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2NyaXRpY2FsJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5Q3JpdGljYWwnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlIDwgMCkge1xuICAgICAgICBjb25zdCBoNCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy50b2tlbi1uYW1lJykucXVlcnlTZWxlY3RvcignaDQnKVxuICAgICAgICBjb25zdCBzcGFuID0gZWwucXVlcnlTZWxlY3Rvcignc3Bhbi5pbml0aWF0aXZlJylcbiAgICAgICAgaDQuc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICAgIGg0LnN0eWxlLnRleHRTaGFkb3cgPSAnMXB4IDFweCA0cHggZGFya3JlZCdcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcbiAgICAgICAgc3Bhbi5zdHlsZS50ZXh0U2hhZG93ID0gJzFweCAxcHggNHB4IGRhcmtyZWQnXG5cbiAgICAgICAgZWwuc3R5bGUuY29sb3IgPSAnZGFya3JlZCdcbiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZCA9ICdibGFjaydcbiAgICAgICAgZWwuc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICB9XG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5hZGQtaW5pdCcpLmNsaWNrKGV2ZW50ID0+IENvQzdDb21iYXQuX29uVG9nZ2xlR3VuKGV2ZW50KSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25Ub2dnbGVHdW4gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgYnRuID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxpID0gYnRuLmNsb3Nlc3QoJy5jb21iYXRhbnQnKVxuICAgIGNvbnN0IGMgPSBhd2FpdCBnYW1lLmNvbWJhdC5jb21iYXRhbnRzLmdldChsaS5kYXRhc2V0LmNvbWJhdGFudElkKVxuICAgIGlmIChjLmFjdG9yLmlzT3duZXIpIHtcbiAgICAgIGlmIChjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIHRydWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbmV3SW5pdCA9IGF3YWl0IGMuYWN0b3Iucm9sbEluaXRpYXRpdmUoISFjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpXG4gICAgaWYgKGMuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgaWYgKGMuaW5pdGlhdGl2ZSA8IG5ld0luaXQpIGdhbWUuY29tYmF0LnNldEluaXRpYXRpdmUoYy5pZCwgbmV3SW5pdClcbiAgICB9IGVsc2UgZ2FtZS5jb21iYXQuc2V0SW5pdGlhdGl2ZShjLmlkLCBuZXdJbml0KVxuICB9XG59XG5cbi8qKlxuICogUm9sbCBpbml0aWF0aXZlIGZvciBvbmUgb3IgbXVsdGlwbGUgQ29tYmF0YW50cyB3aXRoaW4gdGhlIENvbWJhdCBlbnRpdHlcbiAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBpZHMgICAgIEEgQ29tYmF0YW50IGlkIG9yIEFycmF5IG9mIGlkcyBmb3Igd2hpY2ggdG8gcm9sbFxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAgICAgQWRkaXRpb25hbCBvcHRpb25zIHdoaWNoIG1vZGlmeSBob3cgaW5pdGlhdGl2ZSByb2xscyBhcmUgY3JlYXRlZCBvciBwcmVzZW50ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBbb3B0aW9ucy5mb3JtdWxhXSAgICAgICAgIEEgbm9uLWRlZmF1bHQgaW5pdGlhdGl2ZSBmb3JtdWxhIHRvIHJvbGwuIE90aGVyd2lzZSB0aGUgc3lzdGVtIGRlZmF1bHQgaXMgdXNlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudXBkYXRlVHVybj10cnVlXSAgICAgVXBkYXRlIHRoZSBDb21iYXQgdHVybiBhZnRlciBhZGRpbmcgbmV3IGluaXRpYXRpdmUgc2NvcmVzIHRvIGtlZXAgdGhlIHR1cm4gb24gdGhlIHNhbWUgQ29tYmF0YW50LlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLm1lc3NhZ2VPcHRpb25zPXt9XSAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2l0aCB3aGljaCB0byBjdXN0b21pemUgY3JlYXRlZCBDaGF0IE1lc3NhZ2VzXG4gKiBAcmV0dXJuIHtQcm9taXNlPENvbWJhdD59ICAgICAgICBBIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIHVwZGF0ZWQgQ29tYmF0IGVudGl0eSBvbmNlIHVwZGF0ZXMgYXJlIGNvbXBsZXRlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcm9sbEluaXRpYXRpdmUgKFxuICBpZHMsXG4gIHsgZm9ybXVsYSA9IG51bGwsIHVwZGF0ZVR1cm4gPSB0cnVlLCBtZXNzYWdlT3B0aW9ucyA9IHt9IH0gPSB7fVxuKSB7XG4gIC8vIEl0ZXJhdGUgb3ZlciBDb21iYXRhbnRzLCBwZXJmb3JtaW5nIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgZWFjaFxuICBjb25zdCB1cGRhdGVzID0gW11cbiAgZm9yIChjb25zdCBbLCBpZF0gb2YgaWRzLmVudHJpZXMoKSkge1xuICAgIC8vIEdldCBDb21iYXRhbnQgZGF0YSAobm9uLXN0cmljdGx5KVxuICAgIGNvbnN0IGNvbWJhdGFudCA9IHRoaXMuY29tYmF0YW50cy5nZXQoaWQpXG5cbiAgICAvLyBQcm9kdWNlIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgdGhlIENvbWJhdGFudFxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBjb21iYXRhbnQuYWN0b3Iucm9sbEluaXRpYXRpdmUoXG4gICAgICAhIWNvbWJhdGFudC5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpXG4gICAgKVxuICAgIHVwZGF0ZXMucHVzaCh7IF9pZDogaWQsIGluaXRpYXRpdmU6IHJvbGwgfSlcbiAgfVxuICBpZiAoIXVwZGF0ZXMubGVuZ3RoKSByZXR1cm4gdGhpc1xuXG4gIC8vIFVwZGF0ZSBtdWx0aXBsZSBjb21iYXRhbnRzXG4gIGF3YWl0IHRoaXMudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0NvbWJhdGFudCcsIHVwZGF0ZXMpXG5cbiAgcmV0dXJuIHRoaXNcbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSwgSXRlbSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQ0lEQmF0Y2ggZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjb2MtaWQtZWRpdG9yJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jb2MtaWQtYmF0Y2guaGJzJyxcbiAgICAgIHdpZHRoOiA3MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHRpdGxlOiAnQ29DNy5Db0NJREZsYWcudGl0bGUnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICBzdWJtaXRPbkNsb3NlOiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuZm91bmRLZXlzID0gT2JqZWN0LmtleXMoc2hlZXREYXRhLm9iamVjdC5mb3VuZEtleXMpLnJlZHVjZSgob3V0LCBrZXkpID0+IHtcbiAgICAgIG91dC5wdXNoKHsgbmFtZToga2V5LCBrZXk6IHNoZWV0RGF0YS5vYmplY3QuZm91bmRLZXlzW2tleV0gfSlcbiAgICAgIHJldHVybiBvdXRcbiAgICB9LCBbXSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgc2hlZXREYXRhLm1pc3NpbmdOYW1lcyA9IE9iamVjdC5rZXlzKHNoZWV0RGF0YS5vYmplY3QubWlzc2luZ05hbWVzKS5yZWR1Y2UoKG91dCwga2V5KSA9PiB7XG4gICAgICBvdXQucHVzaCh7IGtleTogc2hlZXREYXRhLm9iamVjdC5mb3VuZEtleXNba2V5XSA/PyAnJywgbmFtZToga2V5LCBjdXN0b206IHNoZWV0RGF0YS5vYmplY3QubWlzc2luZ05hbWVzW2tleV0sIHN1ZmZpeDogc2hlZXREYXRhLm9iamVjdC5taXNzaW5nTmFtZXNba2V5XS5yZXBsYWNlKHRoaXMub2JqZWN0LnN1ZmZpeFJlZ0V4cCwgJycpIH0pXG4gICAgICByZXR1cm4gb3V0XG4gICAgfSwgW10pLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5leGlzdGluZycpLmNoYW5nZSh0aGlzLm9uU2V0TmFtZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmZhLXdhbmQtbWFnaWMnKS5jbGljayh0aGlzLm9uQ2xpY2tHdWVzcy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnaW5wdXQnKS5rZXl1cCh0aGlzLm9uS2V5dXAuYmluZCh0aGlzKSlcbiAgfVxuXG4gIG9uU2V0TmFtZSAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzW29iai5jbG9zZXN0KCdsaScpLmRhdGEoJ25hbWUnKV0gPSBvYmoudmFsKClcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgb25DbGlja0d1ZXNzIChldmVudCkge1xuICAgIGNvbnN0IG9iaiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBuYW1lID0gb2JqLmNsb3Nlc3QoJ2xpJykuZGF0YSgnbmFtZScpXG4gICAgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzW25hbWVdID0gdGhpcy5vYmplY3QuaWRQcmVmaXggKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKG5hbWUpXG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIG9uS2V5dXAgKGV2ZW50KSB7XG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IG5hbWUgPSBvYmouY2xvc2VzdCgnbGknKS5kYXRhKCduYW1lJylcbiAgICB0aGlzLm9iamVjdC5taXNzaW5nTmFtZXNbbmFtZV0gPSB0aGlzLm9iamVjdC5pZFByZWZpeCArIG9iai52YWwoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKGV2ZW50LnN1Ym1pdHRlcikge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LnR5cGVOYW1lID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2tpbGwnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgYXdhaXQgQ29DSURCYXRjaC5wcm9jZXNzU2tpbGxLZXlzKHRoaXMub2JqZWN0LnVwZGF0ZUxpc3QsIHRoaXMub2JqZWN0Lm1pc3NpbmdOYW1lcylcbiAgICAgIH1cbiAgICAgIHRoaXMub2JqZWN0LnJlc29sdmUodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcHJvY2Vzc1NraWxsS2V5cyAodXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIGNvbnN0IGFjdG9ycyA9IHt9XG4gICAgY29uc3Qgc2NlbmVzID0ge31cbiAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVMaXN0KSB7XG4gICAgICB1cGRhdGUuY29jaWRGbGFnLmlkID0gbWlzc2luZ05hbWVzW3VwZGF0ZS5uYW1lXVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuY29jaWRGbGFnLmxhbmcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZS5jb2NpZEZsYWcubGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5jb2NpZEZsYWcucHJpb3JpdHkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZS5jb2NpZEZsYWcucHJpb3JpdHkgPSAwXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5jb2NpZEZsYWcuZXJhcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlLmNvY2lkRmxhZy5lcmFzID0ge31cbiAgICAgIH1cbiAgICAgIGNvbnN0IGZsYWdzID0gZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KHsgZmxhZ3M6IHsgQ29DNzogeyBjb2NpZEZsYWc6IHVwZGF0ZS5jb2NpZEZsYWcgfSB9IH0pXG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5zY2VuZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzY2VuZXNbdXBkYXRlLnNjZW5lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldCh1cGRhdGUuc2NlbmUpXG4gICAgICAgICAgc2NlbmVzW3VwZGF0ZS5zY2VuZV0gPSBzY2VuZS50b09iamVjdCgpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9rZW5PZmZzZXQgPSBzY2VuZXNbdXBkYXRlLnNjZW5lXS50b2tlbnMuZmluZEluZGV4KHQgPT4gdC5faWQgPT09IHVwZGF0ZS50b2tlbilcbiAgICAgICAgaWYgKHRva2VuT2Zmc2V0ID4gLTEpIHtcbiAgICAgICAgICBjb25zdCBpdGVtT2Zmc2V0ID0gc2NlbmVzW3VwZGF0ZS5zY2VuZV0udG9rZW5zW3Rva2VuT2Zmc2V0XS5hY3RvckRhdGEuaXRlbXMuZmluZEluZGV4KGkgPT4gaS5faWQgPT09IHVwZGF0ZS5pdGVtKVxuICAgICAgICAgIGlmIChpdGVtT2Zmc2V0ID4gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGFuZGVkRmxhZ3MgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChPYmplY3QuZW50cmllcyhmbGFncykucmVkdWNlKChvdXQsIGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChlbnRyeVswXS5tYXRjaCgvXmZsYWdzXFwuQ29DN1xcLmNvY2lkRmxhZy8pKSB7XG4gICAgICAgICAgICAgICAgb3V0W2VudHJ5WzBdXSA9IGVudHJ5WzFdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIG91dFxuICAgICAgICAgICAgfSwge30pKVxuICAgICAgICAgICAgc2NlbmVzW3VwZGF0ZS5zY2VuZV0udG9rZW5zW3Rva2VuT2Zmc2V0XS5hY3RvckRhdGEuaXRlbXNbaXRlbU9mZnNldF0gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zW2l0ZW1PZmZzZXRdLCBleHBhbmRlZEZsYWdzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdXBkYXRlLmFjdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGFjdG9yc1t1cGRhdGUuYWN0b3JdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGFjdG9yc1t1cGRhdGUuYWN0b3JdID0gW11cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtID0ge1xuICAgICAgICAgIF9pZDogdXBkYXRlLml0ZW1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhmbGFncykpIHtcbiAgICAgICAgICBpZiAoa2V5Lm1hdGNoKC9eZmxhZ3NcXC5Db0M3XFwuY29jaWRGbGFnLykpIHtcbiAgICAgICAgICAgIGl0ZW1ba2V5XSA9IGZsYWdzW2tleV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWN0b3JzW3VwZGF0ZS5hY3Rvcl0ucHVzaChpdGVtKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICBfaWQ6IHVwZGF0ZS5pdGVtXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoZmxhZ3MpKSB7XG4gICAgICAgICAgaWYgKGtleS5tYXRjaCgvXmZsYWdzXFwuQ29DN1xcLmNvY2lkRmxhZy8pKSB7XG4gICAgICAgICAgICBpdGVtW2tleV0gPSBmbGFnc1trZXldXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xuICAgICAgYXdhaXQgSXRlbS51cGRhdGVEb2N1bWVudHMoaXRlbXMpXG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhhY3RvcnMpLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBhY3RvcklkIG9mIE9iamVjdC5rZXlzKGFjdG9ycykpIHtcbiAgICAgICAgYXdhaXQgSXRlbS51cGRhdGVEb2N1bWVudHMoYWN0b3JzW2FjdG9ySWRdLCB7IHBhcmVudDogZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhzY2VuZXMpLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBzY2VuZUlkIG9mIE9iamVjdC5rZXlzKHNjZW5lcykpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgc2NlbmUudXBkYXRlKHNjZW5lc1tzY2VuZUlkXSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwb3B1bGF0ZVNraWxsS2V5cyAodXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzLCBmb3VuZEtleXMpIHtcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGdhbWUuYWN0b3JzLmNvbnRlbnRzKSB7XG4gICAgICBjb25zdCBhY3RvckRhdGEgPSBhY3Rvci50b09iamVjdCgpXG4gICAgICBpZiAoYWN0b3JEYXRhLml0ZW1zKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3RvckRhdGEuaXRlbXMpIHtcbiAgICAgICAgICBjb25zdCBpdGVtRGF0YSA9IGl0ZW0gaW5zdGFuY2VvZiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID8gaXRlbS50b09iamVjdCgpIDogaXRlbVxuICAgICAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBpZiAoIWl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQ/Lm1hdGNoKC9eaS5za2lsbC8pKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgbWlzc2luZ05hbWVzW2l0ZW1EYXRhLm5hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlTGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IuX2lkLFxuICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW1EYXRhLl9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgIGNvY2lkRmxhZzogaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnID8/IHt9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmb3VuZEtleXNbaXRlbURhdGEubmFtZV0gPSBpdGVtRGF0YS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2FtZS5pdGVtcy5jb250ZW50cykge1xuICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGl0ZW0udG9PYmplY3QoKSA6IGl0ZW1cbiAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGlmICghaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZD8ubWF0Y2goL15pLnNraWxsLykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICBpdGVtOiBpdGVtRGF0YS5faWQsXG4gICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgY29jaWRGbGFnOiBpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWcgPz8ge31cbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kS2V5c1tpdGVtRGF0YS5uYW1lXSA9IGl0ZW1EYXRhLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBzY2VuZSBvZiBnYW1lLnNjZW5lcykge1xuICAgICAgY29uc3Qgc2NlbmVEYXRhID0gc2NlbmUudG9PYmplY3QoKVxuICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBzY2VuZURhdGEudG9rZW5zID8/IFtdKSB7XG4gICAgICAgIGlmICh0b2tlbi5hY3RvcklkICYmICF0b2tlbi5hY3RvckxpbmspIHtcbiAgICAgICAgICBjb25zdCBhY3RvckRhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0b2tlbi5hY3RvckRhdGEpXG4gICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFjdG9yRGF0YS5pdGVtcyA/PyBbXSkge1xuICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGl0ZW0udG9PYmplY3QoKSA6IGl0ZW1cbiAgICAgICAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICAgIGlmICghaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZD8ubWF0Y2goL15pLnNraWxsLykpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgICBzY2VuZTogc2NlbmVEYXRhLl9pZCxcbiAgICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlbi5faWQsXG4gICAgICAgICAgICAgICAgICBpdGVtOiBpdGVtRGF0YS5faWQsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgY29jaWRGbGFnOiBpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWcgPz8ge31cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvdW5kS2V5c1tpdGVtRGF0YS5uYW1lXSA9IGl0ZW1EYXRhLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKG1pc3NpbmdOYW1lcykuZmlsdGVyKGtleSA9PiBtaXNzaW5nTmFtZXNba2V5XSA9PT0gJycpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiAvXmlcXC5za2lsbFxcLi8sIHR5cGU6ICdpJywgZXJhOiBmYWxzZSB9KVxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGZvdW5kS2V5c1tpdGVtLm5hbWVdID0gaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgfVxuICAgICAgY29uc3QgQ29DSURLZXlzID0gT2JqZWN0LmFzc2lnbihmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QoZ2FtZS5pMThuLl9mYWxsYmFjay5Db0M3Py5Db0NJREZsYWc/LmtleXMgPz8ge30pLCBmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QoZ2FtZS5pMThuLnRyYW5zbGF0aW9ucy5Db0M3Py5Db0NJREZsYWc/LmtleXMgPz8ge30pKVxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gQ29DSURLZXlzKSB7XG4gICAgICAgIGZvdW5kS2V5c1tnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5rZXlzLicgKyBrZXkpXSA9IGtleVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIG1pc3NpbmdOYW1lcykge1xuICAgICAgICBpZiAodHlwZW9mIGZvdW5kS2V5c1tuYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBtaXNzaW5nTmFtZXNbbmFtZV0gPSBmb3VuZEtleXNbbmFtZV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKHR5cGUpIHtcbiAgICBjb25zdCB1cGRhdGVMaXN0ID0gW11cbiAgICBjb25zdCBtaXNzaW5nTmFtZXMgPSB7fVxuICAgIGNvbnN0IGZvdW5kS2V5cyA9IHt9XG4gICAgbGV0IHR5cGVOYW1lID0gJydcbiAgICBsZXQgaWRQcmVmaXggPSAnJ1xuICAgIGxldCBzdWZmaXhSZWdFeHAgPSBudWxsXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgIHR5cGVOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJylcbiAgICAgICAgaWRQcmVmaXggPSAnaS5za2lsbC4nXG4gICAgICAgIHN1ZmZpeFJlZ0V4cCA9IC9eaVxcLnNraWxsXFwuL1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGF3YWl0IENvQ0lEQmF0Y2gucG9wdWxhdGVTa2lsbEtleXModXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzLCBmb3VuZEtleXMpXG4gICAgaWYgKE9iamVjdC5rZXlzKG1pc3NpbmdOYW1lcykuZmlsdGVyKGtleSA9PiBtaXNzaW5nTmFtZXNba2V5XSA9PT0gJycpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYXdhaXQgQ29DSURCYXRjaC5wcm9jZXNzU2tpbGxLZXlzKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDb0NJREJhdGNoKHsgdHlwZU5hbWUsIGlkUHJlZml4LCBzdWZmaXhSZWdFeHAsIHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcywgZm91bmRLZXlzLCByZXNvbHZlIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgRGlhbG9nLCBmb3VuZHJ5LCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0NJREJhdGNoIH0gZnJvbSAnLi9hcHBzL2NvYy1pZC1iYXRjaC5qcydcblxuZXhwb3J0IGNsYXNzIFVwZGF0ZXIge1xuICBzdGF0aWMgYXN5bmMgY2hlY2tGb3JVcGRhdGUgKCkge1xuICAgIGxldCBzeXN0ZW1VcGRhdGVWZXJzaW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicpXG4gICAgaWYgKGdhbWUuYWN0b3JzLnNpemUgKyBnYW1lLnNjZW5lcy5zaXplICsgZ2FtZS5pdGVtcy5zaXplICsgZ2FtZS5qb3VybmFsLnNpemUgKyBnYW1lLnRhYmxlcy5zaXplID09PSAwKSB7XG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gYWN0b3JzLCBpdGVtcywgam91cm5hbHMsIHJvbGwgdGFibGVzLCBvciBzY2VuZXMgc2tpcCB3b3JsZCB1cGRhdGVcbiAgICAgIHN5c3RlbVVwZGF0ZVZlcnNpb24gPSBnYW1lLnN5c3RlbS52ZXJzaW9uXG4gICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgc3lzdGVtVXBkYXRlVmVyc2lvbilcbiAgICB9XG4gICAgY29uc3QgcnVuTWlncmF0ZSA9IGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS5zeXN0ZW0udmVyc2lvbiwgc3lzdGVtVXBkYXRlVmVyc2lvbiA/PyAnMCcpXG4gICAgdGhpcy51cGRhdGVkTW9kdWxlcyA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJykgfHwge31cbiAgICB0aGlzLmN1cnJlbnRNb2R1bGVzID0ge31cbiAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgaWYgKCFbJ0NvQzcnLCAnd29ybGQnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lKSAmJiBbJ0FjdG9yJywgJ0l0ZW0nLCAnU2NlbmUnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnR5cGUpKSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuY3VycmVudE1vZHVsZXMsIHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpKSB7XG4gICAgICAgICAgLy8gT25seSBuZWVkIHRvIGNoZWNrIGVhY2ggbW9kdWxlIG9uY2VcbiAgICAgICAgICBjb25zdCBtb2R1bGUgPSBnYW1lLm1vZHVsZXMuZ2V0KHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpXG4gICAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgICAgaWYgKHJ1bk1pZ3JhdGUgfHwgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnVwZGF0ZWRNb2R1bGVzLCBtb2R1bGUuaWQpIHx8IFN0cmluZyh0aGlzLnVwZGF0ZWRNb2R1bGVzW21vZHVsZS5pZF0pICE9PSBTdHJpbmcobW9kdWxlLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgIC8vIEEgbWlncmF0aW9uIGlzIHJlcXVpcmVkLCBtb2R1bGUgaGFzIG5vdCBiZWVuIHVwZGF0ZWQgYmVmb3JlLCBvciB0aGUgdmVyc2lvbiBudW1iZXIgaGFzIGNoYW5nZWQsIGNoZWNrIGFnYWluc3Qga25vd24gZ29vZCB2YWx1ZXNcbiAgICAgICAgICAgICAgY29uc3Qga25vd25Nb2R1bGVWZXJzaW9ucyA9IHtcbiAgICAgICAgICAgICAgICAnY2FsbC1vZi1jdGh1bGh1LWZvdW5kcnl2dHQtaW52ZXN0aWdhdG9yLXdpemFyZCc6ICcxLjAuNScsXG4gICAgICAgICAgICAgICAgJ2NoYS1jb2MtZnZ0dC1lbi1xdWlja3N0YXJ0JzogJzUuMC41JyxcbiAgICAgICAgICAgICAgICAnY2hhLWNvYy1mdnR0LWVuLXN0YXJ0ZXJzZXQnOiAnNS4wLjUnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBrbm93bk1vZHVsZVZlcnNpb25zW21vZHVsZS5pZF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24obW9kdWxlLnZlcnNpb24sIGtub3duTW9kdWxlVmVyc2lvbnNbbW9kdWxlLmlkXSkpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudE1vZHVsZXNbbW9kdWxlLmlkXSA9IG1vZHVsZS52ZXJzaW9uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudE1vZHVsZXNbbW9kdWxlLmlkXSA9IG1vZHVsZS52ZXJzaW9uXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJ1bk1pZ3JhdGUgfHwgT2JqZWN0LmtleXModGhpcy5jdXJyZW50TW9kdWxlcykubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIG5ldyBEaWFsb2coe1xuICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UaXRsZScpLFxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRNb2R1bGVzKS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgPyAnQ29DNy5NaWdyYXRlLk1lc3NhZ2UnXG4gICAgICAgICAgICAgIDogJ0NvQzcuTWlncmF0ZS5XaXRoTW9kdWxlc01lc3NhZ2UnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB2ZXJzaW9uOiBnYW1lLnN5c3RlbS52ZXJzaW9uLFxuICAgICAgICAgICAgICBtb2R1bGVzOlxuICAgICAgICAgICAgICAgICc8dWw+PGxpPicgK1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpXG4gICAgICAgICAgICAgICAgICAubWFwKG1vZCA9PiBnYW1lLm1vZHVsZXMuZ2V0KG1vZCkudGl0bGUpXG4gICAgICAgICAgICAgICAgICAuam9pbignPC9saT48bGk+JykgK1xuICAgICAgICAgICAgICAgICc8L2xpPjwvdWw+J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25VcGRhdGUnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IFVwZGF0ZXIudXBkYXRlKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBza2lwOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25Ta2lwJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLnJlbmRlcih0cnVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IERpYWxvZyh7XG4gICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRpdGxlJyksXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkdNUmVxdWlyZWQnLCB7XG4gICAgICAgICAgICB2ZXJzaW9uOiBnYW1lLnN5c3RlbS52ZXJzaW9uXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgT0s6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvbk9rYXknKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZSAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGVEb2N1bWVudHMoKVxuXG4gICAgLy8gLy8gSWYgd2UgcHV0IHVwIGEgdGVtcG9yYXJ5IHNjZW5lIHJldHVybiB0aGUgdXNlciBhbmQgcmVtb3ZlIGl0XG4gICAgLy8gaWYgKFxuICAgIC8vICAgdHlwZW9mIHRoaXMudGVtcG9yYXJ5U2NlbmUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gICB0eXBlb2YgdGhpcy5vcmlnaW5hbFNjZW5lICE9PSAndW5kZWZpbmVkJ1xuICAgIC8vICkge1xuICAgIC8vICAgYXdhaXQgdGhpcy5vcmlnaW5hbFNjZW5lLnZpZXcoKVxuICAgIC8vICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxuICAgIC8vICAgYXdhaXQgdGhpcy50ZW1wb3JhcnlTY2VuZS5kZWxldGUoKVxuICAgIC8vIH1cblxuICAgIC8vIE1pZ3JhdGUgU2V0dGluZ3MgaWYgUHVscCBSdWxlcyBpcyBlbmFibGVkIHR1cm4gb24gYWxsIHJ1bGVzXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlcycpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZURvdWJsZU1heEhlYWx0aCcsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2snLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVPcmdhbml6YXRpb24nLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRmFzdGVyUmVjb3ZlcnknLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycsIHRydWUpXG4gICAgfVxuXG4gICAgYXdhaXQgQ29DSURCYXRjaC5jcmVhdGUoJ3NraWxsJylcblxuICAgIGNvbnN0IHNldHRpbmdzID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLnVwZGF0ZWRNb2R1bGVzIHx8IHt9LCB0aGlzLmN1cnJlbnRNb2R1bGVzKVxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywgc2V0dGluZ3MpXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIGdhbWUuc3lzdGVtLnZlcnNpb24pXG5cbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkNvbXBsZXRlJyksIHtcbiAgICAgIHBlcm1hbmVudDogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlRG9jdW1lbnRzICgpIHtcbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yc1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLm1pZ3JhdGVBY3RvckRhdGEoYWN0b3IudG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEFjdG9yIGRvY3VtZW50ICR7YWN0b3IubmFtZX1gKVxuICAgICAgICAgIGF3YWl0IGFjdG9yLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckFjdG9yJywge1xuICAgICAgICAgIG5hbWU6IGFjdG9yLm5hbWUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEl0ZW1zXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGdhbWUuaXRlbXMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVJdGVtRGF0YShpdGVtLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBJdGVtIGRvY3VtZW50ICR7aXRlbS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JJdGVtJywge1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgVGFibGVzXG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiBnYW1lLnRhYmxlcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVRhYmxlRGF0YSh0YWJsZS50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgVGFibGUgZG9jdW1lbnQgJHt0YWJsZS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgdGFibGUudXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yVGFibGUnLCB7XG4gICAgICAgICAgbmFtZTogdGFibGUubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgTWFjcm9zXG4gICAgZm9yIChjb25zdCBtYWNybyBvZiBnYW1lLm1hY3Jvcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZU1hY3JvRGF0YShtYWNyby50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgTWFjcm8gZG9jdW1lbnQgJHttYWNyby5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgbWFjcm8udXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yTWFjcm8nLCB7XG4gICAgICAgICAgbmFtZTogbWFjcm8ubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgU2NlbmVzIFtUb2tlbl0gQWN0b3JzXG4gICAgZm9yIChjb25zdCBzY2VuZSBvZiBnYW1lLnNjZW5lcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVNjZW5lRGF0YShzY2VuZSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIFNjZW5lIGRvY3VtZW50ICR7c2NlbmUubmFtZX1gKVxuICAgICAgICAgIC8vIGlmIChcbiAgICAgICAgICAvLyAgIHNjZW5lLmlkID09PSBnYW1lLnNjZW5lcy5jdXJyZW50LmlkICYmXG4gICAgICAgICAgLy8gICB0eXBlb2YgdGhpcy50ZW1wb3JhcnlTY2VuZSA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAvLyAgIHR5cGVvZiB0aGlzLm9yaWdpbmFsU2NlbmUgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgLy8gKSB7XG4gICAgICAgICAgLy8gICB0aGlzLnRlbXBvcmFyeVNjZW5lID0gYXdhaXQgU2NlbmUuY3JlYXRlKHtcbiAgICAgICAgICAvLyAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLlVwZGF0ZUN1cnJlbnRTY2VuZScpLFxuICAgICAgICAgIC8vICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMDAwMDAwJ1xuICAgICAgICAgIC8vICAgfSlcbiAgICAgICAgICAvLyAgIHRoaXMub3JpZ2luYWxTY2VuZSA9IHNjZW5lXG4gICAgICAgICAgLy8gICBhd2FpdCBEcmF3aW5nRG9jdW1lbnQuY3JlYXRlKFxuICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgLy8gICAgICAgYXV0aG9yOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgICAgLy8gICAgICAgc2hhcGU6IHtcbiAgICAgICAgICAvLyAgICAgICAgIHR5cGU6ICdyJyxcbiAgICAgICAgICAvLyAgICAgICAgIHdpZHRoOiAxNjAwLFxuICAgICAgICAgIC8vICAgICAgICAgaGVpZ2h0OiAyMDBcbiAgICAgICAgICAvLyAgICAgICB9LFxuICAgICAgICAgIC8vICAgICAgIHg6IDIyMDAsXG4gICAgICAgICAgLy8gICAgICAgeTogMjIwMCxcbiAgICAgICAgICAvLyAgICAgICB6OiAwLFxuICAgICAgICAgIC8vICAgICAgIHN0cm9rZVdpZHRoOiAwLFxuICAgICAgICAgIC8vICAgICAgIHRleHQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5VcGRhdGVDdXJyZW50U2NlbmUnKSxcbiAgICAgICAgICAvLyAgICAgICBmb250RmFtaWx5OiAnU2lnbmlrYScsXG4gICAgICAgICAgLy8gICAgICAgZm9udFNpemU6IDEyOCxcbiAgICAgICAgICAvLyAgICAgICB0ZXh0Q29sb3I6ICcjRkZGRkZGJyxcbiAgICAgICAgICAvLyAgICAgICB0ZXh0QWxwaGE6IDEsXG4gICAgICAgICAgLy8gICAgICAgaGlkZGVuOiBmYWxzZSxcbiAgICAgICAgICAvLyAgICAgICBsb2NrZWQ6IHRydWVcbiAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAvLyAgICAge1xuICAgICAgICAgIC8vICAgICAgIHBhcmVudDogdGhpcy50ZW1wb3JhcnlTY2VuZVxuICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgLy8gICApXG4gICAgICAgICAgLy8gICBhd2FpdCB0aGlzLnRlbXBvcmFyeVNjZW5lLnZpZXcoKVxuICAgICAgICAgIC8vICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgICBhd2FpdCBzY2VuZS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2NlbmUudG9rZW5zLmZvckVhY2godCA9PiAodC5fYWN0b3IgPSBudWxsKSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JTY2VuZScsIHtcbiAgICAgICAgICBuYW1lOiBzY2VuZS5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBDb21wZW5kaXVtIFBhY2tzXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSAhPT0gJ0NvQzcnICYmXG4gICAgICAgIFsnQWN0b3InLCAnSXRlbScsICdNYWNybycsICdSb2xsVGFibGUnLCAnU2NlbmUnXS5pbmNsdWRlcyhcbiAgICAgICAgICBwYWNrLm1ldGFkYXRhLnR5cGVcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IFVwZGF0ZXIubWlncmF0ZUNvbXBlbmRpdW1EYXRhKHBhY2spXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVBY3RvckRhdGEgKGFjdG9yKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yQXJ0d29yayhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JLZWVwZXJOb3RlcyhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZShhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JTdGF0dXNFZmZlY3RBY3RpdmUoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yU2FuTG9zc1JlYXNvbnMoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yTW9uZXRhcnkoYWN0b3IsIHVwZGF0ZURhdGEpXG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yIEl0ZW1zXG4gICAgaWYgKGFjdG9yLml0ZW1zKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGFjdG9yLml0ZW1zLnJlZHVjZSgoYXJyLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1EYXRhID1cbiAgICAgICAgICBpIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGkudG9PYmplY3QoKSA6IGlcbiAgICAgICAgY29uc3QgaXRlbVVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW1EYXRhKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eShpdGVtVXBkYXRlKSkge1xuICAgICAgICAgIGl0ZW1VcGRhdGUuX2lkID0gaXRlbURhdGEuX2lkXG4gICAgICAgICAgYXJyLnB1c2goZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoaXRlbVVwZGF0ZSkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyclxuICAgICAgfSwgW10pXG4gICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICB1cGRhdGVEYXRhLml0ZW1zID0gaXRlbXNcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG1pZ3JhdGVDb21wZW5kaXVtRGF0YSAocGFjaykge1xuICAgIGNvbnN0IGRvY3VtZW50VHlwZSA9IHBhY2subWV0YWRhdGEudHlwZVxuICAgIGlmIChcbiAgICAgICFbJ0FjdG9yJywgJ0l0ZW0nLCAnTWFjcm8nLCAnUm9sbFRhYmxlJywgJ1NjZW5lJ10uaW5jbHVkZXMoZG9jdW1lbnRUeXBlKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVW5sb2NrIHRoZSBwYWNrIGZvciBlZGl0aW5nXG4gICAgY29uc3Qgd2FzTG9ja2VkID0gcGFjay5sb2NrZWRcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogZmFsc2UgfSlcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwYWNrLm1pZ3JhdGUoKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coJ3BhY2sgbWlncmF0ZSBmYWlsZWQnLCBwYWNrLCBlcnIpXG4gICAgfVxuICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnRzKClcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciBjb21wZW5kaXVtIGVudHJpZXMgLSBhcHBseWluZyBmaW5lLXR1bmVkIG1pZ3JhdGlvbiBmdW5jdGlvbnNcbiAgICBmb3IgKGNvbnN0IGRvYyBvZiBkb2N1bWVudHMpIHtcbiAgICAgIGxldCB1cGRhdGVEYXRhID0ge31cbiAgICAgIHRyeSB7XG4gICAgICAgIHN3aXRjaCAoZG9jdW1lbnRUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnQWN0b3InOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUFjdG9yRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnSXRlbSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlSXRlbURhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ01hY3JvJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVNYWNyb0RhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ1JvbGxUYWJsZSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlVGFibGVEYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdTY2VuZSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlU2NlbmVEYXRhKGRvYylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgLy8gU2F2ZSB0aGUgZW50cnksIGlmIGRhdGEgd2FzIGNoYW5nZWRcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBNaWdyYXRlZCAke2RvY3VtZW50VHlwZX0gZG9jdW1lbnQgJHtkb2MubmFtZX0gaW4gQ29tcGVuZGl1bSAke3BhY2suY29sbGVjdGlvbn1gXG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IGRvYy51cGRhdGUodXBkYXRlRGF0YSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckRvY3VtZW50UGFjaycsIHtcbiAgICAgICAgICBuYW1lOiBkb2MubmFtZSxcbiAgICAgICAgICBjb2xsZWN0aW9uOiBwYWNrLmNvbGxlY3Rpb24sXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBcHBseSB0aGUgb3JpZ2luYWwgbG9ja2VkIHN0YXR1cyBmb3IgdGhlIHBhY2tcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogd2FzTG9ja2VkIH0pXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZUl0ZW1EYXRhIChpdGVtKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgSXRlbVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtRW1iZWRkZWR2MTAoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUV4cGVyaWVuY2UoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUFydHdvcmsoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUtlZXBlck5vdGVzKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1TcGVsbEF1dG9tYXRlZChpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXNNZXJnZShpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtRXJhcyhpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtdjEwKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1Cb29rVW5pdHMoaXRlbSwgdXBkYXRlRGF0YSlcblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZU1hY3JvRGF0YSAodGFibGUpIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBBY3RvclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVNYWNyb0FydHdvcmsodGFibGUsIHVwZGF0ZURhdGEpXG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVUYWJsZURhdGEgKHRhYmxlKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlVGFibGVBcnR3b3JrKHRhYmxlLCB1cGRhdGVEYXRhKVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlU2NlbmVEYXRhIChzY2VuZSkge1xuICAgIGNvbnN0IHJldHVybnMgPSB7XG4gICAgICB0b2tlbnM6IFtdXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NlbmUudG9rZW5zICE9PSAndW5kZWZpbmVkJyAmJiBzY2VuZS50b2tlbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm5zLnRva2VucyA9IHNjZW5lLnRva2Vucy5tYXAodG9rZW4gPT4ge1xuICAgICAgICBjb25zdCB0ID0gdG9rZW4udG9PYmplY3QoKVxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICAgICAgVXBkYXRlci5fbWlncmF0ZVRva2VuQXJ0d29yayh0LCB1cGRhdGVEYXRhKVxuICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoKSB7XG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0LCB1cGRhdGVEYXRhKVxuICAgICAgICB9XG4gICAgICAgIGlmICghdC5hY3RvcklkIHx8IHQuYWN0b3JMaW5rKSB7XG4gICAgICAgICAgdC5hY3RvckRhdGEgPSB7fVxuICAgICAgICB9IGVsc2UgaWYgKCFnYW1lLmFjdG9ycy5oYXModC5hY3RvcklkKSkge1xuICAgICAgICAgIHQuYWN0b3JJZCA9IG51bGxcbiAgICAgICAgICB0LmFjdG9yRGF0YSA9IHt9XG4gICAgICAgIH0gZWxzZSBpZiAoIXQuYWN0b3JMaW5rKSB7XG4gICAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodC5hY3RvckRhdGEpXG4gICAgICAgICAgYWN0b3JEYXRhLnR5cGUgPSB0b2tlbi5hY3Rvcj8udHlwZVxuICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUFjdG9yRGF0YShhY3RvckRhdGEpXG4gICAgICAgICAgO1snaXRlbXMnLCAnZWZmZWN0cyddLmZvckVhY2goZW1iZWRkZWROYW1lID0+IHtcbiAgICAgICAgICAgIGlmICghdXBkYXRlW2VtYmVkZGVkTmFtZV0/Lmxlbmd0aCkge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXcgTWFwKHVwZGF0ZVtlbWJlZGRlZE5hbWVdLm1hcCh1ID0+IFt1Ll9pZCwgdV0pKVxuICAgICAgICAgICAgdC5hY3RvckRhdGFbZW1iZWRkZWROYW1lXS5mb3JFYWNoKG9yaWdpbmFsID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlID0gdXBkYXRlcy5nZXQob3JpZ2luYWwuX2lkKVxuICAgICAgICAgICAgICBpZiAodXBkYXRlKSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9yaWdpbmFsLCB1cGRhdGUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgZGVsZXRlIHVwZGF0ZVtlbWJlZGRlZE5hbWVdXG4gICAgICAgICAgfSlcbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHQuYWN0b3JEYXRhLCB1cGRhdGUpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiByZXR1cm5zXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXMgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBbXG4gICAgICAgICdhcmNoZXR5cGUnLFxuICAgICAgICAnY2hhc2UnLFxuICAgICAgICAnaXRlbScsXG4gICAgICAgICdvY2N1cGF0aW9uJyxcbiAgICAgICAgJ3NldHVwJyxcbiAgICAgICAgJ3NraWxsJyxcbiAgICAgICAgJ3NwZWxsJyxcbiAgICAgICAgJ3N0YXR1cycsXG4gICAgICAgICd0YWxlbnQnLFxuICAgICAgICAnd2VhcG9uJ1xuICAgICAgXS5pbmNsdWRlcyhpdGVtLnR5cGUpXG4gICAgKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24sXG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uJ10gPSB7XG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUV4cGVyaWVuY2UgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSddID0gMFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUFydHdvcmsgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoaXRlbS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NldHVwJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5za2lsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5ncm91cHMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGcuc2tpbGxzKSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBpdGVtLnN5c3RlbS5ncm91cHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLmltZyA9XG4gICAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc3BlbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlbGxzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9IGl0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWxscyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9IGl0ZW0uc3lzdGVtLnNraWxsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbVNwZWxsQXV0b21hdGVkIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyAmJiB0eXBlb2YgaXRlbS5zeXN0ZW0uY29zdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jYXN0aW5nVGltZSddID0gaXRlbS5zeXN0ZW0uY2FzdGluZ1RpbWUgfHwgJydcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5oaXRQb2ludHMnXSA9IGl0ZW0uc3lzdGVtLmNvc3QuaHAgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLm1hZ2ljUG9pbnRzJ10gPSBpdGVtLnN5c3RlbS5jb3N0Lm1wIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5zYW5pdHknXSA9IGl0ZW0uc3lzdGVtLmNvc3Quc2FuIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5wb3dlciddID0gaXRlbS5zeXN0ZW0uY29zdC5wb3cgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLm90aGVycyddID0gJydcblxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09Y29zdCddID0gbnVsbFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLi09dW5pZGVudGlmaWVkJ10gPSBudWxsXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCb29rIGF1dG9tYXRpb24gd2FzIGluY3JlYXNlZCBpbiAwLjYuNVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbSBEb2N1bWVudCBkYXRhIGV4cHJlc3NlZCBhcyBhIHBsYWluIG9iamVjdFxuICAgKiBAcGFyYW0ge2pzb259IHVwZGF0ZURhdGEgRGlmZmVyZW50aWFsIHVwZGF0ZSBkYXRhIHdoaWNoIG1vZGlmaWVzIHRoZSBleGlzdGluZyB2YWx1ZXMgb2YgdGhpcyBkb2N1bWVudCBkYXRhXG4gICAqIEByZXR1cm5zIHtqc29ufSBEaWZmZXJlbnRpYWwgdXBkYXRlIGRhdGEgd2hpY2ggbW9kaWZpZXMgdGhlIGV4aXN0aW5nIHZhbHVlcyBvZiB0aGlzIGRvY3VtZW50IGRhdGFcbiAgICovXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICAvKiogSWYgYm9vayBzdGlsbCBoYXMgdGhlIHN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWQga2V5IHRoZW4gcnVuIG1pZ3JhdGUgb24gaXQgKi9cbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udW5pZGVudGlmaWVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKiogRmllbGRzIGNoYW5nZWQgZnJvbSBudWxsIGRlZmF1bHQgdG8gZW1wdHkgc3RyaW5nICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdXRob3InXSA9IGl0ZW0uc3lzdGVtLmF1dGhvciB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGF0ZSddID0gaXRlbS5zeXN0ZW0uZGF0ZSB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubGFuZ3VhZ2UnXSA9IGl0ZW0uc3lzdGVtLmxhbmd1YWdlIHx8ICcnXG4gICAgICAgIC8qKiBGaWVsZHMgY2hhbmdlZCBmcm9tIG51bGwvc3RyaW5nIGRlZmF1bHRzIHRvIGludGVnZXIgdG8gMCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2FuaXR5TG9zcyddID0gaXRlbS5zeXN0ZW0uc2FuTG9zcyB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5teXRob3NSYXRpbmcnXSA9IE51bWJlcihpdGVtLnN5c3RlbS5teXRob3NSYXRpbmcpIHx8IDBcbiAgICAgICAgLyoqIFJlbmFtZWQvbW92ZWQgZmllbGRzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb250ZW50J10gPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWRcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXNcbiAgICAgICAgLyoqIE5ldyBmaWVsZHMgc2V0IGRlZmF1bHQgdmFsdWVzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kaWZmaWN1bHR5TGV2ZWwnXSA9ICdyZWd1bGFyJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZnVsbFN0dWRpZXMnXSA9IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluaXRpYWxSZWFkaW5nJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ua2VlcGVyTm90ZXMnXSA9ICcnXG4gICAgICAgIC8qKiBNb3ZlIGFuZCByZW5hbWUgZ2FpbiBmaWVsZHMgdG8gZ2FpbnMsIGRlZmF1bHQgTmFOIHZhbHVlcyB0byAwICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4uY3RodWxodU15dGhvcy5DTUkpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuZmluYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4uY3RodWxodU15dGhvcy5DTUYpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLm9jY3VsdCddID0gTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4ub2NjdWx0KSB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5vdGhlcnMnXSA9IFtdXG4gICAgICAgIC8qKiBOZXcgc3R1ZHkgZmllbGQgZGVmYXVsdCBuZWNlc3NhcnkgdG8gaW50ZWdlciBvZiB3ZWVrc1N0dWR5VGltZSBvciAwIGlmIG5vdCBzZXQgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnN0dWR5J10gPSB7XG4gICAgICAgICAgbmVjZXNzYXJ5OiBOdW1iZXIoaXRlbS5zeXN0ZW0ud2Vla3NTdHVkeVRpbWUpIHx8IDAsXG4gICAgICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgdW5pdHM6ICdDb0M3LndlZWtzJ1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZW1vdmUgb2xkIGtleXMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09c2FuTG9zcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT13ZWVrc1N0dWR5VGltZSddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1nYWluJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi4tPXVuaWRlbnRpZmllZCddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ2FpbnMuLT1vdGhlciddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1wcm9wZXJ0aWVzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWZsYWdzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQm9va1VuaXRzIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS51bml0cyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3R1ZHkudW5pdHMnXSA9ICdDb0M3LndlZWtzJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyB8fCBpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5ub3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciArIGl0ZW0uc3lzdGVtLm5vdGVzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ubm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1ub3RlcyddID0gbnVsbFxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5rZWVwZXJOb3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmtlZXBlck5vdGVzICsgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ua2VlcGVyTm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1rZWVwZXJOb3RlcyddID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1FbWJlZGRlZHYxMCAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdvY2N1cGF0aW9uJykge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbbywgZ10gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZ3JvdXBzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5ncm91cHNbb10uc2tpbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxuICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ3NldHVwJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uaXRlbXNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPSBpdGVtLnN5c3RlbS5pdGVtc1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoWydhcmNoZXR5cGUnLCAnb2NjdXBhdGlvbiddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbHNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ2Jvb2snXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5zcGVsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9IGl0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW12MTAgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBpdGVtLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICh0eXBlb2YgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID09PSAndW5kZWZpbmVkJyB8fCBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPT09ICcnKVxuICAgICkge1xuICAgICAgdXBkYXRlRGF0YS5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAvLyBVcGRhdGUgUG9saXNoIGRvZGdlIHRyYW5zbGF0aW9uIGZyb20gVW5pa2kgdG8gVW5payB0byBtYXRjaCB1cGRhdGUgdG8gbGFuZy9wbC5qc29uXG4gICAgICBpZiAodXBkYXRlRGF0YS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgIHVwZGF0ZURhdGEubmFtZSA9ICdVbmlrJ1xuICAgICAgfVxuICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICB1cGRhdGVEYXRhLm5hbWUsXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgPyBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgIDogaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgIClcbiAgICAgIHVwZGF0ZURhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSA9PT0gJ1VuaWtpJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW28sIGddIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLmdyb3VwcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZy5za2lsbHMpKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICB2LnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lLFxuICAgICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICA/IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5za2lsbE5hbWUgPVxuICAgICAgICAgICAgICAgIHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9XG4gICAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtRXJhcyAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZXJhcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIDE5MjAgPT4gc3RhbmRhcmRcbiAgICAgIC8vIG1kcm4gPT4gbW9kZXJuIC8gbW9kZXJuUHVscFxuICAgICAgLy8gcHVscCA9PiBwdWxwXG4gICAgICAvLyBkZHRzID0+IGRvd25EYXJrZXJUcmFpbHMgLyBkb3duRGFya2VyVHJhaWxzUHVscFxuICAgICAgLy8gZHJrYSA9PiBkYXJrQWdlcyAvIGRhcmtBZ2VzUHVscFxuICAgICAgLy8gZ2xpdCA9PiBnYXNMaWdodFxuICAgICAgLy8gbnZjdCA9PiBpbnZpY3R1c1xuICAgICAgbGV0IGVyYXMgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZXJhcykpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlIHx8ICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZS5zZWxlY3RlZCAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJzE5MjAnOlxuICAgICAgICAgICAgICBlcmFzLnN0YW5kYXJkID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbWRybic6XG4gICAgICAgICAgICAgIGVyYXMubW9kZXJuID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLm1vZGVyblB1bHAgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdwdWxwJzpcbiAgICAgICAgICAgICAgZXJhcy5wdWxwID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnZGR0cyc6XG4gICAgICAgICAgICAgIGVyYXMuZG93bkRhcmtlclRyYWlscyA9IHRydWVcbiAgICAgICAgICAgICAgZXJhcy5kb3duRGFya2VyVHJhaWxzUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2Rya2EnOlxuICAgICAgICAgICAgICBlcmFzLmRhcmtBZ2VzID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLmRhcmtBZ2VzUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2dsaXQnOlxuICAgICAgICAgICAgICBlcmFzLmdhc0xpZ2h0ID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbnZjdCc6XG4gICAgICAgICAgICAgIGVyYXMuaW52aWN0dXMgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICAgIC8vIElmIG1vcmUgdGhhbiBvbmUgZXJhIHRha2UgdGhlIGZpcnN0IG9uZSBvbmx5XG4gICAgICAgIGNvbnN0IGtleSA9IE9iamVjdC5rZXlzKGVyYXMpWzBdXG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBlcmFzID0geyBba2V5XTogdHJ1ZSB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgbm8gZXJhcyBkZWZhdWx0IHRvIHN0YW5kYXJkXG4gICAgICAgICAgZXJhcyA9IHsgc3RhbmRhcmQ6IHRydWUgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBDb0M3ID0ge1xuICAgICAgICBjb2NpZEZsYWc6IHtcbiAgICAgICAgICBpZDogJycsXG4gICAgICAgICAgbGFuZzogZ2FtZS5pMThuLmxhbmcsXG4gICAgICAgICAgcHJpb3JpdHk6IDAsXG4gICAgICAgICAgZXJhc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uZmxhZ3M/LkNvQzcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGl0ZW0uZmxhZ3MuQ29DNyA9IENvQzdcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNyddID0gQ29DN1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnID0gQ29DNy5jb2NpZEZsYWdcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnXSA9IENvQzcuY29jaWRGbGFnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMgPSBDb0M3LmNvY2lkRmxhZy5lcmFzXG4gICAgICAgIHVwZGF0ZURhdGFbJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnXSA9IENvQzcuY29jaWRGbGFnLmVyYXNcbiAgICAgIH1cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWVyYXMnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvckFydHdvcmsgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgbGV0IGltYWdlID0gU3RyaW5nKGFjdG9yLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZT8uc3JjICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMpLm1hdGNoKFxuICAgICAgICAvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispL1xuICAgICAgKVxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3Byb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjJ10gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhY3Rvci5lZmZlY3RzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoYWN0b3IuZWZmZWN0cykpIHtcbiAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pY29uKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhLmVmZmVjdHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhLmVmZmVjdHMgPSBhY3Rvci5lZmZlY3RzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0c1trXS5pY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvcktlZXBlck5vdGVzIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmRlc2NyaXB0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbiddID0ge1xuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yTW9uZXRhcnkgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmIHR5cGVvZiBhY3Rvci5zeXN0ZW0uY3JlZGl0Py5tdWx0aXBsaWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdD8ubW9uZXRhcnlTeW1ib2wgPyBhY3Rvci5zeXN0ZW0uY3JlZGl0Lm1vbmV0YXJ5U3ltYm9sIDogJyQnXG4gICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCddLnRvU3RyaW5nKCkudHJpbSgpID09PSAnJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3ltYm9sJ10gPSAnJCdcbiAgICAgIH1cbiAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBwYXJzZUludChhY3Rvci5zeXN0ZW0uY3JlZGl0Lm11bHRpcGxpZXIpID8gcGFyc2VJbnQoYWN0b3Iuc3lzdGVtLmNyZWRpdC5tdWx0aXBsaWVyKSA6IDFcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS5zcGVudCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5zcGVudFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmFzc2V0c0RldGFpbHMnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuYXNzZXRzRGV0YWlsc1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnNwZW5kaW5nTGV2ZWwnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuc3BlbmRpbmdMZXZlbFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmNhc2gnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuY2FzaFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmFzc2V0cyddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5hc3NldHNcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGFjdG9yLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMpXG4gICAgICBpZiAobXVsdGlwbGllciAhPT0gMSkge1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSkge1xuICAgICAgICAgIHZhbHVlLmNhc2hWYWx1ZSA9IG11bHRpcGxpZXIgKiB2YWx1ZS5jYXNoVmFsdWVcbiAgICAgICAgICB2YWx1ZS5hc3NldHNWYWx1ZSA9IG11bHRpcGxpZXIgKiB2YWx1ZS5hc3NldHNWYWx1ZVxuICAgICAgICAgIHZhbHVlLnNwZW5kaW5nVmFsdWUgPSBtdWx0aXBsaWVyICogdmFsdWUuc3BlbmRpbmdWYWx1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1jcmVkaXQnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvclNhbkxvc3NSZWFzb25zIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmXG4gICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtPy5lbmNvdW50ZXJlZENyZWF0dXJlcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHt9XG4gICAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiBhY3Rvci5zeXN0ZW0uZW5jb3VudGVyZWRDcmVhdHVyZXMpIHtcbiAgICAgICAgaWYgKHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MgPiAwKSB7XG4gICAgICAgICAgZ3JvdXBzW3Nhbml0eUxvc3NFdmVudC5uYW1lXSA9IE1hdGgubWF4KFxuICAgICAgICAgICAgZ3JvdXBzW3Nhbml0eUxvc3NFdmVudC5uYW1lXSA/PyAwLFxuICAgICAgICAgICAgc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zc1xuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gZ3JvdXBzKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaCh7XG4gICAgICAgICAgdHlwZTogbmFtZSxcbiAgICAgICAgICB0b3RhbExvc3M6IGdyb3Vwc1tuYW1lXSxcbiAgICAgICAgICBpbW11bml0eTogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJ10gPSBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1lbmNvdW50ZXJlZENyZWF0dXJlcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yU3RhdHVzRWZmZWN0QWN0aXZlIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAodHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXMgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5jb25kaXRpb25zID09PSAndW5kZWZpbmVkJylcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5jcml0aWNhbFdvdW5kcy52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudW5jb25zY2lvdXMudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmR5aW5nLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5kZWFkLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5wcm9uZS52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudGVtcG9JbnNhbmUudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmluZGVmSW5zYW5lLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmNyaXRpY2FsV291bmRzPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5jcml0aWNhbFdvdW5kcy52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5jcml0aWNhbFdvdW5kcy52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udW5jb25zY2lvdXM/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnVuY29uc2Npb3VzLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnVuY29uc2Npb3VzLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5keWluZz8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uZHlpbmcudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZHlpbmcudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmRlYWQ/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmRlYWQudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZGVhZC52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8ucHJvbmU/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnByb25lLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnByb25lLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy50ZW1wb0luc2FuZT8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udGVtcG9JbnNhbmUudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudGVtcG9JbnNhbmUudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmluZGVmSW5zYW5lPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5pbmRlZkluc2FuZS52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5pbmRlZkluc2FuZS52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYWN0b3IuZWZmZWN0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBlZmZlY3RzID0gYWN0b3IuZWZmZWN0c1xuICAgICAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBlZmZlY3RzLmxlbmd0aDsgaSA8IGltOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbaV1cbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gZWZmZWN0Lmljb24ubWF0Y2goXG4gICAgICAgICAgICAgIC9cXC8oaGFuZ2luZy1zcGlkZXJ8dGVudGFjbGVzLXNrdWxsfGFybS1zbGluZ3xoZWFydC1iZWF0c3x0b21ic3RvbmV8a25vY2tlZC1vdXQtc3RhcnN8ZmFsbGluZ3xza3VsbHx1bmNvbnNjaW91cylcXC4vXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAobWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbGV0IHN0YXR1c0lkID0gJydcbiAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hhbmdpbmctc3BpZGVyJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3RlbXBvSW5zYW5lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICd0ZW50YWNsZXMtc2t1bGwnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnaW5kZWZJbnNhbmUnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FybS1zbGluZyc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdjcml0aWNhbFdvdW5kcydcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnaGVhcnQtYmVhdHMnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnZHlpbmcnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvbWJzdG9uZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2t1bGwnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnZGVhZCdcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAna25vY2tlZC1vdXQtc3RhcnMnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3VuY29uc2Npb3VzJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3VuY29uc2Npb3VzJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWxsaW5nJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3Byb25lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc3RhdHVzSWQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1cGRhdGVEYXRhW2BzeXN0ZW0uY29uZGl0aW9ucy4ke3N0YXR1c0lkfS52YWx1ZWBdKSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY29uZGl0aW9ucy4ke3N0YXR1c0lkfS52YWx1ZWBdID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5mbGFncy5jb3JlPy5zdGF0dXNJZCAhPT0gc3RhdHVzSWQpIHtcbiAgICAgICAgICAgICAgICAgIGVmZmVjdHNbaV0gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGVmZmVjdCwge1xuICAgICAgICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0lkXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0cyA9IGVmZmVjdHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09c3RhdHVzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3Rvck5wY0NyZWF0dXJlIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ25wYyddLmluY2x1ZGVzKGFjdG9yLnR5cGUpICYmIHR5cGVvZiBhY3Rvci5zeXN0ZW0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLnN5c3RlbS5zcGVjaWFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlY2lhbCddID0ge1xuICAgICAgICAgIGNoZWNrUGFzc2VkOiBudWxsLFxuICAgICAgICAgIGNoZWNrRmFpbGxlZDogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRhY2tzUGVyUm91bmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRhY2tzUGVyUm91bmQnXSA9IDFcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yQ2hhcmFjdGVyU2FuaXR5IChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmXG4gICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtPy5hdHRyaWJzPy5zYW4gIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCBvbmVGaWZ0aFNhbml0eSA9IE1hdGguY2VpbChhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgLyA1KVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5ID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5J10gPSAnIC8gJyArIG9uZUZpZnRoU2FuaXR5XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlJ10gPSAwXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC5tYXgnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID09PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJ10gPSBvbmVGaWZ0aFNhbml0eVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLm1heCA9PT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5tcC5tYXgnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5ub3RlcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLm5vdGVzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm5vdGVzJ10gPSAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlTWFjcm9BcnR3b3JrICh0YWJsZSwgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IGltYWdlID0gU3RyaW5nKHRhYmxlLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlVGFibGVBcnR3b3JrICh0YWJsZSwgdXBkYXRlRGF0YSkge1xuICAgIGxldCBpbWFnZSA9IFN0cmluZyh0YWJsZS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModGFibGUucmVzdWx0cykpIHtcbiAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGEucmVzdWx0cyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhLnJlc3VsdHMgPSB0YWJsZS5yZXN1bHRzXG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlRGF0YS5yZXN1bHRzW2tdLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlVG9rZW5BcnR3b3JrICh0b2tlbiwgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IGltYWdlID0gU3RyaW5nKHRva2VuLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbi8qKlxuICogbmFtZUNoYXJhY3RlcnMgbGlzdCBvZiBjaGFyYWN0ZXJzIHRoYXQgY2FuIGJlIHBhcnQgb2YgYSBbXSBmb3IgY2hhcmFjdGVyLCBza2lsbCwgb3Igd2VhcG9uIG5hbWVzIHVzZWQgaW4gYnJhY2tldCBleHByZXNzaW9uLlxuICpcbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmRlc2NyaXB0aW9uXCIgbGFuZyBrZXkgdG8gc2hvdyBpbiB0aGUgbGFuZ3VhZ2Ugc2VsZWN0aW9uIGRpYWxvZyBib3guXG4gKiBcImtleXMuPGxhbmd1YWdlPi5kYk5vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gRGFtYWdlIEJvbnVzIGUuZy4gREI6IFwiZGJOb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5hcm1vck5vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gQXJtb3VyIEJvbnVzIGUuZy4gQXJtb3I6IFwiYXJtb3JOb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmROb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIGF0dGFja3MgZS5nLiBBdHRhY2tzIFBlciBSb3VuZDogXCJhdHRhY2tzUGVyUm91bmROb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zYW5Mb3NzTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBzYW5pdHkgbG9zcyBlLmcuIFNBTiBsb3NzOiBcInNhbkxvc3NOb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5mdWxsZGJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgZGFtYWdlIGJvbnVzIGluIGF0dHJpYnV0ZXMgYW5kIHdlYXBvbiBkYW1hZ2UgZS5nLiBEQjogXCJmdWxsZGJcIiAvIFdlYXBvbiA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENiArIFwiZnVsbGRiXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5oYWxmZGJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgaGFsZiBkYW1hZ2UgYm9udXMgaW4gd2VhcG9uIGRhbWFnZSBlLmcuIFdlYXBvbiA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENiArIFwiaGFsZmRiXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uQ29tYmF0c1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIGNvbWJhdCAvIHdlYXBvbiBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5uZXdDb21iYXRIZWFkZXJcIiBJZiB0aGVyZSBpcyBubyBjb21iYXQgLyB3ZWFwb24gc2VjdGlvbiwgYWRkIHRoaXMgc2VjdGlvbiB3ZXJlIGl0IHByb2JhYmx5IGlzLCB0aGlzIG5lZWRzIHRvIG1hdGNoZWQgYnkgXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvbkNvbWJhdHNcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Ta2lsbHNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBza2lsbHMgc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvbkxhbmdhdWdlc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIGxhbmd1YWdlcyBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uU3BlbGxzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgc3BlbGxzIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmhhbmRndW5cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgaGFuZGd1biB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4ucmlmbGVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgcmlmbGUgdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNtYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBzdWJtYWNoaW5lIGd1biB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4ubWFjaGluZUd1blwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBtYWNoaW5lIGd1biB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4ubGF1bmNoZWRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgbGF1bmNoZWQgdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmV4YW1wbGVcIiBTdHJpbmcgdGhhdCBzaG91bGQgc2hvdyBhcyBhIHBsYWNlaG9sZGVyIGV4YW1wbGUuXG4gKlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5hZ2VcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGFnZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxhZ2U+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5vY2N1cGF0aW9uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBvY2N1cGF0aW9uLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG9jY3VwYXRpb24+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zdHJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHN0cmVuZ3RoIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHN0cj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmNvblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29uc3RpdHV0aW9uIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGNvbj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNpelwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2l6ZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzaXo+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5pbnRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGludGVsbGlnZW5jZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxpbnQ+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5wb3dcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHBvd2VyIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHBvdz4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmRleFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZGV4dGVyaXR5IGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGRleD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFwcFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYXBwZWFyYW5jZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxhcHA+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5lZHVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGVkdWNhdGlvbiBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxlZHU+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zYW5cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNhbml0eSBwb2ludHMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNhbj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmhwXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBoaXQgcG9pbnRzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxocD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm1wXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBtYWdpYyBwb2ludHMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG1wPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZGJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRhbWFnZSBib251cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGI+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LmRiTm9uZVwiIHRoZW4gMC5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYnVpbGRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGJ1aWxkIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxidWlsZD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFybW9yXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBkYW1hZ2UgYm9udXMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGRiPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5hcm1vck5vbmVcIiB0aGVuIDAuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm1vdlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgbW92ZW1lbnQgcmF0ZSBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bW92Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubGNrXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBsdWNrIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxsY2s+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGF0dGFja3MgcGVyIHJvdW5kLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGF0dGFja3NQZXJSb3VuZD4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uYXR0YWNrc1BlclJvdW5kTm9uZVwiIHRoZW4gMC5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2FuTG9zc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2FuIGxvc3MgbWluL21heCwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzYW5Mb3NzPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5zYW5Mb3NzTm9uZVwiIHRoZW4gbm9uZS5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ud2VhcG9uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIHdlYXBvbiA8bmFtZT4sIG9wdGlvbmFsIDxwZXJjZW50YWdlPiwgYW5kIDxkYW1hZ2U+LiBEYW1hZ2UgY2FuIGNvbnRhaW4gXCJrZXlzLjxsYW5ndWFnZT4uZnVsbGRiXCIgYW5kIFwia2V5cy48bGFuZ3VhZ2U+LmhhbGZkYlwiLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi53ZWFwb25Eb2RnZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gZG9kZ2Ugc2tpbGwsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bmFtZT4gYW5kIDxwZXJjZW50YWdlPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2tpbGxcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNraWxsIHNlY3Rpb24gc2tpbGwgbmFtZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxuYW1lPiBhbmQgPHBlcmNlbnRhZ2U+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5ndWVzc1N0YXJ0Q29tYmF0XCIgUmVndWxhciBleHByZXNzaW9uIGlmIHRoZXJlIGlzIG5vIGNvbWJhdCBzZWN0aW9uIGZpbmQgdGhlc2UgYXJlIGxpa2VseSB0byBiZSB0aGUgZmlyc3Qgd2VhcG9uIG5hbWUsIFwia2V5cy48bGFuZ3VhZ2U+Lm5ld0NvbWJhdEhlYWRlclwiIGlzIHRoZW4gYWRkZWQgYmVmb3JlIGl0IHRvIGdldCB0aGUgZ3JvdXBzXG4gKlxuICogVGhlc2Ugc2hvdWxkIG5vdCBiZSBlZGl0ZWQgYXMgdGhleSBzaG91bGQgd29yayBhcyBpc1xuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5uYW1lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBuYW1lLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG5hbWU+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zZWN0aW9uc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzcGxpdCB0ZXh0IGludG8gY29tYmF0LCBza2lsbCwgbGFuZ3VhZ2UsIGFuZCBzcGVsbHMgc2VjdGlvblxuICpcbiAqIElmIHRoZXJlIGlzIG5ldyBmdW5jdGlvbmFsaXR5IGNoZWNrIGZvciB0aGlzIHN0cmluZyBpbiB0aGUgdHJhbnNsYXRpb25zIC8ga2V5cyBmb3IgeW91ciBsYW5ndWFnZSBcIk5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRFwiXG4gKi9cbmNvbnN0IG5hbWVDaGFyYWN0ZXJzID1cbiAgJ1xcXFx1MzAwMFxcXFx1MzQwMC1cXFxcdTREQkZcXFxcdTMwNDAtXFxcXHUzMEZGXFxcXHU0RTAwLVxcXFx1OUZGRlxcXFx3XFxcXChcXFxcKVxcXFwtXFxcXC8mXCJcXCfvvaXvvIjvvInvvI8nICtcbiAgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChcbiAgICAnYcyBZcyBacyBb8yBw6DDqMOsw7LDucOAw4jDjMOSw5nDocOpw63Ds8O6w73DgcOJw43Dk8Oaw53DosOqw67DtMO7w4LDisOOw5TDm8Ojw7HDtcODxIDDkcOVw6TDq8Ovw7bDvMO/w4TDi8OPw5bDnMW4w6DDqMOnw4fDn8OYw7jDhcOlw4bDpsWT4oCc4oCdwqvCu8SFxIfEmcWCxYTDs8WbxbrFvMSExIbEmMWBxYPDk8WaxbnFuydcbiAgKVxuXG5jb25zdCBrZXlzID0ge1xuICBlbjoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5FbmdsaXNoJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBmdWxsZGI6ICcoJyArICdEYW1hZ2UgQm9udXN8REInICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fGhhbGYnICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdjb21iYXR8ZmlnaHRpbmcgYXR0YWNrcycgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXQnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnc2tpbGxzJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdsYW5ndWFnZXMnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ3NwZWxscycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyBHdW58UmV2b2x2ZXJ8UGlzdG9sfEhhbmRndW58RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfChefCApXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArICdSaWZsZXxTaG90Z3VufENhcmJpbmV8R2F1Z2UgfExlZS1FbmZpZWxkfEVsZXBoYW50JyArICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2VycycgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmVuYWRlfER5bmFtaXRlJyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ0V4YW1wbGUgQ2hhcmFjdGVyLCBhZ2UgMjdcXG5TVFIgNzUgQ09OIDYwIFNJWiA4MCBERVggNzAgQVBQIDYwIElOVCA4MFxcblBPVyA1MCBFRFUgODUgU0FOIDU1IEhQIDE0IERCOiAxRDRcXG5CdWlsZDogMSBNb3ZlOiA3IE1QOiAxMCBMdWNrOiA0MCBBcm1vcjogMVxcbkF0dGFja3MgcGVyIHJvdW5kOiAzIFNBTiBsb3NzOiAxZDQvMWQ4XFxuQ29tYmF0XFxuQml0ZSA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENlxcbkJyYXdsIDMwJSAoMTUvNiksIGRhbWFnZSAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZGFtYWdlIDFEOCsxXFxuRG9kZ2UgNTAlICgyNS8xMClcXG5Ta2lsbHNcXG5BbmltYWwgSGFuZGxpbmcgNTUlLCBDaGFybSAzMCUsIEZpcnN0IEFpZCAyNSUsIERpc2d1aXNlIDIwJSxcXG5MaXN0ZW4gNTAlLCBNZWRpY2luZSA0NSUsIFBlcnN1YWRlIDI1JSwgUHN5Y2hvbG9neSA3NSUsXFxuU2NpZW5jZSAoQXN0cm9ub215KSA5MCUsIFNjaWVuY2UgKEJvdGFueSkgMzUlLCBTY2llbmNlIChab29sb2d5KSAxMCUsXFxuU3BvdCBIaWRkZW4gMzUlLCBTdGVhbHRoIDEwJVxcbkxhbmd1YWdlczogRW5nbGlzaCA4MCUsIEVrbG8gNSUuXFxuU3BlbGxzOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcbiAgfSxcbiAgZGU6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuR2VybWFuJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBkaWNlU2hvcnQ6ICd3fGQnLFxuICAgIGZ1bGxkYjogJygnICsgJ1NjaGFkZW5zYm9udXN8U2InICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBTY2hhZGVuc2JvbnVzfFNiLzInICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdLYW1wZnxBbmdyaWZmOnxBTkdSSUZGRScgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdLYW1wZicgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdGZXJ0aWdrZWl0ZW4nICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ1NwcmFjaGVuJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdaYXViZXInICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcgR3VufFJldm9sdmVyfFBpc3RvbGV8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0dld2VocnxTY2hyb3RmbGludGV8Q2FyYWJpbmVyfEthcmFiaW5lcnxHYXVnZSB8TGVlLUVuZmllbGR8RWxlZmFudGVuJyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1Ym1hY2hpbmUgR3VufFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JhbmF0ZXxEeW5hbWl0JyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ1Zvcm5hbWUgTmFjaG5hbWVcXG5BbHRlcjogMjlcXG5CZXJ1ZjogRWluIEJlcnVmXFxuU1QgNTBcXG5NQSA2MFxcbktPIDYwXFxuR0UgNjBcXG5HUiA1NVxcbkVSIDY1XFxuSU4gODBcXG5CSSA4NVxcblRyZWZmZXJwdW5rdGU6IDExXFxuR2Vpc3RpZ2UgU3RhYmlsaXTDpHQ6IDYwXFxuU2NoYWRlbnNib251czogMFxcblN0YXR1cjogMFxcbk1hZ2llcHVua3RlOiAxMlxcbkJld2VndW5nc3dlaXRlOiA4XFxuXFxuS2FtcGZcXG5BbmdyaWZmZTogMVxcbkhhbmRnZW1lbmdlIDMwJSAoMTUvNiksIFNjaGFkZW4gMUQzXFxuTWVzc2VyIDMwJSAoMTUvNiksIFNjaGFkZW4gMUQ0XFxuQXVzd2VpY2hlbiAzMCUgKDE1LzYpXFxuXFxuRmVydGlna2VpdGVuOiBBbnRocm9wb2xvZ2llIDcwJSAoMzUvMTQpLCBBcmNow6RvbG9naWUgMzAlICgxNS82KSwgQmlibGlvdGhla3NudXR6dW5nIDUwJSAoMjUvMTApLCBFcnN0ZSBIaWxmZSA1MCUgKDI1LzEwKSwgRmluYW56a3JhZnQgNDAlICgyMC84KSwgR2VzY2hpY2h0ZSA2MCUgKDMwLzEyKSwgS2xldHRlcm4gNTAlICgyNS8xMClcXG5cXG5TcHJhY2hlbjogRW5nbGlzY2ggODUlICg0Mi8xNyk7IERldXRzY2ggNDUlICgyMi85KSwgTGF0ZWluIDQ1JSAoMjIvOSknXG4gIH0sXG4gIHBsOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LlBvbGlzaCcsXG4gICAgZGJOb25lOiAnYnJhaycsXG4gICAgYXJtb3JOb25lOiAnYnJhaycsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ2JyYWsnLFxuICAgIHNhbkxvc3NOb25lOiAnYnJhaycsXG4gICAgZGljZVNob3J0OiAna3xkJyxcbiAgICBmdWxsZGI6ICcoJyArICdNb2R5ZmlrYXRvciBPYnJhxbxlxYR8TU8nICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBNT3xNTy8yJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnV2Fsa2F8QXRha2knICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnV2Fsa2EnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnVW1pZWrEmXRub8WbY2knICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0rEmXp5a2knICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1pha2zEmWNpYScgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyBQaXN0b2xldHxSZXdvbHdlcnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0thcmFiaW58U3RyemVsYmF8V2lhdHLDs3drYXxHYXJhbmR8R2F1Z2UgfExlZS1FbmZpZWxkfFN0cnplbGJhIG5hIHPFgm9uaWUnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnUGlzdG9sZXQgbWFzenlub3d5fFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vxYJvdG93YXxHcmFuYXR8TGFza2EgZHluYW1pdHV8RHluYW1pdCcgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdQcnp5a8WCYWRvd2EgcG9zdGHEhywgMjcgbGF0XFxuQmlibGlvdGVrYXJ6XFxuUyA3NSBLT04gNjAgQkMgODAgWlIgNzAgV1lHIDYwIElOVCA4MFxcbk1PQyA1MCBXWUsgODUgUCA1NSBQVyAxNCBNTzogMUQ0XFxuS3J6ZXBhOiAxIFJ1Y2g6IDcgUE06IDEwIFN6Y3rEmcWbY2llOiA0MCBQYW5jZXJ6OiAxXFxuQXRha2kgdyBydW5kemllOiAzIFV0cmF0YSBQb2N6eXRhbG5vxZtjaTogMUs0LzFLOFxcbldhbGthXFxuVWdyeXppZW5pZSA1MCUgKDI1LzEwKSwgb2JyYcW8ZW5pYSAxSzZcXG5XYWxrYSAzMCUgKDE1LzYpLCBvYnJhxbxlbmlhIDFLM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBvYnJhxbxlbmlhIDFLOCsxXFxuVW5payA1MCUgKDI1LzEwKVxcblVtaWVqxJl0bm/Fm2NpXFxuVHJlc3VyYSBad2llcnrEhXQgNTUlLCBVcm9rIE9zb2Jpc3R5IDMwJSwgUGllcndzemEgUG9tb2MgMjUlLCBVa3J5d2FuaWUgMjAlLFxcbk5hc8WCdWNoaXdhbmllIDUwJSwgTWVkeWN5bmEgNDUlLCBQcnpla29ueXdhbmllIDI1JSwgUHN5Y2hvbG9naWEgNzUlLFxcbk5hdWthIChBc3Ryb25vbWlhKSA5MCUsIE5hdWthIChCb3RhbmlrYSkgMzUlLCBOYXVrYSAoWm9vbG9naWEpIDEwJSxcXG5TcG9zdHJ6ZWdhd2N6b8WbxIcgMzUlLCBVa3J5d2FuaWUgMTAlXFxuSsSZenlraTogQW5naWVsc2tpIDgwJSwgRWtsbyA1JS5cXG5aYWtsxJljaWE6IFByenl6d2FuaWUgTlBDLCBPZGVzxYJhbmllIE5QQy4nXG4gIH0sXG4gIGZyOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LkZyZW5jaCcsXG4gICAgZGJOb25lOiAnQWN1bmUnLFxuICAgIGFybW9yTm9uZTogJyg/OkFjdW5lfGF1Y3VuZSknLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdBY3VuZScsXG4gICAgc2FuTG9zc05vbmU6ICdBY3VuZScsXG4gICAgZnVsbGRiOiAnKCcgKyAnQkR8Qm9udXMgYXV4IGRvbW1hZ2VzfEltcGFjdHxJbXAnICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBJbXB8SW1wLzInICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdDb21iYXR8QXJtZXN8QXR0YXF1ZXMnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0JyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ0NvbXDDqXRlbmNlcycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnTGFuZ3Vlcz8nICsgJylcXFxccypbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1NvcnRpbMOoZ2VzXFxcXHMqfFNvcnRzJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnUmV2b2x2ZXJ8UGlzdG9sZXR8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6ICcoPzx0eXBlPicgKyAnQ2FyYWJpbmV8TGVlLUVuZmllbGR8RnVzaWwnICsgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTTUd8VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2Vyc3xNaXRyYWlsbGV1c2UnICsgJyknLFxuICAgIGxhdW5jaGVkOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnQm9vbWVyYW5nIGRlIGd1ZXJyZXxKYXZlbGluZXxQaWVycmV8U2h1cmlrZW58QsOidG9uIGRlIGR5bmFtaXRlfENvY2t0YWlsIE1vbG90b3Z8R3JlbmFkZSDDoCBtYWlufE1vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZScgK1xuICAgICAgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIDI3IGFuc1xcbkZPUiA3NSBDT04gNjAgVEFJIDgwIERFWCA3MCBBUFAgNjAgSU5UIDgwXFxuUE9VIDUwIMOJRFUgODUgU0FOIDU1IFBWIDE0IEJEOiAxRDRcXG5DYXJydXJlOiAxIE12dDogNyBQTTogMTAgQ2hhbmNlOiA0MCBBcm11cmU6IDFcXG5BdHRhcXVlcyBwYXIgcm91bmQgMyBQZXJ0ZSBkZSBTQU46IDFkNC8xZDhcXG5BdHRhcXVlc1xcbkJpdGUgNTAlICgyNS8xMCksIGRvbW1hZ2UgMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZG9tbWFnZSAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZG9tbWFnZSAxRDgrMVxcbkVzcXVpdmVyIDUwJSAoMjUvMTApXFxuQ29tcMOpdGVuY2VzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5MYW5ndWU6IEVuZ2xpc2ggODAlLCBFa2xvIDUlLlxcblNvcnRpbMOoZ2VzOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcbiAgfSxcbiAgZXM6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuU3BhbmlzaCcsXG4gICAgZGJOb25lOiAnbmluZ3VuYScsXG4gICAgYXJtb3JOb25lOiAnbmluZ3VuYScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25pbmd1bm8nLFxuICAgIHNhbkxvc3NOb25lOiAnbm8nLFxuICAgIGZ1bGxkYjogJygnICsgJ0JEfGJkfGJvbmlmaWNhY2nDs24gZGUgZGHDsW8nICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fG1lZGlvIGRhw7FvfG1pdGFkfGRhw7FvIGEgbGEgbWl0YWQnICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdDb21iYXRlfEFybWFzJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdGUnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnSGFiaWxpZGFkZXMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0lkaW9tYXN8TGVuZ3VhamVzfExlbmd1YXMnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ0Nvbmp1cm9zfEhlY2hpem9zJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnUmV2b2x2ZXJ8UGlzdG9sYXxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ1JpZmxlfENhcmFiaW5hfExlZS1FbmZpZWxkfENhemEgRWxlZmFudGVzfEZ1c2lsfEVzY29wZXRhfEdhbGdhfFJlY29ydGFkYScgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJmdXNpbHxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzfEFtZXRyYWxsYWRvcmEnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JhbmFkYXxEaW5hbWl0YScgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdFeGFtcGxlIENoYXJhY3RlciwgMjcgYcOxb3NcXG5GVUUgNzUgQ09OIDYwIFRBTSA4MCBERVMgNzAgQVBBIDYwIElOVCA4MFxcblBPRCA1MCBFRFUgODUgQ09SIDU1IFBWIDE0IEJEOiAxRDRcXG5Db3JwdWxlbmNpYTogMSBNb3ZpbWllbnRvOiA3IFBNOiAxMCBTdWVydGU6IDQwIEFybWFkdXJhOiAxXFxuTsO6bWVybyBkZSBBdGFxdWVzIDMgUMOpcmRpZGEgZGUgY29yZHVyYTogMWQ0LzFkOFxcbkNvbWJhdGVcXG5CaXRlIDUwJSAoMjUvMTApLCBkYcOxbyAxRDZcXG5CcmF3bCAzMCUgKDE1LzYpLCBkYcOxbyAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZGHDsW8gMUQ4KzFcXG5Fc3F1aXZhciA1MCUgKDI1LzEwKVxcbkhhYmlsaWRhZGVzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5JZGlvbWFzOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5Db25qdXJvczogU3VtbW9uIE5QQywgRGlzcGVsIE5QQy4nXG4gIH0sXG4gICd6aC1UVyc6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuVHJhZGl0aW9uYWxDaGluZXNlJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBmdWxsZGI6ICcoJyArICdEYW1hZ2UgQm9udXN8REJ85YK35a6z5Yqg5YC8JyArICcpJyxcbiAgICAvKiBORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRUQgKi9cbiAgICBoYWxmZGI6ICcoJyArICfCvXxoYWxmJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czpcbiAgICAgICdcXG4oPzonICsgJ2NvbWJhdHxmaWdodGluZyBhdHRhY2tzfOaIsOmspeaKgOiDvXzmiLDprKXliJfooah85q2m5ZmoJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOlxuICAgICAgJ1xcbig/OicgKyAnKD86U2tpbGxzfOaKgOiDveWIl+ihqCknICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0xhbmd1YWdlc3zoqp7oqIAnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ3NwZWxsc3zlkpLmlofliJfooah85ZKS5paHJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIOmBgueZvOanjXxcXFxcLjIy55+t5Y+j6Ieq5YuV5omL5qeNfFxcXFwuMjXnn63lj6PmiYvmp40o5Zau566hKXxcXFxcLjMy5oiWN1xcXFwuNjVtbeW3pui8quaJi+anjXxcXFxcLjMy5oiWN1xcXFwuNjVtbeiHquWLleaJi+anjXxcXFxcLjM1NyBNYWdudW3lt6bovKrmiYvmp418XFxcXC4zOOaIljltbeW3pui8quaJi+anjXxcXFxcLjM46Ieq5YuV5omL5qeNfOiynembt+WhlE05fOagvOa0m+WFizE3fDltbeiHquWLleaJi+anjXzpra/moLxQMDh8XFxcXC40MeW3pui8quaJi+anjXxcXFxcLjQ06aas5qC85Y2X5bem6Lyq5omL5qeNfFxcXFwuNDXlt6bovKrmiYvmp418XFxcXC40NeiHquWLleaJi+anjXzmspnmvKDkuYvpt7l8R3VufFJldm9sdmVyfFBpc3RvbHxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAn5q2l5qeNfOWNoeizk+anjXzljYroh6rli5XmraXmp41854216LGh5qeNfFJpZmxlfFNob3RndW58Q2FyYmluZXxHYXVnZSB8TGVlLUVuZmllbGR8RWxlcGhhbnQnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb2586KGd6YuS5qeNJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnN85qmf5qeNJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyZW5hZGV8RHluYW1pdGXniIbngrjnial85omL5qa05b2IfOmHjeatpuWZqCcgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICfnpLrnr4Top5LoibIsIOW5tOm9oSAyN1xcbuWKm+mHjyA3NSDpq5Tos6ogNjAg6auU5Z6LIDgwIOaVj+aNtyA3MCDlpJboso4gNjAg5pm65YqbIDgwXFxu5oSP5b+XIDUwIOaVmeiCsiA4NSBTQU4gNTUgSFAgMTQgREI6IDFENFxcbumrlOagvDogMSBNb3ZlOiA3IE1QOiAxMCDlubjpgYs6IDQwIOitt+eUsjogMVxcbuaUu+aTiuasoeaVuDogMyDnkIbmmbrllqrlpLE6IDFkNC8xZDhcXG7miLDprKXliJfooahcXG7lkqwgNTAlICgyNS8xMCksIOWCt+WusyAxRDZcXG7nqbrmiYsgMzAlICgxNS82KSwg5YK35a6zIDFEM1xcbuaJi+anjSA0MCUgKDIwLzgpLCDlgrflrrMgMUQ4KzFcXG7ploPpgb8gNTAlICgyNS8xMClcXG7mioDog73liJfooahcXG7li5XnianpprTppIogNTUlLCDlj5bmgoUgMzAlLCDmgKXmlZEgMjUlLCDmvZvooYwgMjAlLFxcbuiBhuiBvSA1MCUsIOiXpeWtuCA0NSUsIOeyvuelnuWIhuaekCAyNSUsIOW/g+eQhuWtuCA3NSUsXFxu56eR5a24ICjlj7jms5Xnp5HlrbgpIDkwJSwg56eR5a24ICjlr4bnorzlrbgpIDM1JSwgXFxu5YG15p+lIDM1JSwg5Zas6KOdIDEwJVxcbuiqnuiogDog57K16KqeIDgwJSwg6K6A5ZSHIDUlLlxcbuWSkuaWhzog5Y+s5ZaaIE5QQywg5oyH5o+uIE5QQy4nXG4gIH0sXG4gIGphOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LkphcGFuZXNlJyxcbiAgICBkYk5vbmU6ICfjgarjgZcnLFxuICAgIGFybW9yTm9uZTogJ+OBquOBlycsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ+OBquOBlycsXG4gICAgc2FuTG9zc05vbmU6ICfjgarjgZcnLFxuICAgIGZ1bGxkYjogJygnICsgJ0RhbWFnZSBCb251c3xEQnxkYnzjg4Djg6Hjg7zjgrgo44O7fO+9pSk/44Oc44O844OK44K5JyArICcpJyxcbiAgICAvKiBORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRUQgKi9cbiAgICBoYWxmZGI6ICcoJyArICfCvXxoYWxmJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czpcbiAgICAgICdcXG4oPzonICsgJ2NvbWJhdHxmaWdodGluZyBhdHRhY2tzfOaIpumXmHzmrablmagnICsgJylbOu+8mlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAn5oim6ZeYJyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6XG4gICAgICAnXFxuKD86JyArICcoPzpTa2lsbHN85oqA6IO9KScgKyAnXFxcXHMqKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs677yaXFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnTGFuZ3VhZ2VzfOiogOiqnicgKyAnKVxcXFxzKls677yaXFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnc3BlbGxzfOWRquaWhycgKyAnKVxcXFxzKls677yaXFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ+aLs+mKg3zjgqrjg7zjg4jjg57jg4Hjg4Pjgq9844Oq44Oc44Or44OQ44O8fOODh+ODquODs+OCuOODo+ODvHzjg5njg6zjg4Pjgr9844Or44Ks44O8fOODh+OCtuODvOODiCjjg7t8772lKT/jgqTjg7zjgrDjg6t8R3VufFJldm9sdmVyfFBpc3RvbHxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAn44Op44Kk44OV44OrfOOCt+ODp+ODg+ODiOOCrOODs3zjgqvjg7zjg5Pjg7N844Ky44O844K4fOODquODvO+8neOCqOODs+ODleOCo+ODvOODq+ODiXzjgqjjg6zjg5XjgqHjg7Pjg4go44O7fO+9pSk/44Ks44OzfFJpZmxlfFNob3RndW58Q2FyYmluZXxHYXVnZSB8TGVlLUVuZmllbGR8RWxlcGhhbnQnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAn44K144OW44Oe44K344Oz44Ks44OzfOODiOODs+ODl+OCveODs3xTdWJtYWNoaW5lIEd1bnxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICfjg5bjg63jg7zjg4vjg7PjgrB844O044OD44Kr44O844K5fOODnuOCt+ODs+OCrOODs3xCcm93bmluZ3xWaWNrZXJzJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICfjg6Ljg63jg4jjg5V844Kw44Os44ON44O844OJfOODgOOCpOODiuODnuOCpOODiHxNb2xvdG92fEdyZW5hZGV8RHluYW1pdGUnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAn44K144Oz44OX44OrIOWkqumDjuOAgTI35q2z44CB6KiY6ICFXFxuU1RSIDc1IENPTiA2MCBTSVogODAgREVYIDcwIEFQUCA2MCBJTlQgODBcXG5QT1cgNTAgRURVIDg1IOato+awl+W6piA1NSDogJDkuYXlipsgMTQg44OA44Oh44O844K444O744Oc44O844OK44K577yaMUQ0XFxu44OT44Or44OJ77yaMSDnp7vli5XvvJo3IOODnuOCuOODg+OCr+ODu+ODneOCpOODs+ODiO+8mjEwIOW5uOmBi++8mjQwIOijheeUsu+8mjFcXG4x44Op44Km44Oz44OJ44Gu5pS75pKD5Zue5pWw77yaMyDmraPmsJfluqbllqrlpLHvvJoxRDQvMUQ4XFxu5oim6ZeYXFxu5Zmb44G/44Gk44GNIDUwJSAoMjUvMTAp44CB44OA44Oh44O844K4IDFENlxcbuagvOmXmCAzMCUgKDE1LzYp44CB44OA44Oh44O844K4IDFEMytEQlxcbuODh+ODquODs+OCuOODo+ODvCA0MCUgKDIwLzgp44CB44OA44Oh44O844K4IDFEOCsxXFxu5Zue6YG/IDUwJSAoMjUvMTApXFxu5oqA6IO9XFxu6KiA44GE44GP44KL44KBIDI1JeOAgeWMu+WtpiA0NSXjgIHpmqDlr4YgMTAl44CBXFxu6IGe44GN6ICzIDUwJeOAgeiqrOW+lyAyNSXjgIHlv4PnkIblraYgNzUl44CBXFxu56eR5a2mICjlpKnmloflraYpIDkwJeOAgeenkeWtpiAo5qSN54mp5a2mKSAzNSXjgIHnp5HlraYgKOWLleeJqeWtpikgMTAl44CBXFxu5YuV54mp5L2/44GEIDU1JeOAgeWkieijhSAyMCXjgIHnm67mmJ8gMzUl44CB6a2F5oORIDMwJeOAglxcbuiogOiqnu+8muiLseiqniA4MCXjgIHjgqLjgq/jg63oqp4gNSXjgIJcXG7lkarmlofvvJpOUEPjga7lj6zllprjgIFOUEPjga7pgIDmlaPjgIInXG4gIH1cbn1cblxuY29uc3QgdHJhbnNsYXRpb25zID0ge1xuICBlbjoge1xuICAgIGFnZTogJyg/PCFbYS16XSknICsgJ2FnZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2NjdXBhdGlvbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVFInICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdTSVonICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1cnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVgnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFAnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnU0FOfFNhbml0eScgKyAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArICdIUHxIaXQgcG9pbnRzJyArICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ01QfE1hZ2ljIHBvaW50cycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmVuLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5cy5lbi5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOiAnKD88IVthLXpdKScgKyAnQnVpbGQnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm1vcicgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZW4uYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnTW92ZScgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdMdWNrJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdHRhY2tzIHBlciByb3VuZHwjIEF0dGFja3MnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZW4uYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU2FuaXR5IGxvc3N8U0FOIGxvc3MnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmVuLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdkYW1hZ2UnICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmVuLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0RvZGdlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIC8vIFNraWxsIHNob3VsZCBub3QgYmUgbmFtZWQgXCJUaGUgcGxheWVyIGhhc1wiIC8gXCJidXQgdGhleSByZWdlbmVyYXRlXCIgcmVxdWlyZWQgZm9yIFwiQSBDb2xkIEZpcmUgV2l0aGluXCJcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6ICcoXnwoPzwhLClcXG4pKCcgKyAnRmlnaHRpbmd8RmlyZWFybXN8QnJhd2x8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZGU6IHtcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdBbHRlcicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOiAnWyxcXFxcc10qJyArICdCZXJ1ZicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0tPJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnR1InICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ01BJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnR0UnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdFUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0JJJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdnU3xTVEF8R2Vpc3RpZ2UgU3RhYmlsaXTDpHQnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdUUHxUcmVmZmVycHVua3RlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNUHxNYWdpZXB1bmt0ZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmRlLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RHxXXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmRlLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1N0YXR1cnxTdGF0LicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnUGFuemVydW5nJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5kZS5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0JXfEJld2VndW5nc3dlaXRlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnR2zDvGNrJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBbmdyaWZmZSBwcm8gUnVuZGV8QW5ncmlmZmV8UHJvIFJ1bmRlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmRlLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1N0YWJpbGl0w6R0c3Zlcmx1c3QnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmRlLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGRbRFddP1srXFxcXGRdKlxcXFwvXFxcXGRbRFddP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdTY2hhZGVuJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrd3xkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmRlLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2R8dyk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnQXVzd2VpY2hlbicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICAvLyBTa2lsbCBzaG91bGQgbm90IGJlIG5hbWVkIFwiVGhlIHBsYXllciBoYXNcIiAvIFwiYnV0IHRoZXkgcmVnZW5lcmF0ZVwiIHJlcXVpcmVkIGZvciBcIkEgQ29sZCBGaXJlIFdpdGhpblwiXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLDtdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgK1xuICAgICAgJ0FuZ3JpZmZlfEhhbmRnZW1lbmdlfE5haGthbXBmfEZhdXN0ZmV1ZXJ3YWZmZXxCZWnDn2VuJyArXG4gICAgICAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmRlLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZGUuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgcGw6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKScgKyAnXFxcXHMrKD86JyArICdsYXRhfGxhdHxyb2snICsgJylbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246ICdbLFxcXFxzXSonICsgJ1phd8OzZCcgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnS09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnQkMnICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdNT0MnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdaUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ1dZRycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ1dZSycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUHxQb2N6eXRhbG5vxZvEhycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BXfFB1bmt0eSBXeXRyenltYcWCb8WbY2knICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BNfFB1bmt0eSBNYWdpaScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLnBsLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RHxLXFxcXGQrKT98JyArXG4gICAgICBrZXlzLnBsLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6ICcoPzwhW2Etel0pJyArICdLcnplcGEnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdQYW5jZXJ6JyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5wbC5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdSdWNoJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ1N6Y3rEmcWbY2llJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdGFraSB3IHJ1bmR6aWV8IyBBdGFraScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5wbC5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdVdHJhdGEgUG9jenl0YWxub8WbY2l8dXRyYXRhIFAnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLnBsLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGRbREtdP1srXFxcXGRdKlxcXFwvXFxcXGRbREtdP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdvYnJhxbxlbmlhJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQra3xkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLnBsLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ1VuaWsnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgLy8gU2tpbGwgc2hvdWxkIG5vdCBiZSBuYW1lZCBcIlRoZSBwbGF5ZXIgaGFzXCIgLyBcImJ1dCB0aGV5IHJlZ2VuZXJhdGVcIiByZXF1aXJlZCBmb3IgXCJBIENvbGQgRmlyZSBXaXRoaW5cIlxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnV2Fsa2F8QnJvxYQgUGFsbmF8QmlqYXR5a2F8VWdyeXppZW5pZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLnBsLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMucGwuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZnI6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKVxcXFxzKicgKyAnYW5zJyArICcoPyFbYS16XSlbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ0ZPUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1RBSScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQUCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ8OJRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IShbYS16XXxkZVxcXFxzKSkoPzonICtcbiAgICAgICdTQU58U2FudMOpIE1lbnRhbGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQVnxQb2ludHMgZGUgdmllJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQTXxQb2ludHMgZGUgbWFnaWUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5mci5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZnIuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICdDYXJydXJlJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXJtdXJlfFByb3RlY3Rpb24nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5mci5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ012dHxNb3V2ZW1lbnR8RMOpcGxhY2VtZW50JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnQ2hhbmNlJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdHRhcXVlcyBwYXIgcm91bmQnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZnIuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUGVydGUgZGUgU2FudMOpIG1lbnRhbGV8UGVydGUgZGUgU0FOJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5mci5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqKD86JyArXG4gICAgICAnZG9tbWFnZXxkw6lnw6J0cycgK1xuICAgICAgJykpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmZyLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0VzcXVpdmVyPycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XG4gICAgICAnKF58KD88ISwpXFxuKSgnICsgJ0F1IGNvbnRhY3R8w4AgZGlzdGFuY2V8Q29tYmF0IHJhcHByb2Now6l8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZXM6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKVxcXFxzKicgKyAnYVvDscORXW9zJyArICcoPyFbYS16XSlbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY3VwYWNpw7NuJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ0ZVRScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1RBTScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPRCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFUycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQQScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArICdDT1J8Q29yZHVyYScgKyAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUFZ8UHVudG9zIGRlIHZpZGF8UFxcXFwuID9WXFxcXC4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BNfFB1bnRvcyBNw6FnaWNvc3xQdW50b3MgZGUgTWFnaWEnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5lcy5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZXMuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICdDb3JwdWxlbmNpYScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ0FybWFkdXJhJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5lcy5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdNb3ZpbWllbnRvJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ1N1ZXJ0ZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTsO6bWVybyBkZSBBdGFxdWVzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmVzLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1DDqXJkaWRhIGRlIGNvcmR1cmF8UMOpcmRpZGEgZGUgQ09SJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5lcy5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXG4gICAgICAnZGHDsW8nICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmVzLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0VzcXVpdmFyJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnQ29tYmF0aXJ8QXJtYXMgZGUgZnVlZ298UGVsZWF8TW9yZGlzY28nICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gICd6aC1UVyc6IHtcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdhZ2V85bm06b2hJyArICcoXFxcXHMqOik/XFxcXHMqKD88YWdlPlxcXFxkKylbLFxcXFxzXSonLFxuICAgIC8qIE5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRCAqL1xuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ1NUUnzlipvph48nICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT0586auU6LOqJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnU0lafOmrlOWeiycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVHzmmbrlipsnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1d85oSP5b+XJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYfOaVj+aNtycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQUHzlpJboso4nICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFV85pWZ6IKyJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTQU58U2FuaXR5fOeQhuaZuicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0hQfEhpdCBwb2ludHN855Sf5ZG9JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNUHxNYWdpYyBwb2ludHMnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5c1snemgtVFcnXS5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICdCdWlsZHzpq5TmoLwnICsgJyhcXFxccyo6KT9cXFxccyooPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm1vcnzorbfnlLInICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMqKD88YXJtb3I+JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmUnICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnTHVja3zlubjpgYsnICsgJyhcXFxccyo6KT9cXFxccyooPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0F0dGFja3MgcGVyIHJvdW5kfCMgQXR0YWNrc3zmlLvmk4rmrKHmlbh8IyDmlLvmk4onICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXNbJ3poLVRXJ10uYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU2FuaXR5IGxvc3N8U0FOIGxvc3N855CG5pm65Zaq5aSxfFNBTuWAvOaQjeWksXxTQU7lgLzllqrlpLF85omjU0FOJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW5Mb3NzPicgK1xuICAgICAga2V5c1snemgtVFcnXS5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqKD86JyArXG4gICAgICAnZGFtYWdlfOWCt+WusycgK1xuICAgICAgJykpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0RvZGdlfOmWg+mBv3zploPourInICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiU/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDogJyhefCg/PCEsKVxcbikoJyArICfov5HmiLDmioDog7185bCE5pOK5oqA6IO9fEJyYXdsfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIGphOiB7XG4gICAgYWdlOiAnWyjvvIhdPyg/PGFnZT5cXFxcZCspJyArICcoXFxcXHMrKSooPzonICsgJ+ats3zmiY0nICsgJylbKe+8iV0/WyzjgIFcXFxcc10qJyxcbiAgICAvKiBORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRUQgKi9cbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ss44CBXFxcXHNdKicgKyAnKOiBt+alrSk/JyArICcoXFxcXHMqWzrvvJpdKT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVss44CBXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1RSJyArICcoXFxcXHMqWzrvvJpdKT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccypbOu+8ml0pP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLOOAgVxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1NJWicgKyAnKFxcXFxzKls677yaXSk/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVss44CBXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqWzrvvJpdKT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1cnICsgJyhcXFxccypbOu+8ml0pP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLOOAgVxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWCcgKyAnKFxcXFxzKls677yaXSk/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVss44CBXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQJyArICcoXFxcXHMqWzrvvJpdKT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFUnICsgJyhcXFxccypbOu+8ml0pP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLOOAgVxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnKFNBTnxTYW5pdHl85q2j5rCX5bqmKScgK1xuICAgICAgJykoXFxcXHMqWzrvvJpdKT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnKEhQfEhpdCBwb2ludHN86ICQ5LmF5YqbfOODkuODg+ODiCjjg7t8772lKT/jg53jgqTjg7Pjg4gpJyArXG4gICAgICAnKShcXFxccypbOu+8ml0pP1xcXFxzKig/PGhwPlxcXFxkK3wtKVss44CBXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJyhNUHxNYWdpYyBwb2ludHN844Oe44K444OD44KvKOODu3zvvaUpP+ODneOCpOODs+ODiCknICtcbiAgICAgICcpKFxcXFxzKls677yaXSk/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmphLmZ1bGxkYiArXG4gICAgICAnKShcXFxccypbOu+8ml0pP1xcXFxzKig/PGRiPlsrLV0/XFxcXHMqXFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmphLmRiTm9uZSArXG4gICAgICAnKVss44CBXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKScgKyAnKEJ1aWxkfOODk+ODq+ODiSknICsgJyhcXFxccypbOu+8ml0pP1xcXFxzKig/PGJ1aWxkPlsrLV0/XFxcXGQrKVss44CBXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJyhBcm1vcnzoo4XnlLIpJyArXG4gICAgICAnKFxcXFxzKls677yaXSk/XFxcXHMqKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmphLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLOOAgVxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJyhNb3ZlfE1PVnznp7vli5Xnjoc/KScgKyAnKFxcXFxzKls677yaXSk/XFxcXHMqKD88bW92PlxcXFxkKylbLOOAgVxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJyhMdWNrfOW5uOmBiyknICsgJyhcXFxccypbOu+8ml0pP1xcXFxzKig/PGxjaz5cXFxcZCt8LSlbLOOAgVxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnKEF0dGFja3MgcGVyIHJvdW5kfCMgQXR0YWNrc3woKDF8MSB877yRKeODqeOCpuODs+ODieOBrik/5pS75pKD5Zue5pWwKScgK1xuICAgICAgJykoXFxcXHMqWzrvvJpdKT9cXFxccyooPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmphLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLOOAgVxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJyhTYW5pdHkgbG9zc3xTQU4gbG9zc3zmraPmsJfluqbllqrlpLEpJyArXG4gICAgICAnKShcXFxccypbOu+8ml1cXFxcRCopP1xcXFxzKig/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmphLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKltcXFxcL++8j11cXFxcZEQ/WytcXFxcZF0qKVss44CBXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdFxcXFx3ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKipbLOOAgV0/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKVsl77yFXVss44CBXT8oPzpcXFxccypbXFxcXCjvvIhdXFxcXGQrW1xcXFwv77yPXVxcXFxkK1tcXFxcKe+8iV1cXFxccypbLOOAgV0/KT8pPyhcXFxccyooPzonICtcbiAgICAgICdkYW1hZ2V844OA44Oh44O844K4JyArXG4gICAgICAnKSk/XFxcXHMqKD88ZGFtYWdlPig6P1xcXFxkK1tkRF0pP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuamEuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmphLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrW2REXSk/XFxcXGQrKSopXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJyhEb2RnZXzlm57pgb8pJyArXG4gICAgICAnKShcXFxccypbOu+8ml0pP1xcXFxzKlxcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKlsl77yFXT8oPzpcXFxccypbXFxcXCjvvIhdXFxcXGQrW1xcXFwv77yPXVxcXFxkK1tcXFxcKe+8iV0pPycsXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGV8XFxcXGQnICtcbiAgICAgICcpKVtcXFxcczrvvJpdKlxcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF1bJe+8hV0/XFxcXCk/KFxcXFxzKltcXFxcKO+8iF1cXFxcZCtbXFxcXC/vvI9dXFxcXGQrW1xcXFwp77yJXSk/XFxcXHM/W1xcXFwuLOOAgV0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OiAnKF58KD88ISwpXFxuKSgnICsgJ+i/keaOpSjmiKbpl5h85qC86ZeYKXzmoLzpl5h85pS75pKDfOe0oOaJi3zlmZvjgb/jgaTjgY185bCE5pKDfEJyYXdsfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLOOAgVxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuamEuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuamEuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5qYS5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmphLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyUmVnRXhwIHtcbiAgc3RhdGljIGNoZWNrTGFuZ3VhZ2UgKGxhbmcgPSBudWxsKSB7XG4gICAgaWYgKCFsYW5nKSB7XG4gICAgICBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0cmFuc2xhdGlvbnNbbGFuZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsYW5nID0gJ2VuJ1xuICAgIH1cbiAgICByZXR1cm4gbGFuZ1xuICB9XG5cbiAgc3RhdGljIGdldEV4YW1wbGVUZXh0IChsYW5nKSB7XG4gICAgbGV0IGV4YW1wbGUgPSBrZXlzLmVuLmV4YW1wbGVcbiAgICBpZiAodHlwZW9mIGtleXNbbGFuZ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBleGFtcGxlID0ga2V5c1tsYW5nXS5leGFtcGxlXG4gICAgfVxuICAgIHJldHVybiBleGFtcGxlXG4gIH1cblxuICBzdGF0aWMgZ2V0VHJhbnNsYXRpb25zICgpIHtcbiAgICBjb25zdCBvdXRwdXQgPSB7fVxuICAgIGZvciAoY29uc3Qga2V5IGluIGtleXMpIHtcbiAgICAgIG91dHB1dFtrZXldID0ga2V5c1trZXldLmRlc2NyaXB0aW9uXG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxuXG4gIHN0YXRpYyBnZXRLZXlzIChsYW5nKSB7XG4gICAgcmV0dXJuIGtleXNbbGFuZ10gfHwga2V5cy5lblxuICB9XG5cbiAgc3RhdGljIGdldFJlZ3VsYXJFeHByZXNzaW9ucyAobGFuZykge1xuICAgIHJldHVybiB0cmFuc2xhdGlvbnNbbGFuZ10gfHwgdHJhbnNsYXRpb25zLmVuXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBY3RvciwgQ09ORklHLCBmb3VuZHJ5LCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLXJlZ2V4cC5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuLyoqXG4gKiBDb0M3QWN0b3JJbXBvcnRlciBoZWxwZXIgY2xhc3MgdG8gaW1wb3J0IGFuIEFjdG9yIGZyb20gdGhlIHJhdyB0ZXh0IGRlc2NyaXB0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9ySW1wb3J0ZXIge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5wYXJzZWQgPSB7fVxuICAgIHRoaXMuaXRlbUxvY2F0aW9ucyA9ICcnXG4gIH1cblxuICBzdGF0aWMgZ2V0IGFzTnVtYmVyICgpIHtcbiAgICByZXR1cm4gJ24nXG4gIH1cblxuICBzdGF0aWMgZ2V0IGFzU3RyaW5nICgpIHtcbiAgICByZXR1cm4gJ3MnXG4gIH1cblxuICAvKipcbiAgICogZ2V0UmVnRXgsIGdldCBSZWdFeHAgb2JqZWN0IGlmIG5vdCBjdXJyZW50bHkgYSBSZWdFeHAgb2JqZWN0XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHJlZ2V4IFJlZ0V4cCBvciBzdHJpbmdcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1vZGlmaWVycyBpZiBzdHJpbmcgd2FzIHN1cHBsaWVkIGluIHJlZ2V4IGxpc3Qgb2YgbW9kaWZpZXJzIHRvIGFkZCB0byB0aGUgUmVnRXhwXG4gICAqIEByZXR1cm5zIHtSZWdFeHB9XG4gICAqL1xuICBnZXRSZWdFeCAocmVnZXgsIG1vZGlmaWVycyA9ICdpdScpIHtcbiAgICBpZiAocmVnZXguY29uc3RydWN0b3I/Lm5hbWUgPT09ICdSZWdFeHAnKSB7XG4gICAgICByZXR1cm4gcmVnZXhcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAocmVnZXgsIG1vZGlmaWVycylcbiAgfVxuXG4gIC8qKlxuICAgKiBjbGVhblN0cmluZywgcmVtb3ZlcyBuZXcgbGluZSBhbmQgY2FycmllciByZXR1cm4gY2hhcmFjdGVyIGFuZCBsYXRlcmFsIHNwYWNlcyBmcm9tIGEgc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSBzdHJpbmcgdG8gY2xlYW5cbiAgICogQHJldHVybnMge1N0cmluZ30gdGhlIGNsZWFuZWQgc3RyaW5nXG4gICAqL1xuICBjbGVhblN0cmluZyAocykge1xuICAgIGlmICh0aGlzLmtleXMuZGVzY3JpcHRpb24gPT09ICdDb0M3LkphcGFuZXNlJykge1xuICAgICAgcmV0dXJuIHNcbiAgICAgICAgLnJlcGxhY2UoLyhcXG58XFxyKS9nLCAnICcpXG4gICAgICAgIC5yZXBsYWNlKC9eXFxzKi8sICcnKVxuICAgICAgICAucmVwbGFjZSgvXFxzKlso77yIXVxccyovZywgJyAoJylcbiAgICAgICAgLnJlcGxhY2UoL1xccypbKe+8iV1cXHMqL2csICcpJylcbiAgICAgICAgLnJlcGxhY2UoL1xccypbLuOAgl0/XFxzKlsu44CCXT8kLywgJycpXG4gICAgICAgIC5yZXBsYWNlKC9eW+OAiOOAil0vLCAnJylcbiAgICAgICAgLnJlcGxhY2UoL1vjgInjgItdJC8sICcnKVxuICAgIH1cbiAgICByZXR1cm4gc1xuICAgICAgLnJlcGxhY2UoLyhcXG58XFxyKS9nLCAnICcpXG4gICAgICAucmVwbGFjZSgvXlxccyovLCAnJylcbiAgICAgIC5yZXBsYWNlKC9cXHMqXFwuP1xccypcXC4/JC8sICcnKVxuICB9XG5cbiAgLyoqXG4gICAqIHRyYW5zbGF0ZVJvbGwsIHRyYW5zbGF0ZXMgbGFuZ3VhZ2Ugc3BlY2lmaWMgc2hvcnRmb3JtIG9mIGRpY2UgKEQpIGluIHJvbGxzXG4gICAqIEV4YW1wbGUgZm9yIEdlcm1hbiByb2xsczogMVc0ID0+IDFENC5cbiAgICogRGljZSBzaG9ydGZvcm0gaXMgY29uZmlndXJlZCB1c2luZyBrZXlzLmRpY2VTaG9ydFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgcm9sbCB0byBiZSB0cmFuc2xhdGVkXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSB0cmFuc2xhdGVkIHJvbGxcbiAgICovXG4gIHRyYW5zbGF0ZVJvbGwgKHMpIHtcbiAgICBpZiAodHlwZW9mIHMgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gc1xuICAgIGlmICh0eXBlb2YgdGhpcy5rZXlzLmRpY2VTaG9ydCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgJyg/PG4xPlxcXFxkKyknICsgdGhpcy5rZXlzLmRpY2VTaG9ydCArICcoPzxuMj5cXFxcZCspJyxcbiAgICAgICAgJ2l1ZydcbiAgICAgIClcbiAgICAgIHJldHVybiBzLnJlcGxhY2UocmVnRXgsICckPG4xPkQkPG4yPicpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHRvSFRNTCwgY29udmVydHMgYSBzdHJpbmcgdG8gSFRNTCBzdHJpcGluZyBvdXQgZW1wdHkgbGluZXMgb3IgbGluZXMgdGhhdCBjb250YWluIGp1c3QgLCBvciAuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSBzdHJpbmcgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgSFRNTCBvciBhbiBlbXB0eSBzdHJpbmdcbiAgICovXG4gIHRvSFRNTCAocykge1xuICAgIGlmIChzLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBzID0gc1xuICAgICAgLnRyaW0oKVxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLm1hcCh0ZXh0ID0+IHRleHQudHJpbSgpLnJlcGxhY2UoL15bLC5cXHPjgIHjgIJdKyQvLCAnJykpXG4gICAgICAuZmlsdGVyKHRleHQgPT4gdGV4dClcbiAgICAgIC5qb2luKCc8L3A+PHA+JylcbiAgICBpZiAocy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gJzxwPicgKyBzICsgJzwvcD4nXG4gIH1cblxuICAvKipcbiAgICogY2hlY2sgZXhwZWN0cyBhIGtleSBmcm9tIHRoaXMucmVnRXggd2lsbCBhdHRlbXB0IHRvIG1hdGNoIHRoZSB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWdFeEtleSBrZXkgaW4gdGhpcy5yZWdFeFxuICAgKiBAcGFyYW0ge0pTT059XG4gICAqIC0gcmVtb3ZlRnJvbVRleHQgcmVtb3ZlIGZyb20gdGhpcy50ZXh0XG4gICAqIC0gc2F2ZUtleXMgYWRkIGdyb3VwIGtleXMgdG8gdGhpcy5wYXJzZWRcbiAgICogLSB0eXBlIElmIGFkZGluZyB3aXRoIHNhdmVLZXlzIHNldCB0eXBlIChDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZyAvIENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyKVxuICAgKiAtIHRleHQgSWYgc2V0IHVzZSB0aGlzIGluc3RlYWQgb2YgdGhpcy50ZXh0XG4gICAqIC0gcmVxdWlyZWRHcm91cCBJZiBub3QgZmFsc2UgcmVxdWlyZSBzcGVjaWZpZWQga2V5IGluIFJlZ0V4cCBncm91cHNcbiAgICogQHJldHVybnMge0ZhbHNlfS97SlNPTiBncm91cHMgJycgaXMgbWF0Y2hlZCBzdHJpbmd9XG4gICAqL1xuICBjaGVjayAoXG4gICAgcmVnRXhLZXksXG4gICAge1xuICAgICAgcmVtb3ZlRnJvbVRleHQgPSB0cnVlLFxuICAgICAgc2F2ZUtleXMgPSB0cnVlLFxuICAgICAgdHlwZSA9IENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nLFxuICAgICAgdGV4dCA9IGZhbHNlLFxuICAgICAgcmVxdWlyZWRHcm91cCA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGxldCBvdXRwdXQgPSBmYWxzZVxuICAgIGxldCByZWdFeHAgPSBmYWxzZVxuICAgIGlmICh0eXBlb2YgdGhpcy5yZWdFeFtyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMucmVnRXhbcmVnRXhLZXldKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMua2V5c1tyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMua2V5c1tyZWdFeEtleV0pXG4gICAgfVxuICAgIGlmIChyZWdFeHAgIT09IGZhbHNlKSB7XG4gICAgICBpZiAodGV4dCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGV4dCA9IHRoaXMudGV4dFxuICAgICAgfVxuICAgICAgY29uc3QgY2hlY2sgPSByZWdFeHAuZXhlYyh0ZXh0KVxuICAgICAgbGV0IHZhbHVlID0gbnVsbFxuICAgICAgaWYgKFxuICAgICAgICBjaGVjayAhPT0gbnVsbCAmJlxuICAgICAgICAocmVxdWlyZWRHcm91cCA9PT0gZmFsc2UgfHxcbiAgICAgICAgICB0eXBlb2YgKGNoZWNrLmdyb3VwcyB8fCB7fSlbcmVxdWlyZWRHcm91cF0gIT09ICd1bmRlZmluZWQnKVxuICAgICAgKSB7XG4gICAgICAgIG91dHB1dCA9IGNoZWNrLmdyb3VwcyB8fCB7fVxuICAgICAgICBpZiAocmVtb3ZlRnJvbVRleHQpIHtcbiAgICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShjaGVja1swXS50cmltKCksICdcXG4nKS50cmltKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2F2ZUtleXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjaGVjay5ncm91cHMpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZzpcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gU3RyaW5nKGNoZWNrLmdyb3Vwc1trZXldKS5yZXBsYWNlKCdcXG4nLCAnICcpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlcjpcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRba2V5XSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0Wyctc291cmNlJ10gPSBjaGVja1swXVxuICAgICAgICBvdXRwdXRbJy1pbmRleCddID0gY2hlY2suaW5kZXhcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLyoqXG4gICAqIHByb2Nlc3NDb21iYXQgZXh0cmFjdHMgY29tYmF0IC8gZG9kZ2UgaW5mb3JtYXRpb24gZnJvbSBhIHN1YnNlY3Rpb24gb2YgdGV4dFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIGNvbWJhdCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NDb21iYXQgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjb21iYXQgdGV4dCcsIHRleHQpXG4gICAgfVxuICAgIGxldCB3ZWFwb25cbiAgICBsZXQgZG9kZ2VcbiAgICBsZXQgbmV3bGluZVxuICAgIGxldCBsYXN0UGVyY2VudCA9IGZhbHNlXG4gICAgbGV0IG1heExvb3BzID0gNDBcbiAgICBkbyB7XG4gICAgICBtYXhMb29wcy0tXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKClcbiAgICAgIGlmIChcbiAgICAgICAgKGRvZGdlID0gdGhpcy5jaGVjaygnd2VhcG9uRG9kZ2UnLCB7IHNhdmVLZXlzOiBmYWxzZSwgdGV4dCB9KSlcbiAgICAgICkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKGRvZGdlWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLnNraWxscyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlZC5za2lsbHMgPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkLnNraWxscy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmNsZWFuU3RyaW5nKGRvZGdlLm5hbWUpLFxuICAgICAgICAgIHZhbHVlOiBOdW1iZXIoZG9kZ2UucGVyY2VudGFnZSksXG4gICAgICAgICAgcHVzaDogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICh3ZWFwb24gPSB0aGlzLmNoZWNrKCd3ZWFwb24nLCB7XG4gICAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICAgIHRleHQsXG4gICAgICAgICAgcmVxdWlyZWRHcm91cDogbGFzdFBlcmNlbnQgPT09IGZhbHNlID8gJ3BlcmNlbnRhZ2UnIDogZmFsc2VcbiAgICAgICAgfSkpXG4gICAgICApIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSh3ZWFwb25bJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmNsZWFuU3RyaW5nKHdlYXBvbi5uYW1lIHx8ICcnKVxuICAgICAgICBsZXQgZGFtYWdlID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMuY2xlYW5TdHJpbmcod2VhcG9uLmRhbWFnZSB8fCAnJykpXG4gICAgICAgIGNvbnN0IGlzUmFuZ2VkID0gISEoXG4gICAgICAgICAgdGhpcy5jaGVjaygnaGFuZGd1bicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ3JpZmxlJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnc21iJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnbWFjaGluZUd1bicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ2xhdW5jaGVkJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHdlYXBvbi5wZXJjZW50YWdlICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHdlYXBvbi5wZXJjZW50YWdlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IE51bWJlcih3ZWFwb24ucGVyY2VudGFnZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBsZXQgZm91bmRcbiAgICAgICAgbGV0IGFoZGIgPSBmYWxzZVxuICAgICAgICBsZXQgYWRkYiA9IGZhbHNlXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBmb3VuZCA9IHRoaXMuZ2V0UmVnRXgoXG4gICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXG4gICAgICAgICAgICAgIHRoaXMua2V5cy5oYWxmZGIgK1xuICAgICAgICAgICAgICAnKVxcXFxzKignICtcbiAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXG4gICAgICAgICAgICAgICcpP1stK10/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICB0aGlzLnBhcnNlZC5kYi5yZXBsYWNlKC9eWy0rXS8sICcnKSArXG4gICAgICAgICAgICAgICcpPydcbiAgICAgICAgICApLmV4ZWMoZGFtYWdlKVxuICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgYWhkYiA9IHRydWVcbiAgICAgICAgICAgIGRhbWFnZSA9IGRhbWFnZS5yZXBsYWNlKGZvdW5kWzBdLCAnJylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlZ0V4KFxuICAgICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXG4gICAgICAgICAgICAgICAgJylcXFxccypbLStdP1xcXFxzKignICtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZC5kYi5yZXBsYWNlKC9eWy0rXS8sICcnKSArXG4gICAgICAgICAgICAgICAgJyk/J1xuICAgICAgICAgICAgKS5leGVjKGRhbWFnZSlcbiAgICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgICBhZGRiID0gdHJ1ZVxuICAgICAgICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UucmVwbGFjZShmb3VuZFswXSwgJycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChmb3VuZClcbiAgICAgICAgY29uc3QgZGFtYWdlcyA9IGRhbWFnZS5zcGxpdCgnLycpXG4gICAgICAgIGNvbnN0IGlzU2hvdGd1biA9IGRhbWFnZXMubGVuZ3RoID09PSAzXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgIHNraWxsOiB7XG4gICAgICAgICAgICAgIGlkOiBsYXN0UGVyY2VudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlzU2hvdGd1biA/IDEwIDogMCxcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGRhbWFnZXNbMF1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbG9uZzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyAyMCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzFdIDogJydcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXh0cmVtZToge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyA1MCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzJdIDogJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4gPSBpc1Nob3RndW5cbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkID0gaXNSYW5nZWQgfHwgaXNTaG90Z3VuXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMubWVsZWUgPSAhZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuYWhkYiA9IGFoZGJcbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5hZGRiID0gYWRkYlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLmF0dGFja3MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcyA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcy5wdXNoKGRhdGEpXG4gICAgICB9IGVsc2UgaWYgKChuZXdsaW5lID0gdGV4dC5tYXRjaCgvXiguKylcXG4vKSkpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShuZXdsaW5lWzBdLCAnXFxuJylcbiAgICAgIH0gZWxzZSBpZiAoKG5ld2xpbmUgPSB0ZXh0Lm1hdGNoKC9eW15cXG5dKyQvKSkpIHtcbiAgICAgICAgdGV4dCA9ICcnXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmICghIXdlYXBvbiB8fCAhIWRvZGdlIHx8ICEhdGV4dCkpXG4gICAgaWYgKG1heExvb3BzID09PSAwKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclVuZXhwZWN0ZWRXZWFwb25UZXh0JylcbiAgICAgIClcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1VuZXhwZWN0ZWQgd2VhcG9uczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU2tpbGxzIGV4dHJhY3RzIHNraWxscyAvIGxhbmd1YWdlIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBza2lsbHMgLyBsYW5ndWFnZSBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTa2lsbHMgKHRleHQsIGtleSA9ICdza2lsbHMnKSB7XG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGJyZWFrcyA9IHRleHQuc3BsaXQoL1xcLlxccj9cXG4vKVxuICAgIGlmIChicmVha3MubGVuZ3RoID4gMSkge1xuICAgICAgdGV4dCA9IGJyZWFrc1swXVxuICAgIH1cbiAgICBsZXQgc2tpbGxcbiAgICBsZXQgbWF4TG9vcHMgPSA0MFxuICAgIGRvIHtcbiAgICAgIG1heExvb3BzLS1cbiAgICAgIHRleHQgPSB0ZXh0LnRyaW0oKVxuICAgICAgc2tpbGwgPSB0aGlzLmNoZWNrKCdza2lsbCcsIHsgc2F2ZUtleXM6IGZhbHNlLCB0ZXh0IH0pXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShza2lsbFsnLXNvdXJjZSddLCAnXFxuJylcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZFtrZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMucGFyc2VkW2tleV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkW2tleV0ucHVzaCh7XG4gICAgICAgICAgbmFtZTogdGhpcy5jbGVhblN0cmluZyhza2lsbC5uYW1lKSxcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNraWxsLnBlcmNlbnRhZ2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmIHNraWxsKVxuICAgIGlmIChtYXhMb29wcyA9PT0gMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JVbmV4cGVjdGVkU2tpbGxzVGV4dCcpXG4gICAgICApXG4gICAgICBjb25zb2xlLmRlYnVnKCdVbmV4cGVjdGVkIHNraWxsczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU3BlbGxzIGV4dHJhY3RzIHNwZWxsIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBzcGVsbCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTcGVsbHMgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgYnJlYWtzID0gdGV4dC5zcGxpdCgvXFwuXFxyP1xcbi8pXG4gICAgaWYgKGJyZWFrcy5sZW5ndGggPiAxKSB7XG4gICAgICB0ZXh0ID0gYnJlYWtzWzBdXG4gICAgfVxuICAgIGNvbnN0IHNwZWxsc0FyciA9IHRleHQucmVwbGFjZSgvKFtcXG5cXHJdKykvZywgJyAnKS5zcGxpdCgvKD88IVxcKFteKV0rKVss44CBXS8pXG4gICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnJlcGxhY2UodGV4dC50cmltKCksICdcXG4nKVxuICAgIGZvciAoY29uc3Qgc3BlbGwgb2Ygc3BlbGxzQXJyKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLnNwZWxscyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5wYXJzZWQuc3BlbGxzID0gW11cbiAgICAgIH1cbiAgICAgIHRoaXMucGFyc2VkLnNwZWxscy5wdXNoKHRoaXMuY2xlYW5TdHJpbmcoc3BlbGwpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwYXJzZUNoYXJhY3RlciBleHRyYWN0cyBpbmZvcm1hdGlvbiBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbiBvZiBhbiBlbnRpdHkgKE5QQyBvciBDcmVhdHVyZSlcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBlbnRpdHlcbiAgICogQHJldHVybnMgZXh0cmFjdGVkRGF0YSBvYmplY3Qgd2l0aCB0aGUgZW50aXR5IGRhdGFcbiAgICovXG4gIGFzeW5jIHBhcnNlQ2hhcmFjdGVyICh0ZXh0KSB7XG4gICAgLy8gUmVwbGFjZSBcIkVuIERhc2hcIiBhbmQgXCJFbSBEYXNoXCIgZGFzaGVzIHdpdGggLSBhbmQgXCJSaWdodCBTaW5nbGUgUXVvdGF0aW9uIE1hcmtcIiB3aXRoICdcbiAgICB0aGlzLnRleHQgPSBTdHJpbmcodGV4dClcbiAgICAgIC50cmltKClcbiAgICAgIC5yZXBsYWNlKC9cXHUyMDEzfFxcdTIwMTR8XFx1MjIxMi9nLCAnLScpXG4gICAgICAucmVwbGFjZSgvXFx1MjAxOS9nLCBcIidcIilcbiAgICAgIC5yZXBsYWNlKC9bXFx1ZGJjMC1cXHVkYmZlXVtcXHVkYzAwLVxcdWRmZmZdL2csICcnKVxuICAgIC8vIEVhcmxpZXN0IGNoYXJhY3RlciB0aGF0IGhhcyBiZWVuIHVzZWQsIHRvIHdvcmsgb3V0IHRoZSBoZWFkZXJcbiAgICBsZXQgbWluID0gdGhpcy50ZXh0Lmxlbmd0aFxuICAgIC8vIFNUUiwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBsZXQgY2hlY2sgPSB0aGlzLmNoZWNrKCdzdHInLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pW1xuICAgICAgJy1pbmRleCdcbiAgICBdXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIENPTiwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2NvbicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIFNJWiwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ3NpeicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIElOVCwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2ludCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIFBPVywgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ3BvdycsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIERFWCwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2RleCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIEFQUCwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2FwcCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIEVEVSwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2VkdScsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIFNBTiwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ3NhbicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIEhQLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnaHAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBNUCwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ21wJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gV29yayBvdXQgdGhlIGhlYWRlciBiYXNlZCBvbiBwcmV2aW91cyBtaW5pbXVtIG1hdGNoZWQgY2hhcmFjdGVyXG4gICAgbGV0IGhlYWRlclxuICAgIGlmIChtaW4gPiAwKSB7XG4gICAgICBoZWFkZXIgPSB0aGlzLnRleHQuc3Vic3RyKDAsIG1pbilcbiAgICAgIC8vIEdldCBuYW1lIGZyb20gaGVhZGVyXG4gICAgICBjaGVjayA9IHRoaXMuY2hlY2soJ25hbWUnLCB7IHRleHQ6IGhlYWRlciB9KVxuICAgICAgaWYgKGNoZWNrID09PSBmYWxzZSkge1xuICAgICAgICAvLyBJZiBub3QgZm91bmQgdXNlIGRlZmF1bHQgTlBDIG5hbWVcbiAgICAgICAgdGhpcy5wYXJzZWQubmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbXBvcnRlZFVubmFtZWRDaGFyYWN0ZXInKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmVtb3ZlIG5hbWUgZnJvbSBoZWFkZXJcbiAgICAgICAgaGVhZGVyID0gaGVhZGVyLnJlcGxhY2UoY2hlY2tbJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICB9XG4gICAgICAvLyBHZXQgYWdlIGZyb20gaGVhZGVyXG4gICAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2FnZScsIHsgdGV4dDogaGVhZGVyIH0pXG4gICAgICBpZiAoY2hlY2sgIT09IGZhbHNlKSB7XG4gICAgICAgIC8vIElmIGZvdW5kIHJlbW92ZSBhZ2UgZnJvbSBoZWFkZXJcbiAgICAgICAgaGVhZGVyID0gaGVhZGVyLnJlcGxhY2UoY2hlY2tbJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICB9XG4gICAgICAvLyBHZXQgb2NjdXBhdGlvbiBmcm9tIGhlYWRlclxuICAgICAgaWYgKCF0aGlzLmNoZWNrKCdvY2N1cGF0aW9uJywgeyB0ZXh0OiBoZWFkZXIgfSkgJiYgaGVhZGVyLnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgLy8gSWYgb2NjdXBhdGlvbiBpcyBub3QgZm91bmQgYnV0IHRoZXJlIGlzIGEgaGVhZGVyIHNldCB0aGUgb2NjdXBhdGlvbiB0byB0aGUgcmVtYWluaW5nIGhlYWRlclxuICAgICAgICBsZXQgb2NjdXBhdGlvbiA9IGhlYWRlclxuICAgICAgICBpZiAoaGVhZGVyLmluZGV4T2YoJy4nKSA+IC0xKSB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBmdWxsIHN0b3AganVzdCB1c2UgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIGhlYWRlciBhcyB0aGUgb2NjdXBhdGlvblxuICAgICAgICAgIG9jY3VwYXRpb24gPSBoZWFkZXIuc3Vic3RyKDAsIGhlYWRlci5pbmRleE9mKCcuJykgKyAxKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkLm9jY3VwYXRpb24gPSBvY2N1cGF0aW9uXG4gICAgICAgICAgLnJlcGxhY2UoLyhbXFxuXFxyXSspL2csICcgJylcbiAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgLnJlcGxhY2UoLywkLywgJycpXG4gICAgICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5yZXBsYWNlKG9jY3VwYXRpb24udHJpbSgpLCAnXFxuJylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlcmUgaXMgbm8gaGVhZGVyIHNldCBkZWZhdWx0IE5QQyBuYW1lXG4gICAgICB0aGlzLnBhcnNlZC5uYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkltcG9ydGVkVW5uYW1lZENoYXJhY3RlcicpXG4gICAgfVxuICAgIC8vIElmIHRoZXJlIGlzIGFuIG9jY3VwYXRpb24gYnV0IG5vIGFnZSBjaGVjayBpZiB0aGUgb2NjdXBhdGlvbiBzdGFydHMgbnVtYmVyIHNwbGl0IGFnZSBhbmQgb2NjdXBhdGlvblxuICAgIGlmIChcbiAgICAgIHR5cGVvZiB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIHRoaXMucGFyc2VkLmFnZSA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IG9jY3VwYXRpb25BZ2UgPSB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uLm1hdGNoKFxuICAgICAgICAvXig/PGFnZT5cXGQrKSwoPzxvY2N1cGF0aW9uPi4rKSQvXG4gICAgICApXG4gICAgICBpZiAob2NjdXBhdGlvbkFnZSkge1xuICAgICAgICB0aGlzLnBhcnNlZC5hZ2UgPSBvY2N1cGF0aW9uQWdlLmdyb3Vwcy5hZ2VcbiAgICAgICAgdGhpcy5wYXJzZWQub2NjdXBhdGlvbiA9IG9jY3VwYXRpb25BZ2UuZ3JvdXBzLm9jY3VwYXRpb24udHJpbSgpXG4gICAgICB9XG4gICAgfVxuICAgIC8vIEdldCBkYW1hZ2UgYm9udXMsIGlmIG5vdCBmb3VuZCBvciBub25lIHNldCB0byAwXG4gICAgaWYgKFxuICAgICAgIXRoaXMuY2hlY2soJ2RiJykgfHxcbiAgICAgIHRoaXMuY2hlY2soJ2RiTm9uZScsIHtcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHRleHQ6IHRoaXMucGFyc2VkLmRiXG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5wYXJzZWQuZGIgPSAnMCdcbiAgICB9XG4gICAgdGhpcy5wYXJzZWQuZGIgPSB0aGlzLnRyYW5zbGF0ZVJvbGwodGhpcy5wYXJzZWQuZGIpXG4gICAgLy8gR2V0IGJ1aWxkXG4gICAgdGhpcy5jaGVjaygnYnVpbGQnKVxuICAgIC8vIEdldCBhcm1vciwgaWYgbm90IGZvdW5kIG9yIG5vbmUgc2V0IHRvIDBcbiAgICBpZiAoXG4gICAgICAhdGhpcy5jaGVjaygnYXJtb3InKSB8fFxuICAgICAgdGhpcy5jaGVjaygnYXJtb3JOb25lJywge1xuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgdGV4dDogdGhpcy5wYXJzZWQuYXJtb3JcbiAgICAgIH0pXG4gICAgKSB7XG4gICAgICB0aGlzLnBhcnNlZC5hcm1vciA9ICcwJ1xuICAgIH1cbiAgICAvLyBHZXQgbW92ZW1lbnRcbiAgICB0aGlzLmNoZWNrKCdtb3YnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pXG4gICAgLy8gR2V0IGx1Y2tcbiAgICB0aGlzLmNoZWNrKCdsY2snLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pXG4gICAgLy8gR2V0IHNhbml0eSBsb3NzXG4gICAgdGhpcy5jaGVjaygnc2FuTG9zcycpXG4gICAgdGhpcy5wYXJzZWQuc2FuTG9zcyA9IHRoaXMudHJhbnNsYXRlUm9sbCh0aGlzLnBhcnNlZC5zYW5Mb3NzKVxuICAgIC8vIEdldCBhdHRhY2tzIHBlciByb3VuZCwgaWYgbm90IGZvdW5kIG9yIG5vbmUgc2V0IHRvIDBcbiAgICBpZiAoXG4gICAgICB0aGlzLmNoZWNrKCdhdHRhY2tzUGVyUm91bmQnKSAmJlxuICAgICAgdGhpcy5jaGVjaygnYXR0YWNrc1BlclJvdW5kTm9uZScsIHtcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHRleHQ6IHRoaXMucGFyc2VkLmF0dGFja3NQZXJSb3VuZFxuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHRoaXMucGFyc2VkLmF0dGFja3NQZXJSb3VuZCA9ICcwJ1xuICAgIH1cbiAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIGNvbWJhdCBzZWN0aW9uXG4gICAgdGhpcy50ZXh0ID0gJ1xcbicgKyB0aGlzLnRleHRcbiAgICBsZXQgc2VjdGlvbnMgPSB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uQ29tYmF0cyArICcpJywgJ2knKVxuICAgIGlmICh0aGlzLnRleHQubWF0Y2goc2VjdGlvbnMpID09PSBudWxsKSB7XG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBjb21iYXQgc2VjdGlvbiBndWVzcyB3aGVyZSBpdCBzdGFydHNcbiAgICAgIHNlY3Rpb25zID0gdGhpcy5jaGVjaygnZ3Vlc3NTdGFydENvbWJhdCcsIHtcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2VcbiAgICAgIH0pXG4gICAgICBpZiAoc2VjdGlvbnMpIHtcbiAgICAgICAgLy8gQWRkIGEgaGVhZGVyIHRvIHRoZSBzdGFydCBvZiB0aGUgY29tYmF0IHNlY3Rpb25cbiAgICAgICAgdGhpcy50ZXh0ID0gW1xuICAgICAgICAgIHRoaXMudGV4dC5zbGljZSgwLCBzZWN0aW9uc1snLWluZGV4J10pLFxuICAgICAgICAgIHRoaXMua2V5cy5uZXdDb21iYXRIZWFkZXIsXG4gICAgICAgICAgdGhpcy50ZXh0LnNsaWNlKHNlY3Rpb25zWyctaW5kZXgnXSlcbiAgICAgICAgXS5qb2luKCcnKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBTcGxpdCB0aGUgc2VjdGlvbnMgQ29tYmF0LCBTa2lsbHMsIExhbmd1YWdlcywgYW5kIFNwZWxsc1xuICAgIGNvbnN0IHJlZ0V4cFNlY3Rpb25zID0gdGhpcy5nZXRSZWdFeCh0aGlzLnJlZ0V4LnNlY3Rpb25zLCAnaScpXG4gICAgc2VjdGlvbnMgPSB0aGlzLnRleHQuc3BsaXQocmVnRXhwU2VjdGlvbnMpXG4gICAgaWYgKHNlY3Rpb25zICE9PSBudWxsKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBzZWN0aW9ucy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25Db21iYXRzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgY29tYmF0XG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzQ29tYmF0KHNlY3Rpb25zW2kgKyAxXSlcbiAgICAgICAgICBpKytcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25Ta2lsbHMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBza2lsbHNcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTa2lsbHMoc2VjdGlvbnNbaSArIDFdKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHNlY3Rpb25zW2ldLm1hdGNoKFxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvbkxhbmdhdWdlcyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIGxhbmd1YWdlc1xuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc1NraWxscyhzZWN0aW9uc1tpICsgMV0sICdsYW5ndWFnZXMnKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHNlY3Rpb25zW2ldLm1hdGNoKFxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvblNwZWxscyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIHNwZWxsc1xuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc1NwZWxscyhzZWN0aW9uc1tpICsgMV0pXG4gICAgICAgICAgaSsrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQW55IHJlbWFpbmluZyB0ZXh0IGFkZCB0byBHTSBub3RlcyBzbyB5b3UgY2FuIGVhc2lseSBzZWUgaWYgdGhlcmUgYXJlIGFueSBvYnZpb3VzIGlzc3VlIG9yIGp1c3QgZ2VuZXJhbCBub3Rlc1xuICAgIHRoaXMucGFyc2VkLmdtbm90ZXMgPSB0aGlzLnRvSFRNTCh0aGlzLnRleHQpXG4gICAgcmV0dXJuIHRoaXMucGFyc2VkXG4gIH1cblxuICBkaXNhYmxlQXR0cmliQXV0byAoa2V5LCBhdHRyaWJWYWx1ZSwgY2hlY2ssIHVwZGF0ZURhdGEpIHtcbiAgICBjb25zdCB2YWx1ZSA9IE1hdGgubWF4KDAsIE51bWJlcihhdHRyaWJWYWx1ZSkpXG4gICAgaWYgKHZhbHVlICE9PSBOdW1iZXIoY2hlY2spKSB7XG4gICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uYXR0cmlicy4ke2tleX0uYXV0b2BdID0gZmFsc2VcbiAgICAgIHVwZGF0ZURhdGFbYHN5c3RlbS5hdHRyaWJzLiR7a2V5fS52YWx1ZWBdID0gdmFsdWVcbiAgICAgIGlmIChrZXkgPT09ICdidWlsZCcpIHtcbiAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9LmN1cnJlbnRgXSA9IHZhbHVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uYXR0cmlicy4ke2tleX0ubWF4YF0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBlbnRpdHkgKGBucGNgIG9yIGBjcmVhdHVyZWApIGZyb20gdGhlIG9iamVjdCB3aXRoIHRoZSBhbHJlYWR5IHBhcnNlZCBlbnRpdHkgZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhcmFjdGVyRGF0YSBvYmplY3Qgd2l0aCB0aGUgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgY2hhcmFjdGVyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlbnRpdHlUeXBlU3RyaW5nIGVudGl0eSB0eXBlIG9idGFpbmVkIGZyb20gdGhlIHVzZXIgaW5wdXRcbiAgICogQHJldHVybnMge0FjdG9yfSB0aGUgY3JlYXRlZCBmb3VuZHJ5IGBBY3RvcmBcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUVudGl0eSAoY2hhcmFjdGVyRGF0YSwgZW50aXR5VHlwZSkge1xuICAgIGNvbnN0IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9XG4gICAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLmNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cygpXG4gICAgaWYgKGVudGl0eVR5cGUgIT09ICducGMnKSB7XG4gICAgICBlbnRpdHlUeXBlID0gJ2NyZWF0dXJlJ1xuICAgIH1cbiAgICBjb25zdCBhY3RvckRhdGEgPSB7XG4gICAgICBuYW1lOiBjaGFyYWN0ZXJEYXRhLm5hbWUsXG4gICAgICB0eXBlOiBlbnRpdHlUeXBlLFxuICAgICAgZm9sZGVyOiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIuaWQsXG4gICAgICBzeXN0ZW06IGNoYXJhY3RlckRhdGEuYWN0b3JcbiAgICB9XG4gICAgY29uc3QgbnBjID0gYXdhaXQgQWN0b3IuY3JlYXRlKGFjdG9yRGF0YSlcbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBjaGFyYWN0ZXJEYXRhLml0ZW1zLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuICAgIGxldCB2YWx1ZSA9IDBcbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5ocD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnaHAnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuaHAudmFsdWUsXG4gICAgICAgIG5wYy5ocE1heCxcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tcD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnbXAnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubXAudmFsdWUsXG4gICAgICAgIG5wYy5tcE1heCxcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tb3Y/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kaXNhYmxlQXR0cmliQXV0byhcbiAgICAgICAgJ21vdicsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tb3YudmFsdWUsXG4gICAgICAgIG5wYy5tb3YsXG4gICAgICAgIHVwZGF0ZURhdGFcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuYnVpbGQ/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kaXNhYmxlQXR0cmliQXV0byhcbiAgICAgICAgJ2J1aWxkJyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmJ1aWxkLnZhbHVlLFxuICAgICAgICBucGMuYnVpbGQsXG4gICAgICAgIHVwZGF0ZURhdGFcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuZGI/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFsdWUgPSBTdHJpbmcoY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmRiLnZhbHVlKS5yZXBsYWNlKC9eXFwrXFxzKi8sICcnKVxuICAgICAgaWYgKHZhbHVlICE9PSBTdHJpbmcobnBjLmRiKSkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5kYi5hdXRvJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSddID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3VwZGF0ZURhdGE6JywgdXBkYXRlRGF0YSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5wYy51cGRhdGUodXBkYXRlRGF0YSlcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlSXRlbURhdGEgPSBbXVxuICAgIGxldCBsYXN0V2VhcG9uU2tpbGwgPSBudWxsXG4gICAgZm9yIChjb25zdCBwYWlyIG9mIHRoaXMud2VhcG9uU2tpbGxzKSB7XG4gICAgICBpZiAocGFpclswXSAhPT0gZmFsc2UpIHtcbiAgICAgICAgbGFzdFdlYXBvblNraWxsID0gbnBjLml0ZW1zLmZpbHRlcihcbiAgICAgICAgICBpID0+IGkubmFtZSA9PT0gcGFpclswXS5uYW1lICYmXG4gICAgICAgICAgICBpLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgIE51bWJlcihpLnN5c3RlbS52YWx1ZSkgPT09IE51bWJlcihwYWlyWzBdLnN5c3RlbS52YWx1ZSlcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgY29uc3Qgd2VhcG9uID0gbnBjLml0ZW1zLmZpbHRlcihcbiAgICAgICAgaSA9PiBpLm5hbWUgPT09IHBhaXJbMV0ubmFtZSAmJlxuICAgICAgICAgIGkudHlwZSA9PT0gJ3dlYXBvbicgJiZcbiAgICAgICAgICBpLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlID09PSBwYWlyWzFdLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgICApXG4gICAgICBpZiAobGFzdFdlYXBvblNraWxsWzBdICYmIHdlYXBvblswXSkge1xuICAgICAgICB1cGRhdGVJdGVtRGF0YS5wdXNoKHtcbiAgICAgICAgICBfaWQ6IHdlYXBvblswXS5pZCxcbiAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4uaWQnOiBsYXN0V2VhcG9uU2tpbGxbMF0uaWQsXG4gICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBsYXN0V2VhcG9uU2tpbGxbMF0ubmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodXBkYXRlSXRlbURhdGEubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygndXBkYXRlSXRlbURhdGE6JywgdXBkYXRlSXRlbURhdGEpXG4gICAgICB9XG4gICAgICBhd2FpdCBucGMudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCB1cGRhdGVJdGVtRGF0YSlcbiAgICB9XG4gICAgcmV0dXJuIG5wY1xuICB9XG5cbiAgLyoqXG4gICAqIGFjdG9yRGF0YSwgY29udmVydCBwYXJzZUNoYXJhY3RlciBkYXRhIGludG8gQWN0b3IgZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gcGMgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlciBhcyByZXR1cm5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGFcbiAgICovXG4gIGFjdG9yRGF0YSAocGMpIHtcbiAgICBjb25zdCBzeXN0ZW0gPSB7XG4gICAgICBjaGFyYWN0ZXJpc3RpY3M6IHt9LFxuICAgICAgYXR0cmliczoge30sXG4gICAgICBpbmZvczoge30sXG4gICAgICBzcGVjaWFsOiB7fSxcbiAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgIGtlZXBlcjogJydcbiAgICAgIH0sXG4gICAgICBmbGFnczoge1xuICAgICAgICBsb2NrZWQ6IGZhbHNlLFxuICAgICAgICBkaXNwbGF5Rm9ybXVsYTogZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgJ3N0cicsXG4gICAgICAnY29uJyxcbiAgICAgICdzaXonLFxuICAgICAgJ2RleCcsXG4gICAgICAnYXBwJyxcbiAgICAgICdpbnQnLFxuICAgICAgJ3BvdycsXG4gICAgICAnZWR1J1xuICAgIF0pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc3lzdGVtLmNoYXJhY3RlcmlzdGljc1trZXldID0ge1xuICAgICAgICAgIHZhbHVlOiBOdW1iZXIocGNba2V5XSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3NhbicsICdtb3YnLCAnYnVpbGQnLCAnYXJtb3InLCAnbGNrJywgJ2hwJywgJ21wJ10pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc3lzdGVtLmF0dHJpYnNba2V5XSA9IHtcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHBjW2tleV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYy5kYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN5c3RlbS5hdHRyaWJzLmRiID0ge1xuICAgICAgICB2YWx1ZTogcGMuZGJcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydhZ2UnLCAnb2NjdXBhdGlvbiddKSB7XG4gICAgICBpZiAodHlwZW9mIHBjW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHN5c3RlbS5pbmZvc1trZXldID0gcGNba2V5XVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHBjLnNhbkxvc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBbcGFzc2VkLCBmYWlsZWRdID0gcGMuc2FuTG9zcy5zcGxpdCgvWy/vvI9dLylcbiAgICAgIHN5c3RlbS5zcGVjaWFsLnNhbkxvc3MgPSB7XG4gICAgICAgIGNoZWNrUGFzc2VkOiBwYXNzZWQsXG4gICAgICAgIGNoZWNrRmFpbGxlZDogZmFpbGVkXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGMuYXR0YWNrc1BlclJvdW5kICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3lzdGVtLnNwZWNpYWwuYXR0YWNrc1BlclJvdW5kID0gTnVtYmVyKHBjLmF0dGFja3NQZXJSb3VuZClcbiAgICB9XG4gICAgc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciA9IHBjLmdtbm90ZXNcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnYWN0b3JEYXRhOicsIHN5c3RlbSlcbiAgICB9XG4gICAgcmV0dXJuIHN5c3RlbVxuICB9XG5cbiAgLyoqXG4gICAqIGl0ZW1zRGF0YSwgY29udmVydCBwYXJzZUNoYXJhY3RlciBkYXRhIGludG8gQWN0b3IgaXRlbSBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYyBvYmplY3Qgd2l0aCB0aGUgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgY2hhcmFjdGVyIGFzIHJldHVybmVkIGZyb20gYHBhcnNlQ2hhcmFjdGVyYFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YVxuICAgKi9cbiAgYXN5bmMgaXRlbXNEYXRhIChwYykge1xuICAgIGNvbnN0IGl0ZW1zID0gW11cbiAgICB0aGlzLndlYXBvblNraWxscyA9IFtdXG4gICAgLy8gV2VhcG9uIHNraWxsc1xuICAgIGlmICh0eXBlb2YgcGMuYXR0YWNrcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3QgYXR0YWNrIG9mIHBjLmF0dGFja3MpIHtcbiAgICAgICAgbGV0IHNraWxsID0gZmFsc2VcbiAgICAgICAgaWYgKGF0dGFjay5zeXN0ZW0/LnNraWxsPy5pZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy53ZWFwb25Ta2lsbChhdHRhY2spXG4gICAgICAgICAgaXRlbXMucHVzaChza2lsbClcbiAgICAgICAgfVxuICAgICAgICBhdHRhY2suc3lzdGVtLnNraWxsLmlkID0gbnVsbFxuICAgICAgICBpdGVtcy5wdXNoKGF0dGFjaylcbiAgICAgICAgdGhpcy53ZWFwb25Ta2lsbHMucHVzaChbZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc2tpbGwpLCBhdHRhY2tdKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBTa2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLnNraWxscyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgcGMuc2tpbGxzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgc2tpbGwubmFtZSwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgaWYgKHR5cGVvZiBza2lsbC5wdXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBza2lsbC5wdXNoXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoY2xvbmVkKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcHRpb25zID0ge31cbiAgICAgICAgICBpZiAodHlwZW9mIHNraWxsLnB1c2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2ggPSBza2lsbC5wdXNoXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goQ29DQWN0b3IuZW1wdHlTa2lsbChza2lsbC5uYW1lLCBza2lsbC52YWx1ZSwgb3B0aW9ucykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gTGFuZ3VhZ2VzXG4gICAgaWYgKHR5cGVvZiBwYy5sYW5ndWFnZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHBjLmxhbmd1YWdlcykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIHNraWxsLm5hbWUsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICB9KVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLmJhc2UgPSBza2lsbC52YWx1ZVxuICAgICAgICAgIGl0ZW1zLnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoY2xvbmVkKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtcy5wdXNoKFxuICAgICAgICAgICAgQ29DQWN0b3IuZW1wdHlTa2lsbChza2lsbC5uYW1lLCBza2lsbC52YWx1ZSwge1xuICAgICAgICAgICAgICBpbWc6IENvQzdJdGVtLmljb25MYW5ndWFnZSxcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MYW5ndWFnZVNwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBTcGVsbHNcbiAgICBpZiAodHlwZW9mIHBjLnNwZWxscyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBwYy5zcGVsbHMpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc3BlbGwnLCBuYW1lLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBjbG9uZWQgPSBleGlzdGluZy50b09iamVjdCgpXG4gICAgICAgICAgaXRlbXMucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjbG9uZWQpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1zLnB1c2goQ29DQWN0b3IuZW1wdHlTcGVsbChuYW1lKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXRlbXNcbiAgfVxuXG4gIC8qKiB3ZWFwb25Ta2lsbCB0cmllcyB0byBndWVzcyB3aGF0IGtpbmQgb2Ygd2VhcG9uIHNraWxsIHRvIHVzZSBmb3Igd2VhcG9uIGZyb20gaXQncyBuYW1lXG4gICAqIEBwYXJhbSB3ZWFwb246IEpTT04sIHdlYXBvbiBkYXRhXG4gICAqL1xuICBhc3luYyB3ZWFwb25Ta2lsbCAod2VhcG9uKSB7XG4gICAgbGV0IHNraWxsID0gbnVsbFxuICAgIGNvbnN0IGxvY2FsaXplZEZpcmVhcm0gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgaWYgKHRoaXMuZ2V0UmVnRXgodGhpcy5rZXlzLmhhbmRndW4pLmV4ZWMod2VhcG9uLm5hbWUpKSB7XG4gICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIGxvY2FsaXplZEZpcmVhcm0gKyAnICgnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsTmFtZUhhbmRndW4nKSArICcpJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBIYW5kZ3VuIHNraWxsOiBgLCBza2lsbClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UmVnRXgodGhpcy5rZXlzLnJpZmxlKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBsb2NhbGl6ZWRGaXJlYXJtICsgJyAoJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbE5hbWVSaWZsZVNob3RndW4nKSArICcpJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIGxvY2FsaXplZEZpcmVhcm0gKyAnICgnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsTmFtZVJpZmxlJykgKyAnKScsIHtcbiAgICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgbG9jYWxpemVkRmlyZWFybSArICcgKCcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxOYW1lU2hvdGd1bicpICsgJyknLCB7XG4gICAgICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgUmlmbGUgc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UmVnRXgodGhpcy5rZXlzLnNtYikuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgbG9jYWxpemVkRmlyZWFybSArICcgKCcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxOYW1lU21iJykgKyAnKScsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgU3VibWFjaGluZSBHdW4gc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UmVnRXgodGhpcy5rZXlzLm1hY2hpbmVHdW4pLmV4ZWMod2VhcG9uLm5hbWUpKSB7XG4gICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIGxvY2FsaXplZEZpcmVhcm0gKyAnICgnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsbmFtZU1hY2hpbmVHdW4nKSArICcpJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBNYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCh0aGlzLmtleXMubGF1bmNoZWQpLmV4ZWMod2VhcG9uLm5hbWUpKSB7XG4gICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIGxvY2FsaXplZEZpcmVhcm0gKyAnICgnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsbmFtZUxhdW5jaCcpICsgJyknLCB7XG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgIH0pXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIExhdW5jaCBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc2tpbGwgIT09IG51bGwgJiYgdHlwZW9mIHNraWxsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3Qgc2tpbGxDbG9uZSA9IHNraWxsLmNsb25lKHtcbiAgICAgICAgc3lzdGVtOiB7XG4gICAgICAgICAgdmFsdWU6IHdlYXBvbi5zeXN0ZW0/LnNraWxsPy5pZFxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIHNraWxsQ2xvbmVcbiAgICB9XG4gICAgY29uc3QgZmlyZWFybXMgPSB3ZWFwb24uc3lzdGVtPy5wcm9wZXJ0aWVzPy5ybmdkXG4gICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgd2VhcG9uLm5hbWUsXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgIGZpcmVhcm1zXG4gICAgICAgICAgPyAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgIDogJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICApXG4gICAgKVxuICAgIGNvbnN0IG5ld1NraWxsID0ge1xuICAgICAgdHlwZTogJ3NraWxsJyxcbiAgICAgIG5hbWU6IHBhcnRzLm5hbWUsXG4gICAgICBzeXN0ZW06IHtcbiAgICAgICAgc2tpbGxOYW1lOiBwYXJ0cy5za2lsbE5hbWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiBwYXJ0cy5zcGVjaWFsaXphdGlvbixcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHNwZWNpYWw6IHRydWUsXG4gICAgICAgICAgZmlnaHRpbmc6ICFmaXJlYXJtcyxcbiAgICAgICAgICBmaXJlYXJtOiBmaXJlYXJtcyxcbiAgICAgICAgICBjb21iYXQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgYmFzZTogd2VhcG9uLnN5c3RlbT8uc2tpbGw/LmlkLFxuICAgICAgICB2YWx1ZTogd2VhcG9uLnN5c3RlbT8uc2tpbGw/LmlkXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgICBgV2VhcG9uIHNraWxsIG5vdCBmb3VuZCBmb3IgJHt3ZWFwb24ubmFtZX0sIGNyZWF0aW5nIGEgbmV3IG9uZWAsXG4gICAgICAgIG5ld1NraWxsXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBuZXdTa2lsbFxuICB9XG5cbiAgLyoqXG4gICAqIG5lZWRzQ29udmVyc2lvbiBkb2VzIGFuIGV2YWx1YXRpb24gdG8gc2VlIGlmIHRoZSBnaXZlbiBucGMgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIDd0aCBFZGl0aW9uXG4gICAqIFJldHVybnMgYGZhbHNlYCB3aGVuIGFueSBvZiB0aGUgQ2hhcmFjdGVyaXN0aWNzIHZhbHVlIGl0J3MgYWJvdmUgMjlcbiAgICovXG4gIG5lZWRzQ29udmVyc2lvbiAobnBjKSB7XG4gICAgbGV0IG5lZWRzQ29udmVyc2lvblJlc3VsdCA9IHRydWVcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbXG4gICAgICAnc3RyJyxcbiAgICAgICdjb24nLFxuICAgICAgJ3NpeicsXG4gICAgICAnZGV4JyxcbiAgICAgICdhcHAnLFxuICAgICAgJ2ludCcsXG4gICAgICAncG93JyxcbiAgICAgICdlZHUnXG4gICAgXSkge1xuICAgICAgaWYgKHR5cGVvZiBucGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgbnBjW2tleV0gPiAzMCkge1xuICAgICAgICBuZWVkc0NvbnZlcnNpb25SZXN1bHQgPSBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnbmVlZHNDb252ZXJzaW9uOicsIG5lZWRzQ29udmVyc2lvblJlc3VsdClcbiAgICB9XG4gICAgcmV0dXJuIG5lZWRzQ29udmVyc2lvblJlc3VsdFxuICB9XG5cbiAgLyoqXG4gICAqIGNyZWF0ZUFjdG9yIG1haW4gbWV0aG9kIHRvIGNyZWF0ZSBhbiBgQWN0b3JgIGZyb20gYSBnaXZlIHVzZXIgaW5wdXQsIHRha2VzIG9uIGFjY291bnQgdGhlIGxhbmcsIGVudGl0eSB0eXBlLFxuICAgKiB0aGUgY29udmVydCB0byA3IEVkaXRpb24gZmxhZywgYW5kIHRoZSByYXcgZW50aXR5IGRhdGEuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dHMgaW5wdXRzIGZyb20gdGhlIGZvcm0gdG8gY3JlYXRlIGFuIEFjdG9yXG4gICAqIEByZXR1cm5zIHtBY3Rvcn0gdGhlIGZvdW5kcnkgYEFjdG9yYCBmcm9tIHRoZSBnaXZlbiBgaW5wdXRgIG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUFjdG9yIChpbnB1dHMpIHtcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnY3JlYXRlQWN0b3I6JywgaW5wdXRzKVxuICAgIH1cbiAgICBjb25zdCBsYW5nID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuY2hlY2tMYW5ndWFnZShpbnB1dHMubGFuZylcbiAgICB0aGlzLmtleXMgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRLZXlzKGxhbmcpXG4gICAgdGhpcy5yZWdFeCA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldFJlZ3VsYXJFeHByZXNzaW9ucyhsYW5nKVxuICAgIHRoaXMuaXRlbUxvY2F0aW9ucyA9IGlucHV0cy5zb3VyY2VcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnUmVndWxhciBFeHByZXNzaW9uczonLCBsYW5nLCB0aGlzLmtleXMsIHRoaXMucmVnRXgpXG4gICAgfVxuICAgIGxldCBjaGFyYWN0ZXIgPSBhd2FpdCB0aGlzLnBhcnNlQ2hhcmFjdGVyKGlucHV0cy50ZXh0KVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdwYXJzZUNoYXJhY3RlcjonLCBjaGFyYWN0ZXIpXG4gICAgfVxuICAgIGlmIChcbiAgICAgIChpbnB1dHMuY29udmVydEZyb202RSA9PT0gJ2NvYy1ndWVzcycgJiZcbiAgICAgICAgdGhpcy5uZWVkc0NvbnZlcnNpb24oY2hhcmFjdGVyKSkgfHxcbiAgICAgIGlucHV0cy5jb252ZXJ0RnJvbTZFID09PSAnY29jLWNvbnZlcnQnXG4gICAgKSB7XG4gICAgICBjaGFyYWN0ZXIgPSBhd2FpdCB0aGlzLmNvbnZlcnQ3RShjaGFyYWN0ZXIpXG4gICAgfVxuICAgIGNvbnN0IGNoYXJhY3RlckRhdGEgPSB7XG4gICAgICBuYW1lOiBjaGFyYWN0ZXIubmFtZSxcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yRGF0YShjaGFyYWN0ZXIpLFxuICAgICAgaXRlbXM6IGF3YWl0IHRoaXMuaXRlbXNEYXRhKGNoYXJhY3RlcilcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGlucHV0cy50ZXN0TW9kZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaW5wdXRzLnRlc3RNb2RlID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gY2hhcmFjdGVyRGF0YVxuICAgIH1cbiAgICBjb25zdCBucGMgPSBhd2FpdCB0aGlzLmNyZWF0ZUVudGl0eShjaGFyYWN0ZXJEYXRhLCBpbnB1dHMuZW50aXR5KVxuICAgIHJldHVybiBucGNcbiAgfVxuXG4gIC8qKlxuICAgKiBjb252ZXJ0N0UgQ29udmVydHMgdGhlIGdpdmVuIGVudGl0eSBmcm9tIDYgZWRpdGlvbiB0byA3IGVkaXRpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IHRoZSBlbnRpdHkgb2JqZWN0IGFzIG9idGFpbmVkIGZyb20gYHBhcnNlQ2hhcmFjdGVyYFxuICAgKiBAcmV0dXJuIHRoZSBzYW1lIG9iamVjdCBidXQgd2l0aCB1cGRhdGVkIGNoYXJhY3RlcmlzdGljcyBmb3IgNyBlZGl0aW9uXG4gICAqL1xuICBhc3luYyBjb252ZXJ0N0UgKGNyZWF0dXJlKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ0NvbnZlcnRpbmcgbnBjJywgY3JlYXR1cmUpXG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93J10pIHtcbiAgICAgIGlmICh0eXBlb2YgY3JlYXR1cmVba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY3JlYXR1cmVba2V5XSAqPSA1XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY3JlYXR1cmUuZWR1ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGNyZWF0dXJlLmVkdSA8PSAxOCkge1xuICAgICAgICBjcmVhdHVyZS5lZHUgKj0gNVxuICAgICAgfSBlbHNlIGlmIChjcmVhdHVyZS5lZHUgPD0gMjYpIHtcbiAgICAgICAgY3JlYXR1cmUuZWR1ID0gY3JlYXR1cmUuZWR1ICsgOTAgLSAxOFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY3JlYXR1cmUuZWR1ID49MjhcbiAgICAgICAgY3JlYXR1cmUuZWR1ID0gOTlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjcmVhdHVyZS5kYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChjcmVhdHVyZS5kYiA9PT0gJy0xZDQnKSB7XG4gICAgICAgIGNyZWF0dXJlLmRiID0gLTFcbiAgICAgIH0gZWxzZSBpZiAoY3JlYXR1cmUuZGIgPT09ICctMWQ2Jykge1xuICAgICAgICBjcmVhdHVyZS5kYiA9IC0yXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdjb252ZXJ0N0U6ICcsIGNyZWF0dXJlKVxuICAgIH1cbiAgICByZXR1cm4gY3JlYXR1cmVcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEZpbGUsIEZpbGVQaWNrZXIsIGdhbWUsIHVpICovXG5leHBvcnQgY2xhc3MgQ29DN0RpcmVjdG9yeVBpY2tlciBleHRlbmRzIEZpbGVQaWNrZXIge1xuICBnZXQgdGl0bGUgKCkge1xuICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGlja0RpcmVjdG9yeScpXG4gIH1cblxuICBfb25TdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHBhdGggPSBldmVudC50YXJnZXQudGFyZ2V0LnZhbHVlXG4gICAgY29uc3QgYWN0aXZlU291cmNlID0gdGhpcy5hY3RpdmVTb3VyY2VcbiAgICBjb25zdCBidWNrZXQgPSBldmVudC50YXJnZXQuYnVja2V0ID8gZXZlbnQudGFyZ2V0LmJ1Y2tldC52YWx1ZSA6IG51bGxcbiAgICB0aGlzLmZpZWxkLnZhbHVlID0gQ29DN0RpcmVjdG9yeVBpY2tlci5mb3JtYXQoe1xuICAgICAgYWN0aXZlU291cmNlLFxuICAgICAgYnVja2V0LFxuICAgICAgcGF0aFxuICAgIH0pXG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICBzdGF0aWMgRGVmYXVsdERpcmVjdG9yeSAodmFsKSB7XG4gICAgcmV0dXJuIHZhbCA9PT0gbnVsbCA/ICcnIDogU3RyaW5nKHZhbClcbiAgfVxuXG4gIHN0YXRpYyBmb3JtYXQgKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmJ1Y2tldCAhPT0gbnVsbFxuICAgICAgPyBgWyR7dmFsdWUuYWN0aXZlU291cmNlfToke3ZhbHVlLmJ1Y2tldH1dICR7dmFsdWUucGF0aH1gXG4gICAgICA6IGBbJHt2YWx1ZS5hY3RpdmVTb3VyY2V9XSAke3ZhbHVlLnBhdGh9YFxuICB9XG5cbiAgc3RhdGljIHBhcnNlIChyYXcpIHtcbiAgICBjb25zdCBzdHIgPSByYXcgPz8gJydcbiAgICBjb25zdCBtYXRjaGVzID0gc3RyLm1hdGNoKC9eXFxbKFteOl0rKSg6KC4rKSk/XFxdXFxzKiguKyk/JC91KVxuXG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFjdGl2ZVNvdXJjZTogbWF0Y2hlc1sxXSxcbiAgICAgICAgYnVja2V0OiBtYXRjaGVzWzNdID8/ICcnLFxuICAgICAgICBjdXJyZW50OiBtYXRjaGVzWzRdXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBhY3RpdmVTb3VyY2U6ICdkYXRhJyxcbiAgICAgIGJ1Y2tldDogbnVsbCxcbiAgICAgIGN1cnJlbnQ6IHN0clxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBwcm9jZXNzSHRtbCAoaHRtbCkge1xuICAgICQoaHRtbClcbiAgICAgIC5maW5kKCdpbnB1dFtkYXRhLWR0eXBlPVwiRGVmYXVsdERpcmVjdG9yeVwiXScpXG4gICAgICAuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSAkKGVsKVxuICAgICAgICBpbnB1dC5wcm9wKCdyZWFkb25seScsIHRydWUpXG4gICAgICAgIGlmICghaW5wdXQubmV4dCgpLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IHBpY2tlciA9IG5ldyBDb0M3RGlyZWN0b3J5UGlja2VyKHtcbiAgICAgICAgICAgIGZpZWxkOiBpbnB1dFswXSxcbiAgICAgICAgICAgIC4uLkNvQzdEaXJlY3RvcnlQaWNrZXIucGFyc2UoaW5wdXQudmFsKCkpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBjb25zdCBwaWNrZXJCdXR0b24gPSAkKFxuICAgICAgICAgICAgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiZmlsZS1waWNrZXJcIiB0aXRsZT1cIicgK1xuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGlja0RpcmVjdG9yeScpICtcbiAgICAgICAgICAgICAgJ1wiPjxpIGNsYXNzPVwiZmFzIGZhLWZpbGUtaW1wb3J0IGZhLWZ3XCI+PC9pPjwvYnV0dG9uPidcbiAgICAgICAgICApXG4gICAgICAgICAgQ29DN0RpcmVjdG9yeVBpY2tlci5jcmVhdGVEZWZhdWx0RGlyZWN0b3J5KClcbiAgICAgICAgICBwaWNrZXJCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgcGlja2VyLnJlbmRlcih0cnVlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgaW5wdXQucGFyZW50KCkuYXBwZW5kKHBpY2tlckJ1dHRvbilcbiAgICAgICAgfVxuICAgICAgfSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgICQoaHRtbCkuZmluZCgnb2wuZmlsZXMtbGlzdCcpLnJlbW92ZSgpXG4gICAgJChodG1sKS5maW5kKCdmb290ZXIgZGl2JykucmVtb3ZlKClcbiAgICAkKGh0bWwpLmZpbmQoJ2Zvb3RlciBidXR0b24nKS50ZXh0KGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QaWNrRGlyZWN0b3J5JykpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlRGVmYXVsdERpcmVjdG9yeSAoKSB7XG4gICAgY29uc3QgcGFyc2VkID0gQ29DN0RpcmVjdG9yeVBpY2tlci5wYXJzZShcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rob2xlVXBsb2FkRGlyZWN0b3J5JylcbiAgICApXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IENvQzdEaXJlY3RvcnlQaWNrZXIuY3JlYXRlRGlyZWN0b3J5KFxuICAgICAgICBwYXJzZWQuYWN0aXZlU291cmNlLFxuICAgICAgICBwYXJzZWQuY3VycmVudCxcbiAgICAgICAgeyBidWNrZXQ6IHBhcnNlZC5idWNrZXQgfVxuICAgICAgKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIWUubWVzc2FnZS5zdGFydHNXaXRoKCdFRVhJU1QnKSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyVXBsb2FkRXJyb3InKVxuICAgICAgICApXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGxvYWRUb0RlZmF1bHREaXJlY3RvcnkgKGZpbGUsIGZpbGVuYW1lKSB7XG4gICAgY29uc3QgcGFyc2VkID0gQ29DN0RpcmVjdG9yeVBpY2tlci5wYXJzZShcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rob2xlVXBsb2FkRGlyZWN0b3J5JylcbiAgICApXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBGaWxlUGlja2VyLnVwbG9hZChcbiAgICAgIHBhcnNlZC5hY3RpdmVTb3VyY2UsXG4gICAgICBwYXJzZWQuY3VycmVudCxcbiAgICAgIG5ldyBGaWxlKFtmaWxlXSwgZmlsZW5hbWUsIHtcbiAgICAgICAgdHlwZTogJ2ltYWdlL3BuZydcbiAgICAgIH0pLFxuICAgICAgeyBidWNrZXQ6IHBhcnNlZC5idWNrZXQgfVxuICAgIClcbiAgICBpZiAoIXJlc3BvbnNlLnBhdGgpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpbGVVcGxvYWRFcnJvcicpKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiBwYXJzZWQuY3VycmVudCArICcvJyArIGZpbGVuYW1lXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBY3RvciwgQ09ORklHLCBmb3VuZHJ5LCBnYW1lLCB1aSwgZmV0Y2ggKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0RpcmVjdG9yeVBpY2tlciB9IGZyb20gJy4uL3NjcmlwdHMvY29jNy1kaXJlY3RvcnktcGlja2VyLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuLyoqXG4gKiBDb0M3QWN0b3JJbXBvcnRlciBoZWxwZXIgY2xhc3MgdG8gaW1wb3J0IGFuIEFjdG9yIGZyb20gdGhlIHJhdyB0ZXh0IGRlc2NyaXB0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyIHtcbiAgLyoqXG4gICAqIENvbXBvc2UgdGhlIEJhY2tzdG9yeSBmcm9tIHRoZSBkaWZmZXJlbnQgYmxvY2tzLlxuICAgKiBAcGFyYW0ge30gYmFja3N0b3J5SlNPTiBEaG9sZUhvdXNlIGJhY2tzdG9yeSBKU09OXG4gICAqIEByZXR1cm5zIEhUTUwgd2l0aCB0aGUgZm9ybWF0dGVkIGJhY2tzdG9yeVxuICAgKi9cbiAgc3RhdGljIGdldEJhY2tzdG9yeSAoYmFja3N0b3J5SlNPTikge1xuICAgIGNvbnN0IHNlY3Rpb25zID0gW1xuICAgICAgWydkZXNjcmlwdGlvbicsICdEZXNjcmlwdGlvbiddLFxuICAgICAgWyd0cmFpdHMnLCAnVHJhaXRzJ10sXG4gICAgICBbJ2lkZW9sb2d5JywgJ0lkZW9sb2d5J10sXG4gICAgICBbJ2luanVydWVzJywgJ0luanVyaWVzJywgJ2luanVyaWVzJ10sXG4gICAgICBbJ3Blb3BsZScsICdQZW9wbGUnXSxcbiAgICAgIFsncGhvYmlhcycsICdQaG9iaWFzJ10sXG4gICAgICBbJ2xvY2F0aW9ucycsICdMb2NhdGlvbnMnXSxcbiAgICAgIFsndG9tZXMnLCAnVG9tZXMnXSxcbiAgICAgIFsncG9zc2Vzc2lvbnMnLCAnUG9zc2Vzc2lvbnMnXSxcbiAgICAgIFsnZW5jb3VudGVycycsICdFbmNvdW50ZXJzJ11cbiAgICBdXG4gICAgY29uc3QgYmFja3N0b3J5ID0ge1xuICAgICAgYmxvY2s6IFtdLFxuICAgICAgc2VjdGlvbnM6IFtdXG4gICAgfVxuICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBzZWN0aW9ucykge1xuICAgICAgaWYgKGJhY2tzdG9yeUpTT05bc2VjdGlvblswXV0gIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWN0aW9uWzJdID09PSAndW5kZWZpbmVkJyB8fCBzZWN0aW9uWzJdID09PSAnJykge1xuICAgICAgICAgIHNlY3Rpb25bMl0gPSBzZWN0aW9uWzBdXG4gICAgICAgIH1cbiAgICAgICAgYmFja3N0b3J5LmJsb2NrLnB1c2goXG4gICAgICAgICAgYDxoMz4ke3NlY3Rpb25bMV19PC9oMz5cXG48ZGl2IGNsYXNzPVwiJHtzZWN0aW9uWzJdfVwiPlxcbiR7XG4gICAgICAgICAgICBiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dXG4gICAgICAgICAgfVxcbjwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgICBiYWNrc3Rvcnkuc2VjdGlvbnMucHVzaCh7XG4gICAgICAgICAgdGl0bGU6IHNlY3Rpb25bMV0sXG4gICAgICAgICAgdmFsdWU6IGJhY2tzdG9yeUpTT05bc2VjdGlvblswXV1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgYmFja3N0b3J5LmJsb2NrID1cbiAgICAgICc8aDI+QmFja3N0b3J5PC9oMj5cXG4nICsgYmFja3N0b3J5LmJsb2NrLmpvaW4oJ1xcbicsIGJhY2tzdG9yeS5ibG9jaylcbiAgICByZXR1cm4gYmFja3N0b3J5XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtKU09OfSBkaG9sZUhvdXNlRGF0YSBEaG9sZUhvdXNlSlNPTlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNvbnZlcnREaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSAoZGhvbGVIb3VzZURhdGEsIG9wdGlvbnMpIHtcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5sb2coJ1NvdXJjZTonLCBkaG9sZUhvdXNlRGF0YSlcbiAgICB9XG4gICAgZGhvbGVIb3VzZURhdGEgPSBkaG9sZUhvdXNlRGF0YS5JbnZlc3RpZ2F0b3JcbiAgICBjb25zdCBiYWNrc3RvcmllcyA9IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5nZXRCYWNrc3RvcnkoXG4gICAgICBkaG9sZUhvdXNlRGF0YS5CYWNrc3RvcnkgPz8ge31cbiAgICApXG4gICAgY29uc3QgY0RhdGEgPSB7XG4gICAgICBuYW1lOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuTmFtZSxcbiAgICAgIGFjdG9yOiB7XG4gICAgICAgIGNoYXJhY3RlcmlzdGljczoge1xuICAgICAgICAgIHN0cjogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNUUiwgMTApIH0sXG4gICAgICAgICAgY29uOiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuQ09OLCAxMCkgfSxcbiAgICAgICAgICBzaXo6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TSVosIDEwKSB9LFxuICAgICAgICAgIGRleDogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkRFWCwgMTApIH0sXG4gICAgICAgICAgYXBwOiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuQVBQLCAxMCkgfSxcbiAgICAgICAgICBpbnQ6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5JTlQsIDEwKSB9LFxuICAgICAgICAgIHBvdzogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlBPVywgMTApIH0sXG4gICAgICAgICAgZWR1OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuRURVLCAxMCkgfVxuICAgICAgICB9LFxuICAgICAgICBhdHRyaWJzOiB7XG4gICAgICAgICAgc2FuOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNhbml0eSwgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU2FuaXR5TWF4LCAxMCksXG4gICAgICAgICAgICBkYWlseUxpbWl0OiBNYXRoLmZsb29yKGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TYW5pdHkgLyA1KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSGl0UHRzLCAxMCksXG4gICAgICAgICAgICBtYXg6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5IaXRQdHNNYXgsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbXA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTWFnaWNQdHMsIDEwKSxcbiAgICAgICAgICAgIG1heDogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1hZ2ljUHRzTWF4LCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxjazoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5MdWNrLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1vdjoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5Nb3ZlLCAxMCksXG4gICAgICAgICAgICBtYXg6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5Nb3ZlLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRiOiB7IHZhbHVlOiBkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuRGFtYWdlQm9udXMgfSxcbiAgICAgICAgICBidWlsZDogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkJ1aWxkLCAxMCkgfVxuICAgICAgICB9LFxuICAgICAgICBpbmZvczoge1xuICAgICAgICAgIG9jY3VwYXRpb246IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5PY2N1cGF0aW9uLFxuICAgICAgICAgIGFnZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLkFnZSxcbiAgICAgICAgICBzZXg6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5HZW5kZXIsXG4gICAgICAgICAgcmVzaWRlbmNlOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuUmVzaWRlbmNlLFxuICAgICAgICAgIGJpcnRocGxhY2U6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5CaXJ0aHBsYWNlXG4gICAgICAgIH0sXG4gICAgICAgIGJhY2tzdG9yeTogYmFja3N0b3JpZXMuYmxvY2ssXG4gICAgICAgIGJpb2dyYXBoeTogYmFja3N0b3JpZXMuc2VjdGlvbnMsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAga2VlcGVyOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXJTb3VyY2UnKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2tpbGxzOiBhd2FpdCBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZXh0cmFjdFNraWxscyhcbiAgICAgICAgZGhvbGVIb3VzZURhdGEuU2tpbGxzLlNraWxsID8/IFtdLFxuICAgICAgICBvcHRpb25zXG4gICAgICApLFxuICAgICAgcG9zc2VzaW9uczogYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmV4dHJhY3RQb3NzZXNzaW9ucyhcbiAgICAgICAgZGhvbGVIb3VzZURhdGEuUG9zc2Vzc2lvbnM/Lml0ZW0gPz8gW10sXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGNEYXRhXG4gIH1cblxuICBzdGF0aWMgbWFrZVNraWxsTmFtZSAobmFtZSwgc3BlY2lhbGl6YXRpb24pIHtcbiAgICBpZiAoc3BlY2lhbGl6YXRpb24gPT09ICdOb25lJykge1xuICAgICAgc3BlY2lhbGl6YXRpb24gPSAnQW55J1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ0xhbmd1YWdlIChPdGhlciknIHx8IG5hbWUgPT09ICdMYW5ndWFnZSAoT3duKScpIHtcbiAgICAgIG5hbWUgPSAnTGFuZ3VhZ2UnXG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnT3BlcmF0ZSBIZWF2eSBNYWNoaW5lJykge1xuICAgICAgbmFtZSA9ICdPcGVyYXRlIEhlYXZ5IE1hY2hpbmVyeSdcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdUaHJvdycgJiYgc3BlY2lhbGl6YXRpb24gPT09ICcnKSB7XG4gICAgICBuYW1lID0gJ0ZpZ2h0aW5nJ1xuICAgICAgc3BlY2lhbGl6YXRpb24gPSAnVGhyb3cnXG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBza2lsbE5hbWU6IHNwZWNpYWxpemF0aW9uID09PSAnJyA/IG5hbWUgOiBzcGVjaWFsaXphdGlvbixcbiAgICAgIHNwZWNpYWxpemF0aW9uOiBzcGVjaWFsaXphdGlvbiA9PT0gJycgPyAnJyA6IG5hbWUsXG4gICAgICBuYW1lOiBuYW1lICsgKHNwZWNpYWxpemF0aW9uID09PSAnJyA/ICcnIDogJyAoJyArIHNwZWNpYWxpemF0aW9uICsgJyknKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBleHRyYWN0U2tpbGxzIChkaG9sZUhvdXNlc2tpbGxzLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgc2tpbGxzID0gW11cbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGRob2xlSG91c2Vza2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zdWJza2lsbCA9PT0gJ05vbmUnKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5tYWtlU2tpbGxOYW1lKFxuICAgICAgICBza2lsbC5uYW1lLFxuICAgICAgICBza2lsbC5zdWJza2lsbCA/PyAnJ1xuICAgICAgKVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBwYXJ0cy5uYW1lLCB7XG4gICAgICAgIHNvdXJjZTogb3B0aW9ucy5zb3VyY2UsXG4gICAgICAgIGZhbGxiYWNrQW55OiB0cnVlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nLnRvT2JqZWN0KCkpXG4gICAgICAgIGNsb25lZC5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgaWYgKGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lID8/IGZhbHNlKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnJlcXVpcmVzbmFtZSA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcz8ucGlja25hbWVvbmx5ID8/IGZhbHNlKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnBpY2tuYW1lb25seSA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsb25lZCA9IENvQ0FjdG9yLmVtcHR5U2tpbGwoXG4gICAgICAgICAgcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICAgIHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjpcbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb24gPT09ICcnID8gZmFsc2UgOiBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPSBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPz8ge31cbiAgICAgICAgaWYgKHBhcnRzLnNwZWNpYWxpemF0aW9uID09PSAnRmlnaHRpbmcnKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPSB0cnVlXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKHBhcnRzLnNwZWNpYWxpemF0aW9uID09PSAnRmlyZWFybXMnKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPSB0cnVlXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9IHRydWVcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucHVzaCA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAocGFydHMuc2tpbGxOYW1lID09PSAnRG9kZ2UnKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY2xvbmVkLnN5c3RlbS5za2lsbE5hbWUgPT09ICdBbnknKSB7XG4gICAgICAgIGNsb25lZC5uYW1lID0gY2xvbmVkLm5hbWUucmVwbGFjZSgnIChBbnkpJywgJyAoTm9uZSknKVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsTmFtZSA9ICdOb25lJ1xuICAgICAgfVxuICAgICAgY2xvbmVkLnN5c3RlbS5iYXNlID0gcGFyc2VJbnQoc2tpbGwudmFsdWUgPz8gMCwgMTApXG4gICAgICBjbG9uZWQuc3lzdGVtLnZhbHVlID0gcGFyc2VJbnQoc2tpbGwudmFsdWUgPz8gMCwgMTApXG4gICAgICBjbG9uZWQuc3lzdGVtLmZsYWdzID0gY2xvbmVkLnN5c3RlbS5mbGFncyA/PyB7fVxuICAgICAgY2xvbmVkLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uID1cbiAgICAgICAgc2tpbGwub2NjdXBhdGlvbiA9PT0gdHJ1ZSB8fCBza2lsbC5vY2N1cGF0aW9uID09PSAndHJ1ZSdcbiAgICAgIHNraWxscy5wdXNoKGNsb25lZClcbiAgICB9XG4gICAgcmV0dXJuIHNraWxsc1xuICB9XG5cbiAgc3RhdGljIGZpbmRXZWFwb25Ta2lsbElkIChza2lsbE5hbWUsIGNoYXJhY3Rlcikge1xuICAgIGNvbnN0IHNraWxscyA9IGNoYXJhY3Rlci5nZXRFbWJlZGRlZENvbGxlY3Rpb24oJ0l0ZW0nKVxuICAgIGNvbnN0IGNoZWNrTmFtZSA9IHNraWxsTmFtZS5yZXBsYWNlKC9eXFwoKC4rKVxcKSQvLCAnJDEnKVxuICAgIGNvbnN0IGNoYXJhY3RlclNraWxsID0gc2tpbGxzLmZpbmQoaSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBpLnN5c3RlbT8uc2tpbGxOYW1lID09PSBjaGVja05hbWUgfHxcbiAgICAgICAgaS5zeXN0ZW0/LnNraWxsTmFtZT8uaW5kZXhPZihjaGVja05hbWUpID4gLTFcbiAgICAgIClcbiAgICB9KVxuICAgIHJldHVybiBjaGFyYWN0ZXJTa2lsbFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGV4dHJhY3RQb3NzZXNzaW9ucyAoZGhvbGVob3VzZVBvc3Nlc3Npb25zLCBvcHRpb25zKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIGlmICghQXJyYXkuaXNBcnJheShkaG9sZWhvdXNlUG9zc2Vzc2lvbnMpICYmIGRob2xlaG91c2VQb3NzZXNzaW9ucyAhPSBudWxsKSB7XG4gICAgICBkaG9sZWhvdXNlUG9zc2Vzc2lvbnMgPSBbZGhvbGVob3VzZVBvc3Nlc3Npb25zXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGhvbGVob3VzZVBvc3Nlc3Npb25zKSB7XG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdpdGVtJywgaXRlbS5kZXNjcmlwdGlvbiwge1xuICAgICAgICBzb3VyY2U6IG9wdGlvbnMuc291cmNlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nLnRvT2JqZWN0KCkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9uZWQgPSB7XG4gICAgICAgICAgbmFtZTogaXRlbS5kZXNjcmlwdGlvbixcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChjbG9uZWQpXG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGV4dHJhY3RXZWFwb25zIChkaG9sZWhvdXNlV2VhcG9ucywgY2hhcmFjdGVyLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgd2VhcG9ucyA9IFtdXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRob2xlaG91c2VXZWFwb25zKSkge1xuICAgICAgZGhvbGVob3VzZVdlYXBvbnMgPSBbZGhvbGVob3VzZVdlYXBvbnNdXG4gICAgfVxuICAgIGZvciAoY29uc3Qgd2VhcG9uIG9mIGRob2xlaG91c2VXZWFwb25zKSB7XG4gICAgICBjb25zdCBza2lsbCA9IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5maW5kV2VhcG9uU2tpbGxJZChcbiAgICAgICAgd2VhcG9uLnNraWxsbmFtZSxcbiAgICAgICAgY2hhcmFjdGVyXG4gICAgICApXG4gICAgICBjb25zdCBkYW1hZ2UgPSB3ZWFwb24uZGFtYWdlLnJlcGxhY2UoL1xcK0RCL2ksICcnKVxuICAgICAgY29uc3QgYWRkYiA9IGRhbWFnZSAhPT0gd2VhcG9uLmRhbWFnZVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnd2VhcG9uJywgd2VhcG9uLm5hbWUsIHtcbiAgICAgICAgc291cmNlOiBvcHRpb25zLnNvdXJjZVxuICAgICAgfSlcbiAgICAgIGxldCBjbG9uZWQgPSBudWxsXG4gICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjbG9uZWQgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9IHNraWxsPy5uYW1lID8/ICcnXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHNraWxsPy5pZCA/PyAnJ1xuICAgICAgICBjbG9uZWQuc3lzdGVtLnJhbmdlID0gY2xvbmVkLnN5c3RlbS5yYW5nZSA/PyB7fVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnJhbmdlLm5vcm1hbCA9IGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSA9IGRhbWFnZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLmFtbW8gPSB3ZWFwb24uYW1tb1xuICAgICAgICBjbG9uZWQuc3lzdGVtLm1hbGZ1bmN0aW9uID0gd2VhcG9uLm1hbGZcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID0gY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSA9XG4gICAgICAgICAgc2tpbGw/LnN5c3RlbS5wcm9wZXJ0aWVzPy5maWdodGluZyA/PyBmYWxzZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucm5nZCA9XG4gICAgICAgICAgc2tpbGw/LnN5c3RlbS5wcm9wZXJ0aWVzPy5maXJlYXJtID8/IGZhbHNlXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5hZGRiID0gYWRkYlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xvbmVkID0ge1xuICAgICAgICAgIG5hbWU6IHdlYXBvbi5uYW1lLFxuICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgIHN5c3RlbToge1xuICAgICAgICAgICAgc2tpbGw6IHtcbiAgICAgICAgICAgICAgbWFpbjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNraWxsPy5uYW1lID8/ICcnLFxuICAgICAgICAgICAgICAgIGlkOiBza2lsbD8uaWQgPz8gJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICAgIG5vcm1hbDoge1xuICAgICAgICAgICAgICAgIGRhbWFnZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYW1tbzogd2VhcG9uLmFtbW8sXG4gICAgICAgICAgICBtYWxmdW5jdGlvbjogd2VhcG9uLm1hbGYsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIG1lbGVlOiBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nID8/IGZhbHNlLFxuICAgICAgICAgICAgICBybmdkOiBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0gPz8gZmFsc2UsXG4gICAgICAgICAgICAgIGFkZGJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdlYXBvbnMucHVzaChjbG9uZWQpXG4gICAgfVxuICAgIHJldHVybiB3ZWFwb25zXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2F2ZVBvcnRyYWl0IChiYXNlNjRQb3J0cmFpdCwgZmlsZU5hbWUpIHtcbiAgICBjb25zdCBiYXNlNjRSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgYmFzZTY0UG9ydHJhaXRcbiAgICApXG4gICAgY29uc3QgaW1hZ2VCbG9iID0gYXdhaXQgYmFzZTY0UmVzcG9uc2UuYmxvYigpXG4gICAgY29uc3QgZmlsZVBhdGggPSBDb0M3RGlyZWN0b3J5UGlja2VyLnVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeShcbiAgICAgIGltYWdlQmxvYixcbiAgICAgIGZpbGVOYW1lXG4gICAgKVxuICAgIHJldHVybiBmaWxlUGF0aFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIChkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSwgb3B0aW9ucykge1xuICAgIGlmICghZ2FtZS51c2VyPy5jYW4oJ0ZJTEVTX1VQTE9BRCcpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlclVwbG9hZEVycm9yJylcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID1cbiAgICAgIGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5jb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEoXG4gICAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDaGFyYWN0ZXIgRGF0YTonLCBjaGFyYWN0ZXJEYXRhKVxuICAgIH1cbiAgICBjb25zdCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPVxuICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5jcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMoKVxuICAgIGlmICghQ29DN0RpcmVjdG9yeVBpY2tlci5jcmVhdGVEZWZhdWx0RGlyZWN0b3J5KCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBhY3RvckRhdGEgPSB7XG4gICAgICBuYW1lOiBjaGFyYWN0ZXJEYXRhLm5hbWUsXG4gICAgICB0eXBlOiAnY2hhcmFjdGVyJyxcbiAgICAgIGZvbGRlcjogaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyLmlkLFxuICAgICAgc3lzdGVtOiBjaGFyYWN0ZXJEYXRhLmFjdG9yXG4gICAgfVxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IEFjdG9yLmNyZWF0ZShhY3RvckRhdGEpXG4gICAgLy8gSWYgcG9zc2libGUgdXBsb2FkIHRoZSBpbWFnZSBwb3J0cmFpdFxuICAgIGlmIChcbiAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLkludmVzdGlnYXRvci5QZXJzb25hbERldGFpbHMuUG9ydHJhaXQ/Lmxlbmd0aCA+IDEwXG4gICAgKSB7XG4gICAgICBjb25zdCBmaWxlTmFtZSA9ICdhdmF0YXItJyArIG5wYy5pZCArICcucG5nJ1xuICAgICAgY29uc3QgcG9ydHJhaXQgPSBhd2FpdCBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuc2F2ZVBvcnRyYWl0KFxuICAgICAgICBkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YS5JbnZlc3RpZ2F0b3IuUGVyc29uYWxEZXRhaWxzLlBvcnRyYWl0LFxuICAgICAgICBmaWxlTmFtZVxuICAgICAgKVxuICAgICAgaWYgKHBvcnRyYWl0ICE9PSBmYWxzZSkge1xuICAgICAgICBucGMudXBkYXRlKHtcbiAgICAgICAgICBpbWc6IHBvcnRyYWl0XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmxvZygnSXRlbXM6ICcsIGNoYXJhY3RlckRhdGEuaXRlbXMpXG4gICAgfVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEuc2tpbGxzLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEucG9zc2VzaW9ucywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgICBjb25zdCB3ZWFwb25zID0gYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmV4dHJhY3RXZWFwb25zKFxuICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEuSW52ZXN0aWdhdG9yLldlYXBvbnM/LndlYXBvbiA/PyBbXSxcbiAgICAgIG5wYyxcbiAgICAgIG9wdGlvbnNcbiAgICApXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdXZWFwb25zOiAnLCB3ZWFwb25zKVxuICAgIH1cbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCB3ZWFwb25zLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuXG4gICAgcmV0dXJuIG5wY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIEhvb2tzLCB1aSwgRmlsZVJlYWRlciAqL1xuXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlciB9IGZyb20gJy4vYWN0b3ItaW1wb3J0ZXIuanMnXG5pbXBvcnQgeyBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIgfSBmcm9tICcuL2Rob2xlaG91c2VfaW1wb3J0ZXIuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB9IGZyb20gJy4vYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyRGlhbG9nIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdhY3Rvci1pbXBvcnRlciddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyJyksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9hY3Rvci1pbXBvcnRlci5odG1sJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgd2lkdGg6IDYwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgfSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgZGF0YS5pbXBvcnRUeXBlID0gZGF0YS5vYmplY3QuaW1wb3J0VHlwZVxuICAgIGRhdGEuY29udmVydDZFID0gZGF0YS5vYmplY3QuY29udmVydDZFXG4gICAgZGF0YS5zb3VyY2UgPSBkYXRhLm9iamVjdC5zb3VyY2VcbiAgICBkYXRhLmNoYXJhY3RlckRhdGEgPSBkYXRhLm9iamVjdC5jaGFyYWN0ZXJEYXRhXG4gICAgZGF0YS5jYW5VcGxvYWQgPSBnYW1lLnVzZXI/LmNhbignRklMRVNfVVBMT0FEJylcbiAgICBpZiAoWyducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhkYXRhLmltcG9ydFR5cGUpKSB7XG4gICAgICBkYXRhLmxhbmd1YWdlcyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldFRyYW5zbGF0aW9ucygpXG4gICAgICBkYXRhLmxhbmd1YWdlID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuY2hlY2tMYW5ndWFnZShcbiAgICAgICAgZGF0YS5vYmplY3QubGFuZ3VhZ2VcbiAgICAgIClcbiAgICAgIGRhdGEucGxhY2Vob2xkZXIgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRFeGFtcGxlVGV4dChkYXRhLmxhbmd1YWdlKVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLmZpbmQoJyNkaG9sZWhvdXNlLWNoYXJhY3Rlci1wcmV2aWV3JykuaGlkZSgpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJyNjb2MtZW50aXR5LXR5cGUsI2NvYy1lbnRpdHktbGFuZycpXG4gICAgICAuY2hhbmdlKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJyNkaG9sZWhvdXNlLWpzb24tZmlsZS1waWNrZXInKVxuICAgICAgLmNoYW5nZSh0aGlzLl9vbkpTT05GaWxlU2VsZWN0ZWQuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpXG4gICAgICAub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyc1Rvb0V4dGVuZGVkID0gJCh0aGlzKVxuICAgICAgICAgIC52YWwoKVxuICAgICAgICAgIC5tYXRjaCgvW1xcdWRiYzAtXFx1ZGJmZV1bXFx1ZGMwMC1cXHVkZmZmXS8pXG4gICAgICAgIGNvbnN0IHByb21wdCA9ICQoJyNjb2MtcHJvbXB0JylcbiAgICAgICAgaWYgKHByb21wdC5kYXRhKCdleHRlbmRlZCcpICYmIGNoYXJhY3RlcnNUb29FeHRlbmRlZCkge1xuICAgICAgICAgIHByb21wdFxuICAgICAgICAgICAgLmh0bWwoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRleHRGaWVsZEludmFsaWRDaGFyYWN0ZXJzJykpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2Vycm9yJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9tcHQuaHRtbChwcm9tcHQuZGF0YSgndGV4dCcpKS5yZW1vdmVDbGFzcygnZXJyb3InKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRyaWdnZXIoJ2tleXVwJylcblxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdC1idXR0b24nKS5jbGljayh0aGlzLl9vbkNsaWNrU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdmb3JtJykuc3VibWl0KGUgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcmV0dXJucyBnZXRJbnB1dHMgZXh0cmFjdHMgdGhlIGRhdGEgZnJvbSB0aGUgaW5wdXQgZmllbGRzIGFuZFxuICAgKiBhZGRzIGEgYC5gIGF0IHRoZSBlbmQgaWYgaXQncyBub3QgYWxyZWFkeSB0aGVyZS5cbiAgICovXG4gIHN0YXRpYyBnZXRJbnB1dHMgKGZvcm0pIHtcbiAgICBjb25zdCBpbnB1dHMgPSB7fVxuICAgIGlucHV0cy5lbnRpdHkgPSBmb3JtLmZpbmQoJyNjb2MtZW50aXR5LXR5cGUnKS52YWwoKS50cmltKClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnZW50aXR5IHR5cGU6JywgaW5wdXRzLmVudGl0eSlcbiAgICB9XG4gICAgaWYgKGZvcm0uZmluZCgnI2NvYy1jb252ZXJ0LTZFJykubGVuZ3RoID4gMCkge1xuICAgICAgaW5wdXRzLmNvbnZlcnRGcm9tNkUgPSBmb3JtLmZpbmQoJyNjb2MtY29udmVydC02RScpLnZhbCgpLnRyaW0oKVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjY29jLWVudGl0eS1sYW5nJykubGVuZ3RoID4gMCkge1xuICAgICAgaW5wdXRzLmxhbmcgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKFxuICAgICAgICBmb3JtLmZpbmQoJyNjb2MtZW50aXR5LWxhbmcnKS52YWwoKS50cmltKClcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGZvcm0uZmluZCgnI3NvdXJjZScpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlucHV0cy5zb3VyY2UgPSBmb3JtLmZpbmQoJyNzb3VyY2UnKS52YWwoKS50cmltKClcbiAgICB9XG4gICAgaWYgKGZvcm0uZmluZCgnI2NvYy1wYXN0ZWQtY2hhcmFjdGVyLWRhdGEnKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dHMudGV4dCA9IGZvcm0uZmluZCgnI2NvYy1wYXN0ZWQtY2hhcmFjdGVyLWRhdGEnKS52YWwoKS50cmltKClcbiAgICB9XG5cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygncmVjZWl2ZWQgdGV4dCcsICcjIycgKyBpbnB1dHMudGV4dCArICcjIycpXG4gICAgfVxuICAgIHJldHVybiBpbnB1dHNcbiAgfVxuXG4gIF9vbkpTT05GaWxlU2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgY29uc3QganNvbkZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaG9sZWhvdXNlLWpzb24tZmlsZS1waWNrZXInKVxuICAgIGNvbnN0IHBvcnRyYWl0SW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICdkaG9sZWhvdXNlLWNoYXJhY3Rlci1wb3J0cmFpdCdcbiAgICApXG4gICAgY29uc3QgY2hhcmFjdGVyTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaG9sZWhvdXNlLWNoYXJhY3Rlci1uYW1lJylcbiAgICBjb25zdCBwcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rob2xlaG91c2UtY2hhcmFjdGVyLXByZXZpZXcnKVxuICAgIGNvbnN0IGZpbGUgPSBqc29uRmlsZUlucHV0LmZpbGVzWzBdXG4gICAgY29uc3QgZGlhbG9nID0gdGhpc1xuICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGlhbG9nLmNoYXJhY3RlckpTT04gPSBKU09OLnBhcnNlKGZpbGVSZWFkZXIucmVzdWx0KVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAkKCcjY29jLXByb21wdCcpXG4gICAgICAgICAgLmh0bWwoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRleHRGaWVsZEludmFsaWRKU09OJykpXG4gICAgICAgICAgLmFkZENsYXNzKCdlcnJvcicpXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBwZXJzb25hbERldGFpbHMgPVxuICAgICAgICBkaWFsb2cuY2hhcmFjdGVySlNPTj8uSW52ZXN0aWdhdG9yPy5QZXJzb25hbERldGFpbHNcbiAgICAgIGlmICghcGVyc29uYWxEZXRhaWxzKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRob2xlSG91c2VJbnZhbGlkQWN0b3InKVxuICAgICAgICApXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY2hhcmFjdGVyTmFtZS50ZXh0Q29udGVudCA9IHBlcnNvbmFsRGV0YWlscy5OYW1lXG4gICAgICBwb3J0cmFpdEltYWdlLnNyYyA9ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsJyArIHBlcnNvbmFsRGV0YWlscy5Qb3J0cmFpdFxuICAgICAgcHJldmlldy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgJCgnLmRpYWxvZy5hY3Rvci1pbXBvcnRlcicpLmhlaWdodCgnYXV0bycpXG4gICAgfVxuICAgIGZpbGVSZWFkZXIucmVhZEFzVGV4dChmaWxlKVxuICB9XG5cbiAgX29uQ2hhbmdlU3VibWl0IChldmVudCkge1xuICAgIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tTdWJtaXQgKGV2ZW50KSB7XG4gICAgY29uc3QgaWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYnV0dG9uXG4gICAgaWYgKGlkID09PSAnbm8nKSB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9IGVsc2UgaWYgKGlkID09PSAnZ2V0RXhhbXBsZU5vdycpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRFeGFtcGxlVGV4dChcbiAgICAgICAgdGhpcy5vYmplY3QubGFuZ3VhZ2VcbiAgICAgIClcbiAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKGNvbnRlbnQpLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5pbmZvKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db3BpZWQnKSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChpZCA9PT0gJ2ltcG9ydCcpIHtcbiAgICAgIGNvbnN0IGFwcCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnZGl2LmRpYWxvZy5hY3Rvci1pbXBvcnRlcicpXG4gICAgICBhcHAuaGlkZSgpXG4gICAgICBjb25zdCBmb3JtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCdmb3JtJylcbiAgICAgIGNvbnN0IGlucHV0cyA9IENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmdldElucHV0cyhmb3JtKVxuICAgICAgaWYgKGlucHV0cy5lbnRpdHkgPT09ICdkaG9sZWhvdXNlJyAmJiB0aGlzLmNoYXJhY3RlckpTT04pIHtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyID1cbiAgICAgICAgICBhd2FpdCBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuY3JlYXRlTlBDRnJvbURob2xlSG91c2UoXG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlckpTT04sXG4gICAgICAgICAgICB7IHNvdXJjZTogaW5wdXRzLnNvdXJjZSB9XG4gICAgICAgICAgKVxuICAgICAgICBpZiAoY2hhcmFjdGVyICE9PSBmYWxzZSkge1xuICAgICAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdjaGFyYWN0ZXI6JywgY2hhcmFjdGVyKVxuICAgICAgICAgIH1cbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFjdG9ySW1wb3J0ZWQnLCB7XG4gICAgICAgICAgICAgIGFjdG9yVHlwZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLkNoYXJhY3RlcicpLFxuICAgICAgICAgICAgICBhY3Rvck5hbWU6IGNoYXJhY3Rlci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCBjaGFyYWN0ZXIuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXBwLnNob3coKVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlucHV0cy50ZXh0ICYmIGlucHV0cy50ZXh0ICE9PSAnJykge1xuICAgICAgICBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5pbXBvcnRBY3RvcihpbnB1dHMpXG4gICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBwLnNob3coKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGVcbiAgICogQSBzdWJjbGFzcyBvZiB0aGUgRm9ybUFwcGxpY2F0aW9uIG11c3QgaW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZC5cbiAgICovXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIHRoaXMub2JqZWN0LmltcG9ydFR5cGUgPSBmb3JtRGF0YVsnY29jLWVudGl0eS10eXBlJ11cbiAgICB0aGlzLm9iamVjdC5jaGFyYWN0ZXJEYXRhID0gZm9ybURhdGFbJ2NvYy1wYXN0ZWQtY2hhcmFjdGVyLWRhdGEnXT8udHJpbSgpXG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnY29jLWNvbnZlcnQtNkUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmNvbnZlcnQ2RSA9IGZvcm1EYXRhWydjb2MtY29udmVydC02RSddXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1lbnRpdHktbGFuZyddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3QubGFuZ3VhZ2UgPSBmb3JtRGF0YVsnY29jLWVudGl0eS1sYW5nJ11cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YS5zb3VyY2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5zb3VyY2UgPSBmb3JtRGF0YS5zb3VyY2VcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBpbXBvcnRBY3RvciBpbXBvcnRzIGFuIEFjdG9yIHVzaW5nIHRoZSBkaWFsb2cgZGF0YVxuICAgKiBAcGFyYW0ge2h0bWx9IGh0bWxcbiAgICovXG4gIHN0YXRpYyBhc3luYyBpbXBvcnRBY3RvciAoaW5wdXRzKSB7XG4gICAgaWYgKGlucHV0cy50ZXh0W2lucHV0cy50ZXh0Lmxlbmd0aF0gIT09ICcuJykge1xuICAgICAgaW5wdXRzLnRleHQgKz0gJy4nIC8vIEFkZCBhIGRvdCBhIHRoZSBlbmQgdG8gaGVscCB0aGUgcmVnZXggZmluZCB0aGUgZW5kXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yID0gbmV3IENvQzdBY3RvckltcG9ydGVyKClcbiAgICBjb25zdCBjcmVhdGVkQWN0b3IgPSBhd2FpdCBhY3Rvci5jcmVhdGVBY3RvcihpbnB1dHMpXG4gICAgLy8gQWN0b3IgY3JlYXRlZCwgTm90aWZ5IHRoZSB1c2VyIGFuZCBzaG93IHRoZSBzaGVldC5cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnY3JlYXRlZEFjdG9yOicsIGNyZWF0ZWRBY3RvcilcbiAgICB9XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BY3RvckltcG9ydGVkJywge1xuICAgICAgICBhY3RvclR5cGU6IGNyZWF0ZWRBY3Rvci50eXBlPy50b1VwcGVyQ2FzZSgpLFxuICAgICAgICBhY3Rvck5hbWU6IGNyZWF0ZWRBY3Rvci5uYW1lXG4gICAgICB9KVxuICAgIClcbiAgICBhd2FpdCBjcmVhdGVkQWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgLy8gY29uc3QgdXBkYXRlZCA9IGF3YWl0IFVwZGF0ZXIudXBkYXRlQWN0b3IobnBjKVxuICAgIC8vIGNvbnNvbGUuZGVidWcoJ3VwZGF0ZWQ6JywgdXBkYXRlZClcbiAgfVxuXG4gIC8vIC8qKlxuICAvLyAgKiBjcmVhdGUgaXQncyB0aGUgZGVmYXVsdCB3ZWIgdG8gY3JhdGUgdGhlIENvQzdBY3RvckltcG9ydGVyRGlhbG9nXG4gIC8vICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICBvcHRpb25zLmltcG9ydFR5cGUgPSBvcHRpb25zLmltcG9ydFR5cGUgPz8gJ25wYydcbiAgICBvcHRpb25zLmxhbmd1YWdlID1cbiAgICAgIG9wdGlvbnMubGFuZ3VhZ2UgPz8gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuY2hlY2tMYW5ndWFnZShudWxsKVxuICAgIG9wdGlvbnMuY29udmVydDZFID0gb3B0aW9ucy5sYW5ndWFnZSA/PyAnY29jLWd1ZXNzJ1xuICAgIG9wdGlvbnMuc291cmNlID0gb3B0aW9ucy5zb3VyY2UgPz8gJ2l3bXMnXG4gICAgb3B0aW9ucy5jaGFyYWN0ZXJEYXRhID0gb3B0aW9ucy5jaGFyYWN0ZXJEYXRhID8/ICcnXG5cbiAgICBuZXcgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cob3B0aW9ucykucmVuZGVyKHRydWUpXG4gIH1cbn1cblxuSG9va3Mub25jZSgncmVhZHknLCAoKSA9PiB7XG4gIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdDb0M3LUltcG9ydGVyLVRlc3RzJyk/LmFjdGl2ZSkge1xuICAgIHdpbmRvdy5Db0M3QWN0b3JJbXBvcnRlciA9IENvQzdBY3RvckltcG9ydGVyXG4gIH1cbn0pXG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBmb3VuZHJ5LCBnYW1lICovXG5leHBvcnQgY2xhc3MgRHJvcENvQ0lEIGV4dGVuZHMgRGlhbG9nIHtcbiAgc3RhdGljIHByb2Nlc3NGb3JtIChyZXNwb25zZSwgZWxlbWVudCwgcmVzb2x2ZSkge1xuICAgIGlmIChlbGVtZW50LmZpbmQoJ2lucHV0JykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ2Ryb3BDb0NJRCcsIChyZXNwb25zZSA/ICdZJyA6ICdOJykpXG4gICAgfVxuICAgIHJlc29sdmUocmVzcG9uc2UpXG4gIH1cblxuICBzdGF0aWMgcHJvY2Vzc0l0ZW0gKHJlc3BvbnNlLCBpdGVtKSB7XG4gICAgaWYgKHJlc3BvbnNlICYmIGl0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQpIHtcbiAgICAgIHJldHVybiBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXG4gICAgfVxuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShpdGVtKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoKSB7XG4gICAgY29uc3QgZHJvcENvQ0lEID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZHJvcENvQ0lEJylcbiAgICBzd2l0Y2ggKGRyb3BDb0NJRCkge1xuICAgICAgY2FzZSAnJzpcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgIGNvbnN0IGRsZyA9IG5ldyBEcm9wQ29DSUQoe1xuICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELk5hbWUnKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6ICc8cD4nICsgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuRGlhbG9nJykgKyAnPC9wPjxwPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cInJlbWVtYmVydGhpc1wiIHN0eWxlPVwidmVydGljYWwtYWxpZ246IHN1YjtcIj48bGFiZWwgZm9yPVwicmVtZW1iZXJ0aGlzXCI+JyArIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELlJlbWVtYmVyJykgKyAnPC9sYWJlbD48L3A+JyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdhcHAnLCAnZGlhbG9nJ10sXG4gICAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICAgIHllczoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1llcycpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoZWxlbWVudCkgPT4geyBEcm9wQ29DSUQucHJvY2Vzc0Zvcm0odHJ1ZSwgZWxlbWVudCwgcmVzb2x2ZSkgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBubzoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ05vJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IChlbGVtZW50KSA9PiB7IERyb3BDb0NJRC5wcm9jZXNzRm9ybShmYWxzZSwgZWxlbWVudCwgcmVzb2x2ZSkgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgICAgIH0pXG4gICAgICBjYXNlICdZJzpcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIGNhc2UgJ04nOlxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEcmFnRHJvcCwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBEcm9wQ29DSUQgfSBmcm9tICcuLi8uLi9hcHBzL2Ryb3AtY29jLWlkLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3T2NjdXBhdGlvblNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbSAuaXRlbS1uYW1lIGg0JylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1TdW1tYXJ5KGV2ZW50LCAnc2tpbGxzJykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLWRlbGV0ZScpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnc2tpbGxzJykpXG5cbiAgICBodG1sLmZpbmQoJy5ncm91cC1pdGVtLWRlbGV0ZScpLmNsaWNrKHRoaXMuX29uR3JvdXBJdGVtRGVsZXRlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZ3JvdXAtY29udHJvbCcpLmNsaWNrKHRoaXMuX29uR3JvdXBDb250cm9sLmJpbmQodGhpcykpXG5cbiAgICBjb25zdCBkcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcm9wU2VsZWN0b3I6ICcuZHJvcHBhYmxlJyxcbiAgICAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkRyb3AuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBkcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCwgdHlwZSA9ICdza2lsbCcsIGNvbGxlY3Rpb25OYW1lID0gJ3NraWxscycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IG9wdGlvbmFsU2tpbGwgPSBldmVudD8uY3VycmVudFRhcmdldD8uY2xhc3NMaXN0Py5jb250YWlucygnb3B0aW9uYWwtc2tpbGxzJylcbiAgICBjb25zdCBvbCA9IGV2ZW50Py5jdXJyZW50VGFyZ2V0Py5jbG9zZXN0KCdvbCcpXG4gICAgY29uc3QgaW5kZXggPSBvbD8uZGF0YXNldD8uZ3JvdXBcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuXG4gICAgbGV0IHVzZUNvQ0lEID0gMFxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgY29uc3QgZ3JvdXBzID0gdGhpcy5pdGVtLnN5c3RlbS5ncm91cHMgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmdyb3VwcykgOiBbXVxuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uc3lzdGVtKSBjb250aW51ZVxuICAgICAgaWYgKCFbdHlwZV0uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9uYWxTa2lsbCkge1xuICAgICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICAgIC8vIEdlbmVyaWMgc3BlY2lhbGl6YXRpb24gY2FuIGJlIGluY2x1ZGVkIG1hbnkgdGltZXNcbiAgICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlIC8vIElmIHNraWxsIGlzIGFscmVhZHkgaW4gbWFpbiBkb24ndCBhZGQgaXRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGdyb3Vwc1tpbmRleF0uc2tpbGxzLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWUgLy8gSWYgc2tpbGwgaXMgYWxyZWFkeSBpbiBncm91cCBkb24ndCBhZGQgaXRcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlQ29DSUQgPT09IDApIHtcbiAgICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgICB9XG4gICAgICAgIGdyb3Vwc1tpbmRleF0uc2tpbGxzID0gZ3JvdXBzW2luZGV4XS5za2lsbHMuY29uY2F0KFtEcm9wQ29DSUQucHJvY2Vzc0l0ZW0odXNlQ29DSUQsIGl0ZW0pXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgICAgLy8gR2VuZXJpYyBzcGVjaWFsaXphdGlvbiBjYW4gYmUgaW5jbHVkZWQgbWFueSB0aW1lc1xuICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHNhbWUgc2tpbGwgaXMgaW4gb25lIG9mIHRoZSBncm91cCByZW1vdmUgaXQgZnJvbSB0aGUgZ3JvdXBzXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGdyb3Vwc1tpXS5za2lsbHMuZmluZEluZGV4KFxuICAgICAgICAgICAgICBlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgZ3JvdXBzW2ldLnNraWxscy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VDb0NJRCA9PT0gMCkge1xuICAgICAgICAgIHVzZUNvQ0lEID0gYXdhaXQgRHJvcENvQ0lELmNyZWF0ZSgpXG4gICAgICAgIH1cbiAgICAgICAgY29sbGVjdGlvbi5wdXNoKERyb3BDb0NJRC5wcm9jZXNzSXRlbSh1c2VDb0NJRCwgaXRlbSkpXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmdyb3Vwcyc6IGdyb3VwcyB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBfb25Hcm91cENvbnRyb2wgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICAvLyBBZGQgbmV3IGRhbWFnZSBjb21wb25lbnRcbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2FkZC1ncm91cCcpKSB7XG4gICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCkgLy8gU3VibWl0IGFueSB1bnNhdmVkIGNoYW5nZXNcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMuY29uY2F0KFt7IG9wdGlvbnM6IDAsIHNraWxsczogW10gfV0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygncmVtb3ZlLWdyb3VwJykpIHtcbiAgICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KSAvLyBTdWJtaXQgYW55IHVuc2F2ZWQgY2hhbmdlc1xuICAgICAgY29uc3QgZ3JvdXBzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5ncm91cHMpXG4gICAgICBjb25zdCBvbCA9IGEuY2xvc2VzdCgnLml0ZW0tbGlzdC5ncm91cCcpXG4gICAgICBncm91cHMuc3BsaWNlKE51bWJlcihvbC5kYXRhc2V0Lmdyb3VwKSwgMSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmdyb3Vwcyc6IGdyb3VwcyB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1TdW1tYXJ5IChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9iaiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBsaSA9IG9iai5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgZ3JvdXAgPSBvYmouY2xvc2VzdCgnLmdyb3VwJylcbiAgICBsZXQgaXRlbVxuICAgIGlmIChncm91cC5sZW5ndGgpIHtcbiAgICAgIGl0ZW0gPSB0aGlzLml0ZW0uc3lzdGVtLmdyb3Vwc1tncm91cC5kYXRhKCdncm91cCcpXVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZW0gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2hhdERhdGEgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHRoaXMuaXRlbS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJChgPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPiR7Y2hhdERhdGF9PC9kaXY+YClcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICAvLyBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykgeyBwcm9wcy5hcHBlbmQoYDxzcGFuIGNsYXNzPVwidGFnXCI+JHtwfTwvc3Bhbj5gKSB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUlkID0gaXRlbS5kYXRhKCdpdGVtLWlkJylcbiAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChpID0+IChpdGVtSWQgJiYgaS5faWQgPT09IGl0ZW1JZCkgfHwgKENvQ0lkICYmIGkgPT09IENvQ0lkKSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgICBjb2xsZWN0aW9uLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkdyb3VwSXRlbURlbGV0ZSAoZXZlbnQpIHtcbiAgICBjb25zdCBpdGVtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgZ3JvdXAgPSBOdW1iZXIoaXRlbS5jbG9zZXN0KCcuaXRlbS1saXN0Lmdyb3VwJykuZGF0YSgnZ3JvdXAnKSlcbiAgICBjb25zdCBncm91cHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmdyb3VwcylcbiAgICBpZiAodHlwZW9mIGdyb3Vwc1tncm91cF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBpdGVtSWQgPSBpdGVtLmRhdGEoJ2l0ZW0taWQnKVxuICAgICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICAgIGNvbnN0IGl0ZW1JbmRleCA9IGdyb3Vwc1tncm91cF0uc2tpbGxzLmZpbmRJbmRleChpID0+IChpdGVtSWQgJiYgaS5faWQgPT09IGl0ZW1JZCkgfHwgKENvQ0lkICYmIGkgPT09IENvQ0lkKSlcbiAgICAgIGlmIChpdGVtSW5kZXggPiAtMSkge1xuICAgICAgICBncm91cHNbZ3JvdXBdLnNraWxscy5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ29jY3VwYXRpb24nXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9vY2N1cGF0aW9uLmh0bWwnLFxuICAgICAgd2lkdGg6IDUyNSxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJyB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcblxuICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMgfSlcblxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBsZW4gPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXggPCBsZW47IGluZGV4KyspIHtcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzIH0pXG5cbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLmlzRW1wdHkgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEub2NjdXBhdGlvblBvaW50c1N0cmluZyA9IENvQzdPY2N1cGF0aW9uU2hlZXQub2NjdXBhdGlvblBvaW50c1N0cmluZyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKENPQzcub2NjdXBhdGlvblByb3BlcnRpZXNba2V5XSA/IENPQzcub2NjdXBhdGlvblByb3BlcnRpZXNba2V5XSA6IG51bGwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgc3RhdGljIG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKG9jY3VwYXRpb25Ta2lsbFBvaW50cykge1xuICAgIGNvbnN0IG9wdGlvbm5hbCA9IFtdXG4gICAgY29uc3QgbWFuZGF0b3J5ID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIGNhcmFjXSBvZiBPYmplY3QuZW50cmllcyhvY2N1cGF0aW9uU2tpbGxQb2ludHMpKSB7XG4gICAgICBpZiAoY2FyYWMubXVsdGlwbGllcikge1xuICAgICAgICBjb25zdCBjYXJhY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENIQVJBQy4ke2tleS50b1VwcGVyQ2FzZSgpfWApXG4gICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCAmJiBjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgIG9wdGlvbm5hbC5wdXNoKGAke2NhcmFjTmFtZX14JHtjYXJhYy5tdWx0aXBsaWVyfWApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkICYmICFjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgIG1hbmRhdG9yeS5wdXNoKGAke2NhcmFjTmFtZX14JHtjYXJhYy5tdWx0aXBsaWVyfWApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgPSAnJ1xuICAgIGNvbnN0IG9yU3RyaW5nID0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpfSBgXG4gICAgaWYgKG1hbmRhdG9yeS5sZW5ndGgpIG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gbWFuZGF0b3J5LmpvaW4oJyArICcpXG4gICAgaWYgKG9wdGlvbm5hbC5sZW5ndGggJiYgbWFuZGF0b3J5Lmxlbmd0aCkge1xuICAgICAgb2NjdXBhdGlvblBvaW50c1N0cmluZyArPSBgICsgKCR7b3B0aW9ubmFsLmpvaW4ob3JTdHJpbmcpfSlgXG4gICAgfVxuICAgIGlmIChvcHRpb25uYWwubGVuZ3RoICYmICFtYW5kYXRvcnkubGVuZ3RoKSB7XG4gICAgICBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IG9wdGlvbm5hbC5qb2luKG9yU3RyaW5nKVxuICAgIH1cbiAgICByZXR1cm4gb2NjdXBhdGlvblBvaW50c1N0cmluZ1xuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmdyb3Vwcykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgIHN5c3RlbS5ncm91cHMgfHwgW11cbiAgICAgIClcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW0uc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgZm9ybURhdGFbYHN5c3RlbS5ncm91cHMuJHtpbmRleH0uc2tpbGxzYF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEFjdG9yLCBDaGF0TWVzc2FnZSwgQ09OU1QsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSwgSG9va3MsIHJlbmRlclRlbXBsYXRlLCBSb2xsLCBUZXh0RWRpdG9yLCB1aSAqL1xuaW1wb3J0IHsgQXZlcmFnZVJvbGwgfSBmcm9tICcuLi9hcHBzL2F2ZXJhZ2Utcm9sbC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdPY2N1cGF0aW9uU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QtZGlhbG9nLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0ludmVzdGlnYXRvcldpemFyZCBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBpZDogJ2ludmVzdGlnYXRvci13aXphcmQtYXBwbGljYXRpb24nLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdpbnZlc3RpZ2F0b3Itd2l6YXJkJ10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5UaXRsZScpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5oYnMnLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNjAwLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICBzY3JvbGxZOiBbJy5zY3JvbGxzZWN0aW9uJ10sXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLmRyYWdnYWJsZScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XVxuICAgIH0pXG4gIH1cblxuICBnZXQgcGFnZUxpc3QgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBQQUdFX05PTkU6IC0xLFxuICAgICAgUEFHRV9JTlRST0RVQ1RJT046IDAsXG4gICAgICBQQUdFX0NPTkZJR1VSQVRJT046IDEsXG4gICAgICBQQUdFX1NFVFVQUzogMixcbiAgICAgIFBBR0VfQVJDSEVUWVBFUzogMyxcbiAgICAgIFBBR0VfQ0hBUkFDVElTVElDUzogNCxcbiAgICAgIFBBR0VfQVRUUklCVVRFUzogNSxcbiAgICAgIFBBR0VfVklFV19BVFRSSUJVVEVTOiA2LFxuICAgICAgUEFHRV9PQ0NVUEFUSU9OUzogNyxcbiAgICAgIFBBR0VfT0NDVVBBVElPTl9TS0lMTFM6IDgsXG4gICAgICBQQUdFX0FSQ0hFVFlQRV9TS0lMTFM6IDksXG4gICAgICBQQUdFX1BPSU5UU19TS0lMTFM6IDEwLFxuICAgICAgUEFHRV9JTlZFU1RJR0FUT1I6IDExLFxuICAgICAgUEFHRV9CQUNLU1RPUlk6IDEyLFxuICAgICAgUEFHRV9DUkVBVEU6IDEzXG4gICAgfVxuICB9XG5cbiAgZ2V0IGNoYXJhY3RlcmlzdGljc01ldGhvZHMgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBNRVRIT0RfREVGQVVMVDogMSxcbiAgICAgIE1FVEhPRF9ST0xMOiAxLFxuICAgICAgTUVUSE9EX1BPSU5UUzogMixcbiAgICAgIE1FVEhPRF9WQUxVRVM6IDMsXG4gICAgICBNRVRIT0RfQ0hPT1NFOiA0XG4gICAgfVxuICB9XG5cbiAgZ2V0IGNvY2lkQ3JlZGl0UmF0aW5nICgpIHtcbiAgICByZXR1cm4gJ2kuc2tpbGwuY3JlZGl0LXJhdGluZydcbiAgfVxuXG4gIGdldCBjb2NpZExhbmd1YWdlT3duICgpIHtcbiAgICByZXR1cm4gJ2kuc2tpbGwubGFuZ3VhZ2Utb3duJ1xuICB9XG5cbiAgZ2V0IHBhZ2VPcmRlciAoKSB7XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLnBhZ2VMaXN0XG4gICAgbGV0IHBhZ2VPcmRlciA9IFtcbiAgICAgIHBhZ2VzLlBBR0VfSU5UUk9EVUNUSU9OXG4gICAgXVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9DT05GSUdVUkFUSU9OKVxuICAgIH1cbiAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFNldHVwID09PSAnJykge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9TRVRVUFMpXG4gICAgfVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0FSQ0hFVFlQRVMpXG4gICAgfVxuICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQ0hBUkFDVElTVElDUylcbiAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJykpIHtcbiAgICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQVRUUklCVVRFUylcbiAgICB9XG4gICAgcGFnZU9yZGVyID0gcGFnZU9yZGVyLmNvbmNhdChbXG4gICAgICBwYWdlcy5QQUdFX1ZJRVdfQVRUUklCVVRFUyxcbiAgICAgIHBhZ2VzLlBBR0VfT0NDVVBBVElPTlMsXG4gICAgICBwYWdlcy5QQUdFX09DQ1VQQVRJT05fU0tJTExTXG4gICAgXSlcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKSkge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9BUkNIRVRZUEVfU0tJTExTKVxuICAgIH1cbiAgICBwYWdlT3JkZXIgPSBwYWdlT3JkZXIuY29uY2F0KFtcbiAgICAgIHBhZ2VzLlBBR0VfUE9JTlRTX1NLSUxMUyxcbiAgICAgIHBhZ2VzLlBBR0VfSU5WRVNUSUdBVE9SLFxuICAgICAgcGFnZXMuUEFHRV9CQUNLU1RPUlksXG4gICAgICBwYWdlcy5QQUdFX0NSRUFURVxuICAgIF0pXG4gICAgcmV0dXJuIHBhZ2VPcmRlclxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGxvYWRDYWNoZUl0ZW1CeUNvQ0lEICgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiAvXmlcXC4vLCB0eXBlOiAnaScsIHNob3dMb2FkaW5nOiB0cnVlIH0pLnRoZW4oKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICBsaXN0W2l0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRdID0gaXRlbVxuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUobGlzdClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGZpbHRlckNhY2hlSXRlbUJ5Q29DSUQgKHJlZ2V4cCkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhhd2FpdCB0aGlzLm9iamVjdC5jYWNoZUNvQ0lEKS5maWx0ZXIoZW50cnkgPT4gZW50cnlbMF0ubWF0Y2gocmVnZXhwKSkubWFwKGVudHJ5ID0+IGVudHJ5WzFdKVxuICB9XG5cbiAgYXN5bmMgZ2V0Q2FjaGVJdGVtQnlDb0NJRCAoaWQpIHtcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMub2JqZWN0LmNhY2hlQ29DSUQpW2lkXSA/PyBmYWxzZVxuICB9XG5cbiAgYXN5bmMgZXhwYW5kSXRlbUFycmF5IChpdGVtTGlzdCkge1xuICAgIGNvbnN0IGl0ZW1zID0gaXRlbUxpc3QuZmlsdGVyKGl0ID0+IHR5cGVvZiBpdCAhPT0gJ3N0cmluZycpXG4gICAgY29uc3QgY29jaWRzID0gaXRlbUxpc3QuZmlsdGVyKGl0ID0+IHR5cGVvZiBpdCA9PT0gJ3N0cmluZycpXG4gICAgaWYgKGNvY2lkcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IGF3YWl0IHRoaXMub2JqZWN0LmNhY2hlQ29DSURcbiAgICAgIGNvbnN0IG1pc3NpbmcgPSBbXVxuICAgICAgZm9yIChjb25zdCBjb2NpZCBvZiBjb2NpZHMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2VbY29jaWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW1zLnB1c2goc291cmNlW2NvY2lkXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtaXNzaW5nLnB1c2goY29jaWQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtaXNzaW5nLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBlcmEgPSBnYW1lLmkxOG4uZm9ybWF0KENPQzcuZXJhc1t0aGlzLm9iamVjdC5kZWZhdWx0RXJhXSA/PyAnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogdGhpcy5vYmplY3QuZGVmYXVsdEVyYSB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuZG9jdW1lbnRzLW5vdC1mb3VuZCcsIHsgY29jaWRzOiBtaXNzaW5nLmpvaW4oJywgJyksIGxhbmc6IGdhbWUuaTE4bi5sYW5nLCBlcmEgfSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgZ2V0QWdlQWRqdXN0bWVudHMgKCkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzKSB7XG4gICAgICB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldID0gMFxuICAgIH1cbiAgICAvLyBlZHU6IG9wdGlvbmFsIC0gbnVtYmVyIG9mIGVkdSBpbXByb3ZlbWVudCBjaGVja3NcbiAgICAvLyBkZWR1Y3Q6IG9wdGlvbmFsIC0gZGVkdWN0IFt0b3RhbF0gYmV0d2VlbiBbZnJvbV1cbiAgICAvLyByZWR1Y2U6IG9wdGlvbmFsIC0gZGVkdWN0IFt0b3RsYV0gZnJvbSBbZnJvbV1cbiAgICAvLyBsdWNrOiBvcHRpb25hbCAtIHJlcm9sbCBsdWNrIGFuZCB0YWtlIGhpZ2hlclxuICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMnKSkge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LmFnZSA+PSA0MCkge1xuICAgICAgICBjb25zdCBrZXkgPSBNYXRoLmZsb29yKHRoaXMub2JqZWN0LmFnZSAvIDEwKVxuICAgICAgICB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzID0ge1xuICAgICAgICAgIGVkdToge1xuICAgICAgICAgICAgdG90YWw6IChrZXkgLSAyID4gNCA/IDQgOiBrZXkgLSAyKSxcbiAgICAgICAgICAgIHJvbGxlZDogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlZHVjdDoge1xuICAgICAgICAgICAgdG90YWw6IChrZXkgPiAxID8gNSAqIE1hdGgucG93KDIsIGtleSAtIDQpIDogMCksXG4gICAgICAgICAgICBmcm9tOiBbJ3N0cicsICdjb24nLCAnZGV4J10sXG4gICAgICAgICAgICB2YWx1ZXM6IHt9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZWR1Y2U6IHtcbiAgICAgICAgICAgIHRvdGFsOiAoa2V5IC0gMykgKiA1LFxuICAgICAgICAgICAgZnJvbTogJ2FwcCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuYWdlID49IDIwKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMgPSB7XG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB0b3RhbDogMSxcbiAgICAgICAgICAgIHJvbGxlZDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuYWdlID49IDE1KSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMgPSB7XG4gICAgICAgICAgZGVkdWN0OiB7XG4gICAgICAgICAgICB0b3RhbDogNSxcbiAgICAgICAgICAgIGZyb206IFsnc3RyJywgJ3NpeiddLFxuICAgICAgICAgICAgdmFsdWVzOiB7fVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVkdWNlOiB7XG4gICAgICAgICAgICB0b3RhbDogNSxcbiAgICAgICAgICAgIGZyb206ICdlZHUnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsdWNrOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW3RoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlLmZyb21dID0gLXRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlLnRvdGFsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuXG4gICAgc2hlZXREYXRhLnBhZ2VzID0gdGhpcy5wYWdlTGlzdFxuXG4gICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5jcmVhdGVCdXR0b24gPSBmYWxzZVxuXG4gICAgbGV0IHNldHVwXG4gICAgbGV0IGFyY2hldHlwZVxuICAgIGxldCBvY2N1cGF0aW9uXG5cbiAgICBsZXQgc2hvd01vbmV0YXJ5ID0gZmFsc2VcblxuICAgIHN3aXRjaCAoc2hlZXREYXRhLm9iamVjdC5zdGVwKSB7XG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0lOVFJPRFVDVElPTjpcbiAgICAgICAgc2hlZXREYXRhLmVyYSA9IGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW3NoZWV0RGF0YS5vYmplY3QuZGVmYXVsdEVyYV0gPz8gJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmE6IHNoZWV0RGF0YS5vYmplY3QuZGVmYXVsdEVyYSB9KVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9DT05GSUdVUkFUSU9OOlxuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLnNldHVwXFwuLylcbiAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbnMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwub2NjdXBhdGlvblxcLi8pXG4gICAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZXMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwuYXJjaGV0eXBlXFwuLylcbiAgICAgICAgICBzZXR1cCA9IHNoZWV0RGF0YS5zZXR1cHMuZmluZChzID0+IHMuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPT09IHNoZWV0RGF0YS5vYmplY3QuZGVmYXVsdFNldHVwKVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzaGVldERhdGEub2JqZWN0LmRlZmF1bHRTZXR1cCA9ICcnXG4gICAgICAgICAgICBzaGVldERhdGEub2JqZWN0LnNldHVwID0gJydcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICBzZXR1cC5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzZWNyZXRzOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICAgIHNoZWV0RGF0YS5vd25lcnNoaXAgPSB7XG4gICAgICAgICAgICBbQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FXTogJ09XTkVSU0hJUC5OT05FJyxcbiAgICAgICAgICAgIFtDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLkxJTUlURURdOiAnT1dORVJTSElQLkxJTUlURUQnLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVJdOiAnT1dORVJTSElQLk9CU0VSVkVSJyxcbiAgICAgICAgICAgIFtDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSXTogJ09XTkVSU0hJUC5PV05FUidcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLl9lcmFzID0gW11cbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBrZXksXG4gICAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzID0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzXG4gICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ERUZBVUxUXG4gICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3QuZW5mb3JjZVBvaW50QnV5KSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1BPSU5UU1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuY2hvb3NlUm9sbGVkVmFsdWVzKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0NIT09TRVxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9WQUxVRVNcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgIHNoZWV0RGF0YS5oYXNBcmNoZXR5cGVzID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKVxuICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfU0VUVVBTOlxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0U2V0dXAgPT09ICcnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnNldHVwcyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5zZXR1cFxcLi8pXG4gICAgICAgICAgc2hlZXREYXRhLnNldHVwcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5zZXR1cCAhPT0gJycpIHtcbiAgICAgICAgICAgIHNldHVwID0gc2hlZXREYXRhLnNldHVwcy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5zZXR1cClcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5kZXNjcmlwdGlvbiA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgICAgICAgICAgICBzZXR1cC5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzZWNyZXRzOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9BUkNIRVRZUEVTOlxuICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlcyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5hcmNoZXR5cGVcXC4vKVxuICAgICAgICBpZiAoc2hlZXREYXRhLmFyY2hldHlwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3QuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgICAgICAgYXJjaGV0eXBlID0gc2hlZXREYXRhLmFyY2hldHlwZXMuZmluZChzID0+IHMuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPT09IHNoZWV0RGF0YS5vYmplY3QuYXJjaGV0eXBlKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmNoZXR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5kZXNjcmlwdGlvbiA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgICAgICAgICAgICBhcmNoZXR5cGUuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2VjcmV0czogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmJvbnVzUG9pbnRzID0gYXJjaGV0eXBlLnN5c3RlbS5ib251c1BvaW50c1xuICAgICAgICAgICAgICBjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWMgaW4gYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1tjb3JlQ2hhcmFjdGVyaXN0aWNdKSB7XG4gICAgICAgICAgICAgICAgICBjb3JlQ2hhcmFjdGVyaXN0aWNzLnB1c2goY29yZUNoYXJhY3RlcmlzdGljKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoY29yZUNoYXJhY3RlcmlzdGljcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSAnJ1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvcmVDaGFyYWN0ZXJpc3RpY3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljID0gY29yZUNoYXJhY3RlcmlzdGljc1swXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWMgPSBjb3JlQ2hhcmFjdGVyaXN0aWNzLm1hcChjID0+IGMudG9Mb2NhbGVVcHBlckNhc2UoKSkuam9pbignICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKSArICcgJylcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGxzID0gW11cbiAgICAgICAgICAgICAgYXJjaGV0eXBlLnN5c3RlbS5za2lsbHMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShhcmNoZXR5cGUuc3lzdGVtLnNraWxscylcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBhcmNoZXR5cGUuc3lzdGVtLnNraWxscykge1xuICAgICAgICAgICAgICAgIHNraWxscy5wdXNoKHNraWxsLm5hbWUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLnNraWxscyA9IHNraWxscy5qb2luKCcsICcpXG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5zdWdnZXN0ZWRPY2N1cGF0aW9ucyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgICAgICAgICAgICBhcmNoZXR5cGUuc3lzdGVtLnN1Z2dlc3RlZE9jY3VwYXRpb25zLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2VjcmV0czogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnN1Z2dlc3RlZFRyYWl0cyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgICAgICAgICAgICBhcmNoZXR5cGUuc3lzdGVtLnN1Z2dlc3RlZFRyYWl0cyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNlY3JldHM6IGdhbWUudXNlci5pc0dNXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0NIQVJBQ1RJU1RJQ1M6XG4gICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzID0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzXG4gICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUk9MTFxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5zZXR1cCAhPT0gJycpIHtcbiAgICAgICAgICBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICAgICAgICBpZiAodHlwZW9mIHNldHVwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQgfHwgdGhpcy5vYmplY3QuZW5mb3JjZVBvaW50QnV5KSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUE9JTlRTXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMub2JqZWN0LmNob29zZVJvbGxlZFZhbHVlcykge1xuICAgICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0NIT09TRVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfVkFMVUVTXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuc2V0dXAgPSB7XG4gICAgICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgICAgICBwb2ludHM6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlLFxuICAgICAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdzdHInLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5zdHIsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ2NvbicsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmNvbixcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkNvbnN0aXR1dGlvbidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ3NpeicsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLnNpeixcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlNpemUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdkZXgnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5kZXgsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdhcHAnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5hcHAsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5BcHBlYXJhbmNlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnaW50JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuaW50LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuSW50ZWxsaWdlbmNlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAncG93JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMucG93LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdlZHUnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lZHUsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5FZHVjYXRpb24nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBsdWNrOiB7XG4gICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5sdWNrLFxuICAgICAgICAgICAgICAgIGxhYmVsOiAnQ29DNy5MdWNrJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljcyA9IFtdXG4gICAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGFyY2hldHlwZSA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJjaGV0eXBlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29yZUNoYXJhY3RlcmlzdGljIGluIGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICAgICAgICAgICAgaWYgKGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1tjb3JlQ2hhcmFjdGVyaXN0aWNdKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIGtleTogY29yZUNoYXJhY3RlcmlzdGljLFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoc2hlZXREYXRhLnNldHVwLmNoYXJhY3RlcmlzdGljcy5maW5kKGMgPT4gYy5rZXkgPT09IGNvcmVDaGFyYWN0ZXJpc3RpYyk/LmxhYmVsID8/ICdVbmtub3duJylcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3Muc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnNldHVwLmNoYXJhY3RlcmlzdGljcy5maW5kKGMgPT4gYy5rZXkgPT09IHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYykucm9sbCA9IGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEudmFsdWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlbXB0aWVzID0gZmFsc2VcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNoZWV0RGF0YS5vYmplY3Quc2V0dXBQb2ludHMpIHtcbiAgICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2V0dXBQb2ludHNba2V5XSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5zZXR1cC50b3RhbCArPSBwYXJzZUludChzaGVldERhdGEub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbXB0aWVzID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWMgPSB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMudG9Mb2NhbGVVcHBlckNhc2UoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlbXB0aWVzICYmIHRoaXMub2JqZWN0LmFnZSA+PSAxNSkge1xuICAgICAgICAgICAgICBpZiAoW3NoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ST0xMLCBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfVkFMVUVTLCBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfQ0hPT1NFXS5pbmNsdWRlcyhzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kKSkge1xuICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNoZWV0RGF0YS5zZXR1cC50b3RhbC50b1N0cmluZygpID09PSBzaGVldERhdGEuc2V0dXAucG9pbnRzLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0FUVFJJQlVURVM6XG4gICAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcyA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJylcbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycykge1xuICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHNba2V5XSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCksXG4gICAgICAgICAgICBtaW46IC1wYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyAxLFxuICAgICAgICAgICAgbGFiZWw6IENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhrZXkpLmxhYmVsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUgIT09ICd1bmRlZmluZWQnICYmICF0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS5yb2xsZWQpIHtcbiAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmRlZHVjdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzaGVldERhdGEuZGVkdWN0VG90YWwgPSAwXG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5kZWR1Y3QuZnJvbSkge1xuICAgICAgICAgICAgc2hlZXREYXRhLmRlZHVjdFRvdGFsID0gc2hlZXREYXRhLmRlZHVjdFRvdGFsIC0gcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIHNoZWV0RGF0YS5kZWR1Y3RGcm9tID0gdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5kZWR1Y3QuZnJvbS5tYXAobiA9PiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy4nICsgbi50b1VwcGVyQ2FzZSgpKSkuam9pbignLCAnKS5yZXBsYWNlKC8oLCApKFteLF0rKSQvLCAnJDEnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9yJykgKyAnICQyJykucmVwbGFjZSgvXihbXixdKyksKFteLF0rKSQvLCAnJDEkMicpXG4gICAgICAgICAgaWYgKHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCAhPT0gdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5kZWR1Y3QudG90YWwpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLnJlZHVjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzaGVldERhdGEucmVkdWNlRnJvbSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLicgKyB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLnJlZHVjZS5mcm9tLnRvVXBwZXJDYXNlKCkpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmx1Y2sgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmx1Y2tWYWx1ZSA9IE1hdGgubWF4KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzLmx1Y2ssIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzLmx1Y2spXG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzLmx1Y2sgPT09IDApIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9WSUVXX0FUVFJJQlVURVM6XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycykge1xuICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHNba2V5XSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCksXG4gICAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgICAgc3VmZml4OiAnJScsXG4gICAgICAgICAgICBsYWJlbDogQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKGtleSkubGFiZWxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5kYiA9IHtcbiAgICAgICAgICB2YWx1ZTogQ29DQWN0b3IuZGJGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuQm9udXNEYW1hZ2UnXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTmFOKHNoZWV0RGF0YS5wb2ludHMuZGIudmFsdWUpIHx8IE51bWJlcihzaGVldERhdGEucG9pbnRzLmRiLnZhbHVlKSA+PSAwKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnBvaW50cy5kYi5wcmVmaXggPSAnKydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLmJ1aWxkID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5idWlsZEZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cyksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5CdWlsZCdcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyKHNoZWV0RGF0YS5wb2ludHMuYnVpbGQudmFsdWUpID49IDApIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzLmJ1aWxkLnByZWZpeCA9ICcrJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuaHAgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLmhwRnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzLCAnY2hhcmFjdGVyJyksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5IaXRQb2ludHMnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5ocC5wcmVmaXggPSBzaGVldERhdGEucG9pbnRzLmhwLnZhbHVlICsgJy8nXG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMubXAgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLm1wRnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzKSxcbiAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgIHN1ZmZpeDogJycsXG4gICAgICAgICAgbGFiZWw6ICdDb0M3Lk1hZ2ljUG9pbnRzJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMubXAucHJlZml4ID0gc2hlZXREYXRhLnBvaW50cy5tcC52YWx1ZSArICcvJ1xuICAgICAgICBzaGVldERhdGEucG9pbnRzLnNhbiA9IHtcbiAgICAgICAgICB2YWx1ZTogc2hlZXREYXRhLnBvaW50cy5wb3cudmFsdWUsXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcvOTknLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5TYW5pdHknXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5tb3YgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLm1vdkZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cywgJ2NoYXJhY3RlcicsIHRoaXMub2JqZWN0LmFnZSksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5Nb3ZlbWVudCdcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9PQ0NVUEFUSU9OUzpcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb25zID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLm9jY3VwYXRpb25cXC4vKVxuICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbnMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0Lm9jY3VwYXRpb24gIT09ICcnKSB7XG4gICAgICAgICAgb2NjdXBhdGlvbiA9IHNoZWV0RGF0YS5vY2N1cGF0aW9ucy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uKVxuICAgICAgICAgIGlmICh0eXBlb2Ygb2NjdXBhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5kZXNjcmlwdGlvbiA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgICAgICAgICAgb2NjdXBhdGlvbi5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzZWNyZXRzOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvblBvaW50c1N0cmluZyA9IENvQzdPY2N1cGF0aW9uU2hlZXQub2NjdXBhdGlvblBvaW50c1N0cmluZyhvY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHMpXG4gICAgICAgICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nID0gb2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nXG4gICAgICAgICAgICBzaGVldERhdGEucGVyc29uYWwgPSBvY2N1cGF0aW9uLnN5c3RlbS5wZXJzb25hbFxuICAgICAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsVGV4dCA9IG9jY3VwYXRpb24uc3lzdGVtLnBlcnNvbmFsVGV4dFxuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxscyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KG9jY3VwYXRpb24uc3lzdGVtLnNraWxscylcbiAgICAgICAgICAgIHNoZWV0RGF0YS5ncm91cHMgPSB7fVxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmdyb3Vwc1tpbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uczogb2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5vcHRpb25zLFxuICAgICAgICAgICAgICAgIHNraWxsczogW11cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEuZ3JvdXBzW2luZGV4XS5za2lsbHMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMgPSAwXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gW11cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb24uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgICAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEucG9pbnRzICs9IGNhcmFjLm11bHRpcGxpZXIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBzaGVldERhdGEucG9pbnRzICs9IE1hdGgubWF4KC4uLm9wdGlvbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9JTlZFU1RJR0FUT1I6XG4gICAgICAgIHNoZWV0RGF0YS5sYW5ndWFnZSA9ICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkTGFuZ3VhZ2VPd25dICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5sYW5ndWFnZSkge1xuICAgICAgICAgIHNoZWV0RGF0YS5sYW5ndWFnZU5hbWUgPSB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW3RoaXMuY29jaWRMYW5ndWFnZU93bl0uaXRlbS5uYW1lXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXREYXRhLmxhbmd1YWdlTmFtZSA9ICcnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfT0NDVVBBVElPTl9TS0lMTFM6XG4gICAgICAgIHNoZWV0RGF0YS5kZWZhdWx0ID0gMFxuICAgICAgICBzaGVldERhdGEuc2VsZWN0ZWQgPSAwXG4gICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zID0gW11cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2tpbGxJdGVtcykge1xuICAgICAgICAgIGxldCBncm91cCA9ICdvdGhlcidcbiAgICAgICAgICBjb25zdCByb3dzID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5sZW5ndGhcbiAgICAgICAgICBjb25zdCBpc011bHRpcGxlID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uZmxhZ3MuaXNNdWx0aXBsZVxuICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBpbmRleDogLTEsXG4gICAgICAgICAgICAgIG5hbWU6IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgZ3JvdXAsXG4gICAgICAgICAgICAgIHRvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgIGlzQ3JlZGl0UmF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNNdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgaXNQaWNrYWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByb3dzOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBsZXQgaXNQaWNrYWJsZSA9IGZhbHNlXG4gICAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaXNPY2N1cGF0aW9uRGVmYXVsdCkge1xuICAgICAgICAgICAgICBncm91cCA9ICdkZWZhdWx0J1xuICAgICAgICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGlzUGlja2FibGUgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlZmF1bHQrK1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pbk9jY3VwYXRpb25Hcm91cCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pbk9jY3VwYXRpb25Hcm91cFxuICAgICAgICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGlzUGlja2FibGUgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gJ290aGVyJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRvZ2dsZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLm9jY3VwYXRpb25Ub2dnbGVcbiAgICAgICAgICAgIGlmIChpc1BpY2thYmxlKSB7XG4gICAgICAgICAgICAgIHRvZ2dsZSA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc3BlY2lhbGl6YXRpb24gPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgbGV0IHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgbGV0IHBpY2tlZCA9IGZhbHNlXG4gICAgICAgICAgICBsZXQgZGVsZXRlYWJsZSA9IGZhbHNlXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBwaWNrZWQgPSB0cnVlXG4gICAgICAgICAgICAgIHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBwaWNrZWQgPSB0cnVlXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgIHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b2dnbGUgfHwgKGlzUGlja2FibGUgJiYgcGlja2VkKSkge1xuICAgICAgICAgICAgICBzaGVldERhdGEuc2VsZWN0ZWQrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLm5hbWVcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuY29jaWRMYW5ndWFnZU93bikge1xuICAgICAgICAgICAgICBuYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1BpY2thYmxlICYmIHBpY2tlZCkge1xuICAgICAgICAgICAgICBuYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzUGlja2FibGUgJiYgcGlja2VkKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZWFibGUgPSAhc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uYXJjaGV0eXBlVG9nZ2xlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgIHRvZ2dsZSxcbiAgICAgICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmlzQ3JlZGl0UmF0aW5nLFxuICAgICAgICAgICAgICBpc011bHRpcGxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNQaWNrYWJsZSxcbiAgICAgICAgICAgICAgcGlja2VkLFxuICAgICAgICAgICAgICBkZWxldGVhYmxlLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbixcbiAgICAgICAgICAgICAgc2tpbGxOYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEubWF4ID0gKHBhcnNlSW50KHNoZWV0RGF0YS5kZWZhdWx0LCAxMCkgfHwgMCkgKyAocGFyc2VJbnQoc2hlZXREYXRhLm9iamVjdC5wZXJzb25hbCwgMTApIHx8IDApICsgT2JqZWN0LnZhbHVlcyhzaGVldERhdGEub2JqZWN0Lm9jY3VwYXRpb25Hcm91cHMpLnJlZHVjZSgocywgdikgPT4gcyArIChwYXJzZUludCh2LCAxMCkgfHwgMCksIDApXG4gICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICBpZiAoc2hlZXREYXRhLnNlbGVjdGVkID09PSBzaGVldERhdGEubWF4KSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9BUkNIRVRZUEVfU0tJTExTOlxuICAgICAgICBzaGVldERhdGEubWF4ID0gMFxuICAgICAgICBzaGVldERhdGEuc2VsZWN0ZWQgPSAwXG4gICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zID0gW11cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2tpbGxJdGVtcykge1xuICAgICAgICAgIGxldCBncm91cCA9ICdvdGhlcidcbiAgICAgICAgICBjb25zdCByb3dzID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5sZW5ndGhcbiAgICAgICAgICBjb25zdCBpc011bHRpcGxlID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uZmxhZ3MuaXNNdWx0aXBsZVxuICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBpbmRleDogLTEsXG4gICAgICAgICAgICAgIG5hbWU6IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgZ3JvdXAsXG4gICAgICAgICAgICAgIHRvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgIGlzQ3JlZGl0UmF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNNdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgaXNQaWNrYWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByb3dzOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBsZXQgaXNQaWNrYWJsZSA9IGZhbHNlXG4gICAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaXNBcmNoZXR5cGVEZWZhdWx0KSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gJ2RlZmF1bHQnXG4gICAgICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgaXNQaWNrYWJsZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEubWF4KytcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gJ290aGVyJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRvZ2dsZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmFyY2hldHlwZVRvZ2dsZVxuICAgICAgICAgICAgaWYgKGlzUGlja2FibGUpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzcGVjaWFsaXphdGlvbiA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICBsZXQgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICBsZXQgcGlja2VkID0gZmFsc2VcbiAgICAgICAgICAgIGxldCBkZWxldGVhYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIHBpY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHBpY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb24gPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZC5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvZ2dsZSB8fCAoaXNQaWNrYWJsZSAmJiBwaWNrZWQpKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZVxuICAgICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5jb2NpZExhbmd1YWdlT3duKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzUGlja2FibGUgJiYgcGlja2VkKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQaWNrYWJsZSAmJiBwaWNrZWQpIHtcbiAgICAgICAgICAgICAgZGVsZXRlYWJsZSA9ICFzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5vY2N1cGF0aW9uVG9nZ2xlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgIHRvZ2dsZSxcbiAgICAgICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc011bHRpcGxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNQaWNrYWJsZSxcbiAgICAgICAgICAgICAgcGlja2VkLFxuICAgICAgICAgICAgICBkZWxldGVhYmxlLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbixcbiAgICAgICAgICAgICAgc2tpbGxOYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5zZWxlY3RlZCA9PT0gc2hlZXREYXRhLm1heCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfUE9JTlRTX1NLSUxMUzpcbiAgICAgICAgc2hlZXREYXRhLnNraWxscyA9IFtdXG4gICAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdPa2F5ID0gISh0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4ID4gMClcbiAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsID0ge1xuICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgIHRvdGFsOiAyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzLmludCwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMuaW50LCAxMCkpLFxuICAgICAgICAgIHJlbWFpbmluZzogMFxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uID0ge1xuICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgIHJlbWFpbmluZzogMFxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGUgPSB7XG4gICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgcmVtYWluaW5nOiAwXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2V0dXAgIT09ICcnKSB7XG4gICAgICAgICAgc2hvd01vbmV0YXJ5ID0gKGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRChzaGVldERhdGEub2JqZWN0LnNldHVwKSkuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcy5sZW5ndGggPiAwXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Qub2NjdXBhdGlvbiAhPT0gJycpIHtcbiAgICAgICAgICBvY2N1cGF0aW9uID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0Lm9jY3VwYXRpb24pXG4gICAgICAgICAgaWYgKG9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXVxuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBjYXJhY10gb2YgT2JqZWN0LmVudHJpZXMob2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKSkge1xuICAgICAgICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaChjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSkpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLnRvdGFsICs9IGNhcmFjLm11bHRpcGxpZXIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbi50b3RhbCArPSBNYXRoLm1heCguLi5vcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vYmplY3QuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgICAgIGNvbnN0IGFyY2hldHlwZSA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQodGhpcy5vYmplY3QuYXJjaGV0eXBlKVxuICAgICAgICAgIGlmIChhcmNoZXR5cGUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLnRvdGFsID0gYXJjaGV0eXBlWzBdLnN5c3RlbS5ib251c1BvaW50c1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5vYmplY3Quc2tpbGxJdGVtcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNraWxsSXRlbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gc2tpbGwucm93cy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgY29uc3Qgcm93ID0gc2tpbGwucm93c1tpbmRleF1cbiAgICAgICAgICAgICAgaWYgKCFza2lsbC5mbGFncy5pc011bHRpcGxlIHx8IHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHNraWxsLml0ZW0pXG4gICAgICAgICAgICAgICAgaWYgKHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UgJiYgdHlwZW9mIHJvdy5zZWxlY3RlZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIGl0ZW0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShyb3cuc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBiYXNlID0gaXRlbS5zeXN0ZW0uYmFzZVxuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTnVtZXJpYyhiYXNlKSkge1xuICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBQb2ludHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKCdAJyArIGtleSwgJ2knKVxuICAgICAgICAgICAgICAgICAgICBiYXNlID0gYmFzZS5yZXBsYWNlKHJlZ0V4LCBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTnVtZXJpYyhiYXNlKSkge1xuICAgICAgICAgICAgICAgICAgYmFzZSA9IE1hdGguZmxvb3IobmV3IEF2ZXJhZ2VSb2xsKCcoJyArIGJhc2UgKyAnKScpWyghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpID8gJ2V2YWx1YXRlJyA6ICdldmFsdWF0ZVN5bmMnKS8qIC8vIEZvdW5kcnlWVFQgdjExICovXSh7IG1pbmltaXplOiB0cnVlLCBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsUG9pbnRzID0gcGFyc2VJbnQoYmFzZSwgMTApXG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihyb3cucGVyc29uYWxQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbnVtID0gTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cylcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbC5jb3VudCArPSBudW1cbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihyb3cub2NjdXBhdGlvblBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIocm93Lm9jY3VwYXRpb25Qb2ludHMpXG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbi5jb3VudCArPSBudW1cbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihyb3cuYXJjaGV0eXBlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cuYXJjaGV0eXBlUG9pbnRzKVxuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZS5jb3VudCArPSBudW1cbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihyb3cuZXhwZXJpZW5jZVBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIocm93LmV4cGVyaWVuY2VQb2ludHMpXG4gICAgICAgICAgICAgICAgICB0b3RhbFBvaW50cyA9IHRvdGFsUG9pbnRzICsgbnVtXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5jb2NpZExhbmd1YWdlT3duKSB7XG4gICAgICAgICAgICAgICAgICBuYW1lID0gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChza2lsbC5mbGFncy5pc0NyZWRpdFJhdGluZykge1xuICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUgKyAnIFsnICsgdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1pbiArICcgLSAnICsgdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1heCArICddJ1xuICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsUG9pbnRzID49IHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZy5taW4gJiYgdG90YWxQb2ludHMgPD0gdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1heCkge1xuICAgICAgICAgICAgICAgICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nT2theSA9IHRydWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByb3cuc2VsZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICBuYW1lID0gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgcm93LnNlbGVjdGVkICsgJyknXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICBpc09jY3VwYXRpb246IHJvdy5vY2N1cGF0aW9uVG9nZ2xlLFxuICAgICAgICAgICAgICAgICAgaXNBcmNoZXR5cGU6IHJvdy5hcmNoZXR5cGVUb2dnbGUsXG4gICAgICAgICAgICAgICAgICBiYXNlLFxuICAgICAgICAgICAgICAgICAgcGVyc29uYWxQb2ludHM6IHJvdy5wZXJzb25hbFBvaW50cyxcbiAgICAgICAgICAgICAgICAgIG9jY3VwYXRpb25Qb2ludHM6IHJvdy5vY2N1cGF0aW9uUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgYXJjaGV0eXBlUG9pbnRzOiByb3cuYXJjaGV0eXBlUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgZXhwZXJpZW5jZVBvaW50czogcm93LmV4cGVyaWVuY2VQb2ludHMsXG4gICAgICAgICAgICAgICAgICB0b3RhbFBvaW50cyxcbiAgICAgICAgICAgICAgICAgIHNob3dDcmVkaXRSYXRpbmc6IHNob3dNb25ldGFyeSAmJiBrZXkgPT09IHRoaXMuY29jaWRDcmVkaXRSYXRpbmdcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHNoZWV0RGF0YS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgaWYgKHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdPa2F5KSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzaGVldERhdGEucGVyc29uYWwucmVtYWluaW5nID0gc2hlZXREYXRhLnBlcnNvbmFsLnRvdGFsIC0gc2hlZXREYXRhLnBlcnNvbmFsLmNvdW50XG4gICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLnJlbWFpbmluZyA9IHNoZWV0RGF0YS5vY2N1cGF0aW9uLnRvdGFsIC0gc2hlZXREYXRhLm9jY3VwYXRpb24uY291bnRcbiAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZS5yZW1haW5pbmcgPSBzaGVldERhdGEuYXJjaGV0eXBlLnRvdGFsIC0gc2hlZXREYXRhLmFyY2hldHlwZS5jb3VudFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0JBQ0tTVE9SWTpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IGFsbEJhY2tzdG9yaWVzID0gYXdhaXQgdGhpcy5vYmplY3QuY2FjaGVCYWNrc3Rvcmllc1xuICAgICAgICAgIHNoZWV0RGF0YS5iYWNrc3RvcmllcyA9IHt9XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgc2hlZXREYXRhLmJhY2tzdG9yaWVzW2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS5uYW1lLFxuICAgICAgICAgICAgICByb2xsczogKGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5maW5kQ29jSWRJbkxpc3QodGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLmtleSwgYWxsQmFja3N0b3JpZXMpLmxlbmd0aCA/IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS5rZXkgOiAnJyksXG4gICAgICAgICAgICAgIHZhbHVlOiB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIHNoZWV0RGF0YS5jcmVhdGVCdXR0b24gPSBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0NSRUFURTpcbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIHNoZWV0RGF0YS5jcmVhdGVCdXR0b24gPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwua2V5cHJlc3MoZSA9PiAvdGV4dGFyZWEvaS50ZXN0KChlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQpLnRhZ05hbWUpIHx8IChlLmtleUNvZGUgfHwgZS53aGljaCB8fCBlLmNoYXJDb2RlIHx8IDApICE9PSAxMylcbiAgICBodG1sLmZpbmQoJy5zdWJtaXRfb25fY2hhbmdlJykuY2hhbmdlKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcucm9sbC1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3RlcmlzdGljLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaW5jcmVhc2UtMTAtY2hhcmFjdGVyaXN0aWMnKS5jbGljayh0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMxMC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmluY3JlYXNlLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGVjcmVhc2UtY2hhcmFjdGVyaXN0aWMnKS5jbGljayh0aGlzLl9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWNyZWFzZS0xMC1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYzEwLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24ucm9sbF9hbGwnKS5jbGljayh0aGlzLl9vblJvbGxBbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5yb2xsX2Nob29zZScpLmNsaWNrKHRoaXMuX29uUm9sbENob29zZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uLnJvbGxfZWR1JykuY2xpY2sodGhpcy5fb25Sb2xsRWR1LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24ucm9sbF9sdWNrJykuY2xpY2sodGhpcy5fb25Sb2xsTHVjay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0gaW5wdXQuc3VibWl0X29uX2JsdXInKS5ibHVyKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbSBpbnB1dC5zYXZlLWNoYXJhY3RlcmlzdGljLW9uLWJsdXInKS5ibHVyKHRoaXMuX29uQ2hhbmdlU2F2ZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbS50b2dnbGVhYmxlJykuY2xpY2sodGhpcy5fb25Ub2dnbGVTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0uY2xpY2thYmxlJykuY2xpY2sodGhpcy5fb25DbGlja1BpY2tTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxscy1saXN0IGlucHV0JykuY2xpY2sodGhpcy5fb25DbGlja1NraWxsU3BlY2lhbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxscy1saXN0IC5yZW1vdmUtc2tpbGwnKS5jbGljayh0aGlzLl9vbkNsaWNrUmVtb3ZlU2tpbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtIGlucHV0LnNraWxsLWFkanVzdG1lbnQnKS5ibHVyKHRoaXMuX29uQ2hhbmdlU2tpbGxQb2ludHMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ3RleHRhcmVhLmJhY2tzdG9yeS10ZXh0Jykua2V5dXAodGhpcy5fb25DaGFuZ2VCYWNrc3RvcnlUZXh0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24uYmFja3N0b3J5LXJvbGwnKS5jbGljayh0aGlzLl9vblJvbGxCYWNrc3RvcnkuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5iYWNrc3RvcnktcmVzZXQnKS5jbGljayh0aGlzLl9vblJlc2V0QmFja3N0b3J5LmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyByb2xsTWVzc2FnZSAocm9sbHMpIHtcbiAgICBpZiAocm9sbHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBodG1sID0gW11cbiAgICAgIGZvciAoY29uc3Qgcm9sbCBvZiByb2xscykge1xuICAgICAgICBodG1sLnB1c2goYXdhaXQgcmVuZGVyVGVtcGxhdGUoUm9sbC5DSEFUX1RFTVBMQVRFLCB7XG4gICAgICAgICAgZm9ybXVsYTogKENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhyb2xsWzBdKT8ubGFiZWwgPz8gcm9sbFswXSkgKyAnOiAnICsgcm9sbFsxXSxcbiAgICAgICAgICB0b29sdGlwOiBhd2FpdCByb2xsWzJdLmdldFRvb2x0aXAoKSxcbiAgICAgICAgICB0b3RhbDogcm9sbFsyXS50b3RhbFxuICAgICAgICB9KSlcbiAgICAgIH1cbiAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgc3BlYWtlcjoge1xuICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiBodG1sLmpvaW4oJzxkaXY+Jm5ic3A7PC9kaXY+JyksXG4gICAgICAgIHdoaXNwZXI6IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFkZEl0ZW1Ub0xpc3QgKGl0ZW0sIHsgaXNPY2N1cGF0aW9uRGVmYXVsdCA9IGZhbHNlLCBpbk9jY3VwYXRpb25Hcm91cCA9IGZhbHNlLCBvY2N1cGF0aW9uVG9nZ2xlID0gZmFsc2UsIGlzQXJjaGV0eXBlRGVmYXVsdCA9IGZhbHNlLCBhcmNoZXR5cGVUb2dnbGUgPSBmYWxzZSwgaXNDcmVkaXRSYXRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBjb25zdCBrZXkgPSAoaXRlbS5mbGFncy5Db0M3Py5jb2NpZEZsYWc/LmlkID8/IGl0ZW0ubmFtZSlcbiAgICBpZiAoaXRlbS50eXBlICE9PSAnc2tpbGwnKSB7XG4gICAgICB0aGlzLm9iamVjdC5pbnZlc3RpZ2F0b3JJdGVtcy5wdXNoKGl0ZW0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaXNNdWx0aXBsZSA9ICEhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCAmJiAoKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucmVxdWlyZXNuYW1lICYmICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5vbmx5b25lID8/IGZhbHNlKSkgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5waWNrbmFtZW9ubHkgfHwgaXRlbS5uYW1lID09PSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFueVNwZWNOYW1lJykpKVxuICAgIGNvbnN0IGZsYWdzID0ge1xuICAgICAgaXNPY2N1cGF0aW9uRGVmYXVsdCxcbiAgICAgIGluT2NjdXBhdGlvbkdyb3VwLFxuICAgICAgaXNBcmNoZXR5cGVEZWZhdWx0LFxuICAgICAgaXNDcmVkaXRSYXRpbmcsXG4gICAgICBvY2N1cGF0aW9uVG9nZ2xlLFxuICAgICAgYXJjaGV0eXBlVG9nZ2xlXG4gICAgfVxuICAgIGNvbnN0IHJvd3MgPSB7XG4gICAgICBvY2N1cGF0aW9uUG9pbnRzOiAnJyxcbiAgICAgIGFyY2hldHlwZVBvaW50czogJycsXG4gICAgICBleHBlcmllbmNlUG9pbnRzOiAnJyxcbiAgICAgIHBlcnNvbmFsUG9pbnRzOiAnJyxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSA9IHtcbiAgICAgICAgaXRlbSxcbiAgICAgICAgZmxhZ3M6IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZmxhZ3MsIHsgaXNNdWx0aXBsZSB9LCB7IGlucGxhY2U6IGZhbHNlIH0pLFxuICAgICAgICByb3dzOiBbXVxuICAgICAgfVxuICAgICAgaWYgKCFpc011bHRpcGxlIHx8ICEoaXNPY2N1cGF0aW9uRGVmYXVsdCA9PT0gZmFsc2UgJiYgaW5PY2N1cGF0aW9uR3JvdXAgPT09IGZhbHNlICYmIGlzQXJjaGV0eXBlRGVmYXVsdCA9PT0gZmFsc2UpKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLnB1c2goZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChmbGFncywgcm93cywgeyBpbnBsYWNlOiBmYWxzZSB9KSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFpc011bHRpcGxlKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmxhZyBpbiBmbGFncykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzWzBdW2ZsYWddID0gdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbMF1bZmxhZ10gfHwgZmxhZ3NbZmxhZ11cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MucHVzaChmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGZsYWdzLCByb3dzLCB7IGlucGxhY2U6IGZhbHNlIH0pKVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmbGFnIGluIGZsYWdzKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFnc1tmbGFnXSA9IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFnc1tmbGFnXSB8fCBmbGFnc1tmbGFnXVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzTXVsdGlwbGUgJiYgZmxhZ3MuaXNDcmVkaXRSYXRpbmcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzWzBdLm9jY3VwYXRpb25Qb2ludHMgPSB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWluXG4gICAgfVxuICB9XG5cbiAgY2xlYXJTZXR1cFBvaW50cyAoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBQb2ludHMpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSAnJ1xuICAgIH1cbiAgICB0aGlzLm9iamVjdC5yb2xsZWRWYWx1ZXMgPSBbXVxuICB9XG5cbiAgYXN5bmMgc2V0U2tpbGxMaXN0cyAoKSB7XG4gICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtcyA9IHt9XG4gICAgdGhpcy5vYmplY3Qub2NjdXBhdGlvbkdyb3VwcyA9IHt9XG4gICAgdGhpcy5vYmplY3QuaW52ZXN0aWdhdG9ySXRlbXMgPSBbXVxuICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcylcbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICBjb25zdCBvY2N1cGF0aW9uID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0Lm9jY3VwYXRpb24pXG4gICAgbGV0IGFyY2hldHlwZSA9IGZhbHNlXG4gICAgaWYgKHRoaXMub2JqZWN0LmFyY2hldHlwZSAhPT0gJycpIHtcbiAgICAgIGFyY2hldHlwZSA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgfVxuICAgIGlmIChzZXR1cCAmJiBvY2N1cGF0aW9uICYmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKSB8fCBhcmNoZXR5cGUpKSB7XG4gICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9ucyA9IFtdXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2V0dXAuc3lzdGVtLmJpb1NlY3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBzZXR1cC5zeXN0ZW0uYmlvU2VjdGlvbnNbaW5kZXhdLFxuICAgICAgICAgIHZhbHVlOiAnJyxcbiAgICAgICAgICBrZXk6ICdydC4uYmFja3N0b3J5LScgKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKHNldHVwLnN5c3RlbS5iaW9TZWN0aW9uc1tpbmRleF0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5wZXJzb25hbCA9IG9jY3VwYXRpb24uc3lzdGVtLnBlcnNvbmFsXG4gICAgICB0aGlzLm9iamVjdC5wZXJzb25hbFRleHQgPSBvY2N1cGF0aW9uLnN5c3RlbS5wZXJzb25hbFRleHRcbiAgICAgIHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZyA9IG9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZ1xuICAgICAgbGV0IGl0ZW1zID0gW11cbiAgICAgIGl0ZW1zID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkoc2V0dXAuc3lzdGVtLml0ZW1zKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbXNbaW5kZXhdKVxuICAgICAgfVxuICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5za2lsbHMpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gaXRlbXMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaXNPY2N1cGF0aW9uRGVmYXVsdDogdHJ1ZSwgb2NjdXBhdGlvblRvZ2dsZTogdHJ1ZSB9KVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgZ3JvdXAgPSAwLCBnbSA9IG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGdyb3VwIDwgZ207IGdyb3VwKyspIHtcbiAgICAgICAgdGhpcy5vYmplY3Qub2NjdXBhdGlvbkdyb3Vwc1tncm91cF0gPSBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbZ3JvdXBdLm9wdGlvbnNcbiAgICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbZ3JvdXBdLnNraWxscylcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaW5PY2N1cGF0aW9uR3JvdXA6IGdyb3VwIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhcmNoZXR5cGUpIHtcbiAgICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShhcmNoZXR5cGUuc3lzdGVtLnNraWxscylcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaXNBcmNoZXR5cGVEZWZhdWx0OiB0cnVlLCBhcmNoZXR5cGVUb2dnbGU6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKE51bWJlcih0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4KSA+IDApIHtcbiAgICAgICAgY29uc3QgbmFtZUNyZWRpdFJhdGluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmtleXMuJyArIHRoaXMuY29jaWRDcmVkaXRSYXRpbmcpXG4gICAgICAgIGNvbnN0IGZsYWdzID0geyBpc09jY3VwYXRpb25EZWZhdWx0OiB0cnVlLCBvY2N1cGF0aW9uVG9nZ2xlOiB0cnVlLCBpc0NyZWRpdFJhdGluZzogdHJ1ZSB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QodGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nXS5pdGVtLCBmbGFncylcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1tuYW1lQ3JlZGl0UmF0aW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QodGhpcy5vYmplY3Quc2tpbGxJdGVtc1tuYW1lQ3JlZGl0UmF0aW5nXS5pdGVtLCBmbGFncylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBza2lsbCA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQodGhpcy5jb2NpZENyZWRpdFJhdGluZylcbiAgICAgICAgICBpZiAoc2tpbGwubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3Qoc2tpbGxbMF0sIGZsYWdzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5KSB7XG4gICAgICBjb25zdCBkcmFnRGF0YSA9IHsgdHlwZTogJ2ludmVzdGlnYXRvckNoYXJhY3RlcmlzdGljJywga2V5OiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNLZXksIHZhbHVlOiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudmFsdWUgfVxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gICAgfSBlbHNlIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQub2Zmc2V0KSB7XG4gICAgICBjb25zdCBkcmFnRGF0YSA9IHsgdHlwZTogJ2ludmVzdGlnYXRvclZhbHVlJywgb2Zmc2V0OiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQub2Zmc2V0IH1cbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICAgIH1cbiAgfVxuXG4gIF9jYW5EcmFnU3RhcnQgKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIF9jYW5EcmFnRHJvcCAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YUxpc3QgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBpZiAodHlwZW9mIGRhdGFMaXN0LnR5cGUgIT09ICd1bmRlZmluZWQnICYmIGRhdGFMaXN0LnR5cGUgPT09ICdpbnZlc3RpZ2F0b3JDaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgZGF0YUxpc3QuZGVzdGluYXRpb24gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YUxpc3QuZGVzdGluYXRpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgZGF0YUxpc3QuZGVzdGluYXRpb24gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmVtcHR5XG4gICAgICAgIH1cbiAgICAgICAgZGF0YUxpc3Qub2theSA9IGZhbHNlXG4gICAgICAgIGlmIChkYXRhTGlzdC5kZXN0aW5hdGlvbiA9PT0gJ3gnKSB7XG4gICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5vYmplY3Qucm9sbGVkVmFsdWVzLmZpbmRJbmRleChpID0+IGkuYXNzaWduZWQgPT09IHRydWUpXG4gICAgICAgICAgaWYgKG9mZnNldCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yb2xsZWRWYWx1ZXNbb2Zmc2V0XSA9IHtcbiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0sXG4gICAgICAgICAgICAgIGFzc2lnbmVkOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSA9ICcnXG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGFMaXN0Lm9rYXkgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YUxpc3Qua2V5ID09PSAnLScgJiYgdHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMub2JqZWN0LnBsYWNlYWJsZS5pbmRleE9mKHBhcnNlSW50KGRhdGFMaXN0LnZhbHVlLCAxMCkpXG4gICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5wdXNoKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSwgMTApKVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSBwYXJzZUludChkYXRhTGlzdC52YWx1ZSwgMTApXG4gICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNvcnQoKS5yZXZlcnNlKClcbiAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldICE9PSAndW5kZWZpbmVkJyAmJiBkYXRhTGlzdC5kZXN0aW5hdGlvbiA9PT0gJy0nKSB7XG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUucHVzaChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldLCAxMCkpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldID0gJydcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5zb3J0KCkucmV2ZXJzZSgpXG4gICAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wID0gKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gPT09ICcnID8gJycgOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldLCAxMCkpXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSA9ICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPT09ICcnID8gJycgOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0sIDEwKSlcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSB0ZW1wXG4gICAgICAgICAgZGF0YUxpc3Qub2theSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YUxpc3Qub2theSkge1xuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGFMaXN0LnR5cGUgIT09ICd1bmRlZmluZWQnICYmIGRhdGFMaXN0LnR5cGUgPT09ICdpbnZlc3RpZ2F0b3JWYWx1ZScpIHtcbiAgICAgICAgZGF0YUxpc3QuZGVzdGluYXRpb24gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5XG4gICAgICAgIGRhdGFMaXN0Lm9rYXkgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5vYmplY3Qucm9sbGVkVmFsdWVzW2RhdGFMaXN0Lm9mZnNldF0uYXNzaWduZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgbGV0IG9sZFxuICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gIT09ICcnKSB7XG4gICAgICAgICAgICBvbGQgPSB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3QuZGVzdGluYXRpb25dID0gdGhpcy5vYmplY3Qucm9sbGVkVmFsdWVzW2RhdGFMaXN0Lm9mZnNldF0udmFsdWVcbiAgICAgICAgICBpZiAodHlwZW9mIG9sZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvbGxlZFZhbHVlc1tkYXRhTGlzdC5vZmZzZXRdLnZhbHVlID0gb2xkXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvbGxlZFZhbHVlc1tkYXRhTGlzdC5vZmZzZXRdLmFzc2lnbmVkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhTGlzdC5va2F5KSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgIH1cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcbiAgICBpZiAoW3RoaXMucGFnZUxpc3QuUEFHRV9BUkNIRVRZUEVfU0tJTExTLCB0aGlzLnBhZ2VMaXN0LlBBR0VfT0NDVVBBVElPTl9TS0lMTFNdLmluY2x1ZGVzKHRoaXMub2JqZWN0LnN0ZXApKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtKVxuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfb25DbGlja1NraWxsU3BlY2lhbCAoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG5cbiAgX29uQ2xpY2tSZW1vdmVTa2lsbCAoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IGtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LnBhcmVudE5vZGU/LmRhdGFzZXQ/LmtleVxuICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldD8ucGFyZW50Tm9kZT8uZGF0YXNldD8uaW5kZXhcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XT8ucm93c1tpbmRleF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5zcGxpY2UoaW5kZXgsIGluZGV4KVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGVTa2lsbCAoZXZlbnQpIHtcbiAgICBjb25zdCBrZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py5rZXlcbiAgICBjb25zdCBpbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LmluZGV4XG4gICAgY29uc3QgdG9nZ2xlS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8udG9nZ2xlS2V5XG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0/LnJvd3NbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW3RvZ2dsZUtleV0gPSAhdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW3RvZ2dsZUtleV1cbiAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tQaWNrU2tpbGwgKGV2ZW50KSB7XG4gICAgY29uc3Qga2V5ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8ua2V5XG4gICAgY29uc3QgaW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py5pbmRleFxuICAgIGNvbnN0IHRvZ2dsZUtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LnRvZ2dsZUtleVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW3RvZ2dsZUtleV0gPSBmYWxzZVxuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgfVxuICAgICAgbGV0IHNraWxsTGlzdCA9IFtdXG4gICAgICBjb25zdCBncm91cCA9IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5ndWVzc0dyb3VwRnJvbUtleShrZXkpXG4gICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgc2tpbGxMaXN0ID0gKGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogbmV3IFJlZ0V4cCgnXicgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKGdyb3VwKSArICcuKyQnKSwgdHlwZTogJ2knIH0pKS5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgICAgcmV0dXJuICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCAmJiAhIShpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucGlja25hbWVvbmx5KSlcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHNraWxsTGlzdC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBza2lsbERhdGEgPSBhd2FpdCBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgIHNraWxsczogc2tpbGxMaXN0LFxuICAgICAgICBhbGxvd0N1c3RvbTogKHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgPz8gZmFsc2UpLFxuICAgICAgICBmaXhlZEJhc2VWYWx1ZTogdHJ1ZSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb25OYW1lOiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24sXG4gICAgICAgIGxhYmVsOiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lXG4gICAgICB9KVxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgaWYgKHNraWxsRGF0YS5zZWxlY3RlZCAhPT0gJycpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgPSBza2lsbExpc3QuZmluZChpID0+IGkuaWQgPT09IHNraWxsRGF0YS5zZWxlY3RlZClcbiAgICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XSA9IHRydWVcbiAgICAgICAgfSBlbHNlIGlmIChza2lsbERhdGEubmFtZSAhPT0gJycpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgPSBza2lsbERhdGEubmFtZVxuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgICBpZiAoc2tpbGxEYXRhLnNlbGVjdGVkICE9PSAnJykge1xuICAgICAgICAgIHNlbGVjdGVkID0gc2tpbGxMaXN0LmZpbmQoaSA9PiBpLmlkID09PSBza2lsbERhdGEuc2VsZWN0ZWQpXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpbGxEYXRhLm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgc2VsZWN0ZWQgPSBza2lsbERhdGEubmFtZVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLnB1c2goe1xuICAgICAgICAgIGlzT2NjdXBhdGlvbkRlZmF1bHQ6IGZhbHNlLFxuICAgICAgICAgIGluT2NjdXBhdGlvbkdyb3VwOiBmYWxzZSxcbiAgICAgICAgICBpc0FyY2hldHlwZURlZmF1bHQ6IGZhbHNlLFxuICAgICAgICAgIGlzQ3JlZGl0UmF0aW5nOiBmYWxzZSxcbiAgICAgICAgICBvY2N1cGF0aW9uVG9nZ2xlOiAodG9nZ2xlS2V5ID09PSAnb2NjdXBhdGlvblRvZ2dsZScpLFxuICAgICAgICAgIGFyY2hldHlwZVRvZ2dsZTogKHRvZ2dsZUtleSA9PT0gJ2FyY2hldHlwZVRvZ2dsZScpLFxuICAgICAgICAgIG9jY3VwYXRpb25Qb2ludHM6ICcnLFxuICAgICAgICAgIGFyY2hldHlwZVBvaW50czogJycsXG4gICAgICAgICAgZXhwZXJpZW5jZVBvaW50czogJycsXG4gICAgICAgICAgcGVyc29uYWxQb2ludHM6ICcnLFxuICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZVNraWxsUG9pbnRzIChldmVudCkge1xuICAgIGNvbnN0IGlucHV0ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGFkanVzdG1lbnQgPSBpbnB1dC5kYXRhKCdhZGp1c3RtZW50JylcbiAgICBjb25zdCBsaSA9IGlucHV0LmNsb3Nlc3QoJ2xpJylcbiAgICBjb25zdCBrZXkgPSBsaS5kYXRhKCdrZXknKVxuICAgIGNvbnN0IGluZGV4ID0gbGkuZGF0YSgnaW5kZXgnKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldPy5yb3dzW2luZGV4XVthZGp1c3RtZW50XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVthZGp1c3RtZW50XSA9IGlucHV0LnZhbCgpXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VCYWNrc3RvcnlUZXh0IChldmVudCkge1xuICAgIGNvbnN0IHRleHRhcmVhID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGluZGV4ID0gdGV4dGFyZWEuZGF0YSgnaW5kZXgnKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLnZhbHVlID0gdGV4dGFyZWEudmFsKClcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Sb2xsQmFja3N0b3J5IChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBpbmRleCA9IGJ1dHRvbi5kYXRhKCdpbmRleCcpXG4gICAgY29uc3Qga2V5ID0gYnV0dG9uLmRhdGEoJ2tleScpXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCByb2xsdGFibGUgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGtleSlcbiAgICAgIGlmIChyb2xsdGFibGUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnN0IHRhYmxlUmVzdWx0cyA9IGF3YWl0IHJvbGx0YWJsZVswXS5yb2xsKClcbiAgICAgICAgZm9yIChjb25zdCB0YWJsZVJlc3VsdCBvZiB0YWJsZVJlc3VsdHMucmVzdWx0cykge1xuICAgICAgICAgIGlmICh0YWJsZVJlc3VsdC50eXBlID09PSBDT05TVC5UQUJMRV9SRVNVTFRfVFlQRVMuVEVYVCkge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLnZhbHVlID0gKHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSArICdcXG4nICsgdGFibGVSZXN1bHQudGV4dC50cmltKCkpLnRyaW0oKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRCYWNrc3RvcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGluZGV4ID0gYnV0dG9uLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSA9ICcnXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsTHVjayAoZXZlbnQpIHtcbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBSb2xsKHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMubHVjay50b1N0cmluZygpKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrID0gW2RpZS50b3RhbF1cbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShSb2xsLkNIQVRfVEVNUExBVEUsIHtcbiAgICAgICAgZm9ybXVsYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5Sb2xsVHdpY2VGb3JMdWNrJykgKyAnOiAnICsgc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5sdWNrLnRvU3RyaW5nKCksXG4gICAgICAgIHRvb2x0aXA6IGF3YWl0IGRpZS5nZXRUb29sdGlwKCksXG4gICAgICAgIHRvdGFsOiBkaWUudG90YWxcbiAgICAgIH0pXG4gICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgIH0pXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxFZHUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoIXRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1LnJvbGxlZCAmJiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS50b3RhbCkge1xuICAgICAgICBsZXQgdmFsdWUgPSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5lZHUsIDEwKVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gW11cbiAgICAgICAgZm9yIChsZXQgcm9sbHMgPSB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS50b3RhbDsgcm9sbHMgPiAwOyByb2xscy0tKSB7XG4gICAgICAgICAgY29uc3QgZGllID0gYXdhaXQgbmV3IFJvbGwoJzFkMTAwJykuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGlmIChkaWUudG90YWwgPiB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgYXVnbWVudERpZSA9IGF3YWl0IG5ldyBSb2xsKCcxZDEwJykuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgbWVzc2FnZS5wdXNoKGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2U3VjY2VzcycsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FZHVjYXRpb24nKSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgYXVnbWVudDogYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YClcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBwYXJzZUludChhdWdtZW50RGllLnRvdGFsLCAxMClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZS5wdXNoKGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZGYWlsdXJlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiB2YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsQWxsNERldicpLFxuICAgICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2Uuam9pbignJyksXG4gICAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMuZWR1ID0gdmFsdWUgLSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5lZHUsIDEwKVxuICAgICAgICB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS5yb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEFsbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgcm9sbHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93JywgJ2VkdScsICdsdWNrJ10pIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgIHJvbGxzLnB1c2gocmVzdWx0KVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJvbGxNZXNzYWdlKHJvbGxzKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsQ2hvb3NlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAodGhpcy5vYmplY3Quc2V0dXAgIT09ICcnKSB7XG4gICAgICBjb25zdCBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICAgIGlmICh0eXBlb2Ygc2V0dXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IHJvbGxGb3JtdWxhcyA9IHt9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFsnc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93JywgJ2VkdSddKSB7XG4gICAgICAgICAgcm9sbEZvcm11bGFzW2tleV0gPSBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vYmplY3QuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgICAgIGNvbnN0IGFyY2hldHlwZSA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmNoZXR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljICE9PSAnJykge1xuICAgICAgICAgICAgICBpZiAoYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgcm9sbEZvcm11bGFzW3RoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpY10gPSBhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYmplY3Qucm9sbGVkVmFsdWVzID0gW11cbiAgICAgICAgY29uc3QgaHRtbCA9IFtdXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJvbGxGb3JtdWxhcykge1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChyb2xsRm9ybXVsYXNba2V5XS50b1N0cmluZygpKVxuICAgICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIHRoaXMub2JqZWN0LnJvbGxlZFZhbHVlcy5wdXNoKHtcbiAgICAgICAgICAgIHZhbHVlOiByb2xsLnRvdGFsLFxuICAgICAgICAgICAgYXNzaWduZWQ6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBodG1sLnB1c2goYXdhaXQgcmVuZGVyVGVtcGxhdGUoUm9sbC5DSEFUX1RFTVBMQVRFLCB7XG4gICAgICAgICAgICBmb3JtdWxhOiByb2xsRm9ybXVsYXNba2V5XS50b1N0cmluZygpLFxuICAgICAgICAgICAgdG9vbHRpcDogYXdhaXQgcm9sbC5nZXRUb29sdGlwKCksXG4gICAgICAgICAgICB0b3RhbDogcm9sbC50b3RhbFxuICAgICAgICAgIH0pKVxuICAgICAgICB9XG4gICAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29udGVudDogaHRtbC5qb2luKCc8ZGl2PiZuYnNwOzwvZGl2PicpLFxuICAgICAgICAgIHdoaXNwZXI6IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgMTAsIGxpLmRhdGFzZXQubWluLCBsaS5kYXRhc2V0Lm1heClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaS5kYXRhc2V0LmtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5Q2hhcmFjdGVyaXN0aWMobGkuZGF0YXNldC5rZXksIDEwKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBpZiAodHlwZW9mIGxpLmRhdGFzZXQub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5taW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5T2Zmc2V0KGxpLmRhdGFzZXQub2Zmc2V0LCAxLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAxKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBpZiAodHlwZW9mIGxpLmRhdGFzZXQub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5taW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5T2Zmc2V0KGxpLmRhdGFzZXQub2Zmc2V0LCAtMSwgbGkuZGF0YXNldC5taW4sIGxpLmRhdGFzZXQubWF4KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpLmRhdGFzZXQua2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlDaGFyYWN0ZXJpc3RpYyhsaS5kYXRhc2V0LmtleSwgLTEpXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgLTEwLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAtMTApXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBtb2RpZnlPZmZzZXQgKGtleSwgdmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSA9IE1hdGgubWF4KE1hdGgubWluKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSArIHZhbHVlLCBwYXJzZUludChtYXgsIDEwKSksIHBhcnNlSW50KG1pbiwgMTApKVxuICB9XG5cbiAgbW9kaWZ5Q2hhcmFjdGVyaXN0aWMgKGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0KSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSkgKyB2YWx1ZVxuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMucm9sbE1lc3NhZ2UoW3Jlc3VsdF0pXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gJChgI2ludmVzdGlnYXRvci13aXphcmQtYXBwbGljYXRpb24gbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpLmZpbmQoJ2lucHV0JylcbiAgICBjb25zdCBmb3JtdWxhID0gbGkuZGF0YSgncm9sbCcpXG4gICAgaWYgKGlucHV0ICYmIGZvcm11bGEpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZCB8fCB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID09PSAnJykge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZm9ybXVsYS50b1N0cmluZygpKVxuICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgaW5wdXQudmFsKHJvbGwudG90YWwpXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSBOdW1iZXIocm9sbC50b3RhbClcbiAgICAgICAgcmV0dXJuIFtrZXksIGZvcm11bGEudG9TdHJpbmcoKSwgcm9sbF1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKiogQG92ZXJyaWRlXG4gICAqIEEgc3ViY2xhc3Mgb2YgdGhlIEZvcm1BcHBsaWNhdGlvbiBtdXN0IGltcGxlbWVudCB0aGUgX29uQ2hhbmdlU3VibWl0IG1ldGhvZC5cbiAgICovXG4gIF9vbkNoYW5nZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgfVxuXG4gIF9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbmFtZSA9IG9iai5wcm9wKCduYW1lJylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW25hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbbmFtZV0gPSBvYmoudmFsKClcbiAgICAgIGxldCBlbXB0aWVzID0gZmFsc2VcbiAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldICE9PSAnJykge1xuICAgICAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICAgICAgdG90YWwgKz0gcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVtcHRpZXMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG9ialRvdGFsID0gb2JqLmNsb3Nlc3QoJ29sLml0ZW0tbGlzdCcpLmZpbmQoJ3NwYW4udG90YWwnKVxuICAgICAgY29uc3QgbWF4ID0gcGFyc2VJbnQob2JqVG90YWwuc2libGluZ3MoJ3NwYW4udmFsdWUnKS50ZXh0KCksIDEwKVxuICAgICAgb2JqVG90YWwudGV4dCh0b3RhbClcbiAgICAgIGlmICh0b3RhbCA9PT0gbWF4ICYmICFlbXB0aWVzKSB7XG4gICAgICAgIGlmIChvYmouY2xvc2VzdCgnZm9ybScpLmZpbmQoJ2J1dHRvbi5zdWJtaXQtYnV0dG9uW2RhdGEtYnV0dG9uPW5leHRdJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG9iai5jbG9zZXN0KCdmb3JtJykuZmluZCgnYnV0dG9uLnN1Ym1pdC1idXR0b25bZGF0YS1idXR0b249bmV4dF0nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldFBhZ2VOdW1iZXIgKGRpcmVjdGlvbikge1xuICAgIGNvbnN0IHBhZ2VPcmRlciA9IHRoaXMucGFnZU9yZGVyXG4gICAgY29uc3Qga2V5ID0gcGFyc2VJbnQoT2JqZWN0LmtleXMocGFnZU9yZGVyKS5maW5kKGtleSA9PiBwYWdlT3JkZXJba2V5XSA9PT0gdGhpcy5vYmplY3Quc3RlcCksIDEwKSArIGRpcmVjdGlvblxuICAgIHJldHVybiBwYWdlT3JkZXJba2V5XVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kLlxuICAgKi9cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKFsnYmFjaycsICduZXh0J10uaW5jbHVkZXMoZXZlbnQuc3VibWl0dGVyPy5kYXRhc2V0LmJ1dHRvbikpIHtcbiAgICAgIGlmIChldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lLmluZGV4T2YoJ2N1cnJlbnRseS1zdWJtaXR0aW5nJykgPiAtMSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGV2ZW50LnN1Ym1pdHRlci5jbGFzc05hbWUgPSBldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lICsgJyBjdXJyZW50bHktc3VibWl0dGluZydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZm9ybURhdGFbJ3dvcmxkLWVyYSddICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtb3duZXJzaGlwJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFNldHVwICE9PSBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRTZXR1cCA9IGZvcm1EYXRhWydkZWZhdWx0LXNldHVwJ11cbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnLCB0aGlzLm9iamVjdC5kZWZhdWx0U2V0dXApXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwID0gdGhpcy5vYmplY3QuZGVmYXVsdFNldHVwXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdE93bmVyc2hpcCAhPT0gZm9ybURhdGFbJ2RlZmF1bHQtb3duZXJzaGlwJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdE93bmVyc2hpcCA9IGZvcm1EYXRhWydkZWZhdWx0LW93bmVyc2hpcCddXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZE93bmVyc2hpcCcsIHRoaXMub2JqZWN0LmRlZmF1bHRPd25lcnNoaXApXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdEVyYSAhPT0gZm9ybURhdGFbJ3dvcmxkLWVyYSddKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9ICQodGhpcy5lbGVtZW50LmZpbmQoJ2Zvcm0nKSlcbiAgICAgICAgY29uc3Qgc3RhcnRlZCA9IERhdGUubm93KClcbiAgICAgICAgb2JqLmZpbmQoJy5kaWFsb2ctYnV0dG9uczpmaXJzdCcpLmhpZGUoKVxuICAgICAgICBvYmouZmluZCgnLnNjcm9sbHNlY3Rpb246Zmlyc3QnKS5oaWRlKClcbiAgICAgICAgb2JqLmZpbmQoJy5lcmFjaGFuZ2U6Zmlyc3QnKS5zaG93KClcbiAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdEVyYSA9IGZvcm1EYXRhWyd3b3JsZC1lcmEnXVxuICAgICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICd3b3JsZEVyYScsIHRoaXMub2JqZWN0LmRlZmF1bHRFcmEpXG4gICAgICAgIHRoaXMub2JqZWN0LmNhY2hlQ29DSUQgPSBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmxvYWRDYWNoZUl0ZW1CeUNvQ0lEKClcbiAgICAgICAgLy8gVG8gcHJldmVudCBmbGFzaGluZyBzaG93IG1lc3NhZ2UgZm9yIGF0IGxlYXN0IDUwMCBtc1xuICAgICAgICBjb25zdCBidWZmZXIgPSA1MDAgLSAoRGF0ZS5ub3coKSAtIHN0YXJ0ZWQpXG4gICAgICAgIC8vIERvbid0IGJvdGhlciBpZiBsZXNzIHRoYW4gMTBtcyByZW1haW5pbmdcbiAgICAgICAgaWYgKGJ1ZmZlciA+IDEwKSB7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGJ1ZmZlcikpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodHlwZW9mIGZvcm1EYXRhWydjaGFyYWN0ZXJpc3RpY3MtbWV0aG9kJ10gIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgICBjb25zdCB0eXBlID0gTnVtYmVyKGZvcm1EYXRhWydjaGFyYWN0ZXJpc3RpY3MtbWV0aG9kJ10pXG4gICAgICAgIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0RFRkFVTFQpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSBmYWxzZVxuICAgICAgICAgIHRoaXMub2JqZWN0LmNob29zZVJvbGxlZFZhbHVlcyA9IGZhbHNlXG4gICAgICAgICAgdGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzID0gW11cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1BPSU5UUykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmVuZm9yY2VQb2ludEJ1eSA9IHRydWVcbiAgICAgICAgICB0aGlzLm9iamVjdC5jaG9vc2VSb2xsZWRWYWx1ZXMgPSBmYWxzZVxuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFtdXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9WQUxVRVMpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSBmYWxzZVxuICAgICAgICAgIHRoaXMub2JqZWN0LmNob29zZVJvbGxlZFZhbHVlcyA9IGZhbHNlXG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFs5MCwgODAsIDcwLCA2MCwgNjAsIDUwLCA1MCwgNDBdXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFs4MCwgNzAsIDYwLCA2MCwgNTAsIDUwLCA1MCwgNDBdXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IHRoaXMuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfQ0hPT1NFKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZW5mb3JjZVBvaW50QnV5ID0gZmFsc2VcbiAgICAgICAgICB0aGlzLm9iamVjdC5jaG9vc2VSb2xsZWRWYWx1ZXMgPSB0cnVlXG4gICAgICAgICAgdGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzID0gW11cbiAgICAgICAgfVxuICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRQb2ludEJ1eScsIHRoaXMub2JqZWN0LmVuZm9yY2VQb2ludEJ1eSlcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVpY2tGaXJlJywgdGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzKVxuICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRDaG9vc2VWYWx1ZXMnLCB0aGlzLm9iamVjdC5jaG9vc2VSb2xsZWRWYWx1ZXMpXG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZCA9ICh0eXBlb2YgZm9ybURhdGFbJ3Jlcm9sbHMtZW5hYmxlZCddID09PSAnc3RyaW5nJylcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFJlcm9sbHMnLCB0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZClcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihmb3JtRGF0YVsncXVpY2stZmlyZS12YWx1ZXMtJyArIGldKVxuICAgICAgICBpZiAobnVtID4gMCkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlc1tpXSA9IG51bVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMuc29ydCgpLnJldmVyc2UoKVxuICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzKVxuICAgICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnZGVmYXVsdC1lbmFibGVkJ10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkudG9TdHJpbmcoKSA9PT0gJzAnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5ID0gMVxuICAgICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JywgdGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSA9IGZvcm1EYXRhWydkZWZhdWx0LXF1YW50aXR5J11cbiAgICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScsIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkudG9TdHJpbmcoKSAhPT0gJzAnKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSA9IDBcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknLCB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1zZXR1cCddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwICE9PSBmb3JtRGF0YVsnY29jLXNldHVwJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0dXAgPSBmb3JtRGF0YVsnY29jLXNldHVwJ11cbiAgICAgICAgdGhpcy5jbGVhclNldHVwUG9pbnRzKClcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRTa2lsbExpc3RzKClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBmb3JtRGF0YVsnY29jLWFyY2hldHlwZSddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LmFyY2hldHlwZSAhPT0gZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXSkge1xuICAgICAgICB0aGlzLm9iamVjdC5hcmNoZXR5cGUgPSBmb3JtRGF0YVsnY29jLWFyY2hldHlwZSddXG4gICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9ICcnXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1vY2N1cGF0aW9uJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3Qub2NjdXBhdGlvbiAhPT0gZm9ybURhdGFbJ2NvYy1vY2N1cGF0aW9uJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3Qub2NjdXBhdGlvbiA9IGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFba2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSAhPT0gZm9ybURhdGFba2V5XSkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSBmb3JtRGF0YVtrZXldXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1jb3JlLWNoYXJhY3RlcmlzdGljJ10gIT09ICd1bmRlZmluZWQnICYmIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyAhPT0gZm9ybURhdGFbJ2NvYy1jb3JlLWNoYXJhY3RlcmlzdGljJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljID0gZm9ybURhdGFbJ2NvYy1jb3JlLWNoYXJhY3RlcmlzdGljJ11cbiAgICAgICAgdGhpcy5jbGVhclNldHVwUG9pbnRzKClcbiAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBmbGF0S2V5cyA9IFsnbmFtZScsICdhZ2UnLCAncmVzaWRlbmNlJywgJ2JpcnRocGxhY2UnLCAnbGFuZ3VhZ2UnLCAnYXZhdGFyJywgJ3Rva2VuJ11cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBmbGF0S2V5cykge1xuICAgICAgaWYgKHR5cGVvZiBmb3JtRGF0YVtrZXldICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLm9iamVjdFtrZXldICE9PSBmb3JtRGF0YVtrZXldKSB7XG4gICAgICAgIHRoaXMub2JqZWN0W2tleV0gPSBmb3JtRGF0YVtrZXldXG4gICAgICAgIGlmIChrZXkgPT09ICdhZ2UnKSB7XG4gICAgICAgICAgdGhpcy5nZXRBZ2VBZGp1c3RtZW50cygpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGV2ZW50LnN1Ym1pdHRlcj8uZGF0YXNldC5idXR0b24gPT09ICdiYWNrJykge1xuICAgICAgY29uc3QgcGFnZU51bWJlciA9IHRoaXMuZ2V0UGFnZU51bWJlcigtMSlcbiAgICAgIGlmICh0eXBlb2YgcGFnZU51bWJlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc3RlcCA9IHBhZ2VOdW1iZXJcbiAgICAgICAgLy8gV2hlbiBtb3Zpbmcgc3RlcCByZXNldCBzY3JvbGwgaGVpZ2h0XG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMuZWxlbWVudC5maW5kKCcuc2Nyb2xsc2VjdGlvbicpXG4gICAgICAgIGlmIChvYmoubGVuZ3RoICYmIG9ialswXS5zY3JvbGxUb3ApIHtcbiAgICAgICAgICBvYmpbMF0uc2Nyb2xsVG9wID0gMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChldmVudC5zdWJtaXR0ZXI/LmRhdGFzZXQuYnV0dG9uID09PSAnbmV4dCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5zdGVwID09PSB0aGlzLnBhZ2VMaXN0LlBBR0VfQ1JFQVRFIHx8ICh0aGlzLm9iamVjdC5zdGVwID09PSB0aGlzLnBhZ2VMaXN0LlBBR0VfQkFDS1NUT1JZICYmIGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlKSkge1xuICAgICAgICB0aGlzLmF0dGVtcHRUb0NyZWF0ZSgpXG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcGFnZU51bWJlciA9IHRoaXMuZ2V0UGFnZU51bWJlcigxKVxuICAgICAgICBpZiAodHlwZW9mIHBhZ2VOdW1iZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc3RlcCA9IHBhZ2VOdW1iZXJcbiAgICAgICAgICAvLyBXaGVuIG1vdmluZyBzdGVwIHJlc2V0IHNjcm9sbCBoZWlnaHRcbiAgICAgICAgICBjb25zdCBvYmogPSB0aGlzLmVsZW1lbnQuZmluZCgnLnNjcm9sbHNlY3Rpb24nKVxuICAgICAgICAgIGlmIChvYmoubGVuZ3RoICYmIG9ialswXS5zY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIG9ialswXS5zY3JvbGxUb3AgPSAwXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBhdHRlbXB0VG9DcmVhdGUgKCkge1xuICAgIGNvbnN0IGFjdG9yRGF0YSA9IGF3YWl0IHRoaXMubm9ybWFsaXplQ2hhcmFjdGVyRGF0YSh0aGlzLm9iamVjdClcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00gfHwgZ2FtZS51c2VyLnJvbGUgPj0gQ09OU1QuVVNFUl9QRVJNSVNTSU9OUy5BQ1RPUl9DUkVBVEUuZGVmYXVsdFJvbGUpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGVDaGFyYWN0ZXIoYWN0b3JEYXRhKVxuICAgICAgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qga2VlcGVycyA9IGdhbWUudXNlcnMuZmlsdGVyKHUgPT4gdS5hY3RpdmUgJiYgdS5pc0dNKVxuICAgICAgaWYgKGtlZXBlcnMubGVuZ3RoKSB7XG4gICAgICAgIGFjdG9yRGF0YS5vd25lcnNoaXBbZ2FtZS51c2VyLmlkXSA9IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyLXdpemFyZCcsXG4gICAgICAgICAgbGlzdGVuZXI6IGtlZXBlcnNbMF0uaWQsXG4gICAgICAgICAgcGF5bG9hZDogYWN0b3JEYXRhXG4gICAgICAgIH1cbiAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5DcmVhdGluZ0ludmVzdGlnYXRvcicpXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1pc3NpbmdLZWVwZXJVc2VyJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG5vcm1hbGl6ZUNoYXJhY3RlckRhdGEgKGRhdGEpIHtcbiAgICBjb25zdCB3ZWFwb25Ta2lsbHMgPSB7XG4gICAgICBtZWxlZToge30sXG4gICAgICBybmdkOiB7fVxuICAgIH1cbiAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YS5za2lsbEl0ZW1zKSB7XG4gICAgICBjb25zdCBza2lsbCA9IGRhdGEuc2tpbGxJdGVtc1trZXldXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gc2tpbGwucm93cy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgY29uc3Qgcm93ID0gc2tpbGwucm93c1tpbmRleF1cbiAgICAgICAgaWYgKCFza2lsbC5mbGFncy5pc011bHRpcGxlIHx8IHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBsZXQgaXRlbSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHNraWxsLml0ZW0pXG4gICAgICAgICAgaWYgKHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UgJiYgdHlwZW9mIHJvdy5zZWxlY3RlZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGl0ZW0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShyb3cuc2VsZWN0ZWQpXG4gICAgICAgICAgICByb3cuc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocm93Lm9jY3VwYXRpb25Ub2dnbGUpIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmZsYWdzLm9jY3VwYXRpb24gPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyb3cuYXJjaGV0eXBlVG9nZ2xlKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5mbGFncy5hcmNoZXR5cGUgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBiYXNlID0gaXRlbS5zeXN0ZW0uYmFzZVxuICAgICAgICAgIGlmICghTnVtYmVyLmlzTnVtZXJpYyhiYXNlKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YS5zZXR1cFBvaW50cykge1xuICAgICAgICAgICAgICBjb25zdCByZWdFeCA9IG5ldyBSZWdFeHAoJ0AnICsga2V5LCAnaScpXG4gICAgICAgICAgICAgIGJhc2UgPSBiYXNlLnJlcGxhY2UocmVnRXgsIHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghTnVtYmVyLmlzTnVtZXJpYyhiYXNlKSkge1xuICAgICAgICAgICAgYmFzZSA9IE1hdGguZmxvb3IobmV3IEF2ZXJhZ2VSb2xsKCcoJyArIGJhc2UgKyAnKScpWyghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpID8gJ2V2YWx1YXRlJyA6ICdldmFsdWF0ZVN5bmMnKS8qIC8vIEZvdW5kcnlWVFQgdjExICovXSh7IG1pbmltaXplOiB0cnVlLCBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbClcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uYmFzZSA9IGJhc2VcbiAgICAgICAgICBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cyA9IGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzID8/IHt9XG4gICAgICAgICAgaWYgKE51bWJlcihyb3cucGVyc29uYWxQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMucGVyc29uYWwgPSBwYXJzZUludChyb3cucGVyc29uYWxQb2ludHMsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5vY2N1cGF0aW9uUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLm9jY3VwYXRpb24gPSBwYXJzZUludChyb3cub2NjdXBhdGlvblBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChOdW1iZXIocm93LmFyY2hldHlwZVBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cy5hcmNoZXR5cGUgPSBwYXJzZUludChyb3cuYXJjaGV0eXBlUG9pbnRzLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKE51bWJlcihyb3cuZXhwZXJpZW5jZVBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlID0gcGFyc2VJbnQocm93LmV4cGVyaWVuY2VQb2ludHMsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsTmFtZSA9IGRhdGEubGFuZ3VhZ2VcbiAgICAgICAgICAgIGl0ZW0ubmFtZSA9IGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uICsgJyAoJyArIGl0ZW0uc3lzdGVtLnNraWxsTmFtZSArICcpJ1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJvdy5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsTmFtZSA9IHJvdy5zZWxlY3RlZFxuICAgICAgICAgICAgaXRlbS5faWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKClcbiAgICAgICAgICAgIGl0ZW0ubmFtZSA9IGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uICsgJyAoJyArIGl0ZW0uc3lzdGVtLnNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NJZChpdGVtKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uZmlnaHRpbmcpIHtcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLm5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbE5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0gfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmFuZ2VkKSB7XG4gICAgICAgICAgICB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLm5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsTmFtZV0gPSBpdGVtLl9pZFxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBzb3VyY2VJdGVtIG9mIGRhdGEuaW52ZXN0aWdhdG9ySXRlbXMpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzb3VyY2VJdGVtKVxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkID0gd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgPSB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lXVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCA9IHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChpdGVtKVxuICAgIH1cbiAgICBsZXQgbW9uZXRhcnkgPSB7fVxuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgIGlmIChzZXR1cCkge1xuICAgICAgbW9uZXRhcnkgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzZXR1cC5zeXN0ZW0ubW9uZXRhcnkpXG4gICAgfVxuICAgIGNvbnN0IGRldmVsb3BtZW50ID0ge1xuICAgICAgcGVyc29uYWw6IDIgKiAocGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5pbnQsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuaW50LCAxMCkpLFxuICAgICAgb2NjdXBhdGlvbjogMCxcbiAgICAgIGFyY2hldHlwZTogMFxuICAgIH1cbiAgICBpZiAoZGF0YS5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICBjb25zdCBhcmNoZXR5cGUgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGRhdGEuYXJjaGV0eXBlKVxuICAgICAgaWYgKGFyY2hldHlwZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaXRlbXMucHVzaChhcmNoZXR5cGVbMF0udG9PYmplY3QoKSlcbiAgICAgICAgZGV2ZWxvcG1lbnQuYXJjaGV0eXBlID0gYXJjaGV0eXBlWzBdLnN5c3RlbS5ib251c1BvaW50c1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZGF0YS5vY2N1cGF0aW9uICE9PSAnJykge1xuICAgICAgY29uc3Qgb2NjdXBhdGlvbiA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQoZGF0YS5vY2N1cGF0aW9uKVxuICAgICAgaWYgKG9jY3VwYXRpb24ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGl0ZW1zLnB1c2gob2NjdXBhdGlvblswXS50b09iamVjdCgpKVxuICAgICAgICBjb25zdCBvcHRpb25zID0gW11cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBjYXJhY10gb2YgT2JqZWN0LmVudHJpZXMob2NjdXBhdGlvblswXS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKSkge1xuICAgICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMucHVzaChjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGV2ZWxvcG1lbnQub2NjdXBhdGlvbiArPSBjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBkZXZlbG9wbWVudC5vY2N1cGF0aW9uICs9IE1hdGgubWF4KC4uLm9wdGlvbnMpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYmlvZ3JhcGh5ID0gW11cbiAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gZGF0YS5iaW9TZWN0aW9ucy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgIGJpb2dyYXBoeS5wdXNoKHtcbiAgICAgICAgdGl0bGU6IGRhdGEuYmlvU2VjdGlvbnNbaW5kZXhdLm5hbWUsXG4gICAgICAgIHZhbHVlOiBkYXRhLmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3QgYWN0b3JEYXRhID0ge1xuICAgICAgdHlwZTogJ2NoYXJhY3RlcicsXG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICBpbWc6IGRhdGEuYXZhdGFyLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIGNoYXJhY3RlcmlzdGljczoge1xuICAgICAgICAgIHN0cjoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuc3RyLCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnN0ciwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb246IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmNvbiwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5jb24sIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2l6OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5zaXosIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuc2l6LCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRleDoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuZGV4LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmRleCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmFwcCwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5hcHAsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW50OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5pbnQsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuaW50LCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBvdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMucG93LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnBvdywgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmVkdSwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5lZHUsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXR0cmliczoge1xuICAgICAgICAgIGxjazoge1xuICAgICAgICAgICAgdmFsdWU6IE1hdGgubWF4KHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMubHVjaywgMTApLCBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmx1Y2ssIDEwKSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMucG93LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnBvdywgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbmZvczoge1xuICAgICAgICAgIGFnZTogZGF0YS5hZ2UsXG4gICAgICAgICAgcmVzaWRlbmNlOiBkYXRhLnJlc2lkZW5jZSxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiBkYXRhLmJpcnRocGxhY2VcbiAgICAgICAgfSxcbiAgICAgICAgZGV2ZWxvcG1lbnQsXG4gICAgICAgIGJpb2dyYXBoeSxcbiAgICAgICAgbW9uZXRhcnlcbiAgICAgIH0sXG4gICAgICBwcm90b3R5cGVUb2tlbjoge1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGFjdG9yTGluazogdHJ1ZSxcbiAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgIHNyYzogZGF0YS50b2tlblxuICAgICAgICB9LFxuICAgICAgICBkaXNwb3NpdGlvbjogQ09OU1QuVE9LRU5fRElTUE9TSVRJT05TLkZSSUVORExZLFxuICAgICAgICBzaWdodDoge1xuICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGl0ZW1zLFxuICAgICAgb3duZXJzaGlwOiB7XG4gICAgICAgIGRlZmF1bHQ6IHBhcnNlSW50KGRhdGEuZGVmYXVsdE93bmVyc2hpcCwgMTApXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhY3RvckRhdGFcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVDaGFyYWN0ZXJGcm9tRGF0YSAoYWN0b3JEYXRhKSB7XG4gICAgY29uc3QgYWN0b3IgPSBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZUNoYXJhY3RlcihhY3RvckRhdGEpXG4gICAgY29uc3QgZnVuY3Rpb25JZCA9IEhvb2tzLm9uKCdyZW5kZXJBY3RvclNoZWV0JywgKGFwcCwgaHRtbCwgZGF0YSkgPT4ge1xuICAgICAgaWYgKGFwcC5vYmplY3QuaWQgPT09IGFjdG9yLmlkKSB7XG4gICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgIHR5cGU6ICdvcGVuLWNoYXJhY3RlcicsXG4gICAgICAgICAgbGlzdGVuZXI6IE9iamVjdC5rZXlzKGFjdG9yRGF0YS5vd25lcnNoaXApLmZpbmQoayA9PiBrICE9PSAnZGVmYXVsdCcpLFxuICAgICAgICAgIHBheWxvYWQ6IGFjdG9yLmlkXG4gICAgICAgIH0pXG4gICAgICAgIEhvb2tzLm9mZigncmVuZGVyQWN0b3JTaGVldCcsIGZ1bmN0aW9uSWQpXG4gICAgICB9XG4gICAgfSlcbiAgICBhY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVDaGFyYWN0ZXIgKGFjdG9yRGF0YSkge1xuICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQWN0b3IuY3JlYXRlKGFjdG9yRGF0YSlcbiAgICBhd2FpdCBhY3Rvci51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzogYWN0b3IucmF3SHBNYXgsXG4gICAgICAnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnOiBhY3Rvci5yYXdNcE1heCxcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4ubWF4JzogYWN0b3IucmF3TXBNYXhcbiAgICB9KVxuICAgIGF3YWl0IGFjdG9yLnJlc2V0RGFpbHlTYW5pdHkoKVxuICAgIHJldHVybiBhY3RvclxuICB9XG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBpdCdzIHRoZSBkZWZhdWx0IHdheSB0byBjcmVhdGUgdGhlIENvQzdDaGFyYWN0ZXJXaXphcmRcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIC8vIEF0dGVtcHQgdG8gZml4IGJhZCBzZXR0aW5nXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZENob29zZVZhbHVlcycpICE9PSB0cnVlICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZENob29zZVZhbHVlcycpICE9PSBmYWxzZSkge1xuICAgICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkQ2hvb3NlVmFsdWVzJywgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkQ2hvb3NlVmFsdWVzJylbMF0gPz8gZmFsc2UpXG4gICAgfVxuICAgIC8vIFRyeSBhbmQgcHJlcmVxdXN0IGFzIG1hbnkgQ29DSURzIGR1ZSB0byB0aGUgd2F5IHRoZXkgaGF2ZSB0byBiZSBsb2FkZWRcbiAgICBvcHRpb25zID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh7XG4gICAgICBzdGVwOiAwLFxuICAgICAgZGVmYXVsdFNldHVwOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRTZXR1cCcpLFxuICAgICAgZGVmYXVsdFF1YW50aXR5OiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScpLFxuICAgICAgZGVmYXVsdE93bmVyc2hpcDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkT3duZXJzaGlwJyksXG4gICAgICBkZWZhdWx0RXJhOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpLFxuICAgICAgcmVyb2xsc0VuYWJsZWQ6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFJlcm9sbHMnKSxcbiAgICAgIGVuZm9yY2VQb2ludEJ1eTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUG9pbnRCdXknKSxcbiAgICAgIHF1aWNrRmlyZVZhbHVlczogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVpY2tGaXJlJyksXG4gICAgICBjaG9vc2VSb2xsZWRWYWx1ZXM6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZENob29zZVZhbHVlcycpLFxuICAgICAgcGxhY2VhYmxlOiBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWlja0ZpcmUnKSksXG4gICAgICBjYWNoZUNvQ0lEOiBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmxvYWRDYWNoZUl0ZW1CeUNvQ0lEKCksXG4gICAgICBjYWNoZUJhY2tzdG9yaWVzOiBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IC9ecnRcXC5cXC5iYWNrc3RvcnktLywgdHlwZTogJ3J0JyB9KSxcbiAgICAgIGNhY2hlSXRlbXM6IHt9LFxuICAgICAgc2V0dXA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFNldHVwJyksXG4gICAgICBza2lsbEl0ZW1zOiB7fSxcbiAgICAgIG9jY3VwYXRpb25Hcm91cHM6IHt9LFxuICAgICAgaW52ZXN0aWdhdG9ySXRlbXM6IFtdLFxuICAgICAgc2V0dXBQb2ludHM6IHtcbiAgICAgICAgc3RyOiAnJyxcbiAgICAgICAgY29uOiAnJyxcbiAgICAgICAgc2l6OiAnJyxcbiAgICAgICAgZGV4OiAnJyxcbiAgICAgICAgYXBwOiAnJyxcbiAgICAgICAgaW50OiAnJyxcbiAgICAgICAgcG93OiAnJyxcbiAgICAgICAgZWR1OiAnJyxcbiAgICAgICAgbHVjazogJydcbiAgICAgIH0sXG4gICAgICBzZXR1cE1vZGlmaWVyczoge1xuICAgICAgICBzdHI6IDAsXG4gICAgICAgIGNvbjogMCxcbiAgICAgICAgc2l6OiAwLFxuICAgICAgICBkZXg6IDAsXG4gICAgICAgIGFwcDogMCxcbiAgICAgICAgaW50OiAwLFxuICAgICAgICBwb3c6IDAsXG4gICAgICAgIGVkdTogMCxcbiAgICAgICAgbHVjazogMFxuICAgICAgfSxcbiAgICAgIHJvbGxlZFZhbHVlczogW10sXG4gICAgICBhcmNoZXR5cGU6ICcnLFxuICAgICAgY29yZUNoYXJhY3RlcmlzdGljOiAnJyxcbiAgICAgIG9jY3VwYXRpb246ICcnLFxuICAgICAgYmlvU2VjdGlvbnM6IFtdLFxuICAgICAgcGVyc29uYWw6IDAsXG4gICAgICBwZXJzb25hbFRleHQ6ICcnLFxuICAgICAgY3JlZGl0UmF0aW5nOiB7XG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiAwXG4gICAgICB9LFxuICAgICAgbmFtZTogJycsXG4gICAgICBhZ2U6ICcnLFxuICAgICAgcmVxdWlyZXNBZ2VBZGp1c3RtZW50czogZmFsc2UsXG4gICAgICByZXNpZGVuY2U6ICcnLFxuICAgICAgYmlydGhwbGFjZTogJycsXG4gICAgICBsYW5ndWFnZTogJycsXG4gICAgICBhdmF0YXI6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcbiAgICAgIHRva2VuOiAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZydcbiAgICB9LCBvcHRpb25zKVxuICAgIG5ldyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkKG9wdGlvbnMpLnJlbmRlcih0cnVlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIEFjdG9yU2hlZXQsIGNhbnZhcywgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGZyb21VdWlkLCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29DSURBY3RvclVwZGF0ZUl0ZW1zIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGlkOiAnY29jLWlkLWFjdG9yLXVwZGF0ZS1pdGVtcycsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2ludmVzdGlnYXRvci13aXphcmQnXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JDb0NJREl0ZW1zQmVzdCcpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY29jLWlkLWFjdG9yLXVwZGF0ZS1pdGVtcy5oYnMnLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDEwLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEubGFuZyA9IENPTkZJRy5zdXBwb3J0ZWRMYW5ndWFnZXNbZ2FtZS5pMThuLmxhbmddID8/ICc/J1xuICAgIGNvbnN0IGRlZmF1bHRFcmEgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXG4gICAgc2hlZXREYXRhLmlzRW4gPSBnYW1lLmkxOG4ubGFuZyA9PT0gJ2VuJ1xuICAgIHNoZWV0RGF0YS5lcmEgPSBnYW1lLmkxOG4uZm9ybWF0KENPQzcuZXJhc1tkZWZhdWx0RXJhXSA/PyAnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZGVmYXVsdEVyYSB9KVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgZ2V0VXBkYXRlRGF0YSAoaXRlbSkge1xuICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIENvQzc6IHtcbiAgICAgICAgICBjb2NpZEZsYWc6IGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWdcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgIHN5c3RlbToge31cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydjaGF0JywgJ2tlZXBlcicsICdub3RlcycsICdvcHBvc2luZ0RpZmZpY3VsdHknLCAncHVzaGVkRmFpbGx1cmVDb25zZXF1ZW5jZXMnLCAnc3BlY2lhbCcsICd2YWx1ZSddKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uPy5ba2V5XSA9PT0gJ3N0cmluZycgJiYgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb25ba2V5XS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0cHV0LnN5c3RlbSwgJ2Rlc2NyaXB0aW9uJykpIHtcbiAgICAgICAgICBvdXRwdXQuc3lzdGVtLmRlc2NyaXB0aW9uID0ge31cbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQuc3lzdGVtLmRlc2NyaXB0aW9uW2tleV0gPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbltrZXldXG4gICAgICB9XG4gICAgfVxuICAgIHN3aXRjaCAoaXRlbS50eXBlKSB7XG4gICAgICBjYXNlICdhcmNoZXR5cGUnOlxuICAgICAgICBvdXRwdXQuc3lzdGVtLnN1Z2dlc3RlZE9jY3VwYXRpb25zID0gaXRlbS5zeXN0ZW0uc3VnZ2VzdGVkT2NjdXBhdGlvbnNcbiAgICAgICAgb3V0cHV0LnN5c3RlbS5zdWdnZXN0ZWRUcmFpdHMgPSBpdGVtLnN5c3RlbS5zdWdnZXN0ZWRUcmFpdHNcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2Jvb2snOlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnb2NjdXBhdGlvbic6XG4gICAgICAgIG91dHB1dC5zeXN0ZW0uc3VnZ2VzdGVkQ29udGFjdHMgPSBpdGVtLnN5c3RlbS5zdWdnZXN0ZWRDb250YWN0c1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICBvdXRwdXQuc3lzdGVtLnNraWxsTmFtZSA9IGl0ZW0uc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICBvdXRwdXQuc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3NwZWxsJzpcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3N0YXR1cyc6XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICBhc3luYyB1cGRhdGVBY3RvcnMgKGFjdG9yTGlzdCwgcGFyZW50LCBhbnkpIHtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBjb25zdCB1bmxpbmtlZEFjdG9ycyA9IGF3YWl0IGFjdG9yTGlzdC5maWx0ZXIoYSA9PiBhLnRva2VuPy5hY3RvckxpbmsgPT09IGZhbHNlKS5tYXAoYSA9PiBhLmlkKS5maWx0ZXIoKGEsIG8sIHYpID0+IHYuaW5kZXhPZihhKSA9PT0gbykucmVkdWNlKGFzeW5jIChjLCBpKSA9PiB7XG4gICAgICAgIGMucHVzaChhd2FpdCBmcm9tVXVpZCgnQWN0b3IuJyArIGkpKVxuICAgICAgICByZXR1cm4gY1xuICAgICAgfSwgW10pXG4gICAgICBhY3Rvckxpc3QgPSB1bmxpbmtlZEFjdG9ycy5jb25jYXQoYWN0b3JMaXN0KVxuICAgIH1cbiAgICBjb25zdCBpZHMgPSB7fVxuICAgIGNvbnN0IGFueXMgPSB7fVxuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JMaXN0KSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWN0b3IuaXRlbXMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICghYW55ICYmIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQubWF0Y2goLy1hbnkkLykpIHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFueXMsIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQpKSB7XG4gICAgICAgICAgICAgIGFueXNbaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZF0gPSBbXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW55c1tpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXS5wdXNoKGFjdG9yLm5hbWUpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlkc1tpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXSA9IHt9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGZvdW5kID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiBnYW1lLnN5c3RlbS5hcGkuY29jaWQubWFrZUdyb3VwUmVnRXgoT2JqZWN0LmtleXMoaWRzKSksIHR5cGU6ICdpJywgc2hvd0xvYWRpbmc6IHRydWUgfSlcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZm91bmQpIHtcbiAgICAgIGlkc1tpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXSA9IHRoaXMuZ2V0VXBkYXRlRGF0YShpdGVtLnRvT2JqZWN0KCkpXG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhhbnlzKS5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkIGFueSBrZXlzIG9uIEFjdG9ycycsIGFueXMpXG4gICAgfVxuICAgIGNvbnN0IGFsbFVwZGF0ZXMgPSBbXVxuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JMaXN0KSB7XG4gICAgICBjb25zdCB1cGRhdGVzID0gW11cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3Rvci5pdGVtcy5jb250ZW50cykge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGlkcywgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCkpIHtcbiAgICAgICAgICB1cGRhdGVzLnB1c2goZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh7XG4gICAgICAgICAgICBfaWQ6IGl0ZW0uaWRcbiAgICAgICAgICB9LCBpZHNbaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZF0pKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodXBkYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgYWxsVXBkYXRlcy5wdXNoKHtcbiAgICAgICAgICBfaWQ6IGFjdG9yLmlkLFxuICAgICAgICAgIGl0ZW1zOiB1cGRhdGVzXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChhbGxVcGRhdGVzLmxlbmd0aCkge1xuICAgICAgQWN0b3IudXBkYXRlRG9jdW1lbnRzKGFsbFVwZGF0ZXMpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKGV2ZW50LnN1Ym1pdHRlcj8uZGF0YXNldC5idXR0b24gPT09ICd1cGRhdGUnKSB7XG4gICAgICBpZiAoZXZlbnQuc3VibWl0dGVyLmNsYXNzTmFtZS5pbmRleE9mKCdjdXJyZW50bHktc3VibWl0dGluZycpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lID0gZXZlbnQuc3VibWl0dGVyLmNsYXNzTmFtZSArICcgY3VycmVudGx5LXN1Ym1pdHRpbmcnXG4gICAgICBjb25zdCBwYXJlbnQgPSB0eXBlb2YgZm9ybURhdGFbJ2NvYy1pZC1hY3Rvci11cGRhdGUtaXRlbXMtcGFyZW50J10gPT09ICdzdHJpbmcnXG4gICAgICBjb25zdCBhbnkgPSB0eXBlb2YgZm9ybURhdGFbJ2NvYy1pZC1hY3Rvci11cGRhdGUtaXRlbXMtYW55J10gPT09ICdzdHJpbmcnXG4gICAgICBjb25zdCB3aGljaCA9IChmb3JtRGF0YVsnY29jLWlkLWFjdG9yLXVwZGF0ZS1pdGVtcy13aGljaCddID8/ICcnKS50b1N0cmluZygpXG4gICAgICBzd2l0Y2ggKHdoaWNoKSB7XG4gICAgICAgIGNhc2UgJzEnOlxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQWN0b3JzKGNhbnZhcy5zY2VuZS50b2tlbnMuY29udGVudHMubWFwKGQgPT4gZC5vYmplY3QuYWN0b3IpLCBwYXJlbnQsIGFueSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICcyJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUFjdG9ycyhPYmplY3QudmFsdWVzKHVpLndpbmRvd3MpLmZpbHRlcihzID0+IHMgaW5zdGFuY2VvZiBBY3RvclNoZWV0KS5tYXAocyA9PiBzLm9iamVjdCksIHBhcmVudCwgYW55KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJzMnOlxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQWN0b3JzKGdhbWUuYWN0b3JzLmNvbnRlbnRzLCBmYWxzZSwgYW55KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAob3B0aW9ucyA9IHt9KSB7XG4gICAgbmV3IENvQ0lEQWN0b3JVcGRhdGVJdGVtcyhvcHRpb25zKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgZm91bmRyeSwgZ2FtZSwgUGxhY2VhYmxlc0xheWVyICovXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4vYXBwcy9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIH0gZnJvbSAnLi9hcHBzL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5pbXBvcnQgQ29DSURBY3RvclVwZGF0ZUl0ZW1zIGZyb20gJy4vYXBwcy9jb2MtaWQtYWN0b3ItdXBkYXRlLWl0ZW1zLmpzJ1xuXG5jbGFzcyBDb0M3TWVudUxheWVyIGV4dGVuZHMgUGxhY2VhYmxlc0xheWVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLm9iamVjdHMgPSB7fVxuICB9XG5cbiAgc3RhdGljIGdldCBsYXllck9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmxheWVyT3B0aW9ucywge1xuICAgICAgbmFtZTogJ2NvYzdtZW51JyxcbiAgICAgIHpJbmRleDogNjBcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldCBkb2N1bWVudE5hbWUgKCkge1xuICAgIHJldHVybiAnVG9rZW4nXG4gIH1cblxuICBnZXQgcGxhY2VhYmxlcyAoKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdNZW51IHtcbiAgc3RhdGljIGdldEJ1dHRvbnMgKGNvbnRyb2xzKSB7XG4gICAgY2FudmFzLmNvYzdnbXRvb2xzID0gbmV3IENvQzdNZW51TGF5ZXIoKVxuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBzaG93SGlkZGVuRGV2TWVudSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKVxuICAgIGNvbnRyb2xzLnB1c2goe1xuICAgICAgbmFtZTogJ2NvYzdtZW51JyxcbiAgICAgIHRpdGxlOiAnQ29DNy5HbVRvb2xzJyxcbiAgICAgIGxheWVyOiAnY29jN2dtdG9vbHMnLFxuICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tdGVudGFjbGUtc3RyaWtlJyxcbiAgICAgIHZpc2libGU6IGlzS2VlcGVyLFxuICAgICAgdG9vbHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLWFuZ2xlLWRvdWJsZS11cCcsXG4gICAgICAgICAgbmFtZTogJ2RldnBoYXNlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5EZXZQaGFzZScsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgdG9nZ2xlID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlRGV2UGhhc2UodG9nZ2xlKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdXNlci1lZGl0JyxcbiAgICAgICAgICBuYW1lOiAnY2hhcmNyZWF0ZScsXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyksXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkNoYXJDcmVhdGlvbk1vZGUnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIHRvZ2dsZSA9PlxuICAgICAgICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVDaGFyQ3JlYXRpb24odG9nZ2xlKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtZmluZ2VycHJpbnQnLFxuICAgICAgICAgIG5hbWU6ICdhY3Rvci1jb2MtaWQtYmVzdCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkFjdG9yQ29DSURJdGVtc0Jlc3QnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+IGF3YWl0IENvQ0lEQWN0b3JVcGRhdGVJdGVtcy5jcmVhdGUoKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdXNlci1wbHVzJyxcbiAgICAgICAgICBuYW1lOiAnYWN0b3ItaW1wb3J0JyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuQWN0b3JJbXBvcnRlcicsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuY3JlYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItY2hlY2snLFxuICAgICAgICAgIG5hbWU6ICdpbnZlc3RpZ2F0b3Itd2l6YXJkJyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuSW52ZXN0aWdhdG9yV2l6YXJkLlRpdGxlJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1jZXJ0aWZpY2F0ZScsXG4gICAgICAgICAgY2xhc3M6ICd4cF90b2dnbGUnLFxuICAgICAgICAgIG5hbWU6ICd4cHRvZ2dsZScsXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcudG9nZ2xlWFAnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIHRvZ2dsZSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZVhQR2Fpbih0b2dnbGUpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tY2FyZC1qb2tlcicsXG4gICAgICAgICAgbmFtZTogJ2Zha2Vyb2xsJyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuRmFrZVJvbGwnLFxuICAgICAgICAgIG9uQ2xpY2s6IENvQzdDaGF0LmZha2VSb2xsTWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtbW9vbicsXG4gICAgICAgICAgbmFtZTogJ3N0YXJ0cmVzdCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LnN0YXJ0UmVzdCcsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXRUYXJnZXQoKVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgICBpZiAoc2hvd0hpZGRlbkRldk1lbnUpIHtcbiAgICAgIGNhbnZhcy5jb2M3RGV2VG9vbHMgPSBuZXcgQ29DN01lbnVMYXllcigpXG4gICAgICBjb250cm9scy5wdXNoKHtcbiAgICAgICAgbmFtZTogJ2NvYzdEZXZNZW51JyxcbiAgICAgICAgdGl0bGU6XG4gICAgICAgICAgXCJEZXYgdG9vbHMuIElmIHlvdSBkb24ndCBrbm93IHdoYXQgaXQgaXMsIHlvdSBkb24ndCBuZWVkIGl0IGFuZCB5b3Ugc2hvdWxkbid0IHVzZSBpdCAhIVwiLFxuICAgICAgICBsYXllcjogJ2NvYzdEZXZUb29scycsXG4gICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLXBvbGljZS1iYWRnZScsXG4gICAgICAgIHZpc2libGU6IGlzS2VlcGVyLFxuICAgICAgICB0b29sczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLWRpY2UtZmlyZScsXG4gICAgICAgICAgICBuYW1lOiAnYWx3YXlzQ3JpdCcsXG4gICAgICAgICAgICBhY3RpdmU6IGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNDcml0LFxuICAgICAgICAgICAgdGl0bGU6ICdBbGwgcm9sbHMgd2lsbCBjcml0JyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUgPSBmYWxzZVxuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCA9IHRvZ2dsZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tZmlyZS1leHRpbmd1aXNoZXInLFxuICAgICAgICAgICAgbmFtZTogJ2Fsd2F5c0Z1bWJsZScsXG4gICAgICAgICAgICBhY3RpdmU6IGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUsXG4gICAgICAgICAgICB0aXRsZTogJ0FsbCByb2xscyB3aWxsIGZ1bWJsZScsXG4gICAgICAgICAgICBvbkNsaWNrOiB0b2dnbGUgPT4ge1xuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzRnVtYmxlID0gdG9nZ2xlXG4gICAgICAgICAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNDcml0ID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHJlbmRlckNvbnRyb2xzIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBjb25zdCBpc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgY29uc3Qga2VlcGVyTWVudSA9IGh0bWwuZmluZCgnLmdhbWUtaWNvbi10ZW50YWNsZS1zdHJpa2UnKS5wYXJlbnQoKVxuICAgIGtlZXBlck1lbnUuYWRkQ2xhc3MoJ2NvYzctbWVudScpXG4gICAgaWYgKGlzS2VlcGVyKSB7XG4gICAgICBrZWVwZXJNZW51LmFmdGVyKFxuICAgICAgICAnPGxpIGNsYXNzPVwic2NlbmUtY29udHJvbCBjb2M3LW1lbnUgY29jNy1jcmVhdGUtbGlua1wiIHRpdGxlPVwiJyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyZWF0ZUxpbmsnKSArXG4gICAgICAgICAgJ1wiPjxpIGNsYXNzPVwiZmFzIGZhLWxpbmtcIj48L2k+PC9saT4nXG4gICAgICApXG4gICAgfVxuICAgIGtlZXBlck1lbnUuYWZ0ZXIoXG4gICAgICAnPGxpIGNsYXNzPVwic2NlbmUtY29udHJvbCBjb2M3LW1lbnUgY29jNy1kaWNlLXJvbGxcIiB0aXRsZT1cIicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpY2UnKSArXG4gICAgICAgICdcIj48aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tZDEwXCI+PC9pPjwvbGk+J1xuICAgIClcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmNvYzctbWVudS5jb2M3LWRpY2Utcm9sbCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gQ29DN1V0aWxpdGllcy5yb2xsRGljZShldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jb2M3LW1lbnUuY29jNy1jcmVhdGUtbGluaycpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShldmVudCkpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9jb2M3LWxpbmsuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2FudmFzIHtcbiAgc3RhdGljIGdldCBDT0M3X1RZUEVTX1NVUFBPUlRFRCAoKSB7XG4gICAgcmV0dXJuIFsnQ29DN0xpbmsnLCAnbG9jYXRvcicsICdnZXRUb2tlbiddXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgb25Ecm9wU29tZXRoaW5nIChjYW52YXMsIGRhdGEpIHtcbiAgICBpZiAoXG4gICAgICBkYXRhLnR5cGUgJiZcbiAgICAgIENvQzdDYW52YXMuQ09DN19UWVBFU19TVVBQT1JURUQuaW5jbHVkZXMoZGF0YS50eXBlKVxuICAgICkge1xuICAgICAgY29uc3QgZ3JpZFNpemUgPSBjYW52YXMuc2NlbmUuZ3JpZC5zaXplXG4gICAgICBjb25zdCB4ID0gZGF0YS54IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCB5ID0gZGF0YS55IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCBoZWlnaHQgPSBncmlkU2l6ZVxuICAgICAgY29uc3Qgd2lkdGggPSBncmlkU2l6ZVxuICAgICAgbGV0IGRyb3BUYXJnZXRUb2tlbnMgPSBjYW52YXMudG9rZW5zLnBsYWNlYWJsZXMuZmlsdGVyKG9iaiA9PiB7XG4gICAgICAgIGNvbnN0IGMgPSBvYmouY2VudGVyXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy54LCB4LCB4ICsgd2lkdGgpICYmXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy55LCB5LCB5ICsgaGVpZ2h0KVxuICAgICAgICApXG4gICAgICB9KSAvLyBGaW5kIGRyb3AgdGFyZ2V0LlxuICAgICAgaWYgKCFkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkgZHJvcFRhcmdldFRva2VucyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCAvLyBJZiBubyB0YXJnZXQgd2hpc3BlciB0byBzZWxlY3RlZCB0b2tlblxuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnQ29DN0xpbmsnOlxuICAgICAgICAgIGlmIChkYXRhLmNoZWNrID09PSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCkge1xuICAgICAgICAgICAgaWYgKGRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgZHJvcFRhcmdldFRva2Vucykge1xuICAgICAgICAgICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKHRva2VuLmFjdG9yLCBkYXRhKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBBcHBseSB0byBldmVyeW9uZSA/IG9yIG9ubHkgcGxheWVycyA/IG9yIG5vYm9keVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZHJvcFRhcmdldFRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UoZGF0YSwgZHJvcFRhcmdldFRva2Vucy5maWx0ZXIodCA9PiB0LmFjdG9yLm93bmVycy5sZW5ndGgpLm1hcCh0ID0+IHQuYWN0b3IpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb0M3TGluay50b1doaXNwZXJNZXNzYWdlKGRhdGEsIGdhbWUudXNlcnMucGxheWVycy5maWx0ZXIodSA9PiAhIXUuY2hhcmFjdGVyKS5tYXAodSA9PiB1LmNoYXJhY3RlcikpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2dldFRva2VuJzpcbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGEuYXBwSWQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmNhbGxCYWNrID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdWkud2luZG93c1tkYXRhLmFwcElkXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHVpLndpbmRvd3NbZGF0YS5hcHBJZF1bZGF0YS5jYWxsQmFja10gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHVpLndpbmRvd3NbZGF0YS5hcHBJZF1bZGF0YS5jYWxsQmFja10oZHJvcFRhcmdldFRva2VucylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICAvLyBIYW5kbGVzIGdlbmVyaWMgY2FudmEgZHJvcC5cbiAgICAgICAgLy8gZGF0YVRyYW5zZmVyIG11c3QgaW5jbHVkZSA6XG4gICAgICAgIC8vIC0gZG9jVXVpZCA6IHRoZSBVdWlkIG9mIHRoZSBkb2N1bWVudCB0byBjYWxsXG4gICAgICAgIC8vIC0gY2FsbEJhY2sgOiB0aGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24gdG8gY2FsbCBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICAgIC8vIFVzZWQgdG8gc2VsZWN0IGxvY2F0aW9uIGZvciBjaGFzZVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmIChkYXRhLmRvY1V1aWQgJiYgZGF0YS5jYWxsQmFjaykge1xuICAgICAgICAgICAgY29uc3QgZG9jID0gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQoZGF0YS5kb2NVdWlkKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBkb2NbZGF0YS5jYWxsQmFja10gJiZcbiAgICAgICAgICAgICAgdHlwZW9mIGRvY1tkYXRhLmNhbGxCYWNrXSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGF0YS5zY2VuZSA9IGNhbnZhcy5zY2VuZS51dWlkXG4gICAgICAgICAgICAgICAgZG9jW2RhdGEuY2FsbEJhY2tdKGRhdGEpXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yLm1lc3NhZ2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcsIERpYWxvZywgZ2FtZSwgU2V0dGluZ3MgKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2V0dGluZ3NEaXJlY3RvcnkgZXh0ZW5kcyBTZXR0aW5ncyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJyNzZXR0aW5ncy1nYW1lJylcbiAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cInRyaWdnZXItZGF0YS1taWdyYXRpb25cIj48aSBjbGFzcz1cImZhcyBmYS13cmVuY2hcIj48L2k+ICcgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVHJpZ2dlckJ1dHRvbicpICtcbiAgICAgICAgICAgICc8L2J1dHRvbj4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnI3NldHRpbmdzLWRvY3VtZW50YXRpb24nKVxuICAgICAgICAuYXBwZW5kKCc8YnV0dG9uIGNsYXNzPVwidHJpZ2dlci1zeXN0ZW0tbWFudWFsXCI+PGkgY2xhc3M9XCJmYXMgZmEtYm9va3NcIj48L2k+ICcgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3lzdGVtLkRvY3VtZW50YXRpb24nKSArXG4gICAgICAgICc8L2J1dHRvbj4nKVxuICAgICAgaHRtbC5maW5kKCcudHJpZ2dlci1kYXRhLW1pZ3JhdGlvbicpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgbmV3IERpYWxvZyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVHJpZ2dlclRpdGxlJyksXG4gICAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyQ29udGVudHMnKSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgbWlncmF0ZToge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyUmVzdGFydCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgMClcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2xvc2U6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtYmFuXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ2FuY2VsJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHt9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2xvc2UnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7fVxuICAgICAgICApLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICAgIGh0bWwuZmluZCgnLnRyaWdnZXItc3lzdGVtLW1hbnVhbCcpLmNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgKGF3YWl0IGdhbWUucGFja3MuZ2V0KCdDb0M3LnN5c3RlbS1kb2MnKS5nZXREb2N1bWVudChDT05GSUcuQ29DNy5NYW51YWwpKT8uc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENvbXBlbmRpdW1EaXJlY3RvcnksIERpYWxvZywgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDb21wZW5kaXVtRGlyZWN0b3J5IGV4dGVuZHMgQ29tcGVuZGl1bURpcmVjdG9yeSB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBsZXQgdHJhbnNsYXRlZCA9IGZhbHNlXG4gICAgaWYgKGdhbWUuaTE4bi5sYW5nID09PSAnZW4nKSB7XG4gICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGdhbWUuYmFiZWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCB2IG9mIE9iamVjdC52YWx1ZXMoZ2FtZS5iYWJlbGUubW9kdWxlcykpIHtcbiAgICAgICAgaWYgKHYubGFuZyA9PT0gZ2FtZS5pMThuLmxhbmcpIHtcbiAgICAgICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdHJhbnNsYXRlZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YSBjbGFzcz1cImNvbXBlbmRpdW0tdHJhbnNsYXRpb25cIiB0aXRsZT1cIicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlVGl0bGUnKSArXG4gICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpICtcbiAgICAgICAgICAgICc8L2E+J1xuICAgICAgICApXG4gICAgICBodG1sLmZpbmQoJy5jb21wZW5kaXVtLXRyYW5zbGF0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlV2FybmluZycpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVJbnN0YWxsQmFiZWxlJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUluc3RhbGxUcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVFbmFibGVUcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVOb1RyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+J1xuICAgICAgICBuZXcgRGlhbG9nKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpLFxuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgICAgZGVmYXVsdDogJ2Nsb3NlJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAge31cbiAgICAgICAgKS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3JEaXJlY3RvcnksIENPTlNULCBnYW1lICovXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyB9IGZyb20gJy4vYXBwcy9hY3Rvci1pbXBvcnRlci1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIH0gZnJvbSAnLi9hcHBzL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JEaXJlY3RvcnkgZXh0ZW5kcyBBY3RvckRpcmVjdG9yeSB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIC8vIEFsbG93IEludmVzdGlnYXRvciBXaXphcmRcbiAgICAvLyAgKiBJZiB0aGUgdXNlciByb2xlIGlzIGFsbG93ZWQgdG8gY3JlYXRlIGFjdG9yc1xuICAgIC8vICAqIElmIHRoZSB1c2VyIGhhcyBsZXNzIG93bmVkIGFjdG9ycyB0aGFuIGFsbG93ZWQgaW4gc2V0dGluZ3NcbiAgICBsZXQgYWxsb3dXaXphcmQgPSBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZVxuICAgIGlmICghYWxsb3dXaXphcmQpIHtcbiAgICAgIGNvbnN0IGFsbG93ZWQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScpXG4gICAgICBpZiAoYWxsb3dlZCA+IDApIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBnYW1lLmFjdG9ycy5maWx0ZXIoYSA9PiBbYS5vd25lcnNoaXAuZGVmYXVsdCwgKGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FKV0uaW5jbHVkZXMoQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUikpLmxlbmd0aFxuICAgICAgICBhbGxvd1dpemFyZCA9IGV4aXN0aW5nIDwgYWxsb3dlZFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhbGxvd1dpemFyZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKCc8YSBjbGFzcz1cImludmVzdGlnYXRvci13aXphcmRcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5UaXRsZScpICsgJzwvYT4nKVxuICAgICAgaHRtbC5maW5kKCcuaW52ZXN0aWdhdG9yLXdpemFyZCcpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGUoKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLnJvbGUgPj0gQ09OU1QuVVNFUl9QRVJNSVNTSU9OUy5BQ1RPUl9DUkVBVEUuZGVmYXVsdFJvbGUpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ2Zvb3Rlci5kaXJlY3RvcnktZm9vdGVyJylcbiAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAnPGEgY2xhc3M9XCJhY3Rvci1pbXBvcnRcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyJykgK1xuICAgICAgICAgICAgJzwvYT4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnLmFjdG9yLWltcG9ydCcpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuY3JlYXRlKClcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIERpYWxvZywgZm91bmRyeSwgZ2FtZSwgUm9sbCwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U3BlbGwgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcGVudGFncmFtLXJvc2Uuc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcbiAgfVxuXG4gIGFzeW5jIGNhc3QgKHByaXYpIHtcbiAgICBpZiAoIXRoaXMuaXNPd25lZCkge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfVxuICAgIGNvbnN0IGNvc3RzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uY29zdHMpXG4gICAgY29uc3QgbG9zc2VzID0gW11cbiAgICBsZXQgY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzXG4gICAgY29zdHMubWFnaWNQb2ludHMgPSBDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShjb3N0cy5tYWdpY1BvaW50cylcbiAgICAgID8gKGF3YWl0IG5ldyBSb2xsKGNvc3RzLm1hZ2ljUG9pbnRzKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICA6IHBhcnNlSW50KGNvc3RzLm1hZ2ljUG9pbnRzKVxuICAgIGlmIChcbiAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzICYmXG4gICAgICBjb3N0cy5tYWdpY1BvaW50cyA+IHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWVcbiAgICApIHtcbiAgICAgIGNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25zdCBjb252ZXJ0ZWRIaXRQb2ludHMgPVxuICAgICAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzIC0gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZVxuICAgICAgICBjb25zdCBjb252ZXJ0ZWRNYWdpY1BvaW50cyA9IGNvc3RzLm1hZ2ljUG9pbnRzIC0gY29udmVydGVkSGl0UG9pbnRzXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdGl0bGU6ICcgJyxcbiAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk5vdEVub3VnaE1hZ2ljUG9pbnRzJywge1xuICAgICAgICAgICAgYWN0b3JNYWdpY1BvaW50czogdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSxcbiAgICAgICAgICAgIGNvbnZlcnRlZEhpdFBvaW50cyxcbiAgICAgICAgICAgIGNvbnZlcnRlZE1hZ2ljUG9pbnRzLFxuICAgICAgICAgICAgb3JpZ2luYWxNYWdpY1BvaW50czogY29zdHMubWFnaWNQb2ludHMsXG4gICAgICAgICAgICBzcGVsbDogdGhpcy5uYW1lXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgY2FuY2VsOiB7XG4gICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhbmNlbCcpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvY2VlZDoge1xuICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29zdHMuaGl0UG9pbnRzID0gY29udmVydGVkSGl0UG9pbnRzXG4gICAgICAgICAgICAgICAgY29zdHMubWFnaWNQb2ludHMgPSBjb252ZXJ0ZWRNYWdpY1BvaW50c1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlZmF1bHQ6ICdjYW5jZWwnLFxuICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnXVxuICAgICAgICB9XG4gICAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgICAgaWYgKCFjb252ZXJ0U3VycGx1c0ludG9IaXRQb2ludHMpIHJldHVyblxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb3N0cykpIHtcbiAgICAgIGlmICghdmFsdWUgfHwgTnVtYmVyKHZhbHVlKSA9PT0gMCkgY29udGludWVcbiAgICAgIGxvc3Nlcy5wdXNoKGF3YWl0IHRoaXMucmVzb2x2ZUxvc3NlcyhrZXksIHZhbHVlLCBwcml2KSlcbiAgICB9XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zcGVsbC9jaGF0Lmh0bWwnXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgeyBkZXNjcmlwdGlvbiwgbG9zc2VzIH0pXG4gICAgbGV0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxuICAgICAgZmxhdm9yOiB0aGlzLm5hbWUsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuICAgIGlmIChwcml2KSB7XG4gICAgICBjaGF0RGF0YSA9IENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsICdnbXJvbGwnKVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICB9XG5cbiAgYXN5bmMgcmVzb2x2ZUxvc3NlcyAoY2hhcmFjdGVyaXN0aWMsIHZhbHVlLCBwcml2KSB7XG4gICAgbGV0IGNoYXJhY3RlcmlzdGljTmFtZVxuICAgIGxldCBsb3NzXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNGb3JtdWxhKHZhbHVlKSkge1xuICAgICAgbG9zcyA9IChhd2FpdCBuZXcgUm9sbCh2YWx1ZSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgIH0gZWxzZSB7XG4gICAgICBsb3NzID0gcGFyc2VJbnQodmFsdWUpXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHRoaXMuYWN0b3Iuc3lzdGVtXG4gICAgc3dpdGNoIChjaGFyYWN0ZXJpc3RpYykge1xuICAgICAgY2FzZSAnaGl0UG9pbnRzJzpcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhpdFBvaW50cycpXG4gICAgICAgIHRoaXMuYWN0b3IuZGVhbERhbWFnZShsb3NzLCB7IGlnbm9yZUFybW9yOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzYW5pdHknOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5UG9pbnRzJylcbiAgICAgICAgbG9zcyA9IGF3YWl0IHRoaXMuZ3JhbnRTYW5pdHlMb3NzKGxvc3MsIHByaXYpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtYWdpY1BvaW50cyc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NYWdpY1BvaW50cycpXG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0TXAoYWN0b3JEYXRhLmF0dHJpYnMubXAudmFsdWUgLSBsb3NzKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncG93ZXInOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Qb3dlcicpXG4gICAgICAgIHRoaXMuYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnOlxuICAgICAgICAgICAgYWN0b3JEYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgLSBsb3NzXG4gICAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiB7IGNoYXJhY3RlcmlzdGljTmFtZSwgbG9zcyB9XG4gIH1cblxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXG4gIGFzeW5jIGdyYW50U2FuaXR5TG9zcyAodmFsdWUsIHByaXYpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZVxuICAgIGxldCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHt9KVxuICAgIGxldCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DYXN0aW5nU3BlbGwnLCB7XG4gICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcbiAgICAgIH0pLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cbiAgICBpZiAocHJpdikge1xuICAgICAgY2hhdERhdGEgPSBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCAnZ21yb2xsJylcbiAgICB9XG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgbWVzc2FnZS5nZXRIVE1MKClcbiAgICBpZiAodHlwZW9mIGNhcmQubGVuZ3RoICE9PSAndW5kZWZpbmVkJyAmJiBjYXJkLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zcyA9IHZhbHVlXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cbiAgICAgIGh0bWwuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICAgICAgc2FuRGF0YToge1xuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxuICAgICAgICAgICAgc2FuTWF4OiBzYW5pdHlMb3NzXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgY29uc3Qgc2FuaXR5Q2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgcmV0dXJuIHNhbml0eUNoZWNrLnNhbkxvc3NcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGUgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5jb250ZXh0LnBhcmVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLmNvbnRleHQuYm9va0lkICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgbGV0IGl0ZW1cbiAgICAgIGxldCBib29rXG4gICAgICAvLyBsZXQgc3BlbGxEYXRhXG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5jb250ZXh0LmJvb2tJZClcbiAgICAgICAgYm9vayA9IGl0ZW0udG9PYmplY3QoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYm9vayA9IHRoaXMuY29udGV4dC5wYXJlbnQuaXRlbXMuZ2V0KHRoaXMuY29udGV4dC5ib29rSWQpLnRvT2JqZWN0KClcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IGJvb2suc3lzdGVtLnNwZWxscy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGlmIChib29rLnN5c3RlbS5zcGVsbHNbaV0uX2lkID09PSB0aGlzLmlkKSB7XG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzW2ldID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChib29rLnN5c3RlbS5zcGVsbHNbaV0sIGRhdGEpXG4gICAgICAgICAgLy8gc3BlbGxEYXRhID0gYm9vay5zeXN0ZW0uc3BlbGxzW2ldXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbnRleHQucGFyZW50ID09PSBudWxsKSB7XG4gICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAnc3lzdGVtLnNwZWxscyc6IGJvb2suc3lzdGVtLnNwZWxsc1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLnNoZWV0Lm9iamVjdCA9IG5ldyBDb0M3U3BlbGwoXG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzLmZpbmQoc3BlbGwgPT4gc3BlbGwuX2lkID09PSB0aGlzLmlkKSxcbiAgICAgICAgICB0aGlzLmNvbnRleHRcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LnBhcmVudC51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtib29rXSlcbiAgICAgICAgdGhpcy5zaGVldC5vYmplY3QgPSBuZXcgQ29DN1NwZWxsKFxuICAgICAgICAgIGJvb2suc3lzdGVtLnNwZWxscy5maW5kKHNwZWxsID0+IHNwZWxsLl9pZCA9PT0gdGhpcy5pZCksXG4gICAgICAgICAgdGhpcy5jb250ZXh0XG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHN1cGVyLnVwZGF0ZShkYXRhLCBjb250ZXh0KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBmb3VuZHJ5LCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3U3BlbGwgfSBmcm9tICcuLi9zcGVsbC9kYXRhLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0Jvb2sgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2VjcmV0LWJvb2suc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgLyoqIENvbnZlcnQgdGhlIGRpZmZpY3VsdHkgb24gdGhlIHNlbGVjdCBlbGVtZW50IHRvIGEgZm9ybWF0IGFjY2VwdGVkICovXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnaGFyZCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICdjcml0aWNhbCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgICBjYXNlICd1bnJlYWRhYmxlJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgdGhlIGZ1dHVyZTogYWRkIGFkdmFuY2VkIHJ1bGVzIGZvciBsZWFybmluZyBzcGVsbHMsIHBnLiAxNzZcbiAgICogQHBhcmFtIFt7RG9jdW1lbnR9XSBzcGVsbHNcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgYWRkU3BlbGxzIChzcGVsbHMpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5zeXN0ZW0uc3BlbGxzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnNwZWxscylcbiAgICAgIDogW11cbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxscykge1xuICAgICAgY29sbGVjdGlvbi5wdXNoKHNwZWxsKVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnNwZWxscyc6IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIHNwZWxsRGV0YWlsIChpbmRleCkge1xuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBkYXRhID0gdGhpcy5zeXN0ZW0uc3BlbGxzW2luZGV4XVxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuYWN0b3IgPyB0aGlzLmFjdG9yIDogbnVsbFxuICAgIGNvbnN0IHNwZWxsID0gbmV3IENvQzdTcGVsbChkYXRhLCB7IHBhcmVudCwgYm9va0lkOiB0aGlzLmlkIH0pXG4gICAgaWYgKGlzS2VlcGVyIHx8IHNwZWxsLnN5c3RlbS5sZWFybmVkKSB7XG4gICAgICByZXR1cm4gYXdhaXQgc3BlbGwuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYWxsIHRoZSBsb2dpYyBpbnZvbHZpbmcgdGhlIGF0dGVtcHQgb2YgaW5pdGlhbCByZWFkaW5nXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBAc2VlIGxpc3RlbiBAc2VlIGdyYW50SW5pdGlhbFJlYWRpbmdcbiAgICovXG4gIGFzeW5jIGF0dGVtcHRJbml0aWFsUmVhZGluZyAoKSB7XG4gICAgLyoqIENvbnZlcnRzIHRoZSBkaWZmaWN1bHR5IHZhbHVlIHRvIHNvbWV0aGluZyBhY2NlcHRlZCBieSBDb0M3Q2hlY2sgKi9cbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0Jvb2suY29udmVydERpZmZpY3VsdHkoXG4gICAgICB0aGlzLnN5c3RlbS5kaWZmaWN1bHR5TGV2ZWxcbiAgICApXG4gICAgY29uc3QgbGFuZ3VhZ2UgPSB0aGlzLnN5c3RlbS5sYW5ndWFnZVxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uZ2V0U2tpbGxzQnlOYW1lKGxhbmd1YWdlKVxuICAgIGlmICghc2tpbGwpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH0gZWxzZSBpZiAoc2tpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBY3RvciB3aG8gb3ducyB0aGlzIGRvZXMgbm90IGhhdmUgdGhlIHNraWxsIG9mXG4gICAgICAgKiB0aGUgbGFuZ3VhZ2UgaW4gd2hpY2ggaXQgd2FzIHdyaXR0ZW5cbiAgICAgICAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVW5rbm93bkxhbmd1YWdlJywgeyBhY3RvcjogdGhpcy5hY3Rvci5uYW1lIH0pXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIGNoZWNrLnNraWxsID0gc2tpbGxbMF0uaWRcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcbiAgICAgIGNoZWNrLmNvbnRleHQgPSAnSU5JVElBTF9SRUFESU5HJ1xuICAgICAgY2hlY2suZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkQXR0ZW1wdCcsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lLFxuICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5zeXN0ZW0uZGlmZmljdWx0eUxldmVsXG4gICAgICB9KVxuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICByZXR1cm4gYXdhaXQgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRzIGlzIGNhbGxlZCBldmVyeSB0aW1lIHRoZSB1c2VyIGludGVyYWN0cyBpbiBzb21lIHdheSB3aXRoIHByb2dyZXNzIGJhclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZSAncmVzZXQnIHx8ICdpbmNyZWFzZScgfHwgJ2RlY3JlYXNlJ1xuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUganVzdCBzbyB0aGF0IHByb2dyZXNzIGlzIG5vdCBncmVhdGVyIHRoYW4gbmVjZXNzYXJ5XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGNoYW5nZVByb2dyZXNzIChtb2RlLCB2YWx1ZSkge1xuICAgIGlmICghdGhpcy5pc093bmVkICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIC8qKiBBY3RvciBkaWQgbm90IHBlcmZvcm1lZCBhbiBpbml0aWFsIHJlYWRpbmcgZmlyc3QgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYWxSZWFkaW5nTmVlZGVkJywge1xuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICAgIGlmICghdGhpcy5zeXN0ZW0udHlwZS5teXRob3MgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE15dGhvc1RvbWUnKSlcbiAgICB9XG4gICAgY29uc3QgbmVjZXNzYXJ5ID0gdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5XG4gICAgbGV0IGZ1bGxTdHVkeSA9IHRoaXMuc3lzdGVtLmZ1bGxTdHVkeVxuICAgIGxldCBwcm9ncmVzcyA9IHRoaXMuc3lzdGVtLnN0dWR5LnByb2dyZXNzXG4gICAgaWYgKGlzTmFOKHByb2dyZXNzKSkge1xuICAgICAgLyoqIEl0IHNlZW1zIGEgbGl0dGxlIGltcG9zc2libGUsIGJ1dCB5b3UgbmV2ZXIga25vdyAqL1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IDBcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICh2YWx1ZSAmJiBwcm9ncmVzcyA+IHZhbHVlKSB7XG4gICAgICAvKipcbiAgICAgICAqIFByb2dyZXNzIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB2YWx1ZSBlbnRlcmVkIGJ5IHVzZXIgYXMgbmVjZXNzYXJ5LFxuICAgICAgICogcmVzZXQgcHJvZ3Jlc3MgdG8gYmUgZXF1YWwgbmVjZXNzYXJ5IGFuZCBjb21wbGV0ZSBmdWxsIHN0dWR5XG4gICAgICAgKi9cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5mdWxsU3R1ZHknOiArK2Z1bGxTdHVkeSxcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IHZhbHVlXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29tcGxldGVGdWxsU3R1ZHkoKVxuICAgIH1cbiAgICBpZiAobW9kZSA9PT0gJ2luY3JlYXNlJyAmJiBwcm9ncmVzcyA8IG5lY2Vzc2FyeSkge1xuICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBwbHVzIGljb24gdG8gaW5jcmVhc2UgcHJvZ3Jlc3MgKi9cbiAgICAgIGlmICgoYXdhaXQgdGhpcy5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlKSByZXR1cm5cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6ICsrcHJvZ3Jlc3NcbiAgICAgIH0pXG4gICAgICBpZiAocHJvZ3Jlc3MgPT09IG5lY2Vzc2FyeSkge1xuICAgICAgICAvKiogQ29tcGxldGUgZnVsbCBzdHVkeSBpZiBwcm9ncmVzcyBpcyBlcXVhbCBuZWNlc3NhcnkgKi9cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZ1bGxTdHVkeSc6ICsrZnVsbFN0dWR5IH0pXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50RnVsbFN0dWR5KClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdkZWNyZWFzZScgJiYgcHJvZ3Jlc3MgPiAwKSB7XG4gICAgICAvKiogVXNlciBjbGlja2VkIG9uIG1pbnVzIGljb24gdG8gZGVjcmVhc2UgcHJvZ3Jlc3MgKi9cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAtLXByb2dyZXNzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNoZWNrRXhoYXVzdGlvbiAoKSB7XG4gICAgY29uc3QgYWN0b3JNeXRob3NWYWx1ZSA9IHRoaXMuYWN0b3I/LmN0aHVsaHVNeXRob3NcbiAgICBjb25zdCBteXRob3NSYXRpbmcgPSB0aGlzLnN5c3RlbS5teXRob3NSYXRpbmdcbiAgICBpZiAodGhpcy5zeXN0ZW0uaW5pdGlhbFJlYWRpbmcpIHtcbiAgICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlID49IG15dGhvc1JhdGluZykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IHRoaXMuc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQm9va0hhc05vdGhpbmdNb3JlVG9UZWFjaCcsIHtcbiAgICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9IGVsc2UgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ3JhbnRGdWxsU3R1ZHkgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0udHlwZS5teXRob3MpIHJldHVyblxuICAgIGlmICgoYXdhaXQgdGhpcy5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlKSByZXR1cm5cbiAgICBjb25zdCBhY3Rvck15dGhvc1ZhbHVlID0gdGhpcy5hY3Rvci5jdGh1bGh1TXl0aG9zXG4gICAgY29uc3QgZGV2ZWxvcG1lbnRzID0gW11cbiAgICBjb25zdCBteXRob3NSYXRpbmcgPSB0aGlzLnN5c3RlbS5teXRob3NSYXRpbmdcbiAgICBsZXQgbXl0aG9zRmluYWwgPSB0aGlzLnN5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmZpbmFsXG4gICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgKyBteXRob3NGaW5hbCA+IG15dGhvc1JhdGluZykge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBteXRob3NGaW5hbDsgaW5kZXgrKykge1xuICAgICAgICBpZiAoYWN0b3JNeXRob3NWYWx1ZSArIG15dGhvc0ZpbmFsIC0gaW5kZXggPD0gbXl0aG9zUmF0aW5nKSB7XG4gICAgICAgICAgbXl0aG9zRmluYWwgLT0gaW5kZXhcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmVhZGVyIGF1dG9tYXRpY2FsbHkgZ2FpbnMgYSBza2lsbCB0aWNrIGZvciB0aGVcbiAgICAgKiBsYW5ndWFnZSBpbiB3aGljaCB0aGUgYm9vayBpcyB3cml0dGVuXG4gICAgICovXG4gICAgZGV2ZWxvcG1lbnRzLnB1c2goXG4gICAgICB7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmN0aHVsaHUtbXl0aG9zJyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG15dGhvc0ZpbmFsKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0ubGFuZ3VhZ2UsXG4gICAgICAgIGdhaW46ICdkZXZlbG9wbWVudCdcbiAgICAgIH1cbiAgICApXG4gICAgYXdhaXQgdGhpcy5ncmFudFNraWxsRGV2ZWxvcG1lbnQoZGV2ZWxvcG1lbnRzKVxuICAgIGF3YWl0IHRoaXMucm9sbFNhbml0eUxvc3MoKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmZ1bGxTdHVkaWVzJzogKyt0aGlzLnN5c3RlbS5mdWxsU3R1ZGllc1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgZ3JhbnRJbml0aWFsUmVhZGluZyAoKSB7XG4gICAgLyoqIElmIGluaXRpYWwgcmVhZGluZyBoYXMgYWxyZWFkeSBiZWVuIGRvbmUgdGhlcmUgaXMgbm90aGluZyB0byBkbyBoZXJlICovXG4gICAgaWYgKHRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nKSByZXR1cm5cbiAgICBjb25zdCBkZXZlbG9wbWVudHMgPSBbXVxuICAgIGNvbnN0IG15dGhvcyA9IHtcbiAgICAgIGdhaW5zOiB0aGlzLnN5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwsXG4gICAgICB0eXBlOiB0aGlzLnN5c3RlbS50eXBlLm15dGhvc1xuICAgIH1cbiAgICBjb25zdCBvY2N1bHQgPSB7XG4gICAgICBnYWluczogdGhpcy5zeXN0ZW0uZ2FpbnMub2NjdWx0LFxuICAgICAgdHlwZTogdGhpcy5zeXN0ZW0udHlwZS5vY2N1bHRcbiAgICB9XG4gICAgY29uc3Qgb3RoZXIgPSB7XG4gICAgICBnYWluczogdGhpcy5zeXN0ZW0uZ2FpbnMub3RoZXJzLFxuICAgICAgdHlwZTogdGhpcy5zeXN0ZW0udHlwZS5vdGhlclxuICAgIH1cbiAgICBpZiAobXl0aG9zLnR5cGUgJiYgbXl0aG9zLmdhaW5zKSB7XG4gICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmN0aHVsaHUtbXl0aG9zJyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG15dGhvcy5nYWlucylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChvY2N1bHQudHlwZSAmJiBvY2N1bHQuZ2FpbnMpIHtcbiAgICAgIGRldmVsb3BtZW50cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9jY3VsdCcpLFxuICAgICAgICBnYWluOiBwYXJzZUludChvY2N1bHQuZ2FpbnMpXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAob3RoZXIudHlwZSkge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBvdGhlci5nYWlucykge1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gc2tpbGwubmFtZS5tYXRjaCgvXiguKykgXFwoKC4rKVxcKSQvKVxuICAgICAgICAvKiogU2FuaXRpemF0aW9uIHRvIGRlYWwgd2l0aCBzcGVjaWFsaXphdGlvbnMgKi9cbiAgICAgICAgaWYgKHBhdHRlcm4pIHtcbiAgICAgICAgICBza2lsbC5zcGVjaWFsaXphdGlvbiA9IHBhdHRlcm5bMV1cbiAgICAgICAgICBza2lsbC5uYW1lID0gcGF0dGVyblsyXVxuICAgICAgICB9XG4gICAgICAgIGlmIChza2lsbC52YWx1ZSAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIHNraWxsLnZhbHVlID0gKFxuICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoc2tpbGwudmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICkudG90YWxcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2tpbGwudmFsdWUpIHtcbiAgICAgICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBza2lsbC5uYW1lLFxuICAgICAgICAgICAgZ2Fpbjogc2tpbGwudmFsdWUsXG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc2tpbGwuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuZ3JhbnRTa2lsbERldmVsb3BtZW50KGRldmVsb3BtZW50cylcbiAgICBpZiAoKG15dGhvcy50eXBlIHx8IG9jY3VsdC50eXBlKSAmJiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxTYW5pdHlMb3NzKClcbiAgICB9XG4gICAgLyoqIE1hcmsgaW5pdGlhbCByZWFkaW5nIGFzIGNvbXBsZXRlICovXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5pbml0aWFsUmVhZGluZyc6IHRydWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0l0ZW19IHNwZWxsbGVhcm5lZCBUaGUgc3BlbGwgdGhhdCB3YXMgbGVhcm5lZCBzdWNjZXNzZnVsbHkgZnJvbSBib29rXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBncmFudFNwZWxsTGVhcm5pbmcgKHNwZWxsbGVhcm5lZCkge1xuICAgIGZvciAoY29uc3Qgc3BlbGwgb2YgdGhpcy5zeXN0ZW0uc3BlbGxzKSB7XG4gICAgICBpZiAoc3BlbGwuX2lkID09PSBzcGVsbGxlYXJuZWQuX2lkKSB7XG4gICAgICAgIHNwZWxsLnN5c3RlbS5sZWFybmVkID0gdHJ1ZVxuICAgICAgICAvLyBEb2VzIHRoZSBhY3RvciBhbHJlYWR5IGhhcyBhIHNwZWxsIG9mIHRoYXQgbmFtZT8gVGhlbiBkbyBub3QgYWRkIHRoZSBzcGVsbFxuICAgICAgICBjb25zdCBleGlzdGluZ1NwZWxsID0gYXdhaXQgdGhpcy5hY3Rvci5pdGVtcy5maW5kKFxuICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyAmJiBpdGVtLm5hbWUgPT09IHNwZWxsbGVhcm5lZC5uYW1lXG4gICAgICAgIClcbiAgICAgICAgaWYgKCFleGlzdGluZ1NwZWxsKSB7XG4gICAgICAgICAgc3BlbGxsZWFybmVkLnN5c3RlbS5sZWFybmVkID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbGxBbHJlYWR5TGVhcm5lZCcsIHtcbiAgICAgICAgICAgICAgc3BlbGw6IHNwZWxsbGVhcm5lZC5uYW1lLFxuICAgICAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNhdmUgc3BlbGwgbGlzdCBvZiBib29rXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnNwZWxscyc6IHRoaXMuc3lzdGVtLnNwZWxscyB9KVxuICAgIC8vIEFkZCBsZWFybmVkIHNwZWxsIHRvIGFjdG9yXG4gICAgaWYgKHNwZWxsbGVhcm5lZC5zeXN0ZW0ubGVhcm5lZCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZWxsU3VjY2Vzc2Z1bGx5TGVhcm5lZCcsIHtcbiAgICAgICAgICBzcGVsbDogc3BlbGxsZWFybmVkLm5hbWUsXG4gICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzcGVsbGxlYXJuZWQpXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNlaXZlcyBhbiBBcnJheSBvZiBza2lsbHMgYW5kIGhhbmRsZXMgYWxsIHRoZSBsb2dpYyB0byBkZXZlbG9wIHRoZW1cbiAgICogQHBhcmFtIHtBcnJheX0gZGV2ZWxvcG1lbnRzIEBzZWUgZ3JhbnRJbml0aWFsUmVhZGluZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBncmFudFNraWxsRGV2ZWxvcG1lbnQgKGRldmVsb3BtZW50cykge1xuICAgIGlmIChkZXZlbG9wbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm5cbiAgICBmb3IgKGNvbnN0IGRldmVsb3BtZW50IG9mIGRldmVsb3BtZW50cykge1xuICAgICAgLyoqIFRlc3QgaWYgdGhlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvICovXG4gICAgICBpZiAoIWRldmVsb3BtZW50LmdhaW4pIGNvbnRpbnVlXG4gICAgICBsZXQgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmdldFNraWxsc0J5TmFtZShkZXZlbG9wbWVudC5uYW1lKVxuICAgICAgLyoqIFRoZSBBY3RvciBkb2VzIG5vdCBvd24gdGhpcyBza2lsbCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICogRmlyc3QsIGNoZWNrIGlmIHRoZXJlIGlzIGFueSBza2lsbCBpbiB0aGUgZ2FtZSB3aXRoIHRoZSBzYW1lIG5hbWVcbiAgICAgICAqIEluIHRoZSBsYXN0IGFsdGVybmF0aXZlIGp1c3QgY3JlYXRlIGEgbmV3IGdlbmVyaWMgc2tpbGxcbiAgICAgICAqL1xuICAgICAgaWYgKHNraWxsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1NraWxsID0gYXdhaXQgZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJiBpdGVtLm5hbWUgPT09IGRldmVsb3BtZW50Lm5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoZXhpc3RpbmdTa2lsbCkge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcbiAgICAgICAgICAgIGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nU2tpbGwpXG4gICAgICAgICAgXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuY3JlYXRlU2tpbGwoZGV2ZWxvcG1lbnQubmFtZSwgMClcbiAgICAgICAgICBpZiAoZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICAgICAgJ3N5c3RlbS5zcGVjaWFsaXphdGlvbic6IGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2tpbGwgPSBza2lsbFswXVxuICAgICAgaWYgKGRldmVsb3BtZW50LmdhaW4gPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgLyoqIFNpbXBseSBtYXJrIHRoZSBza2lsbCBmb3IgZGV2ZWxvcG1lbnQgKi9cbiAgICAgICAgYXdhaXQgc2tpbGwuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIHJlY2VpdmVkIHZhbHVlIGdhaW5lZCBpcyBudW1lcmljLCBlbnN1cmUgdGhhdCB0aGUgYW1vdW50XG4gICAgICAgICAqIHdpbGwgbm90IGV4Y2VlZCB0aGUgbWF4aW11bSB2YWx1ZSBvZiA5OVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlICsgZGV2ZWxvcG1lbnQuZ2FpbiA+IDk5KSB7XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBkZXZlbG9wbWVudC5nYWluOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAoc2tpbGwudmFsdWUgKyBkZXZlbG9wbWVudC5nYWluIC0gaW5kZXggPD0gOTkpIHtcbiAgICAgICAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiAtPSBpbmRleFxuICAgICAgICAgICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoZGV2ZWxvcG1lbnQuZ2FpbilcbiAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGRldmVsb3BtZW50LmdhaW4pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNob3dEZXZlbG9wbWVudHNUYWJsZShkZXZlbG9wbWVudHMpXG4gIH1cblxuICAvKipcbiAgICogU3Vic2VxdWVudCBwZXJpb2RzIG9mIGZ1bGwgc3R1ZHkgbWF5IGJlIHVuZGVydGFrZW4sIHRoZSBkaWZmZXJlbmNlIGJlaW5nXG4gICAqIHRoYXQgZWFjaCBzdHVkeSB3aWxsIHRha2UgdHdpY2UgYXMgbG9uZyBhcyB0aGUgcHJldmlvdXMgb25lXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyByZWRvRnVsbFN0dWR5ICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAwIH0pXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5JzogdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5ICogMlxuICAgIH0pXG4gIH1cblxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXG4gIGFzeW5jIHJvbGxTYW5pdHlMb3NzICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc3lzdGVtLnNhbml0eUxvc3NcbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnJykgcmV0dXJuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkaW5nTXl0aG9zVG9tZScsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBtZXNzYWdlLmdldEhUTUwoKVxuICAgIGlmICh0eXBlb2YgY2FyZC5sZW5ndGggIT09ICd1bmRlZmluZWQnICYmIGNhcmQubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cbiAgICAgIGh0bWwuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICAgICAgc2FuRGF0YToge1xuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxuICAgICAgICAgICAgc2FuTWF4OiBzYW5pdHlMb3NzXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgY29uc3Qgc2FuaXR5Q2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgc2FuaXR5Q2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgdGFibGUgaW4gdGhlIGNoYXQgd2l0aCBhbGwgc2tpbGwgZGV2ZWxvcG1lbnRzIG9idGFpbmVkXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gZGV2ZWxvcG1lbnRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gY3JlYXRlIENoYXRNZXNzYWdlXG4gICAqL1xuICBhc3luYyBzaG93RGV2ZWxvcG1lbnRzVGFibGUgKGRldmVsb3BtZW50cykge1xuICAgIC8qKiBQcmVwYXJlIHRoZSBBcnJheSBkYXRhIHRvIGJlIHNob3duIHRvIHRoZSBlbmQgdXNlciBpbiBjaGF0ICovXG4gICAgZm9yIChjb25zdCBkZXZlbG9wbWVudCBvZiBkZXZlbG9wbWVudHMpIHtcbiAgICAgIGlmIChkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICBkZXZlbG9wbWVudC5uYW1lID0gYCR7ZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb259ICgke2RldmVsb3BtZW50Lm5hbWV9KWBcbiAgICAgIH1cbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGRldmVsb3BtZW50LmdhaW4gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFya2VkRm9yRGV2ZWxvcG1lbnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiA9IGArJHtkZXZlbG9wbWVudC5nYWlufSAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Qb2ludHMnXG4gICAgICAgICl9YFxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svZGV2ZWxvcG1lbnQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHsgZGV2ZWxvcG1lbnRzIH0pXG4gICAgcmV0dXJuIGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IHRoaXMuYWN0b3IgfSksXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuR2FpbnNGb3JSZWFkaW5nJywgeyBib29rOiB0aGlzLm5hbWUgfSksXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGF0dGVtcHRTcGVsbExlYXJuaW5nIChpZCkge1xuICAgIGlmICghdGhpcy5pc093bmVkKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZykge1xuICAgICAgLyoqIEFjdG9yIGRpZCBub3QgcGVyZm9ybWVkIGFuIGluaXRpYWwgcmVhZGluZyBmaXJzdCAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhbFJlYWRpbmdOZWVkZWQnLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgc3BlbGwgPSB0aGlzLnN5c3RlbS5zcGVsbHMuZmluZChzcGVsbCA9PiB7XG4gICAgICByZXR1cm4gc3BlbGwuX2lkID09PSBpZFxuICAgIH0pXG4gICAgaWYgKHNwZWxsKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTGVhcm5TcGVsbEF0dGVtcHQnLCB7XG4gICAgICAgIGJvb2s6IHRoaXMubmFtZSxcbiAgICAgICAgc3BlbGw6IHNwZWxsLm5hbWVcbiAgICAgIH0pXG4gICAgICBjaGVjay5jb250ZXh0ID0gJ1NQRUxMX0xFQVJOSU5HJ1xuICAgICAgY2hlY2suc3BlbGwgPSBzcGVsbFxuICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICAgICAgYXdhaXQgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICAvKiogTGlzdGVuIHRvIGNoYW5nZXMgb24gdGhlIGNoZWNrIGNhcmQgKi9cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xuICAgIGNvbnN0IGNoZWNrID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGwpXG5cbiAgICAvKiogV2lsbCBrbm93IGlmIHVzZXIgcHVzaCB0aGUgcm9sbCBvciBzcGVuZCBMdWNrICovXG4gICAgaWYgKGNoZWNrLnBhc3NlZCkge1xuICAgICAgaWYgKGNoZWNrLmNvbnRleHQgPT09ICdJTklUSUFMX1JFQURJTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50SW5pdGlhbFJlYWRpbmcoKVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5jb250ZXh0ID09PSAnU1BFTExfTEVBUk5JTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50U3BlbGxMZWFybmluZyhjaGVjay5zcGVsbClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgRm9ybURhdGFFeHRlbmRlZCwgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIEhvb2tzLCByZW5kZXJUZW1wbGF0ZSwgc29ja2V0bGliLCB1aSAqL1xuXG5jb25zdCBFQ0NfQ0xBU1MgPSAnZW5oYW5jZWQtY2hhdC1jYXJkJ1xuXG5jb25zdCBQRVJNSVNTSU9OX1RZUEUgPSB7XG4gIEdNOiAnZ20nLCAvLyB1c2VyIGlzIEdNXG4gIE5PVF9HTTogJyFnbScsIC8vIHVzZXIgaXMgTk9UIGdtIChoaWRlIHRvIEdNIGluIGNhc2Ugb2YgdmlzaWJpbGl0eSlcbiAgU1BFQUtFUjogJ3NwZWFrZXInLCAvLyB0aGUgc3BlYWtlciBpcyBhbiBhY3RvciBjb250cm9sZWQvb3duZWQgYnkgdGhlIHVzZXJcbiAgVVNFUjogJ3VzZXInLCAvLyB0aGUgdXNlciBpcyB0aGUgbWVzc2FnZSdzIGF1dGhvclxuICBFVkVSWU9ORTogJ2FsbCcsIC8vIGVxdWl2YWxlbnQgdG8gZW1wdHkgc3RyaW5nXG4gIEJMQUNLTElTVDogJ2JsYWNrbGlzdCcgLy8gaW52ZXJ0IHRoZSBsb2dpY1xufVxuXG5jb25zdCBTVEFURSA9IHtcbiAgT046ICdzd2l0Y2hlZC1vbicsXG4gIE9GRjogJ3N3aXRjaGVkLW9mZidcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRFQ0MgKC4uLmNhcmRjbGFzcykge1xuICAvLyBIb29rcy5vbmNlKCdpbml0JywgZnVuY3Rpb24gKCkge1xuICAvLyB9KVxuXG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TG9nJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLmluamVjdENTUyhhcHAsIGh0bWwsIGRhdGEpXG4gIClcblxuICBIb29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBmdW5jdGlvbiAoKSB7XG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkY2xhc3MpXG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQgPSBzb2NrZXRsaWIucmVnaXN0ZXJTeXN0ZW0oZ2FtZS5zeXN0ZW0uaWQpIC8vIFNvY2tldCBpcyBhdHRhY2hlZCB0byBjdXJyZW50IHN5c3RlbVxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCd1cGRhdGVNZXNzYWdlJywgdXBkYXRlTWVzc2FnZSlcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignR01VcGRhdGUnLCBHTVVwZGF0ZSlcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignYWR2aXNlJywgYWR2aXNlKVxuICAgIC8vIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCdnbXRyYWRlaXRlbXRvJywgZ210cmFkZWl0ZW10bylcbiAgfSlcblxuICBIb29rcy5vbigncmVuZGVyQ2hhdE1lc3NhZ2UnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICAgIEVuaGFuY2VkQ2hhdENhcmQuYmluZExpc3RlbmVycyhodG1sKVxuICApXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2UgKG1lc3NhZ2VJZCwgbmV3Q29udGVudCkge1xuICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcblxuICBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgIGNvbnRlbnQ6IG5ld0NvbnRlbnRcbiAgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gR01VcGRhdGUgKGRhdGEsIG9wdGlvbnMsIGNhcmRDbGFzc05hbWUsIG1lc3NhZ2VJZCA9IHVuZGVmaW5lZCkge1xuICBjb25zdCBjYXJkID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZC5mcm9tRGF0YShcbiAgICBkYXRhLFxuICAgIG9wdGlvbnMsXG4gICAgY2FyZENsYXNzTmFtZSxcbiAgICBtZXNzYWdlSWRcbiAgKVxuICBhd2FpdCBjYXJkLkdNVXBkYXRlKClcbiAgLy8gY29uc3QgZGlmZiA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdCggZGF0YSwgY2FyZC50b09iamVjdCgpKVxuICByZXR1cm4gY2FyZC50b09iamVjdCgpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkdmlzZSAoKSB7fVxuXG5jbGFzcyBFbmhhbmNlZENoYXRDYXJkTGliIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMudHlwZXMgPSBuZXcgTWFwKClcbiAgICB0aGlzLnNvY2tldCA9IG51bGxcbiAgICAvLyB0aGlzLmVuaGFuY2VkQ2hhdENhcmRDbGFzcyA9IEVuaGFuY2VkQ2hhdENhcmRcbiAgfVxuXG4gIHN0YXRpYyBpbmplY3RDU1MgKCkge1xuICAgIGxldCBzdHlsZSA9ICQoJ2hlYWQnKS5maW5kKCdzdHlsZScpXG4gICAgaWYgKCFzdHlsZT8ubGVuZ3RoKSB7XG4gICAgICAkKCdoZWFkJykuYXBwZW5kKCQoJzxzdHlsZSAgdHlwZT1cInRleHQvY3NzXCI+PC9zdHlsZT4nKSlcbiAgICAgIHN0eWxlID0gJCgnaGVhZCcpLmZpbmQoJ3N0eWxlJylcbiAgICB9XG4gICAgc3R5bGUuYXBwZW5kKFxuICAgICAgYC5lY2MtcmVzdHJpY3RlZCB7Y29sb3I6IHJlZH1cbiAgICAuZWNjLXJlc3RyaWN0ZWQ6aG92ZXIge2N1cnNvcjogbm90LWFsbG93ZWR9YFxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBzZXQgc29ja2V0ICh4KSB7XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliKSB7XG4gICAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliID0gbmV3IEVuaGFuY2VkQ2hhdENhcmRMaWIoKVxuICAgIH1cbiAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldCA9IHhcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc29ja2V0ICgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0VDQyBub3QgSW5pdGlhbGl6ZWQnKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdFQ0Mgbm8gc29ja2V0JylcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0XG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGVzICgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIgPSBuZXcgRW5oYW5jZWRDaGF0Q2FyZExpYigpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnR5cGVzXG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXIgKGNhcmRDb25zdHJ1Y3RvcnMpIHtcbiAgICBjYXJkQ29uc3RydWN0b3JzLmZvckVhY2goY2FyZENvbnN0cnVjdG9yID0+IHtcbiAgICAgIGlmICghRW5oYW5jZWRDaGF0Q2FyZExpYi50eXBlcy5nZXQoY2FyZENvbnN0cnVjdG9yLm5hbWUpKSB7XG4gICAgICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIudHlwZXMuc2V0KGNhcmRDb25zdHJ1Y3Rvci5uYW1lLCBjYXJkQ29uc3RydWN0b3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHN0YXRpYyBnbV9vblRvZ2dsZSAoZGF0YSl7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCAnZ21fb25Ub2dnbGUnKVxuICAvLyB9XG59XG5cbmZ1bmN0aW9uIHNldEJ5UGF0aCAob2JqLCBwYXRoLCB2YWx1ZSkge1xuICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKVxuICBsZXQgbyA9IG9ialxuICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBpZiAoIW9bcGFydHNbaV1dKSBvW3BhcnRzW2ldXSA9IHt9XG4gICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICB9XG4gIH1cblxuICBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXSA9IHZhbHVlXG59XG5cbmZ1bmN0aW9uIGdldEJ5UGF0aCAob2JqLCBwYXRoKSB7XG4gIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gIGxldCBvID0gb2JqXG4gIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGlmICghb1twYXJ0c1tpXV0pIHJldHVybiB1bmRlZmluZWRcbiAgICAgIG8gPSBvW3BhcnRzW2ldXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXVxufVxuXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRDaGF0Q2FyZCB7XG4gIC8vIHN0YXRpYyByZWdpc3RlciAoY2FyZENvbnN0cnVjdG9yKSB7XG4gIC8vICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkQ29uc3RydWN0b3IpXG4gIC8vIH1cblxuICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhXG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MpIHRoaXMuZGF0YS5mbGFncyA9IHt9XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgb25seSBvbmNlIGJlZm9yZSBzZW5kaW5nIG1lc3NhZ2UgdG8gY2hhdC5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplICgpIHt9XG5cbiAgZ2V0IG9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdE9wdGlvbnMsIHRoaXMuX29wdGlvbnMpXG4gIH1cblxuICBzZXQgb3B0aW9ucyAoeCkge1xuICAgIHRoaXMuX29wdGlvbnMgPSB4XG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudGVtcGxhdGVcbiAgfVxuXG4gIGdldCBjc3NDbGFzc2VzICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsYXNzZXM/LmpvaW4oJyAnKVxuICB9XG5cbiAgZ2V0IHNwZWFrZXIgKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMub29jKSByZXR1cm4gZ2FtZS51c2VyXG4gICAgaWYgKFxuICAgICAgdGhpcy5vcHRpb25zLnNwZWFrZXIgJiZcbiAgICAgIENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3Rvcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcbiAgICApIHtcbiAgICAgIHJldHVybiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3IodGhpcy5vcHRpb25zLnNwZWFrZXIpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLnVzZXJcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIC8vIGF3YWl0IHRoaXMuYXNzaWduT2JqZWN0cygpXG4gICAgcmV0dXJuIHtcbiAgICAgIGNhcmQ6IHRoaXMsXG4gICAgICBmbGFnczogdGhpcy5mbGFncyxcbiAgICAgIGRhdGE6IHRoaXMudG9PYmplY3QoKSxcbiAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIGNzczogdGhpcy5jc3NDbGFzc2VzLFxuICAgICAgdXNlcjogZ2FtZS51c2VyLFxuICAgICAgc3BlYWtlcjogdGhpcy5zcGVha2VyXG4gICAgfVxuICB9XG5cbiAgdG9PYmplY3QgKCkge1xuICAgIGlmICghdGhpcy5kYXRhKSByZXR1cm5cbiAgICBjb25zdCBkYXRhID0ge31cbiAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXModGhpcy5kYXRhKSkge1xuICAgICAgY29uc3QgdiA9IHRoaXMuZGF0YVtrXVxuICAgICAgaWYgKHYgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgZGF0YVtrXSA9IHYudG9PYmplY3QgPyB2LnRvT2JqZWN0KCkgOiBmb3VuZHJ5LnV0aWxzLmRlZXBDbG9uZSh2KVxuICAgICAgfSBlbHNlIGRhdGFba10gPSB2XG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKG9wdGlvbm5hbENoYXREYXRhID0ge30pIHtcbiAgICAvLyBNYXAgZWNjIGNhcmQgdHlwZSBpZiBub3QgcmVnaXN0ZXJlZCBhbHJlYWR5XG4gICAgLy8gdGhpcy5yZWdpc3RlckVDQ0NsYXNzKClcblxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpXG5cbiAgICAvLyBQdWJsaXNoIGJ5IGN1cnJlbnQgdXNlciBieSBkZWZhdWx0IHVubGVzcyBvcHRpb25zLkdNY2hhdENhcmRcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5nZXREYXRhKClcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgZGF0YSlcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpWzBdXG4gICAgaWYgKHRoaXMub3B0aW9ucy5hdHRhY2hPYmplY3QpIHtcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLm9iamVjdERhdGFTdHJpbmcpXG4gICAgfVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmVjY0NsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5vcHRpb25zLmNsYXNzZXMpXG5cbiAgICBjb25zdCBzcGVha2VyID1cbiAgICAgIHRoaXMub3B0aW9ucy5zcGVha2VyICYmICF0aGlzLm9wdGlvbnMub29jXG4gICAgICAgID8gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcbiAgICAgICAgOiB7fVxuXG4gICAgLy8gY29uc3QgdXNlcklkID0gdGhpcy5vcHRpb25zLnVzZXJJZCA/IHRoaXMub3B0aW9ucy51c2VySWQgOiBnYW1lLnVzZXIuaWRcblxuICAgIGNvbnN0IGNoYXREYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcbiAgICAgIHtcbiAgICAgICAgLy8gdXNlcjogdXNlcklkLFxuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIHNwZWFrZXIsXG4gICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMub3B0aW9ucy50aXRsZSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0sXG4gICAgICBvcHRpb25uYWxDaGF0RGF0YVxuICAgIClcblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnc2VsZnJvbGwnKSBjaGF0RGF0YS53aGlzcGVyID0gW2dhbWUudXNlci5pZF1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICh7IGF0dGFjaE9iamVjdCA9IHRydWUgfSA9IHt9KSB7XG4gICAgLy8gVE9ETyB0aGUgd2hvbGUgZnVuY3Rpb24gaGFzIHRvIGJlIGV4ZWN1dGVkIGJ5IEdNIGlmIG9wdGlvbnMuR01jaGF0Q2FyZFxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcHV0ZSkgYXdhaXQgdGhpcy5sb2NhbENvbXB1dGUoKVxuICAgIGlmICh0aGlzLm9wdGlvbnMuR01VcGRhdGUpIGF3YWl0IHRoaXMuRXhlY3V0ZUdNVXBkYXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmdldERhdGEoKVxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIGRhdGEpXG4gICAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgICAvLyBBdHRhY2ggdGhlIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGlmIChhdHRhY2hPYmplY3QgJiYgIXRoaXMuZGF0YS5FRUNfQUNUSU9OPy5kZXRhY2hEYXRhKSB7XG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLm9iamVjdERhdGFTdHJpbmcpXG4gICAgICB9XG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5lY2NDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5vcHRpb25zLmNsYXNzZXMpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0LmV4ZWN1dGVBc0dNKFxuICAgICAgICAndXBkYXRlTWVzc2FnZScsXG4gICAgICAgIHRoaXMubWVzc2FnZUlkLFxuICAgICAgICBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICApXG4gICAgICAvLyBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgICAvLyBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoeyAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XG4gICAgICAvLyBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIH0pIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKSAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XG4gICAgICAvLyByZXR1cm4gbXNnIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIC8vIGh0bWwub24oXG4gICAgLy8gICAnY2xpY2snLFxuICAgIC8vICAgYC4ke0VDQ19DTEFTU30gLmVjYy1yYWRpby1zd2l0Y2hgLFxuICAgIC8vICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIC8vIClcbiAgICBodG1sLm9uKCdjaGFuZ2UnLCAnaW5wdXQsc2VsZWN0LHRleHRhcmVhJywgdGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5lY2Mtc3dpdGNoYCwgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5zdWJtaXRgLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2ZvY3Vzb3V0JywgYC4ke0VDQ19DTEFTU30gaW5wdXRgLCB0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gYnV0dG9uYCwgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdrZXlkb3duJywgYC4ke0VDQ19DTEFTU30gZm9ybWAsIHRoaXMuX29uS2V5LmJpbmQodGhpcykpXG5cbiAgICAvLyBjb25zdCB2aXNpID0gaHRtbC5maW5kKCdbZGF0YS1lY2MtdmlzaWJpbGl0eV0nKVxuICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdmlzaS5sZW5ndGg7IGkrKykge1xuICAgIC8vICAgY29uc3QgZWwgPSB2aXNpW2ldO1xuICAgIC8vICAgYXdhaXQgdGhpcy5zZXRWaXNpYmlsaXR5KGVsKVxuXG4gICAgLy8gfVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ1tkYXRhLWVjYy12aXNpYmlsaXR5XScpXG4gICAgICAuZWFjaChhc3luYyAoaSwgZWwpID0+IGF3YWl0IHRoaXMuc2V0VmlzaWJpbGl0eShlbCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ1tkYXRhLWVjYy1wZXJtaXNzaW9uc10nKVxuICAgICAgLmVhY2goYXN5bmMgKGksIGVsKSA9PiBhd2FpdCB0aGlzLnNldFBlcm1pc3Npb24oZWwpKVxuICAgIGh0bWwuZmluZChgLiR7RUNDX0NMQVNTfSAuZWNjLXN3aXRjaGApLmVhY2goKGksIGVsKSA9PiB0aGlzLnNldFN0YXRlKGVsKSlcbiAgICBodG1sXG4gICAgICAuZmluZChgLiR7RUNDX0NMQVNTfSBpbnB1dFt0eXBlPVwicmFkaW9cIl1gKVxuICAgICAgLmVhY2goKGksIGVsKSA9PiB0aGlzLnNldFJhZGlvU3RhdGUoZWwpKVxuICAgIC8vIGh0bWwuZmluZChgLiR7RUNDX0NMQVNTfSAuZWNjLXJhZGlvLXN3aXRjaGApLmVhY2goIChpLCBlbCkgPT4gdGhpcy5zZXRTdGF0ZShlbCkpXG4gIH1cblxuICBzZXRTdGF0ZSAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5mbGFnKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXG4gICAgICAgIHRoaXMuZmxhZ3NbZWxlbWVudC5kYXRhc2V0LmZsYWddID8gU1RBVEUuT04gOiBTVEFURS5PRkZcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5uYW1lKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBlbGVtZW50LmRhdGFzZXQubmFtZSlcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh2YWx1ZSA/IFNUQVRFLk9OIDogU1RBVEUuT0ZGKVxuICAgIH1cbiAgfVxuXG4gIHNldFJhZGlvU3RhdGUgKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQgfHwgIWVsZW1lbnQubmFtZSkgcmV0dXJuXG4gICAgY29uc3Qgc3BsaXRlZCA9IGVsZW1lbnQubmFtZS5zcGxpdCgnLicpXG4gICAgaWYgKHNwbGl0ZWRbMF0udG9Mb3dlckNhc2UoKSAhPT0gJ2RhdGEnKSByZXR1cm5cbiAgICBpZiAodGhpcy5kYXRhICYmIHR5cGVvZiB0aGlzLmRhdGFbc3BsaXRlZFsxXV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5kYXRhW3NwbGl0ZWRbMV1dID09PSBlbGVtZW50LnZhbHVlKSB7XG4gICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRWaXNpYmlsaXR5IChlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50LmRhdGFzZXQuZWNjVmlzaWJpbGl0eSkgcmV0dXJuXG4gICAgY29uc3QgY2FuWW91U2VlID0gYXdhaXQgdGhpcy5oYXNQZXJtKGVsZW1lbnQuZGF0YXNldC5lY2NWaXNpYmlsaXR5LCB0cnVlKVxuICAgIGlmICghY2FuWW91U2VlKSBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgfVxuXG4gIGFzeW5jIHNldFBlcm1pc3Npb24gKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQuZGF0YXNldC5lY2NQZXJtaXNzaW9ucykgcmV0dXJuXG4gICAgY29uc3QgY2FuWW91TW9kID0gYXdhaXQgdGhpcy5oYXNQZXJtKGVsZW1lbnQuZGF0YXNldC5lY2NQZXJtaXNzaW9ucylcbiAgICBpZiAoIWNhbllvdU1vZCkge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlY2MtcmVzdHJpY3RlZCcpXG4gICAgICBpZiAoJChlbGVtZW50KS5pcygnaW5wdXQnKSkge1xuICAgICAgICBpZiAoZWxlbWVudC50eXBlID09PSAncmFuZ2UnKSAkKGVsZW1lbnQpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgZWxzZSAkKGVsZW1lbnQpLmF0dHIoJ3JlYWRvbmx5JywgdHJ1ZSlcbiAgICAgIH1cbiAgICAgIGlmICgkKGVsZW1lbnQpLmlzKCdzZWxlY3QnKSkgJChlbGVtZW50KS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgYXMgcGVybWlzc2lvbiBhZ2FpbnN0IGEgc3RyaW5nIG9mIGFsbG93ZWQgcGVyc29ucy5cbiAgICogSWYgdGhlIHN0cmluZyBpcyBlbXB0eSBwZXJtaXNzaW9uIGFyZSBhbGwgZ3JhbnRlZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdHJpY3RlZFRvICAgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgc2V0IG9mIHBsYXllciBhbGxvd2VkLiBWYWx1ZSBjYW4gYmUgb3duZXIsIGdtLCBwbGF5ZXJzLCB1dWlkIHNlcGFyYXRlZCBieSBzcGFjZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZpc2lvbiAgICAgICAgaWYgdHJ1ZSBnbSB3aWxsIGJlIGNvbnNpZGVyZWQgZm9yIHBlcm1pc3Npb25zLiBmYWxzZSA9IGdtIGhhcyBhbHdheXMgcmlnaHQuIHRydWUgR00gcGVybWlzc2lvbiB3aWxsIGJlIGNoZWNrZWRcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGhhc1Blcm0gKHJlc3RyaWN0ZWRUbywgdmlzaW9uID0gZmFsc2UpIHtcbiAgICBpZiAoIXJlc3RyaWN0ZWRUby5sZW5ndGgpIHJldHVybiB0cnVlXG4gICAgbGV0IHBlcm1pc3Npb25zQXJyYXkgPSByZXN0cmljdGVkVG8uc3BsaXQoJyAnKVxuICAgIGNvbnN0IHdoaXRlTGlzdCA9ICFwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5CTEFDS0xJU1QpXG4gICAgaWYgKCF3aGl0ZUxpc3QpIHtcbiAgICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcbiAgICAgICAgZSA9PiBlICE9PSBQRVJNSVNTSU9OX1RZUEUuQkxBQ0tMSVNUXG4gICAgICApXG4gICAgfVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF2aXNpb24pIHJldHVybiB0cnVlIC8vIEdNIGNhbiBhbHdheXMgbW9kaWZ5IGV2ZXJ5dGhpbmcgISBOYWhcbiAgICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5HTSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICB9XG4gICAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuTk9UX0dNKSkge1xuICAgICAgICByZXR1cm4gZmFsc2UgfHwgIXdoaXRlTGlzdFxuICAgICAgfVxuICAgIH1cblxuICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5HTSlcbiAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5OT1RfR01cbiAgICApXG5cbiAgICAvLyAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0IC8vSWYgcGFzcyB0aGUgZmlsdGVyIHJldHVybiBmYWxzZSB1bmxlc3MgaXQncyBhIGJsYWNrbGlzdFxuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoZSA9PiBlICE9IFBFUk1JU1NJT05fVFlQRS5HTSlcbiAgICAvLyB9XG5cbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuVVNFUikpIHtcbiAgICAgIGlmICh0aGlzLm1lc3NhZ2UuaXNBdXRob3IpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdCAvLyBpc0F1dGhvciB2cyB1c2VyLmlzT3duZXIgP1xuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5VU0VSXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLlNQRUFLRVIpKSB7XG4gICAgICBjb25zdCBzcGVha2VyID0gdGhpcy5tZXNzYWdlLmRhdGEuc3BlYWtlclxuICAgICAgaWYgKHNwZWFrZXIudG9rZW4gJiYgc3BlYWtlci5zY2VuZSkge1xuICAgICAgICBjb25zdCBhY3RvciA9IGF3YWl0IGZyb21VdWlkKFxuICAgICAgICAgIGBTY2VuZS4ke3NwZWFrZXIuc2NlbmV9LlRva2VuLiR7c3BlYWtlci50b2tlbn1gXG4gICAgICAgIClcbiAgICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgICAgaWYgKGFjdG9yLmlzT3duZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNwZWFrZXIuYWN0b3IpIHtcbiAgICAgICAgY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3RvcilcbiAgICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgICAgaWYgKGFjdG9yLmlzT3duZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBlbHNlIGlmIChzcGVha2VyLnVzZXIpIHtcbiAgICAgIC8vICAgaWYgKGdhbWUudXNlci5pZCA9PSBzcGVha2VyLnVzZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgLy8gfVxuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5TUEVBS0VSXG4gICAgICApXG4gICAgfVxuICAgIC8vIEFsbCBmaWx0ZXIgcGFzc2VkLCBhcnJheSBzaG91bGQgY29udGFpbnMgb25seSB1dWlkcyBvciBhY3Rvci90b2tlbiBpZHNcbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGVybWlzc2lvbnNBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB1dWlkID0gcGVybWlzc2lvbnNBcnJheVtpXVxuICAgICAgICBsZXQgYWN0b3IgPSBhd2FpdCBmcm9tVXVpZCh1dWlkKVxuICAgICAgICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCh1dWlkKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICByZXR1cm4gYWN0b3IuaXNPd25lclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoYFVuYWJsZSB0byBmaW5kIGFjdG9yICR7dXVpZH1gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0IC8vIElmIHBhc3MgdGhlIGZpbHRlciByZXR1cm4gZmFsc2UgdW5sZXNzIGl0J3MgYSBibGFja2xpc3RcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVuZXJzIChodG1sKSB7XG4gICAgY29uc3QgaHRtbE1lc3NhZ2VFbGVtZW50ID0gaHRtbFswXVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9IGh0bWxNZXNzYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudCkgcmV0dXJuXG5cbiAgICBjb25zdCBjYXJkID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGh0bWxDYXJkRWxlbWVudClcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNhcmQuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIGdldCBmbGFncyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5mbGFnc1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHJlYXNzaWduIG9iamVjdCBmcm9tIHRoZSBkYXRhIHN0cnVjdHVyZS5cbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGFzc2lnbk9iamVjdHMgKCkge31cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gdXBkYXRlIG9iamVjdCBhZnRlciBkYXRhIGNoYW5nZS5cbiAgICogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIGxvY2FsIGNsaWVudFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgbG9jYWxDb21wdXRlICgpIHt9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHVwZGF0ZSBvYmplY3QgYWZ0ZXIgZGF0YSBjaGFuZ2UuXG4gICAqIFRoaXMgaXMgY2FsbGVkIGJ5IG9uZSBvZiB0aGUgR00gY2xpZW50cy5cbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIEdNVXBkYXRlICgpIHt9XG5cbiAgYXN5bmMgRXhlY3V0ZUdNVXBkYXRlICgpIHtcbiAgICBjb25zdCBuZXdEYXRhID0gYXdhaXQgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQuZXhlY3V0ZUFzR00oXG4gICAgICAnR01VcGRhdGUnLFxuICAgICAgdGhpcy50b09iamVjdCgpLFxuICAgICAgdGhpcy5fb3B0aW9ucyxcbiAgICAgIHRoaXMuY29uc3RydWN0b3IubmFtZSxcbiAgICAgIHRoaXMubWVzc2FnZUlkXG4gICAgKVxuXG4gICAgdGhpcy5kYXRhID0gbmV3RGF0YVxuICAgIGF3YWl0IHRoaXMuYXNzaWduT2JqZWN0cygpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCB3aWxsIGNoZWNrIGZvciBhbiBhY3Rpb24gKGRhdGEtYWN0aW9uKVxuICAgKiBpZiBhIG1ldGhvZCB3aXRoIHRoYXQgbmFtZSBleGlzdCBpdCB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICovXG4gIGFzeW5jIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJyAvLyBBdm9pZCBtdWx0aXBsZSBwdXNoXG4gICAgY29uc3QgYWN0aW9uID0gdGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG5cbiAgICBsZXQgZm9ybVVwZGF0ZVxuICAgIGxldCBhY3Rpb25VcGRhdGUgPSBmYWxzZVxuXG4gICAgLy8gaWYgKCdzdWJtaXQnID09IHRhcmdldC50eXBlKSB7XG4gICAgLy8gICBjb25zb2xlLndhcm4oJ0J1dHRvbiBpcyBhbHNvIGEgc3VibWl0JylcbiAgICAvLyB9XG5cbiAgICAvLyBQZXJmb3JtIGNhcmQgdXBkYXRlIGZpcnN0XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAoY2FyZCkgZm9ybVVwZGF0ZSA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYENvdWxkIG5vdCBmaW5kIGEgRUVDIGNsYXNzIGZvciB0aGlzIGNhcmQ6ICR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBvcmlnaW5hbERpc3BsYXlTdHlsZSA9IHRhcmdldC5zdHlsZS5kaXNwbGF5XG5cbiAgICBpZiAoIWFjdGlvbikge1xuICAgICAgY29uc29sZS53YXJuKCdubyBhY3Rpb24gYXNzb2NpYXRlZCB3aXRoIHRoaXMgYnV0dG9uJylcbiAgICAgIGlmICghZm9ybVVwZGF0ZSkgcmV0dXJuIC8vIElmIHRoZSBmb3JtIHdhcyB1cGRhdGVkIHdlIHN0aWxsIHVwZGF0ZSB0aGUgY2FyZFxuICAgIH1cbiAgICBpZiAoIXRoaXNbYWN0aW9uXSkge1xuICAgICAgY29uc29sZS53YXJuKGBubyAke2FjdGlvbn0gYWN0aW9uIGZvdW5kIGZvciB0aGlzIGNhcmRgKVxuICAgICAgaWYgKCFmb3JtVXBkYXRlKSByZXR1cm4gLy8gSWYgdGhlIGZvcm0gd2FzIHVwZGF0ZWQgd2Ugc3RpbGwgdXBkYXRlIHRoZSBjYXJkXG4gICAgfVxuICAgIGlmICh0aGlzW2FjdGlvbl0pIHtcbiAgICAgIGFjdGlvblVwZGF0ZSA9IGF3YWl0IHRoaXNbYWN0aW9uXSh7IGV2ZW50LCB1cGRhdGVDYXJkOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIGlmIChmb3JtVXBkYXRlIHx8IGFjdGlvblVwZGF0ZSkgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgZWxzZSB0YXJnZXQuc3R5bGUuZGlzcGxheSA9IG9yaWdpbmFsRGlzcGxheVN0eWxlXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKiBAcmV0dXJucyBmYWxzZSBpZiBrZXkgaXMgZW50ZXIgdG8gYXZvaWQgZ2xvYmFsIHN1Ym1pc3Npb25cbiAgICovXG4gIF9vbktleSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICByZXR1cm4gZXZlbnQua2V5ICE9PSAnRW50ZXInXG4gIH1cblxuICBfb25DaGFuZ2UgKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdWJtaXRPbkNoYW5nZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICAgIH1cbiAgfVxuXG4gIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdGFnTmFtZSA9IHRhcmdldC50YWdOYW1lXG4gICAgaWYgKHRhZ05hbWUgPT09ICdCVVRUT04nICYmICdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gLy9cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoYC4ke0VDQ19DTEFTU31gKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgdXBkYXRlcyA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGlmICh1cGRhdGVzKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgZm9ybSBmcm9tIHRoZSBjYXJkIGFuZCB1cGRhdGUgdGhlIGRhdGEgc3RydWN0dXJlXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmRcbiAgICogQHJldHVybnNcbiAgICovXG4gIF91cGRhdGUgKGNhcmQpIHtcbiAgICBjb25zdCBmb3JtcyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBmb3Jtc1tpXVxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxuICAgICAgY29uc3QgZGF0YSA9IGZkLm9iamVjdFxuICAgICAgLy8gZGF0YSA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdChcbiAgICAgIC8vICAgdGhpcy5kYXRhLFxuICAgICAgLy8gICBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChkYXRhKVxuICAgICAgLy8gKVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBnZXRCeVBhdGgodGhpcywga2V5KVxuICAgICAgICBpZiAoIShvbGRWYWx1ZSA9PT0gdmFsdWUpKSB7XG4gICAgICAgICAgc2V0QnlQYXRoKHRoaXMsIGtleSwgdmFsdWUpXG4gICAgICAgICAgdXBkYXRlcyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXR0YWNoT2JqZWN0OiB0cnVlLFxuICAgICAgY2xhc3NlczogW0VDQ19DTEFTU10sXG4gICAgICBleGNsdWRlOiBbXSxcbiAgICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfJyxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgb29jOiBmYWxzZSwgLy8gICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5vb2M9ZmFsc2VdICBVc2UgdGhlIHNwZWFrZXIvZ2V0c3BlYWtlci4gaWYgdHJ1ZSB1c2UgdGhlIHVzZXIgaW5zdGVhZFxuICAgICAgY29tcHV0ZTogdHJ1ZSwgLy8gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNvbXB1dGUubG9jYWw9dHJ1ZV0gaW52b3F1ZSB0aGUgY29tcHV0ZSBtZXRob2QgYXMgbG9jYWwgdXNlciA9PiBuZWVkIHRvIG92ZXJyaWRlIGxvY2FsQ29tcHV0ZVxuICAgICAgR01VcGRhdGU6IGZhbHNlIC8vICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jb21wdXRlLkdNPWZhbHNlXSBpbnZvcXVlIHRoZSBHTVVwZGF0ZSBtZXRob2QgYXMgR00gPT4gbmVlZCB0byBvdmVycmlkZSBHTVVwZGF0ZVxuICAgIH1cbiAgfVxuXG4gIGdldCBvYmplY3REYXRhU3RyaW5nICgpIHtcbiAgICBjb25zdCBzYXZlRGF0YSA9IHtcbiAgICAgIGRhdGE6IHRoaXMuZGF0YSxcbiAgICAgIG9wdGlvbnM6IHRoaXMuX29wdGlvbnNcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHNhdmVEYXRhLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCh0aGlzLm9wdGlvbnMuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pXG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2UpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlIChtZXNzYWdlKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSAkKG1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGh0bW1sQ2FyZCkge1xuICAgIGlmICghaHRtbWxDYXJkKSByZXR1cm5cbiAgICBpZiAoIWh0bW1sQ2FyZC5kYXRhc2V0LmVjY0NsYXNzKSByZXR1cm5cbiAgICBpZiAoIWh0bW1sQ2FyZC5kYXRhc2V0Lm9iamVjdCkgcmV0dXJuXG4gICAgY29uc3QgY2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGh0bW1sQ2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgY29uc3QgbWVzc2FnZSA9IGh0bW1sQ2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShcbiAgICAgIGNhcmREYXRhLmRhdGEsXG4gICAgICBjYXJkRGF0YS5vcHRpb25zLFxuICAgICAgaHRtbWxDYXJkLmRhdGFzZXQuZWNjQ2xhc3MsXG4gICAgICBtZXNzYWdlSWRcbiAgICApXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGRhdGEsIG9wdGlvbnMsIGNhcmRDbGFzc05hbWUsIG1lc3NhZ2VJZCA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IENhcmRDbGFzcyA9IGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIudHlwZXMuZ2V0KGNhcmRDbGFzc05hbWUpXG5cbiAgICBpZiAoIUNhcmRDbGFzcykge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5rbm93biBjaGF0IGNhcmQgdHlwZTogJHtjYXJkQ2xhc3NOYW1lfWApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkQ2xhc3MoZGF0YSwgb3B0aW9ucylcbiAgICBpZiAobWVzc2FnZUlkKSBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIGF3YWl0IGNhcmQuYXNzaWduT2JqZWN0cygpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHNldERhdGEgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUgJiYgISgkLnR5cGUobmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsIHRydWUpXG4gIH1cblxuICB1bnNldERhdGEgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUgJiYgISgkLnR5cGUobmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsIGZhbHNlKVxuICB9XG5cbiAgdG9nZ2xlRGF0YSAobmFtZSkge1xuICAgIGlmICghbmFtZSAmJiAhKCQudHlwZShuYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICBjb25zdCB2YWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBuYW1lKVxuICAgIHNldEJ5UGF0aCh0aGlzLCBuYW1lLCAhdmFsdWUpXG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgYW5zd2VyID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQuZXhlY3V0ZUFzR00oJ2dtX29uVG9nZ2xlJywge1xuICAgIC8vICAgZXZlbnQ6IGV2ZW50LFxuICAgIC8vICAgY2FyZDogdGhpc1xuICAgIC8vIH0pXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICgnYWN0aW9uJyBpbiB0YXJnZXQuZGF0YXNldCkgcmV0dXJuIHRoaXMuX29uQnV0dG9uKGV2ZW50KVxuICAgIGlmIChcbiAgICAgIHRhcmdldCAmJlxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZ20tc2VsZWN0LW9ubHknKSAmJlxuICAgICAgIWdhbWUudXNlci5pc0dNXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgbmFtZSA9IHRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICAgID8gYGRhdGEuZmxhZ3MuJHt0YXJnZXQuZGF0YXNldC5mbGFnfWBcbiAgICAgIDogdGFyZ2V0LmRhdGFzZXQubmFtZVxuICAgIGlmICghbmFtZSkgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmNsb3Nlc3QoJy5lY2MtcmFkaW8nKVxuICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICB0aGlzLnRvZ2dsZURhdGEobmFtZSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYnV0dG9ucyA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yQWxsKCcuZWNjLXN3aXRjaCcpXG4gICAgICBmb3IgKGNvbnN0IGIgb2YgYnV0dG9ucykge1xuICAgICAgICBjb25zdCBiTmFtZSA9IGIuZGF0YXNldC5mbGFnXG4gICAgICAgICAgPyBgZGF0YS5mbGFncy4ke2IuZGF0YXNldC5mbGFnfWBcbiAgICAgICAgICA6IGIuZGF0YXNldC5uYW1lXG4gICAgICAgIHRoaXMudW5zZXREYXRhKGJOYW1lKVxuICAgICAgfVxuICAgICAgdGhpcy5zZXREYXRhKG5hbWUpXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdWJtaXRPbkNoYW5nZSkge1xuICAgICAgaWYgKGNhcmQpIHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKCkgLy8gU3VibWl0IG9uIGNoYW5nZSA/XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgX3BhcnRpY2lwYW50IHtcbiAgY29uc3RydWN0b3IgKGRhdGEgPSB7fSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGFcbiAgfVxuXG4gIF9mZXRjaCAoKSB7XG4gICAgaWYgKCF0aGlzLl9kb2MgJiYgdGhpcy5kYXRhLmRvY1V1aWQpIHtcbiAgICAgIHRoaXMuX2RvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5fYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLl9kb2MpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLl9kb2MuY29uc3RydWN0b3I/Lm5hbWUpIHtcbiAgICAgICAgICBjYXNlICdUb2tlbkRvY3VtZW50JzpcbiAgICAgICAgICAgIHRoaXMuX2FjdG9yID0gdGhpcy5fZG9jLmFjdG9yXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnQ29DQWN0b3InOlxuICAgICAgICAgICAgdGhpcy5fYWN0b3IgPSB0aGlzLl9kb2NcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB0aGlzLl9hY3RvciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgdGhpcy5fZmV0Y2goKVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IGlzQWN0b3IgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0FjdG9yIHx8IHRoaXMuaGFzVmVoaWNsZVxuICB9XG5cbiAgZ2V0IGlzQWN0aXZlICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmFjdGl2ZSB8fCBmYWxzZVxuICB9XG5cbiAgZ2V0IGtleSAoKSB7XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5hY3RvcktleVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5hY3RvcktleVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBpY29uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNBY3Rvcikge1xuICAgICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5pbWdcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuaW1nXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRyaXZlciAoKSB7XG4gICAgaWYgKCF0aGlzLl9kcml2ZXIpIHtcbiAgICAgIHRoaXMuX2RyaXZlciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZHJpdmVyXG4gIH1cblxuICBnZXQgdmVoaWNsZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS52ZWhpY2xlS2V5KSB7XG4gICAgICB0aGlzLl92ZWhpY2xlID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLnZlaGljbGVLZXkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl92ZWhpY2xlXG4gIH1cblxuICBnZXQgaGFzQWN0b3IgKCkge1xuICAgIHJldHVybiAhIXRoaXMuYWN0b3JcbiAgfVxuXG4gIGdldCBoYXNWZWhpY2xlICgpIHtcbiAgICByZXR1cm4gISF0aGlzLnZlaGljbGVcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLm5hbWVcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICAgIHJldHVybiB0aGlzLmRhdGEubmFtZSB8fCB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtb3YgKCkge1xuICAgIGlmICghdGhpcy5kYXRhLm1vdikge1xuICAgICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgdGhpcy5kYXRhLm1vdiA9IHRoaXMudmVoaWNsZS5tb3ZcbiAgICAgIGVsc2UgaWYgKHRoaXMuaGFzQWN0b3IpIHRoaXMuZGF0YS5tb3YgPSB0aGlzLmFjdG9yLm1vdlxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEubW92KSB7XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhdGEubW92KSkpIHRoaXMuZGF0YS5oYXNWYWxpZE1vdiA9IHRydWVcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEuaGFzVmFsaWRNb3YgPSBmYWxzZVxuICAgICAgICB0aGlzLmRhdGEubW92ID0gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tb3ZcbiAgfVxuXG4gIGdldCB1dWlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLnV1aWRcbiAgfVxuXG4gIGdldCBoYXNNYXhCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAyXG4gIH1cblxuICBnZXQgYm9udXNEaWNlICgpIHtcbiAgICBpZiAoXG4gICAgICBpc05hTih0aGlzLmRhdGEuYm9udXNEaWNlKSB8fFxuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA8IDAgfHxcbiAgICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPiAyXG4gICAgKSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kYXRhLmJvbnVzRGljZVxuICB9XG5cbiAgc2V0IGJvbnVzRGljZSAoeCkge1xuICAgIGlmIChpc05hTih4KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQm9udXMgZGljZSBjYW4gT25seSBiZSBhIG51bWJlcicpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHggPiAyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdNYXggMiBib251cyBkaWNlJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ05vIG5lZ2F0aXYgYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IHhcbiAgfVxuXG4gIGdldCBocCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuaHApIHtcbiAgICAgIHRoaXMuZGF0YS5ocCA9IDBcbiAgICB9XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuZGF0YS5ocCA9IHRoaXMuYWN0b3IuaHBcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmhwXG4gIH1cblxuICBzZXQgaHAgKHgpIHtcbiAgICB0aGlzLmRhdGEuaHAgPSB4XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuYWN0b3Iuc2V0SHAoeClcbiAgICB9XG4gIH1cblxuICBhZGRCb251c0RpY2UgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuYm9udXNEaWNlID49IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0FscmVhZHkgaGF2ZSBtYXggYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSArPSAxXG4gIH1cblxuICByZW1vdmVCb251c0RpY2UgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuYm9udXNEaWNlIDw9IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0FscmVhZHkgaGF2ZSAwIGJvbnVzIGRpY2UnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgLT0gMVxuICB9XG5cbiAgcmVzZXRCb251c0RpY2UgKCkge1xuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPSAwXG4gIH1cblxuICBnZXQgaGFzQm9udXNEaWNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNPbmVCb251c0RpY2UgfHwgdGhpcy5oYXNUd29Cb251c0RpY2VcbiAgfVxuXG4gIGdldCBoYXNPbmVCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAxXG4gIH1cblxuICBnZXQgaGFzVHdvQm9udXNEaWNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5ib251c0RpY2UgPj0gMlxuICB9XG5cbiAgZ2V0IGNhbkFzc2lzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNzaXN0Py5sZW5ndGggPiAwXG4gIH1cblxuICBnZXQgY2FuQmVDYXV0aW91cyAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmhhc01heEJvbnVzRGljZVxuICB9XG5cbiAgZ2V0IGFzc2lzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5hc3Npc3QgfHwgW11cbiAgfVxuXG4gIGdldCBkZXggKCkge1xuICAgIGlmICghdGhpcy5kYXRhLmRleCkge1xuICAgICAgaWYgKHRoaXMuaGFzVmVoaWNsZSAmJiB0aGlzLmhhc0RyaXZlcikge1xuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gdGhpcy5kcml2ZXIuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmhhc0FjdG9yKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kZXggPSB0aGlzLmFjdG9yLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLmRleCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5kYXRhLmRleCkpKSB0aGlzLmRhdGEuaGFzVmFsaWREZXggPSB0cnVlXG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhLmhhc1ZhbGlkRGV4ID0gZmFsc2VcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmRleFxuICB9XG5cbiAgZ2V0IGhhc0FHdW5SZWFkeSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5oYXNBR3VuUmVhZHkgfHwgZmFsc2VcbiAgfVxuXG4gIGdldCBpbml0aWF0aXZlICgpIHtcbiAgICBsZXQgaW5pdCA9IHRoaXMuZGV4XG4gICAgaWYgKHRoaXMuaGFzQUd1blJlYWR5KSB7XG4gICAgICBpbml0ICs9IDUwXG4gICAgfVxuICAgIC8vIGlmKCB0aGlzLnNwZWVkQ2hlY2spe1xuICAgIC8vICAgaWYodGhpcy5zcGVlZENoZWNrLnNjb3JlKSBpbml0ICs9IHRoaXMuc3BlZWRDaGVjay5zY29yZS8xMDBcbiAgICAvLyB9XG5cbiAgICByZXR1cm4gaW5pdFxuICB9XG5cbiAgZ2V0IGlzQ2hhc2VyICgpIHtcbiAgICByZXR1cm4gISF0aGlzLmRhdGEuY2hhc2VyXG4gIH1cblxuICBnZXQgaXNQcmV5ICgpIHtcbiAgICByZXR1cm4gIXRoaXMuaXNDaGFzZXJcbiAgfVxuXG4gIGdldCBpc1ZhbGlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNWYWxpZERleCAmJiB0aGlzLmhhc1ZhbGlkTW92XG4gIH1cblxuICBnZXQgaGFzVmFsaWREZXggKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5kZXgpKVxuICB9XG5cbiAgZ2V0IGhhc1ZhbGlkTW92ICgpIHtcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLmRhdGEubW92KSlcbiAgfVxuXG4gIGdldCBoYXNEcml2ZXIgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc1ZlaGljbGUgJiYgdGhpcy5oYXNBY3RvclxuICB9XG5cbiAgZ2V0IG1vdkFkanVzdG1lbnQgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ucm9sbERhdGFTdHJpbmcpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcodGhpcy5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcpXG4gICAgICBpZiAocm9sbCkge1xuICAgICAgICBpZiAoIXJvbGwuc3RhbmRieSkge1xuICAgICAgICAgIGlmIChyb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHJldHVybiAxXG4gICAgICAgICAgZWxzZSBpZiAocm9sbC5mYWlsZWQpIHJldHVybiAtMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgYWRqdXN0ZWRNb3YgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5tb3YgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLm1vdikpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIE51bWJlcih0aGlzLm1vdikgKyB0aGlzLm1vdkFkanVzdG1lbnRcbiAgfVxuXG4gIGdldCBoYXNNb3ZBZGp1c3RtZW50ICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNCb251c01vdiB8fCB0aGlzLmhhc01hbHVzTW92XG4gIH1cblxuICBnZXQgaGFzQm9udXNNb3YgKCkge1xuICAgIGlmICh0aGlzLmRhdGEubW92QWRqdXN0bWVudCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzTWFsdXNNb3YgKCkge1xuICAgIGlmICh0aGlzLmRhdGEubW92QWRqdXN0bWVudCA8IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBnZXQgb3B0aW9ucygpe1xuICAvLyAgcmV0dXJuIHtcbiAgLy8gICAgZXhjbHVkZTogW10sXG4gIC8vICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfJ1xuICAvLyAgfTtcbiAgLy8gfVxuXG4gIC8vIGdldCBkYXRhU3RyaW5nKCl7XG4gIC8vICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSx2YWx1ZSk9PntcbiAgLy8gICAgaWYoIG51bGwgPT09IHZhbHVlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAvLyAgICBpZiggdGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIGlmKCBrZXkuc3RhcnRzV2l0aCh0aGlzLm9wdGlvbnMuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIHJldHVybiB2YWx1ZTtcbiAgLy8gIH0pO1xuICAvLyB9XG5cbiAgdG9vU2xvdyAoKSB7XG4gICAgdGhpcy5kYXRhLmV4Y2x1ZGVkID0gdHJ1ZVxuICB9XG5cbiAgaW5jbHVkZUluQ2hhc2UgKCkge1xuICAgIHRoaXMuZGF0YS5leGNsdWRlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLmVzY2FwZWQgPSBmYWxzZVxuICB9XG5cbiAgZXNjYXBlZCAoKSB7XG4gICAgdGhpcy5kYXRhLmVzY2FwZWQgPSB0cnVlXG4gIH1cblxuICBzZXQgc2xvd2VzdCAoeCkge1xuICAgIHRoaXMuZGF0YS5zbG93ZXN0ID0geFxuICB9XG5cbiAgZ2V0IHNsb3dlc3QgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuc2xvd2VzdFxuICB9XG5cbiAgc2V0IGZhc3Rlc3QgKHgpIHtcbiAgICB0aGlzLmRhdGEuZmFzdGVzdCA9IHhcbiAgfVxuXG4gIGdldCBmYXN0ZXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmZhc3Rlc3RcbiAgfVxuXG4gIGNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyAobWluTW92KSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHRoaXMubW92ZW1lbnRBY3Rpb24gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2YgdGhpcy5hZGp1c3RlZE1vdiA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIGlzTmFOKG1pbk1vdilcbiAgICApIHtcbiAgICAgIHRoaXMubW92ZW1lbnRBY3Rpb24gPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW92ZW1lbnRBY3Rpb24gPSAxICsgKHRoaXMuYWRqdXN0ZWRNb3YgLSBtaW5Nb3YpXG4gICAgfVxuICAgIC8vIGlmKCB0aGlzLm1vdmVtZW50QWN0aW9uIDwgMCkgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDBcbiAgfVxuXG4gIHNldCBtb3ZlbWVudEFjdGlvbiAoeCkge1xuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IHhcbiAgfVxuXG4gIGdldCBtb3ZlbWVudEFjdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvblxuICB9XG5cbiAgc2V0IGN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKHgpIHtcbiAgICB0aGlzLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHhcbiAgfVxuXG4gIGdldCBjdXJyZW50TW92ZW1lbnRBY3Rpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgfHwgMFxuICB9XG5cbiAgZ2V0IGhhc01heE12dEFjdGlvbnMgKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPj0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICB9XG5cbiAgZ2V0IGhhc05vTXZ0QWN0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8PSAwXG4gIH1cblxuICBhZGRNb3ZlbWVudEFjdGlvbnMgKHggPSAxKSB7XG4gICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHhcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gdGhpcy5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICAgIH1cbiAgfVxuXG4gIGFsdGVyTW92ZW1lbnRBY3Rpb25zICh4KSB7XG4gICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHhcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gdGhpcy5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICAgIH1cbiAgfVxuXG4gIGdldCBtb3ZlbWVudEFjdGlvbkFycmF5ICgpIHtcbiAgICBjb25zdCBiYXNlQXJyYXkgPSBBcnJheSh0aGlzLm1vdmVtZW50QWN0aW9uKS5maWxsKCdiYXNlJylcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID49IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zOyBpKyspIHtcbiAgICAgICAgYmFzZUFycmF5W2ldID0gJ2Jhc2UgYXZhaWxhYmxlJ1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VBcnJheVxuICAgIH1cblxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCAwKSB7XG4gICAgICBjb25zdCBkZWZpY2l0QXJyYXkgPSBBcnJheShNYXRoLmFicyh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMpKS5maWxsKFxuICAgICAgICAnZGVmaWNpdCdcbiAgICAgIClcbiAgICAgIHJldHVybiBkZWZpY2l0QXJyYXkuY29uY2F0KGJhc2VBcnJheSlcbiAgICB9XG4gIH1cblxuICBnZXQgY3NzQ2xhc3MgKCkge1xuICAgIGNvbnN0IGNzc0NsYXNzZXMgPSBbXVxuICAgIGlmICh0aGlzLmlzQ2hhc2VyKSBjc3NDbGFzc2VzLnB1c2goJ2NoYXNlcicpXG4gICAgZWxzZSBjc3NDbGFzc2VzLnB1c2goJ3ByZXknKVxuICAgIGlmICh0aGlzLmRhdGEuZXhjbHVkZWQpIGNzc0NsYXNzZXMucHVzaCgnZXhjbHVkZWQnLCAndG9vX3Nsb3cnKVxuICAgIGlmICh0aGlzLmRhdGEuZXNjYXBlZCkgY3NzQ2xhc3Nlcy5wdXNoKCdlc2NhcGVkJylcbiAgICBpZiAodGhpcy5kYXRhLmZhc3Rlc3QpIGNzc0NsYXNzZXMucHVzaCgnZmFzdGVzdCcpXG4gICAgaWYgKHRoaXMuZGF0YS5zbG93ZXN0KSBjc3NDbGFzc2VzLnB1c2goJ3Nsb3dlc3QnKVxuICAgIGlmICh0aGlzLmRhdGEuYWN0aXZlKSBjc3NDbGFzc2VzLnB1c2goJ2FjdGl2ZScpXG4gICAgaWYgKHRoaXMuZGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDw9IDApIGNzc0NsYXNzZXMucHVzaCgnbm8tYWN0aW9ucycpXG4gICAgcmV0dXJuIGNzc0NsYXNzZXMuam9pbignICcpXG4gIH1cblxuICBnZXQgc3BlZWRDaGVjayAoKSB7XG4gICAgY29uc3QgY2hlY2sgPSB7fVxuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ubmFtZSkgY2hlY2submFtZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWVcbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnNjb3JlKSBjaGVjay5zY29yZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLnNjb3JlXG4gICAgY2hlY2suY3NzQ2xhc3NlcyA9ICcnXG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY2hlY2sucm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChjaGVjay5yb2xsKSB7XG4gICAgICAgIGlmICghY2hlY2sucm9sbC5zdGFuZGJ5IHx8IGNoZWNrLnJvbGwuaGFzQ2FyZCkge1xuICAgICAgICAgIGNoZWNrLnJvbGxlZCA9IHRydWVcbiAgICAgICAgICBjaGVjay5pbmxpbmVSb2xsID0gY2hlY2sucm9sbC5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICAgICAgICBjaGVjay5jc3NDbGFzc2VzICs9ICdyb2xsZWQnXG4gICAgICAgICAgaWYgKCFjaGVjay5yb2xsLnN0YW5kYnkpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgICAgICAgY2hlY2subW9kaWZpZXJDc3MgPSAndXBncmFkZSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hlY2sucm9sbC5mYWlsZWQpIGNoZWNrLm1vZGlmaWVyQ3NzID0gJ2Rvd25ncmFkZSdcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY2hlY2sucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lIHx8XG4gICAgICAgICAgICAgIGNoZWNrLnJvbGwuZmFpbGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY2hlY2suaGFzTW9kaWZpZXIgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSB7XG4gICAgICBjaGVjay5vcHRpb25zID0gW11cbiAgICAgIGZvciAoY29uc3QgYyBvZiBbJ2NvbiddKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0gdGhpcy5hY3Rvci5nZXRDaGFyYWN0ZXJpc3RpYyhjKVxuICAgICAgICBpZiAoY2hhcmFjdGVyaXN0aWM/LnZhbHVlKSBjaGVjay5vcHRpb25zLnB1c2goY2hhcmFjdGVyaXN0aWMubGFiZWwpXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmFjdG9yLmRyaXZlU2tpbGxzKSB7XG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmFjdG9yLnBpbG90U2tpbGxzKSB7XG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXG4gICAgICB9XG4gICAgICBjaGVjay5oYXNPcHRpb25zID0gISFjaGVjay5vcHRpb25zLmxlbmd0aFxuXG4gICAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LmlkKSB7XG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5hY3Rvci5maW5kKHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICBjb25zdCBnYW1lSXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgICAgIGlmIChnYW1lSXRlbSkgaXRlbSA9IHRoaXMuYWN0b3IuZmluZChnYW1lSXRlbS5uYW1lKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaXRlbScgJiYgaXRlbS52YWx1ZS5kYXRhPy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5uYW1lXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnY2hhcmFjdGVyaXN0aWMnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgICAgIGNoZWNrLmlzQ2hhcmFjdGVyaXN0aWMgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2F0dHJpYnV0ZSdcbiAgICAgICAgICAgIGNoZWNrLmlzQXR0cmlidXRlID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQodGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZSlcbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaXRlbScgJiYgaXRlbS52YWx1ZS5kYXRhPy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5uYW1lXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnY2hhcmFjdGVyaXN0aWMnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgICAgIGNoZWNrLmlzQ2hhcmFjdGVyaXN0aWMgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2F0dHJpYnV0ZSdcbiAgICAgICAgICAgIGNoZWNrLmlzQXR0cmlidXRlID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uaWQpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmdldCh0aGlzLmRhdGEuc3BlZWRDaGVjay5pZClcbiAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtXG4gICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICBjaGVjay5yZWZTZXQgPSBmYWxzZVxuICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS5iYXNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lICYmIHRoaXMuZGF0YS5zcGVlZENoZWNrPy5zY29yZSkge1xuICAgICAgY2hlY2submFtZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWVcbiAgICAgIGNoZWNrLnNjb3JlID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2suc2NvcmVcbiAgICAgIGNoZWNrLnJlZlNldCA9IGZhbHNlXG4gICAgfVxuXG4gICAgY2hlY2suY2FuQmVSb2xsZWQgPSB0cnVlXG5cbiAgICBpZiAoIWNoZWNrLnJvbGxlZCAmJiAhY2hlY2suc2NvcmUpIHtcbiAgICAgIGNoZWNrLmNzc0NsYXNzZXMgKz0gJyBpbnZhbGlkJ1xuICAgICAgY2hlY2suY2FuQmVSb2xsZWQgPSBmYWxzZVxuICAgIH1cbiAgICBjaGVjay5pc1ZhbGlkID0gY2hlY2sucm9sbGVkICYmICFpc05hTihjaGVjay5zY29yZSlcblxuICAgIHJldHVybiBjaGVja1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0QnlSb2xlQW5kRGV4IChhLCBiKSB7XG4gIGlmICghYSAmJiBiKSByZXR1cm4gMVxuICBpZiAoIWIgJiYgYSkgcmV0dXJuIC0xXG4gIGlmICghYSAmJiAhYikgcmV0dXJuIDBcbiAgLy8gUHV0IGNoYXNlcnMgZmlyc3RcbiAgaWYgKGIuY2hhc2VyICYmICFhLmNoYXNlcikgcmV0dXJuIDFcbiAgaWYgKGEuY2hhc2VyICYmICFiLmNoYXNlcikgcmV0dXJuIC0xXG4gIC8vIElmIHNhbWV0eXBlIHNvcnQgYnkgZGV4XG4gIHJldHVybiBhLmRleCAtIGIuZGV4XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgRW5oYW5jZWRDaGF0Q2FyZCB9IGZyb20gJy4uLy4uL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQgfSBmcm9tICcuLi8uLi9pdGVtcy9jaGFzZS9wYXJ0aWNpcGFudC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBjcmVhdGVJbmxpbmVSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ2hhc2VPYnN0YWNsZUNhcmQgZXh0ZW5kcyBFbmhhbmNlZENoYXRDYXJkIHtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICBjb25zdCBvcHRpb25zID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuaHRtbCcsXG4gICAgICBHTVVwZGF0ZTogdHJ1ZVxuICAgIH0pXG4gICAgb3B0aW9ucy5jbGFzc2VzLnB1c2goJ29ic3RhY2xlLWNhcmQnKVxuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEuc3RhdHVzID0gW11cbiAgICBkYXRhLnN0cmluZ3MgPSB7fVxuICAgIGRhdGEuZGlzcGxheUFjdG9yT25DYXJkID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgICAvLyBkYXRhLnBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLnBhcnRpY2lwYW50RGF0YSlcblxuICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgbmFtZTpcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSArIGAgOiR7dGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdH1gXG4gICAgfSlcblxuICAgIGRhdGEuY2FyZC5icmVha2FibGVPYnN0YWNsZSA9XG4gICAgICBkYXRhLmRhdGEub2JzdGFjbGU/LmJhcnJpZXIgJiYgZGF0YS5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cyAvLyBUT0RPOiBDaGVjayBpZiB1c2VmdWxsXG4gICAgZGF0YS5jYXJkLnZhbGlkQ2hlY2sgPSBmYWxzZVxuXG4gICAgaWYgKFxuICAgICAgZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkICYmXG4gICAgICAoZGF0YS5kYXRhLm9ic3RhY2xlLmhhemFyZCB8fFxuICAgICAgICAoZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXIgJiYgIWRhdGEuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpKVxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IHRydWVcbiAgICAgIGRhdGEuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Py5hY3Rvcikge1xuICAgICAgZGF0YS5za2lsbCA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZmluZChkYXRhLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lKVxuICAgICAgZGF0YS5jaGVja09wdGlvbnMgPSB0aGlzLmNoYXNlLmdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzKFxuICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkXG4gICAgICApXG4gICAgICBpZiAoZGF0YS5za2lsbCkge1xuICAgICAgICBkYXRhLnZhbGlkQ2hlY2sgPSB0cnVlXG4gICAgICAgIGRhdGEudmFsaWRTa2lsbCA9IHRydWVcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhLmNoZWNrT3B0aW9ucyA9IHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzXG4gICAgICBkYXRhLmR1bW15QWN0b3IgPSB0cnVlXG4gICAgICBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZGF0YS5kYXRhLmJvbnVzRGljZSkgZGF0YS5kYXRhLmJvbnVzRGljZSA9IDBcblxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5ib251c0RpY2UgPCAyICYmXG4gICAgICBkYXRhLmRhdGEudG90YWxBY3Rpb25Db3N0IDwgZGF0YS5kYXRhLm1vdmVtZW50QWN0aW9uXG4gICAgKSB7XG4gICAgICBkYXRhLmNhblRha2VDYXV0aW91c0FwcHJvYWNoID0gdHJ1ZVxuICAgIH1cblxuICAgIGRhdGEuY3VzdG9tV2VhcG9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5kYXRhLndlYXBvbkNob2ljZSA9PT0gJzAnKSB7XG4gICAgICBkYXRhLmN1c3RvbVdlYXBvbiA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoZGF0YS52YWxpZENoZWNrKSB7XG4gICAgICBsZXQgY2hlY2tOYW1lLCB2YWx1ZVxuICAgICAgaWYgKGRhdGEuc2tpbGwpIHtcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5za2lsbC52YWx1ZS5uYW1lXG4gICAgICAgIHZhbHVlID0gZGF0YS5za2lsbC52YWx1ZS52YWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZVxuICAgICAgICB2YWx1ZSA9IGRhdGEuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgfVxuICAgICAgZGF0YS5zdHJpbmdzLmNoZWNrUm9sbFJlcXVlc3QgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFza1JvbGwnLCB7XG4gICAgICAgIG5hbWU6IGNoZWNrTmFtZSxcbiAgICAgICAgdmFsdWVcbiAgICAgIH0pXG4gICAgICBpZiAoZGF0YS5kYXRhLmJvbnVzRGljZSAhPT0gMCkge1xuICAgICAgICBpZiAoZGF0YS5kYXRhLmJvbnVzRGljZSA+IDApIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgrJHtkYXRhLmRhdGEuYm9udXNEaWNlfSlgXG4gICAgICAgIH0gZWxzZSBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgke2RhdGEuZGF0YS5ib251c0RpY2V9KWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkKSB7XG4gICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVEZWZpbmVkID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWNpbmdPYnN0YWNsZScsIHtcbiAgICAgICAgdHlwZTogZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXJcbiAgICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BQmFycmllcicpXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQUhhemFyZCcpXG4gICAgICB9KVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5uYW1lKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURlZmluZWQgKz0gYCAoJHtkYXRhLmRhdGEub2JzdGFjbGUubmFtZX0pYFxuICAgICAgfVxuXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmNhbkFza1JvbGwgPSB0cnVlXG4gICAgICAvLyBkYXRhLmRhdGEuc3RhdGVzLm9ic3RhY2xlQ2FuQmVCcm9rZW4gPSBmYWxzZVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5iYXJyaWVyKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmFycmllcicpIH0pXG4gICAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CcmVha2FibGUnKSB9KVxuICAgICAgICAgIC8vIGRhdGEuZGF0YS5zdGF0ZXMub2JzdGFjbGVDYW5CZUJyb2tlbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHtcbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXphcmQnKSB9KVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICBpZiAoIWRhdGEudmFsaWRDaGVjaykge1xuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vVmFsaWRDaGVjaycpLFxuICAgICAgICAgICAgY3NzOiAnZXJyb3InXG4gICAgICAgICAgfSlcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuRW50ZXJWYWx1ZVRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICdDb0M3LlNraWxsU2VsZWN0QmFzZScsXG4gICAgICAgICAgICB7IG5hbWU6IGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgfVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoIWRhdGEuZGF0YS5jaGVja1RocmVzaG9sZCkgZGF0YS5kYXRhLnN0YXRlcy5jYW5Bc2tSb2xsID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmICghZGF0YS52YWxpZFNraWxsKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9WYWxpZFNraWxsJyksXG4gICAgICAgICAgICBjc3M6ICd3YXJuaW5nJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhaykge1xuICAgICAgICBsZXQgZGFtYWdlU3RhdHVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJyZWFrRG93bicpXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8ub2JzdGFjbGVEYW1hZ2VSb2xsPy50b3RhbCkge1xuICAgICAgICAgIGRhbWFnZVN0YXR1cyArPSBgIDogJHt0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwudG90YWx9YFxuICAgICAgICB9XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGRhbWFnZVN0YXR1c1xuICAgICAgICB9KVxuXG4gICAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGFtYWdlUm9sbGVkKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGw/LnRvdGFsIDw9IDApIHtcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURhbWFnZSA9XG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob0RhbWFnZURlYWx0JylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YS5pbmxpbmVEYW1hZ2VSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsXG4gICAgICAgICAgICApPy5vdXRlckhUTUxcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURhbWFnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGFtYWdlRGVhbHQnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBkYXRhLmlubGluZURhbWFnZVJvbGxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmVnb3RpYXRlJykgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2gpIHtcbiAgICAgICAgY29uc3QgY2F1dGlvdXNTdGF0dXMgPSB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhdXRpb3VzJyksXG4gICAgICAgICAgY3NzOiAnJ1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoID4gMSkge1xuICAgICAgICAgIGNhdXRpb3VzU3RhdHVzLmNzcyA9ICdzdHJvbmcnXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmNhdXRpb3VzQXBwcm9hY2hUeXBlID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuQmVpbmdWZXJ5Q2F1dGlvdXMnXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jYXV0aW91c0FwcHJvYWNoVHlwZSA9XG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmVpbmdDYXV0aW91cycpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UpIGNhdXRpb3VzU3RhdHVzLmNzcyArPSAnIGNvbnN1bWUnXG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goY2F1dGlvdXNTdGF0dXMpXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2spIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZSAvLyBPbiBoYXphcmQsIHlvdSBwYXNzIGV2ZW4gaWYgeW91IGZhaWwgeW91ciByb2xsXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5tb3ZlUGxheWVyID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPSB0cnVlXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlUGFzc2VkID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuT2JzdGFjbGVQYXNzZWQnXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5sdWNrU3BlbnQpIHtcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZVBhc3NlZCArPSBgICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuR290THVja3knXG4gICAgICAgICAgICApfSlgXG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlN1Y2Nlc3MnKSxcbiAgICAgICAgICAgIGNzczogJ3N1Y2Nlc3MnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5pc0Z1bWJsZSkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jaGVja0ZhaWxlZCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PYnN0YWNsZUZ1bWJsZScpXG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJyksXG4gICAgICAgICAgICBjc3M6ICdmdW1ibGUnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tGYWlsZWQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT2JzdGFjbGVGYWlsJylcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJyksXG4gICAgICAgICAgICBjc3M6ICdmYWlsdXJlJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkge1xuICAgICAgICBkYXRhLnN0cmluZ3MucGxheWVySW50ZW50aW9ucyA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5UcnlUb05lZ290aWF0ZUhhemFyZCdcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuYmFycmllcikge1xuICAgICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuVHJ5VG9HZXRQYXN0QmFycmllcnMnXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhaykge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRyeVRvQnJlYWsnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2hlY2tSb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCkge1xuICAgICAgICAvLyBJZiB0aGUgY2FyZCBpcyByZXNvbHZlZCB0aGUgY2hlY2sgaXMgZnJvemVuXG4gICAgICAgIGRhdGEuaHRtbENoZWNrID0gYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suaW5saW5lQ2hlY2s/Lm91dGVySFRNTFxuICAgICAgfSBlbHNlIGRhdGEuaHRtbENoZWNrID0gYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suZ2V0SHRtbFJvbGwoKVxuICAgIH1cblxuICAgIC8vIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkRGFtYWdlUm9sbCkge1xuICAgIC8vICAgaWYgKCFkYXRhLmRhdGEuYXJtb3IpIHtcbiAgICAvLyAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpXG4gICAgLy8gICAgICAgZGF0YS5kYXRhLmFybW9yID1cbiAgICAvLyAgICAgICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IudmFsdWUgfHwgMFxuICAgIC8vICAgfVxuICAgIC8vICAgaWYgKGRhdGEuZGF0YS5hcm1vcikge1xuICAgIC8vICAgICBpZiAoaXNOYU4oTnVtYmVyKGRhdGEuZGF0YS5hcm1vcikpKSBkYXRhLmRhdGEuYXJtb3IgPSBudWxsXG4gICAgLy8gICB9XG4gICAgLy8gfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkKSB7XG4gICAgICBkYXRhLnBsYXllckRhbWFnZVRha2VuID0gZmFsc2VcbiAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IGZhbHNlXG5cbiAgICAgIC8vIEhhcyB0aGUgb2JzdGFjbGUgY2hhbmdlZCA/XG4gICAgICBjb25zdCBkaWZmID0gdGhpcy5saXN0Q2hhbmdlcygpXG4gICAgICBpZiAoZGlmZi5jaGFuZ2VzKSB7XG4gICAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gSXMgcGxheWVyIHRha2luZyBkYW1hZ2VcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlICYmIHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjaz8uaXNGYWlsdXJlKSB7XG4gICAgICAgIGRhdGEucGxheWVyRGFtYWdlVGFrZW4gPSB0cnVlXG4gICAgICAgIGRhdGEuaW5saW5lRGFtYWdlVGFrZW5Sb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsXG4gICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgICAvLyBpZiAoZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPCAwKVxuICAgICAgICAvLyAgIGRhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxuXG4gICAgICAgIGlmIChkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA9PT0gMCkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Zb3VUYWtlTm9EYW1hZ2UnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAnQ29DNy5Zb3VUYWtlU29tZURhbWFnZScsXG4gICAgICAgICAgICB7IGFtb3VudDogZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvdGFsRGFtYWdlJykgK1xuICAgICAgICAgICAgYCA6JHtkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbn1gXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCAmJlxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2s/LmlzRmFpbHVyZVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEuYWN0aW9uTG9zdCA9IHRydWVcbiAgICAgICAgZGF0YS5zdHJpbmdzLmFjdGlvbkxvc3QgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWW91TG9zdFRpbWUnKVxuICAgICAgICBkYXRhLmlubGluZUFjdGlvbkxvc3RSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsXG4gICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgfVxuXG4gICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhcmRSZXNvbHZlZCcpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xuICAgICAgaWYgKHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5maW5hbE91dGNvbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTW92ZVRvTG9jYXRpb24nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YS5zdHJpbmdzLmZpbmFsT3V0Y29tZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Eb250TW92ZVRvTG9jYXRpb24nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgR01VcGRhdGUgKCkge1xuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvQzc6IEdNVXBkYXRlIGNhbGxlZCBmcm9tIG5vbiBHTSB1c2VyJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQpIHtcbiAgICAgIC8vIENhcmQgaXMgcmVzb2x2ZWQsIGNvbXB1dGUgYWxsIGZvcm11bGFzIGFuZCBkYW1hZ2UuXG4gICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZERhbWFnZVJvbGw/LnRvdGFsKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsRGFtYWdlID0gdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbC50b3RhbFxuICAgICAgICBjb25zdCBhcm1vclZhbHVlID0gdGhpcy5kYXRhLmZsYWdzLmlnbm9yZUFybW9yID8gMCA6IHRoaXMuZGF0YS5hcm1vclxuICAgICAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEoYXJtb3JWYWx1ZSkpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPSAoXG4gICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChhcm1vclZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICApLnRvdGFsXG4gICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihhcm1vclZhbHVlKSkpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPSBOdW1iZXIoYXJtb3JWYWx1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPSB0b3RhbERhbWFnZSAtIHRoaXMuZGF0YS5hcm1vclxuICAgICAgICAgIGlmICh0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEucmVmbGVjdE9ic3RhbGVDaGFuZ2VzKSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMgPSB0cnVlIC8vIEJ5IGRlZmF1bHQgcmVmbGVjdCBjaGFuZ2VzXG4gICAgICB9XG5cbiAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID1cbiAgICAgICAgICAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSB8fCB0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkKSAmJlxuICAgICAgICAgICF0aGlzLmRhdGEuc3RhdGVzLmZhaWxlZENvbnNlcXVlbmNlc1JvbGxlZFxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5iYXJyaWVyICYmXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHM/Lm9ic3RhY2xlRGFtYWdlUm9sbD8udG90YWxcbiAgICAgICkge1xuICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZSkge1xuICAgICAgICAgIHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlID1cbiAgICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbC50b3RhbFxuICAgICAgICB9XG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5mbGFncy5vYnN0YWNsZURlc3RveWVkKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLmZsYWdzLm9ic3RhY2xlRGVzdG95ZWQgPVxuICAgICAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cyAtIHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlIDw9IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xuICAgICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uQXJyYXkgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbkFycmF5XG4gICAgICApXG4gICAgICB0aGlzLmRhdGEuRUVDX0FDVElPTiA9IHsgZGV0YWNoRGF0YTogdHJ1ZSB9XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBsb2NhbENvbXB1dGUgKCkge31cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGFzc2lnbk9iamVjdHMgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjayAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0J1xuICAgICkge1xuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2sgPSBDb0M3Q2hlY2suZnJvbURhdGEodGhpcy5kYXRhLm9iamVjdHMuY2hlY2spXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9iamVjdHM/Lm9ic3RhY2xlRGFtYWdlUm9sbCAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcbiAgICApIHtcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbCA9IFJvbGwuZnJvbURhdGEoXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkRGFtYWdlUm9sbCAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YShcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkQWN0aW9uUm9sbCAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsID0gUm9sbC5mcm9tRGF0YShcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSAoKSB7XG4gICAgLy8gY29uc3QgY2hhc2UgPSBhd2FpdCBmcm9tVXVpZCh0aGlzLmRhdGEuY2hhc2VVdWlkKVxuICAgIGlmICghdGhpcy5jaGFzZSkgcmV0dXJuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNoYXNlLmFjdGl2ZVBhcnRpY2lwYW50RGF0YT8udXVpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhID0ge31cbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5zdGF0ZXMgPT09ICd1bmRlZmluZWQnKSB0aGlzLmRhdGEuc3RhdGVzID0ge31cblxuICAgIC8vIGNvbnN0IGxvY2F0aW9uID0gY2hhc2UuZ2V0TG9jYXRpb25EYXRhKHRoaXMuZGF0YS5sb2NhdGlvblV1aWQpXG4gICAgdGhpcy5kYXRhLm9ic3RhY2xlID0gdGhpcy5sb2NhdGlvbj8ub2JzdGFjbGVEZXRhaWxzIC8vIEZlZWQgdGhlIG9ic3RhY2xlIGRlZmluaXRpb25cbiAgICAvLyB0aGlzLmRhdGEucGFydGljaXBhbnREYXRhID0gY2hhc2UuYWN0aXZlUGFydGljaXBhbnREYXRhXG4gICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50VXVpZCA9IHRoaXMuY2hhc2UuYWN0aXZlUGFydGljaXBhbnREYXRhLnV1aWRcblxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50RGF0YT8uYm9udXNEaWNlID4gMCkge1xuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IHRoaXMucGFydGljaXBhbnREYXRhLmJvbnVzRGljZVxuICAgICAgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuaGFzQm9udXNEaWNlID0gdGhpcy5wYXJ0aWNpcGFudC5oYXNCb251c0RpY2VcbiAgICB9XG5cbiAgICB0aGlzLmRhdGEubW92ZW1lbnRBY3Rpb25BcnJheSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbkFycmF5XG4gICAgKVxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IHRoaXMucGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgPSAwXG4gIH1cblxuICBnZXQgcGFydGljaXBhbnQgKCkge1xuICAgIGlmICghdGhpcy5wYXJ0aWNpcGFudERhdGEpIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyBpZiAoIXRoaXMuX3BhcnRpY2lwYW50KVxuICAgIC8vICAgdGhpcy5fcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMucGFydGljaXBhbnREYXRhKVxuICAgIC8vIHJldHVybiB0aGlzLl9wYXJ0aWNpcGFudFxuICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHRoaXMucGFydGljaXBhbnREYXRhKSAvLyBUTyBSRVNFVFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50RGF0YSAoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXNlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuY2hhc2UuZ2V0UGFydGljaXBhbnREYXRhKHRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQpXG4gIH1cblxuICBnZXQgbG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5jaGFzZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmNoYXNlLmdldExvY2F0aW9uRGF0YSh0aGlzLmRhdGEubG9jYXRpb25VdWlkKVxuICB9XG5cbiAgZ2V0IG9ic3RhY2xlICgpIHtcbiAgICBpZiAoIXRoaXMubG9jYXRpb24pIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5vYnN0YWNsZURldGFpbHNcbiAgfVxuXG4gIGdldCBjaGFzZSAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuY2hhc2VVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLl9jaGFzZSkgdGhpcy5fY2hhc2UgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZCh0aGlzLmRhdGEuY2hhc2VVdWlkKVxuICAgIHJldHVybiB0aGlzLl9jaGFzZVxuICB9XG5cbiAgZ2V0IHJvbGwgKCkge1xuICAgIGxldCByb2xsRGF0YVxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LmFjdG9yICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUpIHtcbiAgICAgIGNvbnN0IGFjdG9yU2tpbGwgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmZpbmQoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWVcbiAgICAgIClcbiAgICAgIGlmICh0eXBlb2YgYWN0b3JTa2lsbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcm9sbERhdGEgPSBhY3RvclNraWxsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb2xsRGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aGlzLmRhdGEuY2hlY2tUaHJlc2hvbGRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJvbGxEYXRhLmFjdG9yID0geyBhY3RvcktleTogdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5pZCB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lICYmIHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZCkge1xuICAgICAgICByb2xsRGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aGlzLmRhdGEuY2hlY2tUaHJlc2hvbGRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFjdG9yOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLnBhcnRpY2lwYW50Lm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJvbGxEYXRhKSB7XG4gICAgICByb2xsRGF0YS5kaWNlTW9kaWZpZXIgPSB0aGlzLmRhdGE/LmJvbnVzRGljZSB8fCAwXG4gICAgICByb2xsRGF0YS5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICByb2xsRGF0YS5kZW55UHVzaCA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIHJvbGxEYXRhIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHZhbGlkRmFpbGVkUm9sbHMgKCkge1xuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrPy5pc0ZhaWx1cmUpIHJldHVybiBmYWxzZVxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlKSB7XG4gICAgICBjb25zdCBkYW1hZ2UgPVxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlfWBcbiAgICAgICAgICA6IHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZVxuICAgICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UpIHJldHVybiBmYWxzZVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UgJiZcbiAgICAgICAgIVJvbGwudmFsaWRhdGUoZGFtYWdlKSAvLyBWYWxpZGF0ZSBvbmx5IHRha2UgYSBzdHJpbmcsIGlmIGRhbWFnZSBpcyBhIG51bWJlciBjb252ZXJ0IHRvIGEgc3RyaW5nXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNBY3Rpb25Db3N0KSB7XG4gICAgICBjb25zdCBhY3Rpb25Db3N0ID1cbiAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3R9YFxuICAgICAgICAgIDogdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3RcbiAgICAgIGlmICghdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QpIHJldHVybiBmYWxzZVxuICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ICYmICFSb2xsLnZhbGlkYXRlKGFjdGlvbkNvc3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IHdlYXBvbnNPcHRpb25zICgpIHtcbiAgICBjb25zdCB3ZWFwb25zID0gW11cbiAgICB0aGlzLnBhcnRpY2lwYW50LmFjdG9yPy5pdGVtVHlwZXM/LndlYXBvbj8uZm9yRWFjaCh3ID0+IHtcbiAgICAgIGxldCBmb3JtdWxhID0gdy5zeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZVxuICAgICAgbGV0IGRiID0gdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kYlxuICAgICAgaWYgKGRiID09PSBudWxsIHx8IE51bWJlcihkYikgPT09IDApIHtcbiAgICAgICAgZGIgPSAnJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGIgPSBgJHtkYn1gXG4gICAgICB9XG5cbiAgICAgIGlmIChkYiAmJiAhZGIuc3RhcnRzV2l0aCgnLScpKSBkYiA9ICcrJyArIGRiXG4gICAgICBpZiAody5zeXN0ZW0ucHJvcGVydGllcy5hZGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiXG4gICAgICBpZiAody5zeXN0ZW0ucHJvcGVydGllcy5haGJkKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiICsgJy8yJ1xuICAgICAgd2VhcG9ucy5wdXNoKHtcbiAgICAgICAgbmFtZTogYCR7dy5uYW1lfSAoJHtmb3JtdWxhfSlgLFxuICAgICAgICBkYW1hZ2U6IGZvcm11bGEsXG4gICAgICAgIHV1aWQ6IHcudXVpZFxuICAgICAgfSlcbiAgICB9KVxuICAgIHdlYXBvbnMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBpZiAoXG4gICAgICAhd2VhcG9ucy5maW5kKHcgPT5cbiAgICAgICAgdy5uYW1lXG4gICAgICAgICAgLnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAuc3RhcnRzV2l0aChcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFybWVkV2VhcG9uTmFtZScpPy50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgKVxuICAgICAgKVxuICAgICkge1xuICAgICAgbGV0IGRiID0gJydcbiAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LmFjdG9yKSB7XG4gICAgICAgIGRiID0gdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kYlxuICAgICAgICBpZiAoZGIgJiYgIWRiLnN0YXJ0c1dpdGgoJy0nKSkgZGIgPSAnKycgKyBkYlxuICAgICAgICBpZiAoZGIgPT09IG51bGwgfHwgTnVtYmVyKGRiKSA9PT0gMCkgZGIgPSAnJ1xuICAgICAgfVxuXG4gICAgICB3ZWFwb25zLnVuc2hpZnQoe1xuICAgICAgICBuYW1lOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5hcm1lZFdlYXBvbk5hbWUnKX0gKDFEMyR7ZGJ9KWAsXG4gICAgICAgIGRhbWFnZTogYDFEMyR7ZGJ9YCxcbiAgICAgICAgdXVpZDogJ3VuYXJtZWQnXG4gICAgICB9KVxuICAgIH1cblxuICAgIHdlYXBvbnMucHVzaCh7XG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3RoZXInKSxcbiAgICAgIGRhbWFnZTogdGhpcy5kYXRhPy5jdXN0b21XZWFwb25EYW1hZ2UgfHwgbnVsbCxcbiAgICAgIHV1aWQ6IDBcbiAgICB9KVxuICAgIHJldHVybiB3ZWFwb25zXG4gIH1cblxuICBnZXQgdXNlZFdlYXBvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGE/LndlYXBvbkNob2ljZSkge1xuICAgICAgaWYgKCF0aGlzLndlYXBvbnNPcHRpb25zKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoIXRoaXMuZGF0YSkgdGhpcy5kYXRhID0ge30gLy8gdXNlbGVzcyAhISFcbiAgICAgIHRoaXMuZGF0YS53ZWFwb25DaG9pY2UgPSB0aGlzLndlYXBvbnNPcHRpb25zWzBdLnV1aWRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLndlYXBvbkNob2ljZSkge1xuICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy53ZWFwb25zT3B0aW9ucy5maW5kKFxuICAgICAgICBlID0+IGUudXVpZCA9PT0gdGhpcy5kYXRhLndlYXBvbkNob2ljZVxuICAgICAgKVxuICAgICAgaWYgKHdlYXBvbikgcmV0dXJuIHdlYXBvblxuICAgIH1cbiAgfVxuXG4gIGdldCBpbmZsaWN0ZWREYW1hZ2VGb3JtdWxhICgpIHtcbiAgICBpZiAodGhpcy51c2VkV2VhcG9uKSB7XG4gICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLnVzZWRXZWFwb25cbiAgICAgIGlmICh3ZWFwb24gJiYgd2VhcG9uLmRhbWFnZSAmJiBSb2xsLnZhbGlkYXRlKHdlYXBvbi5kYW1hZ2UpKSB7XG4gICAgICAgIHJldHVybiB3ZWFwb24uZGFtYWdlXG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCB2YWxpZE9ic3RhY2xlRGFtYWdlICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzICYmXG4gICAgICAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHMpKSAmJlxuICAgICAgTnVtYmVyKHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHMpID4gMCAmJlxuICAgICAgdGhpcy5pbmZsaWN0ZWREYW1hZ2VGb3JtdWxhXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBzdHJpbmdzICgpIHtcbiAgICBjb25zdCBzdHJpbmdzID0ge31cbiAgICBzdHJpbmdzLmRhbWFnZVJvbGxSZXF1ZXN0ID0gdGhpcy51c2VkV2VhcG9uLm5hbWVcblxuICAgIHJldHVybiBzdHJpbmdzXG4gIH1cblxuICAvLyBBY3Rpb25zIDpcbiAgYXN5bmMgdmFsaWRhdGVDYXJkIChvcHRpb25zKSB7XG4gICAgbGV0IGxvYWN0aW9uQ2hhbmdlZFxuICAgIGxldCBwYXJ0aWNpcGFudENoYWdlZCA9IGZhbHNlXG4gICAgY29uc3Qgb2JzdGFjbGVVcGRhdGUgPSB7fVxuICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscyA9IHt9XG4gICAgY29uc3QgcGFydGljaXBhbnRVcGRhdGUgPSB7fVxuICAgIGlmICh0aGlzLmRhdGEuZmxhZ3Mub2JzdGFjbGVEZXN0b3llZCkge1xuICAgICAgbG9hY3Rpb25DaGFuZ2VkID0gdHJ1ZVxuICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGUgPSBmYWxzZVxuICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzLmhhemFyZCA9IGZhbHNlXG4gICAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHMuYmFycmllciA9IGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgZGlmZiA9IHRoaXMubGlzdENoYW5nZXMoKVxuICAgIGlmIChkaWZmLmNoYW5nZXMpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEucmVmbGVjdE9ic3RhbGVDaGFuZ2VzKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRpZmYub2JzdGFjbGUpKSB7XG4gICAgICAgICAgaWYgKGtleSAhPT0gJ3R5cGUnKSB7XG4gICAgICAgICAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHNbdmFsdWUua2V5XSA9IHZhbHVlLm5ld1xuICAgICAgICAgICAgbG9hY3Rpb25DaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZSA+IDAgJiYgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cykge1xuICAgICAgbGV0IHJlbWFpbmluZ0hwID0gdGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50c1xuICAgICAgcmVtYWluaW5nSHAgLT0gdGhpcy5kYXRhLnRvdGFsT2JzdGFjbGVEYW1hZ2VcbiAgICAgIGlmIChyZW1haW5pbmdIcCA8IDApIHJlbWFpbmluZ0hwID0gMFxuICAgICAgaWYgKHRoaXMub2JzdGFjbGUuSGl0UG9pbnRzICE9PSByZW1haW5pbmdIcCkge1xuICAgICAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHMuSGl0UG9pbnRzID0gcmVtYWluaW5nSHBcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cyA9IHJlbWFpbmluZ0hwXG4gICAgICAgIGxvYWN0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPiAwKSB7XG4gICAgICBwYXJ0aWNpcGFudENoYWdlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LmFjdG9yKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGVhbERhbWFnZShcbiAgICAgICAgICB0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbixcbiAgICAgICAgICB7IGlnbm9yZUFybW9yOiB0cnVlIH1cbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUuaHAgPSB0aGlzLnBhcnRpY2lwYW50RGF0YS5ocFxuICAgICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5ocCAtPSB0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlblxuICAgICAgICBpZiAocGFydGljaXBhbnRVcGRhdGUuaHAgPCAwKSBwYXJ0aWNpcGFudFVwZGF0ZS5ocCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCA+IDApIHtcbiAgICAgIHBhcnRpY2lwYW50Q2hhZ2VkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnRVcGRhdGUuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9XG4gICAgICAgIHRoaXMucGFydGljaXBhbnREYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcbiAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgLT0gdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdFxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPT09ICd1bmRlZmluZWQnKSB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9IHRydWUgLy8gQm9udXMgZGljZSBhd2FyZGVkIGR1cmluZyBmbG93IGFyZSBiZWluZyBjb25zdW1lZFxuXG4gICAgaWYgKHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlKSB7XG4gICAgICBwYXJ0aWNpcGFudENoYWdlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmJvbnVzRGljZSA9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKFxuICAgICAgICAhaXNOYU4odGhpcy5kYXRhLmJvbnVzRGljZSkgJiZcbiAgICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSAhPT0gdGhpcy5wYXJ0aWNpcGFudC5ib251c0RpY2VcbiAgICAgICkge1xuICAgICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5ib251c0RpY2UgPSB0aGlzLmRhdGEuYm9udXNEaWNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICBsZXQgdGFyZ2V0TG9jYXRpb25cbiAgICAgIGlmICh0aGlzLmRhdGEuZm9yd2FyZCkge1xuICAgICAgICB0YXJnZXRMb2NhdGlvbiA9IHRoaXMubG9jYXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldExvY2F0aW9uID0gdGhpcy5jaGFzZS5nZXRMb2NhdGlvblNoaWZ0KHRoaXMubG9jYXRpb24udXVpZCwge1xuICAgICAgICAgIHNraXA6IC0xXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmICh0YXJnZXRMb2NhdGlvbi51dWlkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY2hhc2UubW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbihcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50RGF0YS51dWlkLFxuICAgICAgICAgIHRhcmdldExvY2F0aW9uLnV1aWQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgIGFjdGl2YXRlTG9jYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgcmVuZGVyOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChsb2FjdGlvbkNoYW5nZWQpIHtcbiAgICAgIGF3YWl0IHRoaXMuY2hhc2UudXBkYXRlTG9jYXRpb24odGhpcy5sb2NhdGlvbi51dWlkLCBvYnN0YWNsZVVwZGF0ZSwge1xuICAgICAgICByZW5kZXI6IGZhbHNlXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAocGFydGljaXBhbnRDaGFnZWQpIHtcbiAgICAgIGF3YWl0IHRoaXMuY2hhc2UudXBkYXRlUGFydGljaXBhbnQoXG4gICAgICAgIHRoaXMucGFydGljaXBhbnREYXRhLnV1aWQsXG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCA9IHRydWVcbiAgICBhd2FpdCB0aGlzLmNoYXNlLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybigpIC8vIFJlbmRlciB3aWxsIGJlIGRvbmUgdGhlcmUgIVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyBkZWZpbmVPYnN0YWNsZSAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLnN0YXRlcykgdGhpcy5kYXRhLnN0YXRlcyA9IHt9XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5vYnN0YWNsZURlZmluZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHRyeVRvTmVnb3RpYXRlT2JzdGFjbGUgKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb0JyZWFrID0gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdHJ5VG9CcmVha0Rvd25PYnN0YWNsZSAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb0JyZWFrID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyBjYW5jZWxPYnN0YWNsZURlZmluaXRpb24gKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGVmaW5lZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5icmVha09yTmVnb3RpYXRlRGVmaW5lZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb0JyZWFrID0gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgY2FuY2VsQnJlYWtPclBhc3NDaG9pY2UgKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpIHJldHVybiB0aGlzLmNhbmNlbE9ic3RhY2xlRGVmaW5pdGlvbigpXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5icmVha09yTmVnb3RpYXRlRGVmaW5lZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb0JyZWFrID0gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgcmVxdWVzdFJvbGwgKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnBsYXllckFjdGlvbkRlZmluZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHRha2VDYXV0aW91c0FwcHJvYWNoIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoKSB0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoID0gMFxuICAgIHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2ggKz0gMVxuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgKz0gMVxuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gMVxuICAgIGlmICghdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UpIHtcbiAgICAgIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoIXRoaXMuZGF0YS5mbGFncy5oYXNCb251c0RpY2UpIHtcbiAgICAgIHRoaXMuZGF0YS5mbGFncy5oYXNCb251c0RpY2UgPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEubW92ZW1lbnRBY3Rpb24gPD0gdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCkgeyAvLyBBbGwgbW92IGFjdGlvbiBoYXZlIGJlZW4gdXNlZCB0byB0YWtlIGN1YXRpb3VzIGFwcHJvYWNoLlxuICAgICAgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSBmYWxzZSAvLyBEbyBub3QgY29uc3VtZSB0aGUgYm9udXMgZGljZS5cbiAgICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgICAgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgcm9sbFNraWxsQ2hlY2sgKG9wdGlvbnMpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLmV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkgcmV0dXJuXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJylcbiAgICBpZiAoIXRoaXMucm9sbCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90aGluZ1RvUm9sbCcpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMpIHRoaXMuZGF0YS5vYmplY3RzID0ge31cbiAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjayA9IENvQzdDaGVjay5jcmVhdGVGcm9tQWN0b3JSb2xsRGF0YSh0aGlzLnJvbGwpXG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cy5jaGVjaykgcmV0dXJuIGZhbHNlXG4gICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suZGVueVB1c2ggPSB0cnVlIC8vIE9ic3RhY2xlIGNoZWNrIGNhbid0IGJlIHB1c2hlZFxuICAgIGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLl9wZXJmb3JtKHsgZm9yY2VEU046IHRydWUgfSlcbiAgICB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ICs9IDFcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmNoZWNrUm9sbGVkID0gdHJ1ZVxuICAgIHRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcpXG4gICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLnBhc3NlZCkge1xuICAgICAgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEuYXJtb3IgPT09ICd1bmRlZmluZWQnICYmIHRoaXMucGFydGljaXBhbnQuYWN0b3IpIHtcbiAgICAgICAgdGhpcy5kYXRhLmFybW9yID1cbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlIHx8IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdXNlTHVjayAob3B0aW9ucykge1xuICAgIGF3YWl0IENvQzdDaGVjay5hbHRlcih0aGlzLmRhdGEub2JqZWN0cy5jaGVjaywgJ3VzZUx1Y2snLCB7XG4gICAgICB0YXJnZXQ6IG9wdGlvbnMuZXZlbnQuY3VycmVudFRhcmdldCxcbiAgICAgIHVwZGF0ZTogZmFsc2VcbiAgICB9KVxuICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcbiAgICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgICAgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ICs9IDFcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJvbGxGYWlsQ29uc2VxdWVuY2VzIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cykgdGhpcy5kYXRhLm9iamVjdHMgPSB7fVxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlICYmIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrPy5pc0ZhaWx1cmUpIHtcbiAgICAgIGNvbnN0IGRhbWFnZSA9XG4gICAgICAgIHR5cGVvZiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UgPT09ICdudW1iZXInXG4gICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2V9YFxuICAgICAgICAgIDogdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsID0gbmV3IFJvbGwoZGFtYWdlKVxuICAgICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNBY3Rpb25Db3N0ICYmXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrPy5pc0ZhaWx1cmVcbiAgICAgICkge1xuICAgICAgICBjb25zdCBhY3Rpb25Db3N0ID1cbiAgICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QgPT09ICdudW1iZXInXG4gICAgICAgICAgICA/IGAke3RoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0fWBcbiAgICAgICAgICAgIDogdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3RcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbCA9IG5ldyBSb2xsKGFjdGlvbkNvc3QpXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ICs9ICh0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsLnRvdGFsIC0gMSkgLy8gMSBhY3Rpb24gYWxyZWFkeSBzcGVuZCBmb3Igc2tpbGwgY2hlY2tcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmRhdGEuc3RhdGVzLmZhaWxlZENvbnNlcXVlbmNlc1JvbGxlZCA9IHRydWVcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgYXNrUm9sbE9ic3RhY2xlRGFtYWdlIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByb2xsT2JzdGFjbGVEYW1hZ2UgKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5vYmplY3RzKSB0aGlzLmRhdGEub2JqZWN0cyA9IHt9XG4gICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsID0gbmV3IFJvbGwodGhpcy51c2VkV2VhcG9uPy5kYW1hZ2UpXG4gICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwpXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5vYnN0YWNsZURhbWFnZVJvbGxlZCA9IHRydWVcbiAgICB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ICs9IDFcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLy8gTGlzdCBhbGwgY2hhbmdlc1xuICBsaXN0Q2hhbmdlcyAodmFsaWRhdGUgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRpZmYgPSB7XG4gICAgICBvYnN0YWNsZToge30sXG4gICAgICBwbGF5ZXI6IHt9LFxuICAgICAgY2hhbmdlczogZmFsc2VcbiAgICB9XG4gICAgY29uc3QgbmFtZXMgPSB7XG4gICAgICBiYXJyaWVyOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVHlwZScpLFxuICAgICAgaGF6YXJkOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVHlwZScpLFxuICAgICAgaGFzSGl0UG9pbnRzOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQnJlYWthYmxlJyksXG4gICAgICBIaXRQb2ludHM6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IaXRQb2ludHMnKSxcbiAgICAgIGhhc0FjdGlvbkNvc3Q6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3Rpb25Db3N0JyksXG4gICAgICBmYWlsZWRBY3Rpb25Db3N0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0aW9uQ29zdCcpLFxuICAgICAgaGFzRGFtYWdlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlnaHRCYWNrJyksXG4gICAgICBmYWlsZWRDaGVja0RhbWFnZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbkRhbWFnZScpLFxuICAgICAgY2hlY2tOYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hlY2snKSxcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5OYW1lJylcbiAgICB9XG5cbiAgICBpZiAodmFsaWRhdGUgJiYgIXRoaXMuZGF0YS52YWxpZGF0aW9uKSB7XG4gICAgICB0aGlzLmRhdGEudmFsaWRhdGlvbiA9IHt9XG4gICAgfVxuXG4gICAgY29uc3QgbmV3T2JzdGFjbGUgPSBmb3VuZHJ5LnV0aWxzLmRpZmZPYmplY3QoXG4gICAgICB0aGlzLm9ic3RhY2xlLFxuICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlXG4gICAgKVxuICAgIC8vIGNvbnN0IG9sZE9ic3RhY2xlID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KHRoaXMuZGF0YS5vYnN0YWNsZSwgdGhpcy5vYnN0YWNsZSlcblxuICAgIGZvciAoY29uc3QgW2tleV0gb2YgT2JqZWN0LmVudHJpZXMobmV3T2JzdGFjbGUpKSB7XG4gICAgICAvLyBpZiAoJ2JhcnJpZXInID09IGtleSB8fCAnaGF6YXJkJyA9PSBrZXkpXG4gICAgICAvLyB7XG4gICAgICAvLyAgIGRpZmYuY2hhbmdlcyA9IHRydWVcbiAgICAgIC8vICAgZGlmZi5vYnN0YWNsZS50eXBlID0ge1xuICAgICAgLy8gICAgIG9sZDogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgLy8gICAgICAgdGhpcy5vYnN0YWNsZS5iYXJyaWVyID8gJ0NvQzcuQmFycmllcicgOiAnQ29DNy5IYXphcmQnXG4gICAgICAvLyAgICAgKSxcbiAgICAgIC8vICAgICBuZXc6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgIC8vICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5iYXJyaWVyID8gJ0NvQzcuQmFycmllcicgOiAnQ29DNy5IYXphcmQnXG4gICAgICAvLyAgICAgKSxcbiAgICAgIC8vICAgICBrZXk6ICd0eXBlJyxcbiAgICAgIC8vICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVHlwZScpXG4gICAgICAvLyAgIH1cbiAgICAgIC8vICAgaWYgKHZhbGlkYXRlKSB7XG4gICAgICAvLyAgICAgdGhpcy5kYXRhLnZhbGlkYXRpb25ba2V5XSA9IHRydWVcbiAgICAgIC8vICAgICB0aGlzLmRhdGEudmFsaWRhdGlvbi50eXBlID0gdHJ1ZVxuICAgICAgLy8gICB9XG4gICAgICAvLyB9XG4gICAgICAvLyBlbHNlXG4gICAgICAvLyB7XG4gICAgICBpZiAoXG4gICAgICAgICEoXG4gICAgICAgICAgKG5ld09ic3RhY2xlW2tleV0gPT09ICcnICYmIHRoaXMub2JzdGFjbGVba2V5XSA9PT0gbnVsbCkgfHxcbiAgICAgICAgICAoIWlzTmFOKE51bWJlcihuZXdPYnN0YWNsZVtrZXldKSkgJiZcbiAgICAgICAgICAgIE51bWJlcihuZXdPYnN0YWNsZVtrZXldKSA9PT0gdGhpcy5vYnN0YWNsZVtrZXldKVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgZGlmZi5jaGFuZ2VzID0gdHJ1ZVxuXG4gICAgICAgIGRpZmYub2JzdGFjbGVba2V5XSA9IHtcbiAgICAgICAgICBvbGQ6IHRoaXMub2JzdGFjbGVba2V5XSxcbiAgICAgICAgICBuZXc6IG5ld09ic3RhY2xlW2tleV0sXG4gICAgICAgICAgbmFtZTogbmFtZXNba2V5XSxcbiAgICAgICAgICBrZXlcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsaWRhdGUpIHRoaXMuZGF0YS52YWxpZGF0aW9uW2tleV0gPSB0cnVlXG4gICAgICB9XG4gICAgICAvLyB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpZmZcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGNhbnZhcywgRGlhbG9nLCBmb3VuZHJ5LCBnYW1lLCBQSVhJLCBUb2tlbiwgVG9rZW5Eb2N1bWVudCwgdWkgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ2hhc2VPYnN0YWNsZUNhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgX3BhcnRpY2lwYW50LCBzb3J0QnlSb2xlQW5kRGV4IH0gZnJvbSAnLi9wYXJ0aWNpcGFudC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZSBleHRlbmRzIENvQzdJdGVtIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9ydW5uaW5nLXNvbGlkLnN2ZydcbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0XG4gIH1cblxuICAvLyBIYW5kbGUgcGFydGljaXBhbnRzXG4gIGdldCBwYXJ0aWNpcGFudHMgKCkge1xuICAgIGNvbnN0IHBMaXN0ID0gW11cbiAgICBjb25zdCBwcmV5cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgLmZpbHRlcihwID0+ICFwLmNoYXNlcilcbiAgICAgIC5tYXAocCA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHApXG4gICAgICB9KVxuICAgIGNvbnN0IGNoYXNlcnMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgIC5maWx0ZXIocCA9PiBwLmNoYXNlcilcbiAgICAgIC5tYXAocCA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHApXG4gICAgICB9KVxuICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgLy8gcC5pbmRleCA9IHBMaXN0Lmxlbmd0aCAtIDFcbiAgICAgIHAuYXNzaXN0ID0gW11cbiAgICAgIGlmIChwLmNoYXNlcikge1xuICAgICAgICBwLmFzc2lzdCA9IGNoYXNlcnNcbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYy51dWlkICE9PSBwLnV1aWQgJiYgIWMuaGFzTWF4Qm9udXNEaWNlKVxuICAgICAgICAgIC5tYXAoYyA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBjLnV1aWQsIG5hbWU6IGMubmFtZSB9XG4gICAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAuYXNzaXN0ID0gcHJleXNcbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYy51dWlkICE9PSBwLnV1aWQgJiYgIWMuaGFzTWF4Qm9udXNEaWNlKVxuICAgICAgICAgIC5tYXAoYyA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBjLnV1aWQsIG5hbWU6IGMubmFtZSB9XG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcnRpY3BhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHApXG4gICAgICAvLyBwYXJ0aWNwYW50LmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKCBwYXJ0aWNwYW50LnV1aWQpIC8vIFJlY3Vyc2l2aXR5XG4gICAgICBwTGlzdC5wdXNoKHBhcnRpY3BhbnQpXG4gICAgfSlcbiAgICByZXR1cm4gcExpc3RcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudHNPYmplY3QgKCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcbiAgICB9KVxuICAgIHJldHVybiBwYXJ0aWNpcGFudHNcbiAgfVxuXG4gIGdldCBhY3RpdmVQYXJ0aWNpcGFudERhdGEgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IHAuYWN0aXZlKVxuICB9XG5cbiAgZ2V0IGFjdGl2ZUFjdG9yICgpIHtcbiAgICBjb25zdCBwID0gdGhpcy5hY3RpdmVQYXJ0aWNpcGFudERhdGFcbiAgICBpZiAoIXApIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAocC5kb2NVdWlkKSB7XG4gICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkocC5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgcGFydGljaXBhbnRzQnlBZGp1c3RlZE1vdiAoKSB7XG4gICAgY29uc3QgcExpc3QgPSB0aGlzLmFjdHVhbFBhcnRpY2lwYW50cy5zb3J0KFxuICAgICAgKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92XG4gICAgKVxuICAgIHBMaXN0LmZvckVhY2gocCA9PiB7XG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcbiAgICB9KVxuICAgIHJldHVybiBwTGlzdFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZSAoKSB7XG4gICAgY29uc3QgcExpc3QgPSB0aGlzLmFjdHVhbFBhcnRpY2lwYW50cy5zb3J0KFxuICAgICAgKGEsIGIpID0+IGIuaW5pdGlhdGl2ZSAtIGEuaW5pdGlhdGl2ZVxuICAgIClcbiAgICBwTGlzdC5mb3JFYWNoKHAgPT4ge1xuICAgICAgcC5sb2NhdGlvbiA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwLnV1aWQpXG4gICAgfSlcbiAgICByZXR1cm4gcExpc3RcbiAgfVxuXG4gIGdldCBwcmV5cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmZpbHRlcihwID0+ICFwLmlzQ2hhc2VyICYmIHAuaXNWYWxpZCkgfHwgW11cbiAgfVxuXG4gIGdldCBjaGFzZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gcC5pc0NoYXNlciAmJiBwLmlzVmFsaWQpIHx8IFtdXG4gIH1cblxuICBnZXQgYWxsSGF2ZVZhbGlkTW92ICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZXZlcnkoZSA9PiBlLmhhc1ZhbGlkTW92KVxuICB9XG5cbiAgZ2V0IGFsbEhhdmVTcGVlZFJvbGwgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5ldmVyeShwID0+IHAuc3BlZWRDaGVjaz8ucm9sbGVkKVxuICB9XG5cbiAgZ2V0UGFydGljaXBhbnRMb2NhdGlvbiAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5sb2NhdGlvbnM/Lmxpc3Q/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMubG9jYXRpb25zXG5cbiAgICBjb25zdCBsb2NhdGlvbiA9IGxvY2F0aW9ucy5maW5kKGwgPT4ge1xuICAgICAgY29uc3QgbHAgPSBsLnBhcnRpY2lwYW50cz8uZmluZChwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkKVxuICAgICAgcmV0dXJuICEhbHBcbiAgICB9KVxuICAgIGlmIChsb2NhdGlvbikge1xuICAgICAgcmV0dXJuIGxvY2F0aW9uXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldFBhcnRpY2lwYW50RGF0YSAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50KSByZXR1cm4gZm91bmRyeS51dGlscy5kdXBsaWNhdGUocGFydGljaXBhbnQpIC8vIFRPRE8gOiBjaGVjayBpZiB3ZSBuZWVkIHRvIGR1cGxpY2F0ZVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldFBhcnRpY2lwYW50IChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudERhdGEgPSB0aGlzLmdldFBhcnRpY2lwYW50RGF0YShwYXJ0aWNpcGFudFV1aWQpXG4gICAgaWYgKHBhcnRpY2lwYW50RGF0YSkgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnREYXRhKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBuZXh0QWN0aXZlUGFydGljaXBhbnQgKCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzQnlJbml0aWF0aXZlLmZpbmQoXG4gICAgICBwID0+IHAuZGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gMFxuICAgIClcbiAgfVxuXG4gIGdldCBzbG93ZXN0UHJleSAoKSB7XG4gICAgY29uc3QgcHJleXMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92KVxuICAgICAgPy5maWx0ZXIocCA9PiBwLmlzUHJleSlcbiAgICBpZiAocHJleXMubGVuZ3RoID4gMCkgcmV0dXJuIHByZXlzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGZhc3Rlc3RDaGFzZXIgKCkge1xuICAgIGNvbnN0IGNoYXNlcnMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92KVxuICAgICAgPy5maWx0ZXIocCA9PiBwLmlzQ2hhc2VyKVxuICAgIGlmIChjaGFzZXJzLmxlbmd0aCA+IDApIHJldHVybiBjaGFzZXJzLnNsaWNlKC0xKS5wb3AoKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBhY3R1YWxQYXJ0aWNpcGFudHMgKCkge1xuICAgIGNvbnN0IHNsb3dlc3RQcmV5ID0gdGhpcy5zbG93ZXN0UHJleVxuICAgIGNvbnN0IGZhc3Rlc3RDaGFzZXIgPSB0aGlzLmZhc3Rlc3RDaGFzZXJcbiAgICBsZXQgcExpc3QgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgIGlmICghdGhpcy5zeXN0ZW0uaW5jbHVkZUxhdGVjb21lcnMgJiYgc2xvd2VzdFByZXkpIHtcbiAgICAgIHBMaXN0ID0gcExpc3QuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHAuaXNQcmV5IHx8IChwLmlzQ2hhc2VyICYmIHAuYWRqdXN0ZWRNb3YgPj0gc2xvd2VzdFByZXkuYWRqdXN0ZWRNb3YpXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbmNsdWRlRXNjYXBlZCAmJiBmYXN0ZXN0Q2hhc2VyKSB7XG4gICAgICBwTGlzdCA9IHBMaXN0LmZpbHRlcihwID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBwLmlzQ2hhc2VyIHx8IChwLmlzUHJleSAmJiBwLmFkanVzdGVkTW92IDw9IGZhc3Rlc3RDaGFzZXIuYWRqdXN0ZWRNb3YpXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHBMaXN0XG4gIH1cblxuICBnZXQgc2xvd2VzdFBhcnRpY2lwYW50ICgpIHtcbiAgICBjb25zdCBwTGlzdCA9IHRoaXMucGFydGljaXBhbnRzQnlBZGp1c3RlZE1vdlxuICAgIGlmIChwTGlzdC5sZW5ndGggPiAwKSByZXR1cm4gcExpc3RbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyB1cGRhdGVQYXJ0aWNpcGFudHMgKGxpc3QsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gdGhpcy5jbGVhblBhcnRpY2lwYW50TGlzdChsaXN0KVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUGFydGljaXBhbnQgKHBhcnRpY2lhbnRVdWlkLCB1cGRhdGVEYXRhLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgIGNvbnN0IHVwZGF0ZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHVwZGF0ZURhdGEpXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50SW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHVwZGF0ZS51dWlkKSBkZWxldGUgdXBkYXRlLnV1aWRcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHBhcnRpY2lwYW50c1twYXJ0aWNpcGFudEluZGV4XSwgdXBkYXRlLCB7XG4gICAgICBvdmVyd3JpdGU6IHRydWVcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGNsZWFuUGFydGljaXBhbnRMaXN0IChsaXN0KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGxpc3QgfHwgZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgIGxpc3QuZm9yRWFjaChwID0+IHtcbiAgICAgIGxldCBkYXRhXG4gICAgICBpZiAocC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnX3BhcnRpY2lwYW50Jykge1xuICAgICAgICBkYXRhID0gcC5kYXRhXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0gcFxuICAgICAgfVxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRJbmRleChwYXJ0aWNpcGFudHNEYXRhLCBkYXRhLnV1aWQpXG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGEucHVzaChkYXRhKVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhcnRpY2lwYW50RGF0YU1pc3NpbmcnKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGFbaW5kZXhdID0gZGF0YVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHBhcnRpY2lwYW50c0RhdGFcbiAgfVxuXG4gIGFzeW5jIGFzc2lzdFBhcnRpY2lwYW50IChcbiAgICBhc3Npc3RhbnRVdWlkLFxuICAgIGJlbmVmaWNpYXJ5VXVpZCxcbiAgICB7IHVzZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsIHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGFzc2lzdGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQoYXNzaXN0YW50VXVpZClcbiAgICBjb25zdCBiZW5lZmljaWFyeSA9IHRoaXMuZ2V0UGFydGljaXBhbnQoYmVuZWZpY2lhcnlVdWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBhc3Npc3RhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBhc3Npc3RhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgY29uc3QgYmVuZWZpY2lhcnlJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBiZW5lZmljaWFyeVV1aWQgPT09IHAudXVpZFxuICAgIClcblxuICAgIGlmICghYXNzaXN0YW50IHx8ICFiZW5lZmljaWFyeSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGFydGljaXBhbnROb3RGb3VuZCcpKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmIChiZW5lZmljaWFyeS5oYXNNYXhCb251c0RpY2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JCZW5lZmljaWFyeUF0TWF4Qm9udXMnLCB7XG4gICAgICAgICAgbmFtZTogYmVuZWZpY2lhcnkubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmICh1c2VNb3ZlbWVudEFjdGlvbnMpIHtcbiAgICAgIGlmIChhc3Npc3RhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50Tm90RW5vdWdoTW92ZW1lbnQnLCB7XG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkLFxuICAgICAgICAgICAgYWN0aW9uczogYXNzaXN0YW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIGFzc2lzdGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygtMSlcbiAgICAgIHBhcnRpY2lwYW50c0RhdGFbYXNzaXN0YW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYXNzaXN0YW50LmRhdGEpXG4gICAgfVxuXG4gICAgYmVuZWZpY2lhcnkuYWRkQm9udXNEaWNlKClcbiAgICBwYXJ0aWNpcGFudHNEYXRhW2JlbmVmaWNpYXJ5SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBiZW5lZmljaWFyeS5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyB0b2dnbGVCb251c0RpY2UgKHBhcnRpY2lwYW50VXVpZCwgZGljZU51bWJlciwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG5cbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xuICAgICAgICAgIHBhcnRpY2lwYW50VXVpZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuICAgIGlmIChwYXJ0aWNpcGFudC5ib251c0RpY2UgPj0gZGljZU51bWJlcikgcGFydGljaXBhbnQucmVtb3ZlQm9udXNEaWNlKClcbiAgICBlbHNlIHBhcnRpY2lwYW50LmFkZEJvbnVzRGljZSgpXG4gICAgcGFydGljaXBhbnRzRGF0YVtwYXJ0aWNpcGFudEluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgcGFydGljaXBhbnQuZGF0YVxuICAgIClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgY2F1dGlvdXNBcHByb2FjaCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIHsgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcblxuICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50Lmhhc01heEJvbnVzRGljZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvclBhcnRpY2lwYW50QXRNYXhCb251cycsIHtcbiAgICAgICAgICBwYXJ0aWNpcGFudFV1aWRcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodXNlTW92ZW1lbnRBY3Rpb25zKSB7XG4gICAgICBpZiAocGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50Tm90RW5vdWdoTW92ZW1lbnQnLCB7XG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkOiBwYXJ0aWNpcGFudFV1aWQsXG4gICAgICAgICAgICBhY3Rpb25zOiBwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygtMSlcbiAgICB9XG4gICAgcGFydGljaXBhbnQuYWRkQm9udXNEaWNlKClcbiAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyBhbHRlclBhcnRpY2lwYW50TW92ZW1lbnRBY3Rpb24gKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICBjb3VudCxcbiAgICB7IHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG5cbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xuICAgICAgICAgIHBhcnRpY2lwYW50VXVpZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuXG4gICAgcGFydGljaXBhbnQuYWx0ZXJNb3ZlbWVudEFjdGlvbnMoY291bnQpXG5cbiAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4gKHtcbiAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcbiAgICByZW5kZXIgPSB0cnVlLFxuICAgIGh0bWwgPSBudWxsXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IGFjdGl2ZVBhcnRpY2lwYW50ID0gdGhpcy5uZXh0QWN0aXZlUGFydGljaXBhbnRcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24sXG4gICAgICByZW5kZXIsXG4gICAgICBodG1sXG4gICAgfVxuICAgIGlmICghYWN0aXZlUGFydGljaXBhbnQpIHJldHVybiB0aGlzLmFjdGl2YXRlUGFydGljaXBhbnQodW5kZWZpbmVkLCBvcHRpb25zKVxuICAgIHJldHVybiB0aGlzLmFjdGl2YXRlUGFydGljaXBhbnQoYWN0aXZlUGFydGljaXBhbnQudXVpZCwgb3B0aW9ucylcbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlUGFydGljaXBhbnQgKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgICAgcmVuZGVyID0gdHJ1ZSxcbiAgICAgIGh0bWwgPSBudWxsXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGRhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlUGFydGljaXBhbnRVcGRhdGVEYXRhKHBhcnRpY2lwYW50VXVpZCwge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcbiAgICAgIGFjdGl2ZUxvY2F0aW9uOiBhY3RpdmF0ZUxvY2F0aW9uLFxuICAgICAgaHRtbFxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoZGF0YVVwZGF0ZSwgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGdldEFjdGl2YXRlUGFydGljaXBhbnRVcGRhdGVEYXRhIChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsIGh0bWwgPSBudWxsIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBwVXVpZCA9IHBhcnRpY2lwYW50VXVpZFxuICAgIC8vICAgPyBwYXJ0aWNpcGFudFV1aWRcbiAgICAvLyAgIDogdGhpcy5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmVbMF0/LnV1aWRcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlID0ge31cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgZGVsZXRlIHAuYWN0aXZlXG4gICAgICBpZiAocFV1aWQgJiYgcFV1aWQgPT09IHAudXVpZCkgcC5hY3RpdmUgPSB0cnVlXG4gICAgfSlcbiAgICBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlWydzeXN0ZW0ucGFydGljaXBhbnRzJ10gPSBwYXJ0aWNpcGFudHNcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50TG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocFV1aWQpXG4gICAgbGV0IGxvY2F0aW9uc0RhdGFVcGRhdGUgPSBudWxsXG4gICAgaWYgKHBhcnRpY2lwYW50TG9jYXRpb24pIHtcbiAgICAgIGlmIChhY3RpdmF0ZUxvY2F0aW9uKSB7XG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhKFxuICAgICAgICAgIHBhcnRpY2lwYW50TG9jYXRpb24udXVpZCxcbiAgICAgICAgICB7IHNjcm9sbFRvTG9jYXRpb24sIGh0bWwgfVxuICAgICAgICApXG4gICAgICB9IGVsc2UgaWYgKHNjcm9sbFRvTG9jYXRpb24pIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZSA9IHt9XG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJ10gPVxuICAgICAgICAgIHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvblxuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nXSA9XG4gICAgICAgICAgdGhpcy5nZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbihwYXJ0aWNpcGFudExvY2F0aW9uLnV1aWQsIHtcbiAgICAgICAgICAgIGh0bWxcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlID0gdGhpcy5nZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YSh1bmRlZmluZWQsIHtcbiAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvblxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAobG9jYXRpb25zRGF0YVVwZGF0ZSkge1xuICAgICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoXG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGFVcGRhdGUsXG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVcbiAgICAgIClcbiAgICB9IGVsc2UgcmV0dXJuIHBhcnRpY2lwYW50c0RhdGFVcGRhdGVcbiAgfVxuXG4gIGFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayAoXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHsgbW92ZVBhcnRpY2lwYW50ID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDaGFzZU9ic3RhY2xlQ2FyZCh7XG4gICAgICBjaGFzZVV1aWQ6IHRoaXMudXVpZCxcbiAgICAgIGxvY2F0aW9uVXVpZCxcbiAgICAgIG1vdmVQYXJ0aWNpcGFudCxcbiAgICAgIGZvcndhcmQ6IGxvY2F0aW9uVXVpZCAhPT0gdGhpcy5hY3RpdmVMb2NhdGlvbi51dWlkXG4gICAgfSlcbiAgICBjYXJkLnRvTWVzc2FnZSgpXG5cbiAgICAvLyBjb25zdCB0ZXN0ID0gbmV3IHRlc3RDYXJkKClcbiAgICAvLyB0ZXN0LmluaXRpYWxpemUoe30pXG4gICAgLy8gdGVzdC50b01lc3NhZ2UoKVxuICB9XG5cbiAgLy8gSGFuZGxlIHJvdW5kc1xuXG4gIGFzeW5jIHByb2dyZXNzVG9OZXh0Um91bmQgKHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IHAubW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgICAgcC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHAubW92ZW1lbnRBY3Rpb25cbiAgICAgICAgaWYgKHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+IHAubW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgICAgICBwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSBwLm1vdmVtZW50QWN0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgdGhpcy5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oeyByZW5kZXIgfSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbFN0cmluZykge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyhyb2xsU3RyaW5nKVxuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgICA6IFtdXG4gICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnJvbGxVdWlkID09PSByb2xsLnV1aWQpXG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgZGF0YTogcm9sbFN0cmluZyxcbiAgICAgICAgdHlwZTogJ2ludm9rZScsXG4gICAgICAgIG1ldGhvZDogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICBpdGVtOiB0aGlzLnV1aWRcbiAgICAgIH1cbiAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICB9XG4gIH1cblxuICAvLyBoYW5kbGUgbG9jYXRpb25zXG4gIGdldCBsb2NhdGlvbnMgKCkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3RhcnRlZFxuICAgICAgPyB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgICA6IFtdXG4gICAgICA6IHRoaXMuaW5pdFRyYWNrXG4gICAgdGhpcy5wcm9jZXNzTG9jYXRpb25zKGxvY2F0aW9ucylcbiAgICByZXR1cm4gbG9jYXRpb25zXG4gIH1cblxuICBnZXRMb2NhdGlvbkRhdGEgKGxvY2F0aW9uVXVpZCwgeyBkdXBsaWNhdGVEYXRhID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGVEYXRhXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMubG9jYXRpb25zKVxuICAgICAgOiB0aGlzLmxvY2F0aW9uc1xuICAgIHJldHVybiBsb2NhdGlvbnMuZmluZChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICB9XG5cbiAgcHJvY2Vzc0xvY2F0aW9ucyAobG9jYXRpb25zKSB7XG4gICAgaWYgKCFsb2NhdGlvbnM/Lmxlbmd0aCkgcmV0dXJuXG4gICAgbG9jYXRpb25zWzBdLmZpcnN0ID0gdHJ1ZVxuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxvY2F0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGNvbnN0IGNsYXNzZXMgPSBbXVxuICAgICAgY29uc3QgbG9jYXRpb24gPSBsb2NhdGlvbnNbaW5kZXhdXG4gICAgICBpZiAoIWxvY2F0aW9uLm5hbWUpIGNsYXNzZXMucHVzaCgnZW1wdHknKVxuICAgICAgaWYgKGxvY2F0aW9uLmFjdGl2ZSkgY2xhc3Nlcy5wdXNoKCdhY3RpdmUnKVxuICAgICAgaWYgKGxvY2F0aW9uLmluaXQgJiYgIXRoaXMuc3RhcnRlZCkgY2xhc3Nlcy5wdXNoKCdpbml0JylcbiAgICAgIGxvY2F0aW9uLmNzc0NsYXNzZXMgPSBjbGFzc2VzLmpvaW4oJyAnKVxuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID4gMSkgbG9jYXRpb25zW2xvY2F0aW9ucy5sZW5ndGggLSAxXS5sYXN0ID0gdHJ1ZVxuXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBpZiAobC5wYXJ0aWNpcGFudHMgJiYgbC5wYXJ0aWNpcGFudHMubGVuZ3RoKSB7XG4gICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gIShwID09PSBudWxsKSlcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsLnBhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGVsZW0gPSBsLnBhcnRpY2lwYW50c1tpXSAvLyBJbml0IHRyYWNrID0gb25seSB1dWlkLCB1cGRhdGUgbG9jYXRpb24gbGlzdCBjaGFuZ2UgZm9yIHV1aWRcblxuICAgICAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoYFR5cGUgOiAke3R5cGVvZiBlbGVtfWApXG4gICAgICAgICAgbGV0IHBcbiAgICAgICAgICBpZiAodHlwZW9mIGVsZW0gPT09ICdzdHJpbmcnIHx8IGVsZW0gaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgICAgIHAgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IGVsZW0gPT09IHAudXVpZCkgLy8gUmV0cmlldmUgcGFydGljaXBhbnQgZGF0YSBmcm9tIGxpc3QuXG4gICAgICAgICAgfSBlbHNlIGlmIChlbGVtPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ19wYXJ0aWNpcGFudCcpIHtcbiAgICAgICAgICAgIHAgPSB1bmRlZmluZWQgLy8gcGFydGljaXBhbnQgaXMgYWxyZWFkeSBwcm9jZXNzZWQuXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QYXJ0aWNpcGFudEFscmVhZHlQcm9jZXNzZWQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSBwID0gdW5kZWZpbmVkXG5cbiAgICAgICAgICBpZiAodHlwZW9mIHAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBsLnBhcnRpY2lwYW50c1tpXSA9IG5ldyBfcGFydGljaXBhbnQocCkgLy8gcmVwbGFjZSB1dWlkIHdpdGggX3BhcnRpY2lwYW50XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHBhcnRpY2lwYW50cy5wdXNoKCBudWxsKVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgJ1VuZGVmaW5lZCBwYXRpY2lwYW50IHdoaWxlIHByb2Nlc3NpbmcgcGFydGljaXBhbnRzIGFycmF5J1xuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsLnBhcnRpY2lwYW50cy5zb3J0KHNvcnRCeVJvbGVBbmREZXgpIC8vIFRPRE8gOiB0ZXN0IGlmIHNvcnRpbmcgd29ya3NcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZ2V0IGluaXRUcmFjayAoKSB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0IHx8XG4gICAgICB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGggPT09IDBcbiAgICApIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBjb25zdCBsb2NhdGlvbnMgPSBbXSAvLyAhISEhISEhIGxvY2F0aW9ucyB2cyBpbml0IGxvY2F0aW9ucyAhISFcblxuICAgIGNvbnN0IGluaXQgPSB0aGlzLnN0YXJ0aW5nTGluZVxuICAgIGxldCBsb2NhdGlvbnNJbmRleFN0YXJ0LCBpbml0SW5kZXhTdGFydCwgbG9jYXRpb25zTGVuZ3RoXG4gICAgaWYgKGluaXQubGVuZ3RoIDw9IDApIGxvY2F0aW9uc0luZGV4U3RhcnQgPSAwXG4gICAgZWxzZSBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA+PSBpbml0Lmxlbmd0aCkge1xuICAgICAgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcbiAgICB9IGVsc2UgbG9jYXRpb25zSW5kZXhTdGFydCA9IGluaXQubGVuZ3RoIC0gdGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleFxuXG4gICAgaWYgKHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPD0gMCkgaW5pdEluZGV4U3RhcnQgPSAwXG4gICAgZWxzZSBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA8PSBpbml0Lmxlbmd0aCkgaW5pdEluZGV4U3RhcnQgPSAwXG4gICAgZWxzZSBpbml0SW5kZXhTdGFydCA9IHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggLSBpbml0Lmxlbmd0aFxuXG4gICAgaWYgKGxvY2F0aW9uc0luZGV4U3RhcnQgPT09IDApIHtcbiAgICAgIGxvY2F0aW9uc0xlbmd0aCA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhdGlvbnNMZW5ndGggPVxuICAgICAgICB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGggKyBsb2NhdGlvbnNJbmRleFN0YXJ0XG4gICAgfVxuXG4gICAgaWYgKGluaXQubGVuZ3RoICE9PSAwKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA8IDApIHtcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgIGluZGV4IDwgTWF0aC5hYnModGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCk7XG4gICAgICAgICAgaW5kZXgrK1xuICAgICAgICApIHtcbiAgICAgICAgICBpbml0LnB1c2goe1xuICAgICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoYXNlTG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zKVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsb2NhdGlvbnNMZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGxldCBsb2NhdGlvbiA9IHt9XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgaWYgKFxuICAgICAgICBpbmRleCA+PSBsb2NhdGlvbnNJbmRleFN0YXJ0ICYmXG4gICAgICAgIGluZGV4IC0gbG9jYXRpb25zSW5kZXhTdGFydCA8IGNoYXNlTG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgICApIHtcbiAgICAgICAgbG9jYXRpb24gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgICBjaGFzZUxvY2F0aW9ucy5saXN0W2luZGV4IC0gbG9jYXRpb25zSW5kZXhTdGFydF1cbiAgICAgICAgKVxuICAgICAgICBsb2NhdGlvbi5pbml0ID0gZmFsc2VcbiAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzPy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGlmIChwICE9IG51bGwpIHBhcnRpY2lwYW50cy5wdXNoKHApXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAoaW5kZXggPj0gaW5pdEluZGV4U3RhcnQgJiYgaW5kZXggLSBpbml0SW5kZXhTdGFydCA8IGluaXQubGVuZ3RoKSB7XG4gICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QobG9jYXRpb24sIGluaXRbaW5kZXggLSBpbml0SW5kZXhTdGFydF0sIHtcbiAgICAgICAgICBvdmVyd3JpdGU6IGZhbHNlXG4gICAgICAgIH0pXG5cbiAgICAgICAgaW5pdFtpbmRleCAtIGluaXRJbmRleFN0YXJ0XS5wYXJ0aWNpcGFudHM/LmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgaWYgKHAgIT0gbnVsbCkgcGFydGljaXBhbnRzLnB1c2gocClcbiAgICAgICAgfSlcblxuICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHNcbiAgICAgIH1cbiAgICAgIGxvY2F0aW9uLmZpcnN0ID0gZmFsc2VcbiAgICAgIGxvY2F0aW9uLmVuZCA9IGZhbHNlXG4gICAgICBsb2NhdGlvbnMucHVzaChsb2NhdGlvbilcbiAgICB9XG5cbiAgICByZXR1cm4gbG9jYXRpb25zXG4gIH1cblxuICBnZXQgc3RhcnRpbmdMaW5lICgpIHtcbiAgICAvLyBHZXQgcHJleXMgYW5kIGNoZWNrIGZvciBlc2NhcGVkXG4gICAgY29uc3QgcHJleXMgPSB0aGlzLnN5c3RlbS5pbmNsdWRlRXNjYXBlZFxuICAgICAgPyB0aGlzLnByZXlzXG4gICAgICA6IHRoaXMucHJleXM/LmZpbHRlcihwID0+ICFwLmRhdGEuZXNjYXBlZClcbiAgICAvLyBHZXQgY2hhc2Vyc1xuICAgIGNvbnN0IGNoYXNlcnMgPSB0aGlzLnN5c3RlbS5pbmNsdWRlTGF0ZWNvbWVyc1xuICAgICAgPyB0aGlzLmNoYXNlcnNcbiAgICAgIDogdGhpcy5jaGFzZXJzPy5maWx0ZXIoYyA9PiAhYy5kYXRhLmV4Y2x1ZGVkKVxuXG4gICAgLy8gUmVjdXJzaXZpdHkgISEgd2l0aCBnZXRQYXJ0aWNpcGFudExvY2F0aW9uIGFuZCBnZXQgcGFydGljaXBhbnRzXG5cbiAgICAvLyBJZiBubyBwcmV5IG9yIG5vIGNoYXNzZXJcbiAgICAvLyBpZiAoMCA9PSBjaGFzZXJzLmxlbmd0aCkge1xuICAgIC8vICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdObyBjaGFzZXJzJylcbiAgICAvLyAgIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyB9XG4gICAgLy8gaWYgKDAgPT0gcHJleXMubGVuZ3RoKSB7XG4gICAgLy8gICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ05vIHByZXlzJylcbiAgICAvLyAgIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyB9XG5cbiAgICAvLyBCdWlsZCBzdGFydGluZyB0cmFja1xuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBbXVxuXG4gICAgY29uc3QgY2hhc2Vyc01pbk1vdiA9IHRoaXMuZmluZE1pbk1vdihjaGFzZXJzKVxuICAgIGNvbnN0IGNoYXNlcnNNYXhNb3YgPSB0aGlzLmZpbmRNYXhNb3YoY2hhc2VycylcbiAgICBjb25zdCBwcmV5c01pbk1vdiA9IHRoaXMuZmluZE1pbk1vdihwcmV5cylcbiAgICBjb25zdCBwcmV5c01heE1vdiA9IHRoaXMuZmluZE1heE1vdihwcmV5cylcblxuICAgIGlmIChjaGFzZXJzTWluTW92ICE9PSAtMSAmJiBjaGFzZXJzTWF4TW92ICE9PSAtMSkge1xuICAgICAgLy8gQWRkIGNoYXNlcnMgdG8gdGhlIHRyYWNrLlxuICAgICAgZm9yIChsZXQgbW92ID0gY2hhc2Vyc01pbk1vdjsgbW92IDw9IGNoYXNlcnNNYXhNb3Y7IG1vdisrKSB7XG4gICAgICAgIC8vIEZpbmQgYWxsIHdpdGggdGhhdCBtb3ZcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSB7XG4gICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICBpbml0OiB0cnVlLFxuICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QgPSBjaGFzZXJzXG4gICAgICAgICAgLmZpbHRlcihwID0+IG1vdiA9PT0gcC5hZGp1c3RlZE1vdilcbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5kZXggLSBiLmRleClcbiAgICAgICAgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0LmZvckVhY2gocCA9PlxuICAgICAgICAgIGxvY2F0aW9uLnBhcnRpY2lwYW50cy5wdXNoKHAudXVpZClcbiAgICAgICAgKVxuICAgICAgICBjaGFzZVRyYWNrLnB1c2gobG9jYXRpb24pXG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBzcGFjZSBiZXR3ZWVuIGNoYXNlcnMgYW5kIHByZXlzLlxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc3lzdGVtLnN0YXJ0aW5nUmFuZ2U7IGluZGV4KyspIHtcbiAgICAgICAgY2hhc2VUcmFjay5wdXNoKHtcbiAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcmV5c01pbk1vdiAhPT0gLTEgJiYgcHJleXNNYXhNb3YgIT09IC0xKSB7XG4gICAgICAvLyBBZGQgcHJleXMgdG8gdGhlIHRyYWNrLlxuICAgICAgZm9yIChsZXQgbW92ID0gcHJleXNNaW5Nb3Y7IG1vdiA8PSBwcmV5c01heE1vdjsgbW92KyspIHtcbiAgICAgICAgLy8gRmluZCBhbGwgd2l0aCB0aGF0IG1vdlxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHtcbiAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdCA9IHByZXlzXG4gICAgICAgICAgLmZpbHRlcihwID0+IG1vdiA9PT0gcC5hZGp1c3RlZE1vdilcbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5kZXggLSBiLmRleClcbiAgICAgICAgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0LmZvckVhY2gocCA9PlxuICAgICAgICAgIGxvY2F0aW9uLnBhcnRpY2lwYW50cy5wdXNoKHAudXVpZClcbiAgICAgICAgKVxuICAgICAgICBjaGFzZVRyYWNrLnB1c2gobG9jYXRpb24pXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYXNlVHJhY2tcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUxvY2F0aW9uc0xpc3QgKGxpc3QsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAvLyBSZW1vdmUgYWxsIHVubmVjZXNzYXJ5IGl0ZW1zIChjc3NDbGFzcywgKVxuICAgIGNvbnN0IHVwZGF0ZWRMaXN0ID0gdGhpcy5jbGVhbkxvY2F0aW9uc0xpc3QobGlzdClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5sb2NhdGlvbnMubGlzdCc6IHVwZGF0ZWRMaXN0IH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlTG9jYXRpb24gKGxvY2F0aW9uVXVpZCwgdXBkYXRlRGF0YSwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IHVwZGF0ZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHVwZGF0ZURhdGEpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodXBkYXRlLnV1aWQpIGRlbGV0ZSB1cGRhdGUudXVpZFxuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QobG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLCB1cGRhdGUsIHtcbiAgICAgIG92ZXJ3cml0ZTogdHJ1ZVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGNsZWFuTG9jYXRpb25zTGlzdCAobGlzdCkge1xuICAgIGNvbnN0IHVwZGF0ZWRMaXN0ID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUobGlzdClcbiAgICBjb25zdCBwYXJ0aXBhbnRzVXVpZEFycmF5ID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLm1hcChwID0+IHAudXVpZClcblxuICAgIHVwZGF0ZWRMaXN0LmZvckVhY2gobCA9PiB7XG4gICAgICAvLyBkZWxldGUgbC5hY3RpdmVcbiAgICAgIGRlbGV0ZSBsLmNzc0NsYXNzZXNcbiAgICAgIGRlbGV0ZSBsLmZpcnN0XG4gICAgICBkZWxldGUgbC5sYXN0XG4gICAgICBkZWxldGUgbC5lbmRcbiAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsLnBhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gIShwID09PSBudWxsKSkgLy8gUmVtb3ZlIG51bGwgZWxlbWVudHNcbiAgICAgICAgICAvLyBSZXBsYWNlIF9QYXJ0aWNpcGFudHMgYnkgdXVpZFxuICAgICAgICAgIGlmIChsLnBhcnRpY2lwYW50c1tpXS5kYXRhPy51dWlkKSB7XG4gICAgICAgICAgICBsLnBhcnRpY2lwYW50c1tpXSA9IGwucGFydGljaXBhbnRzW2ldLmRhdGEudXVpZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB1bmtvd24gcGFydGljaWNwYW50c1xuICAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcih1dWlkID0+XG4gICAgICAgICAgcGFydGlwYW50c1V1aWRBcnJheS5pbmNsdWRlcyh1dWlkKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiB1cGRhdGVkTGlzdFxuICB9XG5cbiAgYXN5bmMgaW5zZXJ0TG9jYXRpb24gKFxuICAgIGluc2VydEF0VXVpZCxcbiAgICB7IHNoaWZ0ID0gMCwgbG9jRGF0YSA9IHt9LCByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxuICAgIH0pXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBpbnNlcnRBdFV1aWQgPT09IGwudXVpZClcbiAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBuZXdMb2NhdGlvbkluZGV4ID0gbG9jYXRpb25JbmRleCArIHNoaWZ0XG4gICAgaWYgKG5ld0xvY2F0aW9uSW5kZXggPiBsb2NhdGlvbnMubGVuZ3RoKSByZXR1cm4gZmFsc2VcbiAgICBjb25zdCBuZXdMb2NhdGlvbiA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGxvY0RhdGEpXG4gICAgbmV3TG9jYXRpb24udXVpZCA9IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKClcbiAgICBuZXdMb2NhdGlvbi5pbml0ID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLmluaXRcbiAgICBuZXdMb2NhdGlvbi5hY3RpdmUgPSB0cnVlXG4gICAgbG9jYXRpb25zLnNwbGljZShuZXdMb2NhdGlvbkluZGV4LCAwLCBuZXdMb2NhdGlvbilcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZUxvY2F0aW9uICh1dWlkLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiB1dWlkID09PSBsLnV1aWQpXG4gICAgbG9jYXRpb25zLnNwbGljZShsb2NhdGlvbkluZGV4LCAxKVxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgZGVsZXRlIGwuYWN0aXZlXG4gICAgfSlcbiAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBpbmRleCA9IGxvY2F0aW9uSW5kZXggLSAxXG4gICAgICBpZiAoaW5kZXggPCAwKSBpbmRleCA9IDBcbiAgICAgIGxvY2F0aW9uc1tpbmRleF0uYWN0aXZlID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlTG9jYXRpb24gKFxuICAgIGxvY2F0aW9uVXVpZCxcbiAgICB7IHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLCByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0gdGhpcy5nZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YShsb2NhdGlvblV1aWQsIHtcbiAgICAgIHNjcm9sbFRvTG9jYXRpb25cbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBnZXRDbGVhckFjdGl2ZUxvY2F0aW9uVXBkYXRlRGF0YSAoe1xuICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgIGh0bWwgPSBudWxsXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgOiBbXVxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgZGVsZXRlIGwuYWN0aXZlXG4gICAgfSlcbiAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubG9jYXRpb25zLmxpc3QnXSA9IHRoaXMuY2xlYW5Mb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcblxuICAgIGlmIChzY3JvbGxUb0xvY2F0aW9uKSB7XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2suZnJvbSddID0gMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLnRvJ10gPSAtMVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEgKFxuICAgIGxvY2F0aW9uVXVpZCxcbiAgICB7IHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLCBodG1sID0gbnVsbCB9ID0ge31cbiAgKSB7XG4gICAgaWYgKCFsb2NhdGlvblV1aWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldENsZWFyQWN0aXZlTG9jYXRpb25VcGRhdGVEYXRhKHtcbiAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvblxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICA6IFtdXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBkZWxldGUgbC5hY3RpdmVcbiAgICAgIGlmIChsb2NhdGlvblV1aWQgPT09IGwudXVpZCkgbC5hY3RpdmUgPSB0cnVlXG4gICAgfSlcbiAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubG9jYXRpb25zLmxpc3QnXSA9IHRoaXMuY2xlYW5Mb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICAvLyBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBpZiAoc2Nyb2xsVG9Mb2NhdGlvbikge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nXSA9XG4gICAgICAgIHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvblxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLnRvJ10gPVxuICAgICAgICB0aGlzLmdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uKGxvY2F0aW9uVXVpZCwgeyBodG1sIH0pXG4gICAgICAvLyBhd2FpdCB0aGlzLnNldGNoYXNlVHJhY2tTY3JvbGwoe1xuICAgICAgLy8gICBmcm9tOiB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24sXG4gICAgICAvLyAgIHRvOiB0aGlzLmNoYXNlVHJhY2tBY3RpdmVMb2NhdGlvblNjcm9sbFBvc2l0aW9uXG4gICAgICAvLyB9KVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgLy8gTG9jYXRpb25zIG5hdmlnYXRpb25cbiAgZ2V0IGFjdGl2ZUxvY2F0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMubG9jYXRpb25zKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9ucy5maW5kKGwgPT4gbC5hY3RpdmUpXG4gICAgaWYgKCFsb2NhdGlvbikgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChsb2NhdGlvbi5wYXJ0aWNpcGFudHM/Lmxlbmd0aCkgbG9jYXRpb24uaGFzUGFydGljaXBhbnQgPSB0cnVlXG4gICAgY29uc3QgYWN0b3IgPSB0aGlzLmFjdGl2ZUFjdG9yXG4gICAgaWYgKGFjdG9yKSB7XG4gICAgICBjb25zdCB0ZXN0ID0gYWN0b3IuZmluZChsb2NhdGlvbi5vYnN0YWNsZURldGFpbHM/LmNoZWNrTmFtZSlcbiAgICAgIGlmICh0ZXN0KSB7XG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9ySGFzU2tpbGwgPSB0cnVlXG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9yVGVzdCA9IHRlc3RcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvY2F0aW9uXG4gIH1cblxuICBnZXQgcHJldmlvdXNMb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmxvY2F0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gdGhpcy5sb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC5hY3RpdmUpXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gMCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnNbYWN0aXZlSW5kZXggLSAxXVxuICAgIGNvbnN0IGFjdG9yID0gdGhpcy5hY3RpdmVBY3RvclxuICAgIGlmIChhY3Rvcikge1xuICAgICAgY29uc3QgdGVzdCA9IGFjdG9yLmZpbmQobG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpXG4gICAgICBpZiAodGVzdCkge1xuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3Rvckhhc1NraWxsID0gdHJ1ZVxuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3RvclRlc3QgPSB0ZXN0XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb2NhdGlvblxuICB9XG5cbiAgZ2V0IG5leHRMb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmxvY2F0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gdGhpcy5sb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC5hY3RpdmUpXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gdGhpcy5sb2NhdGlvbnMubGVuZ3RoIC0gMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnNbYWN0aXZlSW5kZXggKyAxXVxuICAgIGNvbnN0IGFjdG9yID0gdGhpcy5hY3RpdmVBY3RvclxuICAgIGlmIChhY3Rvcikge1xuICAgICAgY29uc3QgdGVzdCA9IGFjdG9yLmZpbmQobG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpXG4gICAgICBpZiAodGVzdCkge1xuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3Rvckhhc1NraWxsID0gdHJ1ZVxuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3RvclRlc3QgPSB0ZXN0XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb2NhdGlvblxuICB9XG5cbiAgYXN5bmMgbG9jYXRvckRyb3BwZWQgKGRhdGEpIHtcbiAgICBhd2FpdCB0aGlzLnNldExvY2F0aW9uQ29vcmRpbmF0ZXMoXG4gICAgICBkYXRhLmxvY2F0aW9uVXVpZCxcbiAgICAgIGRhdGEueCxcbiAgICAgIGRhdGEueSxcbiAgICAgIGRhdGEuc2NlbmVcbiAgICApXG4gIH1cblxuICBhc3luYyBzZXRMb2NhdGlvbkNvb3JkaW5hdGVzIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeCxcbiAgICB5LFxuICAgIHNjZW5lSWQsXG4gICAgeyByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5jb29yZGluYXRlcyA9IHsgeCwgeSwgc2NlbmU6IHNjZW5lSWQgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBhc3luYyBjbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMgKHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBpZiAodGhpcy5hY3RpdmVMb2NhdGlvbikge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2xlYXJMb2NhdGlvbkNvb3JkaW5hdGVzKHRoaXMuYWN0aXZlTG9jYXRpb24udXVpZCwge1xuICAgICAgICByZW5kZXJcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2xlYXJMb2NhdGlvbkNvb3JkaW5hdGVzIChsb2NhdGlvblV1aWQsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGRlbGV0ZSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0uY29vcmRpbmF0ZXNcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgLy8gZ2V0IGFjdGl2ZVBhcnRpY2lwYW50SGF2ZUFjdGl2ZUxvY2F0aW9uU2tpbGwgKCl7XG4gIC8vICAgaWYoICF0aGlzLmFjdGl2ZUFjdG9yKSByZXR1cm4gZmFsc2VcbiAgLy8gICBpZiggdGhpcy5hY3RpdmVBY3Rvci5maW5kKCB0aGlzLmFjdGl2ZUxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKSkgcmV0dXJuIHRydWVcbiAgLy8gICByZXR1cm4gZmFsc2VcbiAgLy8gfVxuXG4gIC8vIEhhbmRsZSBtZWNoYW5pY3NcbiAgYXN5bmMgY3V0VG9UaGVDaGFzZSAoKSB7XG4gICAgaWYgKCF0aGlzLmFsbEhhdmVTcGVlZFJvbGwpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90QWxsSGF2ZVNwZWVkUm9sbCcpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmFjdHVhbFBhcnRpY2lwYW50cz8ubGVuZ3RoIDwgMikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5OZWVkTWluMlBhcnRpY2lwYW50cycpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmFsbEhhdmVWYWxpZE1vdikge1xuICAgICAgLy8gVE9ETyA6IENoZWNrIGZvciBzcGVlZCByb2xsID8/XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBtb3ZlbWVudCBhY3Rpb25zXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgY29uc3QgbWluTW92ID0gdGhpcy5maW5kTWluTW92KHRoaXMuYWN0dWFsUGFydGljaXBhbnRzKVxuICAgICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICAgIC8vIHAuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IDEgKyAocC5hZGp1c3RlZE1vdiAtIG1pbk1vdilcbiAgICAgICAgcC5jYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMobWluTW92KVxuICAgICAgICBwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSBwLm1vdmVtZW50QWN0aW9uXG4gICAgICAgIHAuYm9udXNEaWNlID0gMFxuICAgICAgfSlcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QodGhpcy5sb2NhdGlvbnMsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgICAgYXdhaXQgdGhpcy5zdGFydCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVzdGFydCAoKSB7XG4gICAgLy8gYXdhaXQgdGhpcy5jbGVhbkxvY2F0aW9ucygpIC8vVHJhbnNmZXJyZWQgaW4gdXBkYXRlTG9jYXRpb25MaXN0XG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5sb2NhdGlvbnMuZmlsdGVyKGwgPT4gIWwuaW5pdClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGxvY2F0aW9uc1tpXS5wYXJ0aWNpcGFudHMpIGxvY2F0aW9uc1tpXS5wYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgaWYgKGxvY2F0aW9uc1tpXS5hY3RpdmUpIGRlbGV0ZSBsb2NhdGlvbnNbaV0uYWN0aXZlXG4gICAgfVxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydGljaXBhbnRzRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHBhcnRpY2lwYW50c0RhdGFbaV0uYWN0aXZlKSBkZWxldGUgcGFydGljaXBhbnRzRGF0YVtpXS5hY3RpdmVcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5zZXRjaGFzZVRyYWNrU2Nyb2xsKDAsIDAsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50c0RhdGEsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMuc3RvcCgpXG4gIH1cblxuICBnZXRMb2NhdGlvblNoaWZ0IChsb2NhdGlvblV1aWQsIHsgc2tpcCA9IDEgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3Qgb3JpZ2luSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgY29uc3QgZGVzdGluYXRpb25JbmRleCA9IG9yaWdpbkluZGV4ICsgc2tpcFxuICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbFxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4ID49IGxvY2F0aW9ucy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdXG4gICAgfVxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4IDwgMCkgcmV0dXJuIGxvY2F0aW9uc1swXVxuICAgIHJldHVybiBsb2NhdGlvbnNbZGVzdGluYXRpb25JbmRleF0gLy8gRVJST1IgTU9WRSAyIEZPUiBTS0lQICsxXG4gIH1cblxuICBhc3luYyByZW1vdmVQYXJ0aWNpcGFudCAocGFydGljaXBhbnRVdWlkLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgcCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVtb3ZlUGFydGljaXBhbnQnKSxcbiAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVtb3ZlUGFydGljaXBhbnRIaW50Jywge1xuICAgICAgICBuYW1lOiBwLm5hbWVcbiAgICAgIH0pfTwvcD5gLFxuICAgICAgeWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBuZXdQYXJ0aWNpcGFudHNEYXRhID0gcGFydGljaXBhbnRzRGF0YS5maWx0ZXIoXG4gICAgICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgIT09IHAudXVpZFxuICAgICAgICApXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uc0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgICB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgICApXG4gICAgICAgIGxvY2F0aW9uc0RhdGEuZm9yRWFjaChsID0+IHtcbiAgICAgICAgICBpZiAobC5wYXJ0aWNpcGFudHMgJiYgbC5wYXJ0aWNpcGFudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcihcbiAgICAgICAgICAgICAgdXVpZCA9PiBwYXJ0aWNpcGFudFV1aWQgIT09IHV1aWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKG5ld1BhcnRpY2lwYW50c0RhdGEsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zRGF0YSwgeyByZW5kZXIgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYWRkUGFydGljaXBhbnQgKFxuICAgIHBhcnRpY2lwYW50LFxuICAgIHtcbiAgICAgIHJlbmRlciA9IHRydWUsXG4gICAgICBsb2NhdGlvblV1aWQgPSBudWxsLFxuICAgICAgcmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLFxuICAgICAgdXBkYXRlID0gZmFsc2VcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBpZiAocGFydGljaXBhbnQuZGF0YS5jaGFzZVV1aWQpIGRlbGV0ZSBwYXJ0aWNpcGFudC5kYXRhLmNoYXNlVXVpZFxuICAgIGlmIChwYXJ0aWNpcGFudC5kYXRhLmxvY2F0aW9uVXVpZCkgZGVsZXRlIHBhcnRpY2lwYW50LmRhdGEubG9jYXRpb25VdWlkXG4gICAgaWYgKHBhcnRpY2lwYW50LmRhdGEudXBkYXRlKSBkZWxldGUgcGFydGljaXBhbnQuZGF0YS51cGRhdGVcblxuICAgIGlmICghcGFydGljaXBhbnQudXVpZCkge1xuICAgICAgbGV0IHVuaXF1ZSA9IGZhbHNlXG4gICAgICB3aGlsZSAoIXVuaXF1ZSkge1xuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnV1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgICAgICB1bmlxdWUgPVxuICAgICAgICAgIHBhcnRpY2lwYW50c0RhdGEuZmlsdGVyKHAgPT4gcC51dWlkID09PSBwYXJ0aWNpcGFudC51dWlkKS5sZW5ndGggPT09IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXBkYXRlKSB7XG4gICAgICBpZiAocGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+IHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uKSB7XG4gICAgICAgIHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvblxuICAgICAgfVxuICAgICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gcGFydGljaXBhbnQudXVpZClcbiAgICAgIHBhcnRpY2lwYW50c0RhdGFbaW5kZXhdID0gcGFydGljaXBhbnQuZGF0YVxuICAgIH0gZWxzZSBwYXJ0aWNpcGFudHNEYXRhLnB1c2gocGFydGljaXBhbnQuZGF0YSlcblxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50c0RhdGEsIHtcbiAgICAgIHJlbmRlcjogcmVuZGVyICYmICF0aGlzLnN0YXJ0ZWQgJiYgIXRoaXMucmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnNcbiAgICB9KVxuXG4gICAgaWYgKHJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKSB7XG4gICAgICBjb25zdCBzbG93ZXN0ID0gdGhpcy5zbG93ZXN0UGFydGljaXBhbnQ/LmFkanVzdGVkTW92XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiBwLmNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyhzbG93ZXN0KSlcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywge1xuICAgICAgICByZW5kZXI6IHJlbmRlciAmJiAhdGhpcy5zdGFydGVkXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhcnRlZCAmJlxuICAgICAgIShwYXJ0aWNpcGFudC5kYXRhLmVzY2FwZWQgfHwgcGFydGljaXBhbnQuZGF0YS5leGNsdWRlZClcbiAgICApIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9uc0RhdGEgPSB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgICA6IFtdXG5cbiAgICAgIGlmIChsb2NhdGlvbnNEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckVtcHR5TG9jYXRpb25zTGlzdCcpXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgbGV0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnNEYXRhLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSBsb2NhdGlvbkluZGV4ID0gMFxuICAgICAgaWYgKCFsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cykge1xuICAgICAgICBsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cyA9IFtdXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGxvY2F0aW9uc0RhdGFbbG9jYXRpb25JbmRleF0ucGFydGljaXBhbnRzLmZpbmRJbmRleChcbiAgICAgICAgICBwID0+IHAgPT09IHBhcnRpY2lwYW50LnV1aWRcbiAgICAgICAgKSA9PT0gLTFcbiAgICAgICkge1xuICAgICAgICBsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cy5wdXNoKHBhcnRpY2lwYW50LnV1aWQpXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zRGF0YSwgeyByZW5kZXIgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBlZGl0UGFydGljaXBhbnQgKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICB7XG4gICAgICB1c2VNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLFxuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlUGFydGljaXBhbnQgPSB0cnVlLFxuICAgICAgcmVuZGVyID0gdHJ1ZVxuICAgIH0gPSB7fVxuICApIHt9XG5cbiAgLyoqXG4gICAqIE1vdmUgYSBwYXJ0aWNpcGFudCBmb3IgYSBudW1iZXIgb2YgbG9jYXRpb25zLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBwYXJ0aWNpcGFudFV1aWQgICAgIFV1aWQgb2YgcGFydGljaXBhbnRcbiAgICogQHBhcmFtIHsqfSBsb2NhdGlvbk1vdmVkICAgICAgICAgICAgICAgICBOdW1iZXIgb2YgbG9jYXRpb25zIG1vdnJlZFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSAgICAgICAgICAgICAgICAgICAgICAgIFRvdGFsIG51bWJlciBvZiBsb2NhdGlvbnMgY3Jvc3NlZFxuICAgKi9cbiAgYXN5bmMgbW92ZVBhcnRpY2lwYW50IChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgbG9jYXRpb25Nb3ZlZCxcbiAgICB7XG4gICAgICB1c2VNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLFxuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlUGFydGljaXBhbnQgPSB0cnVlLFxuICAgICAgcmVuZGVyID0gdHJ1ZVxuICAgIH0gPSB7fVxuICApIHtcbiAgICAvLyBjb25zdCBzZWxlY3RvciA9IGAjaXRlbS0ke3RoaXMuaWR9IC5jaGFzZS10cmFja2BcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBtb3ZlUGFydGljaXBhbnQgOiBKcXVlcnkgcm9vdDogJHskKCc6cm9vdCcpLmZpbmQoc2VsZWN0b3IpLnNjcm9sbExlZnQoKX1gKVxuICAgIGxldCBtb2RpZmllZCA9IGZhbHNlXG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3Qgb3JpZ2luSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT5cbiAgICAgIGwucGFydGljaXBhbnRzPy5pbmNsdWRlcyhwYXJ0aWNpcGFudFV1aWQpXG4gICAgKVxuICAgIGxldCBkZXN0aW5hdGlvbkluZGV4ID0gb3JpZ2luSW5kZXggKyBsb2NhdGlvbk1vdmVkXG4gICAgaWYgKGRlc3RpbmF0aW9uSW5kZXggPiBsb2NhdGlvbnMubGVuZ3RoIC0gMSkge1xuICAgICAgZGVzdGluYXRpb25JbmRleCA9IGxvY2F0aW9ucy5sZW5ndGggLSAxXG4gICAgfVxuXG4gICAgaWYgKGRlc3RpbmF0aW9uSW5kZXggPCAwKSB7XG4gICAgICBkZXN0aW5hdGlvbkluZGV4ID0gMFxuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsTW92ZSA9IGRlc3RpbmF0aW9uSW5kZXggLSBvcmlnaW5JbmRleFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG5cbiAgICBpZiAodXNlTW92ZW1lbnRBY3Rpb25zKSB7XG4gICAgICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudFV1aWROb3RGb3VuZCcsIHtcbiAgICAgICAgICAgIHBhcnRpY2lwYW50VXVpZDogdGhpcy5wYXJ0aWNpcGFudFV1aWRcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgTWF0aC5hYnModG90YWxNb3ZlKSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnROb3RFbm91Z2hNb3ZlbWVudCcsIHtcbiAgICAgICAgICAgIGFzc2lzdGFudFV1aWQ6IHBhcnRpY2lwYW50VXVpZCxcbiAgICAgICAgICAgIGFjdGlvbnM6IHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIHBhcnRpY2lwYW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKDAgLSBNYXRoLmFicyh0b3RhbE1vdmUpKVxuICAgICAgcGFydGljaXBhbnRzRGF0YVtwYXJ0aWNpcGFudEluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgICApXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmICh0b3RhbE1vdmUgIT09IDApIHtcbiAgICAgIGF3YWl0IHRoaXMubW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbihcbiAgICAgICAgcGFydGljaXBhbnRVdWlkLFxuICAgICAgICBsb2NhdGlvbnNbZGVzdGluYXRpb25JbmRleF0udXVpZCxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChhY3RpdmF0ZVBhcnRpY2lwYW50KSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdGl2YXRlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkLCB7XG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb24sXG4gICAgICAgIGFjdGl2YXRlTG9jYXRpb24sXG4gICAgICAgIHJlbmRlcjogZmFsc2VcbiAgICAgIH0pXG4gICAgICBtb2RpZmllZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoYWN0aXZhdGVMb2NhdGlvbiAmJiAhYWN0aXZhdGVQYXJ0aWNpcGFudCkge1xuICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZUxvY2F0aW9uKGxvY2F0aW9uc1tkZXN0aW5hdGlvbkluZGV4XS51dWlkLCB7XG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb24sXG4gICAgICAgIHJlbmRlcjogZmFsc2VcbiAgICAgIH0pXG4gICAgICBtb2RpZmllZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAobW9kaWZpZWQgJiYgcmVuZGVyKSBhd2FpdCB0aGlzLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIHJldHVybiB0b3RhbE1vdmVcbiAgfVxuXG4gIGFzeW5jIG1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24gKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICBsb2NhdGlvblV1aWQsXG4gICAge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFuaW1hdGUgPSBudWxsLFxuICAgICAgbW92ZVRva2VuID0gdHJ1ZSxcbiAgICAgIHJlbmRlciA9IHRydWVcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG5cbiAgICAvLyBGaW5kIGRlc3RpbmF0aW9uIGxvY2F0aW9uLlxuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gbG9jYXRpb25zLmZpbmQobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBpZiAoIWRlc3RpbmF0aW9uKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgRmFpbGVkIHRvIG1vdmUgJHtwYXJ0aWNpcGFudFV1aWR9LiBMb2NhdGlvbiAke2xvY2F0aW9uVXVpZH0gdW5rbm93bmBcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEZpbmQgb3JpZ2luIGxvY2F0aW9uXG4gICAgY29uc3Qgb3JpZ2luID0gbG9jYXRpb25zLmZpbmQobCA9PlxuICAgICAgbC5wYXJ0aWNpcGFudHM/LmluY2x1ZGVzKHBhcnRpY2lwYW50VXVpZClcbiAgICApXG5cbiAgICBpZiAoIW9yaWdpbikge1xuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGZpbmQgJHtwYXJ0aWNpcGFudFV1aWR9IGluIGxvY2F0aW9uc2ApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIWRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cykgZGVzdGluYXRpb24ucGFydGljaXBhbnRzID0gW11cbiAgICBpZiAoZGVzdGluYXRpb24ucGFydGljaXBhbnRzLmluY2x1ZGVzKHBhcnRpY2lwYW50VXVpZCkpIHJldHVybiAvLyBtb3ZpbmcgcGFydGljcGFudCB0byBhIGxvY2F0aW9uIGhlIGFscmVhZHkgb2NjdXBpZXNcbiAgICBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudFV1aWQpXG4gICAgLy8gZGVzdGluYXRpb24ucGFydGljaXBhbnRzLnNvcnQoc29ydEJ5Um9sZUFuZERleClcblxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50c0xpc3QgPSBvcmlnaW4ucGFydGljaXBhbnRzLmZpbHRlcihcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkICE9PSBwXG4gICAgKVxuICAgIG9yaWdpbi5wYXJ0aWNpcGFudHMgPSBvbGRQYXJ0aWNpcGFudHNMaXN0XG5cbiAgICBpZiAobW92ZVRva2VuICYmIGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzKSB7XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgICAgbGV0IHBhcnRpY3BhbnREb2N1bWVudCA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KFxuICAgICAgICBwYXJ0aWNpcGFudD8uZGF0YT8uZG9jVXVpZFxuICAgICAgKVxuICAgICAgLy8gRmluZCB0b2tlblxuICAgICAgaWYgKHBhcnRpY3BhbnREb2N1bWVudCAmJiAhKHBhcnRpY3BhbnREb2N1bWVudCBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgfHwgcGFydGljcGFudERvY3VtZW50Py5vYmplY3QgaW5zdGFuY2VvZiBUb2tlbikpIHtcbiAgICAgICAgY29uc3QgZm91bmRUb2tlbnMgPSBjYW52YXMuc2NlbmUudG9rZW5zLmZpbHRlcihkID0+IGQuYWN0b3JMaW5rICYmIGQuYWN0b3I/LmlkID09PSBwYXJ0aWNwYW50RG9jdW1lbnQuaWQpXG4gICAgICAgIGlmIChmb3VuZFRva2Vucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQgPSBmb3VuZFRva2Vuc1swXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHBhcnRpY3BhbnREb2N1bWVudCAmJlxuICAgICAgICAhKFxuICAgICAgICAgIC8qIHBhcnRpY3BhbnREb2N1bWVudC5pc1Rva2VuIHx8ICovIChcbiAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudCBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgfHxcbiAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudD8ub2JqZWN0IGluc3RhbmNlb2YgVG9rZW5cbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ05vIHRva2VuIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGFjdG9yJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbi5jb29yZGluYXRlcy5zY2VuZSAhPT0gZ2FtZS5zY2VuZXMudmlld2VkLnV1aWQpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0NhdXRpb24gdGhlIHNjZW5lIGlzIG5vdCB0aGUgYWN0aXZlIHNjZW5lJylcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydGljcGFudERvY3VtZW50LnBhcmVudD8udXVpZCAhPT0gZGVzdGluYXRpb24uY29vcmRpbmF0ZXMuc2NlbmUpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yVG9rZW5Ob3RPblNjZW5lJylcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2NlbmUgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleShcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnNjZW5lXG4gICAgICAgICAgKVxuICAgICAgICAgIGxldCB4ID0gZGVzdGluYXRpb24uY29vcmRpbmF0ZXMueFxuICAgICAgICAgIGNvbnN0IHkgPSBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy55XG4gICAgICAgICAgbGV0IHRhcmdldFJlY3QgPSBuZXcgUElYSS5SZWN0YW5nbGUoXG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgeSxcbiAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3Qud2lkdGgsXG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQub2JqZWN0LmhlaWdodFxuICAgICAgICAgICkubm9ybWFsaXplKClcbiAgICAgICAgICBjb25zdCB1cGRhdGUgPSBbXVxuICAgICAgICAgIGxldCBmb3VuZEZyZWVTcGFjZSA9IGZhbHNlXG4gICAgICAgICAgd2hpbGUgKCFmb3VuZEZyZWVTcGFjZSkge1xuICAgICAgICAgICAgY29uc3Qgb3ZlcmxhcGluZ1Rva2VuID0gc2NlbmUudG9rZW5zLmZpbmQodCA9PiB7XG4gICAgICAgICAgICAgIGlmICh0LmlkID09PSBwYXJ0aWNwYW50RG9jdW1lbnQuaWQpIHJldHVybiBmYWxzZSAvLyBZb3UgY2FuJ3Qgb3ZlcmxhcCB3aXRoIHlvdXJzZWxmXG4gICAgICAgICAgICAgIHJldHVybiB0Lm9iamVjdC5ib3VuZHMuaW50ZXJzZWN0cyh0YXJnZXRSZWN0KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmIChvdmVybGFwaW5nVG9rZW4pIHtcbiAgICAgICAgICAgICAgeCA9IG92ZXJsYXBpbmdUb2tlbi5vYmplY3QuYm91bmRzLnJpZ2h0ICsgMVxuICAgICAgICAgICAgICB0YXJnZXRSZWN0ID0gbmV3IFBJWEkuUmVjdGFuZ2xlKFxuICAgICAgICAgICAgICAgIHgsXG4gICAgICAgICAgICAgICAgeSxcbiAgICAgICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQub2JqZWN0LndpZHRoLFxuICAgICAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3QuaGVpZ2h0XG4gICAgICAgICAgICAgICkubm9ybWFsaXplKClcbiAgICAgICAgICAgIH0gZWxzZSBmb3VuZEZyZWVTcGFjZSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB1cGRhdGUucHVzaCh7XG4gICAgICAgICAgICBfaWQ6IHBhcnRpY3BhbnREb2N1bWVudC5pZCxcbiAgICAgICAgICAgIHgsXG4gICAgICAgICAgICB5XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cz8uZm9yRWFjaCggcFV1aWQgPT57XG4gICAgICAgICAgLy8gICBjb25zdCBwID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwVXVpZClcbiAgICAgICAgICAvLyAgIGNvbnN0IHBEb2MgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleSggcD8uZGF0YT8uZG9jVXVpZClcbiAgICAgICAgICAvLyAgIGlmKCBwRG9jIGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCAmJiBwRG9jLm9iamVjdCBpbnN0YW5jZW9mIFRva2VuKXtcbiAgICAgICAgICAvLyAgICAgdXBkYXRlcyA9IHRydWVcbiAgICAgICAgICAvLyAgICAgdXBkYXRlLnB1c2goe1xuICAgICAgICAgIC8vICAgICAgIF9pZDogcERvYy5pZCxcbiAgICAgICAgICAvLyAgICAgICB4OngsXG4gICAgICAgICAgLy8gICAgICAgeTp5XG4gICAgICAgICAgLy8gICAgIH0pXG4gICAgICAgICAgLy8gICAgIGlmKCBwRG9jLm9iamVjdC53aWR0aCkgeCArPSBwRG9jLm9iamVjdC53aWR0aFxuICAgICAgICAgIC8vICAgfVxuICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgY29uc3Qgc2hvd1Rva2VuTW92ZW1lbnQgPVxuICAgICAgICAgICAgdHlwZW9mIGFuaW1hdGUgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgICA/IGFuaW1hdGVcbiAgICAgICAgICAgICAgOiB0aGlzLnN5c3RlbS5zaG93VG9rZW5Nb3ZlbWVudFxuICAgICAgICAgIGF3YWl0IHBhcnRpY3BhbnREb2N1bWVudC5wYXJlbnQudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoXG4gICAgICAgICAgICAnVG9rZW4nLFxuICAgICAgICAgICAgdXBkYXRlLFxuICAgICAgICAgICAgeyBhbmltYXRlOiBzaG93VG9rZW5Nb3ZlbWVudCB9XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIC8vIEhhbmRsZSBzY3JvbGxpbmdcbiAgYXN5bmMgc2V0Y2hhc2VUcmFja1Njcm9sbCAoe1xuICAgIGZyb20gPSB1bmRlZmluZWQsXG4gICAgdG8gPSAtMSxcbiAgICByZW5kZXIgPSB0cnVlXG4gIH0gPSB7fSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAge1xuICAgICAgICAnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nOlxuICAgICAgICAgIHVuZGVmaW5lZCA9PT0gZnJvbSA/IHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbiA6IGZyb20sXG4gICAgICAgICdzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nOlxuICAgICAgICAgIHVuZGVmaW5lZCA9PT0gdG8gPyB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24gOiB0b1xuICAgICAgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBnZXQgY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbiAoKSB7XG4gICAgY29uc3QgaHRtbCA9IHRoaXMuc2hlZXQ/Ll9lbGVtZW50XG4gICAgaWYgKCFodG1sKSByZXR1cm4gLTFcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxuICAgIGlmICghY2hhc2VUcmFjaykgcmV0dXJuIC0xXG4gICAgLy8gY29uc3Qgc2VsZWN0b3IgPSBgI2l0ZW0tJHt0aGlzLmlkfSAuY2hhc2UtdHJhY2tgXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgREFUQSA6IEpxdWVyeSByb290OiAkeyQoJzpyb290JykuZmluZChzZWxlY3Rvcikuc2Nyb2xsTGVmdCgpfWApXG4gICAgLy8gcmV0dXJuICQoJzpyb290JykuZmluZChzZWxlY3Rvcikuc2Nyb2xsTGVmdCgpXG5cbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBEQVRBIDogSnF1ZXJ5IHJvb3Q6ICR7JCgnOnJvb3QnKS5maW5kKCcjaXRlbS1WTmh0cXhBMndKSm5XU3RUIC5jaGFzZS10cmFjaycpLnNjcm9sbExlZnQoKX0uQ2hhc2UgdHJhY2sgb2Zmc2V0OiAke2NoYXNlVHJhY2suc2Nyb2xsTGVmdH0sIERvY3VtZW50IG9mZnNldDoke2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpdGVtLVZOaHRxeEEyd0pKbldTdFQnKS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKS5zY3JvbGxMZWZ0fWApXG4gICAgcmV0dXJuIGNoYXNlVHJhY2suc2Nyb2xsTGVmdFxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgb2Zmc2V0IHBvc2l0aW9uIG9mIHRoZSBhY3RpdmUgbG9jYXRpb25cbiAgICogdGhlIGNlbnRlciBvZiB0aGUgYWN0aXZlIGxvY2F0aW9uIHdpbGwgYmUgY2VudGVyZWRcbiAgICogaW4gdGhlIHBhcmVudC5cbiAgICovXG4gIGdldCBjaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdGl2ZUxvY2F0aW9uKSByZXR1cm4gLTFcbiAgICByZXR1cm4gdGhpcy5nZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbih0aGlzLmFjdGl2ZUxvY2F0aW9uLnV1aWQpXG4gIH1cblxuICBnZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbiAobG9jYXRpb25VdWlkLCB7IGh0bWwgPSBudWxsIH0pIHtcbiAgICBjb25zdCBodG1sRWxlbWVudCA9IGh0bWwgfHwgdGhpcy5zaGVldD8uX2VsZW1lbnRcbiAgICBpZiAoIWh0bWxFbGVtZW50IHx8ICFodG1sRWxlbWVudFswXSkgcmV0dXJuIC0xXG4gICAgY29uc3QgY2hhc2VUcmFjayA9IGh0bWxFbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpXG4gICAgaWYgKCFjaGFzZVRyYWNrKSByZXR1cm4gLTFcbiAgICBjb25zdCBhY3RpdmVMb2NhdGlvbkVsZW1lbnQgPSBjaGFzZVRyYWNrLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLmNoYXNlLWxvY2F0aW9uW2RhdGEtdXVpZD1cIiR7bG9jYXRpb25VdWlkfVwiXWBcbiAgICApXG4gICAgaWYgKCFhY3RpdmVMb2NhdGlvbkVsZW1lbnQpIHJldHVybiAtMVxuICAgIGNvbnN0IGxlZnRTY3JvbGwgPVxuICAgICAgYWN0aXZlTG9jYXRpb25FbGVtZW50Lm9mZnNldExlZnQgK1xuICAgICAgYWN0aXZlTG9jYXRpb25FbGVtZW50LmNsaWVudFdpZHRoIC8gMiAtXG4gICAgICBjaGFzZVRyYWNrLmNsaWVudFdpZHRoIC8gMlxuICAgIHJldHVybiBsZWZ0U2Nyb2xsIDwgMCA/IDAgOiBNYXRoLmZsb29yKGxlZnRTY3JvbGwpXG4gIH1cblxuICAvLyBTaG91bGQgYmUgcmVtb3ZlZFxuICBmaW5kTWluTW92IChsaXN0KSB7XG4gICAgaWYgKCFsaXN0Py5sZW5ndGgpIHJldHVybiAtMVxuICAgIHJldHVybiBsaXN0LnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgIHByZXYuYWRqdXN0ZWRNb3YgPCBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnRcbiAgICApLmFkanVzdGVkTW92XG4gIH1cblxuICBmaW5kTWF4TW92IChsaXN0KSB7XG4gICAgaWYgKCFsaXN0Py5sZW5ndGgpIHJldHVybiAtMVxuICAgIHJldHVybiBsaXN0LnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgIHByZXYuYWRqdXN0ZWRNb3YgPiBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnRcbiAgICApLmFkanVzdGVkTW92XG4gIH1cblxuICAvLyBVdGlsaXRpZXNcbiAgZmluZEluZGV4IChsaXN0LCB1dWlkKSB7XG4gICAgcmV0dXJuIGxpc3QuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgZ2V0IHN0YXJ0ZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnc3RhcnRlZCcpXG4gIH1cblxuICBhc3luYyBzdGFydCAoKSB7XG4gICAgY29uc3QgcmVtU3RyaW5nID0gJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScpXG4gICAgY29uc3QgcmVtU2l6ZSA9IE51bWJlcihyZW1TdHJpbmcucmVwbGFjZSgncHgnLCAnJykpXG4gICAgY29uc3QgcENvdW50ID0gdGhpcy5hY3R1YWxQYXJ0aWNpcGFudHMubGVuZ3RoXG4gICAgY29uc3Qgd2lkdGggPSBNYXRoLm1heCgocENvdW50ICogMTEuMiArIDMpICogcmVtU2l6ZSwgNDAgKiByZW1TaXplKVxuICAgIHRoaXMuc2hlZXQuX3RhYnNbMF0uYWN0aXZlID0gJ3NldHVwJ1xuICAgIHRoaXMuc2hlZXQucG9zaXRpb24ud2lkdGggPSB3aWR0aFxuICAgIGF3YWl0IHRoaXMuc2V0RmxhZygnQ29DNycsICdzdGFydGVkJywgdHJ1ZSlcbiAgICBhd2FpdCB0aGlzLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybigpXG4gIH1cblxuICBhc3luYyBzdG9wICgpIHtcbiAgICByZXR1cm4gdGhpcy51bnNldEZsYWcoJ0NvQzcnLCAnc3RhcnRlZCcpXG4gIH1cblxuICBnZW5lcmF0ZU5ld1V1aWQgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICB9XG5cbiAgZ2V0QWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MgKHBhcnRpY2lwYW50VXVpZCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgaWYgKCFwYXJ0aWNpcGFudC5hY3RvcikgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxpc3QgPSBbXVxuICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PlxuICAgICAgbGlzdC5wdXNoKFxuICAgICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWNzJyl9ICgke2Muc2hvcnROYW1lfSlgXG4gICAgICApXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5MdWNrJ1xuICAgICAgKX0pYFxuICAgIClcbiAgICBsaXN0LnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuU0FOJ1xuICAgICAgKX0pYFxuICAgIClcbiAgICBwYXJ0aWNpcGFudC5hY3Rvci5za2lsbHMuZm9yRWFjaChzID0+IGxpc3QucHVzaChzLm5hbWUpKVxuICAgIHJldHVybiBsaXN0XG4gIH1cblxuICBnZXQgYWN0aXZlQWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IHBhcnRpY2ljcGFudERhdGEgPSB0aGlzLmFjdGl2ZVBhcnRpY2lwYW50RGF0YVxuICAgIGlmICghcGFydGljaWNwYW50RGF0YSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzKHBhcnRpY2ljcGFudERhdGEudXVpZClcbiAgfVxuXG4gIGdldCBhbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IGxpc3QgPSBbXVxuICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PlxuICAgICAgbGlzdC5wdXNoKFxuICAgICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWNzJyl9ICgke2Muc2hvcnROYW1lfSlgXG4gICAgICApXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5MdWNrJ1xuICAgICAgKX0pYFxuICAgIClcbiAgICBsaXN0LnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuU0FOJ1xuICAgICAgKX0pYFxuICAgIClcblxuICAgIGdhbWUuQ29DNy5za2lsbExpc3Q/LmZvckVhY2gocyA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgICFsaXN0LmluY2x1ZGVzKHMubmFtZSkgJiZcbiAgICAgICAgIXMubmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKGAoJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55U3BlY05hbWUnKX0pYC50b0xvd2VyQ2FzZSgpKVxuICAgICAgKSB7XG4gICAgICAgIGxpc3QucHVzaChzLm5hbWUpXG4gICAgICB9XG4gICAgfSkgLy8gVE9ETzogUmVtb3ZlID8/XG4gICAgdGhpcy5wYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFjdG9yKSB7XG4gICAgICAgIHAuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgaWYgKCFsaXN0LmluY2x1ZGVzKHMubmFtZSkpIGxpc3QucHVzaChzLm5hbWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gbGlzdC5zb3J0KEludGwuQ29sbGF0b3IoKS5jb21wYXJlKVxuICB9XG5cbiAgZ2V0IGFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljc1Nob3J0ICgpIHtcbiAgICBjb25zdCBsaXN0ID0gW11cbiAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT4gbGlzdC5wdXNoKGAke2MubGFiZWx9YCkpXG4gICAgbGlzdC5wdXNoKGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJyl9YClcbiAgICBsaXN0LnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpfWApXG5cbiAgICBnYW1lLkNvQzcuc2tpbGxMaXN0Py5mb3JFYWNoKHMgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhbGlzdC5pbmNsdWRlcyhzLm5hbWUpICYmXG4gICAgICAgICFzLm5hbWVcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5pbmNsdWRlcyhgKCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJyl9KWAudG9Mb3dlckNhc2UoKSlcbiAgICAgICkge1xuICAgICAgICBsaXN0LnB1c2gocy5uYW1lKVxuICAgICAgfVxuICAgIH0pIC8vIFRPRE86IFJlbW92ZSA/P1xuICAgIHRoaXMucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hY3Rvcikge1xuICAgICAgICBwLmFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgIGlmICghbGlzdC5pbmNsdWRlcyhzLm5hbWUpKSBsaXN0LnB1c2gocy5uYW1lKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGxpc3Quc29ydChJbnRsLkNvbGxhdG9yKCkuY29tcGFyZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB0aGUgZGF0YSBvZiBhbGwgcGFyYXNpdGUgcGFydGljaXBhbnRzIGluIGxvY2F0aW9ucy5cbiAgICogU2hvdWxkIG5ldmVyIGhhcHBlblxuICAgKi9cbiAgLy8gYXN5bmMgY2xlYW5Mb2NhdGlvbnMgKCkge1xuICAvLyAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAvLyAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAvLyAgICAgY29uc3QgcGFydGlwYW50c1V1aWRBcnJheSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5tYXAocCA9PiBwLnV1aWQpXG4gIC8vICAgICBpZiAobC5wYXJ0aWNpcGFudHMpIHtcbiAgLy8gICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIodXVpZCA9PlxuICAvLyAgICAgICAgIHBhcnRpcGFudHNVdWlkQXJyYXkuaW5jbHVkZXModXVpZClcbiAgLy8gICAgICAgKVxuICAvLyAgICAgfVxuICAvLyAgIH0pXG4gIC8vICAgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgLy8gfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUgKi9cbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTa2lsbCBleHRlbmRzIENvQzdJdGVtIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuc3lzdGVtPy5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBza2lsbCA9IENvQzdTa2lsbC5ndWVzc05hbWVQYXJ0cyhkYXRhLm5hbWUpXG4gICAgICBjb25zdCB7IG5hbWUsIHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24sIC4uLm5ld1Byb3BlcnRpZXMgfSA9IHNraWxsXG4gICAgICBkYXRhLm5hbWUgPSBuYW1lXG4gICAgICBkYXRhLnN5c3RlbSB8fD0ge31cbiAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7IC4uLmRhdGEuc3lzdGVtLnByb3BlcnRpZXMsIC4uLm5ld1Byb3BlcnRpZXMgfVxuICAgICAgZGF0YS5zeXN0ZW0gPSB7IC4uLmRhdGEuc3lzdGVtLCBza2lsbE5hbWUsIHNwZWNpYWxpemF0aW9uLCBwcm9wZXJ0aWVzIH1cbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIHN0YXRpYyBndWVzc05hbWVQYXJ0cyAoc2tpbGxOYW1lKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgY29tYmF0OiBmYWxzZSxcbiAgICAgIGZpZ2h0aW5nOiBmYWxzZSxcbiAgICAgIGZpcmVhcm06IGZhbHNlLFxuICAgICAgbmFtZTogc2tpbGxOYW1lLFxuICAgICAgc2tpbGxOYW1lLFxuICAgICAgc3BlY2lhbDogZmFsc2UsXG4gICAgICBzcGVjaWFsaXphdGlvbjogJydcbiAgICB9XG5cbiAgICBjb25zdCBtYXRjaCA9IHNraWxsTmFtZS5tYXRjaCgvXiguKylcXHMqXFwoKFteKV0rKVxcKSQvKVxuICAgIGlmIChtYXRjaCkge1xuICAgICAgb3V0cHV0LnNraWxsTmFtZSA9IG1hdGNoWzJdLnRyaW0oKVxuICAgICAgb3V0cHV0LnNwZWNpYWwgPSB0cnVlXG5cbiAgICAgIGNvbnN0IHNwZWNpYWxpemF0aW9uID0gbWF0Y2hbMV0udHJpbSgpXG4gICAgICBvdXRwdXQuc3BlY2lhbGl6YXRpb24gPSBzcGVjaWFsaXphdGlvblxuICAgICAgb3V0cHV0Lm5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBvdXRwdXQuc2tpbGxOYW1lICsgJyknXG4gICAgICBvdXRwdXQuZmlnaHRpbmcgPSBzcGVjaWFsaXphdGlvbiA9PT0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgIG91dHB1dC5maXJlYXJtID0gc3BlY2lhbGl6YXRpb24gPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgIG91dHB1dC5yYW5nZWQgPSBzcGVjaWFsaXphdGlvbiA9PT0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJhbmdlZFNwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgICBvdXRwdXQuY29tYmF0ID0gb3V0cHV0LmZpZ2h0aW5nIHx8IG91dHB1dC5maXJlYXJtIHx8IG91dHB1dC5yYW5nZWRcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgZ2V0IGhhc0FjdGl2ZUVmZmVjdHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZUVmZmVjdHMubGVuZ3RoID4gMFxuICB9XG5cbiAgZ2V0IGFjdGl2ZUVmZmVjdHMgKCkge1xuICAgIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5lZmZlY3RzKSB7XG4gICAgICBjb25zdCBlZmZlY3RLZXlGdWxsID0gYHNraWxsLiR7dGhpcy5uYW1lfWAudG9Mb3dlckNhc2UoKVxuICAgICAgY29uc3QgZWZmZWN0S2V5U2hvcnQgPSBgc2tpbGwuJHt0aGlzLnN5c3RlbS5za2lsbE5hbWV9YC50b0xvd2VyQ2FzZSgpXG4gICAgICBsZXQgY2hhbmdlcyA9IHRoaXMucGFyZW50LmVmZmVjdHMucmVkdWNlKChjaGFuZ2VzLCBlKSA9PiB7XG4gICAgICAgIGlmIChlLmRpc2FibGVkIHx8IGUuaXNTdXBwcmVzc2VkKSByZXR1cm4gY2hhbmdlc1xuICAgICAgICByZXR1cm4gY2hhbmdlcy5jb25jYXQoXG4gICAgICAgICAgZS5kYXRhLmNoYW5nZXMubWFwKGMgPT4ge1xuICAgICAgICAgICAgYyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGMpXG4gICAgICAgICAgICBjLmVmZmVjdCA9IGVcbiAgICAgICAgICAgIGMucHJpb3JpdHkgPSBjLnByaW9yaXR5ID8/IGMubW9kZSAqIDEwXG4gICAgICAgICAgICByZXR1cm4gY1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH0sIFtdKVxuICAgICAgY2hhbmdlcy5zb3J0KChhLCBiKSA9PiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eSlcbiAgICAgIGNoYW5nZXMgPSBjaGFuZ2VzLmZpbHRlcihcbiAgICAgICAgZSA9PlxuICAgICAgICAgIGUua2V5LnRvTG93ZXJDYXNlKCkgPT09IGVmZmVjdEtleVNob3J0IHx8XG4gICAgICAgICAgZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gZWZmZWN0S2V5RnVsbFxuICAgICAgKVxuICAgICAgcmV0dXJuIGNoYW5nZXNcbiAgICB9XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICAvKipcbiAgKiBVbmlxdWUgaWRlbnRpZmllciBzaG91bGQgYmUgdXNlZCB0byBzdG9yZSBhbmQgb2J0YWluIGl0ZW0gdG8gYXNzZXNzIGl0ZW0gdW5pcXVlbmVzcy5cbiAgKiBGb3Igb2xkIGl0ZW1zIHdpdGhvdXQgaWQsIGZhbGxiYWNrIG9mIHNraWxsTmFtZSBtYXkgc3RpbGwgYmUgdXNlZFxuICAqIGJ1dCBpZiBza2lsbCBuYW1lIGlzIG5vdCB1bmlxdWUgaXQgd2lsbCBjYXVzZSBwcm9ibGVtcy5cbiAgKi9cbiAgZ2V0IGl0ZW1JZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lXG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgdmFsdWUgb2YgdGhlIHNraWxsIHNjb3JlIHVuYWZmZWN0ZWQgYnkgYWN0aXZlIGVmZmVjdHNcbiAgICovXG4gIGdldCByYXdWYWx1ZSAoKSB7XG4gICAgbGV0IHZhbHVlID0gMFxuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAvLyBGb3IgYW4gYWN0b3Igd2l0aCBleHBlcmllbmNlIHdlIG5lZWQgdG8gY2FsY3VsYXRlIHNraWxsIHZhbHVlXG4gICAgICB2YWx1ZSA9IHRoaXMuYmFzZVxuICAgICAgdmFsdWUgKz0gdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LnBlcnNvbmFsXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LnBlcnNvbmFsKVxuICAgICAgICA6IDBcbiAgICAgIHZhbHVlICs9IHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24pXG4gICAgICAgIDogMFxuICAgICAgdmFsdWUgKz0gdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZSlcbiAgICAgICAgOiAwXG4gICAgICBpZiAoXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykgJiZcbiAgICAgICAgdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmFyY2hldHlwZVxuICAgICAgKSB7XG4gICAgICAgIHZhbHVlICs9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5hcmNoZXR5cGUpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZvciBhbGwgb3RoZXJzIGFjdG9yIHdlIHN0b3JlIHRoZSB2YWx1ZSBkaXJlY3RseVxuICAgICAgdmFsdWUgPSBwYXJzZUludCh0aGlzLnN5c3RlbS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuICFpc05hTih2YWx1ZSkgPyB2YWx1ZSA6IG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBza2lsbCdzIHZhbHVlIGFmdGVyIGFjdGl2ZSBlZmZlY3RzIGhhdmUgYmVlbiBhcHBsaWVkXG4gICAqL1xuICBnZXQgdmFsdWUgKCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5wYXJlbnQ/LnN5c3RlbS5za2lsbHM/LltgJHt0aGlzLml0ZW1JZGVudGlmaWVyfWBdPy52YWx1ZVxuICAgIHJldHVybiB2YWx1ZSB8fCB0aGlzLnJhd1ZhbHVlXG4gIH1cblxuICBhc3luYyB1cGRhdGVWYWx1ZSAodmFsdWUpIHtcbiAgICBpZiAodGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgY29uc3QgZGVsdGEgPSBwYXJzZUludCh2YWx1ZSkgLSB0aGlzLnJhd1ZhbHVlXG4gICAgICBjb25zdCBleHAgPVxuICAgICAgICAodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UpXG4gICAgICAgICAgOiAwKSArIGRlbHRhXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IGV4cCA+IDAgPyBleHAgOiAwXG4gICAgICB9KVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0udmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgaW5jcmVhc2VFeHBlcmllbmNlICh4KSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgY29uc3QgZXhwID1cbiAgICAgICAgKHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxuICAgICAgICAgIDogMCkgKyBwYXJzZUludCh4KVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiBleHAgPiAwID8gZXhwIDogMFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBnZXQgdmFsdWUgKCkge1xuICAvLyAgIGxldCBwVmFsdWVcbiAgLy8gICBpZiggdGhpcy5wYXJlbnQpe1xuXG4gIC8vICAgfVxuICAvLyAgIGNvbnN0IHZhbHVlID0gc3VwZXIudmFsdWVcbiAgLy8gICBsZXQgdXBkYXRlZCA9IHZhbHVlXG4gIC8vICAgZm9yIChjb25zdCBjaGFuZ2Ugb2YgdGhpcy5hY3RpdmVFZmZlY3RzKSB7XG4gIC8vICAgICBjb25zdCBtb2RpZmllciA9IE51bWJlci5mcm9tU3RyaW5nKGNoYW5nZS52YWx1ZSlcbiAgLy8gICAgIGlmICghaXNOYU4obW9kaWZpZXIpKSB7XG4gIC8vICAgICAgIGNvbnN0IG1vZGVzID0gQ09OU1QuQUNUSVZFX0VGRkVDVF9NT0RFU1xuICAvLyAgICAgICBzd2l0Y2ggKGNoYW5nZS5tb2RlKSB7XG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5BREQ6XG4gIC8vICAgICAgICAgICB1cGRhdGVkICs9IG1vZGlmaWVyXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuTVVMVElQTFk6XG4gIC8vICAgICAgICAgICB1cGRhdGVkID0gTWF0aC5yb3VuZCh1cGRhdGVkICogbW9kaWZpZXIpXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuT1ZFUlJJREU6XG4gIC8vICAgICAgICAgICB1cGRhdGVkID0gbW9kaWZpZXJcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5VUEdSQURFOlxuICAvLyAgICAgICAgICAgaWYgKG1vZGlmZXIgPiB1cGRhdGVkKSB1cGRhdGVkID0gbW9kaWZpZXJcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5ET1dOR1JBREU6XG4gIC8vICAgICAgICAgICBpZiAobW9kaWZlciA8IHVwZGF0ZWQpIHVwZGF0ZWQgPSBtb2RpZmllclxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgfVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gICBpZiAoIWlzTmFOKHVwZGF0ZWQpICYmIHVwZGF0ZWQgIT0gdmFsdWUpIHtcbiAgLy8gICAgIGlmICh1cGRhdGVkIDwgMCkgdXBkYXRlZCA9IDBcbiAgLy8gICAgIHJldHVybiB1cGRhdGVkXG4gIC8vICAgfSByZXR1cm4gdmFsdWVcbiAgLy8gfVxufVxuIiwiaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3Rvci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdWZWhpY2xlIGV4dGVuZHMgQ29DQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2plZXAuc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgZ2V0IHJhd0J1aWxkICgpIHtcbiAgICByZXR1cm4gdGhpcy5idWlsZFxuICB9XG5cbiAgZ2V0IGJ1aWxkICgpIHtcbiAgICBjb25zdCBidWlsZCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUpXG4gICAgcmV0dXJuIGlzTmFOKGJ1aWxkKSA/IG51bGwgOiBidWlsZFxuICB9XG5cbiAgZ2V0IGhwICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPT09IG51bGwgfHxcbiAgICAgIHVuZGVmaW5lZCA9PT0gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50IHx8XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPT09ICcnXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcy5idWlsZFxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcy5idWlsZFxuICAgIH1cbiAgICBjb25zdCBocCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudClcbiAgICByZXR1cm4gaXNOYU4oaHApID8gbnVsbCA6IGhwXG4gIH1cblxuICBnZXQgaHBNYXggKCkge1xuICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gIH1cblxuICBnZXQgcmF3SHBNYXggKCkge1xuICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gIH1cblxuICBhc3luYyBzZXRIcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPiB0aGlzLmJ1aWxkKSB2YWx1ZSA9IHRoaXMuYnVpbGRcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCc6IHZhbHVlIH0pXG4gIH1cblxuICBnZXQgcmF3RGIgKCkge1xuICAgIHJldHVybiB0aGlzLmRiXG4gIH1cblxuICBnZXQgZGIgKCkge1xuICAgIGNvbnN0IGRiID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5kYj8udmFsdWUpXG4gICAgcmV0dXJuIGlzTmFOKGRiKSA/IG51bGwgOiBkYlxuICB9XG5cbiAgZ2V0IHJhd01vdiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubW92XG4gIH1cblxuICBnZXQgbW92ICgpIHtcbiAgICBjb25zdCBtb3YgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdj8udmFsdWUpXG4gICAgcmV0dXJuIGlzTmFOKG1vdikgPyBudWxsIDogbW92XG4gIH1cblxuICBnZXQgbXBNYXggKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzPy5tcD8ubWF4KSB8fCAwXG4gIH1cblxuICBnZXQgcmF3TXBNYXggKCkge1xuICAgIHJldHVybiB0aGlzLm1wTWF4XG4gIH1cblxuICBnZXQgc2FuTWF4ICgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHJhd1Nhbk1heCAoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpZSAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN0RlY2FkZXJEaWUgZXh0ZW5kcyBEaWUge1xuICBjb25zdHJ1Y3RvciAodGVybURhdGEpIHtcbiAgICB0ZXJtRGF0YS5mYWNlcyA9IDEwXG4gICAgc3VwZXIodGVybURhdGEpXG4gIH1cblxuICBnZXQgdG90YWwgKCkge1xuICAgIGNvbnN0IHRvdGFsID0gc3VwZXIudG90YWxcbiAgICByZXR1cm4gdG90YWwgPT09IDEwID8gMCA6IHRvdGFsICogMTBcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RhdGljIGdldCBERU5PTUlOQVRJT04gKCkge1xuICAgIHJldHVybiAndCdcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29DN0RlY2FkZXJEaWUgfSBmcm9tICcuL2RlY2FkZXItZGllLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0RlY2FkZXJEaWVPdGhlciBleHRlbmRzIENvQzdEZWNhZGVyRGllIHtcbiAgc3RhdGljIGdldCBERU5PTUlOQVRJT04gKCkge1xuICAgIHJldHVybiAnbydcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBnYW1lICovXG5jb25zdCBTRVRUSU5HUyA9IHtcbiAgcHVscFJ1bGVzOiB7XG4gICAgbmFtZTogJycsXG4gICAgaGludDogJycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIGluaXRpYXRpdmVSdWxlOiB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGVIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6ICdiYXNpYycsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIGJhc2ljOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGVCYXNpYycsXG4gICAgICBvcHRpb25hbDogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlT3B0aW9uYWwnXG4gICAgfSxcbiAgICBvbkNoYW5nZTogcnVsZSA9PiBfc2V0SW5pdGlhdGl2ZU9wdGlvbnMocnVsZSlcbiAgfSxcbiAgZGV2ZWxvcG1lbnRSb2xsRm9yTHVjazoge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kZXZlbG9wbWVudFJvbGxGb3JMdWNrJyxcbiAgICBoaW50OiAnU0VUVElOR1MuZGV2ZWxvcG1lbnRSb2xsRm9yTHVja0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBhbGxvd015dGhvc0hhcmRlbmVkOiB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmFsbG93TXl0aG9zSGFyZGVuZWRUaXRsZScsXG4gICAgaGludDogJ1NFVFRJTkdTLmFsbG93TXl0aG9zSGFyZGVuZWRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVEb3VibGVNYXhIZWFsdGg6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRG91YmxlTWF4SGVhbHRoLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Eb3VibGVNYXhIZWFsdGguSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjazoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5EZXZlbG9wbWVudFJvbGxMdWNrLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5EZXZlbG9wbWVudFJvbGxMdWNrLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZUFyY2hldHlwZToge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5BcmNoZXR5cGUuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkFyY2hldHlwZS5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVPcmdhbml6YXRpb246IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuT3JnYW5pemF0aW9uLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Pcmdhbml6YXRpb24uSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlVGFsZW50czoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5UYWxlbnRzLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5UYWxlbnRzLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZUZhc3RlclJlY292ZXJ5OiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkZhc3RlclJlY292ZXJ5Lk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5GYXN0ZXJSZWNvdmVyeS5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kczoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5JZ25vcmVNYWpvcldvdW5kcy5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlTWFqb3JXb3VuZHMuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLklnbm9yZUFnZVBlbmFsdGllcy5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlQWdlUGVuYWx0aWVzLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBvcHBvc2VkUm9sbFRpZUJyZWFrZXI6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH1cbn1cblxuZnVuY3Rpb24gX3NldEluaXRpYXRpdmVPcHRpb25zIChydWxlKSB7XG4gIGxldCBkZWNpbWFscyA9IDBcbiAgc3dpdGNoIChydWxlKSB7XG4gICAgY2FzZSAnb3B0aW9uYWwnOlxuICAgICAgZGVjaW1hbHMgPSAyXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2Jhc2ljJzpcbiAgICAgIGRlY2ltYWxzID0gMFxuICAgICAgYnJlYWtcbiAgfVxuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XG4gICAgZm9ybXVsYTogbnVsbCxcbiAgICBkZWNpbWFsc1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3R2FtZVJ1bGVTZXR0aW5ncyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0aXRsZTogJ1NFVFRJTkdTLlRpdGxlUnVsZXMnLFxuICAgICAgaWQ6ICdydWxlcy1zZXR0aW5ncycsXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvc3lzdGVtL3J1bGUtc2V0dGluZ3MuaHRtbCcsXG4gICAgICB3aWR0aDogNTUwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICBjbG9zZU9uU3VibWl0OiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIGdldERhdGEgKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7fVxuICAgIGNvbnN0IHB1bHBSdWxlcyA9IHtcbiAgICAgIHRydWU6IGZhbHNlLFxuICAgICAgZmFsc2U6IGZhbHNlXG4gICAgfVxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKFNFVFRJTkdTKSkge1xuICAgICAgb3B0aW9uc1trXSA9IHtcbiAgICAgICAgdmFsdWU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgayksXG4gICAgICAgIHNldHRpbmc6IHZcbiAgICAgIH1cbiAgICAgIGlmIChrLm1hdGNoKC9ecHVscFJ1bGUuezIsfSQvKSkge1xuICAgICAgICBwdWxwUnVsZXNbb3B0aW9uc1trXS52YWx1ZV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIG9wdGlvbnMucHVscFNlbGVjdGlvbiA9IHB1bHBSdWxlcy50cnVlXG4gICAgICA/IHB1bHBSdWxlcy5mYWxzZVxuICAgICAgICA/ICdzb21lJ1xuICAgICAgICA6ICdhbGwnXG4gICAgICA6ICdub25lJ1xuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXJTZXR0aW5ncyAoKSB7XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoU0VUVElOR1MpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgaywgdilcbiAgICB9XG4gICAgX3NldEluaXRpYXRpdmVPcHRpb25zKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2luaXRpYXRpdmVSdWxlJykpXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJyNwdWxwUnVsZXNTZWxlY3QnKVxuICAgICAgLm9uKCdjaGFuZ2UnLCBldmVudCA9PiB0aGlzLm9uQ2hhbmdlUHVscFNlbGVjdChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2lucHV0LnB1bHBSdWxlc1NlbGVjdFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vbkNsaWNrUHVscChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2J1dHRvbltuYW1lPXJlc2V0XScpXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vblJlc2V0RGVmYXVsdHMoZXZlbnQpKVxuICB9XG5cbiAgb25DaGFuZ2VQdWxwU2VsZWN0IChldmVudCkge1xuICAgIGNvbnN0IHZhbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkudmFsKClcbiAgICBpZiAodmFsID09PSAnbm9uZScgfHwgdmFsID09PSAnYWxsJykge1xuICAgICAgJCgnI3J1bGVzLXNldHRpbmdzJylcbiAgICAgICAgLmZpbmQoJ2lucHV0LnB1bHBSdWxlc1NlbGVjdFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zdCBjaGVja2JveCA9ICQodGhpcylcbiAgICAgICAgICBpZiAodmFsID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnLCBmYWxzZSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIHRydWUpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG9uQ2xpY2tQdWxwIChldmVudCkge1xuICAgIGNvbnN0IHB1bHBSdWxlcyA9IHtcbiAgICAgIHRydWU6IGZhbHNlLFxuICAgICAgZmFsc2U6IGZhbHNlXG4gICAgfVxuICAgICQoJyNydWxlcy1zZXR0aW5ncycpXG4gICAgICAuZmluZCgnaW5wdXQucHVscFJ1bGVzU2VsZWN0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSAkKHRoaXMpXG4gICAgICAgIGlmIChjaGVja2JveC5wcm9wKCdjaGVja2VkJykpIHtcbiAgICAgICAgICBwdWxwUnVsZXMudHJ1ZSA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwdWxwUnVsZXMuZmFsc2UgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgJCgnI3B1bHBSdWxlc1NlbGVjdCcpLnZhbChcbiAgICAgIHB1bHBSdWxlcy50cnVlID8gKHB1bHBSdWxlcy5mYWxzZSA/ICdzb21lJyA6ICdhbGwnKSA6ICdub25lJ1xuICAgIClcbiAgfVxuXG4gIGFzeW5jIG9uUmVzZXREZWZhdWx0cyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZm9yIGF3YWl0IChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoU0VUVElOR1MpKSB7XG4gICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsIGssIHY/LmRlZmF1bHQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlbmRlcigpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZGF0YSkge1xuICAgIGNvbnN0IHB1bHBSdWxlcyA9IHtcbiAgICAgIHRydWU6IGZhbHNlLFxuICAgICAgZmFsc2U6IGZhbHNlXG4gICAgfVxuICAgIGZvciBhd2FpdCAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKFNFVFRJTkdTKSkge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCBrZXksIGRhdGFba2V5XSlcbiAgICAgIGlmIChrZXkubWF0Y2goL15wdWxwUnVsZS57Mix9JC8pKSB7XG4gICAgICAgIHB1bHBSdWxlc1tkYXRhW2tleV1dID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZXMnLCBwdWxwUnVsZXMudHJ1ZSAmJiAhcHVscFJ1bGVzLmZhbHNlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IERyb3BDb0NJRCB9IGZyb20gJy4uLy4uL2FwcHMvZHJvcC1jb2MtaWQuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBcmNoZXR5cGVTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ3NraWxscycpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1kZWxldGUnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ3NraWxscycpKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc2tpbGwnLCBjb2xsZWN0aW9uTmFtZSA9ICdza2lsbHMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcbiAgICAgIGlmICghW3R5cGVdLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHVzZUNvQ0lEID09PSAwKSB7XG4gICAgICAgIHVzZUNvQ0lEID0gYXdhaXQgRHJvcENvQ0lELmNyZWF0ZSgpXG4gICAgICB9XG4gICAgICBjb2xsZWN0aW9uLnB1c2goRHJvcENvQ0lELnByb2Nlc3NJdGVtKHVzZUNvQ0lELCBpdGVtKSlcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1TdW1tYXJ5IChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxuICAgIH0pXG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2hhdERhdGEgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHRoaXMuaXRlbS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJChgPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPiR7Y2hhdERhdGF9PC9kaXY+YClcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICAvLyBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykgeyBwcm9wcy5hcHBlbmQoYDxzcGFuIGNsYXNzPVwidGFnXCI+JHtwfTwvc3Bhbj5gKSB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUlkID0gaXRlbS5kYXRhKCdpdGVtLWlkJylcbiAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChpID0+IChpdGVtSWQgJiYgaS5faWQgPT09IGl0ZW1JZCkgfHwgKENvQ0lkICYmIGkgPT09IENvQ0lkKSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgICBjb2xsZWN0aW9uLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnb2NjdXBhdGlvbiddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2FyY2hldHlwZS5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG5cbiAgICBjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHNlbGVjdGVkXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzXG4gICAgKSkge1xuICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENIQVJBQy4ke2tleS50b1VwcGVyQ2FzZSgpfWApXG4gICAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpY3MucHVzaChjaGFyYWNOYW1lKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRTdWdnZXN0ZWRPY2N1cGF0aW9ucyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5zdWdnZXN0ZWRPY2N1cGF0aW9ucyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZFN1Z2dlc3RlZFRyYWl0cyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5zdWdnZXN0ZWRUcmFpdHMsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdEVtcHR5ID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscy5sZW5ndGggPT09IDBcblxuICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljc1N0cmluZyA9ICcnXG4gICAgY29uc3Qgb3JTdHJpbmcgPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9yJyl9IGBcbiAgICBpZiAoY29yZUNoYXJhY3RlcmlzdGljcy5sZW5ndGgpIHtcbiAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nICs9IGNvcmVDaGFyYWN0ZXJpc3RpY3Muam9pbihvclN0cmluZylcbiAgICB9XG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHVscFRhbGVudHMnKX06ICR7c2hlZXREYXRhLmRhdGEuc3lzdGVtLnRhbGVudHN9YFxuICAgIClcbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c1BvaW50cycpfTogJHtzaGVldERhdGEuZGF0YS5zeXN0ZW0uYm9udXNQb2ludHN9YFxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSBnYW1lIEl0ZW1TaGVldCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdBcm1vclNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhcm1vciddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2FybW9yLmhicycsXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPSBDb0M3QWN0aXZlRWZmZWN0LnByZXBhcmVBY3RpdmVFZmZlY3RDYXRlZ29yaWVzKFxuICAgICAgdGhpcy5pdGVtLmVmZmVjdHNcbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuaXRlbSkpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0Jvb2tTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9tYWluLmh0bWwnLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2l0ZW0nLCAnYm9vayddLFxuICAgICAgd2lkdGg6IDUwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuc3BlbGxzJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgc2Nyb2xsWTogWycuYm9keSddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcubmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLmJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5pbml0aWFsUmVhZGluZyA9IHRoaXMuaXRlbS5zeXN0ZW0uaW5pdGlhbFJlYWRpbmdcbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHNoZWV0RGF0YS5pc093bmVyID0gdGhpcy5pdGVtLmlzT3duZXJcbiAgICBzaGVldERhdGEuc3BlbGxzTGVhcm5lZCA9IHRoaXMuc3BlbGxzTGVhcm5lZFxuICAgIHNoZWV0RGF0YS5leGhhdXN0ZWQgPSAoYXdhaXQgdGhpcy5pdGVtLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2VcbiAgICBzaGVldERhdGEuc3R1ZHlDb21wbGV0ZWQgPSB0aGlzLml0ZW0uc3lzdGVtLnN0dWR5LnByb2dyZXNzID09PSB0aGlzLml0ZW0uc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG4gICAgc2hlZXREYXRhLnNwZWxsTGlzdEVtcHR5ID0gdGhpcy5pdGVtLnN5c3RlbS5zcGVsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQ29udGVudCA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jb250ZW50LFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgZ2V0IHNwZWxsc0xlYXJuZWQgKCkge1xuICAgIGxldCBhbW91bnQgPSAwXG4gICAgY29uc3Qgc3BlbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5zcGVsbHNcbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxscykge1xuICAgICAgaWYgKHNwZWxsLnN5c3RlbS5sZWFybmVkKSBhbW91bnQrK1xuICAgIH1cbiAgICByZXR1cm4gYCR7YW1vdW50fSAvICR7c3BlbGxzLmxlbmd0aH1gXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcjYXR0ZW1wdC1pbml0aWFsLXJlYWRpbmcnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLml0ZW0uYXR0ZW1wdEluaXRpYWxSZWFkaW5nKClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uRGVsZXRlKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5lZGl0LXNwZWxsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25TcGVsbERldGFpbChldmVudCkpXG4gICAgaHRtbC5maW5kKCcuc3BlbGwtbmFtZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxEZXRhaWwoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLnRlYWNoLXNwZWxsJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgY29uc3QgaWQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJ2xpJykuZGF0YSgnaWQnKVxuICAgICAgdGhpcy5pdGVtLmF0dGVtcHRTcGVsbExlYXJuaW5nKGlkKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCdbbmFtZT1cInN5c3RlbS5zdHVkeS5uZWNlc3NhcnlcIl0nKS5jaGFuZ2UoZXZlbnQgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdyZXNldCcsIHZhbHVlKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcjaW5jcmVhc2UtcHJvZ3Jlc3MnKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLml0ZW0uY2hhbmdlUHJvZ3Jlc3MoJ2luY3JlYXNlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI2RlY3JlYXNlLXByb2dyZXNzJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdkZWNyZWFzZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5hZGQtb3RoZXItZ2FpbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAnYWRkJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmNoYW5nZS1vdGhlci1nYWlucycpLmNoYW5nZShldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAnY2hhbmdlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI3JlZG8tZnVsbC1zdHVkeScpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuaXRlbS5yZWRvRnVsbFN0dWR5KClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1vdGhlci1nYWlucycpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMoZXZlbnQsICdyZW1vdmUnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcub3B0aW9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5tb2RpZnlUeXBlKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNwZWxsRGV0YWlsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cbiAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQucGFyZW50cygnbGknKS5kYXRhKCdpbmRleCcpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS5zcGVsbERldGFpbChpbmRleClcbiAgfVxuXG4gIC8qKlxuICAgKiBJdCBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBkZWxldGUgYSBzcGVsbCBvbiB0aGUgc2hlZXRcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIF9vbkRlbGV0ZSAoZXZlbnQpIHtcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSByZXR1cm5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXG4gICAgY29uc3QgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ2xpJykuZGF0YSgnaW5kZXgnKVxuICAgIC8qKiBBbHdheXMgaGFzIHRvIGJlIEB0eXBlIHtBcnJheX0gKi9cbiAgICBjb25zdCBzcGVsbHMgPSB0aGlzLml0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnNwZWxscylcbiAgICAgIDogW11cbiAgICBpZiAoaW5kZXggPj0gMCkgc3BlbGxzLnNwbGljZShpbmRleCwgMSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uc3BlbGxzJzogc3BlbGxzIH0pXG4gIH1cblxuICAvKipcbiAgICogSXQgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgZHJhZ3MgYW4gaXRlbSB0byB0aGUgc2hlZXRcbiAgICogRmlsdGVycyBvbmx5ICdzcGVsbCcgaXRlbXMgYW5kIGluc2VydHMgdGhlbSBpbiBhIEB0eXBlIHtBcnJheX1cbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NwZWxsJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBjb25zdCBzcGVsbHMgPSBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFbJ3NraWxsJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkgY29udGludWVcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdzcGVsbCcpIHtcbiAgICAgICAgc3BlbGxzLnB1c2goaXRlbSlcbiAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnICYmIHRoaXMuaXRlbS5zeXN0ZW0udHlwZS5vdGhlcikge1xuICAgICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKG51bGwsICdhZGQnLCB7IG5hbWU6IGl0ZW0ubmFtZSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0uYWRkU3BlbGxzKHNwZWxscylcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgdGhlIGNoZWNrYm94ZXMgZm9yIHR5cGUgd2hlbiB1c2VyIGNsaWNrcyBvbiB0aGUgY29ycmVzcG9uZGluZ1xuICAgKiBsYWJlbCwgbm90IHN1cmUgaWYgdGhpcyB3b3JrcyBvbiBlbmdpbmVzIG90aGVyIHRoYW4gVjhcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge2pRdWVyeS5FdmVudH0gY2xpY2tcbiAgICovXG4gIG1vZGlmeVR5cGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8qKiBQcmV2ZW50cyBwcm9wYWdhdGlvbiBvZiB0aGUgc2FtZSBldmVudCBmcm9tIGJlaW5nIGNhbGxlZCAqL1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgdG9nZ2xlU3dpdGNoID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIHJldHVybiB0b2dnbGVTd2l0Y2gucHJldigpLnRyaWdnZXIoJ2NsaWNrJylcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZnkgSXRlbSBkYXRhIGJhc2VkIG9uIHVzZXIgaW50ZXJhY3Rpb25zIHdpdGggdGhlIG90aGVyIHNraWxsXG4gICAqIGdhaW5zIHRhYmxlIG9uIGRldGFpbHMgdGFiIG9uIHRoaXMgc2hlZXRcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgJ2FkZCcgfHwgJ2NoYW5nZScgfHwgJ3JlbW92ZSdcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgbW9kaWZ5T3RoZXJzR2FpbnMgKGV2ZW50LCBtb2RlLCBvcHRpb25zID0ge30pIHtcbiAgICAvKiogTm8gbmVlZCB0byBjaGVjayBpZiB1c2VyIGlzIEdNIGJlY2F1c2Ugb25seSB0aGV5IGNhbiBzZWUgZGV0YWlscyB0YWIgKi9cbiAgICBsZXQgaW5kZXggPSBudWxsXG4gICAgbGV0IGVsZW1lbnQgPSBudWxsXG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgLyoqIEBzZWUgZGF0YS1pbmRleCBwcm9wZXJ0eSBvbiB0ZW1wbGF0ZSAqL1xuICAgICAgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ3RyJykuZGF0YSgnaW5kZXgnKVxuICAgICAgLyoqIEFsd2F5cyBoYXMgdG8gYmUgQHR5cGUge0FycmF5fSAqL1xuICAgIH1cbiAgICBjb25zdCBza2lsbHMgPSB0aGlzLml0ZW0uc3lzdGVtLmdhaW5zLm90aGVyc1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmdhaW5zLm90aGVycylcbiAgICAgIDogW11cbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gcGx1cyBpY29uIHRvIGFkZCBhIG5ldyBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xuICAgICAgICBza2lsbHMucHVzaCh7XG4gICAgICAgICAgLyoqIG5ldyBza2lsbCAqL1xuICAgICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSB8fCBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmV3U2tpbGxOYW1lJyksXG4gICAgICAgICAgLyoqIGRldmVsb3BtZW50IGJ5IGRlZmF1bHQsIHZhbHVlIGNhbiBhbHNvIGJlIDFkNiBvciAxZDEwICovXG4gICAgICAgICAgdmFsdWU6ICdkZXZlbG9wbWVudCdcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYW5nZSc6XG4gICAgICAgIC8qKiBVc2VyIGNoYW5nZWQgbmFtZSAoaW5wdXQpIG9yIHZhbHVlIChzZWxlY3QpIG9mIGEgc2tpbGwgb24gdGFibGUgKi9cbiAgICAgICAgc2tpbGxzW2luZGV4XSA9IHtcbiAgICAgICAgICBuYW1lOiBlbGVtZW50LmlzKCdpbnB1dCcpID8gZWxlbWVudC52YWwoKSA6IHNraWxsc1tpbmRleF0ubmFtZSxcbiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5pcygnc2VsZWN0JykgPyBlbGVtZW50LnZhbCgpIDogc2tpbGxzW2luZGV4XS52YWx1ZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZW1vdmUnOlxuICAgICAgICAvKiogVXNlciBjbGlja2VkIG9uIG1pbnVzIGljb24gdG8gcmVtb3ZlIGEgc2tpbGwgb24gb3RoZXIgZ2FpbnMgdGFibGUgKi9cbiAgICAgICAgaWYgKGluZGV4ID49IDApIHNraWxscy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5nYWlucy5vdGhlcnMnOiBza2lsbHMgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRyBmb3VuZHJ5IGdhbWUgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgQ29DN0NoYXJhY3RlclNoZWV0IH0gZnJvbSAnLi9jaGFyYWN0ZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhcmFjdGVyU2hlZXRWMyBleHRlbmRzIENvQzdDaGFyYWN0ZXJTaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMycsICdhY3RvcicsICdjaGFyYWN0ZXInXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyLXNoZWV0LXYzLmhicycsXG4gICAgICB3aWR0aDogOTgwLFxuICAgICAgaGVpZ2h0OiA4MTAsXG4gICAgICBzY3JvbGxZOiBbJy5zaGVldC1ib2R5J11cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGxldCBidXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGJ1dHRvbnMgPSBbXG4gICAgICB7XG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3VtbWFyaXplJyksXG4gICAgICAgIGNsYXNzOiAndGVzdC1leHRyYS1pY29uJyxcbiAgICAgICAgaWNvbjogJ2ZhcyBmYS13aW5kb3ctbWluaW1pemUnLFxuICAgICAgICBvbmNsaWNrOiBldmVudCA9PiB0aGlzLnRvZ2dsZVNoZWV0TW9kZShldmVudClcbiAgICAgIH1cbiAgICBdLmNvbmNhdChidXR0b25zKVxuICAgIHJldHVybiBidXR0b25zXG4gIH1cblxuICBhc3luYyB0b2dnbGVTaGVldE1vZGUgKGV2ZW50KSB7XG4gICAgY29uc3QgQ2xhc3NOYW1lID0gQ09ORklHLkFjdG9yLnNoZWV0Q2xhc3Nlcy5jaGFyYWN0ZXJbJ0NvQzcuQ29DN0NoYXJhY3RlclNoZWV0TWluaW1pemVkJ10/LmNsc1xuICAgIGlmICh0eXBlb2YgQ2xhc3NOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLm9wdGlvbnMudG9rZW5cbiAgICAgIGF3YWl0IHRoaXMuY2xvc2UoKVxuICAgICAgYXdhaXQgKG5ldyBDbGFzc05hbWUodGhpcy5vYmplY3QsIHsgZWRpdGFibGU6IHRoaXMub2JqZWN0LmlzT3duZXIgfSkpLnJlbmRlcih0cnVlLCB7IHRva2VuIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG4gICAgY29uc3QgaHAgPSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLmhwXG4gICAgc2hlZXREYXRhLmltZ1NhdHVyYXRpb24gPSBocC52YWx1ZSAvIGhwLm1heFxuXG4gICAgc2hlZXREYXRhLmJpb2dyYXBoeVNlY3Rpb25zID0gW11cbiAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSBpbnN0YW5jZW9mIEFycmF5ICYmIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IGJpb2dyYXBoeSBvZiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5KSB7XG4gICAgICAgIHNoZWV0RGF0YS5iaW9ncmFwaHlTZWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICB0aXRsZTogYmlvZ3JhcGh5LnRpdGxlLFxuICAgICAgICAgIHZhbHVlOiBiaW9ncmFwaHkudmFsdWUsXG4gICAgICAgICAgZW5yaWNoZWQ6IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgICAgICAgIGJpb2dyYXBoeS52YWx1ZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHNoZWV0RGF0YS5iaW9ncmFwaHlTZWN0aW9uc1swXS5pc0ZpcnN0ID0gdHJ1ZVxuICAgICAgc2hlZXREYXRhLmJpb2dyYXBoeVNlY3Rpb25zW3NoZWV0RGF0YS5iaW9ncmFwaHlTZWN0aW9ucy5sZW5ndGggLSAxXS5pc0xhc3QgPSB0cnVlXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLnNob3dQYXJ0VmFsdWVzID0gIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGVQYXJ0VmFsdWVzJylcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmICghdGhpcy5vYmplY3Quc2hlZXQuaXNFZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtbmV3LXNlY3Rpb24tc2Nyb2xsJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5hY3Rvci5jcmVhdGVCaW9TZWN0aW9uKClcbiAgICAgIGh0bWwuZmluZCgnLnNoZWV0LWJvZHknKS5lYWNoKChpLCBlbCkgPT4geyBlbC5zY3JvbGxUb3AgPSBlbC5zY3JvbGxIZWlnaHQgLSBlbC5jbGllbnRIZWlnaHQgfSlcbiAgICAgIHRoaXMucmVuZGVyKClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLnBvcnRyYWl0LWZyYW1lJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5fdGFicy5maW5kKHQgPT4gdC5fbmF2U2VsZWN0b3IgPT09ICcuc2hlZXQtbmF2Jyk/LmFjdGl2YXRlKCdwb3J0cmFpdC1mcmFtZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5vcHRpb25ib3ggLnBob3RvLWZyYW1lJykuY2xpY2soKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBvYmplY3RGaXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQub2JqZWN0Rml0XG4gICAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICdmbGFncy5Db0M3LnBvcnRyYWl0RnJhbWUnOiBvYmplY3RGaXRcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRyBmb3VuZHJ5IGdhbWUgKi9cbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldCB9IGZyb20gJy4vY2hhcmFjdGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXJhY3RlclNoZWV0TWluaW1pemVkIGV4dGVuZHMgQ29DN0NoYXJhY3RlclNoZWV0IHtcbiAgY29uc3RydWN0b3IgKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKG9wdGlvbnMpXG4gICAgdGhpcy5zdW1tYXJpemVkID0gdHJ1ZVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdhY3RvcicsICdjaGFyYWN0ZXInLCAnc3VtbWFyaXplZCddLFxuICAgICAgaGVpZ2h0OiAyMDAsXG4gICAgICB3aWR0aDogNzAwXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBsZXQgYnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBidXR0b25zID0gW1xuICAgICAge1xuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1heGltaXplJyksXG4gICAgICAgIGNsYXNzOiAndGVzdC1leHRyYS1pY29uJyxcbiAgICAgICAgaWNvbjogJ2ZhcyBmYS13aW5kb3ctbWF4aW1pemUnLFxuICAgICAgICBvbmNsaWNrOiBldmVudCA9PiB0aGlzLnRvZ2dsZVNoZWV0TW9kZShldmVudClcbiAgICAgIH1cbiAgICBdLmNvbmNhdChidXR0b25zKVxuICAgIHJldHVybiBidXR0b25zXG4gIH1cblxuICBhc3luYyB0b2dnbGVTaGVldE1vZGUgKGV2ZW50KSB7XG4gICAgY29uc3QgQ2xhc3NOYW1lID0gQ09ORklHLkFjdG9yLnNoZWV0Q2xhc3Nlcy5jaGFyYWN0ZXJbJ0NvQzcuQ29DN0NoYXJhY3RlclNoZWV0VjMnXT8uY2xzXG4gICAgaWYgKHR5cGVvZiBDbGFzc05hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IHRoaXMub3B0aW9ucy50b2tlblxuICAgICAgYXdhaXQgdGhpcy5jbG9zZSgpXG4gICAgICBhd2FpdCAobmV3IENsYXNzTmFtZSh0aGlzLm9iamVjdCwgeyBlZGl0YWJsZTogdGhpcy5vYmplY3QuaXNPd25lciB9KSkucmVuZGVyKHRydWUsIHsgdG9rZW4gfSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvclNoZWV0LCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZm91bmRyeSwgZ2FtZSwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29udGFpbmVyU2hlZXQgZXh0ZW5kcyBBY3RvclNoZWV0IHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhY3RvcicsICdzdG9yYWdlJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3N0b3JhZ2Utc2hlZXQuaHRtbCcsXG4gICAgICB3aWR0aDogNjcyLFxuICAgICAgaGVpZ2h0OiA3NjUsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnaXRlbXMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLmFjdG9yLml0ZW1zLnRvT2JqZWN0KCkgfHwgW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5zeXN0ZW0pIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGlmICghWydib29rJywgJ2l0ZW0nLCAnc3BlbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChpdGVtLnRvT2JqZWN0KCkpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgaXRlbXMgfSlcbiAgfVxuXG4gIG9uQ2xvc2VTaGVldCAoKSB7fVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHNoZWV0RGF0YS5lZGl0YWJsZSA9IHRoaXMuaXNFZGl0YWJsZVxuXG4gICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlID0ge31cbiAgICBpZiAoc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlLFxuICAgICAgICAgICAgaXRlbS50eXBlXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXSA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV0ucHVzaChpdGVtKVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBpdGVtVHlwZSBpbiBzaGVldERhdGEuaXRlbXNCeVR5cGUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW1UeXBlXS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuYWxsb3dVbmxvY2sgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdhbHdheXMnIHx8XG4gICAgICBnYW1lLnVzZXIuaXNHTVxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICd3ZWFwb24nKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUFybW9yID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdhcm1vcicpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuXG4gICAgc2hlZXREYXRhLmhhc0ludmVudG9yeSA9XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5QXJtb3JcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtLWVkaXQnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgICAgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuaW52ZW50b3J5LWhlYWRlcicpLmNsaWNrKHRoaXMuX29uSW52ZW50b3J5SGVhZGVyLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtLXRyYWRlJykuY2xpY2sodGhpcy5fb25UcmFkZUl0ZW0uYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmNsaWNrKHRoaXMuX29uSXRlbVN1bW1hcnkuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soYXN5bmMgZXYgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICAgIGNvbnN0IGl0ZW1Ub0RlbGV0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpLCB7XG4gICAgICAgIHN0cmljdDogdHJ1ZVxuICAgICAgfSlcbiAgICAgIGF3YWl0IGl0ZW1Ub0RlbGV0ZS5kZWxldGUoKVxuICAgICAgbGkuc2xpZGVVcCgyMDAsICgpID0+IHRoaXMucmVuZGVyKGZhbHNlKSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLWl0ZW0nKS5jbGljayhldiA9PiB7XG4gICAgICBzd2l0Y2ggKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Jvb2snOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlCb29rKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlJdGVtKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U2tpbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc3BlbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTcGVsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlXZWFwb24oZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubG9jaycpLmNsaWNrKHRoaXMuX29uTG9ja0NsaWNrZWQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2tDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpc0xvY2tlZCA9IHRoaXMuYWN0b3IubG9ja2VkXG4gICAgdGhpcy5hY3Rvci5sb2NrZWQgPSAhaXNMb2NrZWRcbiAgfVxuXG4gIGFzeW5jIF9vblRyYWRlSXRlbSAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcbiAgICBsZXQgY29udGVudCA9ICc8cD4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VTZWxlY3RVc2VyVG9HaXZlVG8nKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICBhY3RvckZyb206IHRoaXMuYWN0b3IuaWQsXG4gICAgICBzY2VuZTogbnVsbCxcbiAgICAgIGFjdG9yVG86IHRoaXMuYWN0b3IuaWQsXG4gICAgICBpdGVtOiBpdGVtLmlkXG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuPy5hY3Rvcikge1xuICAgICAgbWVzc2FnZS5hY3RvckZyb20gPSB0aGlzLnRva2VuLmlkXG4gICAgICBtZXNzYWdlLnNjZW5lID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICB9XG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGUgPT4ge1xuICAgICAgaWYgKCFbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnLCAnY29udGFpbmVyJ10uaW5jbHVkZXMoZS50eXBlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBlLmlkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgbGV0IHZpc2libGUgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZS5vd25lcnNoaXApKSB7XG4gICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcgfHwgayA9PT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICAgICAgdmlzaWJsZSA9XG4gICAgICAgICAgICB2aXNpYmxlIHx8XG4gICAgICAgICAgICB2ICE9PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZpc2libGVcbiAgICB9KVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzxmb3JtIGlkPVwic2VsZWN0Zm9ybVwiPjxzZWxlY3QgbmFtZT1cInVzZXJcIj4nXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcbiAgICAgIGNvbnRlbnQgPVxuICAgICAgICBjb250ZW50ICsgJzxvcHRpb24gdmFsdWU9XCInICsgYWN0b3IuaWQgKyAnXCI+JyArIGFjdG9yLm5hbWUgKyAnPC9vcHRpb24+J1xuICAgIH1cbiAgICBjb250ZW50ID0gY29udGVudCArICc8L3NlbGVjdD48L2Zvcm0+PC9wPidcbiAgICBhd2FpdCBEaWFsb2cucHJvbXB0KHtcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVRpdGxlU2VsZWN0VXNlclRvR2l2ZVRvJyksXG4gICAgICBjb250ZW50LFxuICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNzZWxlY3Rmb3JtJykpXG4gICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UuYWN0b3JUbyA9IHZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtdHJhZGVpdGVtdG8nLCBtZXNzYWdlKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbVN1bW1hcnkgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGF3YWl0IGl0ZW0uZ2V0Q2hhdERhdGEoeyBzZWNyZXRzOiB0aGlzLmFjdG9yLmlzT3duZXIgfSlcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPjwvZGl2PicpXG5cbiAgICAgIGNvbnN0IGxhYmVscyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLWxhYmVsc1wiPjwvZGl2PicpXG4gICAgICBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEubGFiZWxzKSB7XG4gICAgICAgIGxhYmVscy5hcHBlbmQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLWxhYmVsXCI+PHNwYW4gY2xhc3M9XCJsYWJlbC1uYW1lXCI+JHtwLm5hbWV9IDo8L3NwYW4+PHNwYW4gY2xhc3M9XCJsYWJlbC12YWx1ZVwiPiR7cC52YWx1ZX08L3NwYW4+PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKGxhYmVscylcblxuICAgICAgZGl2LmFwcGVuZChcbiAgICAgICAgJChgPGRpdiBjbGFzcz1cIml0ZW0tZGVzY3JpcHRpb25cIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnZhbHVlfTwvZGl2PmApXG4gICAgICApXG4gICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BjbCkge1xuICAgICAgICBjb25zdCBzcGVjaWFsRGl2ID0gJChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tc3BlY2lhbFwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24uc3BlY2lhbH08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgZGl2LmFwcGVuZChzcGVjaWFsRGl2KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgcHJvcHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwidGFnIGl0ZW0tcHJvcGVydHlcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShwKX08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG5cbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgLy8gJChldmVudC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuXG4gIF9vbkludmVudG9yeUhlYWRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5zaWJsaW5ncygnbGknKS5zbGlkZVRvZ2dsZSgyMDApXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEcmFnRHJvcCwgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCB9IGZyb20gJy4uL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRBY3RvclRvQ2hhc2UnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyLmh0bWwnLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlciddLFxuICAgICAgZWRpdGFibGU6IHRydWUsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHdpZHRoOiAzMDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5mb3JtLWNvbnRhaW5lcicsXG4gICAgICBwZXJtaXNzaW9uczogeyBkcm9wOiBnYW1lLnVzZXIuaXNHTSB9LFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcFBhcnRpY2lwYW50LmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgcGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBjb25zdCB0b2tlblNlbGVjdG9yRHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJhZ1NlbGVjdG9yOiAnLmNoYXNlLXRva2VuJyxcbiAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgIGRyYWdzdGFydDogZ2FtZS51c2VyLmlzR01cbiAgICAgIH0sXG4gICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vblRva2VuU2VsZWN0b3JEcmFnU3RhcnQuYmluZCh0aGlzKVxuICAgICAgfVxuICAgIH0pXG4gICAgdG9rZW5TZWxlY3RvckRyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGh0bWwuZmluZCgnLnJlc2V0LXBhcnRpY2lwYW50JykuY2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5vYmplY3QgPSB7fVxuICAgICAgdGhpcy5fYWN0b3IgPSBudWxsXG4gICAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5mb29kLWNoYWluJykuY2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5vYmplY3QuY2hhc2VyID0gIXRoaXMub2JqZWN0LmNoYXNlclxuICAgICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCdbZGF0YS1hY3Rpb25dJykuY2xpY2sodGhpcy5fb25BY3Rpb24uYmluZCh0aGlzKSlcblxuICAgIC8vIGh0bWwuZmluZCgnYnV0dG9uJykuY2xpY2sodGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vblRva2VuU2VsZWN0b3JEcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHR5cGU6ICdnZXRUb2tlbicsXG4gICAgICBhcHBJZDogdGhpcy5hcHBJZCxcbiAgICAgIGNhbGxCYWNrOiAnYWRkVG9rZW5Ub0NoYXNlJ1xuICAgIH1cbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgaWYgKCF0aGlzLm9iamVjdC5pbml0aWF0aXZlKSB7XG4gICAgICBjb25zdCBpbml0ID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZmluZChcbiAgICAgICAgYyA9PiBjLmtleSA9PT0gJ2RleCdcbiAgICAgIClcbiAgICAgIHRoaXMub2JqZWN0LmluaXRpYXRpdmUgPSBpbml0LmxhYmVsXG4gICAgICAvLyB0aGlzLm9iamVjdC5pbml0aWF0aXZlID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgLy8gICAnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnXG4gICAgICAvLyApfSAoJHtpbml0LnNob3J0TmFtZX0pYFxuICAgIH1cbiAgICBpZiAoIXRoaXMub2JqZWN0LnNwZWVkQ2hlY2spIHtcbiAgICAgIGNvbnN0IHNwZWVkQ2hlY2sgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5maW5kKFxuICAgICAgICBjID0+IGMua2V5ID09PSAnY29uJ1xuICAgICAgKVxuICAgICAgdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHtcbiAgICAgICAgbmFtZTogc3BlZWRDaGVjay5sYWJlbFxuICAgICAgfVxuICAgICAgLy8gdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHtcbiAgICAgIC8vICAgbmFtZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljcycpfSAoJHtcbiAgICAgIC8vICAgICBzcGVlZENoZWNrLnNob3J0TmFtZVxuICAgICAgLy8gICB9KWBcbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlUGFydGljaXBhbnQoKVxuXG4gICAgLy8gY29uc3Qgc3BlZWRDaGVjayA9IHRoaXMuYWN0b3I/LmZpbmQoIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2s/Lm5hbWUpXG4gICAgLy8gaWYoIHNwZWVkQ2hlY2spe1xuICAgIC8vICAgdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHNwZWVkQ2hlY2tcbiAgICAvLyB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLnBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcbiAgICBpZiAoZGF0YS5vYmplY3Quc3BlZWRDaGVjay5uYW1lICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGNvbnN0IHNwZWVkQ2hlY2sgPSB0aGlzLmFjdG9yLmZpbmQoZGF0YS5vYmplY3Quc3BlZWRDaGVjay5uYW1lKVxuICAgICAgaWYgKHNwZWVkQ2hlY2spIHtcbiAgICAgICAgZGF0YS5vYmplY3Quc3BlZWRDaGVjay5zY29yZSA9IHNwZWVkQ2hlY2sudmFsdWUudmFsdWVcbiAgICAgICAgZGF0YS5zcGVlZENoZWNrUmVhZE9ubHkgPSB0cnVlXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBkYXRhLnBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUgJiZcbiAgICAgICAgIXRoaXMub2JqZWN0LnNwZWVkQ2hlY2s/LnNjb3JlXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5vYmplY3Quc3BlZWRDaGVjay5zY29yZSA9IGRhdGEucGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkYXRhLm9iamVjdC5pbml0aWF0aXZlICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGNvbnN0IGluaXRpYXRpdmUgPSB0aGlzLmFjdG9yLmZpbmQoZGF0YS5vYmplY3QuaW5pdGlhdGl2ZSlcbiAgICAgIGlmIChpbml0aWF0aXZlKSB7XG4gICAgICAgIGRhdGEub2JqZWN0LmRleCA9IGluaXRpYXRpdmUudmFsdWUudmFsdWVcbiAgICAgICAgZGF0YS5pbml0UmVhZE9ubHkgPSB0cnVlXG4gICAgICB9IGVsc2UgZGF0YS5vYmplY3QuZGV4ID0gZGF0YS5wYXJ0aWNpcGFudC5pbml0aWF0aXZlXG4gICAgfVxuXG4gICAgZGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICBkYXRhLmNoYXNlID0gdGhpcy5jaGFzZVxuICAgIGRhdGEuZGF0YSA9IHRoaXMuZGF0YVxuXG4gICAgZGF0YS5vcHRpb25zTGlzdCA9IHt9XG4gICAgaWYgKHRoaXMuY2hhc2UpIHtcbiAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdCA9XG4gICAgICAgIHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzU2hvcnRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0ID0gW11cbiAgICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PlxuICAgICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChgJHtjLmxhYmVsfWApXG4gICAgICApXG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKX1gXG4gICAgICApXG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpfWBcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PlxuICAgICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChzLm5hbWUpXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGdldCBjaGFzZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9jaGFzZSkge1xuICAgICAgdGhpcy5fY2hhc2UgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZCh0aGlzLm9iamVjdC5jaGFzZVV1aWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jaGFzZVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMub2JqZWN0LmRvY1V1aWQpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgdGhpcy5fYWN0b3IgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbUtleSh0aGlzLm9iamVjdC5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcywgZm9ybURhdGEpXG4gICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3BQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCBkcm9wU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRyb3BEYXRhID0gSlNPTi5wYXJzZShkcm9wU3RyaW5nKVxuXG4gICAgY29uc3QgZG9jVXVpZCA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YShkcm9wRGF0YSlcblxuICAgIHRoaXMub2JqZWN0LmRvY1V1aWQgPSBkb2NVdWlkXG5cbiAgICAvLyBJZiBhY3RvciBpcyBjb250cm9sbGVkIGJ5IEdNIG9ubHkgd2UgYXNzdW1lIGhlIGlzIGEgY2hhc2VyXG4gICAgdGhpcy5vYmplY3QuY2hhc2VyID0gdGhpcy5hY3Rvcj8ub3duZXJzPy5maWx0ZXIodSA9PiAhdS5pc0dNKS5sZW5ndGggPT09IDBcbiAgICBpZiAodGhpcy5vYmplY3Quc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZykge1xuICAgICAgZGVsZXRlIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgYWRkVG9rZW5Ub0NoYXNlICh0b2tlbnMpIHtcbiAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5vYmplY3QuZG9jVXVpZCA9IHRva2Vuc1swXS5kb2N1bWVudD8udXVpZFxuICAgICAgLy8gSWYgYWN0b3IgaXMgY29udHJvbGxlZCBieSBHTSBvbmx5IHdlIGFzc3VtZSBoZSBpcyBhIGNoYXNlclxuICAgICAgdGhpcy5vYmplY3QuY2hhc2VyID0gdGhpcy5hY3Rvcj8ub3duZXJzPy5maWx0ZXIodSA9PiAhdS5pc0dNKS5sZW5ndGggPT09IDBcbiAgICAgIGlmICh0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yVG9rZW5JbmNvcnJlY3QnKSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25BY3Rpb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYWN0aW9uID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdjaGFzZS1jYW5jZWwnOlxuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXNlLWFkZCc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5vYmplY3QpXG5cbiAgICAgICAgICBpZiAodGhpcy5jaGFzZS5zdGFydGVkKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICEocGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gJiYgcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gPiAwKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRG9lc05vdE1lZXRNaW5pbXVtUmVxVG9CZUFkZGVkJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEub3ZlcnJpZGVNb3ZlbWVudEFjdGlvbikge1xuICAgICAgICAgICAgICBjb25zdCBzbG93ZXN0ID0gdGhpcy5jaGFzZS5zbG93ZXN0UGFydGljaXBhbnRcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHBhcnRpY2lwYW50LmFkanVzdGVkTW92KSkge1xuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50Lm1vdiA9IHNsb3dlc3QuYWRqdXN0ZWRNb3ZcbiAgICAgICAgICAgICAgfSAvKiogZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5tb3YgPVxuICAgICAgICAgICAgICAgICAgc2xvd2VzdC5hZGp1c3RlZE1vdiArIHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uIC0gMVxuICAgICAgICAgICAgICB9ICovXG4gICAgICAgICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhd2FpdCB0aGlzLmNoYXNlLmFkZFBhcnRpY2lwYW50KHBhcnRpY2lwYW50LCB7XG4gICAgICAgICAgICBsb2NhdGlvblV1aWQ6IHRoaXMub2JqZWN0LmxvY2F0aW9uVXVpZCxcbiAgICAgICAgICAgIHJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zOiB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCxcbiAgICAgICAgICAgIHVwZGF0ZTogdGhpcy5vYmplY3QudXBkYXRlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyb2xsLXNwZWVkLWNoZWNrJzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcbiAgICAgICAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZTZXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgICAgICAgcm9sbC5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICAgICAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0NoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzU2tpbGwpIHtcbiAgICAgICAgICAgICAgcm9sbC5za2lsbCA9IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmXG4gICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0F0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGxBdHRyaWJ1dGUocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlKSB7XG4gICAgICAgICAgICBjb25zdCByb2xsRGF0YSA9IHtcbiAgICAgICAgICAgICAgcmF3VmFsdWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLm5hbWUsXG4gICAgICAgICAgICAgIGFjdG9yTmFtZTogcGFydGljaXBhbnQubmFtZSA/IHBhcnRpY2lwYW50Lm5hbWUgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5oYXNBY3Rvcikge1xuICAgICAgICAgICAgICByb2xsRGF0YS5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmNyZWF0ZShyb2xsRGF0YSlcbiAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMub2JqZWN0LCBwYXJ0aWNpcGFudC5kYXRhKVxuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgIH1cblxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHZhbGlkYXRlUGFydGljaXBhbnQgKCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcbiAgICBpZiAoIXRoaXMuZGF0YSkgdGhpcy5kYXRhID0ge31cbiAgICB0aGlzLm9iamVjdC5leGNsdWRlZCA9IGZhbHNlXG4gICAgdGhpcy5vYmplY3QuZXNjYXBlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudEV4Y2x1ZGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEubW92ZW1lbnRBY3Rpb25EZWx0YSA9IDBcblxuICAgIGlmICghdGhpcy5kYXRhLm92ZXJyaWRlTW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgIGNvbnN0IHNsb3dlc3RQcmV5ID0gdGhpcy5jaGFzZS5zbG93ZXN0UHJleVxuICAgICAgY29uc3QgZmFzdGVzdENoYXNlciA9IHRoaXMuY2hhc2UuZmFzdGVzdENoYXNlclxuICAgICAgY29uc3Qgc2xvd2VzdCA9IHRoaXMuY2hhc2Uuc2xvd2VzdFBhcnRpY2lwYW50XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdiA8IHNsb3dlc3Q/LmFkanVzdGVkTW92KSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gdHJ1ZVxuICAgICAgICBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbiA9IDFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgcGFydGljaXBhbnQuY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKHNsb3dlc3Q/LmFkanVzdGVkTW92KVxuICAgICAgfVxuICAgICAgaWYgKHBhcnRpY2lwYW50LmlzQ2hhc2VyKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzbG93ZXN0UHJleSAmJlxuICAgICAgICAgICF0aGlzLmNoYXNlLnN5c3RlbS5pbmNsdWRlTGFzdENvbW1lcnMgJiZcbiAgICAgICAgICBwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdiA8IHNsb3dlc3RQcmV5LmFkanVzdGVkTW92XG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmV4Y2x1ZGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudEV4Y2x1ZGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuZGF0YS5leGNsdWRlZEJlY2F1c2UgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vU2xvdycpXG4gICAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5pc1ByZXkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGZhc3Rlc3RDaGFzZXIgJiZcbiAgICAgICAgICAhdGhpcy5jaGFzZS5zeXN0ZW0uaW5jbHVkZUVzY2FwZWQgJiZcbiAgICAgICAgICBwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdiA+IGZhc3Rlc3RDaGFzZXIuYWRqdXN0ZWRNb3ZcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZXNjYXBlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRFeGNsdWRlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLmRhdGEuZXhjbHVkZWRCZWNhdXNlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb0Zhc3QnKVxuICAgICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBpZiAoZGF0YS5kcm9wRGF0YSkge1xuICAgICAgY29uc3QgZG9jVXVpZCA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YShkYXRhLmRyb3BEYXRhKVxuICAgICAgaWYgKGRvY1V1aWQpIGRhdGEuZG9jVXVpZCA9IGRvY1V1aWRcbiAgICAgIGRlbGV0ZSBkYXRhLmRyb3BEYXRhXG4gICAgfVxuICAgIHJldHVybiBuZXcgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlcihkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERpYWxvZywgRHJhZ0Ryb3AsIEZvcm1EYXRhRXh0ZW5kZWQsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyIH0gZnJvbSAnLi4vLi4vYXBwcy9jaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vLi4vY2hhdC5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgX3BhcnRpY2lwYW50IH0gZnJvbSAnLi9wYXJ0aWNpcGFudC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZVNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2l0ZW0nLCAnY2hhc2UnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9jaGFzZS5odG1sJyxcbiAgICAgIHdpZHRoOiA1NTAsXG4gICAgICBoZWlnaHQ6IDUwMCxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdwYXJ0aWNpcGFudHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuXG4gICAgcmV0dXJuIG9wdGlvbnNcblxuICAgIC8vIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgIC8vIHN1Ym1pdE9uQ2xvc2U6IHRydWUsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyBnZXQgdHlwZSAoKSB7XG4gICAgcmV0dXJuICdjb2M3Q2hhc2VTaGVldCdcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKVxuXG4gICAgc2hlZXREYXRhLnBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5wYXJ0aWNpcGFudHNPYmplY3RcbiAgICBzaGVldERhdGEucGFydGljaXBhbnRzQnlJbml0aWF0aXZlID0gdGhpcy5pdGVtLnBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZVxuICAgIHNoZWV0RGF0YS5wcmV5cyA9IHRoaXMuaXRlbS5wcmV5c1xuICAgIHNoZWV0RGF0YS5jaGFzZXJzID0gdGhpcy5pdGVtLmNoYXNlcnNcblxuICAgIHNoZWV0RGF0YS5wcmV5c01pbk1vdiA9IHNoZWV0RGF0YS5wcmV5cy5sZW5ndGggPyBzaGVldERhdGEucHJleXMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXG5cbiAgICBzaGVldERhdGEucHJleXNNYXhNb3YgPSBzaGVldERhdGEucHJleXMubGVuZ3RoID8gc2hlZXREYXRhLnByZXlzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gcHJldi5hZGp1c3RlZE1vdiA+IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudCkuYWRqdXN0ZWRNb3YgOiAtMVxuXG4gICAgc2hlZXREYXRhLmNoYXNlcnNNaW5Nb3YgPSBzaGVldERhdGEuY2hhc2Vycy5sZW5ndGggPyBzaGVldERhdGEuY2hhc2Vycy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYuYWRqdXN0ZWRNb3YgPCBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnQpLmFkanVzdGVkTW92IDogLTFcblxuICAgIHNoZWV0RGF0YS5jaGFzZXJzTWF4TW92ID0gc2hlZXREYXRhLmNoYXNlcnMubGVuZ3RoID8gc2hlZXREYXRhLmNoYXNlcnMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXG5cbiAgICBzaGVldERhdGEuY2hhc2Vycy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWRqdXN0ZWRNb3YgPCBzaGVldERhdGEucHJleXNNaW5Nb3YpIHtcbiAgICAgICAgcC50b29TbG93KClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAuaW5jbHVkZUluQ2hhc2UoKVxuICAgICAgfVxuICAgICAgcC5mYXN0ZXN0ID0gcC5hZGp1c3RlZE1vdiA9PT0gc2hlZXREYXRhLmNoYXNlcnNNYXhNb3ZcbiAgICAgIHAuc2xvd2VzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5jaGFzZXJzTWluTW92XG4gICAgfSlcblxuICAgIHNoZWV0RGF0YS5wcmV5cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWRqdXN0ZWRNb3YgPiBzaGVldERhdGEuY2hhc2Vyc01heE1vdikge1xuICAgICAgICBwLmVzY2FwZWQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcC5pbmNsdWRlSW5DaGFzZSgpXG4gICAgICB9XG4gICAgICBwLmZhc3Rlc3QgPSBwLmFkanVzdGVkTW92ID09PSBzaGVldERhdGEucHJleXNNYXhNb3ZcbiAgICAgIHAuc2xvd2VzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5wcmV5c01pbk1vdlxuICAgIH0pXG5cbiAgICBzaGVldERhdGEubG9jYXRpb25zID0gdGhpcy5pdGVtLmxvY2F0aW9uc1xuICAgIHNoZWV0RGF0YS5hbGxIYXZlVmFsaWRNb3YgPSB0aGlzLmFsbEhhdmVWYWxpZE1vdlxuICAgIHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbiA9IHRoaXMuaXRlbS5hY3RpdmVMb2NhdGlvblxuICAgIGlmIChzaGVldERhdGEuYWN0aXZlTG9jYXRpb24pIHtcbiAgICAgIHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi50aXRsZSA9IHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi5jb29yZGluYXRlc1xuICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTG9jYXRpb25Db29yZGluYXRlJywge1xuICAgICAgICAgIHg6IHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi5jb29yZGluYXRlcy54LFxuICAgICAgICAgIHk6IHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi5jb29yZGluYXRlcy55XG4gICAgICAgIH0pXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRyYWdPbkNhbnZhcycpXG4gICAgfVxuICAgIHNoZWV0RGF0YS5wcmV2aW91c0xvY2F0aW9uID0gdGhpcy5pdGVtLnByZXZpb3VzTG9jYXRpb25cbiAgICBzaGVldERhdGEubmV4dExvY2F0aW9uID0gdGhpcy5pdGVtLm5leHRMb2NhdGlvblxuICAgIHNoZWV0RGF0YS5zdGFydGVkID0gdGhpcy5pdGVtLnN0YXJ0ZWRcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvLyBnZXQgYWN0aXZlUGFydGljaXBhbnQgKCkge1xuICAvLyAgIGlmICghdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpIHJldHVybiB1bmRlZmluZWRcbiAgLy8gICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmQocCA9PiBwLmFjdGl2ZSlcbiAgLy8gICBpZiAoIXBhcnRpY2lwYW50KSByZXR1cm4gdW5kZWZpbmVkXG4gIC8vICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnQpXG4gIC8vIH1cblxuICAvLyBnZXQgYWN0aXZlUGFydGljaXBhbnRMb2NhdGlvbiAoKSB7XG4gIC8vICAgaWYgKCF0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cykgcmV0dXJuIHVuZGVmaW5lZFxuICAvLyAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IHAuYWN0aXZlKVxuICAvLyB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBodG1sLmZpbmQoJy5jaGFzZS10cmFjaycpLnJlYWR5KGFzeW5jIGh0bWwgPT4gYXdhaXQgdGhpcy5fb25TaGVldFJlYWR5KGh0bWwpKVxuXG4gICAgLy8gSGFuZGxlIERyb3Byb3duXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5kcm9wZG93bi1lbGVtZW50JylcbiAgICAgIC5vbignY2xpY2snLCBldmVudCA9PiB0aGlzLl9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkKGV2ZW50KSlcblxuICAgIGh0bWwuZmluZCgnLmRyb3BidG4nKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgY29uc3QgZHJvcGRvd24gPSB0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duJylcbiAgICAgIGNvbnN0IGRyb3Bkb3duQ29udGVudCA9IGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcbiAgICAgIGRyb3Bkb3duQ29udGVudC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcbiAgICB9KVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGRvd24nKVxuICAgICAgLm1vdXNlbGVhdmUoZXZlbnQgPT5cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgICAgKVxuXG4gICAgaHRtbC5vbignZGJsY2xpY2snLCAnLm9wZW4tYWN0b3InLCBDb0M3Q2hhdC5fb25PcGVuQWN0b3IuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGluLWxvY2F0aW9uJylcbiAgICAgIC5jb250ZXh0bWVudSh0aGlzLmNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcy5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdlbnRlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnb3ZlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJvcCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcucC1zaWRlJykuY2xpY2sodGhpcy5fb25DaGFuZ2VTaWRlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXBhcnRpY2lwYW50JykuY2xpY2sodGhpcy5fb25EZWxldGVQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnJlc2V0LXJvbGwnKS5jbGljayh0aGlzLl9vblJlc2V0Um9sbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1kcml2ZXInKS5jbGljayh0aGlzLl9vbkRlbGV0ZURyaXZlci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnZW50ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdvdmVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2Ryb3AnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1zaWduJykuY2xpY2sodGhpcy5fb25BZGRQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcucm9sbC1wYXJ0aWNpcGFudCcpLmNsaWNrKHRoaXMuX29uUm9sbFBhcnRpY2lwYW50LmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5idXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbkNsaWNrLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5uYW1lLWNvbnRhaW5lcicpLmNsaWNrKHRoaXMuX29uTG9jYXRpb25DbGljay5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcub2JzdGFjbGUtdHlwZScpLmNsaWNrKHRoaXMuX29uT2JzdGFjbGVUeXBlQ2xpY2suYmluZCh0aGlzKSlcbiAgICAvLyBodG1sLmZpbmQoJy5vYnN0YWNsZS10b2dnbGUnKS5jbGljayh0aGlzLl9vbk9ic3RhY2xlVG9nZ2xlQ2xpY2suYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy50b2dnbGUnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQtY29udHJvbCcpXG4gICAgICAuY2xpY2sodGhpcy5fb25QYXJ0aWNpcGFudENvbnRyb2xDbGlja2VkLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5jaGFzZS1jb250cm9sJykuY2xpY2sodGhpcy5fb25DaGFzZUNvbnRyb2xDbGlja2VkLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLmxvY2F0aW9uLWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKHRoaXMuX29uTG9jYXRpb25Db250cm9sQ2xpY2suYmluZCh0aGlzKSlcbiAgICAvLyBodG1sXG4gICAgLy8gICAuZmluZCgnLm1vdmVtZW50LWFjdGlvbiAuZGVjcmVhc2UnKVxuICAgIC8vICAgLmNsaWNrKHRoaXMuX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zLmJpbmQodGhpcywgLTEpKVxuICAgIC8vIGh0bWxcbiAgICAvLyAgIC5maW5kKCcubW92ZW1lbnQtYWN0aW9uIC5pbmNyZWFzZScpXG4gICAgLy8gICAuY2xpY2sodGhpcy5fb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMuYmluZCh0aGlzLCAxKSlcblxuICAgIC8vIGh0bWxcbiAgICAvLyAuZmluZCgnLnBpbi1sb2NhdGlvbicpXG4gICAgLy8gLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0KGV2ZW50KSlcblxuICAgIGNvbnN0IHBpbkxvY2F0aW9uU2VsZWN0b3JEcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcmFnU2VsZWN0b3I6ICcucGluLWxvY2F0aW9uJyxcbiAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgIGRyYWdzdGFydDogdGhpcy5fY2FuUGluTG9jYXRpb25EcmFnU3RhcnQuYmluZCh0aGlzKVxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX29uUGluTG9jYXRpb25EcmFnU3RhcnQuYmluZCh0aGlzKVxuICAgICAgfVxuICAgIH0pXG4gICAgcGluTG9jYXRpb25TZWxlY3RvckRyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLnBhcnRpY2lwYW50JyxcbiAgICAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkRyb3BQYXJ0aWNpcGFudC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIHBhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgY29uc3QgbmV3UGFydGljaXBhbnREcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcm9wU2VsZWN0b3I6ICcubmV3LXBhcnRpY2lwYW50JyxcbiAgICAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkFkZFBhcnRpY2lwYW50LmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgbmV3UGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBpZiAodGhpcy5pdGVtLnN0YXJ0ZWQpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5jaGFzZS1sb2NhdGlvbiAuY2hhc2UtcGFydGljaXBhbnQnKVxuICAgICAgICAuY2xpY2sodGhpcy5fb25DaGFzZVBhcnRpY2lwYW50Q2xpY2suYmluZCh0aGlzKSlcblxuICAgICAgY29uc3QgY2hhc2VQYXJ0aWNpcGFudERyYWdwRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICAgIGRyYWdTZWxlY3RvcjogJy5jaGFzZS1wYXJ0aWNpcGFudCcsXG4gICAgICAgIGRyb3BTZWxlY3RvcjogJy5jaGFzZS1sb2NhdGlvbicsXG4gICAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0LmJpbmQodGhpcyksXG4gICAgICAgICAgZHJvcDogdGhpcy5fY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQodGhpcylcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQuYmluZCh0aGlzKSxcbiAgICAgICAgICBkcm9wOiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcC5iaW5kKHRoaXMpLFxuICAgICAgICAgIGRyYWdvdmVyOiB0aGlzLl9vbkRyYWdFbnRlci5iaW5kKHRoaXMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBjaGFzZVBhcnRpY2lwYW50RHJhZ3BEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZShldmVudCkpXG4gICAgfVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIEZvcm0gU3VibWlzc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKiogQG92ZXJyaWRlICovXG4gIF9nZXRTdWJtaXREYXRhICh1cGRhdGVEYXRhID0ge30pIHtcbiAgICAvLyBDcmVhdGUgdGhlIGV4cGFuZGVkIHVwZGF0ZSBkYXRhIG9iamVjdFxuICAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7IGVkaXRvcnM6IHRoaXMuZWRpdG9ycyB9KVxuICAgIGxldCBkYXRhID0gZmQub2JqZWN0XG4gICAgaWYgKHVwZGF0ZURhdGEpIHtcbiAgICAgIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGRhdGEsIHVwZGF0ZURhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChkYXRhKVxuICAgIH1cblxuICAgIC8vIENoZWNrIHRoYXQgc3RhcnRpbmcgcG9zaXRpb24gaXMgbm90IG91dHNpZGUgb2YgY2hhc2UgcmFuZ2UuXG4gICAgaWYgKFxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnM/Lmxpc3Q/Lmxlbmd0aCAmJlxuICAgICAgZGF0YS5zeXN0ZW0uc3RhcnRpbmdJbmRleCA+IHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgKSB7XG4gICAgICBkYXRhLnN5c3RlbS5zdGFydGluZ0luZGV4ID0gdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGhcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5zeXN0ZW0ucGFydGljaXBhbnRzKSB7XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIC8vIEhhbmRsZSBwYXJ0aWNpcGFudHMgYXJyYXlcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cykpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudHMuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSBrKVxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdQYXJ0aWNpcGFudCB0YWJsZSBjb3JydXB0ZWQnKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHBhcnRpY2lwYW50c1tpbmRleF1cbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odilcbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9yaWdpbmFsLCBjbGVhbmVkKVxuICAgICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0gPSBvcmlnaW5hbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cyA9IHBhcnRpY2lwYW50c1xuICAgIH1cblxuICAgIGlmIChkYXRhLmxvY2F0aW9ucykge1xuICAgICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgIC8vIEhhbmRsZSBsb2NhdGlvbnMgbGlzdFxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5sb2NhdGlvbnMpKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC51dWlkID09PSBrZXkpXG4gICAgICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0xvY2F0aW9ucyB0YWJsZSBjb3JydXB0ZWQnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTG9jYXRpb24gPSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF1cbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odmFsdWUpXG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChvcmlnaW5hbExvY2F0aW9uLCBjbGVhbmVkKVxuICAgICAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSA9IG9yaWdpbmFsTG9jYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkZWxldGUgZGF0YS5sb2NhdGlvbnNcbiAgICAgIGRhdGEuc3lzdGVtLmxvY2F0aW9ucyA9IHsgbGlzdDogbG9jYXRpb25zIH1cbiAgICB9XG4gICAgLy8gY29uc3QgcGFydGljaXBhbnRzID0gZGF0YS5zeXN0ZW0/LnBhcnRpY2lwYW50cztcbiAgICAvLyBpZiggcGFydGljaXBhbnRzKSBkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMgPSBPYmplY3QudmFsdWVzKCBwYXJ0aWNpcGFudHMpLm1hcCggcCA9PiBjbGVhbihwKSk7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGZsYXR0ZW5lZCBzdWJtaXNzaW9uIGRhdGFcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGRhdGEpXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIC8vIGFzeW5jIF9vblN1Ym1pdCguLi5hcmdzKSB7XG4gIC8vICBhd2FpdCBzdXBlci5fb25TdWJtaXQoLi4uYXJncyk7XG4gIC8vIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3Qgb3ZlcnJpZGUgPSB0YXJnZXQ/LmRhdGFzZXQ/Lm92ZXJyaWRlID09PSAndHJ1ZSdcbiAgICBpZiAodGFyZ2V0Py5uYW1lPy5pbmNsdWRlcygnLmhwJykpIHtcbiAgICAgIGNvbnN0IFssICwgdXVpZF0gPSB0YXJnZXQubmFtZS5zcGxpdCgnLicpXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5nZXRQYXJ0aWNpcGFudCh1dWlkKVxuICAgICAgaWYgKHBhcnRpY2lwYW50ICYmIHBhcnRpY2lwYW50LmFjdG9yKSB7XG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRhcmdldC52YWx1ZSkpKSB7XG4gICAgICAgICAgYXdhaXQgcGFydGljaXBhbnQuYWN0b3Iuc2V0SHAoTnVtYmVyKHRhcmdldC52YWx1ZSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG92ZXJyaWRlKSB7XG4gICAgICBjb25zdCBbLCB0eXBlLCB1dWlkLCBzdWJUeXBlLCBkYXRhXSA9IHRhcmdldC5uYW1lLnNwbGl0KCcuJylcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlID09PSAncGFydGljaXBhbnRzJyAmJlxuICAgICAgICAhaXNOYU4oaW5kZXgpICYmXG4gICAgICAgIHN1YlR5cGUgPT09ICdzcGVlZC1jaGVjaydcbiAgICAgICkge1xuICAgICAgICBpZiAoZGF0YSA9PT0gJ25hbWUnKSB7XG4gICAgICAgICAgLy8gQ2hhbmdpbmcgbmFtZSB3aWxsIHJlbW92ZSBhbGwgb3RoZXIgcmVmICFcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgICAgICAgIDogW11cbiAgICAgICAgICBpZiAocGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrKSB7XG4gICAgICAgICAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLmlkXG4gICAgICAgICAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLnR5cGVcbiAgICAgICAgICB9IGVsc2UgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrID0ge31cbiAgICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2submFtZSA9IHRhcmdldC52YWx1ZVxuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNldFNjcm9sbCAoYXBwLCBodG1sLCBkYXRhKSB7XG4gICAgaWYgKCFkYXRhLmVkaXRhYmxlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaW5pdGlhbE9wZW5pbmcgPSBodG1sWzBdLmNsYXNzTGlzdC5jb250YWlucygnd2luZG93LWFwcCcpXG4gICAgY29uc3QgY2hhc2VUcmFjayA9IGh0bWxbMF0ucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJylcbiAgICBpZiAoIWNoYXNlVHJhY2spIHJldHVyblxuXG4gICAgbGV0IHN0YXJ0ID0gZGF0YS5kYXRhLnNjcm9sbD8uY2hhc2VUcmFjay5mcm9tXG4gICAgbGV0IGVuZCA9IGRhdGEuZGF0YS5zY3JvbGw/LmNoYXNlVHJhY2sudG9cbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgc3RhcnQgPSAwXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZW5kID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZW5kID0gLTFcbiAgICB9XG5cbiAgICBpZiAoaW5pdGlhbE9wZW5pbmcpIHtcbiAgICAgIGNvbnN0IHJlbVN0cmluZyA9ICQoJzpyb290JykuY3NzKCdmb250LXNpemUnKVxuICAgICAgY29uc3QgcmVtU2l6ZSA9IE51bWJlcihyZW1TdHJpbmcucmVwbGFjZSgncHgnLCAnJykpXG4gICAgICBpZiAoYXBwLml0ZW0uc3RhcnRlZCkge1xuICAgICAgICBjb25zdCBwQ291bnQgPSBhcHAuaXRlbS5hY3R1YWxQYXJ0aWNpcGFudHM/Lmxlbmd0aFxuICAgICAgICBjb25zdCB3aWR0aCA9IChwQ291bnQgKiAxMS4yICsgMykgKiByZW1TaXplXG4gICAgICAgIGFwcC5hY3RpdmF0ZVRhYignc2V0dXAnKVxuICAgICAgICAvLyBhcHAuX3RhYnNbMF0uYWN0aXZlID0gJ3NldHVwJ1xuICAgICAgICBhcHAucG9zaXRpb24ud2lkdGggPSBNYXRoLm1heCh3aWR0aCwgNDAgKiByZW1TaXplKVxuICAgICAgICAvLyBodG1sLmNzcygnd2lkdGgnLCBgJHt3aWR0aH1weGApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcHAucG9zaXRpb24ud2lkdGggPSA0NSAqIHJlbVNpemVcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCBhcHAuaXRlbS5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oeyBodG1sIH0pIC8vIGh0bWwgaXMgbm90IHJlbmRlcmVkLCBlbGVtZW50IGhhdmUgc2l6ZSA9IDBcbiAgICAgIC8vIGlmIChlbmQgPiAwKSB7XG4gICAgICAvLyAgIHN0YXJ0ID0gMFxuICAgICAgLy8gfSBlbHNlIGlmIChzdGFydCA+IDApIHtcbiAgICAgIC8vICAgZW5kID0gc3RhcnRcbiAgICAgIC8vICAgc3RhcnQgPSAwXG4gICAgICAvLyB9XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ICYmIHN0YXJ0ICE9PSAtMSkge1xuICAgICAgY2hhc2VUcmFjay5zY3JvbGxUbyh7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogc3RhcnQsXG4gICAgICAgIGJlaGF2aW9yOiAnaW5zdGFudCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGVuZCAhPT0gLTEpIHtcbiAgICAgIGNoYXNlVHJhY2suc2Nyb2xsVG8oe1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IGVuZCxcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIGF3YWl0IGFwcC5pdGVtLnVwZGF0ZSh7ICdkYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0IH0pXG4gIH1cblxuICBzdGF0aWMgb25DbG9zZSAoYXBwLCBodG1sKSB7XG4gICAgYXBwLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS50cmFja1Njcm9sbFBvc2l0aW9uJzogLTEgfSlcbiAgfVxuXG4gIC8vIGFzeW5jIF9vblNoZWV0UmVhZHkgKGh0bWwpIHtcbiAgLy8gICBjb25zdCB0cmFjayA9IGh0bWwuZmluZCgnLmNoYXNlLXRyYWNrJylcbiAgLy8gICBjb25zdCBlbGVtZW50ID0gJCh0cmFjaykuZmluZCgnLmFjdGl2ZScpXG5cbiAgLy8gICBjb25zdCBlbGVtZW50bGVmdCA9IGVsZW1lbnRbMF0ub2Zmc2V0TGVmdFxuICAvLyAgIGNvbnN0IGRpdldpZHRoID0gdHJhY2tbMF0uY2xpZW50V2lkdGhcbiAgLy8gICBsZXQgZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA9IGVsZW1lbnRsZWZ0IC0gZGl2V2lkdGggLyAyXG4gIC8vICAgaWYgKGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPCAwKSBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0ID0gMFxuXG4gIC8vICAgY29uc3Qgc2Nyb2xsUG9zaXRpb24gPSB0aGlzLml0ZW0uc3lzdGVtLnRyYWNrU2Nyb2xsUG9zaXRpb25cbiAgLy8gICBpZiAoIXRyYWNrLmxlbmd0aCkgcmV0dXJuXG4gIC8vICAgaWYgKCFzY3JvbGxQb3NpdGlvbikgcmV0dXJuXG4gIC8vICAgY29uc3QgdHJhY2tFbGVtZW50ID0gdHJhY2tbMF1cbiAgLy8gICB0cmFja0VsZW1lbnQuc2Nyb2xsVG8oe1xuICAvLyAgICAgdG9wOiAwLFxuICAvLyAgICAgbGVmdDogZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCxcbiAgLy8gICAgIGJlaGF2aW9yOiAnaW5zdGFudCdcbiAgLy8gICB9KVxuXG4gIC8vICAgLy9UT0RPIDogY291bGRkIHVzZSBwYXJlbnQub2Zmc2V0VG9wIGV0IGNoaWxkLm9mZnNldFRvcCB0byBjZW50ZXIgdGhlIGFjdGl2ZSBlbGVtZW50XG5cbiAgLy8gICAvLyBjb25zdCBhY3RpdmUgPSBodG1sLmZpbmQoJy5uYW1lLWNvbnRhaW5lci5hY3RpdmUnKVxuICAvLyAgIC8vIGlmKCBhY3RpdmUpe1xuICAvLyAgIC8vICAgY29uc3QgZWxlbWVudCA9IGFjdGl2ZVswXVxuICAvLyAgIC8vICAgZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7YmVoYXZpb3I6IFwic21vb3RoXCIsIGJsb2NrOiBcImVuZFwiLCBpbmxpbmU6IFwiY2VudGVyXCJ9KVxuICAvLyAgIC8vIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpXG4gIC8vICAgLy8gfVxuICAvLyAgIC8vIH0pXG4gIC8vIH1cblxuICBmaW5kUGFydGljaXBhbnRJbmRleCAodXVpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBmaW5kTG9jYXRpb25JbmRleCAodXVpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0LmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGZpbmRMb2NhdGlvbiAodXVpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0LmZpbmQocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBmaW5kSW5kZXggKGxpc3QsIHV1aWQpIHtcbiAgICByZXR1cm4gbGlzdC5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50Jyk/LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxuICAgIGNvbnN0IGFzc2lzdGFudFV1aWQgPSB0YXJnZXQuY2xvc2VzdCgnLmluaXRpYXRpdmUtYmxvY2snKT8uZGF0YXNldD8udXVpZFxuICAgIGNvbnN0IGJlbmVmaWNpYXJ5VXVpZCA9IHRhcmdldC5kYXRhc2V0LmJlbmVmaWNpYXJ5VXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS5hc3Npc3RQYXJ0aWNpcGFudChhc3Npc3RhbnRVdWlkLCBiZW5lZmljaWFyeVV1aWQpXG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIC8vIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcubG9jYXRpb24ub2JzdGFjbGUnKVxuICAgIC8vIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgLy8gY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAvLyBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAgIGNvbnN0IHRvZ2dsZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RvZ2dsZScpXG4gICAgY29uc3QgZGF0YSA9IGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KHtcbiAgICAgIFt0b2dnbGVdOiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc3dpdGNoZWQtb24nKVxuICAgIH0pXG4gICAgaWYgKGRhdGEubG9jYXRpb25zKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5sb2NhdGlvbnMpKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC51dWlkID09PSBrZXkpXG4gICAgICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0xvY2F0aW9ucyB0YWJsZSBjb3JydXB0ZWQnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTG9jYXRpb24gPSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF1cbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odmFsdWUpXG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChvcmlnaW5hbExvY2F0aW9uLCBjbGVhbmVkKVxuICAgICAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSA9IG9yaWdpbmFsTG9jYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAgIH1cbiAgfVxuXG4gIC8vIGFzeW5jIF9vbk9ic3RhY2xlVG9nZ2xlQ2xpY2sgKGV2ZW50KSB7XG4gIC8vICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAvLyAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKVxuICAvLyAgIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gIC8vICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgLy8gICBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZSA9ICFsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVcbiAgLy8gICBpZiAoIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMpIHtcbiAgLy8gICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMgPSB7XG4gIC8vICAgICAgIGJhcnJpZXI6IHRydWVcbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAvLyB9XG5cbiAgYXN5bmMgX29uT2JzdGFjbGVUeXBlQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKVxuICAgIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAgIGlmICghbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscykge1xuICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscyA9IHt9XG4gICAgfVxuICAgIGNvbnN0IG9ic3RhY2xlID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlsc1xuICAgIGNvbnN0IHR5cGUgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiYXJyaWVyJykgPyAnYmFycmllcicgOiAnaGF6YXJkJ1xuICAgIGNvbnN0IGFjdGl2ZSA9IG9ic3RhY2xlW3R5cGVdXG4gICAgb2JzdGFjbGUuYmFycmllciA9IGZhbHNlXG4gICAgb2JzdGFjbGUuaGF6YXJkID0gZmFsc2VcbiAgICBvYnN0YWNsZVt0eXBlXSA9ICFhY3RpdmVcbiAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGUgPSAhYWN0aXZlXG4gICAgLy8gaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JhcnJpZXInKSkge1xuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyID0gIWxvY2F0aW9uc1tcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxuICAgIC8vICAgXS5vYnN0YWNsZURldGFpbHMuYmFycmllclxuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5oYXphcmQgPSAhbG9jYXRpb25zW1xuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyXG4gICAgLy8gfSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXphcmQnKSkge1xuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5oYXphcmQgPSAhbG9jYXRpb25zW1xuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5oYXphcmRcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuYmFycmllciA9ICFsb2NhdGlvbnNbXG4gICAgLy8gICAgIGxvY2F0aW9uSW5kZXhcbiAgICAvLyAgIF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZFxuICAgIC8vIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gIH1cblxuICBhc3luYyBfb25Mb2NhdGlvbkNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICBjb25zdCBsVXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBhd2FpdCB0aGlzLml0ZW0uYWN0aXZhdGVMb2NhdGlvbihsVXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2F0aW9uQ29udHJvbENsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luYWN0aXZlJykpIHJldHVyblxuICAgIGNvbnN0IGFjdGlvbiA9IHRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcuY2hhc2UtbG9jYXRpb24nKVxuICAgIGNvbnN0IGxVdWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdyZW1vdmUnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ucmVtb3ZlTG9jYXRpb24obFV1aWQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhZGQtYWZ0ZXInOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0uaW5zZXJ0TG9jYXRpb24obFV1aWQsIHsgc2hpZnQ6IDEgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnYWRkLWJlZm9yZSc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5pbnNlcnRMb2NhdGlvbihsVXVpZCwgeyBzaGlmdDogMCB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdhZGQtcGFydGljaXBhbnQnOlxuICAgICAgICBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyLmNyZWF0ZSh7XG4gICAgICAgICAgY2hhc2VVdWlkOiB0aGlzLml0ZW0udXVpZCxcbiAgICAgICAgICBsb2NhdGlvblV1aWQ6IGxVdWlkLFxuICAgICAgICAgIGRyb3BEYXRhOiB7fVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oYExvY2F0aW9uICR7bFV1aWR9IENsaWNrZWQuIEFjdGlvbjogJHthY3Rpb259YClcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnRDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCBwVXVpZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldD8udXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS5hY3RpdmF0ZVBhcnRpY2lwYW50KHBVdWlkKVxuICB9XG5cbiAgYXN5bmMgX29uUGFydGljaXBhbnRDb250cm9sQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZHJvcGRvd24nKSkgcmV0dXJuXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50VXVpZCA9IHRhcmdldC5jbG9zZXN0KCcuaW5pdGlhdGl2ZS1ibG9jaycpPy5kYXRhc2V0Py51dWlkXG4gICAgaWYgKCFwYXJ0aWNpcGFudFV1aWQpIHJldHVyblxuICAgIHN3aXRjaCAodGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdkcmF3R3VuJzpcbiAgICAgICAgYXdhaXQgdGhpcy50b2dnbGVQYXJ0aWNpcGFudEd1bihwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkZWNyZWFzZUFjdGlvbnMnOlxuICAgICAgICBhd2FpdCB0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucygtMSwgZXZlbnQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdpbmNyZWFzZUFjdGlvbnMnOlxuICAgICAgICBhd2FpdCB0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucygxLCBldmVudClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21vdmVCYWNrd2FyZCc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5tb3ZlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkLCAtMSwgeyByZW5kZXI6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21vdmVGb3J3YXJkJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLm1vdmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQsIDEsIHsgcmVuZGVyOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhY3RpdmF0ZVBhcnRpY2lwYW50JzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS5hY3RpdmF0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgIGNhc2UgJ2JvbnVzRGljZSc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBkaWNlTnVtYmVyID0gdGFyZ2V0LmRhdGFzZXQuY291bnRcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlQm9udXNEaWNlKHBhcnRpY2lwYW50VXVpZCwgZGljZU51bWJlcilcbiAgICAgICAgICB0aGlzLml0ZW0uYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2F1dGlvdXNBcHByb2FjaCc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5jYXV0aW91c0FwcHJvYWNoKHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2VkaXRQYXJ0aWNpcGFudCc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLml0ZW0uZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5jaGFzZVV1aWQgPSB0aGlzLml0ZW0udXVpZFxuICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEubG9jYXRpb25VdWlkID0gbG9jYXRpb24udXVpZFxuICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEudXBkYXRlID0gdHJ1ZVxuICAgICAgICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKHBhcnRpY2lwYW50LmRhdGEpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3JlbW92ZVBhcnRpY2lwYW50JzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnJlbW92ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgdGhpcy5pdGVtLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybigpXG4gIH1cblxuICBhc3luYyBfb25DaGFzZUNvbnRyb2xDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGxvY2F0aW9uVXVpZCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKT8uZGF0YXNldD8udXVpZFxuICAgIGlmICghbG9jYXRpb25VdWlkKSByZXR1cm5cbiAgICBzd2l0Y2ggKHRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnb2JzdGFjbGUtc2tpbGwtY2hlY2snOlxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtLmFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayhsb2NhdGlvblV1aWQpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zIChjb3VudCwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnRVdWlkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbml0aWF0aXZlLWJsb2NrJyk/LmRhdGFzZXQ/LnV1aWRcbiAgICBpZiAoIXBhcnRpY2lwYW50VXVpZCkgcmV0dXJuXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnBhcnRpY2lwYW50c1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzLmZpbmQocCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZClcbiAgICBpZiAocGFydGljaXBhbnQuaGFzTWF4TXZ0QWN0aW9ucyAmJiBjb3VudCA+IDApIHJldHVyblxuICAgIHBhcnRpY2lwYW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKGNvdW50KVxuXG4gICAgLy8gY29uc3Qgc2hlZXQgPSB0YXJnZXQuY2xvc2VzdCgnLmNvYzcuaXRlbS5jaGFzZScpXG4gICAgLy8gY29uc3QgY2hhc2VUcmFjayA9IHNoZWV0LnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpXG4gICAgLy8gaWYgKGNoYXNlVHJhY2spXG4gICAgLy8gICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHtcbiAgICAvLyAgICAgJ2RhdGEudHJhY2tTY3JvbGxQb3NpdGlvbic6IGNoYXNlVHJhY2suc2Nyb2xsTGVmdFxuICAgIC8vICAgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0uc2V0Y2hhc2VUcmFja1Njcm9sbCh7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cylcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbkNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSB0YXJnZXQuZGF0YXNldD8uYWN0aW9uXG4gICAgaWYgKCFhY3Rpb24pIHJldHVyblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdpbml0JzpcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFpc05hTih0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy50b3RhbCkgJiZcbiAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy50b3RhbCA+IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgbG9jYXRpb25zID0gQXJyYXkuYXBwbHkoXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgQXJyYXkodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMudG90YWwpXG4gICAgICAgICAgKS5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdXVpZDogZm91bmRyeS51dGlscy5yYW5kb21JRCgxNikgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgbG9jYXRpb25zWzBdLm5hbWUgPSAnU3RhcnQnXG4gICAgICAgICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAxKSBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdLm5hbWUgPSAnRW5kJ1xuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZXNldCc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXNldENoYXNlJyl9YCxcbiAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybVJlc2V0Q2hhc2VIaW50Jyl9PC9wPmAsXG4gICAgICAgICAgeWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChbXSlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS5zdG9wKClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2N1dDJjaGFzZSc6XG4gICAgICAgIGlmICh0aGlzLml0ZW0uYWxsSGF2ZVNwZWVkUm9sbCkge1xuICAgICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybUN1dDJDaGFzZScpfWAsXG4gICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LkNvbmZpcm1DdXQyQ2hhc2VIaW50J1xuICAgICAgICAgICAgKX08L3A+YCxcbiAgICAgICAgICAgIHllczogKCkgPT4gdGhpcy5pdGVtLmN1dFRvVGhlQ2hhc2UoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RBbGxIYXZlU3BlZWRSb2xsJykpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncmVzdGFydCc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2UnKX1gLFxuICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2VIaW50J1xuICAgICAgICAgICl9PC9wPmAsXG4gICAgICAgICAgeWVzOiAoKSA9PiB0aGlzLml0ZW0ucmVzdGFydCgpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ25leHRSb3VuZCc6XG4gICAgICAgIGlmICh0aGlzLml0ZW0ubmV4dEFjdGl2ZVBhcnRpY2lwYW50KSB7XG4gICAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtTmV4dENoYXNlUm91bmQnKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5Db25maXJtTmV4dENoYXNlUm91bmRIaW50J1xuICAgICAgICAgICAgKX08L3A+YCxcbiAgICAgICAgICAgIHllczogKCkgPT4gdGhpcy5pdGVtLnByb2dyZXNzVG9OZXh0Um91bmQoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB0aGlzLml0ZW0ucHJvZ3Jlc3NUb05leHRSb3VuZCgpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgX2NhblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IChzZWxlY3Rvcikge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIF9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgaSA9IGEucXVlcnlTZWxlY3RvcignaS5pY29uJylcbiAgICBjb25zdCBkcmFnSWNvbiA9IGEucXVlcnlTZWxlY3RvcignLnBpbi1pbWFnZScpXG5cbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGRyYWdJY29uLCAwLCBkcmFnSWNvbi5oZWlnaHQpXG5cbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSBhLmNsb3Nlc3QoJy5jaGFzZS1sb2NhdGlvbicpXG4gICAgY29uc3QgZGF0YSA9IHt9XG5cbiAgICBkYXRhLnR5cGUgPSAnbG9jYXRvcidcbiAgICBkYXRhLkNvQzdUeXBlID0gJ2NoYXNlJ1xuICAgIGRhdGEuaWNvbiA9IGkuZGF0YXNldC5saW5rSWNvblxuICAgIGRhdGEubG9jYXRpb25VdWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGRhdGEuZG9jVXVpZCA9IHRoaXMuaXRlbS51dWlkXG4gICAgZGF0YS5jYWxsQmFjayA9ICdsb2NhdG9yRHJvcHBlZCdcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuXG4gICAgLy8gY29uc3QgZHJhZ0RhdGEgPSB7IHV1aWQ6IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWQsIGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQgfVxuICAgIC8vIGRyYWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgfVxuXG4gIF9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0IChzZWxlY3Rvcikge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIF9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AgKHNlbGVjdG9yKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCAoZHJhZ0V2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZHJhZ0V2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkcmFnRGF0YSA9IHsgdXVpZDogdGFyZ2V0LmRhdGFzZXQudXVpZCwgdHlwZTogJ3BhcnRpY2lwYW50JyB9XG4gICAgZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIChkcmFnRXZlbnQpIHtcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdEcm9wcGVkJylcbiAgICB0aGlzLl9vbkRyYWdMZWF2ZShkcmFnRXZlbnQpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uVXVpZCA9IHRhcmdldC5kYXRhc2V0LnV1aWRcblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdwYXJ0aWNpcGFudCcpIHtcbiAgICAgIGNvbnN0IG9sZExvY2F0aW9uID0gdGhpcy5maW5kTG9jYXRpb24obG9jYXRpb25VdWlkKVxuICAgICAgaWYgKG9sZExvY2F0aW9uKSB7XG4gICAgICAgIGlmIChvbGRMb2NhdGlvbi5wYXJ0aWNpcGFudHM/LmluY2x1ZGVzKGRhdGEudXVpZCkpIHJldHVyblxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnNldGNoYXNlVHJhY2tTY3JvbGwoeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgICBhd2FpdCB0aGlzLml0ZW0ubW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbihkYXRhLnV1aWQsIGxvY2F0aW9uVXVpZClcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlci5jcmVhdGUoe1xuICAgICAgICBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkLFxuICAgICAgICBsb2NhdGlvblV1aWQsXG4gICAgICAgIGRyb3BEYXRhOiBkYXRhXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdPdmVyIChkcmFnRXZlbnQpIHtcbiAgICB0aGlzLl9vbkRyYWdFbnRlcihkcmFnRXZlbnQpXG4gIH1cblxuICBfb25EcmFnRW50ZXIgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBfb25EcmFnTGVhdmUgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdD8ucmVtb3ZlKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB1dWlkID0gdGFyZ2V0LmRhdGFzZXQ/LnV1aWRcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgYXdhaXQgdGhpcy5hbHRlclBhcnRpY2lwYW50KGRhdGEsIHV1aWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZGF0YSA9IHsgY2hhc2VVdWlkOiB0aGlzLml0ZW0udXVpZCB9XG4gICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlcikge1xuICAgICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICAgIGRhdGEuZHJvcERhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgfVxuICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKGRhdGEpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50RWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudEVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnRzW2luZGV4XSlcbiAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZTZXQpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIHJvbGwucGFyZW50ID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsVXVpZCA9IHJvbGwudXVpZFxuICAgICAgcm9sbC5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5ICYmIHBhcnRpY2lwYW50LmFjdG9yLnBsYXllcikge1xuICAgICAgICByb2xsLnN0YW5kYnkgPSB0cnVlXG4gICAgICAgIHJvbGwuc3RhbmRieVRleHQgPSAnQ29DNy5DaGFzZSdcbiAgICAgICAgcm9sbC5zdGFuZGJ5UmlnaHRJY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcnVubmluZy1zb2xpZC5zdmcnXG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQ2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQ2hhcmFjdGVyaXN0aWMocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc1NraWxsKSB7XG4gICAgICAgIHJvbGwuc2tpbGwgPSBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlxuICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0F0dHJpYnV0ZSkge1xuICAgICAgICBhd2FpdCByb2xsLnJvbGxBdHRyaWJ1dGUocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUpIHtcbiAgICAgIGNvbnN0IHJvbGxEYXRhID0ge1xuICAgICAgICByYXdWYWx1ZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSxcbiAgICAgICAgZGlzcGxheU5hbWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2submFtZSxcbiAgICAgICAgYWN0b3JOYW1lOiBwYXJ0aWNpcGFudC5uYW1lID8gcGFydGljaXBhbnQubmFtZSA6IHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgaWYgKHBhcnRpY2lwYW50Lmhhc0FjdG9yKSByb2xsRGF0YS5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmNyZWF0ZShyb2xsRGF0YSlcbiAgICAgIHJvbGwucGFyZW50ID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbFV1aWQgPSByb2xsLnV1aWRcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIF9vbkRyYWdFbnRlclBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIF9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZVNpZGUgKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgdGVzdCA9IGF3YWl0IGZyb21VdWlkKCAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5uQ2RvQ3lvaXVkdGpyTmt1Jyk7XG4gICAgLy8gY29uc3QgaXRlbVRlc3QgPSBhd2FpdCBmcm9tVXVpZCggJ0l0ZW0ucGxJRW1OUlA2TzdQdmVOdi5yb2xsLnEyc0F6c0h0NEZzcXNkZkQnKTtcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLmNoYXNlciA9ICFwYXJ0aWNpcGFudHNbaW5kZXhdLmNoYXNlclxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlRHJpdmVyIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkcml2ZXIgPSB0YXJnZXQuY2xvc2VzdCgnLmRyaXZlcicpXG4gICAgY29uc3QgdXVpZCA9IGRyaXZlci5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50c1tpbmRleF1cbiAgICBkZWxldGUgcGFydGljaXBhbnQuZG9jVXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50cy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBfb25SZXNldFJvbGwgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIGFsdGVyUGFydGljaXBhbnQgKGRhdGEsIHV1aWQpIHtcbiAgICBsZXQgZG9jVXVpZCwgYWN0b3JcbiAgICBpZiAoZGF0YS50b2tlblV1aWQpIGRvY1V1aWQgPSBkYXRhLnRva2VuVXVpZFxuICAgIGVsc2Uge1xuICAgICAgZG9jVXVpZCA9XG4gICAgICAgIGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWRcbiAgICAgICAgICA/IGBTY2VuZS4ke2RhdGEuc2NlbmVJZH0uVG9rZW4uJHtkYXRhLnRva2VuSWR9YFxuICAgICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXkgfHwgZGF0YS5pZFxuICAgIH1cblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdUb2tlbicpIHtcbiAgICAgIGRvY1V1aWQgPSBkYXRhLnV1aWRcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcbiAgICAgIGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoZG9jVXVpZClcbiAgICAgIGlmICghYWN0b3IgJiYgZGF0YS50eXBlID09PSAnSXRlbScpIGRvY1V1aWQgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKGFjdG9yICYmIGRvY1V1aWQgIT09IGFjdG9yLnV1aWQpIHtcbiAgICAgIGRvY1V1aWQgPSBhY3Rvci51dWlkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB7fVxuICAgIGlmIChkb2NVdWlkKSBwYXJ0aWNpcGFudC5kb2NVdWlkID0gZG9jVXVpZFxuXG4gICAgc3dpdGNoIChkYXRhLnR5cGU/LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2FjdG9yJzpcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLmRhdGE/Ll9pZCB8fCBkYXRhLmlkLFxuICAgICAgICAgIHR5cGU6ICdpdGVtJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpYyc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2F0dHJpYnV0ZSc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnYXR0cmlidXRlJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgLy8gVE9ETzpDaGVjayBmb3Igc3BlZWQgY2hlY2ssIGlmIG5vbmUgYWRkIHNwZWVkY2hlY2tcbiAgICAvLyBzcGVlZENoZWNrID0ge1xuICAgIC8vICAgaWQ6ICdzdHInXG4gICAgLy8gICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgLy8gfVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgIGlmIChvbGRQYXJ0aWNpcGFudC5tb3YpIGRlbGV0ZSBvbGRQYXJ0aWNpcGFudC5tb3ZcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9sZFBhcnRpY2lwYW50LCBwYXJ0aWNpcGFudClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIGNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcyAoKSB7XG4gICAgYXdhaXQgdGhpcy5pdGVtLmNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcygpXG4gIH1cblxuICBhc3luYyBhZGRQYXJ0aWNpcGFudCAoZGF0YSkge1xuICAgIC8vIGxldCBwcm91dCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgIC8vICAgJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uUXlGVGlpRVppWDl2VGZpQydcbiAgICAvLyApXG4gICAgLy8gcHJvdXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShcbiAgICAvLyAgICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLnViTHpoZTU3Sk9USE1JcjknXG4gICAgLy8gKVxuICAgIC8vIHByb3V0ID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoJ0FjdG9yLnVpWTNjYXBTVWVMTHZTTGknKVxuICAgIC8vIHByb3V0ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLlF5RlRpaUVaaVg5dlRmaUMuSXRlbS5Hck9IZUxYZmVFcGhzUk1aJylcbiAgICAvLyBwcm91dCA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCBcIlNjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uWXFzTlFQRGhGQ1BsU1JxSlwiKVxuICAgIC8vIHByb3V0ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoIFwiU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ZcXNOUVBEaEZDUGxTUnFKLkl0ZW0uOEpFblRqSk9HRlhtbDR3a1wiKVxuXG4gICAgLy8gdHJ5IHRvIGZpbmQgYSB2YWxpZCBkb2N1bWVudFxuICAgIGxldCBkb2NVdWlkLCBhY3RvclxuICAgIGlmIChkYXRhLnRva2VuVXVpZCkgZG9jVXVpZCA9IGRhdGEudG9rZW5VdWlkXG4gICAgZWxzZSB7XG4gICAgICBkb2NVdWlkID1cbiAgICAgICAgZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZFxuICAgICAgICAgID8gYFNjZW5lLiR7ZGF0YS5zY2VuZUlkfS5Ub2tlbi4ke2RhdGEudG9rZW5JZH1gXG4gICAgICAgICAgOiBkYXRhLmFjdG9ySWQgfHwgZGF0YS5hY3RvcktleSB8fCBkYXRhLmlkXG4gICAgfVxuXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ1Rva2VuJykge1xuICAgICAgZG9jVXVpZCA9IGRhdGEudXVpZFxuICAgIH0gZWxzZSBpZiAoZG9jVXVpZCkge1xuICAgICAgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShkb2NVdWlkKVxuICAgICAgaWYgKCFhY3RvciAmJiBkYXRhLnR5cGUgPT09ICdJdGVtJykgZG9jVXVpZCA9IG51bGxcbiAgICB9XG5cbiAgICBpZiAoYWN0b3IgJiYgZG9jVXVpZCAhPT0gYWN0b3IudXVpZCkge1xuICAgICAgZG9jVXVpZCA9IGFjdG9yLnV1aWRcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHt9XG4gICAgaWYgKGRvY1V1aWQpIHBhcnRpY2lwYW50LmRvY1V1aWQgPSBkb2NVdWlkXG5cbiAgICBzd2l0Y2ggKGRhdGEudHlwZT8udG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAnYWN0b3InOlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgIGlmIChkYXRhLmlkKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KGRhdGEuaWQpXG4gICAgICAgICAgaWYgKGl0ZW0/LmRhdGE/LnR5cGUgIT09ICdza2lsbCcpIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5kYXRhPy5faWQgfHwgZGF0YS5pZCxcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWMnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2F0dHJpYnV0ZSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIC8vIFRPRE86Q2hlY2sgZm9yIHNwZWVkIGNoZWNrLCBpZiBub25lIGFkZCBzcGVlZGNoZWNrIGNvbiBub24gdmVoaWNsZSwgZHJpdmUgYXV0byBmb3IgdmVoaWNsZVxuICAgIC8vIHNwZWVkQ2hlY2sgPSB7XG4gICAgLy8gICBpZDogJ2NvbidcbiAgICAvLyAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAvLyB9XG5cbiAgICBpZiAoIXBhcnRpY2lwYW50LnNwZWVkQ2hlY2spIHtcbiAgICAgIGlmICghdGhpcy5pdGVtLnN5c3RlbS52ZWhpY2xlKSB7XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6ICdjb24nLFxuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsXG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQ29uc3RpdHV0aW9uJylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICB0eXBlOiAnaXRlbScsXG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuZHJpdmUtYXV0bycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBsZXQgdW5pcXVlID0gZmFsc2VcbiAgICB3aGlsZSAoIXVuaXF1ZSkge1xuICAgICAgcGFydGljaXBhbnQudXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgICB1bmlxdWUgPVxuICAgICAgICBwYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gcC51dWlkID09PSBwYXJ0aWNpcGFudC51dWlkKS5sZW5ndGggPT09IDBcbiAgICB9XG5cbiAgICBwYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVBhcnRpY2lwYW50R3VuIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50cy5maW5kKHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWQpXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkgcmV0dXJuXG4gICAgcGFydGljaXBhbnQuaGFzQUd1blJlYWR5ID0gIXBhcnRpY2lwYW50Lmhhc0FHdW5SZWFkeVxuICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbiAob2JqKSB7XG4gIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gb2JqKSB7XG4gICAgY29uc3QgdHAgPSBmb3VuZHJ5LnV0aWxzLmdldFR5cGUob2JqW3Byb3BOYW1lXSlcbiAgICBpZiAodHAgPT09ICdPYmplY3QnKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gY2xlYW4ob2JqW3Byb3BOYW1lXSlcbiAgICB9XG5cbiAgICBpZiAodHAgPT09ICdPYmplY3QnICYmICFPYmplY3QuZW50cmllcyhvYmpbcHJvcE5hbWVdKS5sZW5ndGgpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBudWxsXG4gICAgfSBlbHNlIGlmICh0cCA9PT0gJ3N0cmluZycgJiYgIW9ialtwcm9wTmFtZV0ubGVuZ3RoKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gbnVsbFxuICAgIH0gZWxzZSBpZiAodHAgPT09ICdzdHJpbmcnICYmICFpc05hTihOdW1iZXIob2JqW3Byb3BOYW1lXSkpKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gTnVtYmVyKG9ialtwcm9wTmFtZV0pXG4gICAgfVxuICB9XG4gIHJldHVybiBvYmpcbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi8uLi9hY3RpdmUtZWZmZWN0LmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0VjIgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnaXRlbSddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2l0ZW0tc2hlZXRWMi5odG1sJyxcbiAgICAgIHdpZHRoOiA1MDAsXG4gICAgICBoZWlnaHQ6IDQ1MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKVxuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPSBDb0M3QWN0aXZlRWZmZWN0LnByZXBhcmVBY3RpdmVFZmZlY3RDYXRlZ29yaWVzKHRoaXMuaXRlbS5lZmZlY3RzLCB7IHN0YXR1czogZmFsc2UgfSlcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuaXRlbSkpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5ICovXG5cbmltcG9ydCB7IENvQzdJdGVtU2hlZXRWMiB9IGZyb20gJy4vaXRlbS1zaGVldFYyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0IGV4dGVuZHMgQ29DN0l0ZW1TaGVldFYyIHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDUwNlxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBKb3VybmFsU2hlZXQgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Sm91cm5hbFNoZWV0IGV4dGVuZHMgSm91cm5hbFNoZWV0IHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBNYWNyb0NvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdNYWNyb0NvbmZpZyBleHRlbmRzIE1hY3JvQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBQbGF5bGlzdENvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdQbGF5bGlzdENvbmZpZyBleHRlbmRzIFBsYXlsaXN0Q29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBSb2xsVGFibGVDb25maWcgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Um9sbFRhYmxlQ29uZmlnIGV4dGVuZHMgUm9sbFRhYmxlQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBTY2VuZUNvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTY2VuZUNvbmZpZyBleHRlbmRzIFNjZW5lQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IERyb3BDb0NJRCB9IGZyb20gJy4uLy4uL2FwcHMvZHJvcC1jb2MtaWQuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1NldHVwU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdpdGVtcycpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnaXRlbXMnKSlcbiAgICBodG1sLmZpbmQoJy5hZGQtYmlvJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRCaW8oKSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtc2VjdGlvbicpLmNsaWNrKHRoaXMuX29uUmVtb3ZlU2VjdGlvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuYWRkLW1vbmV0YXJ5JykuY2xpY2sodGhpcy5fb25BZGRNb25ldGFyeS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1tb25ldGFyeScpLmNsaWNrKHRoaXMuX29uUmVtb3ZlTW9uZXRhcnkuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgcHJvcGVydHlJZCxcbiAgICAgIGlzQ3RybEtleShldmVudClcbiAgICApXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcbiAgICAgIGlmICghWydpdGVtJywgJ3dlYXBvbicsICdza2lsbCcsICdib29rJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh1c2VDb0NJRCA9PT0gMCkge1xuICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgfVxuICAgICAgY29sbGVjdGlvbi5wdXNoKERyb3BDb0NJRC5wcm9jZXNzSXRlbSh1c2VDb0NJRCwgaXRlbSkpXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlbW92ZVNlY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkaXYgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmJpb1NlY3Rpb25zKVxuICAgIGJpby5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5iaW9TZWN0aW9ucyc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQmlvICgpIHtcbiAgICBjb25zdCBiaW8gPSB0aGlzLml0ZW0uc3lzdGVtLmJpb1NlY3Rpb25zID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5iaW9TZWN0aW9ucykgOiBbXVxuICAgIGJpby5wdXNoKG51bGwpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvU2VjdGlvbnMnOiBiaW8gfSlcbiAgfVxuXG4gIF9vbkFkZE1vbmV0YXJ5ICgpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLml0ZW0uc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKSA6IFtdXG4gICAgdmFsdWVzLnB1c2goe1xuICAgICAgbmFtZTogJycsXG4gICAgICBtaW46IG51bGwsXG4gICAgICBtYXg6IG51bGwsXG4gICAgICBjYXNoVHlwZTogMCxcbiAgICAgIGNhc2hWYWx1ZTogJycsXG4gICAgICBhc3NldHNUeXBlOiAwLFxuICAgICAgYXNzZXRzVmFsdWU6ICcnLFxuICAgICAgc3BlbmRpbmdUeXBlOiAwLFxuICAgICAgc3BlbmRpbmdWYWx1ZTogJydcbiAgICB9KVxuICAgIHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyc6IHZhbHVlcyB9KVxuICB9XG5cbiAgX29uUmVtb3ZlTW9uZXRhcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkaXYgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCB2YWx1ZXMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcylcbiAgICB2YWx1ZXMuc3BsaWNlKE51bWJlcihkaXYuZGF0YXNldC5pbmRleCksIDEpXG4gICAgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBhc3luYyBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICB9KVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiB0aGlzLml0ZW0uZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3NldHVwJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc2V0dXAuaHRtbCcsXG4gICAgICB3aWR0aDogNTY1LFxuICAgICAgaGVpZ2h0OiA1MzAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuXG4gICAgY29uc3QgZXJhID0gT2JqZWN0LmVudHJpZXModGhpcy5pdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pXG5cbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogdGhpcy5pdGVtLnN5c3RlbS5pdGVtcywgZXJhOiAodHlwZW9mIGVyYVswXSAhPT0gJ3VuZGVmaW5lZCcgPyBlcmFbMF0gOiB0cnVlKSB9KVxuXG4gICAgc2hlZXREYXRhLnNraWxscyA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgIHNoZWV0RGF0YS5vdGhlckl0ZW1zID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgIT09ICdza2lsbCcpXG5cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuICAgIHNoZWV0RGF0YS5pdGVtc0xpc3RFbXB0eSA9IHNoZWV0RGF0YS5vdGhlckl0ZW1zLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6ICh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeUZvcm1hdHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlGb3JtYXRzKSB7XG4gICAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5Rm9ybWF0c1trZXldKSB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5zaG93Q3VycmVuY3lTeW1ib2wgPSBbJ2RlY2ltYWxMZWZ0JywgJ2RlY2ltYWxSaWdodCcsICdpbnRlZ2VyTGVmdCcsICdpbnRlZ2VyUmlnaHQnXS5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KVxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeVR5cGVzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBDT0M3Lm1vbmV0YXJ5VHlwZXMpIHtcbiAgICAgIGlmIChDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5maWx0ZXIubGVuZ3RoID09PSAwIHx8IENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KSkge1xuICAgICAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMucHVzaCh7IGtleSwgdmFsOiBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5tb25ldGFyeVR5cGVzW2tleV0ubmFtZSkgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmFja3N0b3J5ID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJhY2tzdG9yeSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmJpb1NlY3Rpb25zKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmJpb1NlY3Rpb25zJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uYmlvU2VjdGlvbnMgfHwgW11cbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHN5c3RlbS5tb25ldGFyeS52YWx1ZXMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJ10gPSBPYmplY3QudmFsdWVzKHN5c3RlbS5tb25ldGFyeS52YWx1ZXMgfHwgW10pXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCddID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2hlY2tlZFxuICAgIH1cblxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Py5uYW1lID09PSAnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQnXSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LmNoZWNrZWRcbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uLy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2tpbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncylcbiAgICB0aGlzLl9zaGVldFRhYiA9ICdpdGVtcydcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnaXRlbSddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gYHN5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvJHt0aGlzLml0ZW0udHlwZX0tc2hlZXQuaHRtbGBcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICAvLyB0aGlzLml0ZW0uY2hlY2tTa2lsbFByb3BlcnRpZXMoKTtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmhhZE5vbkNoYXJhY3Rlck93bmVyID0gc2hlZXREYXRhLmhhc093bmVyICYmIHRoaXMuYWN0b3I/LnR5cGUgIT09ICdjaGFyYWN0ZXInXG5cbiAgICBzaGVldERhdGEuZWZmZWN0cyA9IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMoXG4gICAgICB0aGlzLml0ZW0uZWZmZWN0c1xuICAgIClcblxuICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMucHVzaCh7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IHZhbHVlLFxuICAgICAgICBpc0VuYWJsZWQ6IHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6ICh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLmlzU3BlY2lhbGl6ZWQgPSB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgIHNoZWV0RGF0YS5jYW5Nb2RpZnlTcGVjID1cbiAgICAgICF0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSAmJlxuICAgICAgIXRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZ1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgKVxuICB9XG5cbiAgLy8gYXN5bmMgX29uQ2xpY2tBdHRyaWJ1dGVDb250cm9sKGV2ZW50KSB7XG4gIC8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgLy8gICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uO1xuICAvLyAgIGNvbnN0IGF0dHJzID0gdGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXM7XG4gIC8vICAgY29uc3QgZm9ybSA9IHRoaXMuZm9ybTtcblxuICAvLyAgIC8vIEFkZCBuZXcgYXR0cmlidXRlXG4gIC8vICAgaWYgKGFjdGlvbiA9PT0gXCJjcmVhdGVcIikge1xuICAvLyAgICAgY29uc3QgbmsgPSBPYmplY3Qua2V5cyhhdHRycykubGVuZ3RoICsgMTtcbiAgLy8gICAgIGxldCBuZXdLZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAvLyAgICAgbmV3S2V5LmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiZGF0YS5hdHRyaWJ1dGVzLmF0dHIke25rfS5rZXlcIiB2YWx1ZT1cImF0dHIke25rfVwiLz5gO1xuICAvLyAgICAgbmV3S2V5ID0gbmV3S2V5LmNoaWxkcmVuWzBdO1xuICAvLyAgICAgZm9ybS5hcHBlbmRDaGlsZChuZXdLZXkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlbW92ZSBleGlzdGluZyBhdHRyaWJ1dGVcbiAgLy8gICBlbHNlIGlmIChhY3Rpb24gPT09IFwiZGVsZXRlXCIpIHtcbiAgLy8gICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KFwiLmF0dHJpYnV0ZVwiKTtcbiAgLy8gICAgIGxpLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQobGkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAvLyBfdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSkge1xuICAvLyAgIC8vIEhhbmRsZSB0aGUgZnJlZS1mb3JtIGF0dHJpYnV0ZXMgbGlzdFxuICAvLyAgIGNvbnN0IGZvcmQgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChmb3JtRGF0YSk7XG4gIC8vICAgY29uc3QgZm9ybUF0dHJzID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpLmRhdGEuYXR0cmlidXRlcyB8fCB7fTtcbiAgLy8gICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LnZhbHVlcyhmb3JtQXR0cnMpLnJlZHVjZSgob2JqLCB2KSA9PiB7XG4gIC8vICAgICBsZXQgayA9IHZbXCJrZXlcIl0udHJpbSgpO1xuICAvLyAgICAgaWYgKC9bXFxzXFwuXS8udGVzdChrKSkgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXCJBdHRyaWJ1dGUga2V5cyBtYXkgbm90IGNvbnRhaW4gc3BhY2VzIG9yIHBlcmlvZHNcIik7XG4gIC8vICAgICBkZWxldGUgdltcImtleVwiXTtcbiAgLy8gICAgIG9ialtrXSA9IHY7XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHt9KTtcblxuICAvLyAgIC8vIFJlbW92ZSBhdHRyaWJ1dGVzIHdoaWNoIGFyZSBubyBsb25nZXIgdXNlZFxuICAvLyAgIGZvciAobGV0IGsgb2YgT2JqZWN0LmtleXModGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXMpKSB7XG4gIC8vICAgICBpZiAoIWF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoaykpIGF0dHJpYnV0ZXNbYC09JHtrfWBdID0gbnVsbDtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBSZS1jb21iaW5lIGZvcm1EYXRhXG4gIC8vICAgZm9ybURhdGEgPSBPYmplY3QuZW50cmllcyhmb3JtRGF0YSkuZmlsdGVyKGUgPT4gIWVbMF0uc3RhcnRzV2l0aChcImRhdGEuYXR0cmlidXRlc1wiKSkucmVkdWNlKChvYmosIGUpID0+IHtcbiAgLy8gICAgIG9ialtlWzBdXSA9IGVbMV07XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHsgX2lkOiB0aGlzLm9iamVjdC5faWQsIFwiZGF0YS5hdHRyaWJ1dGVzXCI6IGF0dHJpYnV0ZXMgfSk7XG5cbiAgLy8gICAvLyBVcGRhdGUgdGhlIEl0ZW1cbiAgLy8gICByZXR1cm4gdGhpcy5vYmplY3QudXBkYXRlKGZvcm1EYXRhKTtcbiAgLy8gfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHNraWxsTmFtZSA9IGZvcm1EYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gfHwgdGhpcy5pdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XG4gICAgICBjb25zdCBzcGVjaWFsaXphdGlvbiA9IGZvcm1EYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSB8fCB0aGlzLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICBmb3JtRGF0YS5uYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1EYXRhLm5hbWUgPSBza2lsbE5hbWVcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NwZWxsU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL21haW4uaHRtbCcsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnaXRlbScsICdzcGVsbCddLFxuICAgICAgd2lkdGg6IDUwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIHNjcm9sbFk6IFsnLmJvZHknXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLm5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmlzT3duZXIgPSB0aGlzLml0ZW0uaXNPd25lclxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5vcHRpb24nKS5jbGljayhldmVudCA9PiB0aGlzLm1vZGlmeVR5cGUoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnI2Nhc3Qtc3BlbGwnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLml0ZW0uY2FzdChmYWxzZSlcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI2Nhc3Qtc3BlbGwtaGlkZGVuJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgdGhpcy5pdGVtLmNhc3QodHJ1ZSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgY2hlY2tib3hlcyBmb3IgdHlwZSB3aGVuIHVzZXIgY2xpY2tzIG9uIHRoZSBjb3JyZXNwb25kaW5nXG4gICAqIGxhYmVsLCBub3Qgc3VyZSBpZiB0aGlzIHdvcmtzIG9uIGVuZ2luZXMgb3RoZXIgdGhhbiBWOFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7alF1ZXJ5LkV2ZW50fSBjbGlja1xuICAgKi9cbiAgbW9kaWZ5VHlwZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0b2dnbGVTd2l0Y2ggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgcmV0dXJuIHRvZ2dsZVN3aXRjaC5wcmV2KCkudHJpZ2dlcignY2xpY2snKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdTdGF0dXNTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdzdGF0dXMnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zdGF0dXMuaHRtbCcsXG4gICAgICB3aWR0aDogNTI1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpXG4gICAgICAuY2xpY2soZXYgPT4gQ29DN0FjdGl2ZUVmZmVjdC5vbk1hbmFnZUFjdGl2ZUVmZmVjdChldiwgdGhpcy5pdGVtKSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5lZmZlY3RzID0gQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyh0aGlzLml0ZW0uZWZmZWN0cywgeyBzdGF0dXM6IGZhbHNlIH0pXG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5pdGVtLnN5c3RlbS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgICAgIENPQzcuc3RhdHVzVHlwZVtrZXldID8gQ09DNy5zdGF0dXNUeXBlW2tleV0gOiBudWxsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3RlcyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1RhbGVudFNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3RhbGVudCddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3RhbGVudC5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLml0ZW0uc3lzdGVtLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICAgICAgQ09DNy50YWxlbnRUeXBlW2tleV0gPyBDT0M3LnRhbGVudFR5cGVba2V5XSA6IG51bGxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLm5vdGVzLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lLCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdWZWhpY2xlU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdhY3RvcicsICdpdGVtJywgJ3ZlaGljbGUnXSxcbiAgICAgIHdpZHRoOiA1NTUsXG4gICAgICBoZWlnaHQ6IDQyMCxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvdmVoaWNsZS5odG1sJyxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuYWN0b3InLCBkcm9wU2VsZWN0b3I6ICcuZHJvcFpvbmUnIH1dLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAvLyAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHBlcmltZW50YWxGZWF0dXJlc1dhcm5pbmcnKVxuICAgIC8vIClcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5wcm9wZXJ0aWVzID0gW11cbiAgICBpZiAodGhpcy5hY3Rvci5zeXN0ZW0ucHJvcGVydGllcy5hcm1lZCkge1xuICAgICAgc2hlZXREYXRhLnByb3BlcnRpZXMucHVzaChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtZWRWZWhpY2xlJykpXG4gICAgfVxuXG4gICAgY29uc3QgZXhwYW5kZWQgPSB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnKVxuICAgIGlmICh0eXBlb2YgZXhwYW5kZWQgPT09ICd1bmRlZmluZWQnKSBzaGVldERhdGEuZXhwYW5kZWQgPSB0cnVlXG4gICAgZWxzZSBzaGVldERhdGEuZXhwYW5kZWQgPSBleHBhbmRlZFxuICAgIGlmIChzaGVldERhdGEuZXhwYW5kZWQpIHtcbiAgICAgIHNoZWV0RGF0YS5vcHRpb25zLmhlaWdodCA9IDQyMFxuICAgIH0gZWxzZSBzaGVldERhdGEub3B0aW9ucy5oZWlnaHQgPSAnYXV0bydcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLm5vdGVzLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoZWV0RGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgLy8gICBpZiggdmFsdWUpIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKCBDT0M3LmJvb2tUeXBlW2tleV0/Q09DNy5ib29rVHlwZVtrZXldOm51bGwpO1xuICAgIC8vIH1cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcuYWRkLWFybW9yJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRBcm1vcigpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucmVtb3ZlLWFybW9yJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiBhd2FpdCB0aGlzLl9vblJlbW92ZUFybW9yKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5leHBhbmQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25Ub2dnbGVFeHBhbmQuYmluZCh0aGlzKSlcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgLy8gaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVybjtcbiAgICAvLyBodG1sLm9uKCdkcm9wJywgKGV2ZW50KSA9PiB0aGlzLl9vbkRyb3AoZXZlbnQpKTtcbiAgICAvLyBodG1sLmZpbmQoJy5zcGVsbCAuc3BlbGwtbmFtZSBoNCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxTdW1tYXJ5KGV2ZW50KSk7XG4gICAgLy8gaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vblNwZWxsRGVsZXRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlRXhwYW5kICgpIHtcbiAgICBjb25zdCBleHBhbmRlZCA9IHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcpXG4gICAgaWYgKGV4cGFuZGVkKSB7XG4gICAgICB0aGlzLm9sZFNpemUgPSB0aGlzLnBvc2l0aW9uLmhlaWdodFxuICAgICAgdGhpcy5wb3NpdGlvbi5oZWlnaHQgPSAnYXV0bycgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBvc2l0aW9uLmhlaWdodCA9IHRoaXMub2xkU2l6ZSB8fCA0MjAgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnLCAhZXhwYW5kZWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRBcm1vciAoKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCBbXVxuICAgIClcbiAgICBsb2NhdGlvbnMucHVzaCh7IG5hbWU6IG51bGwsIHZhbHVlOiBudWxsIH0pXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJzogbG9jYXRpb25zIH0pXG4gIH1cblxuICBhc3luYyBfb25SZW1vdmVBcm1vciAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb24gPSBidXR0b24uY2xvc2VzdCgnLmFybW9yJylcbiAgICBjb25zdCBpbmRleCA9IGxvY2F0aW9uLmRhdGFzZXQuaW5kZXhcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zIHx8IG51bGxcbiAgICApXG4gICAgaWYgKCFsb2NhdGlvbnMpIHJldHVyblxuICAgIGxvY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJzogbG9jYXRpb25zIH0pXG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHN1cGVyLm9uQ2xvc2VTaGVldCgpXG4gICAgLy8gdGhpcy5hY3Rvci5sb2NrZWQgPSB0cnVlO1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIEZvcm0gU3VibWlzc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgW11cbiAgICAgIClcbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdXZWFwb25TaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdpdGVtJ10sXG4gICAgICB3aWR0aDogNTQ1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC10YWJzJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3NraWxscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgY29uc3QgcGF0aCA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zJ1xuICAgIHJldHVybiBgJHtwYXRofS93ZWFwb24tc2hlZXQuaHRtbGBcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbCA9IFtdXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIGlmIChzaGVldERhdGEuaGFzT3duZXIpIHtcbiAgICAgIHNoZWV0RGF0YS5maXJlYXJtU2tpbGxzID0gdGhpcy5hY3Rvci5maXJlYXJtU2tpbGxzXG4gICAgICBzaGVldERhdGEuZmlnaHRpbmdTa2lsbHMgPSB0aGlzLmFjdG9yLmZpZ2h0aW5nU2tpbGxzXG4gICAgICBzaGVldERhdGEuY29tYmF0U2tpbGwgPSB0aGlzLml0ZW0uYWN0b3IuaXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogdmFsdWUsXG4gICAgICAgIGlzRW5hYmxlZDogdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLl9lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XG4gICAgICAgIHByaWNlOiB0aGlzLml0ZW0uc3lzdGVtLnByaWNlW2tleV0gPz8gMCxcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSxcbiAgICAgICAgaXNFbmFibGVkOiAodGhpcy5pdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHNoZWV0RGF0YS5fZXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5icnN0ID09PSB0cnVlIHx8XG4gICAgICB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMudGhyb3duID09PSB0cnVlXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25TcGVjaWFsID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnNwZWNpYWwsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcud2VhcG9uLXByb3BlcnR5JykuY2xpY2sodGhpcy5fb25Qcm9wZXJ0eUNsaWNrLmJpbmQodGhpcykpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKi9cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgX29uUHJvcGVydHlDbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1wcm9wZXJ0eScpLmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkocHJvcGVydHlJZClcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENvbXBlbmRpdW0sIGdhbWUsIEhvb2tzLCBTZWFyY2hGaWx0ZXIgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5mdW5jdGlvbiBtYXRjaFNlYXJjaEVudHJpZXNJdGVtIChhcHAsIGlzTmFtZVNlYXJjaCwgcXVlcnksIHR5cGUsIGVyYSwgZW50cnlJZHMsIGZvbGRlcklkcywgaW5jbHVkZUZvbGRlcikge1xuICBjb25zdCBlbnRyaWVzID0gYXBwLmNvbGxlY3Rpb24uaW5kZXggPz8gYXBwLmNvbGxlY3Rpb24uY29udGVudHNcblxuICAvLyBDb3B5IHRoZSBmb2xkZXJJZHMgdG8gYSBuZXcgc2V0IHNvIHdlIGNhbiBhZGQgdG8gdGhlIG9yaWdpbmFsIHNldCB3aXRob3V0IGluY29ycmVjdGx5IGFkZGluZyBjaGlsZCBlbnRyaWVzXG4gIGNvbnN0IG1hdGNoZWRGb2xkZXJJZHMgPSBuZXcgU2V0KGZvbGRlcklkcylcblxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCBlbnRyeUlkID0gYXBwLl9nZXRFbnRyeUlkKGVudHJ5KVxuICAgIC8vIElmIHdlIG1hdGNoZWQgYSBmb2xkZXIsIGFkZCBpdHMgY2hpbGRyZW4gZW50cmllc1xuICAgIGlmIChtYXRjaGVkRm9sZGVySWRzLmhhcyhlbnRyeS5mb2xkZXI/Ll9pZCA/PyBlbnRyeS5mb2xkZXIpKSB7XG4gICAgICBlbnRyeUlkcy5hZGQoZW50cnlJZClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWF0Y2hOYW1lID0gKCFpc05hbWVTZWFyY2ggfHwgcXVlcnkudGVzdChTZWFyY2hGaWx0ZXIuY2xlYW5RdWVyeShhcHAuX2dldEVudHJ5TmFtZShlbnRyeSkpKSlcbiAgICAgIGNvbnN0IG1hdGNoVHlwZSA9ICh0eXBlID09PSAnJyB8fCB0eXBlID09PSBlbnRyeS50eXBlKVxuICAgICAgY29uc3QgZXJhcyA9IE9iamVjdC5rZXlzKGVudHJ5LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pXG4gICAgICBjb25zdCBtYXRjaEVyYXMgPSAoZXJhID09PSAnJyB8fCBlcmFzLmxlbmd0aCA9PT0gMCB8fCBlcmFzLmluY2x1ZGVzKGVyYSkpXG4gICAgICBpZiAobWF0Y2hOYW1lICYmIG1hdGNoVHlwZSAmJiBtYXRjaEVyYXMpIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBpZiB3ZSBhcmUgc2VhcmNoaW5nIGJ5IG5hbWUsIG1hdGNoIHRoZSBlbnRyeSBuYW1lXG4gICAgICAgIGVudHJ5SWRzLmFkZChlbnRyeUlkKVxuICAgICAgICBpbmNsdWRlRm9sZGVyKGVudHJ5LmZvbGRlcilcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBlbmRpdW1GaWx0ZXIgKCkge1xuICBjb25zdCBvbGRTZWFyY2hGaWx0ZXIgPSBDb21wZW5kaXVtLnByb3RvdHlwZS5fb25TZWFyY2hGaWx0ZXJcbiAgQ29tcGVuZGl1bS5wcm90b3R5cGUuX29uU2VhcmNoRmlsdGVyID0gZnVuY3Rpb24gKGV2ZW50LCBxdWVyeSwgcmd4LCBodG1sKSB7XG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbi5kb2N1bWVudE5hbWUgPT09ICdJdGVtJykge1xuICAgICAgaWYgKHR5cGVvZiBodG1sID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBxdWVyeSA9IHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5maWx0ZXJzWzBdLmlucHV0U2VsZWN0b3IpLnZhbHVlXG4gICAgICAgIHJneCA9IG5ldyBSZWdFeHAoUmVnRXhwLmVzY2FwZShxdWVyeSksICdpJylcbiAgICAgICAgaHRtbCA9IHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5maWx0ZXJzWzBdLmNvbnRlbnRTZWxlY3RvcilcbiAgICAgIH1cbiAgICAgIGNvbnN0IHR5cGVTZWxlY3QgPSB0aGlzLmVsZW1lbnRbMF0ucXVlcnlTZWxlY3Rvcignc2VsZWN0W25hbWU9Y29jN3R5cGUnICsgdGhpcy5hcHBJZCArICddJylcbiAgICAgIGNvbnN0IGVyYVNlbGVjdCA9IHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCdzZWxlY3RbbmFtZT1jb2M3ZXJhJyArIHRoaXMuYXBwSWQgKyAnXScpXG4gICAgICBjb25zdCB0eXBlID0gdHlwZVNlbGVjdC52YWx1ZVxuICAgICAgbGV0IGVyYSA9ICcnXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnb2NjdXBhdGlvbic6XG4gICAgICAgIGNhc2UgJ3NldHVwJzpcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICAgIGVyYVNlbGVjdC5wYXJlbnRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJ1xuICAgICAgICAgIGVyYSA9IGVyYVNlbGVjdC52YWx1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgZXJhU2VsZWN0LnBhcmVudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdoaWRlJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpc05hbWVTZWFyY2ggPSAhIXF1ZXJ5XG4gICAgICBjb25zdCBpc1NlYXJjaCA9IGlzTmFtZVNlYXJjaCB8fCB0eXBlICE9PSAnJyB8fCBlcmEgIT09ICcnXG4gICAgICBjb25zdCBlbnRyeUlkcyA9IG5ldyBTZXQoKVxuICAgICAgY29uc3QgZm9sZGVySWRzID0gbmV3IFNldCgpXG4gICAgICBjb25zdCBhdXRvRXhwYW5kRm9sZGVySWRzID0gbmV3IFNldCgpXG5cbiAgICAgIC8vIE1hdGNoIGVudHJpZXMgYW5kIGZvbGRlcnNcbiAgICAgIGlmIChpc1NlYXJjaCkge1xuICAgICAgICAvLyBJbmNsdWRlIGZvbGRlcnMgYW5kIHRoZWlyIHBhcmVudHMsIGF1dG8tZXhwYW5kaW5nIHBhcmVudCBmb2xkZXJzXG4gICAgICAgIGNvbnN0IGluY2x1ZGVGb2xkZXIgPSAoZm9sZGVyLCBhdXRvRXhwYW5kID0gdHJ1ZSkgPT4ge1xuICAgICAgICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBmb2xkZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBmb2xkZXIgPSB0aGlzLmNvbGxlY3Rpb24uZm9sZGVycy5nZXQoZm9sZGVyKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZvbGRlcikge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGZvbGRlcklkID0gZm9sZGVyLl9pZFxuICAgICAgICAgIGlmIChmb2xkZXJJZHMuaGFzKGZvbGRlcklkKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBmb2xkZXIgaXMgbm90IGFscmVhZHkgYXV0by1leHBhbmRpbmcsIGJ1dCBpdCBzaG91bGQgYmUsIGFkZCBpdCB0byB0aGUgc2V0XG4gICAgICAgICAgICBpZiAoYXV0b0V4cGFuZCAmJiAhYXV0b0V4cGFuZEZvbGRlcklkcy5oYXMoZm9sZGVySWQpKSB7XG4gICAgICAgICAgICAgIGF1dG9FeHBhbmRGb2xkZXJJZHMuYWRkKGZvbGRlcklkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGZvbGRlcklkcy5hZGQoZm9sZGVySWQpXG4gICAgICAgICAgaWYgKGF1dG9FeHBhbmQpIHtcbiAgICAgICAgICAgIGF1dG9FeHBhbmRGb2xkZXJJZHMuYWRkKGZvbGRlcklkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZm9sZGVyLmZvbGRlcikge1xuICAgICAgICAgICAgaW5jbHVkZUZvbGRlcihmb2xkZXIuZm9sZGVyKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc05hbWVTZWFyY2gpIHtcbiAgICAgICAgICAvLyBGaXJzdCBtYXRjaCBmb2xkZXJzXG4gICAgICAgICAgdGhpcy5fbWF0Y2hTZWFyY2hGb2xkZXJzKHJneCwgaW5jbHVkZUZvbGRlcilcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5leHQgbWF0Y2ggZW50cmllc1xuICAgICAgICBtYXRjaFNlYXJjaEVudHJpZXNJdGVtKHRoaXMsIGlzTmFtZVNlYXJjaCwgcmd4LCB0eXBlLCBlcmEsIGVudHJ5SWRzLCBmb2xkZXJJZHMsIGluY2x1ZGVGb2xkZXIpXG4gICAgICB9XG5cbiAgICAgIC8vIFRvZ2dsZSBlYWNoIGRpcmVjdG9yeSBpdGVtXG4gICAgICBmb3IgKGNvbnN0IGVsIG9mIGh0bWwucXVlcnlTZWxlY3RvckFsbCgnLmRpcmVjdG9yeS1pdGVtJykpIHtcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZvbGRlcicpKSB7XG4gICAgICAgICAgY29uc3QgbWF0Y2ggPSBpc1NlYXJjaCAmJiBmb2xkZXJJZHMuaGFzKGVsLmRhdGFzZXQuZm9sZGVySWQpXG4gICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICghaXNTZWFyY2ggfHwgbWF0Y2gpID8gJ2ZsZXgnIDogJ25vbmUnXG4gICAgICAgICAgaWYgKGF1dG9FeHBhbmRGb2xkZXJJZHMuaGFzKGVsLmRhdGFzZXQuZm9sZGVySWQpKSB7XG4gICAgICAgICAgICBpZiAoaXNTZWFyY2ggJiYgbWF0Y2gpIHtcbiAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2VkJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnY29sbGFwc2VkJywgIWdhbWUuZm9sZGVycy5fZXhwYW5kZWRbZWwuZGF0YXNldC51dWlkXSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICghaXNTZWFyY2ggfHwgZW50cnlJZHMuaGFzKGVsLmRhdGFzZXQuZW50cnlJZCkpID8gJ2ZsZXgnIDogJ25vbmUnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgb2xkU2VhcmNoRmlsdGVyLmNhbGwodGhpcywgZXZlbnQsIHF1ZXJ5LCByZ3gsIGh0bWwpXG4gICAgfVxuICB9XG5cbiAgSG9va3Mub24oJ3JlbmRlckNvbXBlbmRpdW0nLCBhc3luYyAoYXBwLCBodG1sLCBkYXRhKSA9PiB7XG4gICAgaWYgKGFwcC5jb2xsZWN0aW9uLmRvY3VtZW50TmFtZSA9PT0gJ0l0ZW0nKSB7XG4gICAgICBpZiAoIWFwcC5jb2xsZWN0aW9uLmluZGV4ZWQpIHtcbiAgICAgICAgYXdhaXQgYXBwLmNvbGxlY3Rpb24uZ2V0SW5kZXgoKVxuICAgICAgfVxuICAgICAgY29uc3QgdHlwZXMgPSBbLi4ubmV3IFNldChkYXRhLmluZGV4LmZpbHRlcihpID0+IGkubmFtZSAhPT0gJyNbQ0ZfdGVtcEVudGl0eV0nKS5tYXAoaXRlbSA9PiBpdGVtLnR5cGUpKV1cbiAgICAgIGNvbnN0IHNlbGVjdCA9IFtdXG4gICAgICBjb25zdCBzZWxlY3RlZFR5cGUgPSAoYXBwLm9wdGlvbnMuZmlsdGVyQ29DNz8udHlwZSA/PyAnJylcbiAgICAgIGNvbnN0IHNlbGVjdGVkRXJhID0gKGFwcC5vcHRpb25zLmZpbHRlckNvQzc/LmVyYSA/PyAnJylcbiAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIlwiPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWxsJykgKyAnPC9vcHRpb24+J1xuICAgICAgKVxuICAgICAgY29uc3QgZ3JvdXBUeXBlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ2FyY2hldHlwZScsXG4gICAgICAgICAgbmFtZTogJ0NvQzcuRW50aXRpZXMuQXJjaGV0eXBlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnYm9vaycsXG4gICAgICAgICAgbmFtZTogJ0NvQzcuRW50aXRpZXMuQm9vaydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ2l0ZW0nLFxuICAgICAgICAgIG5hbWU6ICdDb0M3LkVudGl0aWVzLkl0ZW0nXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdvY2N1cGF0aW9uJyxcbiAgICAgICAgICBuYW1lOiAnQ29DNy5FbnRpdGllcy5PY2N1cGF0aW9uJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnc2V0dXAnLFxuICAgICAgICAgIG5hbWU6ICdDb0M3LkVudGl0aWVzLlNldHVwJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnc2tpbGwnLFxuICAgICAgICAgIG5hbWU6ICdDb0M3LkVudGl0aWVzLlNraWxsJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnc3BlbGwnLFxuICAgICAgICAgIG5hbWU6ICdDb0M3LkVudGl0aWVzLlNwZWxsJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnc3RhdHVzJyxcbiAgICAgICAgICBuYW1lOiAnQ29DNy5FbnRpdGllcy5TdGF0dXMnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICd0YWxlbnQnLFxuICAgICAgICAgIG5hbWU6ICdDb0M3LkVudGl0aWVzLlRhbGVudCdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ3dlYXBvbicsXG4gICAgICAgICAgbmFtZTogJ0NvQzcuRW50aXRpZXMuV2VhcG9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgICBmb3IgKGNvbnN0IGdyb3VwVHlwZSBvZiBncm91cFR5cGVzKSB7XG4gICAgICAgIGlmICh0eXBlcy5pbmNsdWRlcyhncm91cFR5cGUua2V5KSkge1xuICAgICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInICsgZ3JvdXBUeXBlLmtleSArICdcIicgKyAoc2VsZWN0ZWRUeXBlID09PSBncm91cFR5cGUua2V5ID8gJyBzZWxlY3RlZD1cInNlbGVjdGVkXCInIDogJycpICsgJz4nICtcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKGdyb3VwVHlwZS5uYW1lKSArXG4gICAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBlcmFzID0gW11cbiAgICAgIGVyYXMucHVzaChcbiAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFsbCcpICsgJzwvb3B0aW9uPidcbiAgICAgIClcbiAgICAgIGZvciAoY29uc3QgZXJhIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykubWFwKGUgPT4geyByZXR1cm4geyBpZDogZVswXSwgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKGVbMV0pIH0gfSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpKSB7XG4gICAgICAgIGVyYXMucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgK1xuICAgICAgICAgICAgZXJhLmlkICtcbiAgICAgICAgICAgICdcIicgKyAoc2VsZWN0ZWRFcmEgPT09IGVyYS5pZCA/ICcgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJyA6ICcnKSArICc+JyArXG4gICAgICAgICAgICBlcmEubmFtZSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBsZXQgdW5jb21tb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxSYXJpdHlTaG9ydCcpXG4gICAgICBpZiAodW5jb21tb24gPT09ICdDb0M3LlNraWxsUmFyaXR5U2hvcnQnKSB7XG4gICAgICAgIHVuY29tbW9uID0gJz8/J1xuICAgICAgfVxuICAgICAgaHRtbC5maW5kKCdsaS5kaXJlY3RvcnktaXRlbScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCByb3cgPSAkKHRoaXMpXG4gICAgICAgIGxldCBpdGVtID0gW11cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmluZGV4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIC8vIERFUFJFQ0lBVEVEIElOIHYxMVxuICAgICAgICAgIGl0ZW0gPSBkYXRhLmluZGV4LmZpbmQoaSA9PiBpLl9pZCA9PT0gcm93LmRhdGEoJ2RvY3VtZW50LWlkJykpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbSA9IGFwcC5jb2xsZWN0aW9uLmluZGV4LmdldChyb3cuZGF0YSgnZG9jdW1lbnQtaWQnKSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICByb3cuZmluZCgnYScpLmh0bWwoaXRlbS5uYW1lICsgJyAoJyArIChpdGVtLnN5c3RlbT8uYmFzZSA/PyAnPycpICsgJyUnICsgKChpdGVtLnN5c3RlbT8ucHJvcGVydGllcz8ucmFyaXR5ID8/IGZhbHNlKSA/ICcgJyArIHVuY29tbW9uIDogJycpICsgJyknKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnaGVhZGVyLmRpcmVjdG9yeS1oZWFkZXInKVxuICAgICAgICAuYWZ0ZXIoXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb21wZW5kaXVtZmlsdGVyXCI+JyArXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJoZWFkZXItc2VhcmNoIGZsZXhyb3dcIj48aSBjbGFzcz1cImZhcyBmYS1sYXllci1ncm91cFwiPjwvaT48c2VsZWN0IG5hbWU9XCJjb2M3dHlwZScgKyBhcHAuYXBwSWQgKyAnXCIgc3R5bGU9XCJcIj4nICsgc2VsZWN0LmpvaW4oJycpICsgJzwvc2VsZWN0PjwvZGl2PicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaGVhZGVyLXNlYXJjaCBmbGV4cm93IGVyYV9zZWxlY3RcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWxheWVyLWdyb3VwXCI+PC9pPjxzZWxlY3QgbmFtZT1cImNvYzdlcmEnICsgYXBwLmFwcElkICsgJ1wiIHN0eWxlPVwiXCI+JyArIGVyYXMuam9pbignJykgKyAnPC9zZWxlY3Q+PC9kaXY+JyArXG4gICAgICAgICAgJzwvZGl2PidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCdzZWxlY3QnKS5jaGFuZ2UoYXBwLm9wdGlvbnMuZmlsdGVyc1swXS5jYWxsYmFjay5iaW5kKGFwcCkpXG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDYXJkLCBDT05GSUcsIGZvdW5kcnksIGZyb21VdWlkLCBnYW1lLCBJdGVtLCBKb3VybmFsRW50cnksIE1hY3JvLCBQbGF5bGlzdCwgUm9sbFRhYmxlLCBTY2VuZSwgU2NlbmVOYXZpZ2F0aW9uLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0NJRCB7XG4gIHN0YXRpYyBpbml0ICgpIHtcbiAgICBDT05GSUcuQWN0b3IuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICAvLyBDT05GSUcuQ2FyZHMuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuSXRlbS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5JdGVtLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdzeXN0ZW0uYmFzZScpXG4gICAgQ09ORklHLkl0ZW0uY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ3N5c3RlbS5wcm9wZXJ0aWVzJylcbiAgICBDT05GSUcuSm91cm5hbEVudHJ5LmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLk1hY3JvLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLlBsYXlsaXN0LmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLlJvbGxUYWJsZS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5TY2VuZS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIGdhbWUuc3lzdGVtLmFwaSA9IHtcbiAgICAgIGNvY2lkOiBDb0NJRFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIFJlZ0V4cCBmb3IgdmFsaWQgdHlwZSBhbmQgZm9ybWF0XG4gICAqIEByZXR1cm5zIFJlZ0V4cFxuICAgKi9cbiAgc3RhdGljIHJlZ0V4S2V5ICgpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXignICsgT2JqZWN0LmtleXMoQ29DSUQuZ2FtZVByb3BlcnR5TG9va3VwKS5qb2luKCd8JykgKyAnKVxcXFwuKC4qPylcXFxcLiguKykkJylcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLiBiYXNlZCBvbiBkb2N1bWVudFxuICAgKiBAcGFyYW0gZG9jdW1lbnRcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ2V0UHJlZml4IChkb2N1bWVudCkge1xuICAgIGZvciAoY29uc3QgdHlwZSBpbiBDb0NJRC5kb2N1bWVudE5hbWVMb29rdXApIHtcbiAgICAgIGlmIChkb2N1bWVudCBpbnN0YW5jZW9mIENvQ0lELmRvY3VtZW50TmFtZUxvb2t1cFt0eXBlXSkge1xuICAgICAgICByZXR1cm4gdHlwZSArICcuJyArIChkb2N1bWVudC50eXBlID8/ICcnKSArICcuJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLm5hbWUgYmFzZWQgb24gZG9jdW1lbnRcbiAgICogQHBhcmFtIGRvY3VtZW50XG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgc3RhdGljIGd1ZXNzSWQgKGRvY3VtZW50KSB7XG4gICAgcmV0dXJuIENvQ0lELmdldFByZWZpeChkb2N1bWVudCkgKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKGRvY3VtZW50Lm5hbWUpXG4gIH1cblxuICAvKipcbiAgICogR2V0IENvQ0lEIHR5cGUuc3VidHlwZS5wYXJ0aWFsLW5hbWUoLXJlbW92ZWQpXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ3Vlc3NHcm91cEZyb21LZXkgKGlkKSB7XG4gICAgaWYgKGlkKSB7XG4gICAgICBjb25zdCBrZXkgPSBpZC5yZXBsYWNlKC8oW15cXFxcLi1dKykkLywgJycpXG4gICAgICBpZiAoa2V5LnN1YnN0cigtMSkgPT09ICctJykge1xuICAgICAgICByZXR1cm4ga2V5XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDb0NJRCB0eXBlLnN1YnR5cGUucGFydGlhbC1uYW1lKC1yZW1vdmVkKVxuICAgKiBAcGFyYW0gZG9jdW1lbnRcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ3Vlc3NHcm91cEZyb21Eb2N1bWVudCAoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gQ29DSUQuZ3Vlc3NHcm91cEZyb21LZXkoZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cmFuc2xhdGlvbiBvZiBlcmEga2V5XG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZXJhVGV4dCAoZXJhKSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55JylcbiAgICB9IGVsc2UgaWYgKGVyYSA9PT0gdHJ1ZSkge1xuICAgICAgZXJhID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKVxuICAgIH1cblxuICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KENPQzcuZXJhc1tlcmFdID8/ICdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhIH0pXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgaXRlbXMgd2l0aCBtYXRjaGluZyBDb0NJRHMsIGxhbmd1YWdlLCBhbmQgZXJhc1xuICAgKiB1aS5ub3RpZmljYXRpb25zLndhcm4gZm9yIG1pc3Npbmcga2V5c1xuICAgKiBAcGFyYW0gaXRlbUxpc3QgYXJyYXkgb2YgQ29DSURzXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZXhwYW5kSXRlbUFycmF5ICh7IGl0ZW1MaXN0LCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgbGV0IGl0ZW1zID0gW11cbiAgICBjb25zdCBjb2NpZHMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ID09PSAnc3RyaW5nJylcbiAgICBpdGVtcyA9IGl0ZW1MaXN0LmZpbHRlcihpdCA9PiB0eXBlb2YgaXQgIT09ICdzdHJpbmcnKVxuXG4gICAgaWYgKGNvY2lkcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGZvdW5kID0gYXdhaXQgQ29DSUQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IENvQ0lELm1ha2VHcm91cFJlZ0V4KGNvY2lkcyksIHR5cGU6ICdpJywgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gICAgICBjb25zdCBhbGwgPSBbXVxuICAgICAgZm9yIChjb25zdCBjb2NpZCBvZiBjb2NpZHMpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGZvdW5kLmZpbmQoaSA9PiBpLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBjb2NpZClcbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBhbGwucHVzaChpdGVtKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYWxsLmxlbmd0aCA8IGNvY2lkcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgbm90bWlzc2luZyA9IFtdXG4gICAgICAgIGZvciAoY29uc3QgZG9jIG9mIGFsbCkge1xuICAgICAgICAgIG5vdG1pc3NpbmcucHVzaChkb2MuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVyYSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICAgICAgfVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuZG9jdW1lbnRzLW5vdC1mb3VuZCcsIHsgY29jaWRzOiBjb2NpZHMuZmlsdGVyKHggPT4gIW5vdG1pc3NpbmcuaW5jbHVkZXMoeCkpLmpvaW4oJywgJyksIGxhbmcsIGVyYTogQ29DSUQuZXJhVGV4dChlcmEpIH0pKVxuICAgICAgfVxuICAgICAgaXRlbXMgPSBpdGVtcy5jb25jYXQoYWxsKVxuICAgIH1cbiAgICByZXR1cm4gaXRlbXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGl0ZW0gd2l0aCBtYXRjaGluZyBDb0NJRHMgZnJvbSBsaXN0XG4gICAqIEVtcHR5IGFycmF5IHJldHVybiBmb3IgbWlzc2luZyBrZXlzXG4gICAqIEBwYXJhbSBjb2NpZCBhIHNpbmdsZSBjb2NpZFxuICAgKiBAcGFyYW0gbGlzdCBhcnJheSBvZiBpdGVtc1xuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGZpbmRDb2NJZEluTGlzdCAoY29jaWQsIGxpc3QpIHtcbiAgICBsZXQgaXRlbU5hbWUgPSAnJ1xuICAgIGNvbnN0IENvQ0lES2V5cyA9IE9iamVjdC5hc3NpZ24oZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi5fZmFsbGJhY2suQ29DNz8uQ29DSURGbGFnPy5rZXlzID8/IHt9KSwgZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi50cmFuc2xhdGlvbnMuQ29DNz8uQ29DSURGbGFnPy5rZXlzID8/IHt9KSlcbiAgICBpZiAodHlwZW9mIENvQ0lES2V5c1tjb2NpZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpdGVtTmFtZSA9IENvQ0lES2V5c1tjb2NpZF1cbiAgICB9XG4gICAgcmV0dXJuICh0eXBlb2YgbGlzdC5maWx0ZXIgPT09ICd1bmRlZmluZWQnID8gT2JqZWN0LnZhbHVlcyhsaXN0KSA6IGxpc3QpLmZpbHRlcihpID0+IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IGNvY2lkIHx8IChpdGVtTmFtZSAhPT0gJycgJiYgaXRlbU5hbWUgPT09IGkubmFtZSkpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBSZWdFeHAgbWF0Y2hpbmcgYWxsIHN0cmluZ3MgaW4gYXJyYXlcbiAgICogQHBhcmFtIGNvY2lkcyBhbiBhcnJheSBvZiBDb0NJRCBzdHJpbmdzXG4gICAqIEBwYXJhbSBsaXN0IGFycmF5IG9mIGl0ZW1zXG4gICAqIEByZXR1cm5zIFJlZ0V4cFxuICAgKi9cbiAgc3RhdGljIG1ha2VHcm91cFJlZ0V4IChjb2NpZHMpIHtcbiAgICBpZiAodHlwZW9mIGNvY2lkcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvY2lkcyA9IFtjb2NpZHNdXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29jaWRzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgY29jaWRzLmZpbHRlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBjb25zdCBzcGxpdHMgPSB7fVxuICAgIGNvbnN0IHJneCA9IENvQ0lELnJlZ0V4S2V5KClcbiAgICBmb3IgKGNvbnN0IGkgb2YgY29jaWRzKSB7XG4gICAgICBjb25zdCBrZXkgPSBpLm1hdGNoKHJneClcbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzcGxpdHNba2V5WzFdXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzcGxpdHNba2V5WzFdXSA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBzcGxpdHNba2V5WzFdXVtrZXlbMl1dID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNwbGl0c1trZXlbMV1dW2tleVsyXV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHNwbGl0c1trZXlbMV1dW2tleVsyXV0ucHVzaChrZXlbM10pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTbGllbnRseSBlcnJvclxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZWdFeFBhcnRzID0gW11cbiAgICBmb3IgKGNvbnN0IHQgaW4gc3BsaXRzKSB7XG4gICAgICBjb25zdCByb3cgPSBbXVxuICAgICAgZm9yIChjb25zdCBzIGluIHNwbGl0c1t0XSkge1xuICAgICAgICBpZiAoc3BsaXRzW3RdW3NdLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICByb3cucHVzaChzICsgJ1xcXFwuJyArICcoJyArIHNwbGl0c1t0XVtzXS5qb2luKCd8JykgKyAnKScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm93LnB1c2gocyArICdcXFxcLicgKyBzcGxpdHNbdF1bc10uam9pbignJykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChyb3cubGVuZ3RoID4gMSkge1xuICAgICAgICByZWdFeFBhcnRzLnB1c2godCArICdcXFxcLicgKyAnKCcgKyByb3cuam9pbignfCcpICsgJyknKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVnRXhQYXJ0cy5wdXNoKHQgKyAnXFxcXC4nICsgcm93LmpvaW4oJycpKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVnRXhQYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXignICsgcmVnRXhQYXJ0cy5qb2luKCd8JykgKyAnKSQnKVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByZWdFeFBhcnRzLmpvaW4oJycpICsgJyQnKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIGRvY3VtZW50cyB3aXRoIGFuIENvQ0lEIG1hdGNoaW5nIHRoZSByZWdleCBhbmQgbWF0Y2hpbmcgdGhlIGRvY3VtZW50IHR5cGVcbiAgICogYW5kIGxhbmd1YWdlLCBmcm9tIHRoZSBzcGVjaWZpZWQgc2NvcGUuXG4gICAqIEVtcHR5IGFycmF5IHJldHVybiBmb3Igbm8gbWF0Y2hlc1xuICAgKiBAcGFyYW0gY29jaWRSZWdFeHAgcmVnZXggdXNlZCBvbiB0aGUgQ29DSURcbiAgICogQHBhcmFtIHR5cGUgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHdhbnRlZCBDb0NJRCwgZm9yIGV4YW1wbGUgJ2knLCAnYScsICdqZSdcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gc2NvcGUgZGVmaW5lcyB3aGVyZSBpdCB3aWxsIGxvb2s6XG4gICAqICoqYWxsKio6IGZpbmQgaW4gYm90aCB3b3JsZCAmIGNvbXBlbmRpYSxcbiAgICogKip3b3JsZCoqOiBvbmx5IHNlYXJjaCBpbiB3b3JsZCxcbiAgICogKipjb21wZW5kaXVtcyoqOiBvbmx5IHNlYXJjaCBpbiBjb21wZW5kaXVtc1xuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBmcm9tQ29DSURSZWdleEFsbCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgc2NvcGUgPSAnYWxsJywgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBsZXQgY2FuZGlkYXRlcyA9IGF3YWl0IENvQ0lELmZyb21Db0NJRFJlZ2V4QWxsTWl4ZWQoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBzY29wZSwgbGFuZ0ZhbGxiYWNrLCBzaG93TG9hZGluZyB9KVxuICAgIGlmIChsYW5nRmFsbGJhY2sgJiYgbGFuZyAhPT0gJ2VuJykge1xuICAgICAgY2FuZGlkYXRlcyA9IENvQ0lELmZpbHRlckJ5TGFuZ3VhZ2UoY2FuZGlkYXRlcywgbGFuZylcbiAgICB9XG4gICAgY2FuZGlkYXRlcy5zb3J0KENvQ0lELmNvbXBhcmVDb0NJRFByaW8pXG4gICAgcmV0dXJuIGF3YWl0IENvQ0lELm9ubHlEb2N1bWVudHMoY2FuZGlkYXRlcywgc2hvd0xvYWRpbmcpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgZG9jdW1lbnRzIHdpdGggYW4gQ29DSUQsIGxhbmd1YWdlLCBhbmQgZXJhIGZyb20gdGhlIHNwZWNpZmllZCBzY29wZS5cbiAgICogRW1wdHkgYXJyYXkgcmV0dXJuIGZvciBubyBtYXRjaGVzXG4gICAqIEBwYXJhbSBjb2NpZCBhIHNpbmdsZSBjb2NpZFxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBzY29wZSBkZWZpbmVzIHdoZXJlIGl0IHdpbGwgbG9vazpcbiAgICogKiphbGwqKjogZmluZCBpbiBib3RoIHdvcmxkICYgY29tcGVuZGlhLFxuICAgKiAqKndvcmxkKio6IG9ubHkgc2VhcmNoIGluIHdvcmxkLFxuICAgKiAqKmNvbXBlbmRpdW1zKio6IG9ubHkgc2VhcmNoIGluIGNvbXBlbmRpdW1zXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb21Db0NJREFsbCAoeyBjb2NpZCwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgc2NvcGUgPSAnYWxsJywgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWNvY2lkIHx8IHR5cGVvZiBjb2NpZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCBwYXJ0cyA9IGNvY2lkLm1hdGNoKENvQ0lELnJlZ0V4S2V5KCkpXG4gICAgaWYgKCFwYXJ0cykge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURSZWdleEFsbCh7IGNvY2lkUmVnRXhwOiBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoY29jaWQpICsgJyQnKSwgdHlwZTogcGFydHNbMV0sIGxhbmcsIGVyYSwgc2NvcGUsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG9ubHkgdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnRzIGZvciBlYWNoIENvQ0lEIHRoYXQgbWF0Y2hlcyB0aGUgUmVnRXhwIGFuZFxuICAgKiBsYW5ndWFnZSwgd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudHMgaW4gdGhlIFdvcmxkIHRha2luZyBwcmVjZWRlbmNlIG92ZXJcbiAgICogYW55IGRvY3VtZW50cyBpbiBjb21wZW5kaXVtIHBhY2tzLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0IChcImVuXCIsIFwiZXNcIiwgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHRcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbUNvQ0lEUmVnZXhCZXN0ICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpIH0pKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGxldCBjYW5kaWRhdGVzID0gYXdhaXQgdGhpcy5mcm9tQ29DSURSZWdleEFsbE1peGVkKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgc2NvcGU6ICdhbGwnLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gICAgaWYgKGxhbmdGYWxsYmFjayAmJiBsYW5nICE9PSAnZW4nKSB7XG4gICAgICBjYW5kaWRhdGVzID0gQ29DSUQuZmlsdGVyQnlMYW5ndWFnZShjYW5kaWRhdGVzLCBsYW5nKVxuICAgIH1cbiAgICBjYW5kaWRhdGVzLnNvcnQoQ29DSUQuY29tcGFyZUNvQ0lEUHJpbylcbiAgICBjb25zdCBpZHMgPSB7fVxuICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIGNhbmRpZGF0ZXMpIHtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGlkcywgY2FuZGlkYXRlLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkKSkge1xuICAgICAgICBpZHNbY2FuZGlkYXRlLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXSA9IGNhbmRpZGF0ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgQ29DSUQub25seURvY3VtZW50cyhPYmplY3QudmFsdWVzKGlkcyksIHNob3dMb2FkaW5nKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgb25seSB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudCBmb3IgQ29DSUQgdGhhdCBtYXRjaGVzIHRoZSBsYW5ndWFnZSxcbiAgICogd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudHMgaW4gdGhlIFdvcmxkIHRha2luZyBwcmVjZWRlbmNlIG92ZXJcbiAgICogYW55IGRvY3VtZW50c1xuICAgKiBpbiBjb21wZW5kaXVtIHBhY2tzLlxuICAgKiBAcGFyYW0gY29jaWQgc3RyaW5nIENvQ0lEXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0IChcImVuXCIsIFwiZXNcIiwgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHRcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqL1xuICBzdGF0aWMgZnJvbUNvQ0lEIChjb2NpZCwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSB0cnVlLCBsYW5nRmFsbGJhY2sgPSB0cnVlKSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpIH0pKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURCZXN0KHsgY29jaWQsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrIH0pXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBvbmx5IHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50IGZvciBDb0NJRCB0aGF0IG1hdGNoZXMgdGhlIGxhbmd1YWdlLFxuICAgKiB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50cyBpbiB0aGUgV29ybGQgdGFraW5nIHByZWNlZGVuY2Ugb3ZlclxuICAgKiBhbnkgZG9jdW1lbnRzXG4gICAqIGluIGNvbXBlbmRpdW0gcGFja3MuXG4gICAqIEBwYXJhbSBjb2NpZCBzdHJpbmcgQ29DSURcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKFwiZW5cIiwgXCJlc1wiLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdFxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICovXG4gIHN0YXRpYyBmcm9tQ29DSURCZXN0ICh7IGNvY2lkLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZCB8fCB0eXBlb2YgY29jaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpIH0pKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSBjb2NpZC5zcGxpdCgnLicpWzBdXG4gICAgY29uc3QgY29jaWRSZWdFeHAgPSBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoY29jaWQpICsgJyQnKVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgZG9jdW1lbnRzIG9yIGluZGV4ZXMgd2l0aCBhbiBDb0NJRCBtYXRjaGluZyB0aGUgcmVnZXggYW5kIG1hdGNoaW5nIHRoZSBkb2N1bWVudCB0eXBlXG4gICAqIGFuZCBsYW5ndWFnZSwgZnJvbSB0aGUgc3BlY2lmaWVkIHNjb3BlLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIHNjb3BlIGRlZmluZXMgd2hlcmUgaXQgd2lsbCBsb29rOlxuICAgKiAqKmFsbCoqOiBmaW5kIGluIGJvdGggd29ybGQgJiBjb21wZW5kaWEsXG4gICAqICoqd29ybGQqKjogb25seSBzZWFyY2ggaW4gd29ybGQsXG4gICAqICoqY29tcGVuZGl1bXMqKjogb25seSBzZWFyY2ggaW4gY29tcGVuZGl1bXNcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbUNvQ0lEUmVnZXhBbGxNaXhlZCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgc2NvcGUgPSAnYWxsJywgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWNvY2lkUmVnRXhwKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0cyA9IFtdXG5cbiAgICBsZXQgY291bnQgPSAwXG4gICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICBpZiAoWydhbGwnLCAnd29ybGQnXS5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgICAgY291bnQrK1xuICAgICAgfVxuICAgICAgaWYgKFsnYWxsJywgJ2NvbXBlbmRpdW1zJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICAgIGNvdW50ID0gY291bnQgKyBnYW1lLnBhY2tzLnNpemVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoWydhbGwnLCAnd29ybGQnXS5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmNvbmNhdChhd2FpdCBDb0NJRC5kb2NzRnJvbVdvcmxkKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrLCBwcm9ncmVzc0JhcjogY291bnQgfSkpXG4gICAgfVxuXG4gICAgaWYgKFsnYWxsJywgJ2NvbXBlbmRpdW1zJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICByZXN1bHRzID0gcmVzdWx0cy5jb25jYXQoYXdhaXQgQ29DSUQuaW5kZXhlc0Zyb21Db21wZW5kaWEoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2ssIHByb2dyZXNzQmFyOiBjb3VudCB9KSlcbiAgICB9XG5cbiAgICBpZiAoc2hvd0xvYWRpbmcpIHtcbiAgICAgIFNjZW5lTmF2aWdhdGlvbi5kaXNwbGF5UHJvZ3Jlc3NCYXIoeyBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRVUC5QYWNrYWdlc0xvYWRpbmcnKSwgcGN0OiAxMDAgfSlcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGFsbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIENvQ0lEIHJlZ2V4LCBsYW5ndWFnZSwgYW5kIGVyYSBmcm9tIHRoZSB3b3JsZC5cbiAgICogVGhlIGRvY3VtZW50IGxpc3QgaXMgc29ydGVkIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZmlyc3QuXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gcHJvZ3Jlc3NCYXIgSWYgZ3JlYXRlciB0aGFuIHplcm8gc2hvdyBwZXJjZW50YWdlXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZG9jc0Zyb21Xb3JsZCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgcHJvZ3Jlc3NCYXIgPSAwIH0gPSB7fSkge1xuICAgIGlmICghY29jaWRSZWdFeHApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBpZiAobGFuZyA9PT0gJycpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICBpZiAoZXJhID09PSB0cnVlKSB7XG4gICAgICBlcmEgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXG4gICAgfVxuXG4gICAgaWYgKHByb2dyZXNzQmFyID4gMCkge1xuICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IE1hdGguZmxvb3IoMTAwIC8gcHJvZ3Jlc3NCYXIpIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZ2FtZVByb3BlcnR5ID0gQ29DSUQuZ2V0R2FtZVByb3BlcnR5KGAke3R5cGV9Li5gKVxuXG4gICAgY29uc3QgY2FuZGlkYXRlRG9jdW1lbnRzID0gZ2FtZVtnYW1lUHJvcGVydHldPy5maWx0ZXIoKGQpID0+IHtcbiAgICAgIGNvbnN0IGNvY2lkRmxhZyA9IGQuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKVxuICAgICAgaWYgKHR5cGVvZiBjb2NpZEZsYWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgY29uc3QgZXJhcyA9IChjb2NpZEZsYWcuZXJhcyA/PyBbXSlcbiAgICAgIGNvbnN0IG1hdGNoaW5nRXJhcyA9IChlcmEgPT09IGZhbHNlIHx8IE9iamVjdC5lbnRyaWVzKGVyYXMpLmxlbmd0aCA9PT0gMCB8fCAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVyYXMsIGVyYSkgJiYgZXJhc1tlcmFdKSlcbiAgICAgIHJldHVybiBjb2NpZFJlZ0V4cC50ZXN0KGNvY2lkRmxhZy5pZCkgJiYgW2xhbmcsIChsYW5nRmFsbGJhY2sgPyAnZW4nIDogJy0nKV0uaW5jbHVkZXMoY29jaWRGbGFnLmxhbmcpICYmIG1hdGNoaW5nRXJhc1xuICAgIH0pXG5cbiAgICBpZiAoY2FuZGlkYXRlRG9jdW1lbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIHJldHVybiBjYW5kaWRhdGVEb2N1bWVudHNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGFsbCBpbmRleGVzIG1hdGNoaW5nIHRoZSBDb0NJRCByZWdleCwgbGFuZ3VhZ2UsIGFuZCBlcmEgZnJvbSB0aGUgY29tcGVuZGl1bXMuXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gcHJvZ3Jlc3NCYXIgSWYgZ3JlYXRlciB0aGFuIHplcm8gc2hvdyBwZXJjZW50YWdlXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaW5kZXhlc0Zyb21Db21wZW5kaWEgKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gZmFsc2UsIGxhbmdGYWxsYmFjayA9IHRydWUsIHByb2dyZXNzQmFyID0gMCB9KSB7XG4gICAgaWYgKCFjb2NpZFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIGlmIChlcmEgPT09IHRydWUpIHtcbiAgICAgIGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICB9XG5cbiAgICBjb25zdCBkb2N1bWVudFR5cGUgPSBDb0NJRC5nZXREb2N1bWVudFR5cGUodHlwZSkubmFtZVxuICAgIGxldCBpbmRleERvY3VtZW50cyA9IFtdXG5cbiAgICBsZXQgY291bnQgPSAxXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChwcm9ncmVzc0JhciA+IDApIHtcbiAgICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IE1hdGguZmxvb3IoY291bnQgKiAxMDAgLyBwcm9ncmVzc0JhcikgfSlcbiAgICAgICAgY291bnQrK1xuICAgICAgfVxuICAgICAgaWYgKHBhY2suZG9jdW1lbnROYW1lID09PSBkb2N1bWVudFR5cGUpIHtcbiAgICAgICAgaWYgKCFwYWNrLmluZGV4ZWQpIHtcbiAgICAgICAgICBhd2FpdCBwYWNrLmdldEluZGV4KClcbiAgICAgICAgfVxuICAgICAgICBpbmRleERvY3VtZW50cyA9IGluZGV4RG9jdW1lbnRzLmNvbmNhdChwYWNrLmluZGV4LmZpbHRlcigoaSkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBlcmFzID0gKGkuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyA/PyB7fSlcbiAgICAgICAgICBjb25zdCBtYXRjaGluZ0VyYXMgPSAoZXJhID09PSBmYWxzZSB8fCBPYmplY3QuZW50cmllcyhlcmFzKS5sZW5ndGggPT09IDAgfHwgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlcmFzLCBlcmEpICYmIGVyYXNbZXJhXSkpXG4gICAgICAgICAgcmV0dXJuIGNvY2lkUmVnRXhwLnRlc3QoaS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCkgJiYgW2xhbmcsIChsYW5nRmFsbGJhY2sgPyAnZW4nIDogJy0nKV0uaW5jbHVkZXMoaS5mbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nKSAmJiBtYXRjaGluZ0VyYXNcbiAgICAgICAgfSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbmRleERvY3VtZW50c1xuICB9XG5cbiAgLyoqXG4gICAqIFNvcnQgYSBsaXN0IG9mIGRvY3VtZW50IG9uIENvQ0lEIHByaW9yaXR5IC0gdGhlIGhpZ2hlc3QgZmlyc3QuXG4gICAqIElmIHByaW9yaXR5IGlzIHRoZSBzYW1lIHVzZSB3b3JsZCBvdmVyIGNvbXBlbmRpdW1zXG4gICAqIEBleGFtcGxlXG4gICAqIGFMaXN0T2ZEb2N1bWVudHMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICAgKi9cbiAgc3RhdGljIGNvbXBhcmVDb0NJRFByaW8gKGEsIGIpIHtcbiAgICBjb25zdCBhcCA9IHBhcnNlSW50KGEuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHksIDEwKVxuICAgIGNvbnN0IGJwID0gcGFyc2VJbnQoYi5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSwgMTApXG4gICAgaWYgKGFwID09PSBicCkge1xuICAgICAgY29uc3QgYW8gPSBhIGluc3RhbmNlb2YgZm91bmRyeS5hYnN0cmFjdC5EYXRhTW9kZWxcbiAgICAgIGNvbnN0IGJvID0gYiBpbnN0YW5jZW9mIGZvdW5kcnkuYWJzdHJhY3QuRGF0YU1vZGVsXG4gICAgICBpZiAoYW8gPT09IGJvKSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKGFvID8gLTEgOiAxKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYnAgLSBhcFxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgdGhlIGZpcnN0IHBhcnQgb2YgYSBDb0NJRCB0byB3aGF0IHRob3NlIGRvY3VtZW50cyBhcmUgY2FsbGVkIGluIHRoZSBgZ2FtZWAgb2JqZWN0LlxuICAgKiBAcGFyYW0gY29jaWQgYSBzaW5nbGUgY29jaWRcbiAgICovXG4gIHN0YXRpYyBnZXRHYW1lUHJvcGVydHkgKGNvY2lkKSB7XG4gICAgY29uc3QgdHlwZSA9IGNvY2lkLnNwbGl0KCcuJylbMF1cbiAgICBjb25zdCBnYW1lUHJvcGVydHkgPSBDb0NJRC5nYW1lUHJvcGVydHlMb29rdXBbdHlwZV1cbiAgICBpZiAoIWdhbWVQcm9wZXJ0eSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmluY29ycmVjdC50eXBlJykpXG4gICAgICBjb25zb2xlLmxvZygnQ29DNyB8ICcsIGNvY2lkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAgICB9XG4gICAgcmV0dXJuIGdhbWVQcm9wZXJ0eVxuICB9XG5cbiAgc3RhdGljIGdldCBnYW1lUHJvcGVydHlMb29rdXAgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhOiAnYWN0b3JzJyxcbiAgICAgIGM6ICdjYXJkcycsXG4gICAgICBpOiAnaXRlbXMnLFxuICAgICAgamU6ICdqb3VybmFsJyxcbiAgICAgIG06ICdtYWNyb3MnLFxuICAgICAgcDogJ3BsYXlsaXN0cycsXG4gICAgICBydDogJ3RhYmxlcycsXG4gICAgICBzOiAnc2NlbmVzJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIHRoZSBmaXJzdCBwYXJ0IG9mIGEgQ29DSUQgdG8gd2hhdCB0aG9zZSBkb2N1bWVudHMgYXJlIGNhbGxlZCBpbiB0aGUgYGdhbWVgIG9iamVjdC5cbiAgICogQHBhcmFtIGNvY2lkIGEgc2luZ2xlIGNvY2lkXG4gICAqL1xuICBzdGF0aWMgZ2V0RG9jdW1lbnRUeXBlIChjb2NpZCkge1xuICAgIGNvbnN0IHR5cGUgPSBjb2NpZC5zcGxpdCgnLicpWzBdXG4gICAgY29uc3QgZG9jdW1lbnRUeXBlID0gQ29DSUQuZG9jdW1lbnROYW1lTG9va3VwW3R5cGVdXG4gICAgaWYgKCFkb2N1bWVudFR5cGUpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5pbmNvcnJlY3QudHlwZScpKVxuICAgICAgY29uc29sZS5sb2coJ0NvQzcgfCAnLCBjb2NpZClcbiAgICAgIHRocm93IG5ldyBFcnJvcigpXG4gICAgfVxuICAgIHJldHVybiBkb2N1bWVudFR5cGVcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZG9jdW1lbnROYW1lTG9va3VwICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYTogQWN0b3IsXG4gICAgICBjOiBDYXJkLFxuICAgICAgaTogSXRlbSxcbiAgICAgIGplOiBKb3VybmFsRW50cnksXG4gICAgICBtOiBNYWNybyxcbiAgICAgIHA6IFBsYXlsaXN0LFxuICAgICAgcnQ6IFJvbGxUYWJsZSxcbiAgICAgIHM6IFNjZW5lXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgaW5kZXhlcyB3aXRoIHRoZWlyIGRvY3VtZW50c1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIG9ubHlEb2N1bWVudHMgKGNhbmRpZGF0ZXMsIHNob3dMb2FkaW5nKSB7XG4gICAgY29uc3QgbGVuID0gY2FuZGlkYXRlcy5sZW5ndGhcbiAgICBsZXQgY291bnQgPSAwXG4gICAgZm9yIChjb25zdCBvZmZzZXQgaW4gY2FuZGlkYXRlcykge1xuICAgICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICAgIFNjZW5lTmF2aWdhdGlvbi5kaXNwbGF5UHJvZ3Jlc3NCYXIoeyBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRVUC5QYWNrYWdlc0xvYWRpbmcnKSwgcGN0OiBNYXRoLmZsb29yKGNvdW50IC8gbGVuKSB9KVxuICAgICAgICBjb3VudCA9IGNvdW50ICsgMTAwXG4gICAgICB9XG4gICAgICBpZiAoIShjYW5kaWRhdGVzW29mZnNldF0gaW5zdGFuY2VvZiBmb3VuZHJ5LmFic3RyYWN0LkRhdGFNb2RlbCkpIHtcbiAgICAgICAgY2FuZGlkYXRlc1tvZmZzZXRdID0gYXdhaXQgZnJvbVV1aWQoY2FuZGlkYXRlc1tvZmZzZXRdLnV1aWQpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzaG93TG9hZGluZykge1xuICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IDEwMCB9KVxuICAgIH1cbiAgICByZXR1cm4gY2FuZGlkYXRlc1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbHRlciBhbiBhcnJheSBvZiBpbmRleCBvciBkb2N1bWVudHMuXG4gICAqIElmIGEgQ29DSUQgaGFzIGEgdmVyc2lvbiBsYW5nIHRoZW4gcmVtb3ZlIHRoZSBlbiB2ZXJzaW9uc1xuICAgKi9cbiAgc3RhdGljIGZpbHRlckJ5TGFuZ3VhZ2UgKGluZGV4ZXMsIGxhbmcpIHtcbiAgICBjb25zdCBpZHMgPSBpbmRleGVzLnJlZHVjZSgoYywgaSkgPT4ge1xuICAgICAgY1tpLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXSA9IGNbaS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZF0gfHwgaS5mbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nID09PSBsYW5nXG4gICAgICByZXR1cm4gY1xuICAgIH0sIHt9KVxuICAgIHJldHVybiBpbmRleGVzLmZpbHRlcihpID0+IGkuZmxhZ3MuQ29DNy5jb2NpZEZsYWcubGFuZyAhPT0gJ2VuJyB8fCAhaWRzW2kuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRdKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGxpc3Qgb2YgYWxsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgQ29DSUQgcmVnZXgsIGxhbmd1YWdlLCBhbmQgZXJhIGZyb20gdGhlIHdvcmxkLlxuICAgKiBUaGUgZG9jdW1lbnQgbGlzdCBpcyBzb3J0ZWQgd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBmaXJzdC5cbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBwcm9ncmVzc0JhciBJZiBncmVhdGVyIHRoYW4gemVybyBzaG93IHBlcmNlbnRhZ2VcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBkb2N1bWVudHNGcm9tV29ybGQgKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gZmFsc2UsIGxhbmdGYWxsYmFjayA9IHRydWUsIHByb2dyZXNzQmFyID0gMCB9ID0ge30pIHtcbiAgICBjb25zb2xlLndhcm4oJ0NhbGxpbmcgZG9jdW1lbnRzRnJvbVdvcmxkIGRpcmVjdGx5IGlzIGRlcHJlY2lhdGVkJylcbiAgICBsZXQgZG9jdW1lbnRzID0gYXdhaXQgQ29DSUQuZG9jc0Zyb21Xb3JsZCh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgcHJvZ3Jlc3NCYXIgfSlcbiAgICBpZiAobGFuZ0ZhbGxiYWNrICYmIGxhbmcgIT09ICdlbicpIHtcbiAgICAgIGRvY3VtZW50cyA9IENvQ0lELmZpbHRlckJ5TGFuZ3VhZ2UoZG9jdW1lbnRzLCBsYW5nKVxuICAgIH1cbiAgICBkb2N1bWVudHMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICAgIHJldHVybiBkb2N1bWVudHNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGFsbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIENvQ0lEIHJlZ2V4LCBsYW5ndWFnZSwgYW5kIGVyYSBmcm9tIHRoZSBjb21wZW5kaXVtcy5cbiAgICogVGhlIGRvY3VtZW50IGxpc3QgaXMgc29ydGVkIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZmlyc3QuXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gcHJvZ3Jlc3NCYXIgSWYgZ3JlYXRlciB0aGFuIHplcm8gc2hvdyBwZXJjZW50YWdlXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZG9jdW1lbnRzRnJvbUNvbXBlbmRpYSAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgcHJvZ3Jlc3NCYXIgPSAwIH0pIHtcbiAgICBjb25zb2xlLndhcm4oJ0NhbGxpbmcgZG9jdW1lbnRzRnJvbUNvbXBlbmRpYSBkaXJlY3RseSBpcyBkZXByZWNpYXRlZCcpXG4gICAgbGV0IGluZGV4ZXMgPSBhd2FpdCBDb0NJRC5pbmRleGVzRnJvbUNvbXBlbmRpYSh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgcHJvZ3Jlc3NCYXIgfSlcbiAgICBpZiAobGFuZ0ZhbGxiYWNrICYmIGxhbmcgIT09ICdlbicpIHtcbiAgICAgIGluZGV4ZXMgPSBDb0NJRC5maWx0ZXJCeUxhbmd1YWdlKGluZGV4ZXMsIGxhbmcpXG4gICAgfVxuICAgIGluZGV4ZXMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICAgIHJldHVybiBhd2FpdCBDb0NJRC5vbmx5RG9jdW1lbnRzKGluZGV4ZXMsIHByb2dyZXNzQmFyID4gMClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ09ORklHLCBDT05TVCwgRG9jdW1lbnRTaGVldENvbmZpZywgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIE5vdGVzTGF5ZXIsIFJlZ2lvbkJlaGF2aW9yLCBUb2tlbkxheWVyICovXG5jb25zdCB7IFJlZ2lvbkJlaGF2aW9yVHlwZSB9ID0gZm91bmRyeS5kYXRhLnJlZ2lvbkJlaGF2aW9ycyA/PyB7fSAvLyBGb3VuZHJ5VlRUIHYxMVxuXG4vLyBGb3VuZHJ5VlRUIHYxMVxuY29uc3QgUmVnaW9uQmVoYXZpb3JUeXBlQ2xhc3MgPSAodHlwZW9mIFJlZ2lvbkJlaGF2aW9yVHlwZSA9PT0gJ3VuZGVmaW5lZCcgPyBjbGFzcyB7fSA6IFJlZ2lvbkJlaGF2aW9yVHlwZSlcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29DN0NsaWNrYWJsZUV2ZW50cyBleHRlbmRzIFJlZ2lvbkJlaGF2aW9yVHlwZUNsYXNzIHtcbiAgc3RhdGljIGluaXRTZWxmICgpIHtcbiAgICAvLyBGb3VuZHJ5VlRUIHYxMVxuICAgIGlmICghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKENPTkZJRy5SZWdpb25CZWhhdmlvci5kYXRhTW9kZWxzLCB7XG4gICAgICBjb2M3Q2xpY2thYmxlRXZlbnRzOiBDb0M3Q2xpY2thYmxlRXZlbnRzXG4gICAgfSlcblxuICAgIE9iamVjdC5hc3NpZ24oQ09ORklHLlJlZ2lvbkJlaGF2aW9yLnR5cGVJY29ucywge1xuICAgICAgY29jN0NsaWNrYWJsZUV2ZW50czogJ2ZhLXNvbGlkIGZhLWNvbXB1dGVyLW1vdXNlJ1xuICAgIH0pXG5cbiAgICBEb2N1bWVudFNoZWV0Q29uZmlnLnJlZ2lzdGVyU2hlZXQoXG4gICAgICBSZWdpb25CZWhhdmlvcixcbiAgICAgICdDb0M3JyxcbiAgICAgIGZvdW5kcnkuYXBwbGljYXRpb25zLnNoZWV0cy5SZWdpb25CZWhhdmlvckNvbmZpZyxcbiAgICAgIHtcbiAgICAgICAgdHlwZXM6IFtcbiAgICAgICAgICAnY29jN0NsaWNrYWJsZUV2ZW50cydcbiAgICAgICAgXSxcbiAgICAgICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgICAgIH1cbiAgICApXG5cbiAgICBjb25zdCBvbGRPbkNsaWNrTGVmdCA9IFRva2VuTGF5ZXIucHJvdG90eXBlLl9vbkNsaWNrTGVmdFxuICAgIFRva2VuTGF5ZXIucHJvdG90eXBlLl9vbkNsaWNrTGVmdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgb2xkT25DbGlja0xlZnQuY2FsbCh0aGlzLCBldmVudClcbiAgICAgIGlmIChjYW52YXMuYWN0aXZlTGF5ZXIgaW5zdGFuY2VvZiBUb2tlbkxheWVyKSB7XG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gY2FudmFzLmFjdGl2ZUxheWVyLnRvTG9jYWwoZXZlbnQpXG4gICAgICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIGNhbnZhcy5zY2VuZS5yZWdpb25zLmNvbnRlbnRzKSB7XG4gICAgICAgICAgaWYgKHJlZ2lvbi5iZWhhdmlvcnMuZmlsdGVyKGIgPT4gIWIuZGlzYWJsZWQpLmZpbmQoYiA9PiBiLnN5c3RlbSBpbnN0YW5jZW9mIENvQzdDbGlja2FibGVFdmVudHMpICYmIHJlZ2lvbi5vYmplY3QucG9seWdvblRyZWUudGVzdFBvaW50KGRlc3RpbmF0aW9uKSkge1xuICAgICAgICAgICAgcmVnaW9uLmJlaGF2aW9ycy5maWx0ZXIoYiA9PiAhYi5kaXNhYmxlZCkubWFwKGFzeW5jIChiKSA9PiB7IGlmIChhd2FpdCBiLnN5c3RlbS5faGFuZGxlTW91c2VPdmVyRXZlbnQoKSA9PT0gdHJ1ZSkgeyBhd2FpdCBiLnN5c3RlbS5faGFuZGxlTGVmdENsaWNrRXZlbnQoKSB9IH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkT25DbGlja1JpZ2h0ID0gVG9rZW5MYXllci5wcm90b3R5cGUuX29uQ2xpY2tSaWdodFxuICAgIFRva2VuTGF5ZXIucHJvdG90eXBlLl9vbkNsaWNrUmlnaHQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIG9sZE9uQ2xpY2tSaWdodC5jYWxsKHRoaXMsIGV2ZW50KVxuICAgICAgaWYgKGNhbnZhcy5hY3RpdmVMYXllciBpbnN0YW5jZW9mIFRva2VuTGF5ZXIpIHtcbiAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSBjYW52YXMuYWN0aXZlTGF5ZXIudG9Mb2NhbChldmVudClcbiAgICAgICAgZm9yIChjb25zdCByZWdpb24gb2YgY2FudmFzLnNjZW5lLnJlZ2lvbnMuY29udGVudHMpIHtcbiAgICAgICAgICBpZiAocmVnaW9uLmJlaGF2aW9ycy5maWx0ZXIoYiA9PiAhYi5kaXNhYmxlZCkuZmluZChiID0+IGIuc3lzdGVtIGluc3RhbmNlb2YgQ29DN0NsaWNrYWJsZUV2ZW50cykgJiYgcmVnaW9uLm9iamVjdC5wb2x5Z29uVHJlZS50ZXN0UG9pbnQoZGVzdGluYXRpb24pKSB7XG4gICAgICAgICAgICByZWdpb24uYmVoYXZpb3JzLmZpbHRlcihiID0+ICFiLmRpc2FibGVkKS5tYXAoYXN5bmMgKGIpID0+IHsgaWYgKGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVNb3VzZU92ZXJFdmVudCgpID09PSB0cnVlKSB7IGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVSaWdodENsaWNrRXZlbnQoKSB9IH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChjYW52YXMuYWN0aXZlTGF5ZXIgaW5zdGFuY2VvZiBUb2tlbkxheWVyKSB7XG4gICAgICAgIGNvbnN0IHBvaW50ZXIgPSBjYW52YXM/LmFwcD8ucmVuZGVyZXI/LmV2ZW50cz8ucG9pbnRlclxuICAgICAgICBpZiAoIXBvaW50ZXIpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IGNhbnZhcy5hY3RpdmVMYXllci50b0xvY2FsKGV2ZW50KVxuICAgICAgICBsZXQgc2V0UG9pbnRlciA9IGZhbHNlXG4gICAgICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIGNhbnZhcy5zY2VuZS5yZWdpb25zLmNvbnRlbnRzKSB7XG4gICAgICAgICAgaWYgKHJlZ2lvbi5iZWhhdmlvcnMuZmlsdGVyKGIgPT4gIWIuZGlzYWJsZWQpLmZpbmQoYiA9PiBiLnN5c3RlbSBpbnN0YW5jZW9mIENvQzdDbGlja2FibGVFdmVudHMpICYmIHJlZ2lvbi5vYmplY3QucG9seWdvblRyZWUudGVzdFBvaW50KGRlc3RpbmF0aW9uKSkge1xuICAgICAgICAgICAgc2V0UG9pbnRlciA9IGF3YWl0IHJlZ2lvbi5iZWhhdmlvcnMuZmlsdGVyKGIgPT4gIWIuZGlzYWJsZWQpLnJlZHVjZShhc3luYyAoYywgYikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgYi5zeXN0ZW0uX2hhbmRsZU1vdXNlT3ZlckV2ZW50KClcbiAgICAgICAgICAgICAgaWYgKHIgIT09IGZhbHNlICYmIHIgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGIudXVpZCArICcgZGlkIG5vdCByZXR1cm4gYSBib29sZWFuJylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjID0gYyB8fCByXG4gICAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgICAgICB9LCBmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldFBvaW50ZXIpIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9hcmQnKS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcidcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9hcmQnKS5zdHlsZS5jdXJzb3IgPSAnJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBkZWZpbmVTY2hlbWEgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBtb3VzZU92ZXI6IG5ldyBmb3VuZHJ5LmRhdGEuZmllbGRzLkphdmFTY3JpcHRGaWVsZCh7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBnbU9ubHk6IHRydWUsXG4gICAgICAgIGluaXRpYWw6ICdyZXR1cm4gZmFsc2UnLFxuICAgICAgICBsYWJlbDogJ0NvQzcuQ2xpY2thYmxlRXZlbnRzLk1vdXNlT3Zlci5UaXRsZScsXG4gICAgICAgIGhpbnQ6ICdDb0M3LkNsaWNrYWJsZUV2ZW50cy5Nb3VzZU92ZXIuSGludCdcbiAgICAgIH0pLFxuICAgICAgbGVmdENsaWNrOiBuZXcgZm91bmRyeS5kYXRhLmZpZWxkcy5KYXZhU2NyaXB0RmllbGQoe1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgZ21Pbmx5OiB0cnVlLFxuICAgICAgICBsYWJlbDogJ0NvQzcuQ2xpY2thYmxlRXZlbnRzLkxlZnRDbGljay5UaXRsZSdcbiAgICAgIH0pLFxuICAgICAgcmlnaHRDbGljazogbmV3IGZvdW5kcnkuZGF0YS5maWVsZHMuSmF2YVNjcmlwdEZpZWxkKHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIGdtT25seTogdHJ1ZSxcbiAgICAgICAgbGFiZWw6ICdDb0M3LkNsaWNrYWJsZUV2ZW50cy5SaWdodENsaWNrLlRpdGxlJ1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIF9oYW5kbGVNb3VzZU92ZXJFdmVudCAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZuID0gbmV3IGZvdW5kcnkudXRpbHMuQXN5bmNGdW5jdGlvbignc2NlbmUnLCAncmVnaW9uJywgJ2JlaGF2aW9yJywgYHske3RoaXMubW91c2VPdmVyfVxcbn1gKVxuICAgICAgcmV0dXJuIGF3YWl0IGZuLmNhbGwoZ2xvYmFsVGhpcywgdGhpcy5zY2VuZSwgdGhpcy5yZWdpb24sIHRoaXMuYmVoYXZpb3IpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIF9oYW5kbGVMZWZ0Q2xpY2tFdmVudCAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZuID0gbmV3IGZvdW5kcnkudXRpbHMuQXN5bmNGdW5jdGlvbignc2NlbmUnLCAncmVnaW9uJywgJ2JlaGF2aW9yJywgYHske3RoaXMubGVmdENsaWNrfVxcbn1gKVxuICAgICAgcmV0dXJuIGF3YWl0IGZuLmNhbGwoZ2xvYmFsVGhpcywgdGhpcy5zY2VuZSwgdGhpcy5yZWdpb24sIHRoaXMuYmVoYXZpb3IpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIF9oYW5kbGVSaWdodENsaWNrRXZlbnQgKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmbiA9IG5ldyBmb3VuZHJ5LnV0aWxzLkFzeW5jRnVuY3Rpb24oJ3NjZW5lJywgJ3JlZ2lvbicsICdiZWhhdmlvcicsIGB7JHt0aGlzLnJpZ2h0Q2xpY2t9XFxufWApXG4gICAgICByZXR1cm4gYXdhaXQgZm4uY2FsbChnbG9iYWxUaGlzLCB0aGlzLnNjZW5lLCB0aGlzLnJlZ2lvbiwgdGhpcy5iZWhhdmlvcilcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBDbGlja1JlZ2lvbkxlZnRVdWlkIChkb2NVdWlkKSB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoZG9jVXVpZClcbiAgICBpZiAoZG9jKSB7XG4gICAgICBkb2MuYmVoYXZpb3JzLmZpbHRlcihiID0+ICFiLmRpc2FibGVkKS5tYXAoYXN5bmMgKGIpID0+IHsgaWYgKGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVNb3VzZU92ZXJFdmVudCgpID09PSB0cnVlKSB7IGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVMZWZ0Q2xpY2tFdmVudCgpIH0gfSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignam91cm5hbFBhZ2VVdWlkcyAnICsgZG9jVXVpZCArICcgbm90IGxvYWRlZCcpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIENsaWNrUmVnaW9uUmlnaHRVdWlkIChkb2NVdWlkKSB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoZG9jVXVpZClcbiAgICBpZiAoZG9jKSB7XG4gICAgICBkb2MuYmVoYXZpb3JzLmZpbHRlcihiID0+ICFiLmRpc2FibGVkKS5tYXAoYXN5bmMgKGIpID0+IHsgaWYgKGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVNb3VzZU92ZXJFdmVudCgpID09PSB0cnVlKSB7IGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVSaWdodENsaWNrRXZlbnQoKSB9IH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2pvdXJuYWxQYWdlVXVpZHMgJyArIGRvY1V1aWQgKyAnIG5vdCBsb2FkZWQnKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBoYXNQZXJtaXNzaW9uRG9jdW1lbnQgKGRvY3VtZW50VXVpZCkge1xuICAgIGNvbnN0IGRvYyA9IGF3YWl0IGZyb21VdWlkKGRvY3VtZW50VXVpZClcbiAgICByZXR1cm4gZG9jPy50ZXN0VXNlclBlcm1pc3Npb24oZ2FtZS51c2VyLCBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9CU0VSVkVSKSA/PyBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIEluU2NlbmVSZWxhdGl2ZVRlbGVwb3J0IChldmVudCwgZGVzdGluYXRpb25SZWdpb24pIHtcbiAgICBpZiAoZXZlbnQubmFtZSA9PT0gJ3Rva2VuTW92ZUluJykge1xuICAgICAgLy8gcmVnaW9uIE1VU1QgYmUgdGhlIHNhbWUgc2hhcGUgd2l0aCBubyB0cmFuc2Zvcm1hdGlvblxuICAgICAgLy8gQ3VycmVudGx5IG9ubHkgUG9seWdvblNoYXBlRGF0YSBhbmQgUmVjdGFuZ2xlU2hhcGVEYXRhXG4gICAgICBjb25zdCBzb3VyY2VUTCA9IGV2ZW50LnJlZ2lvbi5zaGFwZXMucmVkdWNlKChjLCBwKSA9PiB7XG4gICAgICAgIGlmIChwIGluc3RhbmNlb2YgZm91bmRyeS5kYXRhLlBvbHlnb25TaGFwZURhdGEpIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBwLnBvaW50cy5sZW5ndGg7IGkgPCBpbTsgaSA9IGkgKyAyKSB7XG4gICAgICAgICAgICBpZiAoY1swXSA9PT0gZmFsc2UgfHwgcC5wb2ludHNbaV0gPCBjWzBdKSB7XG4gICAgICAgICAgICAgIGNbMF0gPSBwLnBvaW50c1tpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNbMV0gPT09IGZhbHNlIHx8IHAucG9pbnRzW2kgKyAxXSA8IGNbMV0pIHtcbiAgICAgICAgICAgICAgY1sxXSA9IHAucG9pbnRzW2kgKyAxXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwIGluc3RhbmNlb2YgZm91bmRyeS5kYXRhLlJlY3RhbmdsZVNoYXBlRGF0YSkge1xuICAgICAgICAgIGNvbnN0IHggPSBNYXRoLm1pbihwLnggKyBwLndpZHRoLCBwLngpXG4gICAgICAgICAgY29uc3QgeSA9IE1hdGgubWluKHAueSArIHAuaGVpZ2h0LCBwLnkpXG4gICAgICAgICAgaWYgKGNbMF0gPT09IGZhbHNlIHx8IHggPCBjWzBdKSB7XG4gICAgICAgICAgICBjWzBdID0geFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY1sxXSA9PT0gZmFsc2UgfHwgeSA8IGNbMV0pIHtcbiAgICAgICAgICAgIGNbMV0gPSB5XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjXG4gICAgICB9LCBbZmFsc2UsIGZhbHNlXSlcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uVEwgPSAoYXdhaXQgZnJvbVV1aWQoZGVzdGluYXRpb25SZWdpb24pKS5zaGFwZXMucmVkdWNlKChjLCBwKSA9PiB7XG4gICAgICAgIGlmIChwIGluc3RhbmNlb2YgZm91bmRyeS5kYXRhLlBvbHlnb25TaGFwZURhdGEpIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBwLnBvaW50cy5sZW5ndGg7IGkgPCBpbTsgaSA9IGkgKyAyKSB7XG4gICAgICAgICAgICBpZiAoY1swXSA9PT0gZmFsc2UgfHwgcC5wb2ludHNbaV0gPCBjWzBdKSB7XG4gICAgICAgICAgICAgIGNbMF0gPSBwLnBvaW50c1tpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNbMV0gPT09IGZhbHNlIHx8IHAucG9pbnRzW2kgKyAxXSA8IGNbMV0pIHtcbiAgICAgICAgICAgICAgY1sxXSA9IHAucG9pbnRzW2kgKyAxXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwIGluc3RhbmNlb2YgZm91bmRyeS5kYXRhLlJlY3RhbmdsZVNoYXBlRGF0YSkge1xuICAgICAgICAgIGNvbnN0IHggPSBNYXRoLm1pbihwLnggKyBwLndpZHRoLCBwLngpXG4gICAgICAgICAgY29uc3QgeSA9IE1hdGgubWluKHAueSArIHAuaGVpZ2h0LCBwLnkpXG4gICAgICAgICAgaWYgKGNbMF0gPT09IGZhbHNlIHx8IHggPCBjWzBdKSB7XG4gICAgICAgICAgICBjWzBdID0geFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY1sxXSA9PT0gZmFsc2UgfHwgeSA8IGNbMV0pIHtcbiAgICAgICAgICAgIGNbMV0gPSB5XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjXG4gICAgICB9LCBbZmFsc2UsIGZhbHNlXSlcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uWCA9IGV2ZW50LmRhdGEuZGVzdGluYXRpb24ueCAtIHNvdXJjZVRMWzBdICsgZGVzdGluYXRpb25UTFswXVxuICAgICAgY29uc3QgZGVzdGluYXRpb25ZID0gZXZlbnQuZGF0YS5kZXN0aW5hdGlvbi55IC0gc291cmNlVExbMV0gKyBkZXN0aW5hdGlvblRMWzFdXG4gICAgICBhd2FpdCBldmVudC5kYXRhLnRva2VuLm9iamVjdC5zdG9wQW5pbWF0aW9uKCkgLy8gUGFuaWNcbiAgICAgIGV2ZW50LmRhdGEudG9rZW4udXBkYXRlKHsgeDogZGVzdGluYXRpb25YLCB5OiBkZXN0aW5hdGlvblkgfSwgeyBhbmltYXRlOiBmYWxzZSB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBNYXBQaW5Ub2dnbGUgKHRvZ2dsZSwgeyBqb3VybmFsUGFnZVV1aWRzID0gW10sIG5vdGVVdWlkcyA9IFtdLCBwZXJtaXNzaW9uRmFsc2UgPSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkUsIHBlcm1pc3Npb25UcnVlID0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PQlNFUlZFUiB9ID0ge30pIHtcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHsgdHlwZTogJ3RvZ2dsZU1hcE5vdGVzJywgdG9nZ2xlOiB0cnVlIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ2NvcmUnLCBOb3Rlc0xheWVyLlRPR0dMRV9TRVRUSU5HLCB0cnVlKVxuICAgIGZvciAoY29uc3QgZG9jVXVpZCBvZiBqb3VybmFsUGFnZVV1aWRzKSB7XG4gICAgICBjb25zdCBkb2MgPSBhd2FpdCBmcm9tVXVpZChkb2NVdWlkKVxuICAgICAgaWYgKGRvYykge1xuICAgICAgICBsZXQgcGVybWlzc2lvbiA9IHBlcm1pc3Npb25UcnVlXG4gICAgICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICAgICAgcGVybWlzc2lvbiA9IHBlcm1pc3Npb25GYWxzZVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGRvYy51cGRhdGUoeyAnb3duZXJzaGlwLmRlZmF1bHQnOiBwZXJtaXNzaW9uIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdqb3VybmFsUGFnZVV1aWRzICcgKyBkb2NVdWlkICsgJyBub3QgbG9hZGVkJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGRvY1V1aWQgb2Ygbm90ZVV1aWRzKSB7XG4gICAgICBjb25zdCBkb2MgPSBhd2FpdCBmcm9tVXVpZChkb2NVdWlkKVxuICAgICAgaWYgKGRvYykge1xuICAgICAgICBsZXQgdGV4dHVyZSA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2FydC9tYXAtcGluLnN2ZydcbiAgICAgICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgICAgICB0ZXh0dXJlID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvYXJ0L21hcC1waW4tZGFyay5zdmcnXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgZG9jLnVwZGF0ZSh7ICd0ZXh0dXJlLnNyYyc6IHRleHR1cmUgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ25vdGVVdWlkcyAnICsgZG9jVXVpZCArICcgbm90IGxvYWRlZCcpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG9wZW5Eb2N1bWVudCAoZG9jdW1lbnRVdWlkLCBwYWdlSWQgPSBudWxsLCBhbmNob3IgPSBudWxsKSB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoZG9jdW1lbnRVdWlkKVxuICAgIGlmIChkb2M/LnRlc3RVc2VyUGVybWlzc2lvbihnYW1lLnVzZXIsIENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVIpKSB7XG4gICAgICBpZiAocGFnZUlkKSB7XG4gICAgICAgIGlmIChkb2MucGFnZXMuZ2V0KHBhZ2VJZCk/LnRlc3RVc2VyUGVybWlzc2lvbihnYW1lLnVzZXIsIENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVIpKSB7XG4gICAgICAgICAgZG9jLnNoZWV0LnJlbmRlcih0cnVlLCB7IHBhZ2VJZCwgYW5jaG9yIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvYy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlVGlsZUpvdXJuYWxQYWdlcyAoYWN0aXZlLCB0aWxlVXVpZHMsIGpvdXJuYWxVdWlkcywgcGFnZVV1aWRzLCB7IHBhZ2VQZXJtaXNzaW9uID0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUiB9ID0ge30pIHtcbiAgICBmb3IgKGNvbnN0IGRvY1V1aWQgb2YgdGlsZVV1aWRzKSB7XG4gICAgICBjb25zdCBkb2MgPSBhd2FpdCBmcm9tVXVpZChkb2NVdWlkKVxuICAgICAgaWYgKGRvYykge1xuICAgICAgICBhd2FpdCBkb2MudXBkYXRlKHsgaGlkZGVuOiAhYWN0aXZlIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdUaWxlICcgKyBkb2NVdWlkICsgJyBub3QgbG9hZGVkJylcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcGVybWlzc2lvbiA9ICghYWN0aXZlID8gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FIDogcGFnZVBlcm1pc3Npb24pXG4gICAgZm9yIChjb25zdCBkb2NVdWlkIG9mIHBhZ2VVdWlkcykge1xuICAgICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoZG9jVXVpZClcbiAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgYXdhaXQgZG9jLnVwZGF0ZSh7ICdvd25lcnNoaXAuZGVmYXVsdCc6IHBlcm1pc3Npb24gfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0pvdXJuYWwgUGFnZSAnICsgZG9jVXVpZCArICcgbm90IGxvYWRlZCcpXG4gICAgICB9XG4gICAgfVxuICAgIC8vIERvIG5vdCBub25lIC8gb3duZXIgam91cm5hbHMgaWYgYW55IGVudHJpZXMgZG8gbm90IG1hdGNoXG4gICAgZm9yIChjb25zdCBkb2NVdWlkIG9mIGpvdXJuYWxVdWlkcykge1xuICAgICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoZG9jVXVpZClcbiAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgaWYgKHBhZ2VVdWlkcy5sZW5ndGggPT09IDAgfHwgcGVybWlzc2lvbiA9PT0gcGFnZVBlcm1pc3Npb24gfHwgZG9jLnBhZ2VzLmNvbnRlbnRzLmZpbHRlcihkID0+IGQub3duZXJzaGlwLmRlZmF1bHQgPT09IHBhZ2VQZXJtaXNzaW9uKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBhd2FpdCBkb2MudXBkYXRlKHsgJ293bmVyc2hpcC5kZWZhdWx0JzogKCFhY3RpdmUgPyBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkUgOiBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKSB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdKb3VybmFsICcgKyBkb2NVdWlkICsgJyBub3QgbG9hZGVkJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9TY2VuZSAoc2NlbmVVdWlkKSB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoc2NlbmVVdWlkKVxuICAgIGlmIChkb2MpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBkb2MudmlldygpXG4gICAgICB9LCAxMDApXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NjZW5lICcgKyBzY2VuZVV1aWQgKyAnIG5vdCBsb2FkZWQnKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZnJvbVV1aWQsIEhvb2tzLCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBjb25maWd1cmVEb2N1bWVudHMgfSBmcm9tICcuLi9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMuanMnXG5pbXBvcnQgeyBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyB9IGZyb20gJy4uL3NjcmlwdHMvbG9hZC10ZW1wbGF0ZXMuanMnXG5pbXBvcnQgeyByZWdpc3RlclNldHRpbmdzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci1zZXR0aW5ncy5qcydcbmltcG9ydCB7IHJlZ2lzdGVyU2hlZXRzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci1zaGVldHMuanMnXG5pbXBvcnQgeyBoYW5kbGViYXJzSGVscGVyIH0gZnJvbSAnLi4vc2NyaXB0cy9oYW5kbGViYXJzLWhlbHBlci5qcydcbmltcG9ydCB7IGNvbXBlbmRpdW1GaWx0ZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBlbmRpdW0tZmlsdGVyLmpzJ1xuaW1wb3J0IHsgQ29DSUQgfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi4vYXBwcy9jb2M3LWxpbmsuanMnXG5pbXBvcnQgKiBhcyBEaWNlU29OaWNlUmVhZHlMYXN0IGZyb20gJy4vZGljZS1zby1uaWNlLXJlYWR5LWxhc3QuanMnXG5pbXBvcnQgQ29DN0NsaWNrYWJsZUV2ZW50cyBmcm9tICcuLi9hcHBzL2NvYzctY2xpY2thYmxlLWV2ZW50cy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ2luaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uZmlndXJlRG9jdW1lbnRzKClcbiAgICBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcygpXG4gICAgcmVnaXN0ZXJTZXR0aW5ncygpXG4gICAgcmVnaXN0ZXJTaGVldHMoKVxuICAgIGhhbmRsZWJhcnNIZWxwZXIoKVxuICAgIGNvbXBlbmRpdW1GaWx0ZXIoKVxuICAgIENvQ0lELmluaXQoKVxuICAgIENvQzdMaW5rLmluaXQoKVxuICAgIERpY2VTb05pY2VSZWFkeUxhc3QubGlzdGVuKClcbiAgICBDb0M3Q2xpY2thYmxlRXZlbnRzLmluaXRTZWxmKClcblxuICAgIENPTkZJRy5UZXh0RWRpdG9yLmVucmljaGVycy5wdXNoKHtcbiAgICAgIHBhdHRlcm46IC9AY2hhb3NpdW1VVUlEXFxbKFteI1xcXV0rKSg/OiMoW15cXF1dKykpP10oPzp7KFtefV0rKX0pPy9naSxcbiAgICAgIGVucmljaGVyOiBhc3luYyAobWF0Y2gsIHsgcmVsYXRpdmVUbyB9ID0ge30pID0+IHtcbiAgICAgICAgY29uc3QgW3NlbGVjdG9ycywgaGFzaCwgbmFtZV0gPSBtYXRjaC5zbGljZSgxLCA0KVxuICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIGNsYXNzZXM6IFsnY29udGVudC1saW5rJywgJ2Jyb2tlbiddLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdW5saW5rJ1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnRzID0gc2VsZWN0b3JzPy5zcGxpdCgvXFxzKixcXHMqLylcbiAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgY29uc3Qga2V5cyA9IHBhcnRzLnJlZHVjZSgoYywgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5dmFsID0gaS5tYXRjaCgvXigoW146XSspOikoLispPyQvKVxuICAgICAgICAgICAgaWYgKGtleXZhbCkge1xuICAgICAgICAgICAgICBjW2tleXZhbFsyXV0gPSBrZXl2YWxbM11cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGMudXVpZCA9IGlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgICAgfSwge30pXG4gICAgICAgICAgaWYgKGtleXMudXVpZCkge1xuICAgICAgICAgICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoa2V5cy51dWlkLCB7IHJlbGF0aXZlOiByZWxhdGl2ZVRvIH0pXG4gICAgICAgICAgICBpZiAoZG9jKSB7XG4gICAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSB8fCBkb2MubmFtZSB8fCBrZXlzLnV1aWQsXG4gICAgICAgICAgICAgICAgY2xhc3NlczogWydjb250ZW50LWxpbmsnXSxcbiAgICAgICAgICAgICAgICBkYXRhc2V0OiB7XG4gICAgICAgICAgICAgICAgICBsaW5rOiAnJyxcbiAgICAgICAgICAgICAgICAgIHV1aWQ6IGRvYy51dWlkLFxuICAgICAgICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAgIHR5cGU6IGRvYy5kb2N1bWVudE5hbWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGljb246IGtleXMuaWNvbiA/PyBDT05GSUdbZG9jLmRvY3VtZW50TmFtZV0uc2lkZWJhckljb25cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoaGFzaCkge1xuICAgICAgICAgICAgICAgIGRhdGEuZGF0YXNldC5oYXNoID0gaGFzaFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChrZXlzLmltZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICAgICAgICAgICAgICBhLmNsYXNzTGlzdC5hZGQoZGF0YS5jbGFzc2VzKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YXNldCkpIHtcbiAgICAgICAgICAgICAgICAgIGlmICgodiAhPT0gbnVsbCkgJiYgKHR5cGVvZiB2ICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5kYXRhc2V0W2tdID0gdlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhLmlubmVySFRNTCA9IGA8aW1nIHNyYz1cIiR7a2V5cy5pbWd9XCIgaGVpZ2h0PVwiMTZweFwiIHN0eWxlPVwidmVydGljYWwtYWxpZ246Ym90dG9tO2JvcmRlcjowO1wiPiR7ZGF0YS5uYW1lfWBcbiAgICAgICAgICAgICAgICByZXR1cm4gYVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFRleHRFZGl0b3IuY3JlYXRlQW5jaG9yKGRhdGEpXG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0Jvb2sgfSBmcm9tICcuLi9pdGVtcy9ib29rL2RhdGEuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3U3BlbGwgfSBmcm9tICcuLi9pdGVtcy9zcGVsbC9kYXRhLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlIH0gZnJvbSAnLi4vaXRlbXMvY2hhc2UvZGF0YS5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDb0M3U2tpbGwgfSBmcm9tICcuLi9pdGVtcy9za2lsbC9kYXRhLmpzJ1xuaW1wb3J0IHsgQ29DN1ZlaGljbGUgfSBmcm9tICcuLi9hY3RvcnMvdmVoaWNsZS9kYXRhLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlRG9jdW1lbnRzICgpIHtcbiAgQ09ORklHLkFjdGl2ZUVmZmVjdC5kb2N1bWVudENsYXNzID0gQ29DN0FjdGl2ZUVmZmVjdFxuICBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzcyA9IENvQ0FjdG9yXG4gIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXMgPSB7XG4gICAgdmVoaWNsZTogQ29DN1ZlaGljbGVcbiAgfVxuICBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID0gQ29DN0l0ZW1cbiAgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzID0ge1xuICAgIGJvb2s6IENvQzdCb29rLFxuICAgIHNwZWxsOiBDb0M3U3BlbGwsXG4gICAgY2hhc2U6IENvQzdDaGFzZSxcbiAgICBza2lsbDogQ29DN1NraWxsXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBsb2FkVGVtcGxhdGVzICovXG5cbi8qKlxuICogRGVmaW5lIGEgc2V0IG9mIHRlbXBsYXRlIHBhdGhzIHRvIHByZS1sb2FkXG4gKiBQcmUtbG9hZGVkIHRlbXBsYXRlcyBhcmUgY29tcGlsZWQgYW5kIGNhY2hlZCBmb3IgZmFzdCBhY2Nlc3Mgd2hlbiByZW5kZXJpbmdcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbmV4cG9ydCBjb25zdCBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgLyoqIERlZmluZSB0ZW1wbGF0ZSBwYXRocyB0byBsb2FkICovXG4gIGNvbnN0IHRlbXBsYXRlUGF0aHMgPSBbXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL25wYy1za2lsbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL25wYy1jb21iYXQuaHRtbCcsXG5cbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItaW52ZW50b3J5Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1pbnZlbnRvcnktaXRlbXMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWJhY2tncm91bmQuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY29tbW9uL2FjdGl2ZS1lZmZlY3RzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLW15dGhvcy1lbm91bnRlcnMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3Ita2VlcGVyLW15dGhvcy1lbm91bnRlcnMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3Itc2tpbGxzLXYyLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9jaGFyYWN0ZXItZGV2ZWxvcG1lbnQtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2RldmVsb3BtZW50LWNvbnRyb2xzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy92aXRhbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2NvbWJhdC5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyLXNoZWV0LXYyLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jaGFyYWN0ZXIvc3VtbWFyeS5odG1sJyxcblxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svZGV0YWlscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zcGVsbC9kZXRhaWxzLmh0bWwnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2ludHJvZHVjdGlvbi5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9jb25maWd1cmF0aW9uLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NlbGVjdC1zZXR1cC5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZWxlY3QtYXJjaGV0eXBlLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NlbGVjdC1vY2N1cGF0aW9uLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1jaGFyYWN0ZXJpc3RpY3MuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LWF0dHJpYnV0ZXMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvdmlldy1hdHRyaWJ1dGVzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1pbnZlc3RpZ2F0b3IuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LW9jY3VwYXRpb24tc2tpbGxzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3RvZ2dsZS1za2lsbC5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtYXJjaGV0eXBlLXNraWxscy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9wb2ludHMtc2tpbGxzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2JhY2tzdG9yeS5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9jcmVhdGUuaGJzJyxcblxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvbWVzc2FnZXMvcm9sbC1jb250YWluZXIuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L21lc3NhZ2VzL3JvbGwtZGljZS5oYnMnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLXBpY3R1cmUtZnJhbWUtdjMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItY2hhcmFjdGVyaXN0aWNzLXYzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWRldmVsb3BtZW50LXYzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLXNraWxscy12My5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1jb21iYXQtdjMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItcG9zc2Vzc2lvbnMtdjMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItYmFja2dyb3VuZC12My5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1rZWVwZXItbm90ZXMtdjMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItYWN0aXZlLWVmZmVjdHMtdjMuaGJzJ1xuICBdXG5cbiAgLyoqIExvYWQgdGhlIHRlbXBsYXRlIHBhcnRzICovXG4gIHJldHVybiBsb2FkVGVtcGxhdGVzKHRlbXBsYXRlUGF0aHMpXG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBDT05TVCwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3RGVjYWRlckRpZSB9IGZyb20gJy4uL2FwcHMvZGVjYWRlci1kaWUuanMnXG5pbXBvcnQgeyBDb0M3RGVjYWRlckRpZU90aGVyIH0gZnJvbSAnLi4vYXBwcy9kZWNhZGVyLWRpZS1vdGhlci5qcydcbmltcG9ydCB7IENvQzdHYW1lUnVsZVNldHRpbmdzIH0gZnJvbSAnLi9nYW1lLXJ1bGVzLmpzJ1xuaW1wb3J0IHsgQ29DN0RpcmVjdG9yeVBpY2tlciB9IGZyb20gJy4vY29jNy1kaXJlY3RvcnktcGlja2VyLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTZXR0aW5ncyAoKSB7XG4gIC8qKlxuICAgKiBSdWxlc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3Rlck1lbnUoJ0NvQzcnLCAnZ2FtZVJ1bGVzJywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlJ1bGVzLk5hbWUnLFxuICAgIGxhYmVsOiAnQ29DNy5TZXR0aW5ncy5SdWxlcy5MYWJlbCcsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuSGludCcsXG4gICAgaWNvbjogJ2ZhcyBmYS1ib29rJyxcbiAgICB0eXBlOiBDb0M3R2FtZVJ1bGVTZXR0aW5ncyxcbiAgICByZXN0cmljdGVkOiB0cnVlXG4gIH0pXG4gIENvQzdHYW1lUnVsZVNldHRpbmdzLnJlZ2lzdGVyU2V0dGluZ3MoKVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Vc2VDb250ZXh0TWVudXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Vc2VDb250ZXh0TWVudXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGhvbGVVcGxvYWREaXJlY3RvcnknLCB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuRGhvbGVVcGxvYWQuRGlyZWN0b3J5Lk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLkRob2xlVXBsb2FkLkRpcmVjdG9yeS5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQ29DN0RpcmVjdG9yeVBpY2tlci5EZWZhdWx0RGlyZWN0b3J5LFxuICAgIGRlZmF1bHQ6ICdbZGF0YV0gd29ybGRzLycgKyBnYW1lLndvcmxkLmlkICsgJy9kaG9sZS1pbWFnZXMnXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd3b3JsZEVyYScsIHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5Xb3JsZEVyYS5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5Xb3JsZEVyYS5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ3N0YW5kYXJkJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogQ09DNy5lcmFzLFxuICAgIG9uQ2hhbmdlOiAoKSA9PiB7XG4gICAgICB1aS5wbGF5ZXJzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfSlcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dXb3JsZEVyYScsIHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5TaG93V29ybGRFcmEuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuU2hvd1dvcmxkRXJhLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgb25DaGFuZ2U6ICgpID0+IHtcbiAgICAgIHVpLnBsYXllcnMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9KVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZHJvcENvQ0lEJywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICcnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICAnJzogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELlByb21wdCcsXG4gICAgICBZOiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuVXNlQ29DSUQnLFxuICAgICAgTjogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELklnbm9yZUNvQ0lEJ1xuICAgIH1cbiAgfSlcblxuICAvKipcbiAgICogSW5pdGlhdGl2ZVxuICAgKi9cbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5SW5pdERpY2VzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdERpY2VzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuZGlzcGxheUluaXREaWNlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5SW5pdEFzVGV4dCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheUluaXRBc1RleHQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdEFzVGV4dEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogUm9sbCBjdXN0b21pc2Fpb25zXG4gICAqL1xuICAvKiogU3RhbmRieSByb2xscyBtYWRlIGJ5IEdNIGZyb20gcGxheWVyIHNoZWV0ICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU3RhbmJ5R01Sb2xscycsXG4gICAgaGludDogJ1NFVFRJTkdTLlN0YW5ieUdNUm9sbHNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyB1c2FnZSBvZiBhIGZsYXQgZGljZSBtb2RpZmllciAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FsbG93RmxhdERpY2VNb2RpZmllcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIEFsbG93IHVzYWdlIG9mIGEgZmxhdCB0aHJlc2hvbGQgbW9kaWZpZXIgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5BbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGVmYXVsdERpZmZpY3VsdHknLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EZWZhdWx0RGlmZmljdWx0eUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAncmVndWxhcicsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIHJlZ3VsYXI6ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlSZWd1bGFyJyxcbiAgICAgIHVua25vd246ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlVbmtub3duJ1xuICAgIH1cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzZWxmUm9sbFdoaXNwZXJUYXJnZXQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnZXZlcnlvbmUnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBub2JvZHk6ICdTRVRUSU5HUy5Eb05vdEFkdmlzZScsXG4gICAgICBvd25lcnM6ICdTRVRUSU5HUy5BZHZpc2VPd25lcnNPbmx5JyxcbiAgICAgIGV2ZXJ5b25lOiAnU0VUVElOR1MuQWR2aXNlQWxsUGxheWVyJ1xuICAgIH1cbiAgfSlcblxuICAvKipcbiAgICogQ2hhdCBDYXJkc1xuICAgKi9cbiAgLyoqIFRydXN0ZWQgcGxheWVycyB3aWxsIGJlIGFsbG93ZWQgdG8gbW9kaWZ5IGNoYXQgY2FyZHMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5UcnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBUcnVzdGVkIHBsYXllcnMgd2lsbCBiZSBhbGxvd2VkIHRvIHNlZSBjaGF0IGNhcmRzIHByaXZhdGUgc2VjdGlvbnMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0cnVzdGVkQ2FuU2VlQ2hhdENhcmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlRydXN0ZWRDYW5TZWVDaGF0Q2FyZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlRydXN0ZWRDYW5TZWVDaGF0Q2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgdGhlIG5lZWQgdG8gZGlzcGxheSBhY3RvciBpbWFnZSBvbiBjaGF0IGNhcmRzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJyxcbiAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlSZXN1bHRUeXBlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5UmVzdWx0VHlwZScsXG4gICAgc2NvcGU6ICdjbGllbnQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgdGhlIHVzZSBvZiB0b2tlbiBpbnN0ZWFkIG9mIHBvcnRyYWl0cyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3VzZVRva2VuJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Vc2VUb2tlbicsXG4gICAgaGludDogJ1NFVFRJTkdTLlVzZVRva2VuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogU2NlbmUgU2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkVuYWJsZVN0YXR1c0ljb25zJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRW5hYmxlU3RhdHVzSWNvbnNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZ3JpZFNwYWNlcycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXN0YW5jZUVsZXZhdGlvbicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQ2hlY2tFbGV2YXRpb24nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5DaGVja0VsZXZhdGlvbkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXN0YW5jZVRoZWF0cmVPZlRoZU1pbmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNjZW5lRGlzdGFuY2VOb3RDYWxjdWFsdGVkTm9FcnJvcicsXG4gICAgaGludDogJ1NFVFRJTkdTLlNjZW5lRGlzdGFuY2VOb3RDYWxjdWFsdGVkTm9FcnJvckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBEZWZhdWx0IGJlaGF2aW9yIHdoZW4gTlBDIGlzIGNyZWF0ZWQgb24gYSBzY2VuZSAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Rva2VuRHJvcE1vZGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlRva2VuRHJvcE1vZGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Ub2tlbkRyb3BNb2RlSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdhc2snLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBhc2s6ICdTRVRUSU5HUy5Ub2tlbkRyb3BNb2RlQXNrJyxcbiAgICAgIHJvbGw6ICdTRVRUSU5HUy5Ub2tlbkRyb3BNb2RlUm9sbCcsXG4gICAgICBhdmVyYWdlOiAnU0VUVElOR1MuVG9rZW5Ecm9wTW9kZUF2ZXJhZ2UnLFxuICAgICAgaWdub3JlOiAnU0VUVElOR1MuVG9rZW5Ecm9wTW9kZUlnbm9yZSdcbiAgICB9XG4gIH0pXG4gIC8qKlxuICAgKiBHYW1lIEFydHdvcmsgU2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3ZlcnJpZGVHYW1lQXJ0d29yaycsXG4gICAgaGludDogJ1NFVFRJTkdTLk92ZXJyaWRlR2FtZUFydHdvcmtIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycpKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRQYXVzZUltYWdlJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFBhdXNlSW1hZ2UnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFBhdXNlSW1hZ2VIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdGltZS10cmFwLnN2ZycsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0UGF1c2VUZXh0Jywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFBhdXNlVGV4dCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0UGF1c2VUZXh0SGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdUaGUgQmxpbmQgSWRpb3QgR29kIGlzIGRyZWFtaW5nLi4uJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogU2hlZXQgc2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheVBsYXllck5hbWVPblNoZWV0Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5UGxheWVyTmFtZU9uU2hlZXQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndG9vbFRpcERlbGF5Jywge1xuICAgIG5hbWU6ICdDb0M3LnRvb2xUaXBEZWxheScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IDE1MDAsXG4gICAgdHlwZTogTnVtYmVyXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnaGlkZVBhcnRWYWx1ZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmhpZGVQYXJ0VmFsdWVzJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dJY29uc09ubHknLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLnNob3dJY29uc09ubHknLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyBwbGF5ZXIgdG8gdW5sb2NrIHRoZSBzaGVldCBvdXRzaWRlIG9mIGNyZWF0aW9uIG1vZGUgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlBsYXllclVubG9ja1NoZWV0TW9kZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdhbHdheXMnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBhbHdheXM6ICdTRVRUSU5HUy5BbHdheXNFZGl0YWJsZScsXG4gICAgICBjcmVhdGlvbjogJ1NFVFRJTkdTLkNyZWF0aW9uTW9kZU9ubHknLFxuICAgICAgbmV2ZXI6ICdTRVRUSU5HUy5OZXZlckVkaXRhYmxlJ1xuICAgIH1cbiAgfSlcbiAgLyoqIEFsbG93IHBsYXllciB0byBtb2RpZnkgc3RhdHVzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3RhdHVzUGxheWVyRWRpdGFibGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlN0YXR1c1BsYXllckVkaXRhYmxlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuU3RhdHVzUGxheWVyRWRpdGFibGVIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk9uZUJsb2NrQmFja1N0b3J5JyxcbiAgICBoaW50OiAnU0VUVElOR1MuT25lQmxvY2tCYWNrU3RvcnlIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PdmVycmlkZVNoZWV0QXJ0d29yaycsXG4gICAgaGludDogJ1NFVFRJTkdTLk92ZXJyaWRlU2hlZXRBcnR3b3JrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJykpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiBcInVybCgnLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmQud2VicCcpIDQgcmVwZWF0XCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnc2xpY2UnLFxuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgY2hvaWNlczoge1xuICAgICAgICBzbGljZTogJ1NFVFRJTkdTLkJhY2tncm91bmRTbGljZScsXG4gICAgICAgIGF1dG86ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQXV0bycsXG4gICAgICAgIGNvbnRhaW46ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQ29udGFpbicsXG4gICAgICAgIGNvdmVyOiAnU0VUVElOR1MuQmFja2dyb3VuZENvdmVyJ1xuICAgICAgfVxuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZC53ZWJwJylcIixcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrU2hlZXRJbWFnZScsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya1NoZWV0SW1hZ2VIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoJy4vYXNzZXRzL2ltYWdlcy90ZW50YWNsZXMud2VicCcpXCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0Zyb250Q29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtGcm9udENvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDQzLDU1LDgzLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtCYWNrZ3JvdW5kQ29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtCYWNrZ3JvdW5kQ29sb3JIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3JnYmEoMTAzLDExLDExLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0ludGVyYWN0aXZlQ29sb3JIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3JnYmEoMTAzLDExLDExLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGhIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgIHR5cGU6IEJvb2xlYW5cbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Jywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udEJvbGQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250Qm9sZCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udFNpemUnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250U2l6ZScsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IDE2LFxuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgb25DaGFuZ2U6IHNpemUgPT4gX3NldFJvb3RGb250U2l6ZShzaXplKVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBfc2V0Um9vdEZvbnRTaXplIChzaXplKSB7XG4gICAgICAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJywgc2l6ZSlcbiAgICAgIHVpLnNpZGViYXIucmVuZGVyKHRydWUpXG4gICAgICBmb3IgKGNvbnN0IFssIHddIG9mIE9iamVjdC5lbnRyaWVzKHVpLndpbmRvd3MpKSB7XG4gICAgICAgIHcucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdlYXBvbnNcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcmVnYXJkVXNlUGVyUm91bmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3JlZ2FyZFVzZVBlclJvdW5kJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGlzcmVnYXJkVXNlUGVyUm91bmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3JlZ2FyZEFtbW8nLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3JlZ2FyZEFtbW8nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNyZWdhcmRBbW1vSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNyZWdhcmROb1RhcmdldHMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRvTm90UHJvbXB0Tm9UYXJnZXRTZWxlY3RlZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLkRvTm90UHJvbXB0Tm9UYXJnZXRTZWxlY3RlZEhpdCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogQ2hhc2VzXG4gICAqL1xuICAvLyBNT1ZFRCBUTyBDSEFTU0UgSU5ESVZJRFVBTCBTRVRUSU5HXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnY2hhc2VTaG93VG9rZW5Nb3ZlbWVudCcsIHtcbiAgLy8gICBuYW1lOiAnU0VUVElOR1MuQ2hhc2VTaG93VG9rZW5Nb3ZlbWVudCcsXG4gIC8vICAgaGludDogJ1NFVFRJTkdTLkNoYXNlU2hvd1Rva2VuTW92ZW1lbnRIaW50JyxcbiAgLy8gICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gICBjb25maWc6IHRydWUsXG4gIC8vICAgZGVmYXVsdDogdHJ1ZSxcbiAgLy8gICB0eXBlOiBCb29sZWFuXG4gIC8vIH0pXG5cbiAgLyoqXG4gICAqIERpY2UgU28gTmljZVxuICAgKi9cbiAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5bmNEaWNlM2QnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuU3luY0RpY2UzRCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuU3luY0RpY2UzREhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiB0cnVlLFxuICAgICAgdHlwZTogQm9vbGVhblxuICAgIH0pXG4gICAgY29uc3QgW3ZlcnNpb25dID0gZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LnZlcnNpb24uc3BsaXQoJy4nKVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHZlcnNpb24pKSAmJiBOdW1iZXIodmVyc2lvbikgPj0gMykge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0ZW5EaWVCb251cycsIHtcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlRlbkRpZUJvbnVzJyxcbiAgICAgICAgaGludDogJ1NFVFRJTkdTLlRlbkRpZUJvbnVzSGludCcsXG4gICAgICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnYnJvbnplJyxcbiAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICB9KVxuICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0ZW5EaWVQZW5hbHR5Jywge1xuICAgICAgICBuYW1lOiAnU0VUVElOR1MuVGVuRGllUGVuYWx0eScsXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5UZW5EaWVQZW5hbHR5SGludCcsXG4gICAgICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnYmxvb2Rtb29uJyxcbiAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXZlbG9wZXIgYW5kIGRlYnVnIHNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2RlYnVnbW9kZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGVidWdNb2RlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGVidWdNb2RlSGludCcsXG4gICAgc2NvcGU6ICdjbGllbnQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZXhwZXJpbWVudGFsRmVhdHVyZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNob3dFeHBlcmltZW50YWxGZWF0dXJlcycsXG4gICAgaGludDogJ1NFVFRJTkdTLlNob3dFeHBlcmltZW50YWxGZWF0dXJlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIC8qKlxuICAgKiBPdGhlciBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdoaWRkZW5kZXZtZW51Jywge1xuICAgIG5hbWU6ICdIaWRkZW4gZGV2IG1lbnUnLFxuICAgIGhpbnQ6ICdVc2UgYXQgeW91ciBvd24gcmlzaycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywge1xuICAgIG5hbWU6ICdEZXYgcGhhc2VkIGFsbG93ZWQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICAvKiogRmVhdDogd2VsY29tZSBtZXNzYWdlICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2hvd1dlbGNvbWVNZXNzYWdlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5zaG93V2VsY29tZU1lc3NhZ2UnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5zaG93V2VsY29tZU1lc3NhZ2UnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcsIHtcbiAgICBuYW1lOiAnQ2hhciBjcmVhdGlvbiBhbGxvd2VkJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywge1xuICAgIG5hbWU6ICdTeXN0ZW0gdXBkYXRlIHZlcnNpb24nLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICcwJ1xuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywge1xuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDoge31cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd4cEVuYWJsZWQnLCB7XG4gICAgbmFtZTogJ0VuYWJsZSBYUCBnYWluJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dJbnN0cnVjdGlvbnMnLCB7XG4gICAgbmFtZTogJ1Nob3cgY2hhbmdlbG9nL2luc3RydWN0aW9ucycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJzAnXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnLCB7XG4gICAgbmFtZTogJ0ZvcmNlIHNwZWNpZmljIHNldHVwIENvQyBJRCBmb3IgSW52ZXN0aWdhdG9yIFdpemFyZCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJydcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScsIHtcbiAgICBuYW1lOiAnTnVtYmVyIG9mIGludmVzdGlnYXRvcnMgYSBzaW5nbGUgdXNlciB3aXRob3V0IGNyZWF0ZSBhY3RvciByaWdodHMgY2FuIG93bicsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMFxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZE93bmVyc2hpcCcsIHtcbiAgICBuYW1lOiAnRGVmYXVsdCBwZXJtaXNzaW9ucyBmb3Igbm9uIG93bmVyIHBsYXllcnMnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFJlcm9sbHMnLCB7XG4gICAgbmFtZTogJ0FsbG93IHBsYXllcnMgdG8gcmVyb2xsIGNoYXJhY3RlcmlzdGljcycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUG9pbnRCdXknLCB7XG4gICAgbmFtZTogJ0ZvcmNlIHBvaW50IGJ1eSBpbnN0ZWFkIG9mIHNldHVwIGNob2ljZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVpY2tGaXJlJywge1xuICAgIG5hbWU6ICdRdWljayBmaXJlIHNldHVwIHZhbHVlcycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBBcnJheSxcbiAgICBkZWZhdWx0OiBbXVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZENob29zZVZhbHVlcycsIHtcbiAgICBuYW1lOiAnQ2hvb3NlIHdoZXJlIHRvIHBsYWNlIHJvbGxlZCBjaGFyYWN0ZXJpc3RpY3MnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICAvKiogU2V0IGFuIGluaXRpYXRpdmUgZm9ybXVsYSBmb3IgdGhlIHN5c3RlbSAqL1xuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XG4gICAgZm9ybXVsYTogJ0BjaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlJyxcbiAgICBkZWNpbWFsczogNFxuICB9XG4gIENPTkZJRy5kZWJ1Zy5ob29rcyA9ICEhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVidWdtb2RlJylcbiAgQ09ORklHLkRpY2UudGVybXMudCA9IENvQzdEZWNhZGVyRGllXG4gIENPTkZJRy5EaWNlLnRlcm1zLm8gPSBDb0M3RGVjYWRlckRpZU90aGVyXG59XG4iLCIvKiBnbG9iYWwgQWN0b3JzLCBBY3RvclNoZWV0LCBJdGVtcywgSXRlbVNoZWV0LCBKb3VybmFsLCBKb3VybmFsU2hlZXQsIE1hY3JvQ29uZmlnLCBNYWNyb3MsIFBsYXlsaXN0Q29uZmlnLCBQbGF5bGlzdHMsIFJvbGxUYWJsZXMsIFJvbGxUYWJsZUNvbmZpZywgU2NlbmVzLCBTY2VuZUNvbmZpZyAqL1xuaW1wb3J0IHsgQ29DN0FyY2hldHlwZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2FyY2hldHlwZS5qcydcbmltcG9ydCB7IENvQzdBcm1vclNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2FybW9yLmpzJ1xuaW1wb3J0IHsgQ29DN0Jvb2tTaGVldCB9IGZyb20gJy4uL2l0ZW1zL2Jvb2svc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q2hhcmFjdGVyU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldFYzIH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXItdjMuanMnXG5pbXBvcnQgeyBDb0M3Q2hhcmFjdGVyU2hlZXRNaW5pbWl6ZWQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci1taW5pbWl6ZWQuanMnXG5pbXBvcnQgeyBDb0M3Q29udGFpbmVyU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NvbnRhaW5lci5qcydcbmltcG9ydCB7IENvQzdDaGFzZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvY2hhc2Uvc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY3JlYXR1cmUtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0VjIgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvaXRlbS1zaGVldFYyLmpzJ1xuaW1wb3J0IHsgQ29DN0pvdXJuYWxTaGVldCB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LWpvdXJuYWwtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3TWFjcm9Db25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1tYWNyby1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3TlBDU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL25wYy1zaGVldC5qcydcbmltcG9ydCB7IENvQzdPY2N1cGF0aW9uU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcydcbmltcG9ydCB7IENvQzdQbGF5bGlzdENvbmZpZyB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LXBsYXlsaXN0LWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdSb2xsVGFibGVDb25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1yb2xsLXRhYmxlLWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdTY2VuZUNvbmZpZyB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LXNjZW5lLWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdTZXR1cFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3NldHVwLmpzJ1xuaW1wb3J0IHsgQ29DN1NraWxsU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvc2tpbGwuanMnXG5pbXBvcnQgeyBDb0M3U3BlbGxTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NwZWxsL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN1N0YXR1c1NoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3N0YXR1cy5qcydcbmltcG9ydCB7IENvQzdUYWxlbnRTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy90YWxlbnQuanMnXG5pbXBvcnQgeyBDb0M3VmVoaWNsZVNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy92ZWhpY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN1dlYXBvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3dlYXBvbi1zaGVldC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2hlZXRzICgpIHtcbiAgQWN0b3JzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEFjdG9yU2hlZXQpXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN05QQ1NoZWV0LCB7XG4gICAgdHlwZXM6IFsnbnBjJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3VmVoaWNsZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsndmVoaWNsZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NyZWF0dXJlU2hlZXQsIHtcbiAgICB0eXBlczogWydjcmVhdHVyZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NvbnRhaW5lclNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY29udGFpbmVyJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q2hhcmFjdGVyU2hlZXQsIHtcbiAgICB0eXBlczogWydjaGFyYWN0ZXInXVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDaGFyYWN0ZXJTaGVldE1pbmltaXplZCwge1xuICAgIHR5cGVzOiBbJ2NoYXJhY3RlciddXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NoYXJhY3RlclNoZWV0VjMsIHtcbiAgICB0eXBlczogWydjaGFyYWN0ZXInXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIEl0ZW1zLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEl0ZW1TaGVldClcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTa2lsbFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc2tpbGwnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1dlYXBvblNoZWV0LCB7XG4gICAgdHlwZXM6IFsnd2VhcG9uJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdCb29rU2hlZXQsIHtcbiAgICB0eXBlczogWydib29rJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTcGVsbFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc3BlbGwnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1RhbGVudFNoZWV0LCB7XG4gICAgdHlwZXM6IFsndGFsZW50J10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTdGF0dXNTaGVldCwge1xuICAgIHR5cGVzOiBbJ3N0YXR1cyddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3T2NjdXBhdGlvblNoZWV0LCB7XG4gICAgdHlwZXM6IFsnb2NjdXBhdGlvbiddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3QXJjaGV0eXBlU2hlZXQsIHtcbiAgICB0eXBlczogWydhcmNoZXR5cGUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NldHVwU2hlZXQsIHtcbiAgICB0eXBlczogWydzZXR1cCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q2hhc2VTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NoYXNlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdBcm1vclNoZWV0LCB7XG4gICAgdHlwZXM6IFsnYXJtb3InXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0l0ZW1TaGVldCwgeyB0eXBlczogWydpdGVtJ10gfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdJdGVtU2hlZXRWMiwge1xuICAgIHR5cGVzOiBbJ2l0ZW0nXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIFNjZW5lcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBTY2VuZUNvbmZpZylcbiAgU2NlbmVzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U2NlbmVDb25maWcsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIEpvdXJuYWwudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgSm91cm5hbFNoZWV0KVxuICBKb3VybmFsLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Sm91cm5hbFNoZWV0LCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBSb2xsVGFibGVzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIFJvbGxUYWJsZUNvbmZpZylcbiAgUm9sbFRhYmxlcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1JvbGxUYWJsZUNvbmZpZywge1xuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgTWFjcm9zLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIE1hY3JvQ29uZmlnKVxuICBNYWNyb3MucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdNYWNyb0NvbmZpZywge1xuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgUGxheWxpc3RzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIFBsYXlsaXN0Q29uZmlnKVxuICBQbGF5bGlzdHMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdQbGF5bGlzdENvbmZpZywge1xuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSGFuZGxlYmFycyAqL1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5cbmV4cG9ydCBjb25zdCBoYW5kbGViYXJzSGVscGVyID0gZnVuY3Rpb24gKCkge1xuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdyb2xsQWN0b3JJbWcnLCBmdW5jdGlvbiAoYWN0b3JLZXkpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleShhY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9KVxuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdsb2NhbGl6ZVJvbGxOYW1lJywgZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gb3B0aW9ucy5oYXNoLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/IGZhbHNlIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcob3B0aW9ucy5oYXNoLmRpZmZpY3VsdHkpXG4gICAgY29uc3QgbW9kaWZpZXIgPSAob3B0aW9ucy5oYXNoLm1vZGlmaWVyID4gMCA/IGArJHtvcHRpb25zLmhhc2gubW9kaWZpZXJ9YCA6IG9wdGlvbnMuaGFzaC5tb2RpZmllciA8IDAgPyBvcHRpb25zLmhhc2gubW9kaWZpZXIudG9TdHJpbmcoKSA6IGZhbHNlKVxuICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkxpbmtDaGVjaycgKyAoIWRpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJykgKyAoIW1vZGlmaWVyID8gJycgOiAnTW9kaWYnKSArICghb3B0aW9ucy5oYXNoLnB1c2hpbmcgPyAnJyA6ICdQdXNoaW5nJyksIHsgZGlmZmljdWx0eSwgbW9kaWZpZXIsIG5hbWU6IG9wdGlvbnMuaGFzaC5uYW1lIH0pXG4gIH0pXG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2NhbGNIYXJkJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlLnRvU3RyaW5nKCkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcih2YWx1ZSAvIDIpXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH0pXG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2NhbGNFeHRyZW1lJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlLnRvU3RyaW5nKCkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcih2YWx1ZSAvIDUpXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdkaWNlU29OaWNlUmVhZHknLCBkaWNlM2QgPT4ge1xuICAgIGZvciAoY29uc3Qgc3lzdGVtIGluIGRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zKSB7XG4gICAgICBjb25zdCBkMTAwID0gZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXNbc3lzdGVtXS5kaWNlLmZpbmQoZCA9PiBkLnR5cGUgPT09ICdkMTAwJylcbiAgICAgIGlmICh0eXBlb2YgZDEwMCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBkaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtc1tzeXN0ZW1dLmRpY2UuZmluZChkID0+IGQudHlwZSA9PT0gJ2R0JykgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgZGljZURlY2FkZXIgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKGQxMDApKSwgZDEwMClcbiAgICAgICAgICBkaWNlRGVjYWRlci50eXBlID0gJ2R0J1xuICAgICAgICAgIGRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zW3N5c3RlbV0uZGljZS5wdXNoKGRpY2VEZWNhZGVyKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXNbc3lzdGVtXS5kaWNlLmZpbmQoZCA9PiBkLnR5cGUgPT09ICdkbycpID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGRpY2VEZWNhZGVyID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihkMTAwKSksIGQxMDApXG4gICAgICAgICAgZGljZURlY2FkZXIudHlwZSA9ICdkbydcbiAgICAgICAgICBkaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtc1tzeXN0ZW1dLmRpY2UucHVzaChkaWNlRGVjYWRlcilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lICovXG5leHBvcnQgY2xhc3MgQ29DN1Rvb2x0aXBzIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuVG9vbFRpcEhvdmVyID0gbnVsbFxuICAgIHRoaXMudG9vbFRpcFRpbWVyID0gbnVsbFxuICB9XG5cbiAgZGlzcGxheVRvb2xUaXAgKHRvb2xUaXApIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5Ub29sVGlwSG92ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIGlmICghaXNOYU4oYm91bmRzLmxlZnQgfHwgJycpICYmICFpc05hTihib3VuZHMudG9wIHx8ICcnKSkge1xuICAgICAgICBsZXQgbGVmdCA9IGJvdW5kcy5sZWZ0XG4gICAgICAgIGxldCB0b3AgPSBib3VuZHMudG9wXG4gICAgICAgIGNvbnN0IGhlaWdodFRleHQgPSAkKHRoaXMuVG9vbFRpcEhvdmVyKS5vdXRlckhlaWdodCgpXG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJoZWxwLXRvb2x0aXBcIj4nICsgdG9vbFRpcCArICc8L2Rpdj4nKVxuICAgICAgICBjb25zdCB0aXAgPSAkKCcjaGVscC10b29sdGlwJylcbiAgICAgICAgY29uc3QgaGVpZ2h0VGlwID0gdGlwLm91dGVySGVpZ2h0KClcbiAgICAgICAgY29uc3Qgd2lkdGhUaXAgPSB0aXAub3V0ZXJXaWR0aCgpXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCBoZWlnaHRUZXh0ICogMS41ICsgaGVpZ2h0VGlwICsgdG9wKSB7XG4gICAgICAgICAgdG9wID0gdG9wIC0gaGVpZ2h0VGlwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9wID0gdG9wICsgaGVpZ2h0VGV4dCAqIDEuNVxuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IHdpZHRoVGlwICsgbGVmdCkge1xuICAgICAgICAgIGxlZnQgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIHdpZHRoVGlwXG4gICAgICAgIH1cbiAgICAgICAgdGlwLmNzcyh7XG4gICAgICAgICAgbGVmdDogbGVmdCArICdweCcsXG4gICAgICAgICAgdG9wOiB0b3AgKyAncHgnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcExlYXZlIChldmVudCkge1xuICAgIGlmIChnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIpXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBudWxsXG4gICAgICAkKCcjaGVscC10b29sdGlwJykucmVtb3ZlKClcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBNdXRhdGlvbk9ic2VydmVyLCBUb3VyLCB1aSAqL1xubGV0IENvQzdUb3VyID0gY2xhc3MgaW50ZXJuYWxDb0M3VG91ciB7fVxuaWYgKHR5cGVvZiBUb3VyICE9PSAndW5kZWZpbmVkJykge1xuICBDb0M3VG91ciA9IGNsYXNzIGludGVybmFsQ29DN1RvdXIgZXh0ZW5kcyBUb3VyIHtcbiAgICBhc3luYyB3YWl0Rm9yRWxlbWVudCAoc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zLCBvYnNlcnZlcikgPT4ge1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG5cbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgYXN5bmMgX3ByZVN0ZXAgKCkge1xuICAgICAgYXdhaXQgc3VwZXIuX3ByZVN0ZXAoKVxuXG4gICAgICAvLyBDbG9zZSBjdXJyZW50bHkgb3BlbiBhcHBsaWNhdGlvbnNcbiAgICAgIGlmICh0aGlzLnN0ZXBJbmRleCA9PT0gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFwcCBvZiBPYmplY3QudmFsdWVzKHVpLndpbmRvd3MpKSB7XG4gICAgICAgICAgYXBwLmNsb3NlKClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLndhaXRGb3JFbGVtZW50KHRoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3IpXG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5jdXJyZW50U3RlcC5zaWRlYmFyVGFiICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1aS5zaWRlYmFyLmFjdGl2YXRlVGFiKHRoaXMuY3VycmVudFN0ZXAuc2lkZWJhclRhYilcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBfcG9zdFN0ZXAgKCkge1xuICAgICAgYXdhaXQgc3VwZXIuX3Bvc3RTdGVwKClcbiAgICAgIGlmICh0aGlzLnN0ZXBJbmRleCA8IDAgfHwgIXRoaXMuaGFzTmV4dCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmN1cnJlbnRTdGVwLmFjdGlvbikge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaXNSZXNldHRpbmcpIHtcbiAgICAgICAgdGhpcy5pc1Jlc2V0dGluZyA9IGZhbHNlXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFN0ZXAuYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ2NsaWNrJzpcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3IpLmNsaWNrKClcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHJlc2V0ICgpIHtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgdGhpcy5pc1Jlc2V0dGluZyA9IHRydWVcbiAgICAgIH1cbiAgICAgIGF3YWl0IHN1cGVyLnJlc2V0KClcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgQ29DN1RvdXIgfVxuIiwiLyogZ2xvYmFsIGZvdW5kcnkgKi9cbmltcG9ydCB7IENvQzdUb3VyIH0gZnJvbSAnLi4vYXBwcy9jb2M3LXRvdXIuanMnXG5cbmV4cG9ydCBjbGFzcyBFbmFibGVWYXJpYW50UnVsZXNFbiBleHRlbmRzIENvQzdUb3VyIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZykge1xuICAgIHN1cGVyKGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoe1xuICAgICAgdGl0bGU6ICdFbmFibGUgb3B0aW9uYWwvdmFyaWFudCBydWxlcy4nLFxuICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBob3cgdG8gZW5hYmxlIFB1bHAgQ3RodWxodSBydWxlcywgb3Igb3RoZXIgdmFyaWFudCBydWxlcycsXG4gICAgICBjYW5CZVJlc3VtZWQ6IGZhbHNlLFxuICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgIHN0ZXBzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2dvdG8tc2V0dGluZ3MnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnLnRhYnM+YVtkYXRhLXRhYj1cInNldHRpbmdzXCJdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NDb250ZW50JyxcbiAgICAgICAgICBzaWRlYmFyVGFiOiAnc2V0dGluZ3MnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2dvdG8tY29uZmlndXJlJyxcbiAgICAgICAgICBzZWxlY3RvcjogJ1tkYXRhLWFjdGlvbj1cImNvbmZpZ3VyZVwiXScsXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZVRpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVDb250ZW50JyxcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1zeXN0ZW0tc2V0dGluZ3MnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtdGFiPVwic3lzdGVtXCJdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NDb250ZW50JyxcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1nYW1lLXJ1bGVzJyxcbiAgICAgICAgICBzZWxlY3RvcjogJ1tkYXRhLWNhdGVnb3J5PVwic3lzdGVtXCJdIFtkYXRhLWtleT1cIkNvQzcuZ2FtZVJ1bGVzXCJdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzVGl0bGUnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc0NvbnRlbnQnLFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdzYXZlLWdhbWUtcnVsZXMnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnI3J1bGVzLXNldHRpbmdzIFtuYW1lPXN1Ym1pdF0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzQ29udGVudCdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGxvY2FsaXphdGlvbjoge1xuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc1RpdGxlJzogJ0dhbWUgU2V0dGluZ3MnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc0NvbnRlbnQnOiAnR28gdG8gdGhlIEdhbWUgU2V0dGluZ3MgdGFiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlVGl0bGUnOiAnQ29uZmlndXJlIFNldHRpbmdzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlQ29udGVudCc6ICdDbGljayBvbiB0aGUgQ29uZmlndXJlIFNldHRpbmdzIGJ1dHRvbicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzVGl0bGUnOiAnU3lzdGVtIFNldHRpbmdzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NDb250ZW50JzogJ0dvIHRvIHRoZSBTeXN0ZW0gU2V0dGluZ3MgdGFiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzVGl0bGUnOiAnQ29uZmlndXJlIFZhcmlhbnQvT3B0aW9uYWwgUnVsZXMnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNDb250ZW50JzogJ0NsaWNrIG9uIHRoZSBDb25maWd1cmUgVmFyaWFudC9PcHRpb25hbCBSdWxlcyBidXR0b24nLFxuICAgICAgICAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNUaXRsZSc6ICdTYXZlIHJ1bGUgY2hhbmdlcycsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc0NvbnRlbnQnOiAnT25jZSB5b3UgaGF2ZSBtYWRlIHlvdXIgY2hhbmdlcyBjbGljayBvbiB0aGUgU2F2ZSBDaGFuZ2VzIGJ1dHRvbidcbiAgICAgIH1cbiAgICB9LCBjb25maWcpKVxuICB9XG59XG4iLCJpbXBvcnQgeyBFbmFibGVWYXJpYW50UnVsZXNFbiB9IGZyb20gJy4vZW5hYmxlLXZhcmlhbnQtcnVsZXMtZW4uanMnXG5cbmV4cG9ydCBjbGFzcyBFbmFibGVWYXJpYW50UnVsZXNGciBleHRlbmRzIEVuYWJsZVZhcmlhbnRSdWxlc0VuIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZykge1xuICAgIHN1cGVyKHtcbiAgICAgIHRpdGxlOiAnQWN0aXZleiBsZXMgcsOoZ2xlcyBvcHRpb25uZWxsZXMuJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWN0aXZleiBsZXMgcsOoZ2xlcyBvcHRpb25lbGxlcyBldCBQdWxwIEN0aHVsaHUnLFxuICAgICAgbG9jYWxpemF0aW9uOiB7XG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzVGl0bGUnOiAnUGFyYW3DqHRyZXMnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc0NvbnRlbnQnOiAnT3V2cmlyIGxcXCdvbmdsZXQgXCJQYXJhbcOodHJlc1wiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlVGl0bGUnOiAnQ29uZmlndXJhdGlvbiBkZXMgb3B0aW9ucycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZUNvbnRlbnQnOiAnQ2xpcXVleiBzdXIgXCJDb25maWd1cmF0aW9uIGRlcyBvcHRpb25zXCInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc1RpdGxlJzogJ1N5c3TDqG1lIGRlIGpldScsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzQ29udGVudCc6ICdPdXZyZXogbFxcJ29uZ2xldCBcIlN5c3TDqG1lIGRlIGpldVwiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzVGl0bGUnOiAnQ29uZmlndXJlciBsZXMgdmFyaWFudGVzL3LDqGdsZXMgb3B0aW9ubmVsbGVzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzQ29udGVudCc6ICdDbGlja2V6IHN1ciBsZSBib3V0dG9uIFwiQ29uZmlndXJlciBsZXMgdmFyaWFudGVzL3LDqGdsZXMgb3B0aW9ubmVsbGVzXCInLFxuICAgICAgICAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNUaXRsZSc6ICdTYXV2ZWdhcmRlciBsZXMgbW9kaWZpY2F0aW9ucycsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc0NvbnRlbnQnOiAnQXByZXMgYXZvaXIgY2hvaXNpcyBsZXMgb3B0aW9ucyBjbGlxdWV6IHN1ciBsZSBib3V0b24gXCJTYXV2ZWdhcmRlciBsZXMgbW9kaWZpY2F0aW9uc1wiJ1xuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcsIGZvdW5kcnksIGdhbWUsIEhvb2tzICovXG5pbXBvcnQgeyBDb0M3VG9vbHRpcHMgfSBmcm9tICcuLi9hcHBzL3Rvb2x0aXBzLmpzJ1xuLy8gaW1wb3J0IHsgQ29DN1dlbGNvbWVNZXNzYWdlIH0gZnJvbSAnLi4vYXBwcy93ZWxjb21lLW1lc3NhZ2UuanMnXG5pbXBvcnQgeyByZWdpc3RlclRvdXJzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci10b3Vycy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ3JlYWR5JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdDYWxsIG9mIEN0aHVsaHUgN3RoIEVkaXRpb24gfCBSZWFkeScpXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dXZWxjb21lTWVzc2FnZScpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAvKiogVGhpcyB3aWxsIHByb21wdCB0aGUgd2VsY29tZSBtZXNzYWdlIHdoZW4gaXQgaXMgIGZpbmlzaGVkICovXG4gICAgICAvLyBhd2FpdCBDb0M3V2VsY29tZU1lc3NhZ2UuY3JlYXRlKClcbiAgICB9XG4gICAgZ2FtZS5Db0M3VG9vbHRpcHMgPSBuZXcgQ29DN1Rvb2x0aXBzKClcblxuICAgIGNvbnN0IGluc3RydWN0aW9uc1ZlcnNpb24gPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzaG93SW5zdHJ1Y3Rpb25zJylcbiAgICBsZXQgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgY29uc3QgcmVhZE1lID0ge1xuICAgICAgZGU6ICdQSVVYamJQaG5mTHRxdzNJJyxcbiAgICAgIGVuOiAnc3hCMk9YYmZ3VjZNMG55UScsXG4gICAgICBlczogJzM1Rk03Wk9kekM2TDJ4bGonLFxuICAgICAgZnI6ICd0ZGFreXpUVk9Rc0FNZFNtJyxcbiAgICAgIHVrOiAnOThUdWZsZ1pVbVFvSmRTSydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZWFkTWVbbGFuZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsYW5nID0gJ2VuJ1xuICAgIH1cbiAgICBDT05GSUcuQ29DNyA9IENPTkZJRy5Db0M3ID8/IHt9XG4gICAgQ09ORklHLkNvQzcuTWFudWFsID0gcmVhZE1lW2xhbmddXG4gICAgaWYgKGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS5zeXN0ZW0udmVyc2lvbiwgaW5zdHJ1Y3Rpb25zVmVyc2lvbiA/PyAnMCcpKSB7XG4gICAgICAoYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc3lzdGVtLWRvYycpLmdldERvY3VtZW50KENPTkZJRy5Db0M3Lk1hbnVhbCkpPy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3Nob3dJbnN0cnVjdGlvbnMnLCBnYW1lLnN5c3RlbS52ZXJzaW9uKVxuICAgIH1cbiAgICByZWdpc3RlclRvdXJzKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5pbXBvcnQgeyBFbmFibGVWYXJpYW50UnVsZXNFbiB9IGZyb20gJy4uL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWVuLmpzJ1xuaW1wb3J0IHsgRW5hYmxlVmFyaWFudFJ1bGVzRnIgfSBmcm9tICcuLi90b3Vycy9lbmFibGUtdmFyaWFudC1ydWxlcy1mci5qcydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyVG91cnMgKCkge1xuICB0cnkge1xuICAgIGxldCBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICBjb25zdCB0b3VycyA9IHtcbiAgICAgIGVuOiB7XG4gICAgICAgICdlbmFibGUtdmFyaWFudC1ydWxlcyc6IEVuYWJsZVZhcmlhbnRSdWxlc0VuXG4gICAgICB9LFxuICAgICAgZnI6IHtcbiAgICAgICAgJ2VuYWJsZS12YXJpYW50LXJ1bGVzJzogRW5hYmxlVmFyaWFudFJ1bGVzRnJcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b3Vyc1tsYW5nXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxhbmcgPSAnZW4nXG4gICAgfVxuICAgIGZvciAoY29uc3QgdG91ck5hbWUgaW4gdG91cnNbbGFuZ10pIHtcbiAgICAgIGdhbWUudG91cnMucmVnaXN0ZXIoJ0NvQzcnLCB0b3VyTmFtZSwgbmV3IHRvdXJzW2xhbmddW3RvdXJOYW1lXSgpKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignVE9VUiBFUlJPUicsIGVycilcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgQ3JlYXRlVG9rZW4gZnJvbSAnLi9jcmVhdGUtdG9rZW4uanMnXG5pbXBvcnQgKiBhcyBEaWNlU29OaWNlUmVhZHkgZnJvbSAnLi9kaWNlLXNvLW5pY2UtcmVhZHkuanMnXG5pbXBvcnQgKiBhcyBJbml0IGZyb20gJy4vaW5pdC5qcydcbmltcG9ydCAqIGFzIFJlYWR5IGZyb20gJy4vcmVhZHkuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJBY3RvclNoZWV0IGZyb20gJy4vcmVuZGVyLWFjdG9yLXNoZWV0LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyQ2hhdE1lc3NhZ2UgZnJvbSAnLi9yZW5kZXItY2hhdC1tZXNzYWdlLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyRGlhbG9nIGZyb20gJy4vcmVuZGVyLWRpYWxvZy5qcydcbmltcG9ydCAqIGFzIFJlbmRlckl0ZW1TaGVldCBmcm9tICcuL3JlbmRlci1pdGVtLXNoZWV0LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyUGF1c2UgZnJvbSAnLi9yZW5kZXItcGF1c2UuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJQbGF5ZXJMaXN0IGZyb20gJy4vcmVuZGVyLXBsYXllci1saXN0LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyUmVhbFJvbGwgZnJvbSAnLi9yZW5kZXItcmVhbC1yb2xsLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyU2V0dGluZ3NDb25maWcgZnJvbSAnLi9yZW5kZXItc2V0dGluZ3MtY29uZmlnLmpzJ1xuXG5leHBvcnQgY29uc3QgQ29DN0hvb2tzID0ge1xuICBsaXN0ZW4gKCkge1xuICAgIENyZWF0ZVRva2VuLmxpc3RlbigpXG4gICAgRGljZVNvTmljZVJlYWR5Lmxpc3RlbigpXG4gICAgSW5pdC5saXN0ZW4oKVxuICAgIFJlYWR5Lmxpc3RlbigpXG4gICAgUmVuZGVyQWN0b3JTaGVldC5saXN0ZW4oKVxuICAgIFJlbmRlckNoYXRNZXNzYWdlLmxpc3RlbigpXG4gICAgUmVuZGVyRGlhbG9nLmxpc3RlbigpXG4gICAgUmVuZGVySXRlbVNoZWV0Lmxpc3RlbigpXG4gICAgUmVuZGVyUGF1c2UubGlzdGVuKClcbiAgICBSZW5kZXJQbGF5ZXJMaXN0Lmxpc3RlbigpXG4gICAgUmVuZGVyUmVhbFJvbGwubGlzdGVuKClcbiAgICBSZW5kZXJTZXR0aW5nc0NvbmZpZy5saXN0ZW4oKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgSG9va3MsIERpYWxvZywgZ2FtZSwgdWkgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbignY3JlYXRlVG9rZW4nLCBhc3luYyAodG9rZW5Eb2N1bWVudCwgb3B0aW9ucywgY3JhZXRvcklkKSA9PiB7XG4gICAgLy8gT25seSB0b2tlbiBjcmVhdG9yIGNhbiByb2xsXG4gICAgaWYgKGdhbWUudXNlci5pZCAhPT0gY3JhZXRvcklkKSByZXR1cm5cbiAgICAvLyBTZXQgdG9rZW4gaWNvbiBjb3JyZWN0bHlcbiAgICBpZiAoXG4gICAgICB0b2tlbkRvY3VtZW50LnRleHR1cmUuc3JjID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycgJiZcbiAgICAgIHRva2VuRG9jdW1lbnQudGV4dHVyZS5zcmMgIT09IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5pbWcpIHtcbiAgICAgIHRva2VuRG9jdW1lbnQudGV4dHVyZS5zcmMgPSB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3IuaW1nXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgc29tZXRoaW5nIHRvIHJvbGwgYXNrIGlmIHdlIHNob3VsZCByb2xsIGl0XG4gICAgaWYgKHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci50eXBlICE9PSAnY2hhcmFjdGVyJyAmJiAodG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmhhc1JvbGxhYmxlQ2hhcmFjdGVyaXN0aWNzIHx8IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5ob3NSb2xsYWJsZVNraWxscykpIHtcbiAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9rZW5Ecm9wTW9kZScpKSB7XG4gICAgICAgIGNhc2UgJ2Fzayc6XG4gICAgICAgICAgbmV3IERpYWxvZyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5UaXRsZScpLFxuICAgICAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9rZW5DcmVhdGlvblJvbGwuUHJvbXB0JyksXG4gICAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgICByb2xsOiB7XG4gICAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLkJ1dHRvblJvbGwnKSxcbiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5yb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5Sb2xsZWQnLCB7IG5hbWU6IHRva2VuRG9jdW1lbnQub2JqZWN0LmFjdG9yLm5hbWUgfSkpXG4gICAgICAgICAgICAgICAgICAgIHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5sb2NrZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhdmVyYWdlOiB7XG4gICAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLkJ1dHRvbkF2ZXJhZ2UnKSxcbiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5hdmVyYWdlQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5BdmVyYWdlZCcsIHsgbmFtZTogdG9rZW5Eb2N1bWVudC5vYmplY3QuYWN0b3IubmFtZSB9KSlcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmxvY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNraXA6IHtcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25Ta2lwJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnJlbmRlcih0cnVlKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAncm9sbCc6XG4gICAgICAgICAgdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLnJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9rZW5DcmVhdGlvblJvbGwuUm9sbGVkJywgeyBuYW1lOiB0b2tlbkRvY3VtZW50Lm9iamVjdC5hY3Rvci5uYW1lIH0pKVxuICAgICAgICAgIHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5sb2NrZWQgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdhdmVyYWdlJzpcbiAgICAgICAgICB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3IuYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5BdmVyYWdlZCcsIHsgbmFtZTogdG9rZW5Eb2N1bWVudC5vYmplY3QuYWN0b3IubmFtZSB9KSlcbiAgICAgICAgICB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3IubG9ja2VkID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnaWdub3JlJzpcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ2RpY2VTb05pY2VSZWFkeScsIGRpY2UzZCA9PiB7XG4gICAgZGljZTNkLmFkZERpY2VQcmVzZXQoe1xuICAgICAgdHlwZTogJ2R0JyxcbiAgICAgIGxhYmVsczogWycxMCcsICcyMCcsICczMCcsICc0MCcsICc1MCcsICc2MCcsICc3MCcsICc4MCcsICc5MCcsICcwMCddLFxuICAgICAgZm9udFNjYWxlOiAwLjc1LFxuICAgICAgc3lzdGVtOiAnc3RhbmRhcmQnXG4gICAgfSlcbiAgICBkaWNlM2QuYWRkRGljZVByZXNldCh7XG4gICAgICB0eXBlOiAnZG8nLFxuICAgICAgbGFiZWxzOiBbJzEwJywgJzIwJywgJzMwJywgJzQwJywgJzUwJywgJzYwJywgJzcwJywgJzgwJywgJzkwJywgJzAwJ10sXG4gICAgICBmb250U2NhbGU6IDAuNzUsXG4gICAgICBzeXN0ZW06ICdzdGFuZGFyZCdcbiAgICB9KVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckFjdG9yU2hlZXQnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge30pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdHcm91cE1lc3NhZ2UgfSBmcm9tICcuLi9hcHBzL2NvYzctZ3JvdXAtbWVzc2FnZS5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICBDb0M3Q2hhdC5yZW5kZXJNZXNzYWdlSG9vayhhcHAsIGh0bWwsIGRhdGEpXG4gICAgQ29DN0NoYXQucmVuZGVyQ2hhdE1lc3NhZ2VIb29rKGFwcCwgaHRtbCwgZGF0YSlcbiAgICBpZiAodHlwZW9mIGFwcC5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBDb0M3R3JvdXBNZXNzYWdlLnJlbmRlckNoYXRNZXNzYWdlKGFwcCwgaHRtbCwgZGF0YSlcbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyRGlhbG9nJywgKGRpYWxvZywgaHRtbCkgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSBodG1sLmZpbmQoJ2Zvcm0nKVxuICAgIGlmIChmb3JtLmlzKCcjZG9jdW1lbnQtY3JlYXRlJykgJiYgZm9ybS5maW5kKCdzZWxlY3QnKS5sZW5ndGggIT09IDApIHtcbiAgICAgIGNvbnN0IGVudGl0eUNyZWF0ZVNlbGVjdFRhZyA9IGZvcm0uZmluZChcIltuYW1lPSd0eXBlJ11cIilcbiAgICAgIGNvbnN0IGVudGl0eVNvcnRlZExpc3QgPSBbXVxuICAgICAgY29uc3Qgc2hvd0V4cGVyaW1lbnRhbCA9ICEhZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAgICdDb0M3JyxcbiAgICAgICAgJ2V4cGVyaW1lbnRhbEZlYXR1cmVzJ1xuICAgICAgKVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmNoaWxkcmVuKCkuZWFjaCgobywgZW50aXR5T3B0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGVudGl0eU9wdGlvbi50ZXh0Q29udGVudD8uY2FwaXRhbGl6ZSgpXG4gICAgICAgIGlmIChnYW1lLmkxOG4uaGFzKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApKSB7XG4gICAgICAgICAgZW50aXR5T3B0aW9uLnRleHRDb250ZW50ID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3dFeHBlcmltZW50YWwgfHwgIVsndmVoaWNsZSddLmluY2x1ZGVzKGVudGl0eU9wdGlvbi52YWx1ZSkpIHtcbiAgICAgICAgICBlbnRpdHlTb3J0ZWRMaXN0LnB1c2goZW50aXR5T3B0aW9uKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmVtcHR5KClcbiAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy5hcHBlbmQoXG4gICAgICAgIGVudGl0eVNvcnRlZExpc3Quc29ydCgoZmlyc3QsIHNlY29uZCkgPT5cbiAgICAgICAgICBmaXJzdC5pbm5lclRleHQubG9jYWxlQ29tcGFyZShzZWNvbmQuaW5uZXJUZXh0KVxuICAgICAgICApXG4gICAgICApXG4gICAgICBpZiAoZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgpID09PSAnYWN0b3InKSB7XG4gICAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoJ2NoYXJhY3RlcicpXG4gICAgICB9IGVsc2UgaWYgKGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoKSA9PT0gJ2Jvb2snKSB7XG4gICAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoJ2l0ZW0nKVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIGFzeW5jIChkYXRhLCBodG1sLCBvcHRpb25zKSA9PiB7fSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlclBhdXNlJywgYXN5bmMgKGRhdGEsIGh0bWwsIG9wdGlvbnMpID0+IHtcbiAgICBsZXQgaW1hZ2VSZXBsYWNlZCA9IGZhbHNlXG4gICAgbGV0IHRleHRSZXBsYWNlZCA9IGZhbHNlXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnKSkge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnKS50b0xvd2VyQ2FzZSgpID09PSAnbnVsbCcpIHtcbiAgICAgICAgaHRtbC5maW5kKCdpbWcnKS5yZW1vdmUoKVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnKSAhPT0gJycpIHtcbiAgICAgICAgaHRtbC5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLCBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZUltYWdlJykpXG4gICAgICAgIGltYWdlUmVwbGFjZWQgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZVRleHQnKSAhPT0gJycpIHtcbiAgICAgICAgaHRtbC5maW5kKCdoMycpLmh0bWwoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VUZXh0JykpXG4gICAgICAgIHRleHRSZXBsYWNlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFpbWFnZVJlcGxhY2VkKSB7XG4gICAgICBodG1sLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ltYWdlcy90aW1ldHJhcDIud2VicCcpXG4gICAgfVxuICAgIGlmICghdGV4dFJlcGxhY2VkKSB7XG4gICAgICBodG1sLmZpbmQoJ2ZpZ2NhcHRpb24nKS5odG1sKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QYXVzZU5hbWUnKSlcbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyUGxheWVyTGlzdCcsIChwbGF5ZXJMaXN0LCBodG1sLCBkYXRhKSA9PiB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dXb3JsZEVyYScpKSB7XG4gICAgICAkKCc8aDQ+JykuYXBwZW5kKCc8ZGl2PjxpIGNsYXNzPVwiZmEtcmVndWxhciBmYS1jYWxlbmRhclwiPjwvaT4nICsgZ2FtZS5pMThuLmZvcm1hdChDT0M3LmVyYXNbZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKV0gPz8gJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmE6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJykgfSkgKyAnPC9kaXY+JykuaW5zZXJ0QWZ0ZXIoJCgnaDMnLCBodG1sKSlcbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdEZWNhZGVyRGllIH0gZnJvbSAnLi4vYXBwcy9kZWNhZGVyLWRpZS5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJSZWFsUm9sbCcsIChhcHAsIGh0bWwsIG9wdGlvbnMpID0+IHtcbiAgICBmb3IgKGNvbnN0IHRlcm0gaW4gb3B0aW9ucy5kaWVUZXJtcykge1xuICAgICAgZm9yIChjb25zdCBpbnB1dCBpbiBvcHRpb25zLmRpZVRlcm1zW3Rlcm1dLmlucHV0cykge1xuICAgICAgICBpZiAob3B0aW9ucy5kaWVUZXJtc1t0ZXJtXSBpbnN0YW5jZW9mIENvQzdEZWNhZGVyRGllKSB7XG4gICAgICAgICAgY29uc3QgdGFnID0gaHRtbC5maW5kKCdbbmFtZT1cIicgKyB0ZXJtICsgJy4nICsgaW5wdXQgKyAnXCJdJylcbiAgICAgICAgICBpZiAodGFnLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGFnWzBdLnBsYWNlaG9sZGVyID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlYWxSb2xsRGVjYWRlclBsYWNlaG9sZGVyTmFtZScpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5pbXBvcnQgeyBDb0M3RGlyZWN0b3J5UGlja2VyIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2M3LWRpcmVjdG9yeS1waWNrZXIuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyU2V0dGluZ3NDb25maWcnLCAoYXBwLCBodG1sLCB1c2VyKSA9PiB7XG4gICAgQ29DN0RpcmVjdG9yeVBpY2tlci5wcm9jZXNzSHRtbChodG1sKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHNvY2tldGxpYiwgdWkgKi9cbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4uL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIENvQzdTb2NrZXQgKCkge1xuICBnYW1lLkNvQzdzb2NrZXQgPSBzb2NrZXRsaWIucmVnaXN0ZXJTeXN0ZW0oJ0NvQzcnKVxuICBnYW1lLkNvQzdzb2NrZXQucmVnaXN0ZXIoJ2dtY3JlYXRlbWVzc2FnZWFzJywgZ21jcmVhdGVtZXNzYWdlYXMpXG4gIGdhbWUuQ29DN3NvY2tldC5yZWdpc3RlcignZ210cmFkZWl0ZW10bycsIGdtdHJhZGVpdGVtdG8pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdtY3JlYXRlbWVzc2FnZWFzIChkYXRhKSB7XG4gIGNvbnN0IG1lbGVlVGFyZ2V0ID0gbmV3IENvQzdNZWxlZVRhcmdldChcbiAgICBkYXRhLnRhcmdldEtleSxcbiAgICBkYXRhLm1lc3NhZ2VJZCxcbiAgICBkYXRhLmZhc3RGb3J3YXJkXG4gIClcbiAgbWVsZWVUYXJnZXQuaW5pdGlhdG9yS2V5ID0gZGF0YS5hY3RvcktleVxuICBjb25zdCBtZXNzYWdlID0gYXdhaXQgbWVsZWVUYXJnZXQuY3JlYXRlQ2hhdENhcmQoKVxuICByZXR1cm4gbWVzc2FnZVxufVxuXG5hc3luYyBmdW5jdGlvbiBnbXRyYWRlaXRlbXRvIChkYXRhKSB7XG4gIHRyeSB7XG4gICAgbGV0IGFjdG9yXG4gICAgaWYgKGRhdGEuc2NlbmUpIHtcbiAgICAgIGFjdG9yID0gZ2FtZS5zY2VuZXMuZ2V0KGRhdGEuc2NlbmUpLnRva2Vucy5nZXQoZGF0YS5hY3RvckZyb20pLmFjdG9yXG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGRhdGEuYWN0b3JGcm9tKVxuICAgIH1cbiAgICBjb25zdCBpdGVtID0gYWN0b3IuaXRlbXMuZ2V0KGRhdGEuaXRlbSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgZ2FtZS5hY3RvcnNcbiAgICAgIC5nZXQoZGF0YS5hY3RvclRvKVxuICAgICAgLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW0udG9KU09OKCldKVxuICAgIGlmIChjcmVhdGVkKSB7XG4gICAgICBhY3Rvci5kZWxldGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLmlkXSlcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGUpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgcmV0dXJuIHRydWVcbn1cbiIsIi8qIGdsb2JhbCBmcm9tVXVpZCwgZ2FtZSwgTm90ZXNMYXllciwgdWkgKi9cbmltcG9ydCB7IENvQzdHcm91cE1lc3NhZ2UgfSBmcm9tICcuL2NvYzctZ3JvdXAtbWVzc2FnZS5qcydcbmltcG9ydCB7IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQgfSBmcm9tICcuL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuanMnXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U3lzdGVtU29ja2V0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICAgICAgICAgICAgICBEYXRhIHRvIHNlbmQgdG8gc29ja2V0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2RhdGEudHlwZV0gICAgICAgICAgICAgICAgQWN0aW9uIHRvIHJ1blxuICAgKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IFtkYXRhLmxpc3RlbmVyXSAgb25seSB0aGlzIHNwZWNmaWMgdXNlciBzaG91bGQgcnVuIHRoZSBhY3Rpb25cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHN0YXRpYyBhc3luYyBjYWxsU29ja2V0IChkYXRhKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmxpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGdhbWUudXNlci5pZCA9PT0gZGF0YS5saXN0ZW5lcikge1xuICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2NoYXJhY3Rlci13aXphcmQnOlxuICAgICAgICAgICAgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGVDaGFyYWN0ZXJGcm9tRGF0YShkYXRhLnBheWxvYWQpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ29wZW4tY2hhcmFjdGVyJzpcbiAgICAgICAgICAgIGdhbWUuYWN0b3JzLmdldChkYXRhLnBheWxvYWQpLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdncm91cC1tZXNzYWdlLW5ldyc6XG4gICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLm5ld0dyb3VwTWVzc2FnZShkYXRhKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdncm91cC1tZXNzYWdlLXJvbGwnOlxuICAgICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtTXlSb2xscyhkYXRhKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdncm91cC1tZXNzYWdlLXVwZGF0ZSc6XG4gICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZU1lc3NhZ2UoZGF0YSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZTpcbiAgICAgICAgICAgIE9wcG9zZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBDb21iaW5lZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGU6XG4gICAgICAgICAgICBDb21iaW5lZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdpbnZva2UnOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZGF0YS5pdGVtKVxuICAgICAgICAgICAgICBpdGVtW2RhdGEubWV0aG9kXShkYXRhLmRhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICBjYXNlICd1cGRhdGVDaGFyJzpcbiAgICAgICAgICBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3RvZ2dsZU1hcE5vdGVzJzpcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnY29yZScsIE5vdGVzTGF5ZXIuVE9HR0xFX1NFVFRJTkcsIGRhdGEudG9nZ2xlID09PSB0cnVlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgS2VlcGVyIGFjdGlvbiwgaWYgeW91IGFyZSBhIGtlZXBlciBydW4geW91cnNlbGYsIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBHTSBzaG93IGVycm9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICAgIERhdGEgdG8gc2VuZCB0byBzb2NrZXQuXG4gICAqL1xuICBzdGF0aWMgcmVxdWVzdEtlZXBlckFjdGlvbiAoZGF0YSkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgZGF0YS5saXN0ZW5lciA9IGdhbWUudXNlci5pZFxuICAgICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGtlZXBlcnMgPSBnYW1lLnVzZXJzLmZpbHRlcih1ID0+IHUuYWN0aXZlICYmIHUuaXNHTSlcbiAgICAgIGlmIChrZWVwZXJzLmxlbmd0aCkge1xuICAgICAgICBkYXRhLmxpc3RlbmVyID0ga2VlcGVyc1swXS5pZFxuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1pc3NpbmdLZWVwZXJVc2VyJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IHVzZXIgYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICAgIERhdGEgdG8gc2VuZCB0byBzb2NrZXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IHVzZXJJZCAgICAgIE9ubHkgdGhpcyB1c2VyIGlkIHNob3VsZCBydW4gdGhlIGFjdGlvbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBlcnJvcklmTWlzc2luZyAgSWYgcmVxdWVzdGluZyBhIHNwZWNpZmljIHVzZXIgc2hvdWxkIHJ1biB0aGUgYWN0aW9uIGVycm9yIGlmIHVzZXIgbm90IGZvdW5kIC8gbG9nZ2VkIGluLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVTZWxmICAgICBJZiBydW5uaW5nIGFzIGFsbCB1c2VycyBzaG91bGQgdGhlIGN1cnJlbnQgdXNlciBhbHNvIHJ1biB0aGUgYWN0aW9uLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgc3RhdGljIHJlcXVlc3RVc2VyQWN0aW9uIChcbiAgICBkYXRhLFxuICAgIHsgdXNlcklkID0gbnVsbCwgZXJyb3JJZk1pc3NpbmcgPSB0cnVlLCBpbmNsdWRlU2VsZiA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGlmICh1c2VySWQgJiYgdHlwZW9mIHVzZXJJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh1c2VySWQgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICBkYXRhLmxpc3RlbmVyID0gZ2FtZS51c2VyLmlkXG4gICAgICAgIENvQzdTeXN0ZW1Tb2NrZXQuY2FsbFNvY2tldChkYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdXNlciA9IGdhbWUudXNlcnMuZ2V0KHVzZXJJZClcbiAgICAgICAgaWYgKHR5cGVvZiB1c2VyLmlkICE9PSAndW5kZWZpbmVkJyAmJiB1c2VyLmFjdGl2ZSkge1xuICAgICAgICAgIGRhdGEubGlzdGVuZXIgPSB1c2VyLmlkXG4gICAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgICAgICB9IGVsc2UgaWYgKGVycm9ySWZNaXNzaW5nKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNaXNzaW5nVXNlcicpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpbmNsdWRlU2VsZikge1xuICAgICAgICBDb0M3U3lzdGVtU29ja2V0LmNhbGxTb2NrZXQoZGF0YSlcbiAgICAgIH1cbiAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDb21iYXQsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgSG9va3MsIEl0ZW1EaXJlY3RvcnkgKi9cbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9jcmVhdHVyZS1zaGVldC5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdDb21iYXQsIHJvbGxJbml0aWF0aXZlIH0gZnJvbSAnLi9jb21iYXQuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBVcGRhdGVyIH0gZnJvbSAnLi91cGRhdGVyLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdNZW51IH0gZnJvbSAnLi9tZW51LmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9kYW1hZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2FudmFzIH0gZnJvbSAnLi9hcHBzL2NhbnZhcy5qcydcbmltcG9ydCB7IENvQzdTZXR0aW5nc0RpcmVjdG9yeSB9IGZyb20gJy4vc2V0dGluZ3MtZGlyZWN0b3J5LmpzJ1xuaW1wb3J0IHsgQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnkgfSBmcm9tICcuL2NvbXBlbmRpdW0tZGlyZWN0b3J5LmpzJ1xuaW1wb3J0IHsgQ29DN0FjdG9yRGlyZWN0b3J5IH0gZnJvbSAnLi9hY3Rvci1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3SG9va3MgfSBmcm9tICcuL2hvb2tzL2luZGV4LmpzJ1xuaW1wb3J0ICogYXMgRGljZUJvdCBmcm9tICcuL2RpY2Vib3QuanMnXG5pbXBvcnQgJy4uL3N0eWxlcy9zeXN0ZW0vaW5kZXgubGVzcydcbmltcG9ydCB7IENvQzdDaGFzZVNoZWV0IH0gZnJvbSAnLi9pdGVtcy9jaGFzZS9zaGVldC5qcydcbmltcG9ydCB7IENvQzdTb2NrZXQgfSBmcm9tICcuL2hvb2tzL3NvY2tldC5qcydcbmltcG9ydCB7IENvQzdTeXN0ZW1Tb2NrZXQgfSBmcm9tICcuL2FwcHMvY29jNy1zeXN0ZW0tc29ja2V0LmpzJ1xuaW1wb3J0IHsgRHJvcEFjdG9yU2hlZXREYXRhIH0gZnJvbSAnLi9ob29rcy9kcm9wLWFjdG9yLXNoZWV0LWRhdGEuanMnXG5pbXBvcnQgQ29DN0NsaWNrYWJsZUV2ZW50cyBmcm9tICcuL2FwcHMvY29jNy1jbGlja2FibGUtZXZlbnRzLmpzJ1xuaW1wb3J0IERyYXdOb3RlIGZyb20gJy4vaG9va3MvZHJhdy1ub3RlLmpzJ1xuaW1wb3J0IFBvcE91dExvYWRlZCBmcm9tICcuL2hvb2tzL3BvcG91dC1sb2FkZWQuanMnXG5pbXBvcnQgUmVuZGVyQ29DN0pvdXJuYWxTaGVldCBmcm9tICcuL2hvb2tzL3JlbmRlci1jb2M3LWpvdXJuYWwtc2hlZXQuanMnXG5pbXBvcnQgUmVuZGVySm91cm5hbFRleHRQYWdlU2hlZXQgZnJvbSAnLi9ob29rcy9yZW5kZXItam91cm5hbC10ZXh0LXBhZ2Utc2hlZXQuanMnXG5cbi8vIENhcmQgaW5pdFxuaW1wb3J0IHsgaW5pdEVDQyB9IGZyb20gJy4vY29tbW9uL2NoYXRjYXJkbGliL3NyYy9jaGF0Y2FyZGxpYi5qcydcbmltcG9ydCB7IENoYXNlT2JzdGFjbGVDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRleHRNZW51IH0gZnJvbSAnLi9jb250ZXh0LW1lbnUuanMnXG5cbkhvb2tzLm9uKCdyZW5kZXJTZXR0aW5nc0NvbmZpZycsIChhcHAsIGh0bWwsIG9wdGlvbnMpID0+IHtcbiAgY29uc3Qgc3lzdGVtVGFiID0gJChhcHAuZm9ybSkuZmluZCgnLnRhYltkYXRhLXRhYj1zeXN0ZW1dJylcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcGxheUluaXREaWNlc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlSW5pdGlhdGl2ZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuc3RhbmJ5R01Sb2xsc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUm9sbCcpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwudHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmRdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUNoYXRDYXJkcycpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZW5hYmxlU3RhdHVzSWNvbnNdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVNjZW5lJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5vdmVycmlkZUdhbWVBcnR3b3JrXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVHYW1lQXJ0d29yaycpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcGxheVBsYXllck5hbWVPblNoZWV0XScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVTaGVldCcpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcmVnYXJkVXNlUGVyUm91bmRdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVdlYXBvbicpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuc3luY0RpY2UzZF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlRGljZVNvTmljZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGVidWdtb2RlXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVEZXZlbG9wZXJEZWJ1ZycpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ3NlbGVjdFtuYW1lPUNvQzdcXFxcLmJvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGVdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVJvbGxUYWJsZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgLy8gTU9WRUQgVE8gQ0hBU1NFIElORElWSURVQUwgU0VUVElOR1xuICAvLyBzeXN0ZW1UYWJcbiAgLy8gICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5jaGFzZVNob3dUb2tlbk1vdmVtZW50XScpXG4gIC8vICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgLy8gICAuYmVmb3JlKFxuICAvLyAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gIC8vICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVDaGFzZVNldHRpbmdzJykgK1xuICAvLyAgICAgICAnPC9oMj4nXG4gIC8vICAgKVxufSlcblxuSG9va3Mub25jZSgnaW5pdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgZ2FtZS5Db0M3ID0ge1xuICAgIG1hY3Jvczoge1xuICAgICAgc2tpbGxDaGVjazogQ29DN1V0aWxpdGllcy5za2lsbENoZWNrTWFjcm8sXG4gICAgICB3ZWFwb25DaGVjazogQ29DN1V0aWxpdGllcy53ZWFwb25DaGVja01hY3JvLFxuICAgICAgY2hlY2s6IENvQzdVdGlsaXRpZXMuY2hlY2tNYWNyb1xuICAgIH0sXG4gICAgY2FyZHM6IHtcbiAgICAgIERhbWFnZUNhcmRcbiAgICB9LFxuICAgIGRldjoge1xuICAgICAgZGljZToge1xuICAgICAgICBhbHdheXNDcml0OiBmYWxzZSxcbiAgICAgICAgYWx3YXlzRnVtYmxlOiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgZXJhczogKGVyYSwgbmFtZSkgPT4ge1xuICAgICAgQ09DNy5lcmFzW2VyYV0gPSBuYW1lXG4gICAgfSxcbiAgICBDbGlja1JlZ2lvbkxlZnRVdWlkOiBDb0M3Q2xpY2thYmxlRXZlbnRzLkNsaWNrUmVnaW9uTGVmdFV1aWQsXG4gICAgQ2xpY2tSZWdpb25SaWdodFV1aWQ6IENvQzdDbGlja2FibGVFdmVudHMuQ2xpY2tSZWdpb25SaWdodFV1aWQsXG4gICAgaGFzUGVybWlzc2lvbkRvY3VtZW50OiBDb0M3Q2xpY2thYmxlRXZlbnRzLmhhc1Blcm1pc3Npb25Eb2N1bWVudCxcbiAgICBJblNjZW5lUmVsYXRpdmVUZWxlcG9ydDogQ29DN0NsaWNrYWJsZUV2ZW50cy5JblNjZW5lUmVsYXRpdmVUZWxlcG9ydCxcbiAgICBNYXBQaW5Ub2dnbGU6IENvQzdDbGlja2FibGVFdmVudHMuTWFwUGluVG9nZ2xlLFxuICAgIG9wZW5Eb2N1bWVudDogQ29DN0NsaWNrYWJsZUV2ZW50cy5vcGVuRG9jdW1lbnQsXG4gICAgdG9nZ2xlVGlsZUpvdXJuYWxQYWdlczogQ29DN0NsaWNrYWJsZUV2ZW50cy50b2dnbGVUaWxlSm91cm5hbFBhZ2VzLFxuICAgIHRvU2NlbmU6IENvQzdDbGlja2FibGVFdmVudHMudG9TY2VuZVxuICB9XG4gIENvbWJhdC5wcm90b3R5cGUucm9sbEluaXRpYXRpdmUgPSByb2xsSW5pdGlhdGl2ZVxufSlcblxuaW5pdEVDQyhDaGFzZU9ic3RhY2xlQ2FyZClcblxuSG9va3Mub24oJ3JlbmRlckNvbWJhdFRyYWNrZXInLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q29tYmF0LnJlbmRlckNvbWJhdFRyYWNrZXIoYXBwLCBodG1sLCBkYXRhKVxuKVxuXG5EaWNlQm90Lmxpc3RlbigpXG5Db0M3SG9va3MubGlzdGVuKClcblxuSG9va3Mub25jZSgnc29ja2V0bGliLnJlYWR5JywgQ29DN1NvY2tldClcblxuSG9va3Mub25jZSgnc2V0dXAnLCBmdW5jdGlvbiAoKSB7XG4gIC8vIExvY2FsaXplIENPTkZJRyBvYmplY3RzIG9uY2UgdXAtZnJvbnRcbiAgY29uc3QgdG9Mb2NhbGl6ZSA9IFtcbiAgICAnc3BlbGxQcm9wZXJ0aWVzJyxcbiAgICAnYm9va1R5cGUnLFxuICAgICd0YWxlbnRUeXBlJyxcbiAgICAnb2NjdXBhdGlvblByb3BlcnRpZXMnLFxuICAgICdzdGF0dXNUeXBlJ1xuICBdXG5cbiAgZm9yIChjb25zdCBvIG9mIHRvTG9jYWxpemUpIHtcbiAgICBjb25zdCBsb2NhbGl6ZWQgPSBPYmplY3QuZW50cmllcyhDT0M3W29dKS5tYXAoZSA9PiB7XG4gICAgICByZXR1cm4gW2VbMF0sIGdhbWUuaTE4bi5sb2NhbGl6ZShlWzFdKV1cbiAgICB9KVxuICAgIENPQzdbb10gPSBsb2NhbGl6ZWQucmVkdWNlKChvYmosIGUpID0+IHtcbiAgICAgIG9ialtlWzBdXSA9IGVbMV1cbiAgICAgIHJldHVybiBvYmpcbiAgICB9LCB7fSlcbiAgfVxuXG4gIGxldCBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleChcbiAgICB0ID0+IHQuaWQgPT09IENPQzcuc3RhdHVzLmRlYWRcbiAgKVxuICBpZiAoZWZmZWN0SW5kZXggIT09IC0xKSB7XG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxuICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdG9tYnN0b25lLnN2ZydcbiAgfVxuICBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleChcbiAgICB0ID0+IHQuaWQgPT09IENPQzcuc3RhdHVzLnVuY29uc2Npb3VzXG4gIClcbiAgaWYgKGVmZmVjdEluZGV4ICE9PSAtMSkge1xuICAgIENPTkZJRy5zdGF0dXNFZmZlY3RzW2VmZmVjdEluZGV4XS5pY29uID1cbiAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2tub2NrZWQtb3V0LXN0YXJzLnN2ZydcbiAgfVxuICAvLyBGb3VuZHJ5VlRUIHYxMFxuICBjb25zdCBlZmZlY3ROYW1lS2V5ID0gKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzExJykgPyAnbGFiZWwnIDogJ25hbWUnKVxuICBDT05GSUcuc3RhdHVzRWZmZWN0cy51bnNoaWZ0KFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSxcbiAgICAgIFtlZmZlY3ROYW1lS2V5XTogJ0NvQzcuQm91dE9mTWFkbmVzc05hbWUnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGFuZ2luZy1zcGlkZXIuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLmluZGVmSW5zYW5lLFxuICAgICAgW2VmZmVjdE5hbWVLZXldOiAnQ29DNy5JbnNhbml0eU5hbWUnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdGVudGFjbGVzLXNrdWxsLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcyxcbiAgICAgIFtlZmZlY3ROYW1lS2V5XTogJ0NvQzcuQ3JpdGljYWxXb3VuZHMnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvYXJtLXNsaW5nLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5keWluZyxcbiAgICAgIFtlZmZlY3ROYW1lS2V5XTogJ0NvQzcuRHlpbmcnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGVhcnQtYmVhdHMuc3ZnJ1xuICAgIH1cbiAgKVxufSlcblxuSG9va3Mub24oJ2NyZWF0ZUFjdGl2ZUVmZmVjdCcsIChkYXRhLCBvcHRpb25zLCB1c2VySWQpID0+IHtcbiAgaWYgKGdhbWUudXNlcklkID09PSB1c2VySWQpIHtcbiAgICBjb25zdCBzdGF0dXNLZXkgPSBDb0M3QWN0aXZlRWZmZWN0LmdldFN0YXR1c0tleShkYXRhKVxuICAgIGlmIChzdGF0dXNLZXkpIHtcbiAgICAgIHN3aXRjaCAoc3RhdHVzS2V5KSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBkYXRhLnBhcmVudC5zZXRDb25kaXRpb24oc3RhdHVzS2V5LCB7XG4gICAgICAgICAgICBmb3JjZVZhbHVlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWxUaW1lID0gZGF0YS5mbGFncy5Db0M3Py5yZWFsVGltZVxuICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gbnVsbFxuICAgICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbj8ucm91bmRzXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb24/LnNlY29uZHNcbiAgICAgICAgICAgICAgaWYgKCFpc05hTihkdXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyAzNjAwKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLnBhcmVudC5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUsIHtcbiAgICAgICAgICAgICAgZm9yY2VWYWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgcmVhbFRpbWUsXG4gICAgICAgICAgICAgIGR1cmF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuSG9va3Mub24oJ2RlbGV0ZUFjdGl2ZUVmZmVjdCcsIChkYXRhLCBvcHRpb25zLCB1c2VySWQpID0+IHtcbiAgaWYgKGdhbWUudXNlcklkID09PSB1c2VySWQpIHtcbiAgICBjb25zdCBzdGF0dXNLZXkgPSBDb0M3QWN0aXZlRWZmZWN0LmdldFN0YXR1c0tleShkYXRhKVxuICAgIGlmIChzdGF0dXNLZXkpIHtcbiAgICAgIHN3aXRjaCAoc3RhdHVzS2V5KSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBkYXRhLnBhcmVudC51bnNldENvbmRpdGlvbihzdGF0dXNLZXksIHtcbiAgICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuLy8gVGhpcyB3aWxsIGhpZGUgdGhlIGl0ZW0gY2FsbGVkICdfX0NvQzdJbnRlcm5hbEl0ZW1fXydcbi8vIFRoaXMgaXRlbSBpcyB1c2VkIGZvciBpbnRlcm5hbCBwdXJwb3NlcyBhbmQgc2hvdWxkIG5vdCBiZSBzZWVuIGJ5IGFueW9uZVxuSG9va3Mub24oJ2NoYW5nZVNpZGViYXJUYWInLCBkaXJlY3RvcnkgPT4ge1xuICBpZiAoZGlyZWN0b3J5IGluc3RhbmNlb2YgSXRlbURpcmVjdG9yeSkge1xuICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmZpbmQoaSA9PiBpLm5hbWUgPT09ICdfX0NvQzdJbnRlcm5hbEl0ZW1fXycpXG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBkaXJlY3RvcnkuX2VsZW1lbnRcbiAgICAgIGNvbnN0IGl0ZW1FbGVtZW50ID0gaHRtbC5maW5kKGBbZGF0YS1kb2N1bWVudC1pZD0nJHtpdGVtLmlkfSddYClcbiAgICAgIGlmIChpdGVtRWxlbWVudCkgaXRlbUVsZW1lbnRbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cbiAgfVxufSlcblxuSG9va3Mub24oJ2hvdGJhckRyb3AnLCAoYmFyLCBkYXRhLCBzbG90KSA9PiB7XG4gIHJldHVybiBDb0M3VXRpbGl0aWVzLmNyZWF0ZU1hY3JvKGJhciwgZGF0YSwgc2xvdClcbn0pXG5cbkhvb2tzLm9uKCdyZW5kZXJDaGF0TG9nJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN0NoYXQuY2hhdExpc3RlbmVycyhhcHAsIGh0bWwsIGRhdGEpXG4pXG5Ib29rcy5vbigndXBkYXRlQ2hhdE1lc3NhZ2UnLCAoY2hhdE1lc3NhZ2UsIGNoYXREYXRhLCBkaWZmLCBzcGVha2VyKSA9PlxuICBDb0M3Q2hhdC5vblVwZGF0ZUNoYXRNZXNzYWdlKGNoYXRNZXNzYWdlLCBjaGF0RGF0YSwgZGlmZiwgc3BlYWtlcilcbilcblxuSG9va3Mub24oJ3JlYWR5JywgYXN5bmMgKCkgPT4ge1xuICAvLyBDT05GSUcuY29tcGF0aWJpbGl0eS5tb2RlID0gQ09OU1QuQ09NUEFUSUJJTElUWV9NT0RFUy5TSUxFTlRcbiAgYXdhaXQgVXBkYXRlci5jaGVja0ZvclVwZGF0ZSgpXG5cbiAgLy8gZ2FtZS5Db0M3Lm1lbnVzID0gbmV3IENvQzdNZW51KCk7XG5cbiAgYWN0aXZhdGVHbG9iYWxMaXN0ZW5lcigpXG5cbiAgLy8gc2V0R2xvYmFsQ3NzVmFyKClcblxuICBnYW1lLkNvQzcuc2tpbGxMaXN0ID0gYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc2tpbGxzJyk/LmdldERvY3VtZW50cygpXG5cbiAgZ2FtZS5zb2NrZXQub24oJ3N5c3RlbS5Db0M3JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gIH0pXG5cbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4XCI6IFwiUGhvYmlhcyBpbmRleFwiLFxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhIaW50XCI6IFwiVGhlIGluZGV4IChyb2xsIHJlc3VsdCkgdGhhdCB3aWxsIHRyaWdnZXIgYSByb2xsIGluIHRoZSBwaG9iaWFzIHRhYmxlXCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4XCI6IFwiTWFuaWFzIGluZGV4XCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludFwiOiBcIlRoZSBpbmRleCAocm9sbCByZXN1bHQpIHRoYXQgd2lsbCB0cmlnZ2VyIGEgcm9sbCBpbiB0aGUgbWFuaWFzIHRhYmxlXCIsXG4gIC8vIFwiU0VUVElOR1MuU2FtcGxlUGhvYmlhc1RhYmxlXCI6IFwiU2FtcGxlIHBob2JpYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZVwiOiBcIlNhbXBsZSBNYW5pYXMgdGFibGVcIixcblxuICBmdW5jdGlvbiBfdGFibGVTZXR0aW5nc0NoYW5nZWQgKHRhYmxlLCBpZCkge1xuICAgIGlmIChpZCA9PT0gJ25vbmUnKSBnYW1lLkNvQzcudGFibGVzW3RhYmxlXSA9IG51bGxcbiAgICBlbHNlIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdID0gZ2FtZS50YWJsZXMuZ2V0KGlkKVxuICB9XG5cbiAgLy8gZnVuY3Rpb24gX3RhYmxlSW5kZXhDaGFuZ2VkKCB0YWJsZSwgaW5kZXgpe1xuICAvLyAgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV09aW5kZXg7XG4gIC8vIH1cblxuICBjb25zdCB0YWJsZUNob2ljZSA9IHsgbm9uZTogJ1NFVFRJTkdTLkxldEtlZXBlckRlY2lkZScgfVxuICBmb3IgKGNvbnN0IHQgb2YgZ2FtZS50YWJsZXMpIHtcbiAgICB0YWJsZUNob2ljZVt0Ll9pZF0gPSB0Lm5hbWVcbiAgfVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdub25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gICAgb25DaGFuZ2U6IGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCgnYm91dE9mTWFkbmVzc19TdW1tYXJ5JywgaWQpXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnbm9uZScsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAgIG9uQ2hhbmdlOiBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoJ2JvdXRPZk1hZG5lc3NfUmVhbFRpbWUnLCBpZClcbiAgfSlcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyxcbiAgLy8gIGhpbnQ6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDksXG4gIC8vICB0eXBlOiBOdW1iZXIsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ3Bob2JpYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcsXG4gIC8vICBoaW50OiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDEwLFxuICAvLyAgdHlwZTogTnVtYmVyLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVJbmRleENoYW5nZWQoICdtYW5pYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLlNhbXBsZVBob2JpYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdwaG9iaWFzJywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdtYW5pYXMnLCBpZClcbiAgLy8gfSk7XG5cbiAgZ2FtZS5Db0M3LnRhYmxlcyA9IHtcbiAgICBib3V0T2ZNYWRuZXNzX1N1bW1hcnk6XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJykgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBnYW1lLnRhYmxlcy5nZXQoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScpXG4gICAgICAgICksXG4gICAgYm91dE9mTWFkbmVzc19SZWFsVGltZTpcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJykgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBnYW1lLnRhYmxlcy5nZXQoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgICApXG4gICAgLy8gbWFuaWFzSW5kZXg6IGdlLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyksXG4gICAgLy8gcGhvYmlhc0luZGV4OiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXgnKSxcbiAgICAvLyBwaG9iaWFzOiAoJ25vbmUnID09IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScpKT9udWxsOmdhbWUudGFibGVzLmdldChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzYW1wbGVQaG9iaWFzVGFibGUnKSksXG4gICAgLy8gbWFuaWFzOiAoJ25vbmUnID09IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZU1hbmlhc1RhYmxlJykpP251bGw6Z2FtZS50YWJsZXMuZ2V0KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZU1hbmlhc1RhYmxlJykpLFxuICB9XG59KVxuXG4vLyBIb29rcy5vbigncHJlQ3JlYXRlQWN0b3InLCAoY3JlYXRlRGF0YSkgPT4gQ29DQWN0b3IuaW5pdFRva2VuKCBjcmVhdGVEYXRhKSk7XG5cbkhvb2tzLm9uKFxuICAncmVuZGVyQ29DN0NoYXNlU2hlZXQnLFxuICAvKiogYXN5bmMgKi8gKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICAvKiogYXdhaXQgKi8gQ29DN0NoYXNlU2hlZXQuc2V0U2Nyb2xsKGFwcCwgaHRtbCwgZGF0YSlcbilcblxuSG9va3Mub24oJ2Nsb3NlQ29DN0NoYXNlU2hlZXQnLCAoYXBwLCBodG1sKSA9PlxuICBDb0M3Q2hhc2VTaGVldC5vbkNsb3NlKGFwcCwgaHRtbClcbilcblxuLy8gQ2FsbGVkIG9uIGNsb3NpbmcgYSBjaGFyYWN0ZXIgc2hlZXQgdG8gbG9jayBpdCBvbiBnZXR0aW5nIGl0IHRvIGRpc3BsYXkgdmFsdWVzXG5Ib29rcy5vbignY2xvc2VBY3RvclNoZWV0JywgY2hhcmFjdGVyU2hlZXQgPT4gY2hhcmFjdGVyU2hlZXQub25DbG9zZVNoZWV0KCkpXG5Ib29rcy5vbigncmVuZGVyQ29DN0NyZWF0dXJlU2hlZXQnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q3JlYXR1cmVTaGVldC5mb3JjZUF1dG8oYXBwLCBodG1sLCBkYXRhKVxuKVxuSG9va3Mub24oJ3JlbmRlckNvQzdOUENTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYXBwLCBodG1sLCBkYXRhKVxuKVxuLy8gSG9va3Mub24oJ3VwZGF0ZUFjdG9yJywgKGFjdG9yLCBkYXRhVXBkYXRlKSA9PiBDb0NBY3Rvci51cGRhdGVBY3RvciggYWN0b3IsIGRhdGFVcGRhdGUpKTtcbi8vIEhvb2tzLm9uKCd1cGRhdGVUb2tlbicsIChzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpID0+IENvQ0FjdG9yLnVwZGF0ZVRva2VuKCBzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpKTtcblxuSG9va3Mub24oJ2NoYXRNZXNzYWdlJywgQ29DN1V0aWxpdGllcy5QYXJzZUNoYXRFbnRyeSlcbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVUb2tlbicsICggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkgPT4gQ29DQWN0b3IucHJlQ3JlYXRlVG9rZW4oIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpKVxuLy8gSG9va3Mub24oJ2NyZWF0ZVRva2VuJywgKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSA9PiBDb0NBY3Rvci5wcmVDcmVhdGVUb2tlbiggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkpXG4vLyBIb29rcy5vbihcInJlbmRlckNoYXRMb2dcIiwgKGFwcCwgaHRtbCwgZGF0YSkgPT4gQ29DN0l0ZW0uY2hhdExpc3RlbmVycyhodG1sKSk7XG5cbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgKC8qIGNvbnRyb2xzICovKSA9PiB7XG4gIC8vIGlmKCBnYW1lLnVzZXIuaXNHTSl7XG4gIC8vICBsZXQgZ3JvdXAgPSBjb250cm9scy5maW5kKGIgPT4gYi5uYW1lID09ICd0b2tlbicpO1xuICAvLyAgZ3JvdXAudG9vbHMucHVzaCh7XG4gIC8vICAgIHRvZ2dsZTogdHJ1ZSxcbiAgLy8gICAgaWNvbiA6ICdmYXMgZmEtYW5nbGUtZG91YmxlLXVwJyxcbiAgLy8gICAgbmFtZTogJ2RldnBoYXNlJyxcbiAgLy8gICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKSxcbiAgLy8gICAgdGl0bGU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpPyBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkRldlBoYXNlRW5hYmxlZCcpOiBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkRldlBoYXNlRGlzYWJsZWQnKSxcbiAgLy8gICAgb25DbGljayA6YXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVEZXZQaGFzZSgpXG4gIC8vICB9KTtcbiAgLy8gIGdyb3VwLnRvb2xzLnB1c2goe1xuICAvLyAgICB0b2dnbGU6IHRydWUsXG4gIC8vICAgIGljb24gOiAnZmFzIGZhcyBmYS11c2VyLWVkaXQnLFxuICAvLyAgICBuYW1lOiAnY2hhcmNyZWF0ZScsXG4gIC8vICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpLFxuICAvLyAgICB0aXRsZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpPyBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkNoYXJDcmVhdGlvbkVuYWJsZWQnKTogZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5DaGFyQ3JlYXRpb25EaXNhYmxlZCcpLFxuICAvLyAgICBvbkNsaWNrIDphc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZUNoYXJDcmVhdGlvbigpXG4gIC8vICB9KTtcbiAgLy8gfVxufSlcblxuLy8gSG9va3Mub24oJ3JlbmRlclNjZW5lQ29udHJvbHMnLCAoKSA9PiBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKSk7XG4vLyBIb29rcy5vbigncmVuZGVyU2NlbmVOYXZpZ2F0aW9uJywgKCkgPT4gQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKCkpO1xuLy8gU2hlZXQgY3NzIG9wdGlvbnNcbi8vIEhvb2tzLm9uKCdyZW5kZXJDb0M3Q2hhcmFjdGVyU2hlZXQnLCBDb0M3Q2hhcmFjdGVyU2hlZXQucmVuZGVyU2hlZXQpO1xuSG9va3Mub24oJ3JlbmRlckFjdG9yU2hlZXQnLCBDb0M3Q2hhcmFjdGVyU2hlZXQucmVuZGVyU2hlZXQpXG5Ib29rcy5vbigncmVuZGVySXRlbVNoZWV0JywgQ29DN0NoYXJhY3RlclNoZWV0LnJlbmRlclNoZWV0KVxuXG5Ib29rcy5vbignZ2V0U2NlbmVDb250cm9sQnV0dG9ucycsIENvQzdNZW51LmdldEJ1dHRvbnMpXG5Ib29rcy5vbigncmVuZGVyU2NlbmVDb250cm9scycsIENvQzdNZW51LnJlbmRlckNvbnRyb2xzKVxuXG5Ib29rcy5vbignZHJvcENhbnZhc0RhdGEnLCBDb0M3Q2FudmFzLm9uRHJvcFNvbWV0aGluZylcblxuSG9va3Mub24oJ2Ryb3BBY3RvclNoZWV0RGF0YScsIERyb3BBY3RvclNoZWV0RGF0YSlcblxuZnVuY3Rpb24gYWN0aXZhdGVHbG9iYWxMaXN0ZW5lciAoKSB7XG4gIGNvbnN0IGJvZHkgPSAkKCdib2R5JylcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBDb0M3Q29udGV4dE1lbnUuY2xvc2VBbGwpXG4gIGJvZHkub24oJ2NsaWNrJywgJ2EuY29jNy1pbmxpbmUtY2hlY2snLCBDb0M3Q2hlY2suX29uQ2xpY2tJbmxpbmVSb2xsKVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBfb25MZWZ0Q2xpY2spXG59XG5cbmZ1bmN0aW9uIF9vbkxlZnRDbGljayAoZXZlbnQpIHtcbiAgcmV0dXJuIGV2ZW50LnNoaWZ0S2V5XG59XG5cbkNPTkZJRy51aS5zZXR0aW5ncyA9IENvQzdTZXR0aW5nc0RpcmVjdG9yeVxuQ09ORklHLnVpLmNvbXBlbmRpdW0gPSBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeVxuQ09ORklHLnVpLmFjdG9ycyA9IENvQzdBY3RvckRpcmVjdG9yeVxuXG5Ib29rcy5vbignZHJhd05vdGUnLCBEcmF3Tm90ZSlcbkhvb2tzLm9uKCdyZW5kZXJDb0M3Sm91cm5hbFNoZWV0JywgUmVuZGVyQ29DN0pvdXJuYWxTaGVldClcbkhvb2tzLm9uKCdyZW5kZXJKb3VybmFsVGV4dFBhZ2VTaGVldCcsIFJlbmRlckpvdXJuYWxUZXh0UGFnZVNoZWV0KVxuXG5Ib29rcy5vbignUG9wT3V0OmxvYWRlZCcsIFBvcE91dExvYWRlZClcbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgSG9va3MsIFJvbGwsIHVpICovXG5cbi8qKlxuICpDYWxsb2ZDdGh1bGh1KDd0aEVkLikgRGVmaW5lIHlvdXIgb3duIGNvbW1hbmRzXG4gKkhlcmUsIHdlIHJlY2VpdmUgdGhlIGNoYXQgTWVzc2FnZXMgYW5kIGRldGVybWluZSBlYWNoIGNvbW1hbmQuXG4gKlsvQ0NdRGVmaW5lIGEgY29tbWFuZCB0byBqdWRnZSBhIG5vcm1hbCBkaWNlLlxuICpbL0NCUl0gQ29tbWFuZCB0byBkZWZpbmUgdGhlIGRlY2lzaW9uIG9uIGNvbWJpbmF0aW9uIHJvbGxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ2NoYXRNZXNzYWdlJywgKGh0bWwsIGNvbnRlbnQpID0+IHtcbiAgICAvLyBJJ20gY3VycmVudGx5IHVzaW5nIGl0IGZvciB0ZXN0aW5nIGJvbnVzIGRpY2UuXG4gICAgaWYgKGNvbnRlbnQubWF0Y2goL15cXC8oY2JyfGNjKS9pKSkge1xuICAgICAgLy8gRXh0cmFjdGluZyBudW1iZXJzIGZyb20gY29tYmluYXRpb24gcm9sbHNcbiAgICAgIGNvbnN0IGNvbW1hbmRzID0gY29udGVudC5tYXRjaCgvKFxcZCspL2cpXG4gICAgICBpZiAoY29tbWFuZHMpIHtcbiAgICAgICAgbmV3IFJvbGwoJzFkMTAwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pLnRoZW4ociA9PiB7XG4gICAgICAgICAgY29uc3QgcyA9IHIucmVzdWx0XG4gICAgICAgICAgY29uc3QgcmVzID0gY29tbWFuZHNcbiAgICAgICAgICAgIC5tYXAobSA9PiB7XG4gICAgICAgICAgICAgIGxldCByZXMgPSAnJ1xuICAgICAgICAgICAgICBpZiAocyA8PSAxKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgICAgICAgZWxzZSBpZiAocyA+PSAxMDApIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgICAgICAgICBlbHNlIGlmIChzIDw9IG0gLyA1KSB7XG4gICAgICAgICAgICAgICAgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzIDw9IG0gLyAyKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzIDw9IG0pIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPj0gOTYpIHtcbiAgICAgICAgICAgICAgICBpZiAobSA8IDUwKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgICAgICAgICBlbHNlIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgfSBlbHNlIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBmaXJzdCByZXN1bHRzLlxuICAgICAgICAgICAgICByZXMgKz0gJyAnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbHVlJykgKyAnICcgKyBtXG4gICAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbignIC8gJylcbiAgICAgICAgICByLnRvTWVzc2FnZSh7XG4gICAgICAgICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICAgICAgICBmbGF2b3I6IHJlc1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdJbmNvcnJlY3QgdXNhZ2Ugb2YgY29tbWFuZCcpXG4gICAgICB9XG4gICAgICAvLyByZXR1cm4gdG8gYXZvaWQgZXJyb3JzIGluIHRoZSBjb21tYW5kLlxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBEcm9wQWN0b3JTaGVldERhdGEgKGFjdG9yLCBzaGVldCwgZGF0YSkge1xuICBpZiAoZGF0YS50eXBlID09PSAnSXRlbScgJiYgZGF0YS5hY3RvcklkKSB7XG4gICAgaWYgKGFjdG9yLmRhdGEuX2lkID09PSBkYXRhLmFjdG9ySWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBsZXQgYWN0b3JGcm9tID0gbnVsbFxuICAgIGlmIChkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkKSB7XG4gICAgICBhY3RvckZyb20gPSBnYW1lLnNjZW5lcy5nZXQoZGF0YS5zY2VuZUlkKS50b2tlbnMuZ2V0KGRhdGEudG9rZW5JZCkuYWN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0b3JGcm9tID0gZ2FtZS5hY3RvcnMuZ2V0KGRhdGEuYWN0b3JJZClcbiAgICB9XG4gICAgc3dpdGNoIChhY3Rvci5kYXRhLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NoYXJhY3Rlcic6XG4gICAgICBjYXNlICducGMnOlxuICAgICAgY2FzZSAnY3JlYXR1cmUnOlxuICAgICAgICBpZiAoIVsnY2hhc2UnXS5pbmNsdWRlcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAndmVoaWNsZSc6XG4gICAgICAgIHJldHVyblxuICAgICAgY2FzZSAnY29udGFpbmVyJzpcbiAgICAgICAgaWYgKCFbJ2Jvb2snLCAnaXRlbScsICdzcGVsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWN0b3JGcm9tKSB7XG4gICAgICBhY3RvckZyb20uZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YS5kYXRhLl9pZF0pXG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEcmF3Tm90ZSAobm90ZSkge1xuICBpZiAobm90ZS5kb2N1bWVudC5nZXRGbGFnKCdDb0M3JywgJ2hpZGUtYmFja2dyb3VuZCcpID8/IGZhbHNlKSB7XG4gICAgbm90ZS5jb250cm9sSWNvbi5iZy5jbGVhcigpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSZW5kZXJDb0M3Sm91cm5hbFNoZWV0IChhcHBsaWNhdGlvbiwgaHRtbCwgZGF0YSkge1xuICBpZiAoKGFwcGxpY2F0aW9uLm9iamVjdC5nZXRGbGFnKCdDb0M3JywgJ2Nzcy1hZHZlbnR1cmUtZW50cnknKSA/PyBmYWxzZSkpIHtcbiAgICBpZiAoIWh0bWwuaGFzQ2xhc3MoJ2NvYzctYWR2ZW50dXJlLWVudHJ5JykpIHtcbiAgICAgIGh0bWwuYWRkQ2xhc3MoJ2NvYzctYWR2ZW50dXJlLWVudHJ5JylcbiAgICB9XG4gICAgaWYgKChhcHBsaWNhdGlvbi5vYmplY3QuZ2V0RmxhZygnQ29DNycsICdmaXhlZC1hZHZlbnR1cmUtaGVhZGluZycpID8/IGZhbHNlKSAmJiAhaHRtbC5oYXNDbGFzcygnZml4ZWQtYWR2ZW50dXJlLWhlYWRpbmcnKSkge1xuICAgICAgY29uc3Qgb2JqID0gJChodG1sKVxuICAgICAgb2JqLmFkZENsYXNzKCdmaXhlZC1hZHZlbnR1cmUtaGVhZGluZycpXG4gICAgICBjb25zdCBzdWJoZWFkaW5nID0gZGF0YS5wYWdlcz8uWzBdPy5mbGFncz8uQ29DNz8uWydmaXhlZC1hZHZlbnR1cmUtc3ViaGVhZGluZyddID8/ICcnXG4gICAgICBpZiAoc3ViaGVhZGluZyA9PT0gJycpIHtcbiAgICAgICAgb2JqLmZpbmQoJ2FydGljbGUuam91cm5hbC1lbnRyeS1wYWdlLnRleHQubGV2ZWwxJyk/LmJlZm9yZSgnPGRpdiBzdHlsZT1cInBhZGRpbmc6IDAuNWVtO1wiPjwvZGl2PicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzaG9ydCA9IHN1YmhlYWRpbmcudHJpbSgpLmxlbmd0aCA9PT0gMFxuICAgICAgICBvYmouZmluZCgnYXJ0aWNsZS5qb3VybmFsLWVudHJ5LXBhZ2UudGV4dC5sZXZlbDEnKT8uYmVmb3JlKCc8ZGl2IGNsYXNzPVwiYWR2ZW50dXJlLWhlYWRpbmctc2VjdGlvbiBmbGV4cm93XCI+PGRpdiBjbGFzcz1cImJvb2ttYXJrJyArIChzaG9ydCA/ICcgc2hvcnQnIDogJycpICsgJ1wiPjxpbWcgc3JjPVwic3lzdGVtcy9Db0M3L2Fzc2V0cy9hcnQvJyArIChzaG9ydCA/ICdib29rbWFya3Mud2VicCcgOiAnYm9va21hcmsud2VicCcpICsgJ1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJhZHZlbnR1cmUtaGVhZGluZ1wiPjxkaXYgY2xhc3M9XCJoZWFkaW5nXCI+JyArIGRhdGEudGl0bGUgKyAnPC9kaXY+JyArIChzaG9ydCA/ICcnIDogJzxkaXYgY2xhc3M9XCJzdWJoZWFkaW5nXCI+JyArIHN1YmhlYWRpbmcgKyAnPC9kaXY+JykgKyAnPC9kaXY+PC9kaXY+JylcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSZW5kZXJKb3VybmFsVGV4dFBhZ2VTaGVldCAoYXBwbGljYXRpb24sIGh0bWwsIGRhdGEpIHtcbiAgaWYgKChhcHBsaWNhdGlvbi5vYmplY3QucGFyZW50LmdldEZsYWcoJ0NvQzcnLCAnY3NzLWFkdmVudHVyZS1lbnRyeScpID8/IGZhbHNlKSkge1xuICAgIGlmICghaHRtbC5oYXNDbGFzcygnY29jNy1hZHZlbnR1cmUtZW50cnknKSkge1xuICAgICAgaHRtbC5hZGRDbGFzcygnY29jNy1hZHZlbnR1cmUtZW50cnknKVxuICAgICAgaHRtbC5maW5kKCdzZWN0aW9uLnRtaS10b2dnbGVhYmxlIHAudG9nZ2xlJykuY2xpY2soKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG9iaiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IG9iai5jbG9zZXN0KCdzZWN0aW9uLnRtaS10b2dnbGVhYmxlJykuZmluZCgnZGl2LnRvZ2dsZTpmaXJzdCcpXG4gICAgICAgIGlmIChzZWN0aW9uLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgb2JqLnRleHQoJ1JldmVhbCcpXG4gICAgICAgICAgc2VjdGlvbi5zbGlkZVVwKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvYmoudGV4dCgnSGlkZScpXG4gICAgICAgICAgc2VjdGlvbi5zbGlkZURvd24oKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRyAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGFwcCwgbm9kZSkge1xuICBjb25zdCBzaGVldENsYXNzID0gQ09ORklHLkFjdG9yLnNoZWV0Q2xhc3Nlcy5jaGFyYWN0ZXI/LlsnQ29DNy5Db0M3Q2hhcmFjdGVyU2hlZXRWMyddPy5jbHNcbiAgaWYgKHNoZWV0Q2xhc3MgJiYgYXBwIGluc3RhbmNlb2Ygc2hlZXRDbGFzcykge1xuICAgIG5vZGUuc3R5bGUubWFyZ2luTGVmdCA9ICc4N3B4J1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ09DNyIsInN0YW5kYXJkIiwibW9kZXJuIiwibW9kZXJuUHVscCIsInB1bHAiLCJkb3duRGFya2VyVHJhaWxzIiwiZG93bkRhcmtlclRyYWlsc1B1bHAiLCJkYXJrQWdlcyIsImRhcmtBZ2VzUHVscCIsInJlZ2VuY3kiLCJyZWdlbmN5UHVscCIsInJlaWduT2ZUZXJyb3IiLCJnYXNMaWdodCIsImdhc0xpZ2h0UHVscCIsImludmljdHVzIiwiZGVjaW1hbExlZnQiLCJkZWNpbWFsUmlnaHQiLCJpbnRlZ2VyTGVmdCIsImludGVnZXJSaWdodCIsImxzZCIsInJvbWFuIiwibm9uZSIsImFzc2VzIiwic2VzdGVydGlpIiwicXVpbmFyaWkiLCJkZW5hcmlpIiwiZCIsInMiLCJ2YWx1ZSIsIm11bHRpcGxpZXIiLCJuYW1lIiwiZmlsdGVyIiwic3RyIiwiY29uIiwic2l6IiwiZGV4IiwiYXBwIiwiaW50IiwicG93IiwiZWR1Iiwibm9hZGp1c3RtZW50cyIsIm5veHBnYWluIiwic3BlY2lhbCIsInJhcml0eSIsInB1c2giLCJjb21iYXQiLCJmaWdodGluZyIsImZpcmVhcm0iLCJyYW5nZWQiLCJyZXF1aXJlc25hbWUiLCJrZWVwYmFzZXZhbHVlIiwicGlja25hbWVvbmx5Iiwib25seW9uZSIsIm1lbGVlIiwicm5nZCIsIm1udnIiLCJ0aHJvd24iLCJzaG90Z3VuIiwiZGJybCIsImltcGwiLCJicnN0IiwiYXV0byIsImFoZGIiLCJhZGRiIiwic2xudCIsInNwY2wiLCJtb250IiwiYmxzdCIsInN0dW4iLCJyYXJlIiwiYnVybiIsImNhbGwiLCJkaXNtaXNzIiwiY29udGFjdCIsInN1bW1vbiIsImJpbmQiLCJlbmNoYW50bWVudCIsImdhdGUiLCJteXRob3MiLCJvY2N1bHQiLCJvdGhlciIsInBoeXNpY2FsIiwibWVudGFsIiwibWlzY2VsbGFuZW91cyIsImJhc2ljIiwiaW5zYW5lIiwibWFuaWEiLCJwaG9iaWEiLCJjbGFzc2ljIiwibG92ZWNyYWZ0aWFuIiwiZm9ybXVsYSIsImFjdG9yIiwiYWN0b3JzaGVldCIsInN0YXR1cyIsInRlbXBvSW5zYW5lIiwiaW5kZWZJbnNhbmUiLCJ1bmNvbnNjaW91cyIsImNyaXRpY2FsV291bmRzIiwiZHlpbmciLCJwcm9uZSIsImRlYWQiLCJuZXdCb29rTmFtZSIsIm5ld1NraWxsTmFtZSIsIm5ld1NwZWxsTmFtZSIsIm5ld0l0ZW1OYW1lIiwibmV3V2VhcG9uTmFtZSIsImNyZWF0dXJlRmlnaHRpbmdTa2lsbCIsImZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lIiwiZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSIsInJhbmdlZFNwZWNpYWxpemF0aW9uTmFtZSIsImNvbWJhdENhcmRzIiwiZmlnaHRCYWNrIiwiZG9kZ2UiLCJtYW5ldXZlciIsIm5vUmVzcG9uc2UiLCJDb0M3QWN0aXZlRWZmZWN0IiwiQWN0aXZlRWZmZWN0IiwiYXBwbHkiLCJjaGFuZ2UiLCJrZXkiLCJpc05hTiIsInN5c3RlbSIsImF0dHJpYnMiLCJhcm1vciIsIk51bWJlciIsImRiIiwiU3RyaW5nIiwic3VwZXIiLCJvbk1hbmFnZUFjdGl2ZUVmZmVjdCIsImV2ZW50Iiwib3duZXIiLCJwcmV2ZW50RGVmYXVsdCIsImEiLCJjdXJyZW50VGFyZ2V0IiwibGkiLCJjbG9zZXN0IiwiZWZmZWN0IiwiZGF0YXNldCIsImVmZmVjdElkIiwiZWZmZWN0cyIsImdldCIsImFjdGlvbiIsImNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzIiwibGFiZWwiLCJnYW1lIiwiaTE4biIsImxvY2FsaXplIiwiaWNvbiIsIm9yaWdpbiIsInV1aWQiLCJlZmZlY3RUeXBlIiwidW5kZWZpbmVkIiwiZGlzYWJsZWQiLCJzaGVldCIsInJlbmRlciIsImRlbGV0ZSIsInVwZGF0ZSIsIl9wcmVwYXJlRHVyYXRpb24iLCJkdXJhdGlvbiIsInR5cGUiLCJzZWNvbmRzIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJmaWx0ZXJBY3RpdmVFZmZlY3RzIiwiY29uZGl0aW9uTmFtZSIsImZvdW5kcnkiLCJ1dGlscyIsImlzTmV3ZXJWZXJzaW9uIiwidmVyc2lvbiIsInN0YXR1c2VzIiwiaGFzIiwiZmxhZ3MiLCJjb3JlIiwic3RhdHVzSWQiLCJnZXRTdGF0dXNLZXkiLCJvcHRpb25zIiwic2l6ZSIsInZhbHVlcyIsImdldEZsYWciLCJmaW5kIiwidiIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiaXNTdGF0dXMiLCJ0aGlzIiwicHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMiLCJjYXRlZ29yaWVzIiwidGVtcG9yYXJ5IiwicGFzc2l2ZSIsImluYWN0aXZlIiwic3VwcHJlc3NlZCIsImluZm8iLCJlIiwiaXNTdXBwcmVzc2VkIiwiaXNUZW1wb3JhcnkiLCJoaWRkZW4iLCJsZW5ndGgiLCJwcmVwYXJlTlBDQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyIsImNvdW50IiwiYWN0aXZlIiwiX2dldFNvdXJjZU5hbWUiLCJleHBlbmRlZCIsIkNvQzdEaWNlIiwicm9sbCIsIm1vZGlmIiwicm9sbE1vZGUiLCJoaWRlRGljZSIsImFsdGVybmF0aXZlRGljZSIsIm1vZHVsZXMiLCJzZXR0aW5ncyIsIkNvQzciLCJkZXYiLCJkaWNlIiwiYWx3YXlzQ3JpdCIsIlJvbGwiLCJmcm9tRGF0YSIsImNyaXQwMSIsImFsd2F5c0Z1bWJsZSIsImZ1bWJsZTk5IiwicmVwZWF0IiwiTWF0aCIsImFicyIsImFzeW5jIiwicmVzdWx0IiwidW5pdCIsInRvdGFsIiwicmVzdWx0cyIsInRlbnMiLCJDT05GSUciLCJEaWNlIiwidGVybXMiLCJ0IiwiaW5jbHVkZXMiLCJtYXgiLCJtaW4iLCJzaG93Um9sbERpY2UzZCIsInN5bmNEaWNlIiwiY2hhdERhdGEiLCJ3aGlzcGVyIiwiYmxpbmQiLCJDaGF0TWVzc2FnZSIsImFwcGx5Um9sbE1vZGUiLCJkaWNlM2QiLCJzaG93Rm9yUm9sbCIsInVzZXIiLCJjb21iaW5lZFJvbGwiLCJwb29sIiwia2V5cyIsIm1hcCIsInBhcnNlSW50IiwicGVuYWx0eURpY2UiLCJib251c0RpY2UiLCJoYXNEU04iLCJqb2luIiwiZ3JvdXBzIiwiYmFzZURpZSIsImJhc2VTZXQiLCJvdXRwdXQiLCJtb2RpZmllciIsIm9mZnNldCIsInN0YXRpYyIsImNsYXNzIiwiZXZhbHVhdGVkIiwibnVtYmVyIiwiZmFjZXMiLCJtb2RpZmllcnMiLCJvcGVyYXRvciIsIkNvQzdJdGVtIiwiSXRlbSIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNvbnRleHQiLCJkb2N1bWVudENsYXNzZXMiLCJleHRlbmRlZCIsImltZyIsIl9jcmVhdGVEb2N1bWVudExpbmsiLCJldmVudERhdGEiLCJtYXRjaCIsInJlbGF0aXZlVG8iLCJKb3VybmFsRW50cnlQYWdlIiwiZG9jdW1lbnRDbGFzcyIsIml0ZW0iLCJmcm9tVXVpZCIsImljb25MYW5ndWFnZSIsIm1hbGZ1bmN0aW9uIiwidG9nZ2xlUHJvcGVydHkiLCJwcm9wZXJ0eUlkIiwib3ZlcnJpZGUiLCJmaXJlYXJtcyIsImNoZWNrZWRQcm9wcyIsImVyYXMiLCJDb0NJREVkaXRvciIsImVyYVRvZ2dsZSIsInByb3BlcnRpZXMiLCJza2lsbE5hbWUiLCJwYXJ0cyIsImdldE5hbWVQYXJ0c1NwZWMiLCJzcGVjaWFsaXphdGlvbiIsIm1lbGVlV2VhcG9uIiwicHJvcE5hbWUiLCJwcm9wVmFsdWUiLCJ0aGVuIiwiaGFzUHJvcGVydHkiLCJpc0luY2x1ZGVkSW5TZXQiLCJzaG9ydE5hbWUiLCJ1cGRhdGVSb2xsIiwic3BlY05hbWVSZWdleCIsIlJlZ0V4cCIsIkNvQzdVdGlsaXRpZXMiLCJxdW90ZVJlZ0V4cCIsImdldE5hbWVXaXRob3V0U3BlYyIsImlzQW55U3BlYyIsInRvTG93ZXJDYXNlIiwic2tpbGwiLCJndWVzc05hbWVQYXJ0cyIsImNoZWNrU2tpbGxQcm9wZXJ0aWVzIiwic2V0IiwiaW5kZXhPZiIsImZsYWdGb3JEZXZlbG9wZW1lbnQiLCJpc0dNIiwidW5mbGFnRm9yRGV2ZWxvcGVtZW50IiwiZGV2ZWxvcGVtZW50RmxhZyIsImdldEl0ZW1GbGFnIiwidG9nZ2xlSXRlbUZsYWciLCJmbGFnTmFtZSIsImVyYXNlQWRqdXN0bWVudCIsImZsYWdWYWx1ZSIsInVpIiwibm90aWZpY2F0aW9ucyIsInNldEl0ZW1GbGFnIiwidW5zZXRJdGVtRmxhZyIsImxvY2tlZCIsInVzZXNBbHRlcm5hdGl2ZVNraWxsIiwibWF4VXNlc1BlclJvdW5kIiwibXVsdGlTaG90IiwidXNlc1BlclJvdW5kIiwic2luZ2xlU2hvdCIsIm5vcm1hbCIsInVzZXNQZXJSb3VuZFN0cmluZyIsImJ1cnN0IiwibXVsdGlwbGVTaG90cyIsImJhc2VSYW5nZSIsInJhbmdlIiwicGFyZW50IiwicGFyc2VDaGFyYWN0ZXJpc3RpY3MiLCJldmFsdWF0ZVN5bmMiLCJsb25nUmFuZ2UiLCJsb25nIiwiZXh0cmVtZVJhbmdlIiwiZXh0cmVtZSIsInNraWxsUHJvcGVydGllcyIsImVudHJpZXMiLCJjYWxjdWxhdGVCYXNlIiwiYmFzZSIsInBhcnNlZCIsInN0YXJ0c1dpdGgiLCJzdWJzdHJpbmciLCJnZXRQcm9wZXJ0eSIsImZsb29yIiwibWF4aW1pemUiLCJlcnIiLCJfYmFzZSIsImFzeW5jQmFzZSIsImNvbnNvbGUiLCJnZXRCdWxsZXRMZWZ0IiwiYW1tbyIsInNldEJ1bGxldHMiLCJyZWxvYWQiLCJtYXhCdWxsZXQiLCJidWxsZXRzIiwiYWRkQnVsbGV0IiwibWF4QnVsbGV0cyIsInNob290QnVsbGV0cyIsIngiLCJtZXJnZU9wdGlvbmFsU2tpbGxzIiwic2tpbGxMaXN0IiwiY29uY2F0IiwicmVkdWNlIiwibmV3QXJyYXkiLCJzb3J0Iiwic29ydEJ5TmFtZUtleSIsIl9nZXRDaGF0Q2FyZEFjdG9yIiwiY2FyZCIsInRva2VuS2V5IiwidG9rZW5JZCIsInNjZW5lSWQiLCJzcGxpdCIsImFjdG9ycyIsInRva2VucyIsInNjZW5lIiwic2NlbmVzIiwidG9rZW5EYXRhIiwiZ2V0RW1iZWRkZWREb2N1bWVudCIsIlRva2VuIiwiYWN0b3JJZCIsImdldENoYXREYXRhIiwiaHRtbE9wdGlvbnMiLCJkdXBsaWNhdGUiLCJkZXNjcmlwdGlvbiIsImxhYmVscyIsIlRleHRFZGl0b3IiLCJlbnJpY2hIVE1MIiwicHJvcHMiLCJmbiIsInAiLCJfd2VhcG9uQ2hhdERhdGEiLCJ3ZWFwb25Qcm9wZXJ0aWVzIiwic2tpbGxMYWJlbCIsImZvdW5kIiwibWFpbiIsImlkIiwiaXRlbXMiLCJhbHRlcm5hdGl2IiwiY2FuQmVQdXNoZWQiLCJpbXBhbGUiLCJpc0RvZGdlIiwiY3JlYXRlSW5saW5lUm9sbCIsImNscyIsInRpdGxlIiwiZXNjYXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImsiLCJpbm5lckhUTUwiLCJpc0N0cmxLZXkiLCJtZXRhS2V5IiwiY3RybEtleSIsImtleUNvZGUiLCJjaGF0SGVscGVyIiwiaHlwaGVuVG9DYW1lbENhc2UiLCJzdHJpbmciLCJyZXBsYWNlIiwidG9VcHBlckNhc2UiLCJjcmVhdGVNZXNzYWdlIiwibWVzc2FnZSIsIm1lc3NhZ2VEYXRhIiwiZmxhdm9yIiwic3BlYWtlciIsImdldFNwZWFrZXIiLCJDT05TVCIsIkNIQVRfTUVTU0FHRV9UWVBFUyIsIldISVNQRVIiLCJST0xMIiwiRElDRV9ST0xMX01PREVTIiwiU0VMRiIsImNvbnRlbnQiLCJjcmVhdGUiLCJtc2ciLCJjYW1lbENhc2VUb0h5cGhlbiIsImdldEFjdG9yRnJvbUtleSIsImlzRG9jdW1lbnRVdWlkIiwiaXNEb2N1bWVudFV1aWRQYWNrIiwiU2Zyb21VdWlkIiwidG9rZW4iLCJnZXRUb2tlbkZyb21LZXkiLCJnZXRTcGVha2VyRnJvbUtleSIsImFjdG9yS2V5IiwiYWxpYXMiLCJhdHRhY2hPYmplY3RUb0VsZW1lbnQiLCJvYmplY3QiLCJlbGVtZW50Iiwib2JqZWN0TmFtZSIsInByb3AiLCJnZXRPYmplY3RGcm9tRWxlbWVudCIsImRlc2VyaWFsaXplIiwib2JqIiwib2JqUHJvcCIsIm9iak5hbWUiLCJ0b1N0cmluZyIsInRva2VuRG9jIiwiZ2V0QWN0b3JUb2tlbiIsInByb3RvdHlwZVRva2VuIiwiZ2V0QWN0b3JJbWdGcm9tS2V5IiwidGV4dHVyZSIsInNyYyIsImdldERpc3RhbmNlIiwic3RhcnRUb2tlbiIsImVuZFRva2VuIiwiY2VudGVyIiwiZGlzdGFuY2UiLCJncmlkVW5pdCIsImNhbnZhcyIsImdyaWQiLCJ1bml0cyIsInJheSIsIlJheSIsInNlZ21lbnQiLCJtZWFzdXJlRGlzdGFuY2VzIiwiZ3JpZFNwYWNlcyIsImVsZXZhdGlvbiIsInNxcnQiLCJ3YXJuIiwidG9ZYXJkcyIsIkNvQzdSb2xsIiwiZ2V0RnJvbUNhcmQiLCJyb2xsRGl2IiwicXVlcnlTZWxlY3RvciIsInJlc3VsdFR5cGUiLCJzdWNjZXNzTGV2ZWwiLCJDb0M3Q2hlY2siLCJyZWd1bGFyIiwiZm9ybWF0IiwiaGFyZCIsImNyaXRpY2FsIiwiZnVtYmxlIiwiZmFpbHVyZSIsIml0ZW1JZCIsInNraWxsSWQiLCJzaG93RGljZVJvbGwiLCJkaWNlUmVzdWx0cyIsImRpZVJlc3VsdCIsImRpY2VzIiwiZGljZURhdGEiLCJzaG93IiwiZ2V0RnJvbUVsZW1lbnQiLCJoYXNCb251cyIsImRpY2VNb2RpZmllciIsImJvbnVzIiwiYm9udXNUeXBlIiwidGVuRGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkaWUiLCJzZWxlY3RlZCIsImlzTWF4IiwiaXNNaW4iLCJ1bml0RGllIiwiaW5jcmVhc2VTdWNjZXNzIiwiaXNsIiwibmV3U3VjY2VzTGV2ZWwiLCJsdWNrTmVlZGVkIiwibHVja05lZWRlZFR4dCIsImx1Y2tOZWVkZWRWYWx1ZSIsImdldEZyb21DaGVjayIsImNoZWNrIiwicm9sbFR5cGUiLCJzaWRlIiwicmVmTWVzc2FnZUlkIiwicmVmZXJlbmNlTWVzc2FnZUlkIiwiZGlmZmljdWx0eSIsImRpY2VNb2QiLCJyYXdWYWx1ZSIsImlzRnVtYmxlIiwiaXNDcml0aWNhbCIsImNoYXJhY3RlcmlzdGljIiwiaXNUb2tlbiIsImF0dGFjaENoZWNrVG9FbGVtZW50IiwiaHRtbEVsZW1lbnQiLCJhdHRhY2hUb0VsZW1lbnQiLCJDb0M3RGFtYWdlIiwiZ2V0TWFpbkRpZSIsImRhbWFnZVN0cmluZyIsImRhbWFnZSIsInJvbGxzIiwiciIsImdyb3VwIiwiQXZlcmFnZVBhcmVudGhldGljYWxUZXJtIiwiUGFyZW50aGV0aWNhbFRlcm0iLCJfZXZhbHVhdGVTeW5jIiwiQXZlcmFnZVJvbGwiLCJ0ZXJtIiwiZXZhbHVhdGUiLCJtaW5pbWl6ZSIsImZvckVhY2giLCJSb2xsVGVybSIsIkVycm9yIiwiaXNJbnRlcm1lZGlhdGUiLCJfZGljZSIsIk51bWVyaWNUZXJtIiwic2ltcGxpZnlUZXJtcyIsIl9ldmFsdWF0ZWQiLCJfdG90YWwiLCJfZXZhbHVhdGVUb3RhbCIsIl9zcGxpdFBhcmVudGhlc2VzIiwiX2Zvcm11bGEiLCJfc3BsaXRHcm91cCIsIm9wZW5SZWdleHAiLCJPUEVOX1JFR0VYUCIsImNsb3NlUmVnZXhwIiwiQ0xPU0VfUkVHRVhQIiwib3BlblN5bWJvbCIsImNsb3NlU3ltYm9sIiwib25DbG9zZSIsIm9wZW4iLCJleHByZXNzaW9uIiwiYXJncyIsIl9zcGxpdE1hdGhBcmdzIiwiTWF0aFRlcm0iLCJBY3RvclBpY2tlckRpYWxvZyIsIkZvcm1BcHBsaWNhdGlvbiIsImRlZmF1bHRPcHRpb25zIiwibWVyZ2VPYmplY3QiLCJjbGFzc2VzIiwidGVtcGxhdGUiLCJjbG9zZU9uU3VibWl0Iiwid2lkdGgiLCJoZWlnaHQiLCJhY3RpdmF0ZUxpc3RlbmVycyIsImh0bWwiLCJvbiIsIl9vblBpY2siLCJob3ZlciIsIl9vbkhvdmVySW4iLCJfb25Ib3Zlck91dCIsIl9vblN1Ym1pdEJ1dHRvbiIsImwiLCJwYXJlbnRFbGVtZW50IiwiY2hpbGRyZW4iLCJ0b2dnbGUiLCJlbnRyeVV1aWQiLCJyZWFkeSIsImlzVmlzaWJsZSIsImNvbnRyb2xsZWQiLCJob3Zlck91dE90aGVycyIsIl9oaWdobGlnaHRlZCIsInJlc29sdmUiLCJjbG9zZSIsImFsbG93ZWRUeXBlcyIsInBsYWNlYWJsZXMiLCJvd25lcnNoaXAiLCJkZWZhdWx0IiwiRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUyIsIk9XTkVSIiwiZm91bmRJRHMiLCJvcHRpb24iLCJpc1Rva2VuRG9jdW1lbnQiLCJUb2tlbkRvY3VtZW50IiwicG9ydHJhaXQiLCJjYW5QaW5nIiwiY2hhcmFjdGVyIiwiZGVmYXVsdE9wdGlvbiIsIlByb21pc2UiLCJDb0M3R3JvdXBNZXNzYWdlIiwicmVtb3ZlUm9sbCIsIm1lc3NhZ2VJZCIsIm1lc3NhZ2VzIiwicm9sbFN0YXR1c2VzIiwid2hpY2giLCJ1cGRhdGVzIiwidXBkYXRlVGhlR3JvdXBNZXNzYWdlIiwicHVzaE15Um9sbCIsImdtSWQiLCJjYW5Vc2VyTW9kaWZ5IiwiZ2V0QW5JZEZvckdtIiwicGVyZm9ybUNvbWJpbmVkUm9sbCIsInB1c2hpbmciLCJwZXJmb3JtTm9ybWFsUm9sbCIsInNwZW5kTXlMdWNrIiwiY29tcGxldGVkIiwibHVja0Ftb3VudCIsImluZGV4IiwibHVja1RvU3BlbmQiLCJnZXRBY3RvciIsImFjdG9yVXVpZCIsInNwZW5kTHVjayIsImVycm9yIiwiaW5jcmVhc2VMdWNrU3BlbmQiLCJKU09OUm9sbERhdGEiLCJzb2NrZXQiLCJlbWl0IiwibGlzdGVuZXIiLCJ1cGdyYWRlQ2hlY2siLCJmb3JjZVBhc3MiLCJyb2xsRGF0YSIsInBhcnNlUm9sbHMiLCJxdWljayIsImFzc2lnbiIsImV4cGFuZE9iamVjdCIsInBlcmZvcm1EZWxldGlvbnMiLCJhbGxSb2xsc0NvbXBsZXRlZCIsImlzU3VjY2VzcyIsImlzRmFpbHVyZSIsInN1Y2Nlc3NlcyIsImZhaWx1cmVzIiwiY29tYmluZWQiLCJpc1RpZSIsImlzQ29tYmF0Iiwicm9sbE9yZGVyIiwiQXJyYXkiLCJmcm9tIiwiSW50OEFycmF5Iiwic3Vic3RyIiwic3VjY2Vzc0xldmVscyIsImRlZmVuZGVySXNEb2RnaW5nIiwicGFzc2VkIiwiaXNEb2RnaW5nIiwiaXNBdHRhY2tlciIsImFkdmFudGFnZUF0dGFja2VyIiwiYWR2YW50YWdlRGVmZW5kZXIiLCJiZXN0IiwibmVlZHNUaWVCcmVha2VyIiwicmVzdWx0VGV4dCIsInJvbGxJc1dpbm5lciIsInJvbGxJc1RpZSIsImlzV2lubmVyIiwiaXNNYW5ldXZlciIsIm9wcG9zZWRSb2xsVGllQnJlYWtlciIsImIiLCJtb2RpZmllZFJlc3VsdCIsIm9mZnNldE1heCIsImZhaWxlZCIsImkiLCJyZW5kZXJUZW1wbGF0ZSIsImdldFRlbXBsYXRlUGF0aCIsInVwZGF0ZVRoZU1lc3NhZ2UiLCJnZXRDaGVjayIsImNoZWNrRGF0YSIsInRoZVJvbGwiLCJkZW55UHVzaCIsImF0dHJpYnV0ZSIsInB1c2hhYmxlIiwicGVyZm9ybVJvbGwiLCJfcGVyZm9ybSIsImZvcmNlRFNOIiwiZmlyc3QiLCJzaWxlbnQiLCJwZXJmb3JtTXlSb2xscyIsIm5hbWVSb2xsIiwic2V0VGltZW91dCIsImZ1bGxOYW1lIiwidGFncyIsInBlcmNlbnQiLCJuZXdHcm91cE1lc3NhZ2UiLCJyb2xsc0J5VXNlciIsInJvbGxSZXF1aXJlc05hbWUiLCJhc1VzZXJJZCIsImF1dG9Sb2xsIiwicm9sbGluZyIsInRlbXBsYXRlRGF0YSIsInVzZXJJZCIsImlzVXNlckFjdGl2ZSIsInVzZXJzIiwiX29uVG9nZ2xlIiwiYnV0dG9uIiwiY29udGFpbnMiLCJfb25DbGljayIsIm9rYXkiLCJyZW5kZXJDaGF0TWVzc2FnZSIsImNhbk1vZGlmeSIsImdtIiwiYW55IiwicmVtb3ZlIiwiaWRlbnRpZmllciIsImFwaSIsImNvY2lkIiwiZnJvbUNvQ0lEIiwibSIsImRpZmZpY3VsdHlMZXZlbCIsInVua25vd24iLCJkZWZhdWx0VXVpZCIsInUiLCJnZXRDaGFyYWN0ZXJpc3RpY05hbWVzIiwic2hvcnQiLCJjaGFyYWN0ZXJpc3RpY3MiLCJza2lsbHMiLCJnZXRJdGVtT3JBZGQiLCJpc1dlYXBvbiIsImNyZWF0ZUdyb3VwTWVzc2FnZSIsImNvbmZpZyIsInNob3dDb21wbGV0ZWRSb2xscyIsImlzRWRpdGFibGUiLCJ3aW5uZXJSb2xsc0RhbWFnZSIsIndhc1B1c2hlZCIsInJvbGxSZXF1aXNpdGVzIiwicm9sbGFibGUiLCJDaGF0Q2FyZEFjdG9yIiwiZmFzdEZvcndhcmQiLCJkaXNwbGF5QWN0b3JPbkNhcmQiLCJpc0JsaW5kIiwiX2lzQmxpbmQiLCJfcm9sbE1vZGUiLCJ3ZWFwb24iLCJ0YXJnZXRlZFRva2VucyIsInRhcmdldHMiLCJ0YXJnZXQiLCJ0YXJnZXRUb2tlbiIsInRhcmdldEFjdG9yIiwiX3RhcmdldFRva2VuIiwiX3RhcmdldEtleSIsInBvcCIsIl90YXJnZXRBY3RvciIsInRhcmdldEtleSIsImhhc1RhcmdldCIsImdldFdlYXBvblNraWxscyIsInRhcmdldEltZyIsInRhcmdldE5hbWUiLCJhY3RvckltZyIsInNheSIsInNwZWFrZXJEYXRhIiwiZ2V0V2hpc3BlclJlY2lwaWVudHMiLCJyZXBsYWNlciIsIlNhbkNoZWNrQ2FyZCIsInNhbkRhdGEiLCJCb29sZWFuIiwic2FuUmVhc29uIiwic2FuTW9kaWZpZXIiLCJzYW5EaWZmaWN1bHR5Iiwic3RhdGUiLCJzYW5Mb3NzU291cmNlIiwiaW52b2x1bnRhcnlBY3Rpb24iLCJzYW5Sb2xsZWQiLCJzYW5DaGVjayIsInNhbkxvc3NGb3JtdWxhIiwic2FuTWF4Iiwic2FuTWluIiwic2FuTG9zdFRvUmVhc29uIiwibWF4UG9zc2libGVTYW5Mb3NzIiwibWF4TG9zc1RvU2FuUmVhc29uIiwibWF4U2FuTG9zcyIsInNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCIsImZpcnN0RW5jb3VudGVyIiwibXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCIsImlzQWN0b3JMb29zaW5nU2FuIiwiaGFzVGVtcG9JbnNhbmUiLCJpbW11bmVUb0NyZWF0dXJlIiwiYm91dER1cmF0aW9uVGV4dCIsImJvdXREdXJhdGlvbiIsImJvdXRSZWFsVGltZSIsImJvdXRTdW1tYXJ5IiwieW91R2FpbkN0aHVsaHVNeXRob3NTdHJpbmciLCJteXRob3NHYWluIiwiYWR2YW5jZVN0YXRlIiwia2VlcENyZWF0dXJlU2FuRGF0YSIsImZpbmlzaCIsImFwcGx5U2FuTG9zcyIsImJvdXRSZXN1bHQiLCJlbnRlckJvdXRPZk1hZG5lc3MiLCJib3V0T2ZNYWRuZXNzUmVzb2x2ZWQiLCJib3V0T2ZNYWRuZXNzT3ZlciIsInRyaWdnZXJJbnNhbml0eSIsInVuc2V0Q29uZGl0aW9uIiwiY3RodWxodU15dGhvc0F3YXJkZWQiLCJhbW91bnRHYWluZWQiLCJleHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSIsImN0aHVsaHVNeXRob3NTa2lsbCIsIm9sZFZhbHVlIiwiYWRqdXN0bWVudHMiLCJleHBlcmllbmNlIiwiYnlwYXNzUm9sbFNhbiIsImlzQnlwYXNzZWQiLCJpbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCIsInNhbkxvc3NSb2xsZWQiLCJpZ25vcmVTYW5DaGVjayIsInByZUhhcmRlbmVkU2FuTG9zcyIsIm9yaWdpbmFsU2FuTG9zcyIsInNhbkxvc3MiLCJhcHBseU15dGhvc0hhcmRlbmVkIiwidXNlTXl0aG9zSGFyZGVuZWQiLCJyb2xsU2FuIiwibGltaXRlZExvc3NUb0NyZWF0dXJlIiwiaW1tdW5lQWxyZWFkeUluQm91dCIsInNhbkxvc3NBcHBsaWVkIiwiaW50Um9sbGVkIiwiaW5zYW5pdHkiLCJyb2xsU2FuTG9zcyIsInNhbkxvc3NSb2xsIiwibG9vc2VTYW4iLCJhY3Rvckxvc3RTYW4iLCJzYW4iLCJwZXJtYW5lbnRseUluc2FuZSIsImhhc0luZGVmSW5zYW5lIiwic2hha2VuIiwiaW5zYW5pdHlUYWJsZVJvbGxlZCIsImRhaWx5U2FuTG9zcyIsImRhaWx5U2FuTGltaXQiLCJ0ZW1wb3JhcnlJbnNhbmUiLCJpbmRlZmluaXRlbHlJbnNhbmUiLCJtZW1vcnlSZXByZXNzZWQiLCJyb2xsSW50IiwiaW50Q2hlY2siLCJpbnREaWZmaWN1bHR5IiwiaW50TW9kaWZpZXIiLCJhbHJlYWR5SW5zYW5lIiwic2V0Q29uZGl0aW9uIiwiY2xlYXJTYW5Mb3NzUmVhc29uIiwic2V0UmVhc29uU2FuTG9zcyIsInVwZGF0ZUNoYXRDYXJkIiwiX19pbmxpbmVTYW5DaGVjayIsImlubGluZUNoZWNrIiwib3V0ZXJIVE1MIiwiX19pbmxpbmVTYW5Mb3NzUm9sbCIsIl9faW5saW5lSW50Q2hlY2siLCJodG1sQ2FyZEVsZW1lbnQiLCIkIiwicGFyc2VIVE1MIiwiY2hhdE1lc3NhZ2UiLCJjaGF0IiwidXBkYXRlTWVzc2FnZSIsImNoZWNrVGFyZ2V0cyIsImNoYXRDYXJkIiwiZ2V0RnJvbU1lc3NhZ2VJZCIsImh0bWxDYXJkIiwic2FuQ2hlY2tDYXJkRGF0YSIsInBhcnNlIiwidW5lc2NhcGUiLCJzYW5DaGVja0NhcmQiLCJDb0M3TGluayIsIkNIRUNLX1RZUEUiLCJDSEVDSyIsIlNBTkxPU1MiLCJJVEVNIiwiRUZGRUNUIiwiTElOS19UWVBFIiwiQ0hBUkFDVEVSSVNUSUMiLCJBVFRSSUJVVEUiLCJTS0lMTCIsImluaXQiLCJib2R5IiwiX29uTGlua0NsaWNrIiwiX29uRHJhZ0NvQzdMaW5rIiwiZW5yaWNoZXJzIiwicGF0dGVybiIsImVucmljaGVyIiwiX2NyZWF0ZUxpbmsiLCJfbGlua0Zyb21FdmVudCIsIm9sZFR5cGUiLCJsaW5rVHlwZSIsImxpbmtJY29uIiwiZGlzcGxheU5hbWUiLCJpbm5lclRleHQiLCJjb252ZXJ0RGlmZmljdWx0eSIsIm9yaWdpbmFsRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZnJvbURyb3BEYXRhIiwiY2hhbmdlcyIsImV4dGVybmFsIiwibWF0Y2hlcyIsIm1hdGNoQWxsIiwiZGlmZmljdWx0eVN0cmluZyIsImh1bWFuTmFtZSIsImNvY0lkTmFtZSIsImRyYWdnYWJsZSIsInBhY2siLCJsaW5rIiwiX29uTGlua0FjdG9yQ2xpY2siLCJjaGFyYWN0ZXJpc3RpY0NoZWNrIiwic2hpZnRLZXkiLCJza2lsbENoZWNrIiwiYXR0cmlidXRlQ2hlY2siLCJ3ZWFwb25DaGVjayIsInRvQ2hhdE1lc3NhZ2UiLCJ0b1doaXNwZXJNZXNzYWdlIiwib3duZXJzIiwiQ29DN0NvbnRlbnRMaW5rRGlhbG9nIiwiZ2V0U3BlYWtlckFjdG9yIiwiT0JTRVJWRVIiLCJzZXRWYWx1ZSIsImNoZWNrVHlwZSIsImNoZWNrTmFtZSIsImlzQ2hhcmFjdGVyaXN0aWNDaGVjayIsIkNvQ0FjdG9yIiwiZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uIiwiYyIsImlzQ2hlY2siLCJpc0F0dHJpYnV0ZUNoZWNrIiwiaXNTa2lsbENoZWNrIiwiaXNJdGVtQ2hlY2siLCJpc1Nhbkxvc3NDaGVjayIsImlzRWZmZWN0IiwiaXNQdXNoaW5nIiwiZHJhZ0Ryb3AiLCJkcmFnU2VsZWN0b3IiLCJkcm9wU2VsZWN0b3IiLCJ0YWJzIiwibmF2U2VsZWN0b3IiLCJjb250ZW50U2VsZWN0b3IiLCJpbml0aWFsIiwiZ2V0RGF0YSIsInNoZWV0RGF0YSIsImF0dHJpYnV0ZVR5cGUiLCJlZmZlY3RNb2RlcyIsIkFDVElWRV9FRkZFQ1RfTU9ERVMiLCJjaGFyYWN0ZXJpc3RpY1R5cGUiLCJmcm9tR2FtZSIsImZyb21EaXJlY3RvcnkiLCJoYXNJRCIsImZyb21Db21wZW5kaXVtIiwiaXNTZXRGcm9tR2FtZSIsImFjdG9yTmFtZXMiLCJfb25DaGFuZ2VTdWJtaXQiLCJjbGljayIsIl9vbkVmZmVjdENvbnRyb2wiLCJfb25TdWJtaXQiLCJfYWRkRWZmZWN0Q2hhbmdlIiwiaWR4Iiwic3VibWl0IiwicHJldmVudENsb3NlIiwidXBkYXRlRGF0YSIsIm1vZGUiLCJBREQiLCJfdXBkYXRlT2JqZWN0IiwiZm9ybURhdGEiLCJoYXNFZmZlY3QiLCJ0aW50Iiwicm91bmRzIiwidHVybnMiLCJzdWJtaXR0ZXIiLCJjb3B5VG9DbGlwYm9hcmQiLCJfb25Ecm9wIiwiZGF0YVN0cmluZyIsInNldExpbmsiLCJkb2N1bWVudE5hbWUiLCJkYXRhTGlzdCIsImdldERhdGFGcm9tRHJvcEV2ZW50IiwiaGFzTW9kaWZpZXJzIiwiaGFzTGFiZWwiLCJoYXNJY29uIiwibGlua0RhdGEiLCJkaWFsb2ciLCJSb2xsRGlhbG9nIiwidW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0IiwiYWxsb3dGbGF0RGljZU1vZGlmaWVyIiwiZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIiLCJhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllciIsImRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJoaWRlRGlmZmljdWx0eSIsImNhcmRUeXBlIiwiZm9yY2VkQ2FyZFR5cGUiLCJjYXJkVHlwZXMiLCJDb0M3Q2hhdE1lc3NhZ2UiLCJkbGciLCJEaWFsb2ciLCJidXR0b25zIiwiY2FsbGJhY2siLCJGb3JtRGF0YSIsIlJvbGxDYXJkIiwiaW5pdGlhdG9yIiwiZnJvbU1lc3NhZ2VJZCIsImZyb21NZXNzYWdlIiwiY2FyZEVsZW1lbnQiLCJmcm9tSFRNTENhcmRFbGVtZW50IiwiY2FyZERhdGEiLCJyb2xsZWQiLCJfaHRtbFJvbGwiLCJnZXRIdG1sUm9sbCIsInNwYW4iLCJmbGFnIiwidW5zZXRGbGFnIiwic2V0RmxhZyIsInRvZ2dsZUZsYWciLCJkaXNwYXRjaCIsImNvbGxlY3Rpb24iLCJkZWZhdWx0Q29uZmlnIiwidGltZXN0YW1wIiwicHJvY2VzcyIsInJlc29sdmVPbGQiLCJjbG9zZUNhcmQiLCJ0b01lc3NhZ2UiLCJjb21wdXRlIiwiY2xvc2VkIiwiZnJvbUdNIiwicmFuayIsImFkZFJvbGxEYXRhIiwiYWRkUm9sbCIsInNwbGljZSIsIl9tZXNzYWdlIiwiX21lc3NhZ2VJZCIsImV4Y2x1ZGUiLCJleGNsdWRlU3RhcnRXaXRoIiwid2lubmVycyIsIndpbm5lciIsImxvb3NlcnMiLCJsb29zZXIiLCJoYXNXaW5uZXIiLCJpc0tlZXBlciIsIkNvbWJpbmVkQ2hlY2tDYXJkIiwiYmluZExpc3Rlcm5lcnMiLCJzdWNjZXNzQ291bnQiLCJtYWluQWN0b3JLZXkiLCJzdWNjZXNzIiwiYWxsIiwiY2hlY2tHTUluaXRpYXRvciIsIl9yb2xsIiwiaGlkZVN1Y2Nlc3MiLCJhc3NpZ25Sb2xsIiwiQXVkaW9IZWxwZXIiLCJwbGF5Iiwic291bmRzIiwiYWx0ZXIiLCJmbGF0RGljZU1vZGlmaWVyIiwiZmxhdFRocmVzaG9sZE1vZGlmaWVyIiwiaGlkZURpY2VSZXN1bHQiLCJJbnRlcmFjdGl2ZUNoYXRDYXJkIiwiX29wdGlvbnMiLCJjc3NDbGFzc2VzIiwib3B0aW9ubmFsQ2hhdERhdGEiLCJjYXJkQ2xhc3MiLCJfb25CdXR0b24iLCJfb25LZXkiLCJiaW5kTGlzdGVuZXJzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImNhcmRzIiwidHlwZWRDYXJkIiwiYXNzaWduT2JqZWN0IiwiX3VwZGF0ZSIsImZvcm1zIiwiZm9ybSIsIkZvcm1EYXRhRXh0ZW5kZWQiLCJkaWZmT2JqZWN0IiwiaXNUYXJnZXRPd25lciIsImlzT3duZXIiLCJEYW1hZ2VDYXJkIiwiZGFtYWdlUm9sbCIsIl9pbXBhbGUiLCJpc0RhbWFnZUZvcm11bGEiLCJkYW1hZ2VGb3JtdWxhIiwidmFsaWRhdGUiLCJpc0RhbWFnZU51bWJlciIsImlzQXJtb3JGb3J1bGEiLCJ0b3RhbERhbWFnZVN0cmluZyIsImlnbm9yZUFybW9yIiwibm9EYW1hZ2UiLCJyb2xsRGFtYWdlIiwiaGFyZHJvbGxlZCIsImRhbWFnZUluZmxpY3RlZCIsImRlYWxEYW1hZ2UiLCJfaHRtbElubGluZVJvbGwiLCJyb2xsQXJtb3IiLCJkZWFsRGFtYWdlVG9TZWxlY3RlZFRhcmdldCIsInNlbGVjdGVkUGxheWVycyIsIm9uZSIsImNvbmZpcm1EYW1hZ2UiLCJ0d28iLCJpbmNsdWVzIiwidHJpbSIsImhhbGZEQiIsIm1heERhbWFnZSIsInJvbGxTdHJpbmciLCJfYXJtb3IiLCJPcHBvc2VkQ2hlY2tDYXJkIiwiYXR0YWNrZXJSb2xsIiwiYXR0YWNrZXIiLCJkZWZlbmRlclJvbGwiLCJkZWZlbmRlciIsImRvZGdlU2tpbGwiLCJfYWEiLCJfYWQiLCJ3aW5uZXJDb3VudCIsImlzQXR0YWNrTWFuZXV2ZXIiLCJkYW1hZ2VDaGF0Q2FyZCIsImlzRXh0cmVtZVN1Y2Nlc3MiLCJ0aWUiLCJyZXNvbHZlZCIsIndpbkNvdW50IiwiU2FuRGF0YURpYWxvZyIsIl90b2dnbGVJbnB1dCIsIlZhbGlkYXRlIiwiUk9MTF9UWVBFX0FUVFJJQlVURSIsIlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyIsIlJPTExfVFlQRV9DT01CQVQiLCJST0xMX1RZUEVfU0tJTEwiLCJST0xMX1RZUEVfRU5DT1VOVEVSIiwiQ0FSRF9UWVBFX0NPTUJJTkVEIiwiQ0FSRF9UWVBFX0dST1VQIiwiQ0FSRF9UWVBFX05PUk1BTCIsIkNBUkRfVFlQRV9PUFBPU0VEIiwiQ0FSRF9UWVBFX1NBTl9DSEVDSyIsIkNBUkRfVFlQRV9OT05FIiwic2VsZWN0Iiwibm9ybWFsaXplUmVxdWVzdCIsInNraWxsSWRzIiwiZ2V0U2tpbGxzQnlOYW1lIiwiYWx0S2V5IiwiY3JlYXRlRW5jb3VudGVyIiwib3BlbkxpbmtUb29sIiwic2VuZFRvQ2hhdCIsInNlbmRUb0NsaXBib2FyZCIsInByZXZlbnRTdGFuZGJ5IiwiZGlhbG9nT3B0aW9ucyIsImF0dHJpYiIsIndlYXBvbkFsdFNraWxsIiwid2VhcG9uTmFtZSIsImhhc1BsYXllck93bmVyIiwidHJpZ2dlciIsImNyZWF0ZUxpbmsiLCJpdGVtTW9kaWZpZXJzIiwiZm91bmRyeUlEIiwiY3JlYXRlUm9sbCIsInJ1blJvbGwiLCJjaGVja1Bhc3NlZCIsImNoZWNrRmFpbGxlZCIsImluZm9zIiwidXNhZ2UiLCJwcm9tcHRMYWJlbCIsInN0YW5kYnkiLCJfZ2V0SXRlbUZyb21JZCIsInJvbGxBdHRyaWJ1dGUiLCJyb2xsQ2hhcmFjdGVyaXN0aWMiLCJyb2xsZWRTdWNjZXNzTGV2ZWwiLCJyZWd1bGFyVGhyZXNob2xkIiwiaGFyZFRocmVzaG9sZCIsImV4dHJlbWVUaHJlc2hvbGQiLCJDb0M3Q29uQ2hlY2siLCJfYWN0b3JJZCIsImlzUm9sbGVkIiwiY29uQ2hlY2siLCJodG1sQ2hlY2siLCJnZXRDaGVja0VsZW1lbnQiLCJyb2xsQ29uIiwicmVwbGFjZVdpdGgiLCJzdGF5QWxpdmUiLCJhcHBsaWVkIiwiU2tpbGxTZWxlY3REaWFsb2ciLCJfb25TZWxlY3RTa2lsbENsaWNrZWQiLCJzdHlsZSIsImRpc3BsYXkiLCJhZGRlZCIsIm9wdGlvbnNDb3VudCIsIlBvaW50U2VsZWN0RGlhbG9nIiwiX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMiLCJfb25CdXR0b25DbGlja2VkIiwiaXRlbUxpc3QiLCJvcHRpb25hbCIsInRvZ2dsZUNsYXNzIiwiQ2hhcmFjU2VsZWN0RGlhbG9nIiwiQ2hhcmFjUm9sbERpYWxvZyIsIl9vbkNoYW5nZUlucHV0IiwiX29uUm9sbENoYXJhY3RlcmlzdGljIiwiX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyIsIl9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJfb25SZXNldENoYXJhY3RlcmlzdGljIiwiY2hhcmFjS2V5IiwiaW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyIsImRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJyZXNldENoYXJhY3RlcmlzdGljIiwiY2hhciIsImNoZWNrVG90YWwiLCJfZWxlbWVudCIsImlucHV0IiwibGlzdCIsInBvaW50cyIsInZhbGlkYXRpb24iLCJlbmFibGVkIiwidmFsIiwicG9pbnRzV2FybmluZyIsIlNraWxsU3BlY1NlbGVjdERpYWxvZyIsInNwZWNpYWxpemF0aW9uTmFtZSIsImJhc2VWYWx1ZSIsImhhc1NraWxscyIsIlNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2ciLCJfb25DbGlja1N1Ym1pdCIsIl9vblNlbGVjdENoYW5nZSIsImFsbG93Q3VzdG9tIiwiZml4ZWRCYXNlVmFsdWUiLCJhbGxvd1NlbGVjdCIsIlNraWxsVmFsdWVEaWFsb2ciLCJDb0M3TWVsZWVSZXNvbHRpb24iLCJpbml0aWF0b3JNZXNzYWdlIiwidGFyZ2V0TWVzc2FnZSIsInByZUNyZWF0ZU1lc3NhZ2UiLCJDb0M3TWVsZWVUYXJnZXQiLCJDb0M3TWVsZWVJbml0aWF0b3IiLCJpbml0aWF0b3JUb2tlbiIsInJlc3VsdFN0cmluZyIsIndpbm5lckltZyIsIndpbm5lclRpdGxlIiwiY3JpdGljYWxEYW1hZ2UiLCJkb2N1bW1lbnQiLCJwYXJlbnRNZXNzYWdlSWQiLCJpbml0aWF0b3JLZXkiLCJvdXRudW1iZXJlZCIsInN1cnByaXNlZCIsImF1dG9TdWNjZXNzIiwiZG9kZ2luZyIsIm5vdFJlc3BvbmRpbmciLCJmaWdodGluZ0JhY2siLCJtYW5ldXZlcmluZyIsImFjdGlvblNlbGVjdGVkIiwiX2luaXRpYXRvcktleSIsIl9pbml0aWF0b3IiLCJtZWxlZUluaXRpYXRvciIsInVwZGF0ZUNhcmRTd2l0Y2giLCJwdWJsaXNoVXBkYXRlIiwiY2FtZWxGbGFnIiwiY3JlYXRlQ2hhdENhcmQiLCJnbXMiLCJwcm9tcHQiLCJnZXRVcGRhdGVkQ2hhdENhcmQiLCJ1cGRhdGVTZWxlY3RlZCIsIndlYXBvbklkIiwicGVyZm9ybVNraWxsQ2hlY2siLCJwdWJsaXNoIiwiaXNVbmtvbnduIiwicHVibGlzaE5vUmVwb25zZVJlc3VsdCIsInJlc29sdXRpb25DYXJkIiwicmVzb2x1dGlvbk1lc3NhZ2UiLCJwdWJsaXNoQ2hlY2tSZXN1bHQiLCJyb2xsSWNvbnMiLCJyb2xsQ29sb3IiLCJyb2xsVGl0bGUiLCJ1cGdyYWRlUm9sbCIsIm5ld1N1Y2Nlc3NMZXZlbCIsIm9sZENhcmQiLCJsdWNrU3BlbnQiLCJwcm9jZXNzZWQiLCJkaWNlUm9sbHMiLCJyZXN1bERldGFpbHMiLCJkaWNlVG90YWwiLCJDb0M3Q2hhdCIsIkNvQzdSYW5nZUluaXRpYXRvciIsImNvdmVyIiwidGFyZ2V0Q2FyZCIsImZ1bGxBdXRvIiwiYWltZWQiLCJib251c0RpZUEiLCJib251c0RpZUIiLCJwZW5hbHR5RGllQSIsInBlbmFsdHlEaWVCIiwidG90YWxCdWxsZXRzRmlyZWQiLCJfdGFyZ2V0cyIsIkNvQzdSYW5nZVRhcmdldCIsInJvdW5kZWREaXN0YW5jZSIsInJvdW5kIiwiZGlzdGFuY2VVbml0IiwiZGlzdEluWWQiLCJwb2ludEJsYW5rUmFuZ2UiLCJvdXRPZlJhbmdlIiwibWFpbldlYXBvblNraWxsIiwiYXV0b1dlYXBvblNraWxsIiwiYXV0b0ZpcmUiLCJtdWx0aVRhcmdldCIsImFpbWluZyIsIl9haW1pbmciLCJnZXRBY3RvckZsYWciLCJhY3RpdmVUYXJnZXQiLCJzaG90cyIsIl9zaG90cyIsImN1cnJlbnRTaG90UmFuayIsImFjdGl2ZVRhcmdldFNob3REaWZmaWN1bHR5Iiwic2hvdERpZmZpY3VsdHkiLCJkaWRBbnlTaG90SGl0IiwiYW55SGl0Iiwic3VjY2Vzc2Z1bEhpdHMiLCJoaXRzIiwiaGl0Iiwic2hvdCIsInNob3RGaXJlZCIsInRvdGFsQW1tbyIsIm1heFNob3RzIiwiaWdub3JlQW1tbyIsImlnbm9yZVVzZXNQZXJSb3VuZCIsIm91dE9mQW1tbyIsIm91dE9mU2hvdHMiLCJ2b2xsZXlTaXplIiwiX3ZvbGxleVNpemUiLCJpc1ZvbGxleU1pblNpemUiLCJpc1ZvbGxleU1heFNpemUiLCJnZXRUYXJnZXRGcm9tS2V5IiwiY2FsY1RhcmdldHNEaWZmaWN1bHR5IiwiY2FsY3VsYXRlZEJvbnVzRGljZSIsIl9jYWxjdWxhdGVkTW9kaWZpZXIiLCJjYWxjdWxhdGVkUGVuYWx0eURpY2UiLCJkaWZmaWN1bHR5TmFtZSIsImltcG9zc2libGUiLCJsZXZlbCIsImFkZFNob3RBdEN1cnJlbnRUYXJnZXQiLCJhY3Rvck5hbWUiLCJidWxsZXRzU2hvdCIsInRyYW5zaXRCdWxsZXRzIiwiYnVsbGV0c1Nob3RUcmFuc2l0IiwidHJhbnNpdCIsImJ1bGxldExlZnQiLCJwcmV2aW91c1Nob3QiLCJsb2ciLCJyZXNvbHZlQ2FyZCIsIndlYXBvbk1hbGZ1bmN0aW9uIiwic2hvb3RBdFRhcmdldCIsImhhc01hbGZ1bmN0aW9uIiwiYnVsbGV0RmlyZWQiLCJkZXRhaWxzIiwiY2hhbmdlVm9sbGV5U2l6ZSIsInBhc3NSb2xsIiwicm9sbEluZGV4IiwidXBncmFkZWluZGV4IiwiaW5jcmVhc2VkU3VjY2VzcyIsInJhbmdlSW5pdGlhdG9yIiwiY2FyZFRhcmdldHMiLCJjYXJkU2hvdHMiLCJkYW1hZ2VSb2xscyIsImRyIiwiaCIsImRhbWFnZVdpdGhvdXREQiIsImRhbWFnZURpZSIsImNyaXRpY2FsRGFtYWdlRm9ybXVsYSIsImNyaXRpY2FsRGFtYWdlRGllIiwiaW1wYWxpbmdTaG90cyIsInN1Y2Nlc3NmdWxTaG90cyIsImRlYWx0IiwiZGFtYWdlUm9sbGVkIiwiZEluZGV4IiwidG90YWxUYWtlbiIsInRvdGFsQWJzb3JiZWQiLCJySW5kZXgiLCJkZWFsdEFtb3VudCIsInRha2VuIiwiYWJzb3JiZWQiLCJkYW1hZ2VEZWFsdCIsImluTWVsZWUiLCJiaWciLCJfYmlnIiwiYnVpbGQiLCJzbWFsbCIsIl9zbWFsbCIsImlzRmFzdCIsIm1vdiIsImZhc3QiLCJfZmFzdCIsIl9hY3RvciIsIl90b2tlbiIsInNpemVUZXh0Iiwic2l6ZUxhYmVsIiwiY2hhbmdlRGlzcGxheWVkVGFyZ2V0IiwiQ0hBVF9DT0M3X01FU1NBR0UiLCJyZW5kZXJDaGF0TWVzc2FnZUhvb2siLCJmYWtlUm9sbE1lc3NhZ2UiLCJwbGF5ZXJzIiwiR01TZWxmUm9sbCIsInJlbW92ZVdpc3BlclRhcmdldHMiLCJmYWtlUm9sbCIsImNoYXRMaXN0ZW5lcnMiLCJfb25DaGF0Q2FyZEFjdGlvbiIsIl9vbkNoYXRDYXJkUmFuZ2UiLCJfb25DaGF0Q2FyZFRvZ2dsZUNvbnRlbnQiLCJfb25DaGF0Q2FyZFJhZGlvU3dpdGNoIiwiX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2giLCJfb25DaGF0Q2FyZFZvbGxleVNpemUiLCJfb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZCIsIl9vblRvZ2dsZVNlbGVjdGVkIiwiX29uVGFyZ2V0U2VsZWN0IiwiX29uT3BlbkFjdG9yIiwiX29uSW5saW5lIiwib25VcGRhdGVDaGF0TWVzc2FnZSIsInNjcm9sbEJvdHRvbSIsImNoZWNrUmV2ZWFsZWQiLCJyZXZlYWxDaGVjayIsInJlbmRlck1lc3NhZ2VIb29rIiwicmVtb3ZlQ2xhc3MiLCJtb3VzZWxlYXZlIiwiZGVmZW5kYW50SWQiLCJpbml0aWF0b3JJZCIsInVwZGF0ZUNvbWJhdENhcmRUYXJnZXQiLCJ1c2VyT25seSIsImdldEF0dHJpYnV0ZSIsImdtT25seSIsInpvbmUiLCJ1c2VyVmlzaWJsZU9ubHkiLCJlbGVtIiwiZ21WaXNpYmxlT25seSIsImlzVHJ1c3RlZCIsIm93bmVyVmlzaWJsZU9ubHkiLCJfZ2V0QWN0b3JGcm9tS2V5Iiwib3duZXJPbmx5IiwiZ21TZWxlY3RPbmx5IiwiZ21SYW5nZU9ubHkiLCJhY3Rpb25UeXBlU3RyaW5nIiwidGFyZ2V0c1NlbGVjdG9yIiwiYm9yZGVyIiwidGFyZ2V0VG9EaXNwbGF5IiwiZHJvcERvd25Cb3hlcyIsImRwZG5Cb3giLCJzZWxlY3RlZEJveCIsImFjdGlvblR5cGUiLCJkZWZlbmRlckNob2ljZSIsInNraWxsVmFsdWUiLCJpdGVtTmFtZSIsIl9jb2xsYXBzZUlubGluZVJlc3VsdCIsIl9leHBhbmRJbmxpbmVSZXN1bHQiLCJvcHRpb25MaXN0IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInByb3BlcnR5IiwicmFuZ2VDYXJkIiwiaXNDYXJkT3duZXIiLCJvd25uZXIiLCJnZXRBY3RvckZyb21Ub2tlbiIsImdldFRva2VuIiwibWVzc0lkIiwibWVzc2FnZUNhcmQiLCJmb2N1cyIsIm9yaWdpbk1lc3NhZ2UiLCJtZWxlZUNhcmQiLCJyb2xsUmVzdWx0IiwidXBncmFkZUluZGV4IiwiZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlciIsIm5ld0NhcmQiLCJjbG9uZU5vZGUiLCJwdXNoZWRSb2xsIiwiZGVmZW5kZXJLZXkiLCJyZXNwb25zZVR5cGUiLCJkZWFsZXIiLCJhbW91bnQiLCJhcHBlbmQiLCJmb3JjZUZhaWwiLCJpbmNyZWFzZVN1Y2Nlc3NMZXZlbCIsImRlY3JlYXNlU3VjY2Vzc0xldmVsIiwiY29tcHV0ZUNoZWNrIiwibWFrZVB1YmxpYyIsImZvcmNlUm9sbCIsIkNvQzdzb2NrZXQiLCJleGVjdXRlQXNHTSIsIl9pZCIsInJvbGxEYW1hZ2VCdXR0b24iLCJBY3RvciIsImluaXRpYWxpemUiLCJjcmVhdHVyZUluaXQiLCJwcmVwYXJlQmFzZURhdGEiLCJpdGVtSWRlbnRpZmllciIsImNvY2lkRmxhZyIsImRhaWx5TGltaXQiLCJvbmVGaWZ0aFNhbml0eSIsInJhd01vdiIsInJhd0RiIiwicmF3QnVpbGQiLCJjdXJyZW50IiwiaHAiLCJwcmVwYXJlRW1iZWRkZWREb2N1bWVudHMiLCJwcmVwYXJlRGVyaXZlZERhdGEiLCJyYXdIcE1heCIsIm1wIiwicmF3TXBNYXgiLCJyYXdTYW5NYXgiLCJmaWx0ZXJNYXRyaXgiLCJwcmlvcml0eSIsInNlbGVjdENoYW5nZXMiLCJocE1heCIsIm1wTWF4IiwiZGVmYXVsdEltZyIsImFjdG9yTGluayIsImRpc3Bvc2l0aW9uIiwic2lnaHQiLCJjaGVja1VuZGVmaW5lZEF1dG8iLCJyZXR1cm5EYXRhIiwiaW5pdFRva2VuIiwiY3JlYXRlRGF0YSIsImhhc0NvbmRpdGlvblN0YXR1cyIsImdldFRlbXBvSW5zYW5lRHVyYXRpb25UZXh0IiwiaGFzQ29uZGl0aW9uVmFsdWUiLCJyZWFsVGltZSIsImJvdXRPZk1hZG5lc3NUYWJsZUlkIiwiYm91dE9mTWFkbmVzc1RhYmxlIiwidGFibGVzIiwidGFibGVSb2xsIiwiVEFCTEVfUkVTVUxUX1RZUEVTIiwiRE9DVU1FTlQiLCJkb2N1bWVudElkIiwiaXRlbURhdGEiLCJ0b09iamVjdCIsIlRFWFQiLCJ0ZXh0IiwiZW1wdHlTa2lsbCIsImNyZWF0ZVNraWxsIiwic2hvd1NoZWV0IiwicmVuZGVyU2hlZXQiLCJjcmVhdGVXZWFwb25Ta2lsbCIsInNraWxsRGF0YSIsInBlcnNvbmFsIiwib2NjdXBhdGlvbiIsImFyY2hldHlwZSIsImF0dGFjayIsIndwblR5cGUiLCJjcmVhdGVkQXR0YWNrIiwic2V0QWN0b3JGbGFnIiwiY3JlYXRlSXRlbSIsInF1YW50aXR5IiwiY3JlYXRlRW1wdHlCb29rIiwiZ2V0SXRlbUlkQnlOYW1lIiwiY3JlYXRlQm9vayIsImNyZWF0ZUVtcHR5U3BlbGwiLCJjcmVhdGVTcGVsbCIsImVtcHR5U3BlbGwiLCJjcmVhdGVFbXB0eVNraWxsIiwiY3JlYXRlRW1wdHlJdGVtIiwiY3JlYXRlRW1wdHlXZWFwb24iLCJjcmVhdGVCaW9TZWN0aW9uIiwiYmlvIiwiYmlvZ3JhcGh5IiwidXBkYXRlQmlvVmFsdWUiLCJ1cGRhdGVCaW9UaXRsZSIsImRlbGV0ZUJpb1NlY3Rpb24iLCJtb3ZlQmlvU2VjdGlvblVwIiwibW92ZUJpb1NlY3Rpb25Eb3duIiwidXBkYXRlVGV4dEFyZWEiLCJ0ZXh0QXJlYSIsImFyZWFOYW1lIiwiZW1iZWRkZWROYW1lIiwiZGF0YUFycmF5IiwicHJvY2Vzc2VkRGF0YUFycmF5IiwiYmFzZUNhbGN1bGF0ZWQiLCJhZGRUaGlzIiwiaXNBbnlCdXROb3RGbGFnZ2VkIiwiZ3Vlc3NHcm91cEZyb21Eb2N1bWVudCIsImZyb21Db0NJRFJlZ2V4QmVzdCIsImNvY2lkUmVnRXhwIiwiZXhpc3RpbmdTa2lsbHMiLCJlbCIsInRvTG9jYWxlTG93ZXJDYXNlIiwiZmluZEluZGV4IiwiZXhpc3RpbmdJdGVtIiwidXBkYXRlRW1iZWRkZWREb2N1bWVudHMiLCJleGlzdGluZyIsImtlZXBCYXNlIiwibWFpblNraWxsIiwiYXZhaWxhYmxlU2tpbGxzIiwiZnJvbUNvQ0lEQmVzdCIsInNob3dMb2FkaW5nIiwiYWRkSXRlbXMiLCJzZWNvbmRTa2lsbCIsImVuYWJsZUNoYXJhY3RlcmlzaXRpY3MiLCJnZXRDaGFyYWN0ZXJpc3RpYyIsImx1Y2siLCJlcmEiLCJleHBhbmRJdGVtQXJyYXkiLCJpdCIsIm90aGVyc0l0ZW1zIiwiYWRkVW5pcXVlSXRlbXMiLCJiYWNrc3RvcnkiLCJzZWN0aW9uTmFtZSIsImJpb1NlY3Rpb25zIiwibW9uZXRhcnkiLCJfc3RhdGUiLCJBcHBsaWNhdGlvbiIsIlJFTkRFUl9TVEFURVMiLCJSRU5ERVJJTkciLCJIb29rcyIsInJlc2V0QXJjaGV0eXBlIiwiY29uZmlybSIsInllcyIsImRlZmF1bHRZZXMiLCJjb3JlQ2hhcmFjIiwiZW50cnkiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzIiwiY2hhcmFjIiwiY2hhckRpYWxvZ0RhdGEiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYSIsInJlc2V0T2NjdXBhdGlvbiIsImNyZWRpdFJhdGluZyIsImFjdG9yQ3JlZGl0UmF0aW5nIiwiZmluZENvY0lkSW5MaXN0IiwicG9pbnRzRGlhbG9nRGF0YSIsIm9jY3VwYXRpb25Ta2lsbFBvaW50cyIsIm9wdGlvbmFsQ2hhciIsImRpYWxvZ0RhdGEiLCJza2lsbENvdW50IiwibWVyZ2VkIiwiY3JlZGl0UmF0aW5nU2tpbGwiLCJhcmNoZXR5cGVQb2ludHMiLCJvY2N1cGF0aW9uUG9pbnRzIiwicGVyc29uYWxQb2ludHMiLCJnZXRJdGVtc0J5TmFtZSIsImdldEZpcnN0SXRlbUJ5Q29DSUQiLCJjaGFyYWN0ZXJpc3RpY0xpc3QiLCJ0ZW1wbGF0ZXMiLCJjaGFyTmFtZSIsImF0dHJpYk5hbWUiLCJsY2siLCJlcmFzZU9sZCIsIm9jY3VwYXRpb25Ta2lsbCIsImFyY2hldHlwZVNraWxsIiwic2V0THVjayIsImhwRnJvbUNoYXJhY3RlcmlzdGljcyIsIl9zZXRIcCIsImFkZFVuaXF1ZUl0ZW0iLCJtcEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJnZXRSZWFzb25TYW5Mb3NzIiwic2FuaXR5TG9zc0V2ZW50cyIsInRvdGFsTG9zcyIsImltbXVuaXR5IiwibGVmdCIsInJpZ2h0IiwibG9jYWxlQ29tcGFyZSIsInNhbk1heEZvcm11bGEiLCJzYW5pdHlMb3NzRXZlbnQiLCJzZXRTYW4iLCJzYW5Mb3NzQ2hlY2tQYXNzZWQiLCJzYW5Mb3NzQ2hlY2tGYWlsbGVkIiwic2FuTG9zc01heCIsInNhbkxvc3NNaW4iLCJkYWlseUxvc3MiLCJjdGh1bGh1TXl0aG9zIiwic2V0TXAiLCJvY2N1cGF0aW9uUG9pbnRzU3BlbnQiLCJyZXNldE9jY3VwYXRpb25Qb2ludHMiLCJyZXNldEFyY2hldHlwZVBvaW50cyIsInJlc2V0UGVyc29uYWxQb2ludHMiLCJhcmNoZXR5cGVQb2ludHNTcGVudCIsImJvbnVzUG9pbnRzIiwiZXhwZXJpZW5jZVBvaW50cyIsInBlcnNvbmFsUG9pbnRzU3BlbnQiLCJoYXNEZXZlbG9wbWVudFBoYXNlIiwiZGV2ZWxvcGVtZW50Iiwib25seVJ1bk9uY2VQZXJTZXNzaW9uIiwibG9zcyIsInNldEF0dHJpYkF1dG8iLCJ1cGRhdGVkS2V5IiwidG9nZ2xlQXR0cmliQXV0byIsImRiRnJvbUNoYXJhY3RlcmlzdGljcyIsInN1bSIsImJ1aWxkRnJvbUNoYXJhY3RlcmlzdGljcyIsImRpdmlzb3IiLCJtb3ZGcm9tQ2hhcmFjdGVyaXN0aWNzIiwiYWdlIiwiTU9WIiwiZ2V0SXRlbXNGcm9tTmFtZSIsInRvZ2dsZUFjdG9yRmxhZyIsImF0dHJpYnV0ZU5hbWUiLCJtaXNzaW5nIiwiY2hhcmFjdGVyaXN0aWNOYW1lIiwidG9vbFRpcFNraWxsVGV4dCIsIkNvQzdUb29sdGlwcyIsIlRvb2xUaXBIb3ZlciIsImFjdG9yQXBwSWQiLCJhcHBpZCIsIndpbmRvd3MiLCJ0b29sVGlwIiwibmV3SXRlbXMiLCJteUl0ZW1zIiwibmV3SXRlbSIsInBhY2tzIiwibWV0YWRhdGEiLCJnZXREb2N1bWVudHMiLCJza2lsbElkZW50aWZpZXIiLCJlbnRpdHkiLCJnZXREb2N1bWVudCIsIl9yYXdWYWx1ZSIsInVwZGF0ZVZhbHVlIiwid2VhcG9uRGF0YSIsIndlYXBvbnMiLCJ0b0pTT04iLCJyb2xsSW5pdGlhdGl2ZSIsImhhc0d1biIsImRlbnlMdWNrIiwiZGVueUJsaW5kVGFtcGVyaW5nIiwidW5zZXRBY3RvckZsYWciLCJmcm9tVXVpZFN5bmMiLCJleGVjIiwiY2hhcktleSIsImF0dHJpYktleSIsImF0dHIiLCJwaWxvdFNraWxscyIsImRyaXZlU2tpbGxzIiwidG9rZW5VdWlkIiwiaGFzUm9sbGFibGVDaGFyYWN0ZXJpc3RpY3MiLCJob3NSb2xsYWJsZVNraWxscyIsInJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsInJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlIiwiYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlIiwiYXZlcmFnZSIsImNoYXJWYWx1ZSIsInNldENoYXJhY3RlcmlzdGljIiwiZGV2ZWxvcGVtZW50UGhhc2UiLCJza2lsbHNSb2xsZWQiLCJEaWUiLCJhdWdtZW50Iiwic2tpbGxNYXN0ZXJpbmdNZXNzYWdlIiwiYXVnbWVudERpZSIsImF1Z21lbnRTQU5EaWUiLCJzYW5HYWluZWQiLCJzYW5HYWluZWRNZXNzYWdlIiwiZGVidWciLCJzY29yZSIsImluY3JlYXNlRXhwZXJpZW5jZSIsImNoYW5nZWQiLCJkZXZlbG9wTHVjayIsImN1cnJlbnRMdWNrIiwicHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrIiwiaGlnaGVyVGhhbkN1cnJlbnRMdWNrIiwiYXVnbWVudFJvbGwiLCJhdWdtZW50VmFsdWUiLCJkZXZlbG9wU2tpbGwiLCJjb25kaXRpb25WYWx1ZSIsImNvbmRpdGlvbnMiLCJmaWVsZCIsInRvZ2dsZUNvbmRpdGlvbiIsImZvcmNlVmFsdWUiLCJjdXN0b20iLCJvdmVybGF5Iiwic3RhdHVzRWZmZWN0cyIsInNvdXJjZSIsImVmZmVjdERhdGEiLCJmaWVsZHMiLCJqdXN0VGhpcyIsImRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzIiwicmVzZXRDb3VudGVyIiwiY291bnRlciIsInJlc2V0RGFpbHlTYW5pdHkiLCJmaWdodGluZ1NraWxscyIsImNsb3NlQ29tYmF0V2VhcG9ucyIsIndlYXBvbkxpc3QiLCJmaXJlYXJtU2tpbGxzIiwiQ00iLCJteXRob3NIYXJkZW5lZCIsInNldE15dGhvc0hhcmRlbmVkIiwiQ1IiLCJtb25ldGFyeUZvcm1hdCIsInN5bWJvbCIsIm1vbmV0YXJ5Rm9ybWF0S2V5cyIsInRvTG9jYWxlU3RyaW5nIiwibWluaW11bUZyYWN0aW9uRGlnaXRzIiwibW9uZXRhcnlWYWx1ZSIsInJvdyIsIm1vbmV0YXJ5VHlwZUtleXMiLCJzcGVuZGluZ0xldmVsIiwiY2FzaCIsImFzc2V0cyIsInRlc3RVc2VyUGVybWlzc2lvbiIsInBsYXllciIsImNoYXJhY3RlclVzZXIiLCJjb250ZW50cyIsInNldEhwIiwiaGVhbHRoQmVmb3JlIiwiZGFtYWdlVGFrZW4iLCJhcm1vckRhdGEiLCJncm9zc0RhbWFnZSIsImFybW9yVmFsdWUiLCJpc0Zvcm11bGEiLCJuZXREYW1hZ2UiLCJjZWlsIiwiaGFzTWFqb3JXb3VuZCIsIm1ham9yV291bmQiLCJpc1Vua25vd24iLCJfdXVpZCIsInJhbmRvbUlEIiwiaGFzQ2FyZCIsInJhd1ZhbHVlU3RyaW5nIiwiY3JpdGljYWxUaHJlc2hvbGQiLCJmdW1ibGVUaHJlc2hvbGQiLCJzdWNjZXNUaHJlc2hvbGQiLCJfbW9kaWZpZWRSZXN1bHQiLCJtb2RpZmllZCIsImZsYXREaWNlTW9kaWZpZXJTdHJpbmciLCJpc1NpbXBsZVJvbGwiLCJoYXNQZW5hbHR5IiwiaGFzTW9kaWZpZXIiLCJfZGljZU1vZGlmaWVyIiwiX2RpZmZpY3VsdHkiLCJvbGRDaGVjayIsIm8iLCJjb2M3UmVzdWx0Iiwic3VjY2Vzc0xldmVsSWNvbnMiLCJ1bmtub3duRGlmZmljdWx0eSIsImljb25zIiwic3VjY2Vzc0hpbnQiLCJjc3NDbGFzcyIsImhpbnQiLCJmYWlsdXJlSGludCIsImdtRGlmZmljdWx0eUNyaXRpY2FsIiwiZ21EaWZmaWN1bHR5RXh0cmVtZSIsImdtRGlmZmljdWx0eUhhcmQiLCJnbURpZmZpY3VsdHlSZWd1bGFyIiwiX3NraWxsIiwiX2l0ZW0iLCJpc0R1bW15IiwiZGlzcGxheVJlc3VsdFR5cGUiLCJkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwiLCJkaXNwbGF5Qm90aFN1Y2Nlc3NMZXZlbCIsImRvbnREaXNwbGF5U3VjY2Vzc0xldmVsIiwiaW1hZ2UiLCJnZXRMaW5rRWxlbWVudCIsImNyZWF0ZUZyb21BY3RvclJvbGxEYXRhIiwidGhyZXNob2xkIiwicm9sbFZhbHVlIiwidGVuUmVzdWx0IiwiZmlyc3RWYWx1ZSIsInNwZW5kaW5nQW1vdW50IiwidG90YWxMdWNrU3BlbnQiLCJtYXhJbmRleCIsInNoaWZ0IiwidGVuT25seU9uZURpZSIsImlzVmFsdWUiLCJpc0NoYXJhY3RpcmlzdGljIiwiaXNTa2lsbCIsImlzSXRlbSIsImlzQXR0cmlidXRlIiwic3VjY2Vzc1JlcXVpcmVkIiwibWFsZnVuY3Rpb25UeHQiLCJoYXNFbm91Z2hMdWNrIiwibmV4dExldmVsIiwiY2FuSW5jcmVhc2VTdWNjZXNzIiwiZGlmZmljdWx0eVNldCIsInB1c2hlZCIsImNhbkF3YXJkRXhwZXJpZW5jZSIsImZvcmNlZCIsIkpTT05Sb2xsU3RyaW5nIiwiY3NzQ2xhc3NMaXN0IiwicGxheWVyQ3NzQ2xhc3MiLCJmb3JjZWRTdWNjZXNzIiwiZm9yY2VkRmFpbHVyZSIsInJlbW92ZVVwZ3JhZGVzIiwiZm9yY2VTdWNjZXNzTGV2ZWwiLCJfZm9yY2VDaGVjayIsImhpZ2giLCJsb3ciLCJyYW5kb20iLCJ1bml0VG90YWwiLCJ0ZW5Ub3RhbCIsImhhc0Vub3VnaCIsInRlbiIsImZsYWdnZWRGb3JEZXZlbG9wbWVudCIsIl9mbGF2b3IiLCJfY29udGV4dCIsInBhcmVudFV1aWQiLCJyYXd2YWx1ZSIsInRvb2x0aXBIZWFkZXIiLCJnZXRIdG1sUm9sbEVsZW1lbnQiLCJvcmlnaW5hbFNwZWFrZXIiLCJuZXdDb250ZW50IiwiaHRtbE1lc3NhZ2UiLCJyb2xsUmVzdWx0RWxlbWVudCIsIk9USEVSIiwidG9vbHRpcCIsInJvbGxUb29sVGlwIiwiZmFjZSIsImZyb21Sb2xsU3RyaW5nIiwiY29tbWFuZCIsIl9vbkNsaWNrSW5saW5lUm9sbCIsInRpcCIsImFwcGVuZENoaWxkIiwicGEiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwdCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ0b3AiLCJ5IiwiaW5uZXJIZWlnaHQiLCJ6aSIsImdldENvbXB1dGVkU3R5bGUiLCJ6SW5kZXgiLCJpc051bWVyaWMiLCJQYXJzZUNoYXRFbnRyeSIsIl9FeGVjQ29tbWFuZCIsImVzY2FwZWQiLCJhc2siLCJ0aHJlc2hvbGRTdHIiLCJkaWZmaWN1bHR5U3RyIiwiYXNrVmFsdWUiLCJ0ZXN0IiwiZ2V0QWN0b3JGcm9tU3RyaW5nIiwiYWN0b3JTdHJpbmciLCJza2lsbENoZWNrTWFjcm8iLCJ3ZWFwb25DaGVja01hY3JvIiwiYmFzZUFjdG9yIiwiZ2V0RG9jdW1lbnRDbGFzcyIsImNoZWNrTWFjcm8iLCJyb2xsRGljZSIsImNyZWF0ZU1hY3JvIiwiYmFyIiwic2xvdCIsIm1hY3JvIiwibWFjcm9zIiwiYXNzaWduSG90YmFyTWFjcm8iLCJNYWNybyIsInRvZ2dsZURldlBoYXNlIiwidXBkYXRlQ2hhclNoZWV0cyIsInRvZ2dsZUNoYXJDcmVhdGlvbiIsImdldFRhcmdldCIsImNoZWNrT3B0aW9ucyIsInBsYXllclRva2VuSWRzIiwic2VsZWN0ZWRQbGF5ZXJJZHMiLCJjaGVja2VkIiwic3RhcnRSZXN0IiwiY2hhdENvbnRlbnQiLCJxdWlja0hlYWxlciIsImlzQ3JpdGljYWxXb3VuZHMiLCJkYWlseVNhbml0eUxvc3MiLCJocFZhbHVlIiwibXBWYWx1ZSIsImhlYWxBbW91bnQiLCJob3VycyIsIm1hZ2ljQW1vdW50IiwidG9nZ2xlWFBHYWluIiwidGsiLCJyZW5kZXJlZCIsImVudGl0eVR5cGUiLCJmb2xkZXIiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJpc1NlY3VyZUNvbnRleHQiLCJ3cml0ZVRleHQiLCJwb3NpdGlvbiIsInJlamVjdCIsImV4ZWNDb21tYW5kIiwiY2F0Y2giLCJsZW4iLCJxU3RyaW5nIiwiY2hhckF0IiwiY2hhckNvZGVBdCIsImoiLCJzZXRCeVBhdGgiLCJwYXRoIiwiZ2V0QnlQYXRoIiwiZG9jIiwiZG9jTmFtZSIsImRvY0lkIiwiaW5zdGFuY2UiLCJlbWJlZGRlZElkIiwiaWRlbnRpZmllcnMiLCJnZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhIiwiZHJvcERhdGEiLCJkb2NVdWlkIiwiZ2V0RG9jdW1lbnRGcm9tS2V5IiwiY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzIiwiZm9sZGVyTmFtZSIsImltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciIsImZvbGRlcnMiLCJGb2xkZXIiLCJndWVzc0l0ZW0iLCJvTSIsInBhY2thZ2UiLCJmYWxsYmFja0FueSIsInRvS2ViYWJDYXNlIiwibm9ybWFsaXplIiwia2VlcGVycyIsIl9mYWNlcyIsInN1Ym1pdE9uQ2xvc2UiLCJzdWJtaXRPbkNoYW5nZSIsInN1cHBvcnRlZExhbmd1YWdlcyIsImVkaXRhYmxlIiwiZ3Vlc3NDb2RlIiwiZ3Vlc3NJZCIsImlkUHJlZml4IiwiZ2V0UHJlZml4IiwibGFuZyIsImlzRW5hYmxlZCIsIkNvQ0lES2V5cyIsImZsYXR0ZW5PYmplY3QiLCJfZmFsbGJhY2siLCJDb0NJREZsYWciLCJ0cmFuc2xhdGlvbnMiLCJwcmVmaXgiLCJleGlzdGluZ0tleXMiLCJpc1N5c3RlbUlEIiwiX2V4aXN0aW5nIiwid29ybGREb2N1bWVudHMiLCJmcm9tQ29DSURBbGwiLCJzY29wZSIsInVzZWRFcmFzIiwidW5pcXVlV29ybGRQcmlvcml0eSIsIndvcmxkRG9jdW1lbnRJbmZvIiwidW5zaGlmdCIsIm4iLCJ3YXJuRHVwbGljYXRlV29ybGRQcmlvcml0eSIsIndvcmxkRHVwbGljYXRlcyIsImNvbXBlbmRpdW1Eb2N1bWVudHMiLCJ1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHkiLCJjb21wZW5kaXVtRG9jdW1lbnRJbmZvIiwiY29tcGVuZGl1bSIsIndhcm5EdXBsaWNhdGVDb21wZW5kaXVtUHJpb3JpdHkiLCJjb21wZW5kaXVtRHVwbGljYXRlcyIsInNpYmxpbmdzIiwiX29uQ2xpY2tUb2dnbGUiLCJndWVzcyIsImNzcyIsImNvbG9yIiwiYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiIsImhlYWRlckJ1dHRvbnMiLCJzaGVldENvQ0lEIiwiQ29DSURFZGl0b3JCdXR0b24iLCJvbmNsaWNrIiwibnVtYmVyT2ZCdXR0b25zIiwiQ29DN0NvbnRleHRNZW51IiwibWVudSIsIl9jYWxsYmFjayIsIl9odG1sIiwiX21lbnUiLCJtZW51VHJpZ2dlciIsImNvbnRleHRtZW51IiwiX29uQ29udGV4dE1lbnUiLCJtZW51RWxlbWVudCIsIkNyZWF0ZU1lbnUiLCJfb25NZW51QWN0aW9uIiwibWVudUNvbnRhaW5lciIsImNsb3NlQWxsIiwiZWFjaCIsInZpc2liaWxpdHkiLCJtZW51TmFtZSIsImNvbnRleHRNZW51Iiwid3JhcHBlciIsInN1Yk1lbnUiLCJjbGllbnRYIiwiY2xpZW50WSIsIm1lbnVIZWlnaHQiLCJvdXRlckhlaWdodCIsIm1lbnVXaWR0aCIsIm91dGVyV2lkdGgiLCJjYW5TZWUiLCJhZGRDbGFzcyIsInNlY3Rpb24iLCJDcmVhdGVTZWN0aW9uIiwibXVsdGkiLCJzdWIiLCJDb0M3QWN0b3JTaGVldCIsIkFjdG9yU2hlZXQiLCJfZ2V0SGVhZGVyQnV0dG9ucyIsInNob3dIaWRkZW5EZXZNZW51IiwiY2FuRHJhZ1Rva2VuIiwibGlua2VkQWN0b3IiLCJpdGVtc0J5VHlwZSIsImNvbWJhdFNraWxscyIsInJhbmdlV3BuIiwibWVsZWVXcG4iLCJhY3RvckZsYWdzIiwicGVybWlzc2lvbkxpbWl0ZWQiLCJMSU1JVEVEIiwiYWxsb3dVbmxvY2siLCJwZXJzb25hbERlc2NyaXB0aW9uIiwic2V4IiwicmVzaWRlbmNlIiwiYmlydGhwbGFjZSIsIm9yZ2FuaXphdGlvbiIsInBsYXllcm5hbWUiLCJtYW51YWxDcmVkaXQiLCJjcmVkaXQiLCJtb25ldGFyeVN5bWJvbCIsInNwZW50IiwiYXNzZXRzRGV0YWlscyIsImRldmVsb3BtZW50IiwicHVscFJ1bGVBcmNoZXR5cGUiLCJwdWxwUnVsZU9yZ2FuaXphdGlvbiIsImlzRGVhZCIsImlzRHlpbmciLCJpdGVtVG9VcGRhdGUiLCJ1cGRhdGVkRXhwIiwiaXRlbVR5cGUiLCJtZWxlZVNraWxscyIsInJhbmdlU2tpbGxzIiwiY2J0U2tpbGxzIiwidXNlc0FsdGVybmF0ZVNraWxsIiwic2tpbGxTZXQiLCJfcHJvcGVydGllcyIsImhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSIsImlzRmlyc3QiLCJpc0xhc3QiLCJzaG93SW52ZW50b3J5SXRlbXMiLCJzaG93SW52ZW50b3J5Qm9va3MiLCJzaG93SW52ZW50b3J5U3BlbGxzIiwic2hvd0ludmVudG9yeVRhbGVudHMiLCJzaG93SW52ZW50b3J5U3RhdHVzZXMiLCJzaG93SW52ZW50b3J5V2VhcG9ucyIsInNob3dJbnZlbnRvcnlBcm1vciIsImhhc0NvbmRpdGlvbnMiLCJjb25kaXRpb24iLCJvbkNsb3NlU2hlZXQiLCJfb25TZWN0aW9uSGVhZGVyIiwiX29uSXRlbUhlYWRlciIsIl9vbkludmVudG9yeUhlYWRlciIsImRibGNsaWNrIiwiX3RvZ2dsZVJlYWRPbmx5IiwiX29uQWRkQW1vIiwiX29uUmVsb2FkV2VhcG9uIiwiX29uTG9ja0NsaWNrZWQiLCJfb25GbGFnQ2xpY2tlZCIsIl9vbkZvcm11bGFDbGlja2VkIiwiX29uQXV0b1RvZ2dsZSIsIm1lbnVzIiwicm9sbE1lbnUiLCJzYW5NZW51Iiwicm9sbENvbnRleHRNZW51IiwiX29uQ29udGV4dE1lbnVDbGljayIsInNhbkNvbnRleHRNZW51IiwiX29uT3Bwb3NlZFJvbGwiLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QiLCJfb25Sb2xsU2tpbGxUZXN0IiwiX29uUm9sbEF0dHJpYlRlc3QiLCJfb25EcmFnVG9rZW5TdGFydCIsIl9vbkRyYWdDaGFyYWN0ZXJpc3RpYyIsIl9vbkRyYWdBdHRyaWJ1dGUiLCJfb25EcmFnU2FuQ2hlY2siLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZSIsIl9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlIiwiX29uUmVzZXRDb3VudGVyIiwiX29uQ29uZGl0aW9uVG9nZ2xlIiwiaGVhbCIsInJldml2ZSIsImNoZWNrRm9yRGVhdGgiLCJfb25JdGVtUm9sbCIsIl9vbldlYXBvblJvbGwiLCJfb25FZmZlY3QiLCJfb25XZWFwb25Ta2lsbFJvbGwiLCJfb25XZWFwb25EYW1hZ2UiLCJ3aGVlbElucHV0cyIsIndoZWVsSW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiX29uV2hlZWwiLCJfb25JdGVtU3VtbWFyeSIsIl9vbkl0ZW1Qb3B1cCIsIl9vblJlbmRlckl0ZW1TaGVldCIsImV2IiwicGFyZW50cyIsIml0ZW1Ub0RlbGV0ZSIsInN0cmljdCIsInNsaWRlVXAiLCJzdG9wUHJvcGFnYXRpb24iLCJfb25UcmFkZUl0ZW0iLCJkZXRhaWwiLCJkaXNhYmxlIiwibW91c2VlbnRlciIsInRvb2xUaXBTa2lsbEVudGVyIiwidG9vbFRpcExlYXZlIiwidG9vbFRpcENoYXJhY3RlcmlzdGljRW50ZXIiLCJ0b29sVGlwQXR0cmlidXRlRW50ZXIiLCJ0b29sVGlwQXV0b0VudGVyIiwidG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudCIsImRlbGF5IiwidG9vbFRpcFRpbWVyIiwiZGlzcGxheVRvb2xUaXAiLCJjaGFySWQiLCJhdHRyaWJ1dGVJZCIsImF0dHJpYnV0ZXMiLCJ0YXJnZXRUeXBlIiwicm9sbE9wdGlvbnMiLCJhY3RvckZyb20iLCJhY3RvclRvIiwidmlzaWJsZSIsIk5PTkUiLCJfb25EcmFnU3RhcnQiLCJkcmFnRGF0YSIsImJveCIsIkNvQzdUeXBlIiwiaXNMb2NrZWQiLCJkZWx0YVkiLCJyZWFkT25seSIsInNlY3JldHMiLCJoYXNDbGFzcyIsInN1bW1hcnkiLCJkaXYiLCJzcGVjaWFsRGl2IiwiaGlkZSIsInNsaWRlRG93biIsInBhbm5lbENsYXNzIiwicGFubmVsIiwiaXMiLCJvbCIsIm5leHQiLCJwb3B1cFNraWxsIiwiZW5yaWNoZWRWYWx1ZSIsInNjcm9sbFkiLCJwcm9jZWVkV2l0aG91dFRhcmdldCIsImNhbmNlbCIsInByb2NlZWQiLCJyb2xsRm9ybXVsYSIsIm92ZXJyaWRlcyIsImJpb2dyYXBoeUtleVJlZ2V4IiwiYmlvZ3JhcGh5S2V5cyIsImJpb2dyYXBoeUtleSIsImNyZWRpdFZhbHVlIiwic2VsZWN0ZWRJbmRleCIsIkNvQzdOUENTaGVldCIsImFsbG93Rm9ybXVsYSIsImRpc3BsYXlGb3JtdWxhIiwiaGFzU2FuIiwiaGFzTXAiLCJoYXNMdWNrIiwiaXNDcmVhdHVyZSIsImhhc0ludmVudG9yeSIsImVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiIsImVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIiLCJrZWVwZXIiLCJzYW5sb3NzTWVudSIsInNhbmxvc3NDb250ZXh0TWVudSIsIl9vblNhbkxvc3NDb250ZXh0TWVudUNsaWNrIiwiX29uU2FuQ2hlY2siLCJyZXNpemFibGUiLCJtaW5pbWl6YWJsZSIsImZvcmNlQXV0byIsInNldFBvc2l0aW9uIiwiQ29DN0NyZWF0dXJlU2hlZXQiLCJDb0M3Q3JlYXRlTXl0aG9zRW5jb3VudGVyIiwiaXNJbW11bml0eSIsIl9vbkJ1dHRvbkNsaWNrIiwiQ29DN0NoYXJhY3RlclNoZWV0Iiwic3VtbWFyaXplZCIsInRvZ2dsZVNoZWV0TW9kZSIsInNraWxsTGlzdE1vZGVWYWx1ZSIsInNraWxsU2hvd1VuY29tbW9uIiwic2hvd0ljb25zT25seSIsIm9jY3VwYXRpb25TZXQiLCJhcmNoZXR5cGVTZXQiLCJ0b3RhbEV4cGVyaWVuY2UiLCJ0b3RhbE9jY3VwYXRpb24iLCJpbnZhbGlkT2NjdXBhdGlvblBvaW50cyIsInRvdGFsQXJjaGV0eXBlIiwiaW52YWxpZEFyY2hldHlwZVBvaW50cyIsInRvdGFsUGVyc29uYWwiLCJpbnZhbGlkUGVyc29uYWxQb2ludHMiLCJjcmVkaXRSYXRpbmdNYXgiLCJjcmVkaXRSYXRpbmdNaW4iLCJpbnZhbGlkQ3JlZGl0UmF0aW5nIiwicHVscFRhbGVudENvdW50IiwidGFsZW50IiwibWluUHVscFRhbGVudHMiLCJ0YWxlbnRzIiwiaW52YWxpZFB1bHBUYWxlbnRzIiwiYWxsb3dEZXZlbG9wbWVudCIsImFsbG93Q2hhckNyZWF0aW9uIiwiZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayIsInNob3dEZXZQYW5uZWwiLCJfbW9uZXRhcnlGb3JtYXRzIiwibW9uZXRhcnlGb3JtYXRzIiwic2hvd0N1cnJlbmN5U3ltYm9sIiwiX21vbmV0YXJ5VHlwZXMiLCJtb25ldGFyeVR5cGVzIiwib25lQmxvY2tCYWNrU3RvcnkiLCJpc1N1bW1hcml6ZWQiLCJwcmV2aW91c1NwZWMiLCJpc1NwZWNpYWxpemF0aW9uIiwic2tpbGxzQnlWYWx1ZSIsInRvcFNraWxscyIsInRvcFdlYXBvbnMiLCJyZXZlcnNlIiwiZGlzcGxheVBsYXllck5hbWUiLCJza2lsbExpc3RFbXB0eSIsImVucmljaGVkQmFja3N0b3J5IiwiX3NhdmVTY3JvbGxQb3NpdGlvbnMiLCJfc2Nyb2xsUG9zaXRpb25zWCIsInBvcyIsInNlbCIsInNjcm9sbExlZnQiLCJfcmVzdG9yZVNjcm9sbFBvc2l0aW9ucyIsInNlbGVjdG9ycyIsInBvc2l0aW9ucyIsIl9vblNraWxsRGV2IiwiX29uSXRlbURldGFpbHMiLCJ0b2dnbGVTa2lsbExpc3RNb2RlIiwidG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUiLCJfb25BZGRTYW5pdHlMb3NzUmVhc29uIiwiX29uRGVsZXRlU2FuaXR5TG9zc1JlYXNvbiIsImJsdXIiLCJfb25FZGl0U2FuaXR5TG9zc1JlYXNvbiIsIl9vblRvZ2dsZUtlZXBlckZsYWdzIiwiX29uQWRkTW9uZXRhcnkiLCJfb25SZW1vdmVNb25ldGFyeSIsImNhc2hUeXBlIiwiY2FzaFZhbHVlIiwiYXNzZXRzVHlwZSIsImFzc2V0c1ZhbHVlIiwic3BlbmRpbmdUeXBlIiwic3BlbmRpbmdWYWx1ZSIsInN0eWxlU2hlZXQiLCJjc3NSdWxlSW5kZXgiLCJzdHlsZVNoZWV0cyIsImhyZWYiLCJlbmRzV2l0aCIsInJ1bGVzIiwic2VsZWN0b3JUZXh0IiwiQ1NTU3R5bGUiLCJyZW1vdmVQcm9wZXJ0eSIsInNldFByb3BlcnR5IiwiRm9udEZhY2UiLCJsb2FkIiwibG9hZGVkRmFjZSIsImZvbnRzIiwid2VpZ2h0IiwiZXhwYW5kZWQiLCJDb0M3Q29tYmF0IiwicmVuZGVyQ29tYmF0VHJhY2tlciIsImN1cnJlbnRDb21iYXQiLCJjb21iYXRzIiwiY3VycmVudEluZGV4IiwiY29tYklkIiwiY29tYmF0YW50Q29udHJvbHNEaXYiLCJjb21iYXRhbnQiLCJjb21iYXRhbnRzIiwicHJlcGVuZCIsImluaXRpYXRpdmUiLCJ0b2tlbkluaXRpYXRpdmUiLCJpbml0aWF0aXZlVGVzdCIsImg0IiwiZm9udFdlaWdodCIsInRleHRTaGFkb3ciLCJiYWNrZ3JvdW5kIiwiX29uVG9nZ2xlR3VuIiwiY29tYmF0YW50SWQiLCJuZXdJbml0Iiwic2V0SW5pdGlhdGl2ZSIsImlkcyIsIkNvQ0lEQmF0Y2giLCJmb3VuZEtleXMiLCJvdXQiLCJtaXNzaW5nTmFtZXMiLCJzdWZmaXgiLCJzdWZmaXhSZWdFeHAiLCJvblNldE5hbWUiLCJvbkNsaWNrR3Vlc3MiLCJrZXl1cCIsIm9uS2V5dXAiLCJ0eXBlTmFtZSIsInByb2Nlc3NTa2lsbEtleXMiLCJ1cGRhdGVMaXN0IiwidG9rZW5PZmZzZXQiLCJpdGVtT2Zmc2V0IiwiYWN0b3JEYXRhIiwiZXhwYW5kZWRGbGFncyIsInVwZGF0ZURvY3VtZW50cyIsInBvcHVsYXRlU2tpbGxLZXlzIiwic2NlbmVEYXRhIiwiVXBkYXRlciIsImNoZWNrRm9yVXBkYXRlIiwic3lzdGVtVXBkYXRlVmVyc2lvbiIsImpvdXJuYWwiLCJydW5NaWdyYXRlIiwidXBkYXRlZE1vZHVsZXMiLCJjdXJyZW50TW9kdWxlcyIsInBhY2thZ2VOYW1lIiwibW9kdWxlIiwia25vd25Nb2R1bGVWZXJzaW9ucyIsIm1vZCIsInNraXAiLCJPSyIsInBlcm1hbmVudCIsIm1pZ3JhdGVBY3RvckRhdGEiLCJpc0VtcHR5IiwiZW5mb3JjZVR5cGVzIiwibWlncmF0ZUl0ZW1EYXRhIiwidGFibGUiLCJtaWdyYXRlVGFibGVEYXRhIiwibWlncmF0ZU1hY3JvRGF0YSIsIm1pZ3JhdGVTY2VuZURhdGEiLCJtaWdyYXRlQ29tcGVuZGl1bURhdGEiLCJfbWlncmF0ZUFjdG9yQ2hhcmFjdGVyU2FuaXR5IiwiX21pZ3JhdGVBY3RvckFydHdvcmsiLCJfbWlncmF0ZUFjdG9yS2VlcGVyTm90ZXMiLCJfbWlncmF0ZUFjdG9yTnBjQ3JlYXR1cmUiLCJfbWlncmF0ZUFjdG9yU3RhdHVzRWZmZWN0QWN0aXZlIiwiX21pZ3JhdGVBY3RvclNhbkxvc3NSZWFzb25zIiwiX21pZ3JhdGVBY3Rvck1vbmV0YXJ5IiwiYXJyIiwiaXRlbVVwZGF0ZSIsImRvY3VtZW50VHlwZSIsIndhc0xvY2tlZCIsImNvbmZpZ3VyZSIsIm1pZ3JhdGUiLCJkb2N1bWVudHMiLCJfbWlncmF0ZUl0ZW1FbWJlZGRlZHYxMCIsIl9taWdyYXRlSXRlbUV4cGVyaWVuY2UiLCJfbWlncmF0ZUl0ZW1BcnR3b3JrIiwiX21pZ3JhdGVJdGVtQm9va0F1dG9tYXRlZCIsIl9taWdyYXRlSXRlbUtlZXBlck5vdGVzIiwiX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQiLCJfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIiwiX21pZ3JhdGVJdGVtRXJhcyIsIl9taWdyYXRlSXRlbXYxMCIsIl9taWdyYXRlSXRlbUJvb2tVbml0cyIsIl9taWdyYXRlTWFjcm9BcnR3b3JrIiwiX21pZ3JhdGVUYWJsZUFydHdvcmsiLCJyZXR1cm5zIiwiX21pZ3JhdGVUb2tlbkFydHdvcmsiLCJNYXAiLCJvcmlnaW5hbCIsImciLCJzcGVsbHMiLCJjb3N0IiwiY2FzdGluZ1RpbWUiLCJ1bmlkZW50aWZpZWQiLCJhdXRob3IiLCJkYXRlIiwibGFuZ3VhZ2UiLCJteXRob3NSYXRpbmciLCJub3RlcyIsImdhaW4iLCJDTUkiLCJDTUYiLCJuZWNlc3NhcnkiLCJ3ZWVrc1N0dWR5VGltZSIsInByb2dyZXNzIiwic3R1ZHkiLCJrZWVwZXJOb3RlcyIsImVuY291bnRlcmVkQ3JlYXR1cmVzIiwiaW0iLCJhdHRhY2tzUGVyUm91bmQiLCJpbmRlZmluaXRlSW5zYW5pdHlMZXZlbCIsIm5hbWVDaGFyYWN0ZXJzIiwiZW4iLCJkYk5vbmUiLCJhcm1vck5vbmUiLCJhdHRhY2tzUGVyUm91bmROb25lIiwic2FuTG9zc05vbmUiLCJmdWxsZGIiLCJoYWxmZGIiLCJzZWN0aW9uQ29tYmF0cyIsIm5ld0NvbWJhdEhlYWRlciIsInNlY3Rpb25Ta2lsbHMiLCJzZWN0aW9uTGFuZ2F1Z2VzIiwic2VjdGlvblNwZWxscyIsImhhbmRndW4iLCJyaWZsZSIsInNtYiIsIm1hY2hpbmVHdW4iLCJsYXVuY2hlZCIsImV4YW1wbGUiLCJkZSIsImRpY2VTaG9ydCIsInBsIiwiZnIiLCJlcyIsImphIiwid2VhcG9uRG9kZ2UiLCJndWVzc1N0YXJ0Q29tYmF0Iiwic2VjdGlvbnMiLCJDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCIsImNoZWNrTGFuZ3VhZ2UiLCJnZXRFeGFtcGxlVGV4dCIsImdldFRyYW5zbGF0aW9ucyIsImdldEtleXMiLCJnZXRSZWd1bGFyRXhwcmVzc2lvbnMiLCJDb0M3QWN0b3JJbXBvcnRlciIsIml0ZW1Mb2NhdGlvbnMiLCJhc051bWJlciIsImFzU3RyaW5nIiwiZ2V0UmVnRXgiLCJyZWdleCIsImNsZWFuU3RyaW5nIiwidHJhbnNsYXRlUm9sbCIsInJlZ0V4IiwidG9IVE1MIiwicmVnRXhLZXkiLCJyZWdFeHAiLCJyZXF1aXJlZEdyb3VwIiwicmVtb3ZlRnJvbVRleHQiLCJzYXZlS2V5cyIsInByb2Nlc3NDb21iYXQiLCJuZXdsaW5lIiwiQ29DN0ltcG9ydGVyIiwibGFzdFBlcmNlbnQiLCJtYXhMb29wcyIsInBlcmNlbnRhZ2UiLCJpc1JhbmdlZCIsImRhbWFnZXMiLCJpc1Nob3RndW4iLCJhdHRhY2tzIiwicHJvY2Vzc1NraWxscyIsImJyZWFrcyIsInByb2Nlc3NTcGVsbHMiLCJzcGVsbHNBcnIiLCJzcGVsbCIsInBhcnNlQ2hhcmFjdGVyIiwiaGVhZGVyIiwib2NjdXBhdGlvbkFnZSIsInJlZ0V4cFNlY3Rpb25zIiwiZ21ub3RlcyIsImRpc2FibGVBdHRyaWJBdXRvIiwiYXR0cmliVmFsdWUiLCJjcmVhdGVFbnRpdHkiLCJjaGFyYWN0ZXJEYXRhIiwibnBjIiwidXBkYXRlSXRlbURhdGEiLCJsYXN0V2VhcG9uU2tpbGwiLCJwYWlyIiwid2VhcG9uU2tpbGxzIiwicGMiLCJpdGVtc0RhdGEiLCJ3ZWFwb25Ta2lsbCIsImNsb25lZCIsImxhbmd1YWdlcyIsImxvY2FsaXplZEZpcmVhcm0iLCJjbG9uZSIsIm5ld1NraWxsIiwibmVlZHNDb252ZXJzaW9uIiwibmVlZHNDb252ZXJzaW9uUmVzdWx0IiwiY3JlYXRlQWN0b3IiLCJpbnB1dHMiLCJjb252ZXJ0RnJvbTZFIiwiY29udmVydDdFIiwidGVzdE1vZGUiLCJjcmVhdHVyZSIsIkNvQzdEaXJlY3RvcnlQaWNrZXIiLCJGaWxlUGlja2VyIiwiYWN0aXZlU291cmNlIiwiYnVja2V0IiwiRGVmYXVsdERpcmVjdG9yeSIsInJhdyIsInByb2Nlc3NIdG1sIiwicGlja2VyIiwicGlja2VyQnV0dG9uIiwiY3JlYXRlRGVmYXVsdERpcmVjdG9yeSIsImNyZWF0ZURpcmVjdG9yeSIsInVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeSIsImZpbGUiLCJmaWxlbmFtZSIsInVwbG9hZCIsIkZpbGUiLCJDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIiLCJnZXRCYWNrc3RvcnkiLCJiYWNrc3RvcnlKU09OIiwiYmxvY2siLCJjb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEiLCJkaG9sZUhvdXNlRGF0YSIsIkludmVzdGlnYXRvciIsImJhY2tzdG9yaWVzIiwiQmFja3N0b3J5IiwiUGVyc29uYWxEZXRhaWxzIiwiTmFtZSIsIkNoYXJhY3RlcmlzdGljcyIsIlNUUiIsIkNPTiIsIlNJWiIsIkRFWCIsIkFQUCIsIklOVCIsIlBPVyIsIkVEVSIsIlNhbml0eSIsIlNhbml0eU1heCIsIkhpdFB0cyIsIkhpdFB0c01heCIsIk1hZ2ljUHRzIiwiTWFnaWNQdHNNYXgiLCJMdWNrIiwiTW92ZSIsIkRhbWFnZUJvbnVzIiwiQnVpbGQiLCJPY2N1cGF0aW9uIiwiQWdlIiwiR2VuZGVyIiwiUmVzaWRlbmNlIiwiQmlydGhwbGFjZSIsImV4dHJhY3RTa2lsbHMiLCJTa2lsbHMiLCJTa2lsbCIsInBvc3Nlc2lvbnMiLCJleHRyYWN0UG9zc2Vzc2lvbnMiLCJQb3NzZXNzaW9ucyIsIm1ha2VTa2lsbE5hbWUiLCJkaG9sZUhvdXNlc2tpbGxzIiwic3Vic2tpbGwiLCJmaW5kV2VhcG9uU2tpbGxJZCIsImdldEVtYmVkZGVkQ29sbGVjdGlvbiIsImRob2xlaG91c2VQb3NzZXNzaW9ucyIsImlzQXJyYXkiLCJleHRyYWN0V2VhcG9ucyIsImRob2xlaG91c2VXZWFwb25zIiwic2tpbGxuYW1lIiwibWFsZiIsInNhdmVQb3J0cmFpdCIsImJhc2U2NFBvcnRyYWl0IiwiZmlsZU5hbWUiLCJiYXNlNjRSZXNwb25zZSIsImZldGNoIiwiaW1hZ2VCbG9iIiwiYmxvYiIsImNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIiwiZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEiLCJjYW4iLCJQb3J0cmFpdCIsIldlYXBvbnMiLCJDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyIsImltcG9ydFR5cGUiLCJjb252ZXJ0NkUiLCJjYW5VcGxvYWQiLCJwbGFjZWhvbGRlciIsIl9vbkpTT05GaWxlU2VsZWN0ZWQiLCJjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQiLCJnZXRJbnB1dHMiLCJqc29uRmlsZUlucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJwb3J0cmFpdEltYWdlIiwiY2hhcmFjdGVyTmFtZSIsInByZXZpZXciLCJmaWxlcyIsImZpbGVSZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiY2hhcmFjdGVySlNPTiIsInBlcnNvbmFsRGV0YWlscyIsInRleHRDb250ZW50IiwicmVhZEFzVGV4dCIsImFjdG9yVHlwZSIsImltcG9ydEFjdG9yIiwiY3JlYXRlZEFjdG9yIiwib25jZSIsIkRyb3BDb0NJRCIsInByb2Nlc3NGb3JtIiwicmVzcG9uc2UiLCJwcm9jZXNzSXRlbSIsIm5vIiwiQ29DN09jY3VwYXRpb25TaGVldCIsIkl0ZW1TaGVldCIsIl9vbkl0ZW1EZWxldGUiLCJfb25Hcm91cEl0ZW1EZWxldGUiLCJfb25Hcm91cENvbnRyb2wiLCJEcmFnRHJvcCIsImNhbGxiYWNrcyIsImRyb3AiLCJjb2xsZWN0aW9uTmFtZSIsIm9wdGlvbmFsU2tpbGwiLCJ1c2VDb0NJRCIsIkNvQ0lkIiwiaXRlbUluZGV4IiwiaGFzT3duZXIiLCJpc0VtYmVkZGVkIiwib2NjdXBhdGlvblBvaW50c1N0cmluZyIsIml0ZW1Qcm9wZXJ0aWVzIiwib2NjdXBhdGlvblByb3BlcnRpZXMiLCJlbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUiLCJvcHRpb25uYWwiLCJtYW5kYXRvcnkiLCJjYXJhYyIsImNhcmFjTmFtZSIsIm9yU3RyaW5nIiwiQ29DN0ludmVzdGlnYXRvcldpemFyZCIsInBhZ2VMaXN0IiwiUEFHRV9OT05FIiwiUEFHRV9JTlRST0RVQ1RJT04iLCJQQUdFX0NPTkZJR1VSQVRJT04iLCJQQUdFX1NFVFVQUyIsIlBBR0VfQVJDSEVUWVBFUyIsIlBBR0VfQ0hBUkFDVElTVElDUyIsIlBBR0VfQVRUUklCVVRFUyIsIlBBR0VfVklFV19BVFRSSUJVVEVTIiwiUEFHRV9PQ0NVUEFUSU9OUyIsIlBBR0VfT0NDVVBBVElPTl9TS0lMTFMiLCJQQUdFX0FSQ0hFVFlQRV9TS0lMTFMiLCJQQUdFX1BPSU5UU19TS0lMTFMiLCJQQUdFX0lOVkVTVElHQVRPUiIsIlBBR0VfQkFDS1NUT1JZIiwiUEFHRV9DUkVBVEUiLCJjaGFyYWN0ZXJpc3RpY3NNZXRob2RzIiwiTUVUSE9EX0RFRkFVTFQiLCJNRVRIT0RfUk9MTCIsIk1FVEhPRF9QT0lOVFMiLCJNRVRIT0RfVkFMVUVTIiwiTUVUSE9EX0NIT09TRSIsImNvY2lkQ3JlZGl0UmF0aW5nIiwiY29jaWRMYW5ndWFnZU93biIsInBhZ2VPcmRlciIsInBhZ2VzIiwiZGVmYXVsdFNldHVwIiwibG9hZENhY2hlSXRlbUJ5Q29DSUQiLCJmaWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEIiwicmVnZXhwIiwiY2FjaGVDb0NJRCIsImdldENhY2hlSXRlbUJ5Q29DSUQiLCJjb2NpZHMiLCJkZWZhdWx0RXJhIiwiZ2V0QWdlQWRqdXN0bWVudHMiLCJzZXR1cE1vZGlmaWVycyIsInJlcXVpcmVzQWdlQWRqdXN0bWVudHMiLCJkZWR1Y3QiLCJzZXR1cCIsImNhbk5leHQiLCJjcmVhdGVCdXR0b24iLCJzaG93TW9uZXRhcnkiLCJzdGVwIiwic2V0dXBzIiwib2NjdXBhdGlvbnMiLCJhcmNoZXR5cGVzIiwiX2VyYXMiLCJjaGFyYWN0ZXJpc3RpY3NNZXRob2QiLCJlbmZvcmNlUG9pbnRCdXkiLCJjaG9vc2VSb2xsZWRWYWx1ZXMiLCJxdWlja0ZpcmVWYWx1ZXMiLCJoYXNBcmNoZXR5cGVzIiwiY29yZUNoYXJhY3RlcmlzdGljIiwidG9Mb2NhbGVVcHBlckNhc2UiLCJzdWdnZXN0ZWRPY2N1cGF0aW9ucyIsInN1Z2dlc3RlZFRyYWl0cyIsImVtcHRpZXMiLCJzZXR1cFBvaW50cyIsInB1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzIiwiZGVkdWN0VG90YWwiLCJkZWR1Y3RGcm9tIiwicmVkdWNlRnJvbSIsImx1Y2tWYWx1ZSIsInBlcnNvbmFsVGV4dCIsInNraWxsSXRlbXMiLCJsYW5ndWFnZU5hbWUiLCJyb3dzIiwiaXNNdWx0aXBsZSIsImlzQ3JlZGl0UmF0aW5nIiwiaXNQaWNrYWJsZSIsImlzT2NjdXBhdGlvbkRlZmF1bHQiLCJpbk9jY3VwYXRpb25Hcm91cCIsIm9jY3VwYXRpb25Ub2dnbGUiLCJwaWNrZWQiLCJkZWxldGVhYmxlIiwiYXJjaGV0eXBlVG9nZ2xlIiwib2NjdXBhdGlvbkdyb3VwcyIsImlzQXJjaGV0eXBlRGVmYXVsdCIsImNyZWRpdFJhdGluZ09rYXkiLCJyZW1haW5pbmciLCJ0b3RhbFBvaW50cyIsIm51bSIsImlzT2NjdXBhdGlvbiIsImlzQXJjaGV0eXBlIiwic2hvd0NyZWRpdFJhdGluZyIsImFsbEJhY2tzdG9yaWVzIiwiY2FjaGVCYWNrc3RvcmllcyIsInJvbGUiLCJVU0VSX1BFUk1JU1NJT05TIiwiQUNUT1JfQ1JFQVRFIiwiZGVmYXVsdFJvbGUiLCJrZXlwcmVzcyIsInNyY0VsZW1lbnQiLCJ0YWdOYW1lIiwiY2hhckNvZGUiLCJfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25Sb2xsQWxsIiwiX29uUm9sbENob29zZSIsIl9vblJvbGxFZHUiLCJfb25Sb2xsTHVjayIsIl9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyIsIl9vblRvZ2dsZVNraWxsIiwiX29uQ2xpY2tQaWNrU2tpbGwiLCJfb25DbGlja1NraWxsU3BlY2lhbCIsIl9vbkNsaWNrUmVtb3ZlU2tpbGwiLCJfb25DaGFuZ2VTa2lsbFBvaW50cyIsIl9vbkNoYW5nZUJhY2tzdG9yeVRleHQiLCJfb25Sb2xsQmFja3N0b3J5IiwiX29uUmVzZXRCYWNrc3RvcnkiLCJyb2xsTWVzc2FnZSIsIkNIQVRfVEVNUExBVEUiLCJnZXRUb29sdGlwIiwiYWRkSXRlbVRvTGlzdCIsImludmVzdGlnYXRvckl0ZW1zIiwiaW5wbGFjZSIsImNsZWFyU2V0dXBQb2ludHMiLCJyb2xsZWRWYWx1ZXMiLCJzZXRTa2lsbExpc3RzIiwicGxhY2VhYmxlIiwibmFtZUNyZWRpdFJhdGluZyIsImNoYXJhY3RlcmlzdGljS2V5IiwiX2NhbkRyYWdTdGFydCIsInNlbGVjdG9yIiwiX2NhbkRyYWdEcm9wIiwiZGVzdGluYXRpb24iLCJlbXB0eSIsImFzc2lnbmVkIiwidGVtcCIsIm9sZCIsInBhcmVudE5vZGUiLCJ0b2dnbGVLZXkiLCJndWVzc0dyb3VwRnJvbUtleSIsImFkanVzdG1lbnQiLCJ0ZXh0YXJlYSIsInJvbGx0YWJsZSIsInRhYmxlUmVzdWx0cyIsInRhYmxlUmVzdWx0Iiwicm9sbEZvcm11bGFzIiwibW9kaWZ5T2Zmc2V0IiwibW9kaWZ5Q2hhcmFjdGVyaXN0aWMiLCJyZXJvbGxzRW5hYmxlZCIsIm9ialRvdGFsIiwiZ2V0UGFnZU51bWJlciIsImRpcmVjdGlvbiIsImNsYXNzTmFtZSIsImRlZmF1bHRPd25lcnNoaXAiLCJzdGFydGVkIiwibm93IiwiYnVmZmVyIiwiZGVmYXVsdFF1YW50aXR5IiwiZmxhdEtleXMiLCJwYWdlTnVtYmVyIiwic2Nyb2xsVG9wIiwiYXR0ZW1wdFRvQ3JlYXRlIiwibm9ybWFsaXplQ2hhcmFjdGVyRGF0YSIsImNyZWF0ZUNoYXJhY3RlciIsInBheWxvYWQiLCJzb3VyY2VJdGVtIiwiYXZhdGFyIiwiVE9LRU5fRElTUE9TSVRJT05TIiwiRlJJRU5ETFkiLCJjcmVhdGVDaGFyYWN0ZXJGcm9tRGF0YSIsImZ1bmN0aW9uSWQiLCJvZmYiLCJjYWNoZUl0ZW1zIiwiQ29DSURBY3RvclVwZGF0ZUl0ZW1zIiwiaXNFbiIsImdldFVwZGF0ZURhdGEiLCJzdWdnZXN0ZWRDb250YWN0cyIsInVwZGF0ZUFjdG9ycyIsImFjdG9yTGlzdCIsInVubGlua2VkQWN0b3JzIiwiYW55cyIsIm1ha2VHcm91cFJlZ0V4IiwiYWxsVXBkYXRlcyIsIkNvQzdNZW51TGF5ZXIiLCJQbGFjZWFibGVzTGF5ZXIiLCJvYmplY3RzIiwibGF5ZXJPcHRpb25zIiwiQ29DN01lbnUiLCJnZXRCdXR0b25zIiwiY29udHJvbHMiLCJjb2M3Z210b29scyIsImxheWVyIiwidG9vbHMiLCJvbkNsaWNrIiwiY29jN0RldlRvb2xzIiwicmVuZGVyQ29udHJvbHMiLCJrZWVwZXJNZW51IiwiYWZ0ZXIiLCJDb0M3Q2FudmFzIiwiQ09DN19UWVBFU19TVVBQT1JURUQiLCJvbkRyb3BTb21ldGhpbmciLCJncmlkU2l6ZSIsImRyb3BUYXJnZXRUb2tlbnMiLCJiZXR3ZWVuIiwiYXBwSWQiLCJjYWxsQmFjayIsIkNvQzdTZXR0aW5nc0RpcmVjdG9yeSIsIlNldHRpbmdzIiwibG9jYXRpb24iLCJNYW51YWwiLCJDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSIsIkNvbXBlbmRpdW1EaXJlY3RvcnkiLCJ0cmFuc2xhdGVkIiwiYmFiZWxlIiwiQ29DN0FjdG9yRGlyZWN0b3J5IiwiQWN0b3JEaXJlY3RvcnkiLCJhbGxvd1dpemFyZCIsImFsbG93ZWQiLCJDb0M3U3BlbGwiLCJjYXN0IiwicHJpdiIsImlzT3duZWQiLCJjb3N0cyIsImxvc3NlcyIsImNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cyIsIm1hZ2ljUG9pbnRzIiwiY29udmVydGVkSGl0UG9pbnRzIiwiY29udmVydGVkTWFnaWNQb2ludHMiLCJhY3Rvck1hZ2ljUG9pbnRzIiwib3JpZ2luYWxNYWdpY1BvaW50cyIsImhpdFBvaW50cyIsInJlc29sdmVMb3NzZXMiLCJncmFudFNhbml0eUxvc3MiLCJnZXRIVE1MIiwic2FuaXR5TG9zcyIsInNhbml0eUNoZWNrIiwiYm9va0lkIiwiYm9vayIsIkNvQzdCb29rIiwiYWRkU3BlbGxzIiwic3BlbGxEZXRhaWwiLCJsZWFybmVkIiwiYXR0ZW1wdEluaXRpYWxSZWFkaW5nIiwiY2hhbmdlUHJvZ3Jlc3MiLCJpbml0aWFsUmVhZGluZyIsImZ1bGxTdHVkeSIsImNvbXBsZXRlRnVsbFN0dWR5IiwiY2hlY2tFeGhhdXN0aW9uIiwiZ3JhbnRGdWxsU3R1ZHkiLCJhY3Rvck15dGhvc1ZhbHVlIiwiZGV2ZWxvcG1lbnRzIiwibXl0aG9zRmluYWwiLCJnYWlucyIsImZpbmFsIiwiZ3JhbnRTa2lsbERldmVsb3BtZW50Iiwicm9sbFNhbml0eUxvc3MiLCJmdWxsU3R1ZGllcyIsImdyYW50SW5pdGlhbFJlYWRpbmciLCJvdGhlcnMiLCJncmFudFNwZWxsTGVhcm5pbmciLCJzcGVsbGxlYXJuZWQiLCJleGlzdGluZ1NraWxsIiwic2hvd0RldmVsb3BtZW50c1RhYmxlIiwicmVkb0Z1bGxTdHVkeSIsImF0dGVtcHRTcGVsbExlYXJuaW5nIiwiRUNDX0NMQVNTIiwiUEVSTUlTU0lPTl9UWVBFIiwiU1RBVEUiLCJHTVVwZGF0ZSIsImNhcmRDbGFzc05hbWUiLCJFbmhhbmNlZENoYXRDYXJkIiwiYWR2aXNlIiwiRW5oYW5jZWRDaGF0Q2FyZExpYiIsInR5cGVzIiwiaW5qZWN0Q1NTIiwiZW5oYW5jZWRDaGF0Q2FyZHNMaWIiLCJyZWdpc3RlciIsImNhcmRDb25zdHJ1Y3RvcnMiLCJjYXJkQ29uc3RydWN0b3IiLCJvb2MiLCJkZWVwQ2xvbmUiLCJhdHRhY2hPYmplY3QiLCJvYmplY3REYXRhU3RyaW5nIiwiZWNjQ2xhc3MiLCJsb2NhbENvbXB1dGUiLCJFeGVjdXRlR01VcGRhdGUiLCJFRUNfQUNUSU9OIiwiZGV0YWNoRGF0YSIsIl9vbkNoYW5nZSIsInNldFZpc2liaWxpdHkiLCJzZXRQZXJtaXNzaW9uIiwic2V0U3RhdGUiLCJzZXRSYWRpb1N0YXRlIiwic3BsaXRlZCIsImVjY1Zpc2liaWxpdHkiLCJoYXNQZXJtIiwiZWNjUGVybWlzc2lvbnMiLCJyZXN0cmljdGVkVG8iLCJ2aXNpb24iLCJwZXJtaXNzaW9uc0FycmF5Iiwid2hpdGVMaXN0IiwiaXNBdXRob3IiLCJhc3NpZ25PYmplY3RzIiwibmV3RGF0YSIsImZvcm1VcGRhdGUiLCJhY3Rpb25VcGRhdGUiLCJvcmlnaW5hbERpc3BsYXlTdHlsZSIsInVwZGF0ZUNhcmQiLCJzYXZlRGF0YSIsImh0bW1sQ2FyZCIsIkNhcmRDbGFzcyIsInVuc2V0RGF0YSIsInRvZ2dsZURhdGEiLCJiTmFtZSIsIl9wYXJ0aWNpcGFudCIsIl9mZXRjaCIsIl9kb2MiLCJpc0FjdG9yIiwiaGFzQWN0b3IiLCJoYXNWZWhpY2xlIiwiaXNBY3RpdmUiLCJ2ZWhpY2xlIiwiZHJpdmVyIiwiX2RyaXZlciIsInZlaGljbGVLZXkiLCJfdmVoaWNsZSIsImhhc1ZhbGlkTW92IiwiaGFzTWF4Qm9udXNEaWNlIiwiYWRkQm9udXNEaWNlIiwicmVtb3ZlQm9udXNEaWNlIiwicmVzZXRCb251c0RpY2UiLCJoYXNCb251c0RpY2UiLCJoYXNPbmVCb251c0RpY2UiLCJoYXNUd29Cb251c0RpY2UiLCJjYW5Bc3Npc3QiLCJhc3Npc3QiLCJjYW5CZUNhdXRpb3VzIiwiaGFzRHJpdmVyIiwiaGFzVmFsaWREZXgiLCJoYXNBR3VuUmVhZHkiLCJpc0NoYXNlciIsImNoYXNlciIsImlzUHJleSIsImlzVmFsaWQiLCJtb3ZBZGp1c3RtZW50Iiwic3BlZWRDaGVjayIsInJvbGxEYXRhU3RyaW5nIiwiYWRqdXN0ZWRNb3YiLCJoYXNNb3ZBZGp1c3RtZW50IiwiaGFzQm9udXNNb3YiLCJoYXNNYWx1c01vdiIsInRvb1Nsb3ciLCJleGNsdWRlZCIsImluY2x1ZGVJbkNoYXNlIiwic2xvd2VzdCIsImZhc3Rlc3QiLCJjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMiLCJtaW5Nb3YiLCJtb3ZlbWVudEFjdGlvbiIsImN1cnJlbnRNb3ZlbWVudEFjdGlvbnMiLCJoYXNNYXhNdnRBY3Rpb25zIiwiaGFzTm9NdnRBY3Rpb25zIiwiYWRkTW92ZW1lbnRBY3Rpb25zIiwiYWx0ZXJNb3ZlbWVudEFjdGlvbnMiLCJtb3ZlbWVudEFjdGlvbkFycmF5IiwiYmFzZUFycmF5IiwiZmlsbCIsImlubGluZVJvbGwiLCJtb2RpZmllckNzcyIsImhhc09wdGlvbnMiLCJnYW1lSXRlbSIsInJlZiIsInJlZlNldCIsImlzQ2hhcmFjdGVyaXN0aWMiLCJjYW5CZVJvbGxlZCIsInNvcnRCeVJvbGVBbmREZXgiLCJDaGFzZU9ic3RhY2xlQ2FyZCIsInN0cmluZ3MiLCJ0b3RhbEFjdGlvbkNvc3QiLCJicmVha2FibGVPYnN0YWNsZSIsIm9ic3RhY2xlIiwiYmFycmllciIsImhhc0hpdFBvaW50cyIsInZhbGlkQ2hlY2siLCJzdGF0ZXMiLCJvYnN0YWNsZURlZmluZWQiLCJoYXphcmQiLCJ0cnlUb05lZ290aWF0ZSIsInRyeVRvQnJlYWsiLCJicmVha09yTmVnb3RpYXRlRGVmaW5lZCIsInBhcnRpY2lwYW50IiwiY2hhc2UiLCJnZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsInBhcnRpY2lwYW50VXVpZCIsInZhbGlkU2tpbGwiLCJjaGVja1RocmVzaG9sZCIsImFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsImR1bW15QWN0b3IiLCJjYW5UYWtlQ2F1dGlvdXNBcHByb2FjaCIsImN1c3RvbVdlYXBvbiIsIndlYXBvbkNob2ljZSIsImNoZWNrUm9sbFJlcXVlc3QiLCJjYW5Bc2tSb2xsIiwiRW50ZXJWYWx1ZVRpdGxlIiwiZGFtYWdlU3RhdHVzIiwib2JzdGFjbGVEYW1hZ2VSb2xsIiwib2JzdGFjbGVEYW1hZ2VSb2xsZWQiLCJvYnN0YWNsZURhbWFnZSIsImlubGluZURhbWFnZVJvbGwiLCJ0b3RhbENhdXRpb3VzQXBwcm9hY2giLCJjYXV0aW91c1N0YXR1cyIsImNhdXRpb3VzQXBwcm9hY2hUeXBlIiwiY29uc3VtZUJvbnVzRGljZSIsIm1vdmVQbGF5ZXIiLCJvYnN0YWNsZVBhc3NlZCIsImNoZWNrRmFpbGVkIiwicGxheWVyQWN0aW9uRGVmaW5lZCIsInBsYXllckludGVudGlvbnMiLCJjaGVja1JvbGxlZCIsImNhcmRSZXNvbHZlZCIsInBsYXllckRhbWFnZVRha2VuIiwib2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCIsImxpc3RDaGFuZ2VzIiwiaGFzRGFtYWdlIiwiaW5saW5lRGFtYWdlVGFrZW5Sb2xsIiwiZmFpbGVkRGFtYWdlUm9sbCIsInRvdGFsUGxheWVyRGFtYWdlVGFrZW4iLCJoYXNBY3Rpb25Db3N0IiwiYWN0aW9uTG9zdCIsImlubGluZUFjdGlvbkxvc3RSb2xsIiwiZmFpbGVkQWN0aW9uUm9sbCIsImZpbmFsT3V0Y29tZSIsInRvdGFsRGFtYWdlIiwicmVmbGVjdE9ic3RhbGVDaGFuZ2VzIiwiZmFpbGVkQ29uc2VxdWVuY2VzUm9sbGVkIiwidG90YWxPYnN0YWNsZURhbWFnZSIsIm9ic3RhY2xlRGVzdG95ZWQiLCJIaXRQb2ludHMiLCJhY3RpdmVQYXJ0aWNpcGFudERhdGEiLCJvYnN0YWNsZURldGFpbHMiLCJwYXJ0aWNpcGFudERhdGEiLCJnZXRQYXJ0aWNpcGFudERhdGEiLCJnZXRMb2NhdGlvbkRhdGEiLCJsb2NhdGlvblV1aWQiLCJjaGFzZVV1aWQiLCJfY2hhc2UiLCJhY3RvclNraWxsIiwidmFsaWRGYWlsZWRSb2xscyIsImZhaWxlZENoZWNrRGFtYWdlIiwiYWN0aW9uQ29zdCIsImZhaWxlZEFjdGlvbkNvc3QiLCJ3ZWFwb25zT3B0aW9ucyIsIml0ZW1UeXBlcyIsInciLCJhaGJkIiwiY3VzdG9tV2VhcG9uRGFtYWdlIiwidXNlZFdlYXBvbiIsImluZmxpY3RlZERhbWFnZUZvcm11bGEiLCJ2YWxpZE9ic3RhY2xlRGFtYWdlIiwiZGFtYWdlUm9sbFJlcXVlc3QiLCJ2YWxpZGF0ZUNhcmQiLCJsb2FjdGlvbkNoYW5nZWQiLCJwYXJ0aWNpcGFudENoYWdlZCIsIm9ic3RhY2xlVXBkYXRlIiwicGFydGljaXBhbnRVcGRhdGUiLCJkaWZmIiwibmV3IiwicmVtYWluaW5nSHAiLCJ0YXJnZXRMb2NhdGlvbiIsImZvcndhcmQiLCJnZXRMb2NhdGlvblNoaWZ0IiwibW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbiIsInNjcm9sbFRvTG9jYXRpb24iLCJhY3RpdmF0ZUxvY2F0aW9uIiwidXBkYXRlTG9jYXRpb24iLCJ1cGRhdGVQYXJ0aWNpcGFudCIsImFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybiIsImRlZmluZU9ic3RhY2xlIiwidHJ5VG9OZWdvdGlhdGVPYnN0YWNsZSIsInRyeVRvQnJlYWtEb3duT2JzdGFjbGUiLCJjYW5jZWxPYnN0YWNsZURlZmluaXRpb24iLCJjYW5jZWxCcmVha09yUGFzc0Nob2ljZSIsInJlcXVlc3RSb2xsIiwidGFrZUNhdXRpb3VzQXBwcm9hY2giLCJyb2xsU2tpbGxDaGVjayIsInVzZUx1Y2siLCJyb2xsRmFpbENvbnNlcXVlbmNlcyIsImFza1JvbGxPYnN0YWNsZURhbWFnZSIsInJvbGxPYnN0YWNsZURhbWFnZSIsIm5hbWVzIiwibmV3T2JzdGFjbGUiLCJDb0M3Q2hhc2UiLCJwYXJ0aWNpcGFudHMiLCJwTGlzdCIsInByZXlzIiwiY2hhc2VycyIsInBhcnRpY3BhbnQiLCJwYXJ0aWNpcGFudHNPYmplY3QiLCJnZXRQYXJ0aWNpcGFudExvY2F0aW9uIiwiYWN0aXZlQWN0b3IiLCJwYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92IiwiYWN0dWFsUGFydGljaXBhbnRzIiwicGFydGljaXBhbnRzQnlJbml0aWF0aXZlIiwiYWxsSGF2ZVZhbGlkTW92IiwiZXZlcnkiLCJhbGxIYXZlU3BlZWRSb2xsIiwibG9jYXRpb25zIiwibHAiLCJnZXRQYXJ0aWNpcGFudCIsIm5leHRBY3RpdmVQYXJ0aWNpcGFudCIsInNsb3dlc3RQcmV5IiwiZmFzdGVzdENoYXNlciIsImluY2x1ZGVMYXRlY29tZXJzIiwiaW5jbHVkZUVzY2FwZWQiLCJzbG93ZXN0UGFydGljaXBhbnQiLCJ1cGRhdGVQYXJ0aWNpcGFudHMiLCJwYXJ0aWNpcGFudHNEYXRhIiwiY2xlYW5QYXJ0aWNpcGFudExpc3QiLCJwYXJ0aWNpYW50VXVpZCIsInBhcnRpY2lwYW50SW5kZXgiLCJvdmVyd3JpdGUiLCJhc3Npc3RQYXJ0aWNpcGFudCIsImFzc2lzdGFudFV1aWQiLCJiZW5lZmljaWFyeVV1aWQiLCJhc3Npc3RhbnQiLCJiZW5lZmljaWFyeSIsImFzc2lzdGFudEluZGV4IiwiYmVuZWZpY2lhcnlJbmRleCIsInVzZU1vdmVtZW50QWN0aW9ucyIsImFjdGlvbnMiLCJ0b2dnbGVCb251c0RpY2UiLCJkaWNlTnVtYmVyIiwiY2F1dGlvdXNBcHByb2FjaCIsImFsdGVyUGFydGljaXBhbnRNb3ZlbWVudEFjdGlvbiIsImFjdGl2ZVBhcnRpY2lwYW50IiwiYWN0aXZhdGVQYXJ0aWNpcGFudCIsImRhdGFVcGRhdGUiLCJnZXRBY3RpdmF0ZVBhcnRpY2lwYW50VXBkYXRlRGF0YSIsImFjdGl2ZUxvY2F0aW9uIiwicFV1aWQiLCJwYXJ0aWNpcGFudHNEYXRhVXBkYXRlIiwicGFydGljaXBhbnRMb2NhdGlvbiIsImxvY2F0aW9uc0RhdGFVcGRhdGUiLCJnZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YSIsImNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24iLCJnZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbiIsImFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayIsIm1vdmVQYXJ0aWNpcGFudCIsInByb2dyZXNzVG9OZXh0Um91bmQiLCJyb2xsVXVpZCIsIm1ldGhvZCIsImluaXRUcmFjayIsInByb2Nlc3NMb2NhdGlvbnMiLCJkdXBsaWNhdGVEYXRhIiwibGFzdCIsInN0YXJ0aW5nTGluZSIsImxvY2F0aW9uc0luZGV4U3RhcnQiLCJpbml0SW5kZXhTdGFydCIsImxvY2F0aW9uc0xlbmd0aCIsInN0YXJ0aW5nSW5kZXgiLCJnZW5lcmF0ZU5ld1V1aWQiLCJjaGFzZUxvY2F0aW9ucyIsImVuZCIsImNoYXNlVHJhY2siLCJjaGFzZXJzTWluTW92IiwiZmluZE1pbk1vdiIsImNoYXNlcnNNYXhNb3YiLCJmaW5kTWF4TW92IiwicHJleXNNaW5Nb3YiLCJwcmV5c01heE1vdiIsInN0YXJ0aW5nUmFuZ2UiLCJ1cGRhdGVMb2NhdGlvbnNMaXN0IiwidXBkYXRlZExpc3QiLCJjbGVhbkxvY2F0aW9uc0xpc3QiLCJsb2NhdGlvbkluZGV4IiwicGFydGlwYW50c1V1aWRBcnJheSIsImluc2VydExvY2F0aW9uIiwiaW5zZXJ0QXRVdWlkIiwibmV3TG9jYXRpb25JbmRleCIsIm5ld0xvY2F0aW9uIiwibG9jRGF0YSIsInJlbW92ZUxvY2F0aW9uIiwiZ2V0Q2xlYXJBY3RpdmVMb2NhdGlvblVwZGF0ZURhdGEiLCJoYXNQYXJ0aWNpcGFudCIsImFjdGl2ZUFjdG9ySGFzU2tpbGwiLCJhY3RpdmVBY3RvclRlc3QiLCJwcmV2aW91c0xvY2F0aW9uIiwiYWN0aXZlSW5kZXgiLCJuZXh0TG9jYXRpb24iLCJsb2NhdG9yRHJvcHBlZCIsInNldExvY2F0aW9uQ29vcmRpbmF0ZXMiLCJjb29yZGluYXRlcyIsImNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcyIsImNsZWFyTG9jYXRpb25Db29yZGluYXRlcyIsImN1dFRvVGhlQ2hhc2UiLCJzdGFydCIsInJlc3RhcnQiLCJzZXRjaGFzZVRyYWNrU2Nyb2xsIiwic3RvcCIsImRlc3RpbmF0aW9uSW5kZXgiLCJyZW1vdmVQYXJ0aWNpcGFudCIsIm5ld1BhcnRpY2lwYW50c0RhdGEiLCJsb2NhdGlvbnNEYXRhIiwiYWRkUGFydGljaXBhbnQiLCJ1bmlxdWUiLCJyZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyIsImVkaXRQYXJ0aWNpcGFudCIsImxvY2F0aW9uTW92ZWQiLCJvcmlnaW5JbmRleCIsInRvdGFsTW92ZSIsIm9sZFBhcnRpY2lwYW50c0xpc3QiLCJtb3ZlVG9rZW4iLCJwYXJ0aWNwYW50RG9jdW1lbnQiLCJmb3VuZFRva2VucyIsInZpZXdlZCIsInRhcmdldFJlY3QiLCJQSVhJIiwiUmVjdGFuZ2xlIiwiZm91bmRGcmVlU3BhY2UiLCJvdmVybGFwaW5nVG9rZW4iLCJib3VuZHMiLCJpbnRlcnNlY3RzIiwic2hvd1Rva2VuTW92ZW1lbnQiLCJhbmltYXRlIiwidG8iLCJjaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvbiIsImFjdGl2ZUxvY2F0aW9uRWxlbWVudCIsImxlZnRTY3JvbGwiLCJvZmZzZXRMZWZ0IiwiY2xpZW50V2lkdGgiLCJwcmV2IiwicmVtU3RyaW5nIiwicmVtU2l6ZSIsInBDb3VudCIsIl90YWJzIiwiYWN0aXZlQWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MiLCJwYXJ0aWNpY3BhbnREYXRhIiwiSW50bCIsIkNvbGxhdG9yIiwiY29tcGFyZSIsImFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljc1Nob3J0IiwiQ29DN1NraWxsIiwibmV3UHJvcGVydGllcyIsImhhc0FjdGl2ZUVmZmVjdHMiLCJhY3RpdmVFZmZlY3RzIiwiZWZmZWN0S2V5RnVsbCIsImVmZmVjdEtleVNob3J0IiwiZGVsdGEiLCJleHAiLCJDb0M3VmVoaWNsZSIsIkNvQzdEZWNhZGVyRGllIiwidGVybURhdGEiLCJERU5PTUlOQVRJT04iLCJDb0M3RGVjYWRlckRpZU90aGVyIiwiU0VUVElOR1MiLCJwdWxwUnVsZXMiLCJpbml0aWF0aXZlUnVsZSIsImNob2ljZXMiLCJvbkNoYW5nZSIsInJ1bGUiLCJfc2V0SW5pdGlhdGl2ZU9wdGlvbnMiLCJhbGxvd015dGhvc0hhcmRlbmVkIiwicHVscFJ1bGVEb3VibGVNYXhIZWFsdGgiLCJwdWxwUnVsZVRhbGVudHMiLCJwdWxwUnVsZUZhc3RlclJlY292ZXJ5IiwicHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcyIsImRlY2ltYWxzIiwiQ29tYmF0IiwiQ29DN0dhbWVSdWxlU2V0dGluZ3MiLCJ0cnVlIiwiZmFsc2UiLCJzZXR0aW5nIiwicHVscFNlbGVjdGlvbiIsInJlZ2lzdGVyU2V0dGluZ3MiLCJvbkNoYW5nZVB1bHBTZWxlY3QiLCJvbkNsaWNrUHVscCIsIm9uUmVzZXREZWZhdWx0cyIsImNoZWNrYm94IiwiQ29DN0FyY2hldHlwZVNoZWV0IiwiY2hhcmFjTmFtZSIsImVucmljaGVkU3VnZ2VzdGVkT2NjdXBhdGlvbnMiLCJlbnJpY2hlZFN1Z2dlc3RlZFRyYWl0cyIsImNvcmVDaGFyYWN0ZXJpc3RpY3NTdHJpbmciLCJDb0M3QXJtb3JTaGVldCIsIkNvQzdCb29rU2hlZXQiLCJzcGVsbHNMZWFybmVkIiwiZXhoYXVzdGVkIiwic3R1ZHlDb21wbGV0ZWQiLCJzcGVsbExpc3RFbXB0eSIsImVucmljaGVkQ29udGVudCIsIl9vbkRlbGV0ZSIsIl9vblNwZWxsRGV0YWlsIiwibW9kaWZ5T3RoZXJzR2FpbnMiLCJtb2RpZnlUeXBlIiwiQ29DN0NoYXJhY3RlclNoZWV0VjMiLCJDbGFzc05hbWUiLCJzaGVldENsYXNzZXMiLCJpbWdTYXR1cmF0aW9uIiwiYmlvZ3JhcGh5U2VjdGlvbnMiLCJlbnJpY2hlZCIsInNob3dQYXJ0VmFsdWVzIiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiX25hdlNlbGVjdG9yIiwiYWN0aXZhdGUiLCJvYmplY3RGaXQiLCJDb0M3Q2hhcmFjdGVyU2hlZXRNaW5pbWl6ZWQiLCJDb0M3Q29udGFpbmVyU2hlZXQiLCJzbGlkZVRvZ2dsZSIsIkNvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIiLCJwZXJtaXNzaW9ucyIsIl9vbkRyb3BQYXJ0aWNpcGFudCIsImRyYWdzdGFydCIsIl9vblRva2VuU2VsZWN0b3JEcmFnU3RhcnQiLCJfb25BY3Rpb24iLCJ2YWxpZGF0ZVBhcnRpY2lwYW50Iiwic3BlZWRDaGVja1JlYWRPbmx5IiwiaW5pdFJlYWRPbmx5Iiwib3B0aW9uc0xpc3QiLCJza2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0IiwiZHJvcFN0cmluZyIsImFkZFRva2VuVG9DaGFzZSIsIm92ZXJyaWRlTW92ZW1lbnRBY3Rpb24iLCJyZWNhbGN1bGF0aW9uTmVlZGVkIiwicGFydGljaXBhbnRFeGNsdWRlZCIsIm1vdmVtZW50QWN0aW9uRGVsdGEiLCJpbmNsdWRlTGFzdENvbW1lcnMiLCJleGNsdWRlZEJlY2F1c2UiLCJDb0M3Q2hhc2VTaGVldCIsIl9vbkRyYWdFbnRlclBhcnRpY2lwYW50IiwiX29uRHJhZ0xlYXZlUGFydGljaXBhbnQiLCJfb25DaGFuZ2VTaWRlIiwiX29uRGVsZXRlUGFydGljaXBhbnQiLCJfb25SZXNldFJvbGwiLCJfb25EZWxldGVEcml2ZXIiLCJfb25BZGRQYXJ0aWNpcGFudCIsIl9vblJvbGxQYXJ0aWNpcGFudCIsIl9vbkxvY2F0aW9uQ2xpY2siLCJfb25PYnN0YWNsZVR5cGVDbGljayIsIl9vblBhcnRpY2lwYW50Q29udHJvbENsaWNrZWQiLCJfb25DaGFzZUNvbnRyb2xDbGlja2VkIiwiX29uTG9jYXRpb25Db250cm9sQ2xpY2siLCJfY2FuUGluTG9jYXRpb25EcmFnU3RhcnQiLCJfb25QaW5Mb2NhdGlvbkRyYWdTdGFydCIsIl9vbkNoYXNlUGFydGljaXBhbnRDbGljayIsIl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0IiwiX2NhbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCIsIl9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQiLCJfb25DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AiLCJkcmFnb3ZlciIsIl9vbkRyYWdFbnRlciIsIl9vbkRyYWdMZWF2ZSIsIl9nZXRTdWJtaXREYXRhIiwiZWRpdG9ycyIsImNsZWFuZWQiLCJjbGVhbiIsIm9yaWdpbmFsTG9jYXRpb24iLCJzdWJUeXBlIiwiZmluZFBhcnRpY2lwYW50SW5kZXgiLCJzZXRTY3JvbGwiLCJpbml0aWFsT3BlbmluZyIsInNjcm9sbCIsImFjdGl2YXRlVGFiIiwic2Nyb2xsVG8iLCJiZWhhdmlvciIsImZpbmRMb2NhdGlvbkluZGV4IiwiZmluZExvY2F0aW9uIiwibFV1aWQiLCJ0b2dnbGVQYXJ0aWNpcGFudEd1biIsIl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucyIsImRyYWdJY29uIiwic2V0RHJhZ0ltYWdlIiwibG9jYXRpb25FbGVtZW50IiwiZHJhZ0V2ZW50Iiwib2xkTG9jYXRpb24iLCJfb25EcmFnT3ZlciIsImFsdGVyUGFydGljaXBhbnQiLCJzdGFuZGJ5VGV4dCIsInN0YW5kYnlSaWdodEljb24iLCJvbGRQYXJ0aWNpcGFudCIsInRwIiwiZ2V0VHlwZSIsIkNvQzdJdGVtU2hlZXRWMiIsIkNvQzdJdGVtU2hlZXQiLCJDb0M3Sm91cm5hbFNoZWV0IiwiSm91cm5hbFNoZWV0IiwiQ29DN01hY3JvQ29uZmlnIiwiTWFjcm9Db25maWciLCJDb0M3UGxheWxpc3RDb25maWciLCJQbGF5bGlzdENvbmZpZyIsIkNvQzdSb2xsVGFibGVDb25maWciLCJSb2xsVGFibGVDb25maWciLCJDb0M3U2NlbmVDb25maWciLCJTY2VuZUNvbmZpZyIsIkNvQzdTZXR1cFNoZWV0IiwiX29uQWRkQmlvIiwiX29uUmVtb3ZlU2VjdGlvbiIsIm90aGVySXRlbXMiLCJpdGVtc0xpc3RFbXB0eSIsIkNvQzdTa2lsbFNoZWV0IiwiX3NoZWV0VGFiIiwiaGFkTm9uQ2hhcmFjdGVyT3duZXIiLCJpc1NwZWNpYWxpemVkIiwiY2FuTW9kaWZ5U3BlYyIsIkNvQzdTcGVsbFNoZWV0IiwiQ29DN1N0YXR1c1NoZWV0Iiwic3RhdHVzVHlwZSIsImVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyIsIkNvQzdUYWxlbnRTaGVldCIsInRhbGVudFR5cGUiLCJDb0M3VmVoaWNsZVNoZWV0IiwiYXJtZWQiLCJfb25BZGRBcm1vciIsIl9vblJlbW92ZUFybW9yIiwiX29uVG9nZ2xlRXhwYW5kIiwib2xkU2l6ZSIsIkNvQzdXZWFwb25TaGVldCIsImNvbWJhdFNraWxsIiwicHJpY2UiLCJlbnJpY2hlZERlc2NyaXB0aW9uU3BlY2lhbCIsIl9vblByb3BlcnR5Q2xpY2siLCJjb21wZW5kaXVtRmlsdGVyIiwib2xkU2VhcmNoRmlsdGVyIiwiQ29tcGVuZGl1bSIsIl9vblNlYXJjaEZpbHRlciIsInF1ZXJ5Iiwicmd4IiwiZmlsdGVycyIsImlucHV0U2VsZWN0b3IiLCJ0eXBlU2VsZWN0IiwiZXJhU2VsZWN0IiwiaXNOYW1lU2VhcmNoIiwiaXNTZWFyY2giLCJlbnRyeUlkcyIsIlNldCIsImZvbGRlcklkcyIsImF1dG9FeHBhbmRGb2xkZXJJZHMiLCJpbmNsdWRlRm9sZGVyIiwiYXV0b0V4cGFuZCIsImZvbGRlcklkIiwiX21hdGNoU2VhcmNoRm9sZGVycyIsIm1hdGNoZWRGb2xkZXJJZHMiLCJlbnRyeUlkIiwiX2dldEVudHJ5SWQiLCJtYXRjaE5hbWUiLCJTZWFyY2hGaWx0ZXIiLCJjbGVhblF1ZXJ5IiwiX2dldEVudHJ5TmFtZSIsIm1hdGNoVHlwZSIsIm1hdGNoRXJhcyIsIm1hdGNoU2VhcmNoRW50cmllc0l0ZW0iLCJfZXhwYW5kZWQiLCJpbmRleGVkIiwiZ2V0SW5kZXgiLCJzZWxlY3RlZFR5cGUiLCJmaWx0ZXJDb0M3Iiwic2VsZWN0ZWRFcmEiLCJncm91cFR5cGVzIiwiZ3JvdXBUeXBlIiwidW5jb21tb24iLCJDb0NJRCIsImNvbXBlbmRpdW1JbmRleEZpZWxkcyIsIkpvdXJuYWxFbnRyeSIsIlBsYXlsaXN0IiwiUm9sbFRhYmxlIiwiU2NlbmUiLCJnYW1lUHJvcGVydHlMb29rdXAiLCJkb2N1bWVudE5hbWVMb29rdXAiLCJlcmFUZXh0IiwibGFuZ0ZhbGxiYWNrIiwibm90bWlzc2luZyIsInNwbGl0cyIsInJlZ0V4UGFydHMiLCJmcm9tQ29DSURSZWdleEFsbCIsImNhbmRpZGF0ZXMiLCJmcm9tQ29DSURSZWdleEFsbE1peGVkIiwiZmlsdGVyQnlMYW5ndWFnZSIsImNvbXBhcmVDb0NJRFByaW8iLCJvbmx5RG9jdW1lbnRzIiwiY2FuZGlkYXRlIiwiZG9jc0Zyb21Xb3JsZCIsInByb2dyZXNzQmFyIiwiaW5kZXhlc0Zyb21Db21wZW5kaWEiLCJTY2VuZU5hdmlnYXRpb24iLCJkaXNwbGF5UHJvZ3Jlc3NCYXIiLCJwY3QiLCJnYW1lUHJvcGVydHkiLCJnZXRHYW1lUHJvcGVydHkiLCJjYW5kaWRhdGVEb2N1bWVudHMiLCJtYXRjaGluZ0VyYXMiLCJnZXREb2N1bWVudFR5cGUiLCJpbmRleERvY3VtZW50cyIsImFwIiwiYnAiLCJhbyIsImFic3RyYWN0IiwiRGF0YU1vZGVsIiwiamUiLCJydCIsIkNhcmQiLCJpbmRleGVzIiwiZG9jdW1lbnRzRnJvbVdvcmxkIiwiZG9jdW1lbnRzRnJvbUNvbXBlbmRpYSIsInJlZ2lvbkJlaGF2aW9ycyIsIlJlZ2lvbkJlaGF2aW9yVHlwZUNsYXNzIiwiUmVnaW9uQmVoYXZpb3JUeXBlIiwiQ29DN0NsaWNrYWJsZUV2ZW50cyIsImluaXRTZWxmIiwiUmVnaW9uQmVoYXZpb3IiLCJkYXRhTW9kZWxzIiwiY29jN0NsaWNrYWJsZUV2ZW50cyIsInR5cGVJY29ucyIsIkRvY3VtZW50U2hlZXRDb25maWciLCJyZWdpc3RlclNoZWV0IiwiYXBwbGljYXRpb25zIiwic2hlZXRzIiwiUmVnaW9uQmVoYXZpb3JDb25maWciLCJtYWtlRGVmYXVsdCIsIm9sZE9uQ2xpY2tMZWZ0IiwiVG9rZW5MYXllciIsIl9vbkNsaWNrTGVmdCIsImFjdGl2ZUxheWVyIiwidG9Mb2NhbCIsInJlZ2lvbiIsInJlZ2lvbnMiLCJiZWhhdmlvcnMiLCJwb2x5Z29uVHJlZSIsInRlc3RQb2ludCIsIl9oYW5kbGVNb3VzZU92ZXJFdmVudCIsIl9oYW5kbGVMZWZ0Q2xpY2tFdmVudCIsIm9sZE9uQ2xpY2tSaWdodCIsIl9vbkNsaWNrUmlnaHQiLCJfaGFuZGxlUmlnaHRDbGlja0V2ZW50IiwicG9pbnRlciIsInJlbmRlcmVyIiwiZXZlbnRzIiwic2V0UG9pbnRlciIsImN1cnNvciIsImRlZmluZVNjaGVtYSIsIm1vdXNlT3ZlciIsIkphdmFTY3JpcHRGaWVsZCIsImxlZnRDbGljayIsInJpZ2h0Q2xpY2siLCJBc3luY0Z1bmN0aW9uIiwiZ2xvYmFsVGhpcyIsIkNsaWNrUmVnaW9uTGVmdFV1aWQiLCJDbGlja1JlZ2lvblJpZ2h0VXVpZCIsImhhc1Blcm1pc3Npb25Eb2N1bWVudCIsImRvY3VtZW50VXVpZCIsIkluU2NlbmVSZWxhdGl2ZVRlbGVwb3J0IiwiZGVzdGluYXRpb25SZWdpb24iLCJzb3VyY2VUTCIsInNoYXBlcyIsIlBvbHlnb25TaGFwZURhdGEiLCJSZWN0YW5nbGVTaGFwZURhdGEiLCJkZXN0aW5hdGlvblRMIiwiZGVzdGluYXRpb25YIiwiZGVzdGluYXRpb25ZIiwic3RvcEFuaW1hdGlvbiIsIk1hcFBpblRvZ2dsZSIsIk5vdGVzTGF5ZXIiLCJUT0dHTEVfU0VUVElORyIsImpvdXJuYWxQYWdlVXVpZHMiLCJwZXJtaXNzaW9uIiwicGVybWlzc2lvblRydWUiLCJwZXJtaXNzaW9uRmFsc2UiLCJub3RlVXVpZHMiLCJvcGVuRG9jdW1lbnQiLCJwYWdlSWQiLCJhbmNob3IiLCJ0b2dnbGVUaWxlSm91cm5hbFBhZ2VzIiwidGlsZVV1aWRzIiwiam91cm5hbFV1aWRzIiwicGFnZVV1aWRzIiwicGFnZVBlcm1pc3Npb24iLCJ0b1NjZW5lIiwic2NlbmVVdWlkIiwidmlldyIsImxvYWRUZW1wbGF0ZXMiLCJwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyIsInJlZ2lzdGVyTWVudSIsInJlc3RyaWN0ZWQiLCJ3b3JsZCIsIlkiLCJOIiwibm9ib2R5IiwiZXZlcnlvbmUiLCJpZ25vcmUiLCJhbHdheXMiLCJjcmVhdGlvbiIsIm5ldmVyIiwiX3NldFJvb3RGb250U2l6ZSIsInNpZGViYXIiLCJjb250YWluIiwiaG9va3MiLCJBY3RvcnMiLCJ1bnJlZ2lzdGVyU2hlZXQiLCJJdGVtcyIsIlNjZW5lcyIsIkpvdXJuYWwiLCJSb2xsVGFibGVzIiwiTWFjcm9zIiwiUGxheWxpc3RzIiwiSGFuZGxlYmFycyIsInJlZ2lzdGVySGVscGVyIiwiaGFzaCIsIkRpY2VGYWN0b3J5Iiwic3lzdGVtcyIsImQxMDAiLCJkaWNlRGVjYWRlciIsImdldFByb3RvdHlwZU9mIiwia2V5dmFsIiwicmVsYXRpdmUiLCJzaWRlYmFySWNvbiIsImNyZWF0ZUFuY2hvciIsImhlaWdodFRleHQiLCJoZWlnaHRUaXAiLCJ3aWR0aFRpcCIsImNsZWFyVGltZW91dCIsIkNvQzdUb3VyIiwiVG91ciIsIndhaXRGb3JFbGVtZW50IiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsIm9ic2VydmVyIiwiZGlzY29ubmVjdCIsIm9ic2VydmUiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiX3ByZVN0ZXAiLCJzdGVwSW5kZXgiLCJjdXJyZW50U3RlcCIsInNpZGViYXJUYWIiLCJfcG9zdFN0ZXAiLCJoYXNOZXh0IiwiaXNSZXNldHRpbmciLCJyZXNldCIsIkVuYWJsZVZhcmlhbnRSdWxlc0VuIiwiY2FuQmVSZXN1bWVkIiwic3RlcHMiLCJsb2NhbGl6YXRpb24iLCJFbmFibGVWYXJpYW50UnVsZXNGciIsImluc3RydWN0aW9uc1ZlcnNpb24iLCJyZWFkTWUiLCJ1ayIsInRvdXJzIiwidG91ck5hbWUiLCJyZWdpc3RlclRvdXJzIiwiQ29DN0hvb2tzIiwibGlzdGVuIiwidG9rZW5Eb2N1bWVudCIsImNyYWV0b3JJZCIsIl9vYmplY3QiLCJhZGREaWNlUHJlc2V0IiwiZm9udFNjYWxlIiwiZW50aXR5Q3JlYXRlU2VsZWN0VGFnIiwiZW50aXR5U29ydGVkTGlzdCIsInNob3dFeHBlcmltZW50YWwiLCJlbnRpdHlPcHRpb24iLCJjYXBpdGFsaXplIiwic2Vjb25kIiwiaW1hZ2VSZXBsYWNlZCIsInRleHRSZXBsYWNlZCIsInBsYXllckxpc3QiLCJpbnNlcnRBZnRlciIsImRpZVRlcm1zIiwidGFnIiwiZ21jcmVhdGVtZXNzYWdlYXMiLCJtZWxlZVRhcmdldCIsImdtdHJhZGVpdGVtdG8iLCJDb0M3U3lzdGVtU29ja2V0IiwiY2FsbFNvY2tldCIsInJlcXVlc3RLZWVwZXJBY3Rpb24iLCJyZXF1ZXN0VXNlckFjdGlvbiIsImVycm9ySWZNaXNzaW5nIiwiaW5jbHVkZVNlbGYiLCJfb25MZWZ0Q2xpY2siLCJzeXN0ZW1UYWIiLCJiZWZvcmUiLCJjYXJkY2xhc3MiLCJzb2NrZXRsaWIiLCJyZWdpc3RlclN5c3RlbSIsImluaXRFQ0MiLCJjb21tYW5kcyIsInJlcyIsInRvTG9jYWxpemUiLCJsb2NhbGl6ZWQiLCJlZmZlY3RJbmRleCIsImVmZmVjdE5hbWVLZXkiLCJzdGF0dXNLZXkiLCJkaXJlY3RvcnkiLCJJdGVtRGlyZWN0b3J5IiwiaXRlbUVsZW1lbnQiLCJfdGFibGVTZXR0aW5nc0NoYW5nZWQiLCJhY3RpdmF0ZUdsb2JhbExpc3RlbmVyIiwidGFibGVDaG9pY2UiLCJib3V0T2ZNYWRuZXNzX1N1bW1hcnkiLCJib3V0T2ZNYWRuZXNzX1JlYWxUaW1lIiwiY2hhcmFjdGVyU2hlZXQiLCJub3RlIiwiY29udHJvbEljb24iLCJiZyIsImNsZWFyIiwiYXBwbGljYXRpb24iLCJzdWJoZWFkaW5nIiwibm9kZSIsInNoZWV0Q2xhc3MiLCJtYXJnaW5MZWZ0Il0sInNvdXJjZVJvb3QiOiIifQ==